{"version":3,"sources":["webpack:///./src/js/page/demo/index.js","webpack:///./~/_tmodjs-loader@1.0.1@tmodjs-loader/runtime.js?5041****","webpack:///./src/js/module/popup/alert.js?466a***","webpack:///./src/js/module/popup/confirm.js?0fbf*","webpack:///./src/js/utils/truncate.js?b86a","webpack:///./src/js/utils/byteLen.js?1ae0","webpack:///./src/js/utils/trim.js?2399","webpack:///./src/js/plugin/jquery.spinner.js","webpack:///./src/js/module/popup/deliveryAddr/index.js","webpack:///./src/js/module/popup/deliveryAddr/content.tpl","webpack:///./src/js/module/address.js","webpack:///./src/js/plugin/jquery.selects.js","webpack:///./src/js/plugin/jquery.splendid.textchange.js","webpack:///./src/js/module/popup/upload/dialog.js","webpack:///./src/js/module/popup/upload/content.tpl","webpack:///./src/js/module/popup/circle/dialog.js","webpack:///./src/js/module/popup/circle/content.tpl","webpack:///./src/js/module/tmodHelper/randomShowPic.js","webpack:///./src/js/module/share.js","webpack:///./src/js/utils/getQRCode.js","webpack:///./src/js/utils/fecha.js"],"names":["fetch","require","Pubsub","url","truncate","testStr","console","log","spinner","deliveryAddrPop","uploadPop","circlePop","alert","confirm","share","shareItem","dateFormat","format","Date","now","fn1","data","title","sub","pub","$","delay","min","max","beforeChange","rangemin","rangemax","changed","e","newVal","oldVal","arguments","Dialog","noop","create","content","options","defaults","fixed","modal","autofocus","className","okCls","ok","extend","d","header","_$","css","show","module","exports","cancel","btnWrapCls","byteLen","isHighSurrogate","codePoint","isLowSurrogate","string","byteLength","Error","charLength","length","curByteLength","segment","i","charCodeAt","slice","str","replace","trim","spinningTimer","Spinner","Spinning","$element","$el","rules","rule","Number","on","proxy","preventDefault","oldValue","value","val","dir","which","spin","step","precision","currency","quantity","percent","month","day","hour","minute","second","prototype","prop","siblings","hasClass","isFunction","call","multipler","v","undefined","numeric","valid","validate","trigger","toFixed","clearTimeout","setTimeout","parseFloat","parseInt","isFinite","setMin","setMax","element","$spinning","find","spinning","changing","constructor","currentTarget","type","ms","fn","bindHandler","t","off","beginSpin","spinInterval","setInterval","old","each","Constructor","noConflict","tpl","areaSelect","$content","$name","$nameTip","$idCard","$idCardTip","$addr","$addrTip","$phone","$phoneTip","$areaTip","$setDefault","$province","$city","$borough","initNodes","attr","initPlaceHolder","placeholder","checkLength","len","ret","validateName","hide","validateIdCard","$_CONFIG","isCross","test","validateAddr","validatePhone","mobile","validatePcba","getData","provinceId","boroughId","cityId","intercept","isDefault","idCardVal","hasIdCardVal","userName","idCard","toUpperCase","address","cities","areaId","areaName","provinceName","cityName","boroughName","initAreaSelect","p","c","b","a","init","btn","$this","dataName","code","keyCode","substr","radioBtn","cls","removeClass","addClass","unbindHandler","destroy","defaultData","name","phone","addr","province","city","borough","area","setDefault","oldName","u","get","channel","addressId","firing","okValue","self","formData","post","done","json","$userCardTips","$curAddr","$curAddrTr","closest","curAddrIdCard","curHasIdCard","remove","close","message","fail","always","onshow","onclose","selectors","nodeSelector","placeHolder","node","isString","addressType","defaultOptions","isObject","Array","pleaseTxt","text","pId","index","provinceOptions","please","onChanged","changeDate","id","isClicked","addAjax","setList","nodes","textName","valueName","delAddress","selects","result","checked","children","eq","callback","window","localStorage","local","JSON","parse","getItem","isLose","hasOwnProperty","time","addressLocal","removeItem","setItem","stringify","xhr","error","listClciked","num","j","html","selfs","defaultNode","selfsText","selectdCls","checkText","checkedCls","disable","$contentBox","appendTo","empty","height","$checked","$parent","parent","$selector","selector","stopPropagation","parents","document","testNode","createElement","isInputSupported","documentMode","hasInputCapabilities","elem","nodeName","activeElement","activeElementValue","startWatching","target","attachEvent","handlePropertyChange","stopWatching","detachEvent","nativeEvent","propertyName","srcElement","cancalValue","$selected","activeCls","selectedGroup","loading","imgpath","reload","getGroups","select","$current","$okbtn","defaultBtnCls","bool","postTopic","selectCircle","groupid","relatedGroups","myRelatedGroups","created","imaster","joined","imember","recommendGroups","recommend","peas","usedObj","concat","dupRemove","useObj","contrastObj","arr","dup","push","newObj","tmod","randomShowPic","helper","getQRCode","checkLoginStatus","APIS","qq","wb","qz","defaultInfo","pic","summary","open","hasShareBtnsHTML","initShareBtns","shareBtns","append","showShareToBtns","style","left","x","top","y","hasWeixinHTML","initWeixinHTML","weixinBox","formatParams","pics","s","site","encodeURIComponent","join","shareTo","weixin","link","src","shareWithKid","args","isRebate","skuId","itemId","parentKid","async","success","kid","shareInfo","indexOf","substring","onlineUserId","shareto","go","obj","info","desc","beforeShare","$item","shareUrl","shareTitle","sharePic","pw","width","ph","px","offset","py","shareType","group_domain","fecha","token","twoDigits","threeDigits","fourDigits","word","shorten","sLen","newArr","monthUpdate","arrName","i18n","charAt","toLowerCase","pad","String","dayNames","monthNames","monthNamesShort","dayNamesShort","amPm","DoFn","D","formatFlags","dateObj","getDate","DD","Do","getDay","dd","ddd","dddd","M","getMonth","MM","MMM","MMMM","YY","getFullYear","YYYY","h","getHours","hh","H","HH","m","getMinutes","mm","getSeconds","ss","S","Math","round","getMilliseconds","SS","SSS","A","ZZ","o","getTimezoneOffset","floor","abs","parseFlags","da","cent","year","millisecond","isPm","parts","match","minutes","timezoneOffset","masks","shortDate","mediumDate","longDate","fullDate","shortTime","mediumTime","longTime","mask","i18nSettings","Object","toString","isNaN","getTime","$0","dateStr","isValid","dateInfo","search","today","date","UTC"],"mappings":"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","file":"demo.js","sourcesContent":["/* eslint-disable */\n/**\n * \n * @author Fu Xiaochun\n */\n\n// var newEditor = require('editor');\n// newEditor('editor');\n// let fn = require('./es2015');\n// console.log(fn(10));\n\n// jQueryajax,jQ\nvar fetch = require('io/fetch');\n// jQuerycallbackspubsub\nvar Pubsub = require('io/pubsub');\n\nvar url = require('io/url');\n\n// \nvar truncate = require('utils/truncate');\nvar testStr = 'abc';\nconsole.log(truncate(testStr, 10));\n\n// \nvar spinner = require('spinner');\n\n\n// ,\n// dialog\n// http://aui.github.io/artDialog/doc/index.html\n// \nvar deliveryAddrPop = require('module/popup/deliveryAddr');\n/*var d = deliveryAddrPop.create({}, {\n  ok: function(){\n    console.log(this)\n  }\n});\nd.show();*/\n// d._$('header')\n// d._$('content')\n// d._$('footer');\n\n// \nvar uploadPop = require('module/popup/upload/dialog');\n/*var d = uploadPop.create({}, {\n  ok: function(){\n    alert(1221)\n  }\n});\nd.show();*/\n\nvar circlePop = require('module/popup/circle/dialog');\n/*circlePop.create({\n\n}).show();*/\n\n// \nvar alert = require('module/popup/alert');\n// alert('');\n\n\nvar confirm = require('module/popup/confirm');\n// confirm('');\n\n\n// \nvar share = require('module/share');\nshare.shareItem('[data-action=shareList]');\n\n/**\n *  \n * [data-action=shareto] data-shareInfo=\n * {\n *  url:'http://www.gomeplus.com',\n *  title:'',\n *  pic:'http://gomeplus.com/1.jpg||http://gomeplus.com/1.jpg'\n * }\n * pic||\n *\n *  [data-action=shareto] \n * shareInfo,\n *\n * :\n * var share = require \n * share.shareItem(e.g. 'data-node=shareList');\n *\n * shareto.weixin({shareInfo})\n * shareto.qq({shareInfo})\n * shareto.sina({shareInfo})\n * shareto.qzone({shareInfo})\n *\n *\n * share.share({shareInfo});shareInfotype[weixin,qq,sina,qzone]\n */\n\n\n\n// ,API\n// https://github.com/taylorhakes/fecha\nvar dateFormat = require('utils/fecha');\nconsole.log(dateFormat.format(Date.now(), 'YYYY-MM-DD'));\n\n// get\n// post,fetch.post\n/*\nfetch.get('test', {\n\tdata: {\n\t\ta: 1,\n\t\tb: 2\n\t}\n}).done(function(data, textStatus, jqXHR) {\n\n}).fail(function(jqXHR, textStatus, errorThrown) {\n\tconsole.log(arguments);\n}).always(function() {\n\n});\n*/\n\n// Pubsub\nvar fn1 = function(data) {\n    console.log(data.title);\n  }\n  // \nPubsub('mailArrived').sub(fn1);\n// \nPubsub('mailArrived').pub({\n  title: 'value from publish uu '\n});\n\n// \nconsole.log(window.jQuery);\n$('[data-trigger=spinner]').spinner({\n  delay: 200,\n  min: 1,\n  max: 3,\n  beforeChange: function() {\n    console.log(this);\n    return false;\n  },\n  rangemin: function() {\n    console.log('range min');\n  },\n  rangemax: function() {\n    console.log('range max');\n  },\n  changed: function(e, newVal, oldVal) {\n    console.log(arguments);\n  }\n});\n// ,/\n// var spinerInstance = $('[data-trigger=spinner]').data('spinner');\n// spinerInstance.spinning.value(3);\n// spinerInstance.spinning.setMin(3);\n// spinerInstance.spinning.setMax(3);\n\n// \n// var Tiles = require('tiles');\n// var tiles = new Tiles({}, '[data-node=tiles]');\n// console.log(tiles);\n\n// placeholder\n// require('placeholder');\n// $('input').placeholder();\n\n/*\n\n\nvar userWidget = require('../../widget/user/user');\nrequire('../../plugin/jquery.unveil');\n\n\nconsole.log('----')\nconsole.log($.fn.unveil);\nconsole.log('--cookie--')\nconsole.log($.cookie);\n\n\n// userWidget();\n\n\n// demo\n// var d = dialog({\n//     title: '',\n//     content: '<input id=\"property-returnValue-demo\" value=\"1\" />',\n//     ok: function () {\n//         var value = $('#property-returnValue-demo').val();\n//         this.close(value);\n//         this.remove();\n//     }\n// });\nd.addEventListener('close', function () {\n    alert(this.returnValue);\n});\nd.show();\n\n\n */\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/demo/index.js","/*TMODJS:{}*/\r\n!function () {\r\n\tfunction a(a, b) {\r\n\t\treturn (/string|function/.test(typeof b) ? h : g)(a, b)\r\n\t}\r\n\r\n\tfunction b(a, c) {\r\n\t\treturn \"string\" != typeof a && (c = typeof a, \"number\" === c ? a += \"\" : a = \"function\" === c ? b(a.call(a)) : \"\"), a\r\n\t}\r\n\r\n\tfunction c(a) {\r\n\t\treturn l[a]\r\n\t}\r\n\r\n\tfunction d(a) {\r\n\t\treturn b(a).replace(/&(?![\\w#]+;)|[<>\"']/g, c)\r\n\t}\r\n\r\n\tfunction e(a, b) {\r\n\t\tif (m(a))for (var c = 0, d = a.length; d > c; c++)b.call(a, a[c], c, a); else for (c in a)b.call(a, a[c], c)\r\n\t}\r\n\r\n\tfunction f(a, b) {\r\n\t\tvar c = /(\\/)[^\\/]+\\1\\.\\.\\1/, d = (\"./\" + a).replace(/[^\\/]+$/, \"\"), e = d + b;\r\n\t\tfor (e = e.replace(/\\/\\.\\//g, \"/\"); e.match(c);)e = e.replace(c, \"/\");\r\n\t\treturn e\r\n\t}\r\n\r\n\tfunction g(b, c) {\r\n\t\tvar d = a.get(b) || i({filename: b, name: \"Render Error\", message: \"Template not found\"});\r\n\t\treturn c ? d(c) : d\r\n\t}\r\n\r\n\tfunction h(a, b) {\r\n\t\tif (\"string\" == typeof b) {\r\n\t\t\tvar c = b;\r\n\t\t\tb = function () {\r\n\t\t\t\treturn new k(c)\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar d = j[a] = function (c) {\r\n\t\t\ttry {\r\n\t\t\t\treturn new b(c, a) + \"\"\r\n\t\t\t} catch (d) {\r\n\t\t\t\treturn i(d)()\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn d.prototype = b.prototype = n, d.toString = function () {\r\n\t\t\treturn b + \"\"\r\n\t\t}, d\r\n\t}\r\n\r\n\tfunction i(a) {\r\n\t\tvar b = \"{Template Error}\", c = a.stack || \"\";\r\n\t\tif (c)c = c.split(\"\\n\").slice(0, 2).join(\"\\n\"); else for (var d in a)c += \"<\" + d + \">\\n\" + a[d] + \"\\n\\n\";\r\n\t\treturn function () {\r\n\t\t\treturn \"object\" == typeof console && console.error(b + \"\\n\\n\" + c), b\r\n\t\t}\r\n\t}\r\n\r\n\tvar j = a.cache = {}, k = this.String, l = {\r\n\t\t\"<\": \"&#60;\",\r\n\t\t\">\": \"&#62;\",\r\n\t\t'\"': \"&#34;\",\r\n\t\t\"'\": \"&#39;\",\r\n\t\t\"&\": \"&#38;\"\r\n\t}, m = Array.isArray || function (a) {\r\n\t\t\treturn \"[object Array]\" === {}.toString.call(a)\r\n\t\t}, n = a.utils = {\r\n\t\t$helpers: {}, $include: function (a, b, c) {\r\n\t\t\treturn a = f(c, a), g(a, b)\r\n\t\t}, $string: b, $escape: d, $each: e\r\n\t}, o = a.helpers = n.$helpers;\r\n\ta.get = function (a) {\r\n\t\treturn j[a.replace(/^\\.\\//, \"\")]\r\n\t}, a.helper = function (a, b) {\r\n\t\to[a] = b\r\n\t}, module.exports = a\r\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_tmodjs-loader@1.0.1@tmodjs-loader/runtime.js\n// module id = 34\n// module chunks = 0 1 2 3 4 5 7 9 13 15 16 20 21 22 26 27 29 30 32 34 35 38 43 44 45","var Dialog = require('dialog');\nvar noop = function() {};\n\nvar create = function(content, options) {\n    content = content || '';\n    options = options || {};\n    var defaults = {\n        fixed: true,\n        modal: true,\n        autofocus: false,\n        content: '<p class=\"del-pop-p\">' + content + '</p>',\n        className: 'pop-box',\n        okCls: 'pc-btn pc-btnh35 circle-pop-btn',\n        ok: noop\n    };\n    $.extend(true, defaults, options);\n    var d = Dialog(defaults);\n\n    var header = d._$('header');\n    var title = d._$('title');\n    if(!options.title){\n        title.css('borderBottom', 'none');\n    }\n    header.show();\n    d.show();\n    return d;\n};\n\nmodule.exports = create;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/popup/alert.js","var Dialog = require('dialog');\nvar noop = function() {};\n\nvar create = function(content, options) {\n    var defaults = {\n        fixed: true,\n        modal: true,\n        content: '<p class=\"del-pop-p\">' + content + '</p>',\n        className: 'pop-box',\n        okCls: 'pc-btn pc-btnh35 circle-pop-btn',\n        ok: noop,\n        cancel: noop,\n        btnWrapCls: 'two-buttons'\n    };\n    $.extend(true, defaults, options);\n\n    var d = Dialog(defaults);\n\n    // var header = d._$('header');\n    // var title = d._$('title');\n    // title.css('borderBottom', 'none');\n    // header.show();\n\n    d.show();\n    return d;\n};\n\nmodule.exports = create;\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/popup/confirm.js","/**\n * [truncate ]\n * @param  {[function]}  getLength []\n * @param  {[string]}  string []\n * @param  {[number]}  byteLength []\n * @return {string}           []\n */\nvar byteLen = require('./byteLen');\n\nfunction isHighSurrogate(codePoint) {\n    return codePoint >= 0xd800 && codePoint <= 0xdbff;\n}\n\nfunction isLowSurrogate(codePoint) {\n    return codePoint >= 0xdc00 && codePoint <= 0xdfff;\n}\n\n// Truncate string by size in bytes\nfunction truncate(string, byteLength) {\n    if (typeof string !== \"string\") {\n        throw new Error(\"Input must be string\");\n    }\n\n    var charLength = string.length;\n    var curByteLength = 0;\n    var codePoint;\n    var segment;\n\n    for (var i = 0; i < charLength; i += 1) {\n        codePoint = string.charCodeAt(i);\n        segment = string[i];\n\n        if (isHighSurrogate(codePoint) && isLowSurrogate(string.charCodeAt(i + 1))) {\n            i += 1;\n            segment += string[i];\n        }\n\n        curByteLength += byteLen(segment);\n\n        if (curByteLength === byteLength) {\n            return string.slice(0, i + 1);\n        } else if (curByteLength > byteLength) {\n            return string.slice(0, i - segment.length + 1);\n        }\n    }\n\n    return string;\n}\n\nmodule.exports = truncate;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/truncate.js","var byteLen = function (str) {\n    if (str == null) return 0;\n    if (typeof str != \"string\") {\n        str += \"\";\n    }\n    return str.replace(/[^\\x00-\\xff]/g, \"01\").length;\n}\n\nmodule.exports = byteLen;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/byteLen.js","/**\n * str\n */\n\nvar trim = function (str) {\n    return str.replace(/(^[ \\t\\n\\r]+)|([ \\t\\n\\r]+$)/g, '');\n};\n\nmodule.exports = trim;\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/trim.js","/*\n * jquery.spinner\n * https://github.com/vsn4ik/jquery.spinner\n * Copyright 2013-2016 vsn4ik\n * Licensed under the MIT license\n */\n\n'use strict';\n\nvar spinningTimer;\nvar Spinner;\nvar Spinning = function($element, options) {\n    this.$el = $element;\n    this.options = $.extend({}, Spinning.rules.defaults, Spinning.rules[options.rule] || {}, options);\n    this.min = Number(this.options.min) || 0;\n    this.max = Number(this.options.max) || 0;\n\n    this.$el.on({\n        'focus.spinner': $.proxy(function(e) {\n            e.preventDefault();\n            // $(document).trigger('mouseup.spinner');\n            this.oldValue = this.value();\n        }, this),\n        'change.spinner': $.proxy(function(e) {\n            e.preventDefault();\n            this.value(this.$el.val());\n        }, this),\n        'keydown.spinner': $.proxy(function(e) {\n            var dir = {\n                38: 'up',\n                40: 'down'\n            }[e.which];\n\n            if (dir) {\n                e.preventDefault();\n                this.spin(dir);\n            }\n        }, this)\n    });\n\n    //init input value\n    this.oldValue = this.value();\n    this.value(this.$el.val());\n    return this;\n};\n\nSpinning.rules = {\n    defaults: {\n        min: null,\n        max: null,\n        step: 1,\n        precision: 0\n    },\n    currency: {\n        min: 0.00,\n        max: null,\n        step: 0.01,\n        precision: 2\n    },\n    quantity: {\n        min: 1,\n        max: 999,\n        step: 1,\n        precision: 0\n    },\n    percent: {\n        min: 1,\n        max: 100,\n        step: 1,\n        precision: 0\n    },\n    month: {\n        min: 1,\n        max: 12,\n        step: 1,\n        precision: 0\n    },\n    day: {\n        min: 1,\n        max: 31,\n        step: 1,\n        precision: 0\n    },\n    hour: {\n        min: 0,\n        max: 23,\n        step: 1,\n        precision: 0\n    },\n    minute: {\n        min: 1,\n        max: 59,\n        step: 1,\n        precision: 0\n    },\n    second: {\n        min: 1,\n        max: 59,\n        step: 1,\n        precision: 0\n    }\n};\n\nSpinning.prototype = {\n    spin: function(dir) {\n        /************ fuzhengchun begin *************/\n        if (this.$el.prop('disabled')) {\n            return;\n        }\n\n        if (this.$el.siblings('[data-spin=' + dir + ']').hasClass('disabled')) {\n            return;\n        }\n\n        /************ fuzhengchun end *************/\n\n        this.oldValue = this.value();\n        var step = $.isFunction(this.options.step) ? this.options.step.call(this, dir) : this.options.step;\n        var multipler = dir === 'up' ? 1 : -1;\n\n        var beforeChange = this.options.beforeChange || function() {};\n        if (beforeChange.call(this, this.oldValue, dir) !== false) {\n            this.value(this.oldValue + Number(step) * multipler);\n        }\n    },\n\n    value: function(v) {\n        if (v === null || v === undefined) {\n            return this.numeric(this.$el.val());\n        }\n        v = this.numeric(v);\n\n        var valid = this.validate(v);\n        if (valid !== 0) {\n            if (valid === -1) {\n                v = this.min;\n                this.$el.trigger('rangemin.spinner');\n            } else {\n                v = this.max;\n                this.$el.trigger('rangemax.spinner');\n            }\n            // v = (valid === -1) ? this.min : this.max;\n            // this.$el.trigger('rangeout.spinner');\n        }\n        this.$el.val(v.toFixed(this.options.precision));\n\n        if (this.oldValue !== this.value()) {\n            // changing.spinner\n            this.$el.trigger('changing.spinner', [this.value(), this.oldValue]);\n\n            // lazy changed.spinner\n            clearTimeout(spinningTimer);\n            spinningTimer = setTimeout($.proxy(function() {\n                this.$el.trigger('changed.spinner', [this.value(), this.oldValue]);\n            }, this), Spinner.delay);\n        }\n    },\n\n    numeric: function(v) {\n        v = this.options.precision > 0 ? parseFloat(v, 10) : parseInt(v, 10);\n\n        // If the variable is a number\n        if (isFinite(v)) {\n            return v;\n        }\n\n        return v || this.options.min || 0;\n    },\n\n    validate: function(val) {\n        if (this.options.min !== null && val < this.min) {\n            return -1;\n        }\n\n        if (this.options.max !== null && val > this.max) {\n            return 1;\n        }\n\n        return 0;\n    },\n\n    setMin: function(val) {\n        var min = this.min = this.numeric(val);\n        this.options.min = min;\n    },\n\n    setMax: function(val) {\n        var max = this.max = this.numeric(val);\n        this.options.max = max;\n    }\n};\n\nSpinner = function(element, options) {\n    this.$el = $(element);\n    this.$spinning = this.$el.find('[data-spin=\"spinner\"]');\n\n    if (this.$spinning.length === 0) {\n        this.$spinning = this.$el.find(':input[type=\"text\"]');\n    }\n\n    options = $.extend({}, options, this.$spinning.data());\n\n    this.spinning = new Spinning(this.$spinning, options);\n\n    this.$el\n        .on('click.spinner', '[data-spin=\"up\"], [data-spin=\"down\"]', $.proxy(this, 'spin'))\n        /*.on('mousedown.spinner', '[data-spin=\"up\"], [data-spin=\"down\"]', $.proxy(this, 'spin'))*/\n    ;\n\n    /*$(document).on('mouseup.spinner', $.proxy(function() {\n        clearTimeout(this.spinTimeout);\n        clearInterval(this.spinInterval);\n    }, this));*/\n\n    if (options.delay) {\n        this.delay(options.delay);\n    }\n\n    if (options.changed) {\n        this.changed(options.changed);\n    }\n\n    if (options.changing) {\n        this.changing(options.changing);\n    }\n\n    if (options.rangemin) {\n        this.rangemin(options.rangemin);\n    }\n\n    if (options.rangemax) {\n        this.rangemax(options.rangemax);\n    }\n};\n\nSpinner.delay = 500;\n\nSpinner.prototype = {\n    constructor: Spinner,\n\n    spin: function(e) {\n        var dir = $(e.currentTarget).data('spin');\n\n        switch (e.type) {\n            case 'click':\n                e.preventDefault();\n                this.spinning.spin(dir);\n                break;\n                /*case 'mousedown':\n                    if (e.which === 1) {\n                        this.spinTimeout = setTimeout($.proxy(this, 'beginSpin', dir), 300);\n                    }\n                    break;*/\n        }\n    },\n\n    delay: function(ms) {\n        var delay = Number(ms);\n\n        if (delay >= 0) {\n            this.constructor.delay = delay + 100;\n        }\n    },\n\n    value: function() {\n        return this.spinning.value();\n    },\n\n    changed: function(fn) {\n        this.bindHandler('changed.spinner', fn);\n    },\n\n    changing: function(fn) {\n        this.bindHandler('changing.spinner', fn);\n    },\n\n    rangemax: function(fn) {\n        this.bindHandler('rangemax.spinner', fn);\n    },\n\n    rangemin: function(fn) {\n        this.bindHandler('rangemin.spinner', fn);\n    },\n\n    bindHandler: function(t, fn) {\n        if ($.isFunction(fn)) {\n            this.$spinning.on(t, fn);\n        } else {\n            this.$spinning.off(t);\n        }\n    },\n\n    beginSpin: function(dir) {\n        this.spinInterval = setInterval($.proxy(this.spinning, 'spin', dir), 100);\n    }\n};\n\nvar old = $.fn.spinner;\n\n$.fn.spinner = function(options, value) {\n    return this.each(function() {\n        var data = $.data(this, 'spinner');\n\n        if (!data) {\n            data = new Spinner(this, options);\n\n            $.data(this, 'spinner', data);\n        }\n        if (options === 'delay' || options === 'changed' || options === 'changing') {\n            data[options](value);\n        } else if (options === 'step' && value) {\n            data.spinning.step = value;\n        } else if (options === 'spin' && value) {\n            data.spinning.spin(value);\n        }\n    });\n};\n\n$.fn.spinner.Constructor = Spinner;\n$.fn.spinner.noConflict = function() {\n    $.fn.spinner = old;\n    return this;\n};\n\n// $(function() {\n//     $('[data-trigger=\"spinner\"]').spinner();\n// });\n\nmodule.exports = $.fn.spinner;\n\n\n// WEBPACK FOOTER //\n// ./src/js/plugin/jquery.spinner.js","var tpl = require('./content.tpl');\nvar Dialog = require('dialog');\nvar Pubsub = require('io/pubsub');\nvar fetch = require('io/fetch');\nvar url = require('io/url');\nvar byteLen = require('utils/byteLen');\nvar trim = require('utils/trim');\nvar truncate = require('utils/truncate');\nvar areaSelect = require('module/address'); // \nvar alert = require('module/popup/alert');\nrequire('placeholder');\nrequire('textchange');\n\nvar $content;\nvar $name;\nvar $nameTip;\nvar $idCard;\nvar $idCardTip;\nvar $addr;\nvar $addrTip;\nvar $phone;\nvar $phoneTip;\nvar $areaTip;\nvar $setDefault;\nvar $province;\nvar $city;\nvar $borough;\n\nvar initNodes = function() {\n    $content = this._$('content');\n    // \n    $name = $content.find('[data-node=name]');\n    $nameTip = $content.find('[data-node=nameTip]');\n    // \n    $idCard = $content.find('[data-node=idCard]');\n    $idCardTip = $content.find('[data-node=idCardTip]');\n    // \n    $addr = $content.find('[data-node=addr]');\n    $addrTip = $content.find('[data-node=addrTip]');\n    // \n    $phone = $content.find('[data-node=phone]');\n    $phone.attr('maxlength', 12);\n    $phoneTip = $content.find('[data-node=phoneTip]');\n    // \n    $setDefault = $content.find('[data-node=setDefault]');\n\n    // \n    $province = $content.find('[data-node=province]');\n    $city = $content.find('[data-node=city]');\n    $borough = $content.find('[data-node=borough]');\n    $areaTip = $content.find('[data-node=areaTip]');\n};\n\nvar initPlaceHolder = function() {\n    $name.placeholder();\n    $addr.placeholder();\n    $phone.placeholder();\n};\n\nvar checkLength = function(str, max, min) {\n    var len = byteLen(str);\n    var ret = true;\n    if (len > max || len < min) {\n        ret = false;\n    }\n    return ret;\n};\n\n// \nvar validateName = function() {\n    var val = trim($name.val());\n    $name.val(val);\n    var ret = true;\n    if (!checkLength(val, 20, 2)) {\n        ret = false;\n        $nameTip.show();\n    } else {\n        $nameTip.hide();\n    }\n    return ret;\n};\n\n// \nvar validateIdCard = function() {\n    if ($_CONFIG.isCross != '1') {\n        return true;\n    }\n    var val = trim($idCard.val());\n    $idCard.val(val);\n    var ret = true;\n    if (!/^\\d{17}[\\dxX]$/.test(val)) {\n        ret = false;\n        $idCardTip.show();\n    } else {\n        $idCardTip.hide();\n    }\n    return ret;\n};\n\n// \nvar validateAddr = function() {\n    var val = trim($addr.val());\n    $addr.val(val);\n    var ret = true;\n    if (!checkLength(val, 60, 5)) {\n        ret = false;\n        $addrTip.show();\n    } else {\n        $addrTip.hide();\n    }\n    return ret;\n};\n\n// \nvar validatePhone = function() {\n    var val = trim($phone.val());\n    var rule = /^0([0-9]{3,4}-)?[0-9]{10,12}$/;\n    var mobile = /^1[34578][0-9]{9}$/;\n    var ret = rule.test(val) || mobile.test(val);\n    if (ret) {\n        $phoneTip.hide();\n    } else {\n        $phoneTip.show();\n    }\n    return ret;\n};\n\n// \nvar validatePcba = function() {\n    var data = areaSelect.getData();\n    var ret = true;\n    if (!data.provinceId || !data.boroughId || !data.cityId) {\n        ret = false;\n        $areaTip.show();\n    } else {\n        $areaTip.hide();\n    }\n    return ret;\n};\n\nvar validate = function() {\n    var ret = true;\n    if (!validateName()) {\n        ret = false;\n    }\n    if (!validateIdCard()) {\n        ret = false;\n    }\n    if (!validateAddr()) {\n        ret = false;\n    }\n    if (!validatePhone()) {\n        ret = false;\n    }\n    if (!validatePcba()) {\n        ret = false;\n    }\n    return ret;\n};\n\n//\nvar intercept = function(str, max) {\n    var val = trim(str.val());\n    var len = byteLen(val);\n    if (len > max) {\n        str.val(truncate(val, max));\n    }\n};\n\n// \nvar getData = function() {\n    var isDefault = $setDefault.data('checked');\n    var idCardVal = $idCard.val() || '';\n    var hasIdCardVal = idCardVal.length === 18 ? true : false;\n    var data = {\n        userName: $name.val(),\n        idCard: idCardVal.toUpperCase(),\n        address: $addr.val(),\n        mobile: $phone.val(),\n        isDefault: !isDefault ? 0 : 1,\n        isCross: !!parseInt($_CONFIG.isCross),\n        hasIdCardVal: hasIdCardVal\n    };\n    var cities = areaSelect.getData();\n    if (cities.areaId) {\n        data.areaId = cities.areaId;\n        data.areaName = cities.areaName;\n    }\n    if (cities.provinceId) {\n        data.provinceId = cities.provinceId;\n        data.provinceName = cities.provinceName;\n    }\n    if (cities.cityId) {\n        data.cityId = cities.cityId;\n        data.cityName = cities.cityName;\n    }\n    if (cities.boroughId) {\n        data.boroughId = cities.boroughId;\n        data.boroughName = cities.boroughName;\n    }\n    return data;\n};\n\n// \nvar initAreaSelect = function() {\n    var p = $content.find('[data-node=province]');\n    var c = $content.find('[data-node=city]');\n    var b = $content.find('[data-node=borough]');\n    var a = $content.find('[data-node=area]');\n\n    areaSelect.init([p, c, b, a], ['', '', '', ''], {}, [{\n        content: '<span class=\"menu-add\" data-node=\"checked\"></span>',\n        btn: '<span class=\"down-arrow\"><em class=\"iconn-2\"></em></span>'\n    }, {\n        content: '<span class=\"menu-add\" data-node=\"checked\"></span>',\n        btn: '<span class=\"down-arrow\"><em class=\"iconn-2\"></em></span>'\n    }, {\n        content: '<span class=\"menu-add\" data-node=\"checked\"></span>',\n        btn: '<span class=\"down-arrow\"><em class=\"iconn-2\"></em></span>'\n    }, {\n        content: '<span class=\"menu-add\" data-node=\"checked\"></span>',\n        btn: '<span class=\"down-arrow\"><em class=\"iconn-2\"></em></span>'\n    }]);\n};\n\nvar bindHandler = function() {\n    $name.on('blur', function() {\n        validateName();\n    });\n    $name.on('textchange', function() {\n        var $this = $(this);\n        var dataName = $this.data('name');\n        if ($this.val() != dataName && '' !== dataName) {\n            $idCard.val('').prop('readonly', false);\n        }\n        intercept($name, 20);\n    });\n    $idCard.on('blur', function() {\n        validateIdCard();\n    });\n    $idCard.on('contextmenu', function() {\n        return false;\n    });\n    $idCard.on('keydown', function(e) {\n        var code = e.keyCode;\n\n        if ((code >= 48 && code <= 57) || (code >= 96 && code <= 105) || code == 88 || code == 8 || code == 46 || (code >= 37 && code <= 40)) {\n            return true;\n        } else {\n            return false;\n        }\n    });\n    $idCard.on('textchange', function() {\n        var val = $(this).val();\n        var newVal = '';\n        if (!/^\\d{1,18}$|^\\d{17}[xX]$/.test(val)) {\n            newVal = $.trim(val.substr(0, val.length - 1));\n            $(this).val(newVal);\n        }\n    });\n    $addr.on('blur', function() {\n        validateAddr();\n    });\n    $addr.on('textchange', function() {\n        intercept($addr, 60);\n    });\n    $phone.on('blur', function() {\n        validatePhone();\n    });\n    $setDefault.on('click', function() {\n        var $this = $(this);\n        var radioBtn = $this.find('span');\n        var cls = 'menu-radio-checked';\n        if (radioBtn.hasClass(cls)) {\n            $this.data('checked', 0);\n            radioBtn.removeClass(cls);\n        } else {\n            $this.data('checked', 1);\n            radioBtn.addClass(cls);\n        }\n        return false;\n    });\n    $province.on('click', 'a', function() {\n        validatePcba();\n    });\n    $city.on('click', 'a', function() {\n        validatePcba();\n    });\n    $borough.on('click', 'a', function() {\n        validatePcba();\n    });\n};\n\nvar unbindHandler = function() {\n    $name.off();\n    $idCard.off();\n    $addr.off();\n    $phone.off();\n    $setDefault.off();\n    // \n    areaSelect.destroy();\n};\n\n// \nvar defaultData = {\n    name: '',\n    phone: '',\n    addr: '',\n    province: '', // \n    city: '', // \n    borough: '', // \n    area: '', // \n    setDefault: true,\n    isCross: false // \n};\n\nvar create = function(data, options) {\n    var oldName = data.name;\n    // ,\n    var u = url.get('addAddress');\n    var channel = 'addr.add';\n    var addressId = data.addressId; // id\n    if (addressId) {\n        u = url.get('editAddress');\n        channel = 'addr.edit';\n    }\n    var content = tpl(data || defaultData);\n    options = options || {};\n\n    var firing = false; // \n    var defaults = {\n        title: '',\n        modal: true,\n        fixed: true,\n        content: content,\n        className: 'pop-box',\n        okValue: '',\n        okCls: 'pc-btn pc-btnh35 circle-pop-btn',\n        ok: function() {\n            var self = this;\n\n            if (validate()) {\n\n                if (firing) {\n                    return false;\n                }\n                firing = true;\n\n                var formData = getData();\n                if ($_CONFIG.isCross === '0') {\n                    // ID\n                    if (oldName != formData.userName && !!formData.idCard) {\n                        formData.idCard = '';\n                    }\n                }\n\n                if (addressId) { // ,addressId\n                    formData.addressId = addressId;\n                }\n                if (formData.areaId === undefined) {\n                    formData.areaId = '110114001';\n                    formData.areaName = '';\n                }\n                fetch.post(u, {\n                    data: formData\n                }).done(function(json) {\n                    var $userCardTips = $('[data-node=userCardTips]');\n                    var code = json.code;\n                    var data = json.data || {};\n                    if (code === 200) {\n                        if (data.addressId) { // ,id\n                            formData.addressId = data.addressId;\n                        }\n                        Pubsub(channel).pub(formData);\n                        // \n                        var $curAddr = $('[data-node=curAddr]');\n                        var $curAddrTr = $curAddr.closest('tr');\n                        if ($curAddr.length) {\n                            var curAddrIdCard = $curAddrTr.find('[data-node=addrInfos]').data('addr').idCard;\n                            var curHasIdCard = !!$.trim(curAddrIdCard);\n                            if ($userCardTips.length && curHasIdCard) {\n                                $userCardTips.remove();\n                                $curAddrTr.find('[data-action=editAddr]').closest('td').removeClass('hide-text');\n                            }\n                        }\n\n                        self.close();\n                        self.remove();\n                    } else {\n                        alert(json.message);\n                    }\n                }).fail(function() {\n\n                }).always(function() {\n                    firing = false;\n                });\n            }\n            return false; // \n        },\n        onshow: function() {\n            // \n            initNodes.call(this);\n            // \n            initAreaSelect.call(this);\n            // placeHolder\n            initPlaceHolder();\n            // \n            bindHandler();\n        },\n        onclose: function() {\n            // ,\n            unbindHandler();\n            firing = false;\n        }\n    };\n    $.extend(true, defaults, options);\n    var d = Dialog(defaults);\n    d.show();\n    return d;\n};\n\nmodule.exports = create;\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/popup/deliveryAddr/index.js","var template=require('tmodjs-loader/runtime');\nmodule.exports=template('src/js/module/popup/deliveryAddr/content',function($data,$filename\n/*``*/) {\n'use strict';var $utils=this,$helpers=$utils.$helpers,$escape=$utils.$escape,name=$data.name,isCross=$data.isCross,idCard=$data.idCard,hasIdCardVal=$data.hasIdCardVal,provinceId=$data.provinceId,province=$data.province,cityId=$data.cityId,city=$data.city,boroughId=$data.boroughId,borough=$data.borough,areaId=$data.areaId,area=$data.area,addr=$data.addr,phone=$data.phone,isDefault=$data.isDefault,$out='';$out+='<div class=\"edit-add-box\"> <dl class=\"receiver clearfix\"> <dt>:</dt> <dd> <input type=\"text\" data-node=\"name\" data-name=\"';\n$out+=$escape(name);\n$out+='\" placeholder=\"\" value=\"';\n$out+=$escape(name);\n$out+='\"> </dd> </dl> <p class=\"warn-txt\" data-node=\"nameTip\">2-20</p> ';\nif(isCross){\n$out+=' <dl class=\"receiver clearfix\"> <dt>:</dt> <dd> <input type=\"text\" data-node=\"idCard\" data-idcard=\"';\n$out+=$escape(idCard);\n$out+='\" ';\nif(hasIdCardVal){\n$out+='readonly=\"true\"';\n}\n$out+=' placeholder=\"\" value=\"';\n$out+=$escape(idCard);\n$out+='\"> </dd> </dl> <p class=\"warn-txt\" data-node=\"idCardTip\"></p> ';\n}\n$out+=' <dl class=\"area clearfix\"> <dt>:</dt> <dd data-node=\"areaList\"> <div data-node=\"province\" data-provinceId=';\n$out+=$escape(provinceId);\n$out+='>';\n$out+=$escape(province);\n$out+='</div> <div data-node=\"city\" data-cityId=';\n$out+=$escape(cityId);\n$out+='>';\n$out+=$escape(city);\n$out+='</div> <div data-node=\"borough\" data-boroughId=';\n$out+=$escape(boroughId);\n$out+='>';\n$out+=$escape(borough);\n$out+='</div> <div data-node=\"area\" data-areaId=';\n$out+=$escape(areaId);\n$out+='>';\n$out+=$escape(area);\n$out+='</div> </dd> </dl> <p class=\"warn-txt\" data-node=\"areaTip\"></p> <dl class=\"detail-add clearfix\"> <dt>:</dt> <dd> <input type=\"text\" data-node=\"addr\" placeholder=\"\" value=\"';\n$out+=$escape(addr);\n$out+='\"> </dd> </dl> <p class=\"warn-txt\" data-node=\"addrTip\">5-60</p> <dl class=\"phone clearfix\"> <dt>/:</dt> <dd> <input type=\"text\" data-node=\"phone\" placeholder=\"/\" value=\"';\n$out+=$escape(phone);\n$out+='\"> </dd> </dl> <p class=\"warn-txt\" data-node=\"phoneTip\">/</p> <div class=\"set-default-add\"> <label data-node=\"setDefault\" data-checked=\"';\nif(isDefault === true){\n$out+='true';\n}else{\n$out+='false';\n}\n$out+='\"> <span class=\"menu-radio ';\nif(isDefault === true){\n$out+='menu-radio-checked';\n}else{\n$out+='\\'\\'';\n}\n$out+='\"></span> </label> </div> </div> ';\nreturn new String($out);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/module/popup/deliveryAddr/content.tpl\n// module id = 91\n// module chunks = 4","require('../plugin/jquery.selects');\r\nvar fetch = require('io/fetch'),\r\n    url = require('io/url'),\r\n    address = {},\r\n    // Pubsub = require('io/pubsub'),\r\n    // addressList = [],\r\n    selectors;\r\n//nodeSelector  select  array   \r\n//placeHolder     array || string       lengthnodeSelector\r\n//options       selecct\r\n//node          select/  node.btn   string(html) node.content string(html)\r\nvar init = function(nodeSelector, placeHolder, options, node) {\r\n    var isString = false,\r\n        addressType = [\r\n            ['provinceId', 'provinceName'],\r\n            ['cityId', 'cityName'],\r\n            ['boroughId', 'boroughName'],\r\n            ['areaId', 'areaName']\r\n        ],\r\n        defaultOptions = {},\r\n        // defaultNode = {},\r\n        isObject = (node instanceof Array) ? false : true;\r\n    options = $.extend({}, defaultOptions, options);\r\n    selectors = nodeSelector;\r\n    if (typeof placeHolder === 'string') {\r\n        isString = true;\r\n    }\r\n    for (var i = 0; i < selectors.length; i++) {\r\n        //address\r\n        var pleaseTxt = isString ? placeHolder : placeHolder[i];\r\n        if (pleaseTxt !== selectors[i].text()) {\r\n            address[addressType[i][0]] = selectors[i].attr('data-' + [addressType[i][0]]);\r\n            address[addressType[i][1]] = selectors[i].text();\r\n        }\r\n\r\n        var pId = ((i - 1) >= 0 ? selectors[i - 1].attr('data-' + [addressType[i - 1][0]]) : 0);\r\n\r\n        (function(index) {\r\n            //select\r\n            var provinceOptions = options;\r\n            provinceOptions.please = isString ? placeHolder : placeHolder[index];\r\n            provinceOptions.onChanged = function(changeDate) {\r\n                var id = changeDate.value,\r\n                    isClicked = false;\r\n                if (id === undefined) {\r\n                    isClicked = true;\r\n                } else {\r\n                    address[addressType[index][0]] = changeDate.value;\r\n                    address[addressType[index][1]] = changeDate.text;\r\n                    if (index + 1 <= selectors.length - 1) {\r\n\r\n                        addAjax(~~id, function(data) {\r\n                            nodeSelector[index + 1].setList({\r\n                                data: data.nodes,\r\n                                please: isString ? placeHolder : placeHolder[index + 1],\r\n                                textName: 'name',\r\n                                valueName: 'id'\r\n                            });\r\n                        })\r\n                    }\r\n                }\r\n                delAddress(index, isClicked);\r\n\r\n            }\r\n            nodeSelector[index].selects((isObject ? node : node[index]), provinceOptions);\r\n            /**/\r\n            if (pId !== '') {\r\n                addAjax(pId, function(result) {\r\n                    selectors[index].setList({\r\n                        data: result.nodes,\r\n                        please: isString ? placeHolder : placeHolder[index],\r\n                        textName: 'name',\r\n                        valueName: 'id',\r\n                        checked: selectors[0].find('div').children().eq(0).text()\r\n                    });\r\n\r\n                })\r\n            }\r\n        })(i);\r\n\r\n    }\r\n\r\n    function addAjax(id, callback) {\r\n        if (window.localStorage) {\r\n            var local = JSON.parse(localStorage.getItem('address' + id));\r\n            var isLose = local !== null && local.hasOwnProperty('time') ? local.time < +new Date() : true;\r\n            if (isLose) {\r\n                fetch.get(url.get('getAddress') + id, {}).done(function(result) {\r\n                    if (result.code === 200) {\r\n                        callback.call(null, result.data);\r\n                        var addressLocal = {\r\n                            data: result.data,\r\n                            time: +new Date() + 604800000\r\n                        }\r\n                        localStorage.removeItem('address' + id);\r\n                        localStorage.setItem('address' + id, JSON.stringify(addressLocal));\r\n                    }\r\n                }).fail(function(xhr, error) {\r\n                    console.log(xhr, error);\r\n                });\r\n            } else {\r\n                callback.call(null, local.data);\r\n            }\r\n        } else {\r\n            fetch.get(url.get('getAddress') + id, {}).done(function(result) {\r\n                if (result.code === 200) {\r\n                    callback.call(null, result.data);\r\n                }\r\n            }).fail(function(xhr, error) {\r\n                console.log(xhr, error);\r\n            });\r\n        }\r\n    }\r\n\r\n    function delAddress(i, listClciked) {\r\n        var num = i;\r\n        if (!listClciked) {\r\n            num++;\r\n            nodeSelector[i].find('div').children().eq(0).text(address[addressType[i][1]]);\r\n        }\r\n        for (var j = num, len = nodeSelector.length; j < len; j++) {\r\n            if (address[addressType[j][0]] !== undefined) {\r\n                delete address[addressType[j][0]];\r\n                delete address[addressType[j][1]];\r\n            }\r\n            nodeSelector[j].find('div').children().eq(0).text((isString ? placeHolder : placeHolder[j]));\r\n            if (j != num) nodeSelector[j].find('ul').html('');\r\n        }\r\n\r\n    }\r\n};\r\n\r\nvar destroy = function() {\r\n\r\n    for (var i = 0, len = selectors.length; i < len; i++) {\r\n\r\n        selectors[i].off();\r\n    }\r\n\r\n}\r\nvar getData = function() {\r\n    return address;\r\n}\r\nmodule.exports = {\r\n    init: init,\r\n    destroy: destroy,\r\n    getData: getData\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/address.js","$.fn.extend({\r\n    selects: function(node, options) {\r\n        var selfs = this,\r\n            defaultNode = {\r\n                content: '<span class=\"span1\">' + $(selfs).text() + '</span>',\r\n                btn: '<span class=\"span2\"></span>'\r\n            },\r\n            selfsText = $.trim($(selfs).text()),\r\n            defaultOptions = {\r\n                data: [], //\r\n                checked: selfsText, //\r\n                please: '', //\r\n                textName: 'text', //key\r\n                valueName: 'value', //value  key\r\n                selectdCls: 'active', //slectclass\r\n                checkText: true, //  \r\n                checkedCls: 'active', //class\r\n                disable: 'disable', //\r\n                onChanged: function() {} //\r\n            };\r\n        node = $.extend({}, defaultNode, node);\r\n        options = $.extend({}, defaultOptions, options);\r\n        var $contentBox = $('<div></div>').appendTo($(selfs).empty()).height($(selfs).height());\r\n        $(node.content).text((selfsText === '' ? options.please : selfsText)).appendTo($contentBox).attr('data-node', 'checked');\r\n        $(node.btn).appendTo($contentBox);\r\n        var value = null;\r\n\r\n        var $checked,\r\n            result,\r\n            html = '<ul data-node=\"selectList\"><li><a href=\"javascript:;\">' + options.please + '</a></li>',\r\n            $parent = options.parent ? $(options.parent) : this,\r\n            $selector = options.parent ? this.selector : undefined;\r\n\r\n        for (var i = 0, len = options.data.length; i < len; i++) {\r\n            value = options.data[i][options.valueName] !== undefined ? options.data[i][options.valueName] : i;\r\n            html += '<li class=\"' + (options.data[i].checked === value ? options.checkedCls : '') + '\"><a href=\"javascript:;\" data-value=\"' + value + '\" data-index=\"' + i + '\">' + options.data[i][options.textName] + '</a></li>'\r\n        }\r\n        html += '</ul>';\r\n        $(html).appendTo($(selfs));\r\n        $parent.on('click', $selector, function(e) {\r\n            e.stopPropagation();\r\n            $('ul[data-node=\"selectList\"]').hide();\r\n            if (options.data.length === 0 && $(this).attr('data-refresh') !== 'running') return;\r\n            if ($(this).hasClass(options.disable)) return;\r\n            $(this).addClass(options.selectdCls);\r\n            if ($(this).find('ul li').length !== 0) $(this).find('ul').show();\r\n        });\r\n\r\n        $parent.on('click', 'ul[data-node=\"selectList\"] a', function(e) {\r\n            e.stopPropagation();\r\n            $checked = $(this).parents('ul').parent().find('[data-node=\"checked\"]');\r\n            if ($checked.text() !== $(this).text()) {\r\n                result = {\r\n                    text: ($(this).text() !== options.please ? $(this).text() : ''),\r\n                    value: $(this).attr('data-value'),\r\n                    index: $(this).attr('data-index')\r\n                }\r\n                options.checkText && $checked.text($(this).text()); //.attr( 'data-value', $(this).attr('data-value') );\r\n                if (options.checkedCls !== undefined) {\r\n                    $(this).parent().addClass(options.checkedCls).siblings().removeClass(options.checkedCls);\r\n                }\r\n                options.onChanged.call(this, result);\r\n\r\n            }\r\n            $(this).parents('ul').hide();\r\n            return false;\r\n        });\r\n\r\n        $(document).on('click', function() {\r\n            selfs.find('ul').hide();\r\n        });\r\n        return this;\r\n    },\r\n    setList: function(options) {\r\n        $(this).attr('data-refresh', 'running');\r\n        var selfs = this,\r\n            value,\r\n            defaultOptions = {\r\n                data: [],\r\n                textName: 'text',\r\n                checked: '',\r\n                valueName: 'value',\r\n                please: '',\r\n                checkedCls: 'active'\r\n            };\r\n        options = $.extend({}, defaultOptions, options);\r\n        var html = '<li><a href=\"javascript:;\">' + options.please + '</a></li>';\r\n        if (options.data.length !== 0) {\r\n            for (var i = 0, len = options.data.length; i < len; i++) {\r\n                value = options.data[i][options.valueName] !== undefined ? options.data[i][options.valueName] : i;\r\n                html += '<li class=\"' + (options.checked === options.data[i][options.textName] ? options.checkedCls : '') + '\"><a href=\"javascript:;\" data-value=\"' + value + '\">' + options.data[i][options.textName] + '</a></li>'\r\n            }\r\n        }\r\n        $(selfs).find('[data-node=\"selectList\"]').html(html);\r\n        return this;\r\n    }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/js/plugin/jquery.selects.js","/**\n * jQuery \"splendid textchange\" plugin\n * http://benalpert.com/2013/06/18/a-near-perfect-oninput-shim-for-ie-8-and-9.html\n *\n * (c) 2013 Ben Alpert, released under the MIT license\n */\n\nvar testNode = document.createElement(\"input\");\nvar isInputSupported = \"oninput\" in testNode &&\n    (!(\"documentMode\" in document) || document.documentMode > 9);\n\nvar hasInputCapabilities = function(elem) {\n    // The HTML5 spec lists many more types than `text` and `password` on\n    // which the input event is triggered but none of them exist in IE 8 or\n    // 9, so we don't check them here.\n    // TODO: <textarea> should be supported too but IE seems to reset the\n    // selection when changing textarea contents during a selectionchange\n    // event so it's not listed here for now.\n    return elem.nodeName === \"INPUT\" &&\n        (elem.type === \"text\" || elem.type === \"password\");\n};\n\nvar activeElement = null;\nvar activeElementValue = null;\n\n\n/**\n * (For old IE.) Starts tracking propertychange events on the passed-in element\n * and override the value property so that we can distinguish user events from\n * value changes in JS.\n */\nvar startWatching = function(target) {\n    activeElement = target;\n    activeElementValue = target.value;\n    activeElement.attachEvent(\"onpropertychange\", handlePropertyChange);\n};\n\n/**\n * (For old IE.) Removes the event listeners from the currently-tracked\n * element, if any exists.\n */\nvar stopWatching = function() {\n  if (!activeElement) return;\n\n  // delete restores the original property definition\n  activeElement.detachEvent(\"onpropertychange\", handlePropertyChange);\n\n  activeElement = null;\n  activeElementValue = null;\n};\n\n/**\n * (For old IE.) Handles a propertychange event, sending a textChange event if\n * the value of the active element has changed.\n */\nvar handlePropertyChange = function(nativeEvent) {\n    if (nativeEvent.propertyName !== \"value\") return;\n\n    var value = nativeEvent.srcElement.value;\n    if (value === activeElementValue) return;\n    activeElementValue = value;\n\n    $(activeElement).trigger(\"textchange\");\n};\nif (isInputSupported) {\n    $(document)\n        .on(\"input\", function(e) {\n            // In modern browsers (i.e., not IE 8 or 9), the input event is\n            // exactly what we want so fall through here and trigger the\n            // event...\n            if (e.target.nodeName !== \"TEXTAREA\") {\n                // ...unless it's a textarea, in which case we don't fire an\n                // event (so that we have consistency with our old-IE shim).\n                $(e.target).trigger(\"textchange\");\n            }\n        });\n} else {\n    $(document)\n        .on(\"focusin\", function(e) {\n            // In IE 8, we can capture almost all .value changes by adding a\n            // propertychange handler and looking for events with propertyName\n            // equal to 'value'.\n            // In IE 9, propertychange fires for most input events but is buggy\n            // and doesn't fire when text is deleted, but conveniently,\n            // selectionchange appears to fire in all of the remaining cases so\n            // we catch those and forward the event if the value has changed.\n            // In either case, we don't want to call the event handler if the\n            // value is changed from JS so we redefine a setter for `.value`\n            // that updates our activeElementValue variable, allowing us to\n            // ignore those changes.\n            if (hasInputCapabilities(e.target)) {\n                // stopWatching() should be a noop here but we call it just in\n                // case we missed a blur event somehow.\n                stopWatching();\n                startWatching(e.target);\n            }\n        })\n\n        .on(\"focusout\", function() {\n            stopWatching();\n        })\n\n        .on(\"selectionchange keyup keydown\", function() {\n            // On the selectionchange event, e.target is just document which\n            // isn't helpful for us so just check activeElement instead.\n            //\n            // 90% of the time, keydown and keyup aren't necessary. IE 8 fails\n            // to fire propertychange on the first input event after setting\n            // `value` from a script and fires only keydown, keypress, keyup.\n            // Catching keyup usually gets it and catching keydown lets us fire\n            // an event for the first keystroke if user does a key repeat\n            // (it'll be a little delayed: right before the second keystroke).\n            // Other input methods (e.g., paste) seem to fire selectionchange\n            // normally.\n            if (activeElement && activeElement.value !== activeElementValue) {\n                activeElementValue = activeElement.value;\n                $(activeElement).trigger(\"textchange\");\n            }\n        });\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/plugin/jquery.splendid.textchange.js","var tpl = require('./content.tpl');\nvar Dialog = require('dialog');\n\nvar create = function(data, options){\n    var content = tpl(data || {}); // ,\n    options = options || {};\n\n    var defaults = {\n        title: '',\n        modal: true,\n        fixed: true,\n        content: content,\n        className: 'pop-box',\n        okValue: '',\n        okCls: 'pc-btn pc-btnh35 circle-pop-btn',\n        cancalValue : '',\n        btnWrapCls: 'insert-cancel'\n        /*function () {\n            // var value = $('#property-returnValue-demo').val();\n            // this.close(value);\n            // this.remove();\n        }*/\n    };\n    $.extend(true, defaults, options);\n    return Dialog(defaults);\n};\n\nmodule.exports = {\n    create: create\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/popup/upload/dialog.js","var template=require('tmodjs-loader/runtime');\nmodule.exports=template('src/js/module/popup/upload/content',function($data,$filename\n/*``*/) {\n'use strict';var $utils=this,$helpers=$utils.$helpers,$escape=$utils.$escape,maxlength=$data.maxlength,total=$data.total,$out='';$out+='<div data-node=\"uploadBox\"> <div class=\"pics-list-wrap clearfix\"> <ul class=\"pics-list clearfix\" data-node=\"uploadList\"> <li data-defaultAddFile=\\'picker\\'></li> </ul> </div> <div class=\"num-pics\"> <span class=\"link-hover-red\" data-node=\"addNum\">';\n$out+=$escape(maxlength);\n$out+='</span><span class=\"deep-gray\">/';\n$out+=$escape(total);\n$out+='</span></div> </div> ';\nreturn new String($out);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/module/popup/upload/content.tpl\n// module id = 97\n// module chunks = 4 5 15 29","var Dialog = require('dialog');\nvar fetch = require('io/fetch');\nvar url = require('io/url');\nvar Pubsub = require('io/pubsub');\nvar channel = require('io/channel');\nvar tpl = require('./content.tpl');\nvar alert = require('module/popup/alert');\n// var truncate = require('utils/truncate');\n// var byteLen = require('utils/byteLen');\n\nrequire('module/tmodHelper/randomShowPic')();\n\n//  TODO: ()\n//  \n//  ()\n\nvar $selected; // \nvar activeCls = 'active';\nvar selectedGroup = {}; // \nvar loading = '<div data-node=\"loading\" class=\"loading\"><img src=\"' + $_CONFIG.imgpath + '/images/public/loading.gif\"></div>';\nvar reload = '<p data-node=\"reload\" class=\"failed-txt\"><a data-node=\"btn_reload\" href=\"javascript:;\" style=\"color:#f95353\"></a></p>';\n\nfunction getGroups() {\n    return fetch.get(url.get('selectGroup'));\n};\n\nfunction select() {\n    var $current = $(this);\n    var id = $current.data('id');\n    var $okbtn = $('[i-id=ok]');\n    var defaultBtnCls = 'btn-default';\n    // if (selectedGroup && selectedGroup.id !== id && selectedGroup.id) {\n    if ($selected) {\n        $selected.removeClass(activeCls);\n        $okbtn.addClass(defaultBtnCls);\n    }\n    $current.addClass(activeCls);\n    $okbtn.removeClass(defaultBtnCls);\n    // } else {\n    //     $current.addClass(activeCls);\n    // }\n    $selected = $current;\n    selectedGroup = {\n        id: id,\n        type: $selected.parent(\"li\").attr(\"data-type\"),\n        name: $selected.data('name')\n    };\n    return false;\n};\n\n// var unselect = function() {\n//     return false;\n// };\n\nfunction bindHandler(bool) {\n    var $content = this._$('content');\n    $content[bool ? 'off' : 'on']('click', 'dl', select);\n};\n\nfunction create(options) {\n    options = options || {};\n    var defaults = {\n        title: '',\n        modal: true,\n        fixed: true,\n        content: loading,\n        className: 'pop-box',\n        okValue: '',\n        okCls: 'pc-btn pc-btnh35 circle-pop-btn btn-default',\n        btnWrapCls: 'insert-cancel',\n        ok: function() {\n            if (!selectedGroup.id) {\n                alert('');\n                return false;\n            }\n            Pubsub(channel.postTopic.selectCircle).pub(selectedGroup);\n            //selectedGroup\n            //\n        },\n        cancel: function() {\n            bindHandler.call(this, true);\n        },\n        onshow: function() {\n            var self = this;\n            var groupid;\n            if ($('[data-action=selectGroup]').attr('data-groupid')) {\n                groupid = $('[data-action=selectGroup]').attr('data-groupid');\n            }\n            getGroups().done(function(json) {\n                // TODO: loading\n                if (json && json.code === 200) {\n                    // \n                    var data = json.data || {};\n                    var relatedGroups = data.myRelatedGroups || {};\n                    var created = relatedGroups.imaster || [];\n                    var joined = relatedGroups.imember || [];\n\n                    var recommendGroups = data.recommendGroups || {};\n                    var recommend = recommendGroups.peas || [];\n                    //\n                    var usedObj = created.concat(joined);\n                    //\n                    var dupRemove = function(useObj, contrastObj) {\n                        var arr = [];\n                        var dup = 0;\n                        for (var i = 0; i < useObj.length; i++) {\n                            for (var j = 0; j < contrastObj.length; j++) {\n                                if (contrastObj[j].id == useObj[i].id) {\n                                    dup = 1;\n                                    break;\n                                } else {\n                                    dup = 0;\n                                }\n                            }\n                            if (arr.length < 12) {\n                                if (dup == 0) {\n                                    arr.push(useObj[i]);\n                                }\n                            } else {\n                                return arr;\n                            }\n                        }\n                        return arr;\n                    }\n                    var newObj = dupRemove(recommend, usedObj)\n                    data = {\n                        created: created,\n                        joined: joined,\n                        recommend: newObj\n                    };\n                    // \n                    var html = tpl(data);\n                    // \n                    self.content(html);\n                    // \n                    if (groupid && $('[data-id=' + groupid + ']')) {\n                        $('[data-id=' + groupid + ']').addClass('active');\n                        $selected = $('[data-id=' + groupid + ']');\n                    }\n                    bindHandler.call(self);\n                } else {\n                    self.content(reload);\n                    $('[data-node=btn_reload]').on('click', function() {\n                        create();\n                    })\n                }\n            }).fail(function() {\n                self.content(reload);\n            }).always(function() {\n\n            });\n        },\n        onclose: function() {\n            bindHandler.call(this, true);\n        }\n    };\n\n    $.extend(true, defaults, options);\n    var d = Dialog(defaults);\n    d.show();\n    return d;\n};\n\n/*//\nPubsub(channel.postTopic.selectCircle).sub(function(group) {\n    console.log(group);\n})*/\n\nmodule.exports = create;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/popup/circle/dialog.js","var template=require('tmodjs-loader/runtime');\nmodule.exports=template('src/js/module/popup/circle/content',function($data,$filename\n/*``*/) {\n'use strict';var $utils=this,$helpers=$utils.$helpers,$escape=$utils.$escape,created=$data.created,$each=$utils.$each,group=$data.group,$index=$data.$index,joined=$data.joined,recommend=$data.recommend,$out='';$out+='<div data-node=\"loading\" style=\"display:none\" class=\"loading\"><img src=\"';\n$out+=$escape($helpers. randomShowPic('loading' ));\n$out+='\" alt=\"\"></div> <p data-node=\"reload\" style=\"display:none\" class=\"failed-txt\"></p> <ul class=\"chosed-circle-box\"> ';\nif(created.length > 0){\n$out+=' <li class=\"clearfix\" data-type=\"0\"> <h4></h4> ';\n$each(created,function(group,$index){\n$out+=' <dl data-id=\"';\n$out+=$escape(group.id);\n$out+='\" data-name=\"';\n$out+=$escape(group.name);\n$out+='\"> <dt> ';\nif(group.icon && group.icon.length > 0){\n$out+=' <img src=\"';\n$out+=$escape(group.icon);\n$out+='\" title=\"';\n$out+=$escape(group.name);\n$out+='\"> ';\n}else{\n$out+=' <img src=\"';\n$out+=$escape($helpers. randomShowPic('face' ));\n$out+='\" title=\"';\n$out+=$escape(group.name);\n$out+='\"> ';\n}\n$out+=' </dt> <dd><a href=\"javascript:;\" title=\"';\n$out+=$escape(group.name);\n$out+='\">';\n$out+=$escape(group.name);\n$out+='</a></dd> </dl> ';\n});\n$out+=' </li> ';\n}\n$out+=' ';\nif(joined.length > 0){\n$out+=' <li class=\"clearfix\" data-type=\"1\"> <h4></h4> ';\n$each(joined,function(group,$index){\n$out+=' <dl data-id=\"';\n$out+=$escape(group.id);\n$out+='\" data-name=\"';\n$out+=$escape(group.name);\n$out+='\"> <dt> ';\nif(group.icon && group.icon.length > 0){\n$out+=' <img src=\"';\n$out+=$escape(group.icon);\n$out+='\" title=\"';\n$out+=$escape(group.name);\n$out+='\"> ';\n}else{\n$out+=' <img src=\"';\n$out+=$escape($helpers. randomShowPic('face' ));\n$out+='\" title=\"';\n$out+=$escape(group.name);\n$out+='\"> ';\n}\n$out+=' </dt> <dd><a href=\"javascript:;\" title=\"';\n$out+=$escape(group.name);\n$out+='\">';\n$out+=$escape(group.name);\n$out+='</a></dd> </dl> ';\n});\n$out+=' </li> ';\n}\n$out+=' ';\nif(recommend.length > 0){\n$out+=' <li class=\"clearfix\" data-type=\"2\"> <h4></h4> ';\n$each(recommend,function(group,$index){\n$out+=' <dl data-id=\"';\n$out+=$escape(group.id);\n$out+='\" data-name=\"';\n$out+=$escape(group.name);\n$out+='\"> <dt> ';\nif(group.icon && group.icon.length > 0){\n$out+=' <img src=\"';\n$out+=$escape(group.icon);\n$out+='\" title=\"';\n$out+=$escape(group.name);\n$out+='\"> ';\n}else{\n$out+=' <img src=\"';\n$out+=$escape($helpers. randomShowPic('face' ));\n$out+='\" title=\"';\n$out+=$escape(group.name);\n$out+='\"> ';\n}\n$out+=' </dt> <dd><a href=\"javascript:;\" title=\"';\n$out+=$escape(group.name);\n$out+='\">';\n$out+=$escape(group.name);\n$out+='</a></dd> </dl> ';\n});\n$out+=' </li> ';\n}\n$out+=' </ul> ';\nreturn new String($out);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/module/popup/circle/content.tpl\n// module id = 100\n// module chunks = 4 15","/**\n * randomShowPic  - tmod helpers\n * \n * @author Zhengchun Fu\n */\nvar tmod = require('tmodjs-loader/runtime');\nvar randomShowPic = function(type) {\n\t// var num;\n\tif (type == 'face') {\n\t\treturn $_CONFIG.imgpath + '/images/public/circle-default.png';\n\t} else if (type == 'loading') {\n\t\treturn $_CONFIG.imgpath + '/images/public/loading.gif';\n\t}\n};\n\nmodule.exports = function() {\n\ttmod.helper('randomShowPic', randomShowPic);\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/tmodHelper/randomShowPic.js","/**\n *  QQ\n * @author Zhengchun Fu\n */\nvar fetch = require('io/fetch');\nvar url = require('io/url');\nvar getQRCode = require('utils/getQRCode');\nvar checkLoginStatus = require('module/checkLoginStatus');\n\nvar APIS = {\n    qq: \"http://connect.qq.com/widget/shareqq/index.html\",\n    wb: \"http://v.t.sina.com.cn/share/share.php\",\n    qz: \"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey\"\n};\n\nvar defaultInfo = {\n    url: 'https://group.gomeplus.com/',\n    title: 'APP',\n    pic: '../../images/public/logo.png', // logo\n    summary: 'APP'\n};\n\nvar open = function(url) {\n    window.open(url);\n};\n\n// \nvar hasShareBtnsHTML = false;\nvar initShareBtns = function() {\n    var shareBtns = '<p data-node=\"shareBtnBox\" class=\"share-down\" style=\"z-index:21;\"><span class=\"share-box\"><span class=\"icon icon-up-arrow\"></span><span class=\"icon-box\"><em data-shareto=\"weixin\" class=\"iconn-30\"></em><em data-shareto=\"qq\" class=\"iconn-32\"></em><em data-shareto=\"sina\" class=\"iconn-31\"></em><em data-shareto=\"qzone\" class=\"iconn-33\"></em></span></span></p>';\n    $('body').append(shareBtns);\n    hasShareBtnsHTML = true;\n};\nvar showShareToBtns = function(style) {\n    !hasShareBtnsHTML && initShareBtns();\n    $('[data-node=shareBtnBox]').css({\n        left: style.x,\n        top: style.y\n    }).show();\n};\n\n// \nvar hasWeixinHTML = false;\nvar initWeixinHTML = function() {\n\n    var weixinBox = '<div class=\"share-weixin\"><div class=\"wx-mask\"></div><div class=\"wx-main\"><div class=\"wx-code\"><span></span><img data-node=\"shareWeixinCode\" alt=\"\" /></div><p></p><a href=\"javascript:;\" title=\"\" class=\"wx-close\"></a></div></div>';\n    $('body').append(weixinBox);\n    hasWeixinHTML = true;\n};\n\n// pics: picspic\nvar formatParams = function(p, pics) {\n    var s = [];\n    var data = {\n        title: p.title,\n        url: p.url,\n        summary: p.summary,\n        //desc: p.desc,\n        site: p.site\n    };\n\n    for (var i in data) {\n        s.push(i + '=' + encodeURIComponent(data[i] || ''));\n    }\n    if (pics) {\n        s.push('pics=' + p.pic);\n    } else {\n        s.push('pic=' + p.pic);\n    }\n    return s.join('&');\n};\n\n// \n// ||\nvar shareTo = {\n    weixin: function(options) {\n        var link = getQRCode(options.url);\n        !hasWeixinHTML && initWeixinHTML();\n\n        $('[data-node=shareWeixinCode]')[0].src = link;\n        $('.share-weixin').show();\n        $('.wx-close').on('click', function() {\n            $('.share-weixin').hide();\n        });\n    },\n    qq: function(options) {\n        var link = APIS.qq + '?' + formatParams(options, true);\n        open(link);\n    },\n    wb: function(options) {\n        var link = APIS.wb + '?' + formatParams(options);\n        open(link);\n    },\n    qz: function(options) {\n        var link = APIS.qz + '?' + formatParams(options, true);\n        open(link);\n    }\n};\n\n// share with kid\nvar shareWithKid = function(args) {\n    var isRebate = args.isRebate === '0' ? false : true;\n    fetch.get(url.get('shareGetGoodsKid'), {\n        validate: isRebate,\n        data: {\n            skuId: args.skuId,\n            itemId: args.itemId,\n            parentKid: args.parentKid\n        },\n        async: false // \n    }).done(function(data) {\n        if (data.success === true) {\n            var kid = data.data.kid;\n            var shareInfo = args.shareInfo;\n            // \n            // mall_domain+product/shopid-productId.html?onlineUserId=xxxx&kid=xxxx\n            var url = shareInfo.url;\n            var index = url.indexOf('?');\n            if (index > 0) {\n                url = url.substring(0, index);\n            }\n            shareInfo.url = url + '?onlineUserId=' + shareInfo.onlineUserId + '&kId=' + kid;\n            shareTo[args.shareto](shareInfo);\n        } else {\n            shareTo[args.shareto](args.shareInfo);\n        }\n    }).fail(function() {\n        if (isRebate) {\n            if (checkLoginStatus()) {\n                shareTo[args.shareto](args.shareInfo);\n            }\n        } else {\n            shareTo[args.shareto](args.shareInfo);\n        }\n    });\n};\n\n// \nvar go = function(obj) {\n    // {type:x,title:x,url:x,pic:x}\n    var info = {\n        title: obj.title || defaultInfo.title,\n        url: obj.url || defaultInfo.url,\n        pic: obj.pic || defaultInfo.pic,\n        summary: obj.summary || '',\n        desc: obj.desc || ''\n    };\n\n    !!shareTo[obj.type] && shareTo[obj.type](info);\n\n};\n\n/**\n * \n * @param  {str} [parent] []\n * @param {str} [selector] []\n */\nvar shareItem = function(parent, selector, beforeShare) {\n    var shareInfo = null;\n    var $item = null;\n    $item = typeof parent === 'string' ? $(parent) : parent;\n    selector = selector || '[data-action=shareto]';\n    // \n    $item.on('mouseenter', selector, function() {\n        var shareUrl = $(this).data('surl');\n        var shareTitle = $(this).data('stitle');\n        var sharePic = $(this).data('spic');\n\n        shareInfo = {\n            url: shareUrl,\n            title: shareTitle,\n            pic: sharePic\n        };\n\n        var pw = $(this).width();\n        var ph = $(this).height();\n        var px = ($(this).offset().left / 1 + pw / 2 - 80) + 'px';\n        var py = ($(this).offset().top / 1 + (ph - 1)) + 'px';\n\n        showShareToBtns({\n            x: px,\n            y: py\n        });\n        return false;\n    });\n    // \n    $item.on('mouseleave', selector, function() {\n        $('[data-node=shareBtnBox]').hide();\n        return false;\n    });\n\n    $('body').on('click', '[data-shareto]', function(e) {\n        e.preventDefault();\n        var shareType = $(this).data('shareto');\n        shareInfo.type = shareType;\n        beforeShare = beforeShare || function() {};\n        beforeShare.call(null, shareInfo);\n        go(shareInfo);\n    });\n\n    $('body').on('mouseenter', '[data-node=shareBtnBox]', function() {\n        $(this).show();\n    });\n    $('body').on('mouseleave', '[data-node=shareBtnBox]', function() {\n        $(this).hide();\n    });\n};\n\nmodule.exports = {\n    share: go,\n    shareto: shareTo,\n    shareItem: shareItem,\n    shareWithKid: shareWithKid\n};\n\n/**\n *  \n * [data-action=shareto]\n * data-surl,data-stitle,data-spic\n * urlhttps?://\n * pic||\n *\n *  [data-action=shareto] \n * shareInfo,\n *\n * :\n * var share = require(..);\n * share.shareItem(e.g. 'data-node=shareList');\n *\n * shareto.weixin({shareInfo})\n * shareto.qq({shareInfo})\n * shareto.sina({shareInfo})\n * shareto.qzone({shareInfo})\n *\n *\n * share.share({shareInfo});shareInfotype[weixin,qq,sina,qzone]\n */\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/share.js","// \nvar getQRCode = function(url) {\n    return $_CONFIG.group_domain + 'ajax/qrcode/urlcode?url=' + encodeURIComponent(url);\n};\n\nmodule.exports = getQRCode;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/getQRCode.js","/**\n * Parse or format dates\n * @class fecha\n */\nvar fecha = {};\nvar token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g;\nvar twoDigits = /\\d\\d?/;\nvar threeDigits = /\\d{3}/;\nvar fourDigits = /\\d{4}/;\nvar word = /[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i;\nvar noop = function() {};\n\nfunction shorten(arr, sLen) {\n    var newArr = [];\n    for (var i = 0, len = arr.length; i < len; i++) {\n        newArr.push(arr[i].substr(0, sLen));\n    }\n    return newArr;\n}\n\nfunction monthUpdate(arrName) {\n    return function(d, v, i18n) {\n        var index = i18n[arrName].indexOf(v.charAt(0).toUpperCase() + v.substr(1).toLowerCase());\n        if (~index) {\n            d.month = index;\n        }\n    };\n}\n\nfunction pad(val, len) {\n    val = String(val);\n    len = len || 2;\n    while (val.length < len) {\n        val = '0' + val;\n    }\n    return val;\n}\n\nvar dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nvar monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nvar monthNamesShort = shorten(monthNames, 3);\nvar dayNamesShort = shorten(dayNames, 3);\nfecha.i18n = {\n    dayNamesShort: dayNamesShort,\n    dayNames: dayNames,\n    monthNamesShort: monthNamesShort,\n    monthNames: monthNames,\n    amPm: ['am', 'pm'],\n    DoFn: function DoFn(D) {\n        return D + ['th', 'st', 'nd', 'rd'][D % 10 > 3 ? 0 : (D - D % 10 !== 10) * D % 10];\n    }\n};\n\nvar formatFlags = {\n    D: function(dateObj) {\n        return dateObj.getDate();\n    },\n    DD: function(dateObj) {\n        return pad(dateObj.getDate());\n    },\n    Do: function(dateObj, i18n) {\n        return i18n.DoFn(dateObj.getDate());\n    },\n    d: function(dateObj) {\n        return dateObj.getDay();\n    },\n    dd: function(dateObj) {\n        return pad(dateObj.getDay());\n    },\n    ddd: function(dateObj, i18n) {\n        return i18n.dayNamesShort[dateObj.getDay()];\n    },\n    dddd: function(dateObj, i18n) {\n        return i18n.dayNames[dateObj.getDay()];\n    },\n    M: function(dateObj) {\n        return dateObj.getMonth() + 1;\n    },\n    MM: function(dateObj) {\n        return pad(dateObj.getMonth() + 1);\n    },\n    MMM: function(dateObj, i18n) {\n        return i18n.monthNamesShort[dateObj.getMonth()];\n    },\n    MMMM: function(dateObj, i18n) {\n        return i18n.monthNames[dateObj.getMonth()];\n    },\n    YY: function(dateObj) {\n        return String(dateObj.getFullYear()).substr(2);\n    },\n    YYYY: function(dateObj) {\n        return dateObj.getFullYear();\n    },\n    h: function(dateObj) {\n        return dateObj.getHours() % 12 || 12;\n    },\n    hh: function(dateObj) {\n        return pad(dateObj.getHours() % 12 || 12);\n    },\n    H: function(dateObj) {\n        return dateObj.getHours();\n    },\n    HH: function(dateObj) {\n        return pad(dateObj.getHours());\n    },\n    m: function(dateObj) {\n        return dateObj.getMinutes();\n    },\n    mm: function(dateObj) {\n        return pad(dateObj.getMinutes());\n    },\n    s: function(dateObj) {\n        return dateObj.getSeconds();\n    },\n    ss: function(dateObj) {\n        return pad(dateObj.getSeconds());\n    },\n    S: function(dateObj) {\n        return Math.round(dateObj.getMilliseconds() / 100);\n    },\n    SS: function(dateObj) {\n        return pad(Math.round(dateObj.getMilliseconds() / 10), 2);\n    },\n    SSS: function(dateObj) {\n        return pad(dateObj.getMilliseconds(), 3);\n    },\n    a: function(dateObj, i18n) {\n        return dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1];\n    },\n    A: function(dateObj, i18n) {\n        return dateObj.getHours() < 12 ? i18n.amPm[0].toUpperCase() : i18n.amPm[1].toUpperCase();\n    },\n    ZZ: function(dateObj) {\n        var o = dateObj.getTimezoneOffset();\n        return (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4);\n    }\n};\n\nvar parseFlags = {\n    D: [twoDigits, function(d, v) {\n        d.day = v;\n    }],\n    M: [twoDigits, function(d, v) {\n        d.month = v - 1;\n    }],\n    YY: [twoDigits, function(d, v) {\n        var da = new Date(),\n            cent = +('' + da.getFullYear()).substr(0, 2);\n        d.year = '' + (v > 68 ? cent - 1 : cent) + v;\n    }],\n    h: [twoDigits, function(d, v) {\n        d.hour = v;\n    }],\n    m: [twoDigits, function(d, v) {\n        d.minute = v;\n    }],\n    s: [twoDigits, function(d, v) {\n        d.second = v;\n    }],\n    YYYY: [fourDigits, function(d, v) {\n        d.year = v;\n    }],\n    S: [/\\d/, function(d, v) {\n        d.millisecond = v * 100;\n    }],\n    SS: [/\\d{2}/, function(d, v) {\n        d.millisecond = v * 10;\n    }],\n    SSS: [threeDigits, function(d, v) {\n        d.millisecond = v;\n    }],\n    d: [twoDigits, noop],\n    ddd: [word, noop],\n    MMM: [word, monthUpdate('monthNamesShort')],\n    MMMM: [word, monthUpdate('monthNames')],\n    a: [word, function(d, v, i18n) {\n        var val = v.toLowerCase();\n        if (val === i18n.amPm[0]) {\n            d.isPm = false;\n        } else if (val === i18n.amPm[1]) {\n            d.isPm = true;\n        }\n    }],\n    ZZ: [/[\\+\\-]\\d\\d:?\\d\\d/, function(d, v) {\n        var parts = (v + '').match(/([\\+\\-]|\\d\\d)/gi),\n            minutes;\n\n        if (parts) {\n            minutes = +(parts[1] * 60) + parseInt(parts[2], 10);\n            d.timezoneOffset = parts[0] === '+' ? minutes : -minutes;\n        }\n    }]\n};\nparseFlags.dd = parseFlags.d;\nparseFlags.dddd = parseFlags.ddd;\nparseFlags.Do = parseFlags.DD = parseFlags.D;\nparseFlags.mm = parseFlags.m;\nparseFlags.hh = parseFlags.H = parseFlags.HH = parseFlags.h;\nparseFlags.MM = parseFlags.M;\nparseFlags.ss = parseFlags.s;\nparseFlags.A = parseFlags.a;\n\n\n// Some common format strings\nfecha.masks = {\n    'default': 'ddd MMM DD YYYY HH:mm:ss',\n    shortDate: 'M/D/YY',\n    mediumDate: 'MMM D, YYYY',\n    longDate: 'MMMM D, YYYY',\n    fullDate: 'dddd, MMMM D, YYYY',\n    shortTime: 'HH:mm',\n    mediumTime: 'HH:mm:ss',\n    longTime: 'HH:mm:ss.SSS'\n};\n\n/***\n * Format a date\n * @method format\n * @param {Date|number} dateObj\n * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n */\nfecha.format = function(dateObj, mask, i18nSettings) {\n    var i18n = i18nSettings || fecha.i18n;\n\n    if (typeof dateObj === 'number') {\n        dateObj = new Date(dateObj);\n    }\n\n    if (Object.prototype.toString.call(dateObj) !== '[object Date]' || isNaN(dateObj.getTime())) {\n        throw new Error('Invalid Date in fecha.format');\n    }\n\n    mask = fecha.masks[mask] || mask || fecha.masks['default'];\n\n    return mask.replace(token, function($0) {\n        return $0 in formatFlags ? formatFlags[$0](dateObj, i18n) : $0.slice(1, $0.length - 1);\n    });\n};\n\n/**\n * Parse a date string into an object, changes - into /\n * @method parse\n * @param {string} dateStr Date string\n * @param {string} format Date parse format\n * @returns {Date|boolean}\n */\nfecha.parse = function(dateStr, format, i18nSettings) {\n    var i18n = i18nSettings || fecha.i18n;\n\n    if (typeof format !== 'string') {\n        throw new Error('Invalid format in fecha.parse');\n    }\n\n    format = fecha.masks[format] || format;\n\n    // Avoid regular expression denial of service, fail early for really long strings\n    // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n    if (dateStr.length > 1000) {\n        return false;\n    }\n\n    var isValid = true;\n    var dateInfo = {};\n    format.replace(token, function($0) {\n        if (parseFlags[$0]) {\n            var info = parseFlags[$0];\n            var index = dateStr.search(info[0]);\n            if (!~index) {\n                isValid = false;\n            } else {\n                dateStr.replace(info[0], function(result) {\n                    info[1](dateInfo, result, i18n);\n                    dateStr = dateStr.substr(index + result.length);\n                    return result;\n                });\n            }\n        }\n\n        return parseFlags[$0] ? '' : $0.slice(1, $0.length - 1);\n    });\n\n    if (!isValid) {\n        return false;\n    }\n\n    var today = new Date();\n    if (dateInfo.isPm === true && dateInfo.hour != null && +dateInfo.hour !== 12) {\n        dateInfo.hour = +dateInfo.hour + 12;\n    } else if (dateInfo.isPm === false && +dateInfo.hour === 12) {\n        dateInfo.hour = 0;\n    }\n\n    var date;\n    if (dateInfo.timezoneOffset != null) {\n        dateInfo.minute = +(dateInfo.minute || 0) - +dateInfo.timezoneOffset;\n        date = new Date(Date.UTC(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1,\n            dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0));\n    } else {\n        date = new Date(dateInfo.year || today.getFullYear(), dateInfo.month || 0, dateInfo.day || 1,\n            dateInfo.hour || 0, dateInfo.minute || 0, dateInfo.second || 0, dateInfo.millisecond || 0);\n    }\n    return date;\n};\n\nmodule.exports = fecha;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/fecha.js"],"sourceRoot":""}