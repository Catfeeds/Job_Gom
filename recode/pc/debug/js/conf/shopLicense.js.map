{"version":3,"sources":["webpack:///./src/js/page/shopLicense/index.js","webpack:///./src/js/module/popup/alert.js?466a************","webpack:///./src/js/module/hint.js?34fa******","webpack:///./src/js/utils/truncate.js?b86a****","webpack:///./src/js/utils/byteLen.js?1ae0****","webpack:///./src/js/utils/trim.js?2399***","webpack:///./src/js/plugin/jquery.splendid.textchange.js?3351*","webpack:///./src/js/module/share.js?fbb7*","webpack:///./src/js/utils/getQRCode.js?13de*","webpack:///./src/js/module/praise.js?0d4d","webpack:///./src/js/module/shopCollect.js?0656","webpack:///./src/js/page/shopLicense/backups/index.js"],"names":["require","Dialog","noop","create","content","options","defaults","fixed","modal","autofocus","className","okCls","ok","$","extend","d","header","_$","title","css","show","module","exports","$publicMask","$publicTips","timer","events","off","on","hide","init","msg","duration","callback","clearTimeout","length","text","append","offsetHeight","width","setTimeout","byteLen","isHighSurrogate","codePoint","isLowSurrogate","truncate","string","byteLength","Error","charLength","curByteLength","segment","i","charCodeAt","slice","str","replace","trim","testNode","document","createElement","isInputSupported","documentMode","hasInputCapabilities","elem","nodeName","type","activeElement","activeElementValue","startWatching","target","value","attachEvent","handlePropertyChange","stopWatching","detachEvent","nativeEvent","propertyName","srcElement","trigger","e","fetch","url","getQRCode","checkLoginStatus","APIS","qq","wb","qz","defaultInfo","pic","summary","open","window","hasShareBtnsHTML","initShareBtns","shareBtns","showShareToBtns","style","left","x","top","y","hasWeixinHTML","initWeixinHTML","weixinBox","formatParams","p","pics","s","data","site","push","encodeURIComponent","join","shareTo","weixin","link","src","shareWithKid","args","isRebate","get","validate","skuId","itemId","parentKid","async","done","success","kid","shareInfo","index","indexOf","substring","onlineUserId","shareto","fail","go","obj","info","desc","shareItem","parent","selector","beforeShare","$item","shareUrl","shareTitle","sharePic","pw","ph","height","px","offset","py","preventDefault","shareType","call","share","$_CONFIG","group_domain","alert","Pubsub","channel","loginPop","isLogin","popFlag","setData","$node","praise","count","helper","normal","add","addClass","find","reduce","removeClass","getCallback","mode","container","$container","onPraise","onUnPraise","onPraised","$this","t","isPraise","id","objs","groupId","noRefreshFetch","o","post","callbacks","comment","enableEditor","pub","pid","code","location","href","message","reload","always","hint","isCollect","collectUrl","elementSelector","onChanged","$select","$selector","undefined","_this","isAdd","changed","shopId","refreshFlag","result","attr","moduleTrim","shopCollect","$Form","$codeBtn","$codeImg","$codeInput","$codeVilid","$codeTip","$submitBtn","$shopTop","$love","$loveNum","$collect","$collectNum","Timeliness","loveNum","tipshow","html","codeInput","val","submit","mall_domain","codeChange","prev","shareTimer","$shareBtnBox","pcUrl","isEmptyObject","imgpath","BP","send","event_id","shop_id","headPic","isDefault","isPic","reg","test","weixin_share","analytic","sina","qzone"],"mappings":"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","file":"shopLicense.js","sourcesContent":["require('./backups');\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/shopLicense/index.js","var Dialog = require('dialog');\nvar noop = function() {};\n\nvar create = function(content, options) {\n    content = content || '';\n    options = options || {};\n    var defaults = {\n        fixed: true,\n        modal: true,\n        autofocus: false,\n        content: '<p class=\"del-pop-p\">' + content + '</p>',\n        className: 'pop-box',\n        okCls: 'pc-btn pc-btnh35 circle-pop-btn',\n        ok: noop\n    };\n    $.extend(true, defaults, options);\n    var d = Dialog(defaults);\n\n    var header = d._$('header');\n    var title = d._$('title');\n    if(!options.title){\n        title.css('borderBottom', 'none');\n    }\n    header.show();\n    d.show();\n    return d;\n};\n\nmodule.exports = create;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/popup/alert.js","/*\r\n * 弹层提示弹窗\r\n * zhaodonghong\r\n */\r\n\r\n\r\n\r\nvar $publicMask;\r\nvar $publicTips;\r\nvar timer;\r\n\r\n\r\nvar events = function() {\r\n\r\n    $publicMask.off().on('click', function() {\r\n        $publicMask.hide();\r\n        $publicTips.hide();\r\n    });\r\n\r\n    $publicTips.off().on('click', function() {\r\n        $publicMask.hide();\r\n        $publicTips.hide();\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * msg string 提示信息\r\n * options object \r\n * options.duration settimout消失时间\r\n * options.callback 提示消失的回调\r\n*/\r\nvar init = function(msg, options) {\r\n    var defaults = {\r\n        duration: 2000,\r\n        callback: function() {}\r\n    };\r\n\r\n    $.extend(defaults, options || {});\r\n\r\n    clearTimeout(timer);\r\n    $publicMask = $('[data-action=\"publicMask\"]');\r\n    $publicTips = $('[data-action=\"publicTips\"]');\r\n\r\n    if ($publicMask.length > 0) {\r\n\r\n        $publicMask.show();\r\n        $publicTips.show().text(msg);\r\n\r\n    } else {\r\n\r\n        $('body').append('<div data-action=\"publicMask\" class=\"ordi-toast\"></div><div class=\"ordi-toast-txt\" data-action=\"publicTips\">' + msg + '</div>');\r\n        $publicMask = $('[data-action=\"publicMask\"]');\r\n        $publicTips = $('[data-action=\"publicTips\"]');\r\n        events();\r\n    }\r\n\r\n    $publicTips.css('margin', -$publicTips[0].offsetHeight / 2 + 'px 0 0 ' + -$publicTips.width() / 2 + 'px');\r\n\r\n    timer = setTimeout(function() {\r\n\r\n        $publicMask.hide();\r\n        $publicTips.hide();\r\n\r\n        defaults.callback();\r\n\r\n    }, defaults.duration);\r\n};\r\n\r\n\r\n\r\nmodule.exports = {\r\n    init: init,\r\n    events: events\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/hint.js","/**\n * [truncate 按字节截取字符串]\n * @param  {[function]}  getLength [获取长度的方法]\n * @param  {[string]}  string [截取的字符串]\n * @param  {[number]}  byteLength [截取的长度]\n * @return {string}           [返回截取后的字符串]\n */\nvar byteLen = require('./byteLen');\n\nfunction isHighSurrogate(codePoint) {\n    return codePoint >= 0xd800 && codePoint <= 0xdbff;\n}\n\nfunction isLowSurrogate(codePoint) {\n    return codePoint >= 0xdc00 && codePoint <= 0xdfff;\n}\n\n// Truncate string by size in bytes\nfunction truncate(string, byteLength) {\n    if (typeof string !== \"string\") {\n        throw new Error(\"Input must be string\");\n    }\n\n    var charLength = string.length;\n    var curByteLength = 0;\n    var codePoint;\n    var segment;\n\n    for (var i = 0; i < charLength; i += 1) {\n        codePoint = string.charCodeAt(i);\n        segment = string[i];\n\n        if (isHighSurrogate(codePoint) && isLowSurrogate(string.charCodeAt(i + 1))) {\n            i += 1;\n            segment += string[i];\n        }\n\n        curByteLength += byteLen(segment);\n\n        if (curByteLength === byteLength) {\n            return string.slice(0, i + 1);\n        } else if (curByteLength > byteLength) {\n            return string.slice(0, i - segment.length + 1);\n        }\n    }\n\n    return string;\n}\n\nmodule.exports = truncate;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/truncate.js","var byteLen = function (str) {\n    if (str == null) return 0;\n    if (typeof str != \"string\") {\n        str += \"\";\n    }\n    return str.replace(/[^\\x00-\\xff]/g, \"01\").length;\n}\n\nmodule.exports = byteLen;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/byteLen.js","/**\n * 删除字符串str的收尾空格\n */\n\nvar trim = function (str) {\n    return str.replace(/(^[ \\t\\n\\r]+)|([ \\t\\n\\r]+$)/g, '');\n};\n\nmodule.exports = trim;\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/trim.js","/**\n * jQuery \"splendid textchange\" plugin\n * http://benalpert.com/2013/06/18/a-near-perfect-oninput-shim-for-ie-8-and-9.html\n *\n * (c) 2013 Ben Alpert, released under the MIT license\n */\n\nvar testNode = document.createElement(\"input\");\nvar isInputSupported = \"oninput\" in testNode &&\n    (!(\"documentMode\" in document) || document.documentMode > 9);\n\nvar hasInputCapabilities = function(elem) {\n    // The HTML5 spec lists many more types than `text` and `password` on\n    // which the input event is triggered but none of them exist in IE 8 or\n    // 9, so we don't check them here.\n    // TODO: <textarea> should be supported too but IE seems to reset the\n    // selection when changing textarea contents during a selectionchange\n    // event so it's not listed here for now.\n    return elem.nodeName === \"INPUT\" &&\n        (elem.type === \"text\" || elem.type === \"password\");\n};\n\nvar activeElement = null;\nvar activeElementValue = null;\n\n\n/**\n * (For old IE.) Starts tracking propertychange events on the passed-in element\n * and override the value property so that we can distinguish user events from\n * value changes in JS.\n */\nvar startWatching = function(target) {\n    activeElement = target;\n    activeElementValue = target.value;\n    activeElement.attachEvent(\"onpropertychange\", handlePropertyChange);\n};\n\n/**\n * (For old IE.) Removes the event listeners from the currently-tracked\n * element, if any exists.\n */\nvar stopWatching = function() {\n  if (!activeElement) return;\n\n  // delete restores the original property definition\n  activeElement.detachEvent(\"onpropertychange\", handlePropertyChange);\n\n  activeElement = null;\n  activeElementValue = null;\n};\n\n/**\n * (For old IE.) Handles a propertychange event, sending a textChange event if\n * the value of the active element has changed.\n */\nvar handlePropertyChange = function(nativeEvent) {\n    if (nativeEvent.propertyName !== \"value\") return;\n\n    var value = nativeEvent.srcElement.value;\n    if (value === activeElementValue) return;\n    activeElementValue = value;\n\n    $(activeElement).trigger(\"textchange\");\n};\nif (isInputSupported) {\n    $(document)\n        .on(\"input\", function(e) {\n            // In modern browsers (i.e., not IE 8 or 9), the input event is\n            // exactly what we want so fall through here and trigger the\n            // event...\n            if (e.target.nodeName !== \"TEXTAREA\") {\n                // ...unless it's a textarea, in which case we don't fire an\n                // event (so that we have consistency with our old-IE shim).\n                $(e.target).trigger(\"textchange\");\n            }\n        });\n} else {\n    $(document)\n        .on(\"focusin\", function(e) {\n            // In IE 8, we can capture almost all .value changes by adding a\n            // propertychange handler and looking for events with propertyName\n            // equal to 'value'.\n            // In IE 9, propertychange fires for most input events but is buggy\n            // and doesn't fire when text is deleted, but conveniently,\n            // selectionchange appears to fire in all of the remaining cases so\n            // we catch those and forward the event if the value has changed.\n            // In either case, we don't want to call the event handler if the\n            // value is changed from JS so we redefine a setter for `.value`\n            // that updates our activeElementValue variable, allowing us to\n            // ignore those changes.\n            if (hasInputCapabilities(e.target)) {\n                // stopWatching() should be a noop here but we call it just in\n                // case we missed a blur event somehow.\n                stopWatching();\n                startWatching(e.target);\n            }\n        })\n\n        .on(\"focusout\", function() {\n            stopWatching();\n        })\n\n        .on(\"selectionchange keyup keydown\", function() {\n            // On the selectionchange event, e.target is just document which\n            // isn't helpful for us so just check activeElement instead.\n            //\n            // 90% of the time, keydown and keyup aren't necessary. IE 8 fails\n            // to fire propertychange on the first input event after setting\n            // `value` from a script and fires only keydown, keypress, keyup.\n            // Catching keyup usually gets it and catching keydown lets us fire\n            // an event for the first keystroke if user does a key repeat\n            // (it'll be a little delayed: right before the second keystroke).\n            // Other input methods (e.g., paste) seem to fire selectionchange\n            // normally.\n            if (activeElement && activeElement.value !== activeElementValue) {\n                activeElementValue = activeElement.value;\n                $(activeElement).trigger(\"textchange\");\n            }\n        });\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/plugin/jquery.splendid.textchange.js","/**\n * 分享到 微信，QQ，微博，空间\n * @author Zhengchun Fu\n */\nvar fetch = require('io/fetch');\nvar url = require('io/url');\nvar getQRCode = require('utils/getQRCode');\nvar checkLoginStatus = require('module/checkLoginStatus');\n\nvar APIS = {\n    qq: \"http://connect.qq.com/widget/shareqq/index.html\",\n    wb: \"http://v.t.sina.com.cn/share/share.php\",\n    qz: \"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey\"\n};\n\nvar defaultInfo = {\n    url: 'https://group.gomeplus.com/',\n    title: '国美APP边玩边分享，购物不孤单',\n    pic: '../../images/public/logo.png', // logo图片地址\n    summary: '国美APP边玩边分享，购物不孤单'\n};\n\nvar open = function(url) {\n    window.open(url);\n};\n\n// 分享按钮渲染\nvar hasShareBtnsHTML = false;\nvar initShareBtns = function() {\n    var shareBtns = '<p data-node=\"shareBtnBox\" class=\"share-down\" style=\"z-index:21;\"><span class=\"share-box\"><span class=\"icon icon-up-arrow\"></span><span class=\"icon-box\"><em data-shareto=\"weixin\" class=\"iconn-30\"></em><em data-shareto=\"qq\" class=\"iconn-32\"></em><em data-shareto=\"sina\" class=\"iconn-31\"></em><em data-shareto=\"qzone\" class=\"iconn-33\"></em></span></span></p>';\n    $('body').append(shareBtns);\n    hasShareBtnsHTML = true;\n};\nvar showShareToBtns = function(style) {\n    !hasShareBtnsHTML && initShareBtns();\n    $('[data-node=shareBtnBox]').css({\n        left: style.x,\n        top: style.y\n    }).show();\n};\n\n// 微信弹层渲染\nvar hasWeixinHTML = false;\nvar initWeixinHTML = function() {\n\n    var weixinBox = '<div class=\"share-weixin\"><div class=\"wx-mask\"></div><div class=\"wx-main\"><div class=\"wx-code\"><span></span><img data-node=\"shareWeixinCode\" alt=\"分享到微信\" /></div><p>打开微信扫一扫，即可分享</p><a href=\"javascript:;\" title=\"点击关闭\" class=\"wx-close\">×</a></div></div>';\n    $('body').append(weixinBox);\n    hasWeixinHTML = true;\n};\n\n// pics: 图片参数是否为pics，默认是pic。\nvar formatParams = function(p, pics) {\n    var s = [];\n    var data = {\n        title: p.title,\n        url: p.url,\n        summary: p.summary,\n        //desc: p.desc,\n        site: p.site\n    };\n\n    for (var i in data) {\n        s.push(i + '=' + encodeURIComponent(data[i] || ''));\n    }\n    if (pics) {\n        s.push('pics=' + p.pic);\n    } else {\n        s.push('pic=' + p.pic);\n    }\n    return s.join('&');\n};\n\n// 单个调用方法\n// 分享的图片多个用||隔开。\nvar shareTo = {\n    weixin: function(options) {\n        var link = getQRCode(options.url);\n        !hasWeixinHTML && initWeixinHTML();\n\n        $('[data-node=shareWeixinCode]')[0].src = link;\n        $('.share-weixin').show();\n        $('.wx-close').on('click', function() {\n            $('.share-weixin').hide();\n        });\n    },\n    qq: function(options) {\n        var link = APIS.qq + '?' + formatParams(options, true);\n        open(link);\n    },\n    wb: function(options) {\n        var link = APIS.wb + '?' + formatParams(options);\n        open(link);\n    },\n    qz: function(options) {\n        var link = APIS.qz + '?' + formatParams(options, true);\n        open(link);\n    }\n};\n\n// share with kid\nvar shareWithKid = function(args) {\n    var isRebate = args.isRebate === '0' ? false : true;\n    fetch.get(url.get('shareGetGoodsKid'), {\n        validate: isRebate,\n        data: {\n            skuId: args.skuId,\n            itemId: args.itemId,\n            parentKid: args.parentKid\n        },\n        async: false // 防止新窗口被拦截\n    }).done(function(data) {\n        if (data.success === true) {\n            var kid = data.data.kid;\n            var shareInfo = args.shareInfo;\n            // 替换分享链接\n            // 规则：mall_domain+product/shopid-productId.html?onlineUserId=xxxx&kid=xxxx\n            var url = shareInfo.url;\n            var index = url.indexOf('?');\n            if (index > 0) {\n                url = url.substring(0, index);\n            }\n            shareInfo.url = url + '?onlineUserId=' + shareInfo.onlineUserId + '&kId=' + kid;\n            shareTo[args.shareto](shareInfo);\n        } else {\n            shareTo[args.shareto](args.shareInfo);\n        }\n    }).fail(function() {\n        if (isRebate) {\n            if (checkLoginStatus()) {\n                shareTo[args.shareto](args.shareInfo);\n            }\n        } else {\n            shareTo[args.shareto](args.shareInfo);\n        }\n    });\n};\n\n// 统一方法\nvar go = function(obj) {\n    // {type:x,title:x,url:x,pic:x}\n    var info = {\n        title: obj.title || defaultInfo.title,\n        url: obj.url || defaultInfo.url,\n        pic: obj.pic || defaultInfo.pic,\n        summary: obj.summary || '',\n        desc: obj.desc || ''\n    };\n\n    !!shareTo[obj.type] && shareTo[obj.type](info);\n\n};\n\n/**\n * 简化分享\n * @param  {str} [parent] [容器节点]\n * @param {str} [selector] [子节点选择器]\n */\nvar shareItem = function(parent, selector, beforeShare) {\n    var shareInfo = null;\n    var $item = null;\n    $item = typeof parent === 'string' ? $(parent) : parent;\n    selector = selector || '[data-action=shareto]';\n    // 显示分享按钮\n    $item.on('mouseenter', selector, function() {\n        var shareUrl = $(this).data('surl');\n        var shareTitle = $(this).data('stitle');\n        var sharePic = $(this).data('spic');\n\n        shareInfo = {\n            url: shareUrl,\n            title: shareTitle,\n            pic: sharePic\n        };\n\n        var pw = $(this).width();\n        var ph = $(this).height();\n        var px = ($(this).offset().left / 1 + pw / 2 - 80) + 'px';\n        var py = ($(this).offset().top / 1 + (ph - 1)) + 'px';\n\n        showShareToBtns({\n            x: px,\n            y: py\n        });\n        return false;\n    });\n    // 隐藏分享按钮\n    $item.on('mouseleave', selector, function() {\n        $('[data-node=shareBtnBox]').hide();\n        return false;\n    });\n\n    $('body').on('click', '[data-shareto]', function(e) {\n        e.preventDefault();\n        var shareType = $(this).data('shareto');\n        shareInfo.type = shareType;\n        beforeShare = beforeShare || function() {};\n        beforeShare.call(null, shareInfo);\n        go(shareInfo);\n    });\n\n    $('body').on('mouseenter', '[data-node=shareBtnBox]', function() {\n        $(this).show();\n    });\n    $('body').on('mouseleave', '[data-node=shareBtnBox]', function() {\n        $(this).hide();\n    });\n};\n\nmodule.exports = {\n    share: go,\n    shareto: shareTo,\n    shareItem: shareItem,\n    shareWithKid: shareWithKid\n};\n\n/**\n * 分享到 使用说明\n * 在[data-action=shareto]节点上输出要获取的数据\n * data-surl,data-stitle,data-spic\n * url要是绝对地址，带https?://的\n * pic是要分享的图片绝对地址，多张图片用||隔开。\n *\n * 页面中在分享按钮加 [data-action=shareto] 自定义属性；\n * 如果是分享当前页面的也要加shareInfo,值为当前页面对应的信息。格式都一样。\n *\n * 调用方法:\n * var share = require(..);\n * share.shareItem(要分享的区域父节点字符串e.g. 'data-node=shareList');\n *\n * shareto.weixin({shareInfo})\n * shareto.qq({shareInfo})\n * shareto.sina({shareInfo})\n * shareto.qzone({shareInfo})\n *\n *\n * share.share({shareInfo});这个shareInfo里要有type：[weixin,qq,sina,qzone]\n */\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/share.js","// 根据字符串生成二维码\nvar getQRCode = function(url) {\n    return $_CONFIG.group_domain + 'ajax/qrcode/urlcode?url=' + encodeURIComponent(url);\n};\n\nmodule.exports = getQRCode;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/getQRCode.js","/**\n *\n * 赞/取消赞\n */\nvar fetch = require('io/fetch');\nvar url = require('io/url');\nvar alert = require('module/popup/alert');\nvar Pubsub = require('io/pubsub');\nvar channel = require('io/channel');\nvar checkLoginStatus = require('module/checkLoginStatus');\nvar loginPop = require('module/popup/login');\n\nvar isLogin = checkLoginStatus(); //页面初始化是否登录判断\nvar popFlag = 0;\n\nvar noop = function() {};\nvar setData = function($node, praise, count) {\n    $node.data('praise', praise);\n    $node.data('count', count);\n};\n\nvar helper = {\n    normal: {\n        add: function($node, data, count) {\n            $node.addClass('active');\n            if (!count) {\n                count = \"取消点赞\";\n            }\n            $node.find('span').text(count);\n\n        },\n        reduce: function($node, data, count) {\n            $node.removeClass('active');\n            if (!count) {\n                count = \"点赞\";\n            }\n            $node.find('span').text(count);\n        }\n    }\n};\n\nvar getCallback = function(mode) {\n    return helper[mode];\n}\n\nvar praise = function(container, selector, options) {\n    var $container = $(container);\n    var onPraise = options.onPraise || noop;\n    var onUnPraise = options.onUnPraise || noop;\n    var onPraised = options.onPraised || noop;\n    var mode = options.mode || 'normal';\n\n    $container.on('click', selector, function() {\n        var $this = $(this);\n        /* var firing = $this.data('firing');\n         if (firing === 1) {\n             return;\n         }*/\n\n        // $this.data('firing', 1);\n        var t = $this.data('type');\n        var isPraise = $this.data('praise');\n        var id = $this.data('id');\n        var count = $this.data('count');\n\n        var objs = {\n            data: {\n                groupId: $_CONFIG['groupid'],\n                id: id,\n                type: t, // 0 店铺,  1 话题\n                isPraise: isPraise // 0 取消点赞, 1 点赞\n            }\n            /*,\n                        onLogin: noRefreshFetch,\n                        refresh: true*/\n        }\n\n        //无刷新登录\n        function noRefreshFetch() {\n            var o = objs;\n            fetch.post(url.get('praise'), o)\n                .done(function(data /*, textStatus, jqXHR*/ ) {\n                    var callbacks = getCallback(mode);\n                    //推送 评论区状态\n                    Pubsub(channel.comment.enableEditor).pub({\n                        pid: \"enable\"\n                    });\n\n                    if (data && data.code === 200 && data.success) {\n                        if (isPraise === 1) {\n                            setData($this, 0, ++count);\n                            callbacks.add($this, data, count);\n                            onPraise.call($this, data, count);\n                        } else if (isPraise === 0) {\n                            setData($this, 1, --count);\n                            callbacks.reduce($this, data, count);\n                            onUnPraise.call($this, data, count);\n                        }\n\n                    } else if (data && data.code === 422) {\n                        // window.location.href = $_CONFIG.passport_domain + 'login/index';\n                    } else if (data && data.code === 403) {\n                        alert('抱歉！该话题审核未通过', {\n                            ok: function() {\n                                window.location.href = $_CONFIG.group_domain + 'index/error?code=topic';\n                            }\n                        });\n                    } else if (data.code === 409) {\n                        //409点过赞  已经登录 把点赞状态回带，不刷新\n                        onPraised.call($this, data, count);\n                        if (!popFlag) {\n                            alert(data.message);\n                        }\n                    } else {\n                        var message = data.message;\n                        if (t === 0) {\n                            if (data.code === 404) {\n                                alert(message, {\n                                    ok: function() {\n                                        window.location.reload();\n                                    }\n                                });\n                            } else {\n                                alert(message);\n                            }\n                        } else {\n                            alert(message);\n                        }\n                    }\n                    if (popFlag) {\n                        window.location.reload();\n                    }\n                }).fail(function( /*jqXHR, textStatus, errorThrown*/ ) {\n                    // 点赞失败时,如何处理\n                }).always(function() {\n                    // $this.data('firing', 0);\n                });\n        }\n        if (!checkLoginStatus()) {\n            popFlag = 1;\n            loginPop(noRefreshFetch);\n        } else {\n            popFlag = 0;\n            noRefreshFetch()\n        }\n        return false;\n    });\n};\n\nmodule.exports = praise;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/praise.js","var fetch = require('io/fetch');\r\nvar url = require('io/url');\r\nvar hint = require('module/hint');\r\nvar checkLoginStatus = require('module/checkLoginStatus');\r\nvar loginPop = require('module/popup/login');\r\n\r\nvar isCollect = false;\r\nvar collectUrl;\r\nvar init = function(elementSelector, onChanged) {\r\n    var $select = elementSelector.parent ? $(elementSelector.parent) : $(elementSelector.selector),\r\n        $selector = elementSelector.parent ? elementSelector.selector : undefined;\r\n\r\n    $select.on('click', $selector, function() {\r\n        var _this = this,\r\n            isAdd = true,\r\n            changed = onChanged || function() {};\r\n\r\n        var objs = {\r\n            // validate: true,\r\n            data: {\r\n                shopId: $_CONFIG.shopId\r\n            }\r\n        }\r\n\r\n        //无刷新登录\r\n        function noRefreshFetch(refreshFlag) {\r\n            fetch.post(collectUrl, objs).done(function(result) {\r\n                if (result.code === 200) {\r\n                    if (isAdd) {\r\n                        $(_this).addClass('active').attr('data-collect', 'collect');\r\n                    } else {\r\n                        $(_this).removeClass('active').attr('data-collect', '');\r\n                    }\r\n                    if(!refreshFlag){\r\n                        changed.call(_this, isAdd);\r\n                    }\r\n                } else {\r\n                        hint.init(result.message)\r\n                }\r\n            }).fail(function() {\r\n                if (checkLoginStatus()) {\r\n                    hint.init('店铺收藏失败');\r\n                }\r\n            }).always(function() {\r\n                isCollect = false;\r\n                if(refreshFlag){\r\n                    window.location.reload();\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!isCollect) {\r\n            isCollect = true;\r\n            if ($(_this).attr('data-collect') === '') {\r\n                collectUrl = url.get('shopCollect');\r\n                isAdd = true;\r\n            } else {\r\n                collectUrl = url.get('unShopCollect');\r\n                isAdd = false;\r\n            }\r\n        }\r\n\r\n        if(checkLoginStatus()){\r\n            noRefreshFetch();\r\n        }else{\r\n            loginPop(function(){\r\n                noRefreshFetch(1);\r\n            })\r\n        }\r\n        return false;\r\n    });\r\n\r\n}\r\nmodule.exports = init;\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/shopCollect.js","var fetch = require('io/fetch'),\n    url = require('io/url'),\n    moduleTrim = require(\"utils/trim\"),\n    truncate = require('utils/truncate'),\n    praise = require('module/praise'),\n    shareto = require('module/share').shareto,\n    shopCollect = require('module/shopCollect');\nrequire('textchange');\n\nvar $Form = $('[data-node=Form]');\nvar $codeBtn = $Form.find('[data-node=codeBtn]'),\n    $codeImg = $Form.find('[data-node=codeImg]'),\n    $codeInput = $Form.find('[data-node=codeInput]'),\n    $codeVilid = $Form.find('[data-node=codeVilid]'),\n    $codeTip = $Form.find('[data-node=codeVilid] .red'),\n    $submitBtn = $Form.find('[data-node=submitBtn]'),\n    $shopTop = $('[data-node=\"shopTop\"]'),\n    $love = $shopTop.find('[data-action=\"love\"]'), //点赞\n    $loveNum = $love.find('[data-node=\"loveNum\"]'), //点赞数量\n    $collect = $shopTop.find('[data-action=\"collect\"]'), //收藏\n    $collectNum = $collect.find('[data-node=\"collectNum\"]'),\n    Timeliness = true; //控制数据提交按钮点击频率\n\nmodule.exports = $(function() {\n    var loveNum = ~~$loveNum.text();\n    var tipshow = function(msg) {\n        $codeTip.html(msg);\n        $codeVilid.removeClass('hide');\n    }\n\n    var codeInput = function() {\n        $codeVilid.addClass('hide');\n        if (moduleTrim($codeInput.val()).length > 4) {\n            $codeInput.val(truncate($codeInput.val(), 4));\n        }\n    }\n\n    var submit = function() {\n        if (Timeliness == false) {\n            return;\n        }\n        Timeliness = false;\n        setTimeout(function() {\n            Timeliness = true;\n        }, 3000);\n        var value = moduleTrim($codeInput.val());\n        // if( value.length == 0  ){\n        // \ttipshow('验证码不能为空');\n        // }\n        fetch.get(url.get('shopCodeCheck'), {\n            data: {\n                shopId: $_CONFIG.shopId,\n                code: value\n            }\n        }, {\n            async: false\n        }).done(function(data /*, textStatus, jqXHR*/ ) {\n            if (data.success) {\n                location.href = $_CONFIG.mall_domain + 'shop/show?shopId=' + $_CONFIG.shopId + '&code=' + value;\n            } else {\n                tipshow(data.msg);\n            }\n        }).fail(function() {\n            alert(\"数据请求失败 请稍后尝试\");\n        });\n    }\n    var codeChange = function() {\n        $codeVilid.addClass('hide');\n        fetch.get(url.get('getCodeOfBusiness'), {\n            async: false\n        }).done(function(data) {\n            if (data.success) {\n                $codeImg.attr('src', 'data:image/gif;base64,' + data.data);\n            } else {\n                alert(\"数据请求失败 请稍后尝试\");\n            }\n        }).fail(function() {\n            alert(\"数据请求失败 请稍后尝试\");\n        });\n    };\n    if ($_CONFIG.type == '9') {\n        codeChange();\n    }\n\n    (function() {\n        //点赞\n        praise('[data-node=\"shopTop\"]', '[data-action=\"love\"]', {\n            onPraise: function() {\n                loveNum++;\n                $loveNum.text(loveNum);\n            },\n            onUnPraise: function() {\n                loveNum--;\n                $loveNum.text(loveNum);\n            },\n            onPraised: function() {\n                $love.find('em').addClass('active');\n                $loveNum.text(loveNum);\n            }\n        });\n        //收藏 店铺\n        shopCollect({\n            selector: '[data-action=\"collect\"]',\n            parent: '[data-node=\"shopTop\"]'\n        }, function(isAdd) {\n            isAdd ? $collectNum.text(~~$collectNum.text() + 1).prev().addClass('active') : $collectNum.text(~~$collectNum.text() - 1).prev().removeClass('active');\n        });\n        //分享\n        var shareTimer = null,\n            $shareBtnBox = $('[data-node=\"shareBtnBox\"]'),\n            shareInfo = {},\n            pcUrl = '';\n        var shareTitle = '';\n        $('[data-node=\"shopTop\"]').on('mouseenter', '[data-action=\"shareto\"]', function() {\n                pcUrl = $(this).data('surl');\n                if ($.isEmptyObject(shareInfo)) {\n                    shareInfo = {\n                        url: $(this).data('surl'),\n                        title: $(this).data('stitle'),\n                        pic: $(this).data('spic') === '' ? $_CONFIG.imgpath + '/images/public/logo.png' : $(this).data('spic')\n                    };\n                    shareTitle = $(this).data('stitle');\n                }\n                $shareBtnBox.css({\n                    top: $(this).offset().top + 30,\n                    left: $(this).offset().left - ~~$('[data-node=\"shareBtnBox\"]').width() / 2 + ~~$(this).width() / 2\n                }).show();\n                // 发送统计数据\n                BP.send({\n                    event_id: 'B000P019',\n                    shop_id: $_CONFIG.shopId\n                })\n            })\n            .on('mouseleave', '[data-action=\"shareto\"]', function() {\n                shareTimer = setTimeout(function() {\n                    $shareBtnBox.hide();\n                }, 100)\n            });\n        $shareBtnBox.on('mouseenter', function() {\n                clearTimeout(shareTimer);\n            })\n            .on('mouseleave', function() {\n                $(this).hide();\n            });\n        //验证图片是否为图片类型以及是否为默认图片\n        var headPic = $shopTop.find('img').attr('src');\n        var isDefault = function(src) {\n            if (src == 'https://i-pre.meixincdn.com/v1/img/T1gyVTBmLT1R4cSCrK.png' || src == 'https://i6.meixincdn.com/v1/img/T1YFxTByJT1R4cSCrK.png' || src == 'https://i-pre.meixincdn.com/v1/img/T1TaVTB7LT1R4cSCrK.png') {\n                return false;\n            }\n            return true;\n        };\n        var isPic = function(src) {\n            var reg = /\\w+\\.(jpg|gif|bmp|png)$/;\n            if (isDefault(src)) {\n                return reg.test(src);\n            } else {\n                return false;\n            }\n        };\n        // shop_id，channel_id（out-weixin,out-QQ,out-xlwb，out-Qqzone）\n        $shareBtnBox.on('click', '[data-shareto=\"weixin\"]', function() {\n            shareInfo.url = $_CONFIG.weixin_share;\n            shareInfo.title = shareTitle;\n            shareto.weixin(shareInfo);\n            window.analytic('out-weixin');\n        }).on('click', '[data-shareto=\"qq\"]', function() {\n            shareInfo.url = pcUrl;\n            shareInfo.title = shareTitle;\n            shareInfo.summary = '我发现了前所未有的好店，不如，你也来逛逛？';\n            shareInfo.pic = isPic(headPic) ? headPic : $_CONFIG.imgpath + '/images/public/logo.jpg';\n            shareto.qq(shareInfo);\n            window.analytic('out-QQ');\n        }).on('click', '[data-shareto=\"sina\"]', function() {\n            shareInfo.url = pcUrl;\n            shareInfo.title = shareTitle + ',这是我费尽千辛万苦找到的超级好店。';\n            shareInfo.pic = isPic(headPic) ? headPic : $_CONFIG.imgpath + '/images/public/logo.jpg';\n            shareto.sina(shareInfo);\n            window.analytic('out-xlwb');\n        }).on('click', '[data-shareto=\"qzone\"]', function() {\n            shareInfo.url = pcUrl;\n            shareInfo.title = shareTitle;\n            shareInfo.summary = '这是我费尽千辛万苦找到的超级好店。';\n            shareInfo.pic = isPic(headPic) ? headPic : $_CONFIG.imgpath + '/images/public/logo.jpg';\n            shareto.qzone(shareInfo);\n            window.analytic('out-Qqzone');\n        });\n        //bindEvent\n        $codeInput.on('textchange', codeInput);\n        $submitBtn.on('click', submit);\n        $codeBtn.on('click', function() {\n            $codeInput.val('');\n            codeChange();\n        })\n    })();\n})\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/shopLicense/backups/index.js"],"sourceRoot":""}