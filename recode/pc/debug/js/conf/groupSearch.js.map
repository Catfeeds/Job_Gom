{"version":3,"sources":["webpack:///./src/js/page/groupSearch/index.js","webpack:///./~/_tmodjs-loader@1.0.1@tmodjs-loader/runtime.js?5041******","webpack:///./src/js/module/popup/alert.js?466a*****","webpack:///./src/js/page/groupSearch/group.tpl","webpack:///./src/js/module/tmodHelper/showPic.js"],"names":["fetch","require","url","tpl","alert","$container","$","keyword","data","$loadMore","$loading","buriedPoint","setPageData","firing","page","finished","beforeLoad","hide","show","noMoreData","find","html","off","groupEvent","on","e","target","closest","length","window","open","$_CONFIG","attr","load","get","pagesize","done","json","code","modelidPage","groups","modelid","i","append","fail","always","init","Dialog","noop","create","content","options","defaults","fixed","modal","autofocus","className","okCls","ok","extend","d","header","_$","title","css","module","exports","tmod","showPic","pic","defaultpic","imgpath","helper"],"mappings":"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","file":"groupSearch.js","sourcesContent":["var fetch = require('io/fetch');\nvar url = require('io/url');\nvar tpl = require('./group.tpl');\nvar alert = require('module/popup/alert');\n\nrequire('module/tmodHelper/showPic')();\n\nvar $container = $('[data-node=groupWrap]'); // 圈子容器\nvar keyword = $container.data('keyword'); // 关键字\nvar $loadMore = $('[data-action=loadMore]');\nvar $loading = $('[data-node=loading]');\n// var $noload = $('[data-node=noload]');\n// 发送统计数据用\nvar buriedPoint = require('utils/buriedPoint');\nburiedPoint.setPageData('searchGroup');\n\n// 加载更多\nvar firing = false; // 是否正在加载\nvar page = 2;\nvar finished = false; // 数据是否全部加载完毕\n\nvar beforeLoad = function() {\n    $loadMore.hide();\n    $loading.show();\n};\n\nvar noMoreData = function() {\n    $loadMore.find('span').html('没有更多数据');\n    $loadMore.off().show();\n    $loading.hide();\n};\n\nvar groupEvent = function() {\n    $('[data-node=groupWrap]').on('click', '[data-node=groupList]', function(e) {\n        if (!$(e.target).closest('a', this).length) {\n            window.open($_CONFIG['group_domain'] + 'circle/' + $(this).attr('data-id') + '.html');\n        }\n    });\n};\n\nvar load = function() {\n    if (firing) {\n        return;\n    }\n    if (finished) {\n        noMoreData();\n        return;\n    }\n    firing = true;\n    beforeLoad();\n\n    fetch.get(url.get('searchGroup'), {\n        data: {\n            keyword: keyword,\n            page: page,\n            pagesize: 20\n        }\n    }).done(function(json) {\n        if (json.code === 200) {\n            var modelidPage = (page-1)*20;//埋点用的modelid增加基点\n            page++;\n            var groups = json.data.groups || [];\n            if (groups.length == 0) {\n                finished = true;\n                noMoreData();\n            } else {\n                var modelid;\n                for( var i=0;i<groups.length;i++ ){\n                    modelid = i+modelidPage+1+'';\n                    switch (modelid.length){\n                        case 1:\n                            modelid = '000'+modelid;\n                            break;\n                        case 2:\n                            modelid = '00'+modelid;\n                            break;\n                        case 3:\n                            modelid = '0'+modelid;\n                            break;\n                        default:\n                            modelid = modelid;\n                    }\n                    groups[i].modelid = $_CONFIG['ssqzjg']+modelid\n                }\n                groups.keyword = keyword; // 关键词\n                var html = tpl({\n                    groups: groups\n                });\n                $loading.hide();\n                $container.append(html);\n                if (groups.length < 20) {\n                    noMoreData();\n                } else {\n                    $loadMore.show();\n                }\n            }\n        }\n    }).fail(function() {\n        alert(\"数据请求失败 请稍后尝试\");\n    }).always(function() {\n        firing = false;\n    });\n    return false;\n};\n\nvar init = function() {\n    $loadMore.on('click', load); // 加载更多\n    // 暂时使用js添加链接跳转\n    // TODO:\n    // 可能存在的坑：如果节点结构发生变化,判断逻辑可能失效\n    // 如果需求希望整个card都可以跳转,在外层添加a标签是更好的做法\n    groupEvent();\n\n    /*\n\t\n    share.shareItem($('[data-node=groupWrap]'), '[data-node=share]', function(conf){\n    \tconf.url = $_CONFIG.group_domain + conf.url;\n    \tconf.title = conf.title + '这儿有我们志趣相投的小伙伴，快加入我们吧！';\n    });\n    */\n};\n\ninit();\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/groupSearch/index.js","/*TMODJS:{}*/\r\n!function () {\r\n\tfunction a(a, b) {\r\n\t\treturn (/string|function/.test(typeof b) ? h : g)(a, b)\r\n\t}\r\n\r\n\tfunction b(a, c) {\r\n\t\treturn \"string\" != typeof a && (c = typeof a, \"number\" === c ? a += \"\" : a = \"function\" === c ? b(a.call(a)) : \"\"), a\r\n\t}\r\n\r\n\tfunction c(a) {\r\n\t\treturn l[a]\r\n\t}\r\n\r\n\tfunction d(a) {\r\n\t\treturn b(a).replace(/&(?![\\w#]+;)|[<>\"']/g, c)\r\n\t}\r\n\r\n\tfunction e(a, b) {\r\n\t\tif (m(a))for (var c = 0, d = a.length; d > c; c++)b.call(a, a[c], c, a); else for (c in a)b.call(a, a[c], c)\r\n\t}\r\n\r\n\tfunction f(a, b) {\r\n\t\tvar c = /(\\/)[^\\/]+\\1\\.\\.\\1/, d = (\"./\" + a).replace(/[^\\/]+$/, \"\"), e = d + b;\r\n\t\tfor (e = e.replace(/\\/\\.\\//g, \"/\"); e.match(c);)e = e.replace(c, \"/\");\r\n\t\treturn e\r\n\t}\r\n\r\n\tfunction g(b, c) {\r\n\t\tvar d = a.get(b) || i({filename: b, name: \"Render Error\", message: \"Template not found\"});\r\n\t\treturn c ? d(c) : d\r\n\t}\r\n\r\n\tfunction h(a, b) {\r\n\t\tif (\"string\" == typeof b) {\r\n\t\t\tvar c = b;\r\n\t\t\tb = function () {\r\n\t\t\t\treturn new k(c)\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar d = j[a] = function (c) {\r\n\t\t\ttry {\r\n\t\t\t\treturn new b(c, a) + \"\"\r\n\t\t\t} catch (d) {\r\n\t\t\t\treturn i(d)()\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn d.prototype = b.prototype = n, d.toString = function () {\r\n\t\t\treturn b + \"\"\r\n\t\t}, d\r\n\t}\r\n\r\n\tfunction i(a) {\r\n\t\tvar b = \"{Template Error}\", c = a.stack || \"\";\r\n\t\tif (c)c = c.split(\"\\n\").slice(0, 2).join(\"\\n\"); else for (var d in a)c += \"<\" + d + \">\\n\" + a[d] + \"\\n\\n\";\r\n\t\treturn function () {\r\n\t\t\treturn \"object\" == typeof console && console.error(b + \"\\n\\n\" + c), b\r\n\t\t}\r\n\t}\r\n\r\n\tvar j = a.cache = {}, k = this.String, l = {\r\n\t\t\"<\": \"&#60;\",\r\n\t\t\">\": \"&#62;\",\r\n\t\t'\"': \"&#34;\",\r\n\t\t\"'\": \"&#39;\",\r\n\t\t\"&\": \"&#38;\"\r\n\t}, m = Array.isArray || function (a) {\r\n\t\t\treturn \"[object Array]\" === {}.toString.call(a)\r\n\t\t}, n = a.utils = {\r\n\t\t$helpers: {}, $include: function (a, b, c) {\r\n\t\t\treturn a = f(c, a), g(a, b)\r\n\t\t}, $string: b, $escape: d, $each: e\r\n\t}, o = a.helpers = n.$helpers;\r\n\ta.get = function (a) {\r\n\t\treturn j[a.replace(/^\\.\\//, \"\")]\r\n\t}, a.helper = function (a, b) {\r\n\t\to[a] = b\r\n\t}, module.exports = a\r\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_tmodjs-loader@1.0.1@tmodjs-loader/runtime.js\n// module id = 34\n// module chunks = 0 1 2 3 4 5 7 9 13 15 16 20 21 22 26 27 29 30 32 34 35 38 43 44 45","var Dialog = require('dialog');\nvar noop = function() {};\n\nvar create = function(content, options) {\n    content = content || '';\n    options = options || {};\n    var defaults = {\n        fixed: true,\n        modal: true,\n        autofocus: false,\n        content: '<p class=\"del-pop-p\">' + content + '</p>',\n        className: 'pop-box',\n        okCls: 'pc-btn pc-btnh35 circle-pop-btn',\n        ok: noop\n    };\n    $.extend(true, defaults, options);\n    var d = Dialog(defaults);\n\n    var header = d._$('header');\n    var title = d._$('title');\n    if(!options.title){\n        title.css('borderBottom', 'none');\n    }\n    header.show();\n    d.show();\n    return d;\n};\n\nmodule.exports = create;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/popup/alert.js","var template=require('tmodjs-loader/runtime');\nmodule.exports=template('src/js/page/groupSearch/group',function($data,$filename\n/*``*/) {\n'use strict';var $utils=this,$helpers=$utils.$helpers,$each=$utils.$each,groups=$data.groups,group=$data.group,index=$data.index,$escape=$utils.$escape,$out='';$each(groups,function(group,index){\n$out+=' <div modelid=\"';\n$out+=$escape(group.modelid);\n$out+='\" class=\"shop-list\" data-node=\\'groupList\\' data-id=\\'';\n$out+=$escape(group.id);\n$out+='\\'> <div class=\"mg-negative\"> <!--<a data-node=\"share\" href=\"javascript:;\" class=\"a-share search-circle-share\" data-surl=\"topic/index?gid=';\n$out+=$escape(group.groupId);\n$out+='\" data-stitle=\"';\n$out+=$escape(group.name);\n$out+='\" data-spic=\"';\n$out+=$escape($helpers. showPic(group.groupIcon ));\n$out+='\"> <em class=\"icon icon-share\"></em>分享到</a> --> <div class=\"user-head\"> <a target=\"_blank\" href=\"/circle/';\n$out+=$escape(group.id);\n$out+='.html\" bp-data=\\'{\"event_id\": \"G000P006\", \"s_word\": \"';\n$out+=$escape(groups.keyword);\n$out+='\", \"group_id\": \"';\n$out+=$escape(group.id);\n$out+='\", \"s_type\": \"group\"}\\'><img src=\"';\n$out+=$escape($helpers. showPic(group.icon , 'circle-default.png'));\n$out+='\" title=\"';\n$out+=$escape(group.category.name);\n$out+='\"></a> </div> <h3 class=\"user-name\">';\n$out+=$escape(group.name);\n$out+='</h3> <div><span class=\"pc-btn pc-bj-fc8753 circle-type\">';\n$out+=$escape(group.category.name);\n$out+='</span></div> <div class=\"user-top-info\"> <ul class=\"clearfix\"> <li>成员：<span>';\n$out+=$escape(group.memberQuantity);\n$out+='</span></li> <li>话题：<span>';\n$out+=$escape(group.topicQuantity);\n$out+='</span></li> </ul> </div> </div> </div> ';\n});\nreturn new String($out);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/page/groupSearch/group.tpl\n// module id = 165\n// module chunks = 7","/**\n * showPic  - tmod helpers\n * 社交部分显示默认图片\n * @author Zhengchun Fu\n */\nvar tmod = require('tmodjs-loader/runtime');\nvar showPic = function(pic, defaultpic) {\n\tif (pic === '') {\n\t\treturn $_CONFIG.imgpath + '/images/public/' + defaultpic;\n\t} else {\n\t\treturn pic;\n\t}\n};\n\nmodule.exports = function() {\n\ttmod.helper('showPic', showPic);\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/tmodHelper/showPic.js"],"sourceRoot":""}