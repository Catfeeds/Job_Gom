{"version":3,"sources":["webpack:///./src/js/page/uc_editInfo/index.js","webpack:///./src/js/module/hint.js?34fa***********","webpack:///./src/js/module/i18n.js?8f86*******","webpack:///./src/js/module/cropper.js?d1c7","webpack:///./src/js/plugin/webuploader/webuploader.js?37bb*****","webpack:///./src/js/plugin/jquery.cropper.js?6929","webpack:///./src/js/page/uc_editInfo/editFace.js","webpack:///./src/js/page/uc_editInfo/selDate.js","webpack:///./src/js/module/date.js","webpack:///./src/js/page/uc_editInfo/nameEvent.js","webpack:///./src/js/page/uc_editInfo/verifyName.js","webpack:///./src/js/utils/check.js","webpack:///./src/js/page/uc_editInfo/editCls.js","webpack:///./src/js/utils/limitLen.js","webpack:///./src/js/page/uc_editInfo/subData.js"],"names":["require","init","subInit","$publicMask","$publicTips","timer","events","off","on","hide","msg","options","defaults","duration","callback","$","extend","clearTimeout","length","show","text","append","css","offsetHeight","width","setTimeout","module","exports","inputTip","tel","ept","err","errBack","msgCode","tipGet","tipEpt","tipErr","tipErrEdit","tipWrong","checkCodeWrong","send","tipSend","tipDisabled","tipLimitEdit","btnAfterSend","btnDefault","pwd","commonTip","pwdV","nickName","eptName","existName","sucSub","errLine","wrongName","birthTip","tip","refCode","imgCode","login","errCode","errNum","errPwd","agreement","createCircle","typeEmpty","nameEmpty","upperLimit","circle","unJoin","cannotJoin","review","joinSuccess","joinSuccessPublic","cannotJoinCircle","exit","dissolved","qrCodeTip","loseEffTip","loseEffBtn","failGetTip","failGetBtn","masterApply","nameLength","nameType","isIdCard","type","summary","upload","noUpload","uploadError","uploadFaild","uploadError_Master","Q_EXCEED_NUM_LIMIT","Q_EXCEED_SIZE_LIMIT","Q_TYPE_DENIED","F_EXCEED_SIZE","excess","WebUploader","$webUpLoader","$noticeBox","$wrap","$cropImg","find","$preview","$avatarSave","$progress","$error","$loadNotice","$retry","avatarData","files","defaultImage","attr","isUpload","link","isIE8","window","FormData","key","startCrop","cropper","aspectRatio","preview","selector","background","guides","create","undefined","removeFile","id","file","makeThumb","error","ret","removeClass","addClass","addButton","innerHTML","md5File","progress","percentage","then","response","success","code","data","call","submit","hasClass","object","retry","uploadOptions","cropperOptions","fn","defaultUpload","pick","multiple","thumb","compress","accept","title","extensions","mimeTypes","method","swf","$_CONFIG","imgpath","disableGlobalDnd","duplicate","prepareNextFile","chunked","fileVal","server","fileNumLimit","fileSizeLimit","fileSingleSizeLimit","defaultCropper","copper","webUpLoader","destroy","getData","a","jQuery","b","c","d","push","slice","apply","e","arguments","concat","f","match","o","protocol","hostname","port","g","Date","getTime","indexOf","h","left","top","height","i","j","R","degree","Math","PI","S","T","k","getContext","naturalWidth","naturalHeight","rotate","save","translate","drawImage","restore","l","$element","DEFAULTS","isPlainObject","ready","built","rotated","cropped","disabled","canvas","cropBox","load","m","n","document","location","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","isFunction","O","sqrt","P","min","Q","max","abs","sin","cos","U","parseFloat","V","is","prop","toDataURL","Event","one","build","trigger","isDefaultPrevented","checkImageOrigin","$clone","proxy","image","url","remove","src","crossOrigin","insertAfter","unbuild","$cropper","TEMPLATE","$container","parent","$canvas","$dragBox","$cropBox","$viewBox","addListeners","initPreview","autoCrop","modal","highlight","movable","resizable","setDragMode","dragCrop","render","container","removeListeners","resetPreview","initContainer","initCanvas","initCropBox","renderCanvas","renderCropBox","minContainerWidth","minContainerHeight","oldLeft","oldTop","limitCanvas","initialImage","initialCanvas","strict","minCanvasWidth","minCanvasHeight","minWidth","minHeight","maxWidth","maxHeight","minLeft","minTop","maxLeft","maxTop","renderImage","limitCropBox","output","marginLeft","marginTop","transform","autoCropArea","initialCropBox","minCropBoxWidth","minCropBoxHeight","crop","html","each","original","removeData","dragstart","dragmove","dragend","zoomin","zoomout","dblclick","zoomable","mouseWheelZoom","wheel","_dragmove","_dragend","responsive","_resize","resize","getCanvasData","getCropBoxData","setCanvasData","setCropBoxData","originalEvent","preventDefault","deltaY","wheelDelta","detail","zoom","touches","touchDragZoom","startX2","pageX","startY2","pageY","target","test","dragType","cropping","startX","startY","endX2","endY2","endX","endY","change","toggleClass","reset","clear","replace","enable","disable","move","rotatable","getContainerData","getImageData","getCroppedCanvas","fillColor","fillStyle","fillRect","setAspectRatio","X","Y","offset","prototype","setDefaults","split","other","Constructor","noConflict","fetch","hint","$tabs","$tabBoxs","$faceBox","firstTab","cropperInit","post","get","facePicUrl","done","result","fail","Tab","index","eq","click","href","tips","editBox","birTip","hideCls","dateClick","dateDefault","eTime","option","endTime","initDate","ShowDate","startTime","dateReg","yearErrTip","monErrTip","ymErrTip","addZero","num","handleVal","$node","compareDate","date","nowDate","switchNum","numAry","upperNum","value","_self","tplHtml","tpl","dateContainer","dateBox","yearBox","mnBox","ymBox","dataTable","tbody","td","prevM","nextM","monBtn","prevY","nextY","yearBtn","changeDefault","dateText","topBtn","leftBtn","event","Target","newDd","newYear","parseInt","newMn","dateFlag","trIndex","parents","isNaN","newDate","dateComFlag","val","changeMn","changeYr","str","NewMn","alert","showNow","deVal","regExp","dayArr","changeDefault2","btnTxt","oPare","isChild","yr","mn","now","year","getFullYear","month","getMonth","dd","getDate","showAllDay","getDayLen","setDate","Yr","Mn","Dd","firstDay","getDay","monthPre","dayLen","dayLenPre","len","miniDate","verifyName","limitLen","editCls","remCls","addCls","nickname","nameErr","errBorder","comErr","borErrCls","nameFoc","nameKeyup","nameVal","initObj","blur","checkNameRule","focus","keyup","check","nickTips","checkRule","lenFlag","checkNickName","obj","checkVal","pattern","isMobileNum","mobile","isEmail","email","isCertificate","certificate","isCID","cardNo","isCWord","word","start","end","reg","RegExp","isArray","arr","Array","passwordReg","checkSpace","checkRefCode","name","nickNameReg","isMsgCode","isImgCode","cls","substr","nameTips","sexBox","birthday","subDate","comTip","nameBorErr","faceImg","header","headImg","headName","birthPre","errBorCls","sub","sexVal","birthVal","faceImgUrl","nameFlag","errFlag","subData","birFlag","message","subEvent"],"mappings":"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;AACA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAgC;AAChC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,OAAO;AACjC;AACA;;AAEA;AACA,2BAA0B,aAAa;AACvC;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA,6BAA4B;;AAE5B,wDAAuD;AACvD,sDAAqD;AACrD;;AAEA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,MAAM;AAC9B,yBAAwB,kBAAkB;AAC1C,yBAAwB,SAAS;AACjC,yBAAwB,OAAO;AAC/B,yBAAwB,MAAM;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA,6CAA4C;AAC5C;AACA;AACA,iCAAgC;AAChC,iCAAgC;AAChC;AACA;AACA,4DAA2D;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA,iEAAgE;;AAEhE;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA,qBAAoB;AACpB;AACA;AACA,2BAA0B;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAuD;AACvD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA2B,OAAO;AAClC;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B,wBAAuB,OAAO;AAC9B,wBAAuB,MAAM;AAC7B;AACA,sDAAqD;AACrD,uDAAsD;AACtD,0DAAyD;AACzD,8DAA6D;AAC7D,qEAAoE;AACpE,2FAA0F;AAC1F;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD,iBAAgB;AAChB;AACA;AACA;AACA;AACA,yBAAwB,OAAO;AAC/B,yBAAwB,SAAS;AACjC,yBAAwB,OAAO;AAC/B,yBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,oCAAmC;;AAEnC;AACA;AACA;AACA;;AAEA;AACA,kBAAiB;;AAEjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,yBAAwB,OAAO;AAC/B,yBAAwB,SAAS;AACjC,yBAAwB,OAAO;AAC/B,yBAAwB,KAAK;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;;AAEjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,yBAAwB,OAAO;AAC/B,yBAAwB,SAAS;AACjC,yBAAwB,OAAO;AAC/B,yBAAwB,KAAK;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB,kBAAiB;;AAEjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,yBAAwB,OAAO;AAC/B,yBAAwB,EAAE;AAC1B,yBAAwB,QAAQ;AAChC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAwB,OAAO;AAC/B,yBAAwB,OAAO;AAC/B;AACA;AACA;AACA;;AAEA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA,8CAA6C;AAC7C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;;AAEA,kBAAiB,OAAO;AACxB;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;;;AAGA;AACA;AACA,oBAAmB,OAAO;AAC1B,oBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8CAA6C;;AAE7C;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,UAAS;;AAET;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB;AACvB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA,2BAA0B,eAAe;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,wBAAuB,SAAS;AAChC;AACA;;AAEA;;AAEA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kCAAiC;;AAEjC;AACA,8BAA6B;AAC7B,kBAAiB;AACjB;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA,qBAAoB,OAAO;AAC3B,qBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ,4CAA2C;AAC3C;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA,wBAAuB,sDAAsD;AAC7E;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB;;AAEjB,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8CAA6C,KAAK;AAClD;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,uBAAsB,SAAS;AAC/B;AACA;AACA;;AAEA;AACA,uBAAsB,SAAS;AAC/B;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA,kBAAiB;;AAEjB;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8CAA6C;AAC7C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,UAAS;;AAET;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAsB,SAAS;AAC/B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAAyC;AACzC;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,UAAS;;AAET;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8CAA6C;;AAE7C;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA,kBAAiB;;AAEjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,2BAA0B,kBAAkB;AAC5C;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC,2BAA0B,OAAO;AACjC,+BAA8B,OAAO;AACrC,8BAA6B,QAAQ;AACrC;AACA;;AAEA;AACA,2BAA0B,MAAM;AAChC;AACA;AACA;AACA;AACA,2BAA0B,OAAO;AACjC,gCAA+B,OAAO;AACtC,+BAA8B,OAAO;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;;AAEjB;AACA;;AAEA;;AAEA,0CAAyC;AACzC;AACA;AACA;AACA;AACA,sBAAqB;;AAErB;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA,kBAAiB;;AAEjB;AACA,cAAa;;AAEb;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uCAAsC;AACtC;;AAEA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,UAAS;;AAET;;AAEA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA,2BAA0B,OAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA,qBAAoB;AACpB;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAqB;AACrB;;;AAGA;;AAEA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAkC;AAClC;;AAEA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,SAAS;AAC5B;AACA;;AAEA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;;;AAGA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa;AACb;;AAEA;;AAEA;AACA;AACA;AACA;AACA,wBAAuB,mBAAmB;AAC1C,wBAAuB,OAAO;AAC9B;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa;;AAEb;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,UAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,yBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,yBAAwB,KAAK;AAC7B;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,yBAAwB,OAAO;AAC/B,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B,yBAAwB,KAAK;AAC7B;AACA;AACA;AACA;;AAEA;;AAEA,6BAA4B,SAAS;AACrC;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,wBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,SAAS;AAChC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,wBAAuB,KAAK;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,UAAS;;AAET;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2DAA0D,SAAS;AACnE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,kBAAiB;AACjB;AACA,cAAa;;;AAGb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;;AAGb;AACA;AACA,wBAAuB,KAAK;AAC5B;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,KAAK;AAC5B;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,wBAAuB,KAAK;AAC5B;AACA;AACA;;AAEA;AACA,2BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;;AAEjB;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,wBAAuB,KAAK;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD;AAClD;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAuB,SAAS;AAChC;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,UAAS;;AAET,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,sDAAqD,SAAS;AAC9D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,mDAAkD,+BAA+B;AACjF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAwB;AACxB,wBAAuB;AACvB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;;AAEA,cAAa;;AAEb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA,UAAS;;AAET;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA,2BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,QAAQ;AAClC;AACA;AACA;AACA;AACA;;;AAGA;AACA,2BAA0B,OAAO,aAAa;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,sBAAqB;;AAErB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,sBAAqB;;AAErB;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB;;AAEzB;AACA,sBAAqB;AACrB;AACA,sBAAqB;AACrB;AACA;AACA,kBAAiB;AACjB;AACA;AACA,sBAAqB;AACrB;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;;AAErB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;;;AAGb;AACA;AACA,wBAAuB,KAAK;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAqB;;AAErB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,sBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA,sBAAqB;;AAErB;AACA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;;AAGb;AACA;AACA,wBAAuB,OAAO;AAC9B,wBAAuB,OAAO;AAC9B,wBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,OAAO;AAC9B,wBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,KAAK;AAC5B,wBAAuB,OAAO;AAC9B;AACA;AACA;;;AAGA;AACA;AACA,wBAAuB,KAAK;AAC5B,wBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,KAAK;AAC5B,wBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,KAAK;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC;AACtC,0CAAyC;AACzC;;AAEA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;;AAEA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB;AACzB;AACA;AACA,0BAAyB;AACzB,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;;AAEA,UAAS;AACT,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B;AAC3B;;AAEA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA,UAAS;;AAET;AACA,uBAAsB,IAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;AACb,UAAS;;;AAGT;AACA,uBAAsB,IAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;AACb,UAAS;;AAET;AACA,uBAAsB,IAAI;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,cAAa;;AAEb,UAAS;;AAET;AACA,uBAAsB,QAAQ;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,SAAS;AAChC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;AACb,UAAS;;AAET;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,0BAAyB;AACzB;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA,UAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB,kBAAiB;;AAEjB;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,iDAAgD,SAAS;AACzD;AACA;;AAEA;;AAEA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA,qCAAoC,SAAS;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAAyB;AACzB,sBAAqB;AACrB;;AAEA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2DAA0D,SAAS;AACnE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iDAAgD,SAAS;AACzD;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA,2DAA0D,SAAS;AACnE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAiB;;AAEjB;;AAEA,cAAa;;;AAGb;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA,6BAA4B,oBAAoB;AAChD;AACA;;AAEA,+DAA8D;;AAE9D;AACA,cAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;;AAEA,6BAA4B,oBAAoB;AAChD;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,qDAAoD,aAAa,KAAK;AACtE,cAAa;;AAEb;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,oCAAmC;AACnC,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,6CAA4C,oBAAoB;AAChE;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,yBAAwB,YAAY;AACpC;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6BAA4B,mBAAmB;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,YAAY;AACtC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD;AACtD,mBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oCAAmC,QAAQ;AAC3C;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,QAAQ;AAC3C;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,SAAS;AAC9C;AACA,0CAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAmC,SAAS;AAC5C,wCAAuC,iBAAiB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD;AACA,+CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,sDAAqD,iBAAiB;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAkC,SAAS;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA6C;AAC7C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iDAAgD;AAChD;AACA;AACA;;AAEA,uDAAsD;AACtD;;AAEA,gEAA+D;AAC/D,sDAAqD;AACrD;;AAEA;AACA,6CAA4C;AAC5C;AACA;;AAEA;AACA,gEAA+D;AAC/D,2DAA0D;AAC1D,2DAA0D;AAC1D,sDAAqD;;AAErD,6CAA4C;AAC5C;;AAEA,oDAAmD;AACnD;AACA;AACA;;AAEA,sCAAqC;AACrC;;AAEA;AACA;AACA,8BAA6B,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uDAAsD;AACtD;AACA;AACA;;AAEA,2DAA0D;AAC1D;;AAEA,sEAAqE;AACrE,2DAA0D;AAC1D;;AAEA;AACA,mDAAkD;AAClD;AACA;;AAEA;AACA,sEAAqE;AACrE,iEAAgE;AAChE,iEAAgE;AAChE,0DAAyD;;AAEzD,mDAAkD;AAClD;;AAEA,yDAAwD;AACxD;AACA;AACA;;AAEA,mCAAkC;AAClC;;AAEA;AACA;AACA,8BAA6B,OAAO;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uCAAsC;AACtC,mCAAkC;AAClC,qCAAoC;AACpC,qCAAoC;AACpC,qCAAoC;AACpC,qCAAoC;AACpC,kCAAiC;AACjC,kCAAiC;AACjC,kCAAiC;AACjC,kCAAiC;AACjC,kCAAiC;AACjC,kCAAiC;AACjC,kCAAiC;AACjC,kCAAiC;AACjC;;AAEA;AACA;AACA,uCAAsC;AACtC,mCAAkC;AAClC,kCAAiC;AACjC;AACA;AACA,kCAAiC;AACjC,kCAAiC;AACjC,qCAAoC;AACpC,kCAAiC;AACjC,kCAAiC;AACjC,qCAAoC;AACpC,kCAAiC;AACjC,kCAAiC;AACjC,qCAAoC;AACpC,kCAAiC;AACjC;;AAEA;AACA;AACA,uCAAsC;AACtC,oCAAmC;AACnC;AACA,kCAAiC,MAAM;AACvC;AACA;AACA;AACA,kCAAiC,MAAM;AACvC;AACA;AACA;;AAEA;AACA;AACA,uCAAsC;AACtC,uCAAsC;;AAEtC,kCAAiC;AACjC,kCAAiC,MAAM;AACvC;AACA;AACA,kCAAiC,OAAO;AACxC;AACA;;AAEA,qCAAoC;AACpC,kCAAiC,MAAM;AACvC;AACA;AACA,kCAAiC,QAAQ;AACzC;AACA;;AAEA,kCAAiC;AACjC,kCAAiC,MAAM;AACvC;AACA;AACA,kCAAiC,OAAO;AACxC;AACA;;AAEA,qCAAoC;AACpC,kCAAiC,MAAM;AACvC;AACA;AACA,kCAAiC,QAAQ;AACzC;AACA;AACA;;AAEA;AACA;AACA,uCAAsC;AACtC,mCAAkC;AAClC,kCAAiC;AACjC,kCAAiC;AACjC,kCAAiC;AACjC,kCAAiC;AACjC,qCAAoC;AACpC,kCAAiC;AACjC,qCAAoC;AACpC,kCAAiC;AACjC,qCAAoC;AACpC,kCAAiC;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,MAAM;AACvC;AACA;AACA,2CAA0C;AAC1C;AACA;AACA,4CAA2C;AAC3C,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC,2BAA0B,+BAA+B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,4BAA4B;AAC1D;AACA;AACA;AACA,iDAAgD,iBAAiB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAgC,SAAS,MAAM;AAC/C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,uCAAsC;AACtC;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAkC,UAAU;AAC5C,4CAA2C;AAC3C,mDAAkD;AAClD;;AAEA,iDAAgD;AAChD;AACA;;AAEA,oDAAmD;AACnD;AACA;;AAEA;AACA;AACA;;;AAGA;AACA,qFAAoF;AACpF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAsC;;AAEtC,wDAAuD;;AAEvD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAoC;;AAEpC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB,sBAAqB;AACrB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA;;AAEA;AACA,mCAAkC;AAClC;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,mCAAkC;AAClC;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;;AAEA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;;AAEA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,cAAa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAAyB;AACzB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,sBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,sBAAqB;AACrB;AACA;AACA,kBAAiB;AACjB;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,UAAS;;AAET;AACA;AACA,UAAS;;AAET;AACA;AACA,UAAS;;AAET;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;;AAElB,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,mBAAkB;;AAElB,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;AACA,4BAA2B,QAAQ;AACnC;AACA;AACA;;AAEA;AACA;AACA,mDAAkD,IAAI;AACtD;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAwB,QAAQ;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;;AAEA;AACA;AACA;AACA,4BAA2B,QAAQ;AACnC;AACA;AACA;;AAEA;AACA;AACA,mDAAkD,IAAI;AACtD;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,UAAS;;AAET;;AAEA;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,wBAAuB,cAAc;AACrC;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,UAAS;;;;AAIT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA,qBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA,qBAAoB,SAAS;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yBAAwB,aAAa;AACrC;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,QAAQ;AAC3B;AACA,qBAAoB,aAAa;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,YAAY;AACnC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,MAAM;AACzB,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA2B,QAAQ;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA,mDAAkD,IAAI;AACtD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B,oBAAmB,QAAQ;AAC3B;AACA,qBAAoB,aAAa;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B,oBAAmB,QAAQ;AAC3B;AACA,qBAAoB,aAAa;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B;AACA,qBAAoB,qBAAqB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,yBAAwB,aAAa;AACrC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,QAAQ;AAC3B;AACA,qBAAoB,aAAa;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,YAAY;AACnC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,qBAAoB,qBAAqB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAoB,YAAY;AAChC,qBAAoB,YAAY;AAChC;AACA,qBAAoB,YAAY;AAChC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,YAAY;AAC/B,oBAAmB,QAAQ;AAC3B;AACA,qBAAoB,aAAa;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB;AACzB,6BAA4B;AAC5B;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB;AACjB;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uCAAsC;AACtC;;AAEA;AACA;AACA,8BAA6B,SAAS;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,cAAa;;AAEb;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAoB;AACpB,iBAAgB;;AAEhB;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAiB;AACjB;AACA;AACA,sBAAqB;;AAErB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA,cAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,sBAAqB;AACrB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA4B;;AAE5B;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA,kBAAiB;;AAEjB;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,kBAAiB;AACjB;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","file":"uc_editInfo.js","sourcesContent":["//修改头像\r\nrequire('./editFace').init();\r\n\r\n//出生日期\r\nrequire('./selDate').init();\r\n//昵称事件\r\nrequire('./nameEvent').init();\r\n//提交保存\r\nrequire('./subData').subInit();\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uc_editInfo/index.js","/*\r\n * 弹层提示弹窗\r\n * zhaodonghong\r\n */\r\n\r\n\r\n\r\nvar $publicMask;\r\nvar $publicTips;\r\nvar timer;\r\n\r\n\r\nvar events = function() {\r\n\r\n    $publicMask.off().on('click', function() {\r\n        $publicMask.hide();\r\n        $publicTips.hide();\r\n    });\r\n\r\n    $publicTips.off().on('click', function() {\r\n        $publicMask.hide();\r\n        $publicTips.hide();\r\n    });\r\n}\r\n\r\n\r\n/**\r\n * msg string 提示信息\r\n * options object \r\n * options.duration settimout消失时间\r\n * options.callback 提示消失的回调\r\n*/\r\nvar init = function(msg, options) {\r\n    var defaults = {\r\n        duration: 2000,\r\n        callback: function() {}\r\n    };\r\n\r\n    $.extend(defaults, options || {});\r\n\r\n    clearTimeout(timer);\r\n    $publicMask = $('[data-action=\"publicMask\"]');\r\n    $publicTips = $('[data-action=\"publicTips\"]');\r\n\r\n    if ($publicMask.length > 0) {\r\n\r\n        $publicMask.show();\r\n        $publicTips.show().text(msg);\r\n\r\n    } else {\r\n\r\n        $('body').append('<div data-action=\"publicMask\" class=\"ordi-toast\"></div><div class=\"ordi-toast-txt\" data-action=\"publicTips\">' + msg + '</div>');\r\n        $publicMask = $('[data-action=\"publicMask\"]');\r\n        $publicTips = $('[data-action=\"publicTips\"]');\r\n        events();\r\n    }\r\n\r\n    $publicTips.css('margin', -$publicTips[0].offsetHeight / 2 + 'px 0 0 ' + -$publicTips.width() / 2 + 'px');\r\n\r\n    timer = setTimeout(function() {\r\n\r\n        $publicMask.hide();\r\n        $publicTips.hide();\r\n\r\n        defaults.callback();\r\n\r\n    }, defaults.duration);\r\n};\r\n\r\n\r\n\r\nmodule.exports = {\r\n    init: init,\r\n    events: events\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/hint.js","/**\n * Created by dongyukuan on 2016/7/4.\n */\nvar inputTip = {\n    tel: {\n        ept: '请填写11位手机号',\n        err: '手机号格式错误',\n        errBack: '该手机号已被注册'\n    },\n    msgCode: {\n        tipGet: '请获取短信验证码',\n        tipEpt: '请输入短信验证码',\n        tipErr: '验证码是6位数字,请重新输入',\n        tipErrEdit: '验证码错误',\n        tipWrong: '验证码有误,请重新输入',\n        checkCodeWrong: '验证码输入错误,请重新输入',\n        send: '验证码已发送，请注意查收',\n        tipSend: '验证码已发送您的手机，10分钟内输入有效',\n        tipDisabled: \"验证码再次获取需间隔60s\",\n        tipLimitEdit: '获取验证码超限，请稍后再试',\n        btnAfterSend: \"秒后重新获取\",\n        btnDefault: \"获取验证码\"\n    },\n    pwd: {\n        commonTip: '请输入6-20位英文字母,数字或符号'\n    },\n    pwdV: {\n        ept: '请再次输入密码',\n        err: '两次输入的密码不一致'\n    },\n    nickName: {\n        eptName: '请输入昵称！',\n        commonTip: '昵称只能输入2-20位字符、字母、数字、-、_',\n        existName: '此昵称太受欢迎了，已经有人抢了~',\n        sucSub: '资料修改成功！',\n        errLine: \"网络超时!\",\n        wrongName: '此昵称含有敏感词,请重新输入'\n    },\n    birthTip: {\n        tip: '生日不能重复设置'\n    },\n    refCode: {\n        err: '推荐码错误'\n    },\n    imgCode: {\n        ept: '请输入验证码',\n        err: '验证码输入错误，请重新输入'\n    },\n    login: {\n        errCode: '请输入验证码',\n        errNum: '请输入账号',\n        errPwd: '请输入密码',\n        agreement: '请同意协议并勾选'\n    },\n    createCircle: {\n        typeEmpty: '请选择圈子分类',\n        nameEmpty: '圈子名称不能为空',\n        upperLimit: '抱歉，您创建的圈子已经达到上限，暂不能创建！'\n    },\n    circle: {\n    \tlogin: '登录成功！',\n        unJoin: '需要先加入该圈子才能发布话题',\n        cannotJoin: '抱歉！该圈子不允许发布话题!',\n        review: '加入圈子审核中，请耐心等待!',\n        joinSuccess: '恭喜您已经加入圈子！',\n        joinSuccessPublic: '恭喜您已经加入圈子，快来发布话题吧！',\n        cannotJoinCircle: '抱歉！该圈子不允许任何人加入！',\n        exit: '您已经退出该圈子！',\n        dissolved: '抱歉！该圈子已被解散'\n    },\n    qrCodeTip: {\n        loseEffTip: '二维码已失效',\n        loseEffBtn: '点击刷新',\n        failGetTip: '二维码生成失败',\n        failGetBtn: '重新生成'\n    },\n    masterApply: {\n        nameLength: '姓名要2-20个字符',\n        nameType: '姓名仅限汉字和字母',\n        isIdCard: '请填写18位有效身份证号',\n        type: '请选择达人类别',\n        summary: '请输入自我介绍，2-100个字符'\n    },\n    upload: {\n        noUpload: '请上传图片',\n        uploadError: '请上传小于4M的图片，支持格式jpg、jpeg、png、gif！',\n        uploadFaild: '上传失败,请重新上传',\n        uploadError_Master: '请上传小于4M的图片，支持格式jpg、jpeg、png、gif!',\n        Q_EXCEED_NUM_LIMIT: '请上传小于4M的图片，支持格式jpg、jpeg、png、gif！',\n        Q_EXCEED_SIZE_LIMIT: '总文件大小超出限制',\n        Q_TYPE_DENIED: '文件类型错误',\n        F_EXCEED_SIZE: '请上传jpg、png格式且小于4M的图片！',\n        excess: '文件个数超出限制'\n    },\n    errLine: {\n        tip: '网络错误,请稍后再试！'\n    }\n};\nmodule.exports = inputTip;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/i18n.js","var WebUploader = require('../plugin/webuploader/webuploader');\r\nrequire('../plugin/jquery.cropper');\r\n\r\nvar $webUpLoader;\r\nvar $noticeBox = $('[data-node=\"noticeBox\"]');\r\n// var $noticeInfo = $noticeBox.find('[data-node=\"noticeInfo\"]');\r\nvar $wrap = $('[data-node=\"cropWrap\"]');\r\nvar $cropImg = $wrap.find('img');\r\nvar $preview = $('[data-node=\"avatrSelector\"]');\r\nvar $avatarSave = $('[data-action=\"avatarSave\"]')\r\nvar $progress = $noticeBox.find('[data-node=\"uploadProgress\"]');\r\nvar $error = $('[data-node=\"error\"]');\r\nvar $loadNotice = $noticeBox.find('[data-node=\"loadNotice\"]');\r\nvar $retry = $noticeBox.find('[data-action=\"retry\"]');\r\n\r\nvar avatarData = {};\r\nvar files;\r\nvar defaultImage = $cropImg.attr('data-default');\r\nvar isUpload = false;\r\nvar link = '';\r\nvar isIE8 = !window.FormData;\r\nvar key = false;\r\n\r\nvar startCrop = function() {\r\n    isUpload = true;\r\n    $cropImg.cropper({\r\n        aspectRatio: 1,\r\n        preview: $preview.selector,\r\n        background: false,\r\n        guides: false\r\n    });\r\n};\r\n\r\nvar preview = function(upload, cropper, callback) {\r\n    $webUpLoader = WebUploader.create(upload);\r\n    $webUpLoader.on('beforeFileQueued', function() {\r\n        isUpload = false;\r\n        $cropImg.cropper('destroy');\r\n        $error.hide();\r\n        files !== undefined && $webUpLoader.removeFile(files.id);\r\n    });\r\n\r\n    $webUpLoader.on('fileQueued', function(file) {\r\n            files = file;\r\n            if (isIE8 && !key) {\r\n                $webUpLoader.upload(files);\r\n                key = true;\r\n            } else {\r\n                $webUpLoader.makeThumb(file, function(error, ret) {\r\n                    if (error) {\r\n                        $webUpLoader.removeFile(files.id);\r\n                        $noticeBox.removeClass('load-ing').show();\r\n                    } else {\r\n                        $cropImg.attr('src', ret);\r\n                        startCrop(cropper);\r\n                        $avatarSave.addClass('active');\r\n                        if( $cropImg.attr('data-edit') ){\r\n                            $('[data-defaultAddFile=picker]').hide();\r\n                            $webUpLoader.addButton({\r\n                                id: '[data-action=\"upload-edit\"]',\r\n                                innerHTML: '修改'\r\n                            });\r\n                        }\r\n\r\n                    }\r\n                });\r\n            }\r\n            $webUpLoader.md5File(file)\r\n                // 及时显示进度\r\n                .progress(function(percentage) {\r\n                    $loadNotice.text('图片加载中');\r\n                    $noticeBox.addClass('load-ing').show();\r\n                    $progress.css('width', percentage * 100 + '%');\r\n                })\r\n                // 完成\r\n                .then(function( /*val*/ ) {\r\n                    $noticeBox.hide();\r\n                    $progress.css('width', 0);\r\n                });\r\n        })\r\n        //报错\r\n    $webUpLoader.on('error', function( /*type*/ ) {\r\n        /*var errNotice = {\r\n            Q_EXCEED_NUM_LIMIT: '文件个数超出限制',\r\n            Q_EXCEED_SIZE_LIMIT: '总文件大小超出限制',\r\n            Q_TYPE_DENIED: '文件类型错误',\r\n            F_EXCEED_SIZE: '请上传jpg、png格式且小于4M的图片！'\r\n        }*/\r\n        $cropImg.attr('src', defaultImage);\r\n        $preview.find('img').attr('src', defaultImage);\r\n        $error.show().find('span').text('请上传小于4M的图片，支持格式jpg、jpeg、png、gif！');\r\n        $avatarSave.removeClass('active');\r\n    });\r\n\r\n    //上传成功\r\n    $webUpLoader.on('uploadSuccess', function(file, response) {\r\n\r\n        if (response.success && response.code === 200) {\r\n            if (key) {\r\n                $cropImg.attr('src', response.data[0]);\r\n                startCrop();\r\n                $noticeBox.hide();\r\n                key = false;\r\n                $avatarSave.addClass('active');\r\n            } else {\r\n                $cropImg.attr('src', response.data[0]);\r\n                $noticeBox.hide();\r\n                $cropImg.cropper('destroy');\r\n                $preview.find('img').attr('src', response.data[0]);\r\n                $webUpLoader.removeFile(files);\r\n                link = response.data[0];\r\n                callback.call(null, response.data[0]);\r\n                $avatarSave.removeClass('active');\r\n                files = undefined;\r\n            }\r\n        } else {\r\n            $('.cropper-crop-box').hide();\r\n            $noticeBox.removeClass('load-ing').show();\r\n            isUpload = true;\r\n        }\r\n    });\r\n    //上传失败\r\n    $webUpLoader.on('uploadError', function( /*file, reason*/ ) {\r\n        $('.cropper-crop-box').hide();\r\n        $noticeBox.removeClass('load-ing').show();\r\n        isUpload = true;\r\n    });\r\n\r\n    //上传时\r\n    $webUpLoader.on('uploadProgress', function(file, percentage) {\r\n        $('.cropper-crop-box').hide();\r\n        $loadNotice.text('图片上传中');\r\n        $noticeBox.addClass('load-ing').show();\r\n        $progress.css('width', percentage * 100 + '%');\r\n        isUpload = false;\r\n    });\r\n\r\n}\r\n\r\nvar submit = function() {\r\n    $avatarSave.on('click', function() {\r\n        if (isUpload && $(this).hasClass('active')) {\r\n            isUpload = false;\r\n            avatarData = $cropImg.cropper('getData');\r\n            avatarData.type = 'crop';\r\n            $webUpLoader.on('uploadBeforeSend', function(object, data) {\r\n                $.extend(data, avatarData);\r\n            });\r\n            $webUpLoader.upload(files);\r\n        }        \r\n        $retry.addClass('active');\r\n    });\r\n    $retry.on('click', function() {\r\n        if (isUpload && $(this).hasClass('active')) {\r\n            isUpload = false;\r\n            avatarData = $cropImg.cropper('getData');\r\n            avatarData.type = 'crop';\r\n            $webUpLoader.on('uploadBeforeSend', function(object, data) {\r\n                $.extend(data, avatarData);\r\n            });\r\n            $webUpLoader.retry(files);\r\n        }\r\n    });\r\n}\r\n\r\nvar init = function(callback, uploadOptions, cropperOptions) {\r\n    $noticeBox = $('[data-node=\"noticeBox\"]');\r\n    // $noticeInfo = $noticeBox.find('[data-node=\"noticeInfo\"]');\r\n    $wrap = $('[data-node=\"cropWrap\"]');\r\n    $cropImg = $wrap.find('img');\r\n    $preview = $('[data-node=\"avatrSelector\"]');\r\n    $avatarSave = $('[data-action=\"avatarSave\"]')\r\n    $progress = $noticeBox.find('[data-node=\"uploadProgress\"]');\r\n    $error = $('[data-node=\"error\"]');\r\n    $loadNotice = $noticeBox.find('[data-node=\"loadNotice\"]');\r\n    $retry = $noticeBox.find('[data-action=\"retry\"]');\r\n    defaultImage = $cropImg.attr('data-default');\r\n    var fn = callback || function() {};\r\n    var defaultUpload = {\r\n        pick: {\r\n            id: '[data-defaultAddFile=picker]',\r\n            innerHTML: '<span>+</span>上传头像',\r\n            multiple: false\r\n        },\r\n        thumb: false,\r\n        compress: false,\r\n        accept: {\r\n            title: 'Images',\r\n            extensions: 'jpg,jpeg,png',\r\n            mimeTypes: 'image/jpg,image/jpeg,image/png,image/gif'\r\n        },\r\n        method: 'post',\r\n        // swf文件路径\r\n        swf: $_CONFIG.imgpath + '/images/swf/Uploader.swf',\r\n        disableGlobalDnd: true,\r\n        duplicate: true,\r\n        prepareNextFile: true,\r\n        chunked: true,\r\n        fileVal: 'avatar_file',\r\n        server: '/ajax/crop/crop_img',\r\n        fileNumLimit: 1,\r\n        fileSizeLimit: 4 * 1024 * 1024,\r\n        fileSingleSizeLimit: 4 * 1024 * 1024\r\n    };\r\n    var defaultCropper = {\r\n        aspectRatio: 1,\r\n        preview: $preview.selector,\r\n        background: false,\r\n        guides: false\r\n    };\r\n    var upload = $.extend(true, defaultUpload, uploadOptions);\r\n    var copper = $.extend(true, defaultCropper, cropperOptions);\r\n    preview(upload, copper, fn);\r\n\r\n    submit();\r\n\r\n    return {\r\n        webUpLoader: $webUpLoader, //webuploader实例对象\r\n\r\n        cropper: $cropImg //cropper实例对象\r\n    }\r\n}\r\n\r\nvar destroy = function(callback) {\r\n    callback = callback || function() {};\r\n    callback.call(null, {\r\n        webUpLoader: $webUpLoader, //webuploader实例对象\r\n        cropper: $cropImg //cropper实例对象\r\n    });\r\n    files = undefined;\r\n    $webUpLoader.destroy();\r\n    $cropImg.cropper('destroy');\r\n}\r\n\r\nvar getData = function() {\r\n    return link;\r\n}\r\n\r\nmodule.exports = {\r\n    init: init,\r\n    getData: getData,\r\n    destroy: destroy\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/cropper.js","/*! WebUploader 0.1.5 */\n\n\n/**\n * @fileOverview 让内部各个部件的代码可以用[amd](https://github.com/amdjs/amdjs-api/wiki/AMD)模块定义方式组织起来。\n *\n * AMD API 内部的简单不完全实现，请忽略。只有当WebUploader被合并成一个文件的时候才会引入。\n */\n(function( root, factory ) {\n    var modules = {},\n\n        // 内部require, 简单不完全实现。\n        // https://github.com/amdjs/amdjs-api/wiki/require\n        _require = function( deps, callback ) {\n            var args, len, i;\n\n            // 如果deps不是数组，则直接返回指定module\n            if ( typeof deps === 'string' ) {\n                return getModule( deps );\n            } else {\n                args = [];\n                for( len = deps.length, i = 0; i < len; i++ ) {\n                    args.push( getModule( deps[ i ] ) );\n                }\n\n                return callback.apply( null, args );\n            }\n        },\n\n        // 内部define，暂时不支持不指定id.\n        _define = function( id, deps, factory ) {\n            if ( arguments.length === 2 ) {\n                factory = deps;\n                deps = null;\n            }\n\n            _require( deps || [], function() {\n                setModule( id, factory, arguments );\n            });\n        },\n\n        // 设置module, 兼容CommonJs写法。\n        setModule = function( id, factory, args ) {\n            var module = {\n                    exports: factory\n                },\n                returned;\n\n            if ( typeof factory === 'function' ) {\n                args.length || (args = [ _require, module.exports, module ,window.jQuery]);\n                returned = factory.apply( null, args );\n                returned !== undefined && (module.exports = returned);\n            }\n\n            modules[ id ] = module.exports;\n        },\n\n        // 根据id获取module\n        getModule = function( id ) {\n            var module = modules[ id ] || root[ id ];\n\n            if ( !module ) {\n                throw new Error( '`' + id + '` is undefined' );\n            }\n\n            return module;\n        },\n\n        // 将所有modules，将路径ids装换成对象。\n        exportsTo = function( obj ) {\n            var key, host, parts, part, last, ucFirst;\n\n            // make the first character upper case.\n            ucFirst = function( str ) {\n                return str && (str.charAt( 0 ).toUpperCase() + str.substr( 1 ));\n            };\n\n            for ( key in modules ) {\n                host = obj;\n\n                if ( !modules.hasOwnProperty( key ) ) {\n                    continue;\n                }\n\n                parts = key.split('/');\n                last = ucFirst( parts.pop() );\n\n                while( (part = ucFirst( parts.shift() )) ) {\n                    host[ part ] = host[ part ] || {};\n                    host = host[ part ];\n                }\n\n                host[ last ] = modules[ key ];\n            }\n\n            return obj;\n        },\n\n        makeExport = function( dollar ) {\n            root.__dollar = dollar;\n\n            // exports every module.\n            return exportsTo( factory( root, _define, _require,window.jQuery ) );\n        },\n\n        origin;\n\n    if ( typeof module === 'object' && typeof module.exports === 'object' ) {\n\n        // For CommonJS and CommonJS-like environments where a proper window is present,\n        module.exports = makeExport();\n    } else if ( typeof define === 'function' && define.amd ) {\n\n        // Allow using this built library as an AMD module\n        // in another project. That other project will only\n        // see this AMD call, not the internal modules in\n        // the closure below.\n        define([ 'jquery' ], makeExport );\n    } else {\n\n        // Browser globals case. Just assign the\n        // result to a property on the global.\n        origin = root.WebUploader;\n        root.WebUploader = makeExport();\n        root.WebUploader.noConflict = function() {\n            root.WebUploader = origin;\n        };\n    }\n})( window, function( window, define, require ,jQuery ) {\n\n\n    /**\n     * @fileOverview jQuery or Zepto\n     */\n    define('dollar-third',[],function() {\n        var $ = window.__dollar || window.jQuery || window.Zepto || jQuery;\n    \n        if ( !$ ) {\n            throw new Error('jQuery or Zepto not found!');\n        }\n    \n        return $;\n    });\n    /**\n     * @fileOverview Dom 操作相关\n     */\n    define('dollar',[\n        'dollar-third'\n    ], function( _ ) {\n        return _;\n    });\n    /**\n     * @fileOverview 使用jQuery的Promise\n     */\n    define('promise-third',[\n        'dollar'\n    ], function( $ ) {\n        return {\n            Deferred: $.Deferred,\n            when: $.when,\n    \n            isPromise: function( anything ) {\n                return anything && typeof anything.then === 'function';\n            }\n        };\n    });\n    /**\n     * @fileOverview Promise/A+\n     */\n    define('promise',[\n        'promise-third'\n    ], function( _ ) {\n        return _;\n    });\n    /**\n     * @fileOverview 基础类方法。\n     */\n    \n    /**\n     * Web Uploader内部类的详细说明，以下提及的功能类，都可以在`WebUploader`这个变量中访问到。\n     *\n     * As you know, Web Uploader的每个文件都是用过[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)规范中的`define`组织起来的, 每个Module都会有个module id.\n     * 默认module id为该文件的路径，而此路径将会转化成名字空间存放在WebUploader中。如：\n     *\n     * * module `base`：WebUploader.Base\n     * * module `file`: WebUploader.File\n     * * module `lib/dnd`: WebUploader.Lib.Dnd\n     * * module `runtime/html5/dnd`: WebUploader.Runtime.Html5.Dnd\n     *\n     *\n     * 以下文档中对类的使用可能省略掉了`WebUploader`前缀。\n     * @module WebUploader\n     * @title WebUploader API文档\n     */\n    define('base',[\n        'dollar',\n        'promise'\n    ], function( $, promise ) {\n    \n        var noop = function() {},\n            call = Function.call;\n    \n        // http://jsperf.com/uncurrythis\n        // 反科里化\n        function uncurryThis( fn ) {\n            return function() {\n                return call.apply( fn, arguments );\n            };\n        }\n    \n        function bindFn( fn, context ) {\n            return function() {\n                return fn.apply( context, arguments );\n            };\n        }\n    \n        function createObject( proto ) {\n            var f;\n    \n            if ( Object.create ) {\n                return Object.create( proto );\n            } else {\n                f = function() {};\n                f.prototype = proto;\n                return new f();\n            }\n        }\n    \n    \n        /**\n         * 基础类，提供一些简单常用的方法。\n         * @class Base\n         */\n        return {\n    \n            /**\n             * @property {String} version 当前版本号。\n             */\n            version: '0.1.5',\n    \n            /**\n             * @property {jQuery|Zepto} $ 引用依赖的jQuery或者Zepto对象。\n             */\n            $: $,\n    \n            Deferred: promise.Deferred,\n    \n            isPromise: promise.isPromise,\n    \n            when: promise.when,\n    \n            /**\n             * @description  简单的浏览器检查结果。\n             *\n             * * `webkit`  webkit版本号，如果浏览器为非webkit内核，此属性为`undefined`。\n             * * `chrome`  chrome浏览器版本号，如果浏览器为chrome，此属性为`undefined`。\n             * * `ie`  ie浏览器版本号，如果浏览器为非ie，此属性为`undefined`。**暂不支持ie10+**\n             * * `firefox`  firefox浏览器版本号，如果浏览器为非firefox，此属性为`undefined`。\n             * * `safari`  safari浏览器版本号，如果浏览器为非safari，此属性为`undefined`。\n             * * `opera`  opera浏览器版本号，如果浏览器为非opera，此属性为`undefined`。\n             *\n             * @property {Object} [browser]\n             */\n            browser: (function( ua ) {\n                var ret = {},\n                    webkit = ua.match( /WebKit\\/([\\d.]+)/ ),\n                    chrome = ua.match( /Chrome\\/([\\d.]+)/ ) ||\n                        ua.match( /CriOS\\/([\\d.]+)/ ),\n    \n                    ie = ua.match( /MSIE\\s([\\d\\.]+)/ ) ||\n                        ua.match( /(?:trident)(?:.*rv:([\\w.]+))?/i ),\n                    firefox = ua.match( /Firefox\\/([\\d.]+)/ ),\n                    safari = ua.match( /Safari\\/([\\d.]+)/ ),\n                    opera = ua.match( /OPR\\/([\\d.]+)/ );\n    \n                webkit && (ret.webkit = parseFloat( webkit[ 1 ] ));\n                chrome && (ret.chrome = parseFloat( chrome[ 1 ] ));\n                ie && (ret.ie = parseFloat( ie[ 1 ] ));\n                firefox && (ret.firefox = parseFloat( firefox[ 1 ] ));\n                safari && (ret.safari = parseFloat( safari[ 1 ] ));\n                opera && (ret.opera = parseFloat( opera[ 1 ] ));\n    \n                return ret;\n            })( navigator.userAgent ),\n    \n            /**\n             * @description  操作系统检查结果。\n             *\n             * * `android`  如果在android浏览器环境下，此值为对应的android版本号，否则为`undefined`。\n             * * `ios` 如果在ios浏览器环境下，此值为对应的ios版本号，否则为`undefined`。\n             * @property {Object} [os]\n             */\n            os: (function( ua ) {\n                var ret = {},\n    \n                    // osx = !!ua.match( /\\(Macintosh\\; Intel / ),\n                    android = ua.match( /(?:Android);?[\\s\\/]+([\\d.]+)?/ ),\n                    ios = ua.match( /(?:iPad|iPod|iPhone).*OS\\s([\\d_]+)/ );\n    \n                // osx && (ret.osx = true);\n                android && (ret.android = parseFloat( android[ 1 ] ));\n                ios && (ret.ios = parseFloat( ios[ 1 ].replace( /_/g, '.' ) ));\n    \n                return ret;\n            })( navigator.userAgent ),\n    \n            /**\n             * 实现类与类之间的继承。\n             * @method inherits\n             * @grammar Base.inherits( super ) => child\n             * @grammar Base.inherits( super, protos ) => child\n             * @grammar Base.inherits( super, protos, statics ) => child\n             * @param  {Class} super 父类\n             * @param  {Object | Function} [protos] 子类或者对象。如果对象中包含constructor，子类将是用此属性值。\n             * @param  {Function} [protos.constructor] 子类构造器，不指定的话将创建个临时的直接执行父类构造器的方法。\n             * @param  {Object} [statics] 静态属性或方法。\n             * @return {Class} 返回子类。\n             * @example\n             * function Person() {\n             *     console.log( 'Super' );\n             * }\n             * Person.prototype.hello = function() {\n             *     console.log( 'hello' );\n             * };\n             *\n             * var Manager = Base.inherits( Person, {\n             *     world: function() {\n             *         console.log( 'World' );\n             *     }\n             * });\n             *\n             * // 因为没有指定构造器，父类的构造器将会执行。\n             * var instance = new Manager();    // => Super\n             *\n             * // 继承子父类的方法\n             * instance.hello();    // => hello\n             * instance.world();    // => World\n             *\n             * // 子类的__super__属性指向父类\n             * console.log( Manager.__super__ === Person );    // => true\n             */\n            inherits: function( Super, protos, staticProtos ) {\n                var child;\n    \n                if ( typeof protos === 'function' ) {\n                    child = protos;\n                    protos = null;\n                } else if ( protos && protos.hasOwnProperty('constructor') ) {\n                    child = protos.constructor;\n                } else {\n                    child = function() {\n                        return Super.apply( this, arguments );\n                    };\n                }\n    \n                // 复制静态方法\n                $.extend( true, child, Super, staticProtos || {} );\n    \n                /* jshint camelcase: false */\n    \n                // 让子类的__super__属性指向父类。\n                child.__super__ = Super.prototype;\n    \n                // 构建原型，添加原型方法或属性。\n                // 暂时用Object.create实现。\n                child.prototype = createObject( Super.prototype );\n                protos && $.extend( true, child.prototype, protos );\n    \n                return child;\n            },\n    \n            /**\n             * 一个不做任何事情的方法。可以用来赋值给默认的callback.\n             * @method noop\n             */\n            noop: noop,\n    \n            /**\n             * 返回一个新的方法，此方法将已指定的`context`来执行。\n             * @grammar Base.bindFn( fn, context ) => Function\n             * @method bindFn\n             * @example\n             * var doSomething = function() {\n             *         console.log( this.name );\n             *     },\n             *     obj = {\n             *         name: 'Object Name'\n             *     },\n             *     aliasFn = Base.bind( doSomething, obj );\n             *\n             *  aliasFn();    // => Object Name\n             *\n             */\n            bindFn: bindFn,\n    \n            /**\n             * 引用Console.log如果存在的话，否则引用一个[空函数noop](#WebUploader:Base.noop)。\n             * @grammar Base.log( args... ) => undefined\n             * @method log\n             */\n            log: (function() {\n                if ( window.console ) {\n                    return bindFn( console.log, console );\n                }\n                return noop;\n            })(),\n    \n            nextTick: (function() {\n    \n                return function( cb ) {\n                    setTimeout( cb, 1 );\n                };\n    \n                // @bug 当浏览器不在当前窗口时就停了。\n                // var next = window.requestAnimationFrame ||\n                //     window.webkitRequestAnimationFrame ||\n                //     window.mozRequestAnimationFrame ||\n                //     function( cb ) {\n                //         window.setTimeout( cb, 1000 / 60 );\n                //     };\n    \n                // // fix: Uncaught TypeError: Illegal invocation\n                // return bindFn( next, window );\n            })(),\n    \n            /**\n             * 被[uncurrythis](http://www.2ality.com/2011/11/uncurrying-this.html)的数组slice方法。\n             * 将用来将非数组对象转化成数组对象。\n             * @grammar Base.slice( target, start[, end] ) => Array\n             * @method slice\n             * @example\n             * function doSomthing() {\n             *     var args = Base.slice( arguments, 1 );\n             *     console.log( args );\n             * }\n             *\n             * doSomthing( 'ignored', 'arg2', 'arg3' );    // => Array [\"arg2\", \"arg3\"]\n             */\n            slice: uncurryThis( [].slice ),\n    \n            /**\n             * 生成唯一的ID\n             * @method guid\n             * @grammar Base.guid() => String\n             * @grammar Base.guid( prefx ) => String\n             */\n            guid: (function() {\n                var counter = 0;\n    \n                return function( prefix ) {\n                    var guid = (+new Date()).toString( 32 ),\n                        i = 0;\n    \n                    for ( ; i < 5; i++ ) {\n                        guid += Math.floor( Math.random() * 65535 ).toString( 32 );\n                    }\n    \n                    return (prefix || 'wu_') + guid + (counter++).toString( 32 );\n                };\n            })(),\n    \n            /**\n             * 格式化文件大小, 输出成带单位的字符串\n             * @method formatSize\n             * @grammar Base.formatSize( size ) => String\n             * @grammar Base.formatSize( size, pointLength ) => String\n             * @grammar Base.formatSize( size, pointLength, units ) => String\n             * @param {Number} size 文件大小\n             * @param {Number} [pointLength=2] 精确到的小数点数。\n             * @param {Array} [units=[ 'B', 'K', 'M', 'G', 'TB' ]] 单位数组。从字节，到千字节，一直往上指定。如果单位数组里面只指定了到了K(千字节)，同时文件大小大于M, 此方法的输出将还是显示成多少K.\n             * @example\n             * console.log( Base.formatSize( 100 ) );    // => 100B\n             * console.log( Base.formatSize( 1024 ) );    // => 1.00K\n             * console.log( Base.formatSize( 1024, 0 ) );    // => 1K\n             * console.log( Base.formatSize( 1024 * 1024 ) );    // => 1.00M\n             * console.log( Base.formatSize( 1024 * 1024 * 1024 ) );    // => 1.00G\n             * console.log( Base.formatSize( 1024 * 1024 * 1024, 0, ['B', 'KB', 'MB'] ) );    // => 1024MB\n             */\n            formatSize: function( size, pointLength, units ) {\n                var unit;\n    \n                units = units || [ 'B', 'K', 'M', 'G', 'TB' ];\n    \n                while ( (unit = units.shift()) && size > 1024 ) {\n                    size = size / 1024;\n                }\n    \n                return (unit === 'B' ? size : size.toFixed( pointLength || 2 )) +\n                        unit;\n            }\n        };\n    });\n    /**\n     * 事件处理类，可以独立使用，也可以扩展给对象使用。\n     * @fileOverview Mediator\n     */\n    define('mediator',[\n        'base'\n    ], function( Base ) {\n        var $ = Base.$,\n            slice = [].slice,\n            separator = /\\s+/,\n            protos;\n    \n        // 根据条件过滤出事件handlers.\n        function findHandlers( arr, name, callback, context ) {\n            return $.grep( arr, function( handler ) {\n                return handler &&\n                        (!name || handler.e === name) &&\n                        (!callback || handler.cb === callback ||\n                        handler.cb._cb === callback) &&\n                        (!context || handler.ctx === context);\n            });\n        }\n    \n        function eachEvent( events, callback, iterator ) {\n            // 不支持对象，只支持多个event用空格隔开\n            $.each( (events || '').split( separator ), function( _, key ) {\n                iterator( key, callback );\n            });\n        }\n    \n        function triggerHanders( events, args ) {\n            var stoped = false,\n                i = -1,\n                len = events.length,\n                handler;\n    \n            while ( ++i < len ) {\n                handler = events[ i ];\n    \n                if ( handler.cb.apply( handler.ctx2, args ) === false ) {\n                    stoped = true;\n                    break;\n                }\n            }\n    \n            return !stoped;\n        }\n    \n        protos = {\n    \n            /**\n             * 绑定事件。\n             *\n             * `callback`方法在执行时，arguments将会来源于trigger的时候携带的参数。如\n             * ```javascript\n             * var obj = {};\n             *\n             * // 使得obj有事件行为\n             * Mediator.installTo( obj );\n             *\n             * obj.on( 'testa', function( arg1, arg2 ) {\n             *     console.log( arg1, arg2 ); // => 'arg1', 'arg2'\n             * });\n             *\n             * obj.trigger( 'testa', 'arg1', 'arg2' );\n             * ```\n             *\n             * 如果`callback`中，某一个方法`return false`了，则后续的其他`callback`都不会被执行到。\n             * 切会影响到`trigger`方法的返回值，为`false`。\n             *\n             * `on`还可以用来添加一个特殊事件`all`, 这样所有的事件触发都会响应到。同时此类`callback`中的arguments有一个不同处，\n             * 就是第一个参数为`type`，记录当前是什么事件在触发。此类`callback`的优先级比脚低，会再正常`callback`执行完后触发。\n             * ```javascript\n             * obj.on( 'all', function( type, arg1, arg2 ) {\n             *     console.log( type, arg1, arg2 ); // => 'testa', 'arg1', 'arg2'\n             * });\n             * ```\n             *\n             * @method on\n             * @grammar on( name, callback[, context] ) => self\n             * @param  {String}   name     事件名，支持多个事件用空格隔开\n             * @param  {Function} callback 事件处理器\n             * @param  {Object}   [context]  事件处理器的上下文。\n             * @return {self} 返回自身，方便链式\n             * @chainable\n             * @class Mediator\n             */\n            on: function( name, callback, context ) {\n                var me = this,\n                    set;\n    \n                if ( !callback ) {\n                    return this;\n                }\n    \n                set = this._events || (this._events = []);\n    \n                eachEvent( name, callback, function( name, callback ) {\n                    var handler = { e: name };\n    \n                    handler.cb = callback;\n                    handler.ctx = context;\n                    handler.ctx2 = context || me;\n                    handler.id = set.length;\n    \n                    set.push( handler );\n                });\n    \n                return this;\n            },\n    \n            /**\n             * 绑定事件，且当handler执行完后，自动解除绑定。\n             * @method once\n             * @grammar once( name, callback[, context] ) => self\n             * @param  {String}   name     事件名\n             * @param  {Function} callback 事件处理器\n             * @param  {Object}   [context]  事件处理器的上下文。\n             * @return {self} 返回自身，方便链式\n             * @chainable\n             */\n            once: function( name, callback, context ) {\n                var me = this;\n    \n                if ( !callback ) {\n                    return me;\n                }\n    \n                eachEvent( name, callback, function( name, callback ) {\n                    var once = function() {\n                            me.off( name, once );\n                            return callback.apply( context || me, arguments );\n                        };\n    \n                    once._cb = callback;\n                    me.on( name, once, context );\n                });\n    \n                return me;\n            },\n    \n            /**\n             * 解除事件绑定\n             * @method off\n             * @grammar off( [name[, callback[, context] ] ] ) => self\n             * @param  {String}   [name]     事件名\n             * @param  {Function} [callback] 事件处理器\n             * @param  {Object}   [context]  事件处理器的上下文。\n             * @return {self} 返回自身，方便链式\n             * @chainable\n             */\n            off: function( name, cb, ctx ) {\n                var events = this._events;\n    \n                if ( !events ) {\n                    return this;\n                }\n    \n                if ( !name && !cb && !ctx ) {\n                    this._events = [];\n                    return this;\n                }\n    \n                eachEvent( name, cb, function( name, cb ) {\n                    $.each( findHandlers( events, name, cb, ctx ), function() {\n                        delete events[ this.id ];\n                    });\n                });\n    \n                return this;\n            },\n    \n            /**\n             * 触发事件\n             * @method trigger\n             * @grammar trigger( name[, args...] ) => self\n             * @param  {String}   type     事件名\n             * @param  {*} [...] 任意参数\n             * @return {Boolean} 如果handler中return false了，则返回false, 否则返回true\n             */\n            trigger: function( type ) {\n                var args, events, allEvents;\n    \n                if ( !this._events || !type ) {\n                    return this;\n                }\n    \n                args = slice.call( arguments, 1 );\n                events = findHandlers( this._events, type );\n                allEvents = findHandlers( this._events, 'all' );\n    \n                return triggerHanders( events, args ) &&\n                        triggerHanders( allEvents, arguments );\n            }\n        };\n    \n        /**\n         * 中介者，它本身是个单例，但可以通过[installTo](#WebUploader:Mediator:installTo)方法，使任何对象具备事件行为。\n         * 主要目的是负责模块与模块之间的合作，降低耦合度。\n         *\n         * @class Mediator\n         */\n        return $.extend({\n    \n            /**\n             * 可以通过这个接口，使任何对象具备事件功能。\n             * @method installTo\n             * @param  {Object} obj 需要具备事件行为的对象。\n             * @return {Object} 返回obj.\n             */\n            installTo: function( obj ) {\n                return $.extend( obj, protos );\n            }\n    \n        }, protos );\n    });\n    /**\n     * @fileOverview Uploader上传类\n     */\n    define('uploader',[\n        'base',\n        'mediator'\n    ], function( Base, Mediator ) {\n    \n        var $ = Base.$;\n    \n        /**\n         * 上传入口类。\n         * @class Uploader\n         * @constructor\n         * @grammar new Uploader( opts ) => Uploader\n         * @example\n         * var uploader = WebUploader.Uploader({\n         *     swf: 'path_of_swf/Uploader.swf',\n         *\n         *     // 开起分片上传。\n         *     chunked: true\n         * });\n         */\n        function Uploader( opts ) {\n            this.options = $.extend( true, {}, Uploader.options, opts );\n            this._init( this.options );\n        }\n    \n        // default Options\n        // widgets中有相应扩展\n        Uploader.options = {};\n        Mediator.installTo( Uploader.prototype );\n    \n        // 批量添加纯命令式方法。\n        $.each({\n            upload: 'start-upload',\n            stop: 'stop-upload',\n            getFile: 'get-file',\n            getFiles: 'get-files',\n            addFile: 'add-file',\n            addFiles: 'add-file',\n            sort: 'sort-files',\n            removeFile: 'remove-file',\n            cancelFile: 'cancel-file',\n            skipFile: 'skip-file',\n            retry: 'retry',\n            isInProgress: 'is-in-progress',\n            makeThumb: 'make-thumb',\n            md5File: 'md5-file',\n            getDimension: 'get-dimension',\n            addButton: 'add-btn',\n            predictRuntimeType: 'predict-runtime-type',\n            refresh: 'refresh',\n            disable: 'disable',\n            enable: 'enable',\n            reset: 'reset'\n        }, function( fn, command ) {\n            Uploader.prototype[ fn ] = function() {\n                return this.request( command, arguments );\n            };\n        });\n    \n        $.extend( Uploader.prototype, {\n            state: 'pending',\n    \n            _init: function( opts ) {\n                var me = this;\n    \n                me.request( 'init', opts, function() {\n                    me.state = 'ready';\n                    me.trigger('ready');\n                });\n            },\n    \n            /**\n             * 获取或者设置Uploader配置项。\n             * @method option\n             * @grammar option( key ) => *\n             * @grammar option( key, val ) => self\n             * @example\n             *\n             * // 初始状态图片上传前不会压缩\n             * var uploader = new WebUploader.Uploader({\n             *     compress: null;\n             * });\n             *\n             * // 修改后图片上传前，尝试将图片压缩到1600 * 1600\n             * uploader.option( 'compress', {\n             *     width: 1600,\n             *     height: 1600\n             * });\n             */\n            option: function( key, val ) {\n                var opts = this.options;\n    \n                // setter\n                if ( arguments.length > 1 ) {\n    \n                    if ( $.isPlainObject( val ) &&\n                            $.isPlainObject( opts[ key ] ) ) {\n                        $.extend( opts[ key ], val );\n                    } else {\n                        opts[ key ] = val;\n                    }\n    \n                } else {    // getter\n                    return key ? opts[ key ] : opts;\n                }\n            },\n    \n            /**\n             * 获取文件统计信息。返回一个包含一下信息的对象。\n             * * `successNum` 上传成功的文件数\n             * * `progressNum` 上传中的文件数\n             * * `cancelNum` 被删除的文件数\n             * * `invalidNum` 无效的文件数\n             * * `uploadFailNum` 上传失败的文件数\n             * * `queueNum` 还在队列中的文件数\n             * * `interruptNum` 被暂停的文件数\n             * @method getStats\n             * @grammar getStats() => Object\n             */\n            getStats: function() {\n                // return this._mgr.getStats.apply( this._mgr, arguments );\n                var stats = this.request('get-stats');\n    \n                return stats ? {\n                    successNum: stats.numOfSuccess,\n                    progressNum: stats.numOfProgress,\n    \n                    // who care?\n                    // queueFailNum: 0,\n                    cancelNum: stats.numOfCancel,\n                    invalidNum: stats.numOfInvalid,\n                    uploadFailNum: stats.numOfUploadFailed,\n                    queueNum: stats.numOfQueue,\n                    interruptNum: stats.numofInterrupt\n                } : {};\n            },\n    \n            // 需要重写此方法来来支持opts.onEvent和instance.onEvent的处理器\n            trigger: function( type/*, args...*/ ) {\n                var args = [].slice.call( arguments, 1 ),\n                    opts = this.options,\n                    name = 'on' + type.substring( 0, 1 ).toUpperCase() +\n                        type.substring( 1 );\n    \n                if (\n                        // 调用通过on方法注册的handler.\n                        Mediator.trigger.apply( this, arguments ) === false ||\n    \n                        // 调用opts.onEvent\n                        $.isFunction( opts[ name ] ) &&\n                        opts[ name ].apply( this, args ) === false ||\n    \n                        // 调用this.onEvent\n                        $.isFunction( this[ name ] ) &&\n                        this[ name ].apply( this, args ) === false ||\n    \n                        // 广播所有uploader的事件。\n                        Mediator.trigger.apply( Mediator,\n                        [ this, type ].concat( args ) ) === false ) {\n    \n                    return false;\n                }\n    \n                return true;\n            },\n    \n            /**\n             * 销毁 webuploader 实例\n             * @method destroy\n             * @grammar destroy() => undefined\n             */\n            destroy: function() {\n                this.request( 'destroy', arguments );\n                this.off();\n            },\n    \n            // widgets/widget.js将补充此方法的详细文档。\n            request: Base.noop\n        });\n    \n        /**\n         * 创建Uploader实例，等同于new Uploader( opts );\n         * @method create\n         * @class Base\n         * @static\n         * @grammar Base.create( opts ) => Uploader\n         */\n        Base.create = Uploader.create = function( opts ) {\n            return new Uploader( opts );\n        };\n    \n        // 暴露Uploader，可以通过它来扩展业务逻辑。\n        Base.Uploader = Uploader;\n    \n        return Uploader;\n    });\n    /**\n     * @fileOverview Runtime管理器，负责Runtime的选择, 连接\n     */\n    define('runtime/runtime',[\n        'base',\n        'mediator'\n    ], function( Base, Mediator ) {\n    \n        var $ = Base.$,\n            factories = {},\n    \n            // 获取对象的第一个key\n            getFirstKey = function( obj ) {\n                for ( var key in obj ) {\n                    if ( obj.hasOwnProperty( key ) ) {\n                        return key;\n                    }\n                }\n                return null;\n            };\n    \n        // 接口类。\n        function Runtime( options ) {\n            this.options = $.extend({\n                container: document.body\n            }, options );\n            this.uid = Base.guid('rt_');\n        }\n    \n        $.extend( Runtime.prototype, {\n    \n            getContainer: function() {\n                var opts = this.options,\n                    parent, container;\n    \n                if ( this._container ) {\n                    return this._container;\n                }\n    \n                parent = $( opts.container || document.body );\n                container = $( document.createElement('div') );\n    \n                container.attr( 'id', 'rt_' + this.uid );\n                container.css({\n                    position: 'absolute',\n                    top: '0px',\n                    left: '0px',\n                    width: '1px',\n                    height: '1px',\n                    overflow: 'hidden'\n                });\n    \n                parent.append( container );\n                parent.addClass('webuploader-container');\n                this._container = container;\n                this._parent = parent;\n                return container;\n            },\n    \n            init: Base.noop,\n            exec: Base.noop,\n    \n            destroy: function() {\n                this._container && this._container.remove();\n                this._parent && this._parent.removeClass('webuploader-container');\n                this.off();\n            }\n        });\n    \n        Runtime.orders = 'html5,flash';\n    \n    \n        /**\n         * 添加Runtime实现。\n         * @param {String} type    类型\n         * @param {Runtime} factory 具体Runtime实现。\n         */\n        Runtime.addRuntime = function( type, factory ) {\n            factories[ type ] = factory;\n        };\n    \n        Runtime.hasRuntime = function( type ) {\n            return !!(type ? factories[ type ] : getFirstKey( factories ));\n        };\n    \n        Runtime.create = function( opts, orders ) {\n            var type, runtime;\n    \n            orders = orders || Runtime.orders;\n            $.each( orders.split( /\\s*,\\s*/g ), function() {\n                if ( factories[ this ] ) {\n                    type = this;\n                    return false;\n                }\n            });\n    \n            type = type || getFirstKey( factories );\n            if ( !type ) {\n                throw new Error('Runtime Error');\n            }\n    \n            runtime = new factories[ type ]( opts );\n            return runtime;\n        };\n    \n        Mediator.installTo( Runtime.prototype );\n        return Runtime;\n    });\n    \n    /**\n     * @fileOverview Runtime管理器，负责Runtime的选择, 连接\n     */\n    define('runtime/client',[\n        'base',\n        'mediator',\n        'runtime/runtime'\n    ], function( Base, Mediator, Runtime ) {\n    \n        var cache;\n    \n        cache = (function() {\n            var obj = {};\n    \n            return {\n                add: function( runtime ) {\n                    obj[ runtime.uid ] = runtime;\n                },\n    \n                get: function( ruid, standalone ) {\n                    var i;\n    \n                    if ( ruid ) {\n                        return obj[ ruid ];\n                    }\n    \n                    for ( i in obj ) {\n                        // 有些类型不能重用，比如filepicker.\n                        if ( standalone && obj[ i ].__standalone ) {\n                            continue;\n                        }\n    \n                        return obj[ i ];\n                    }\n    \n                    return null;\n                },\n    \n                remove: function( runtime ) {\n                    delete obj[ runtime.uid ];\n                }\n            };\n        })();\n    \n        function RuntimeClient( component, standalone ) {\n            var deferred = Base.Deferred(),\n                runtime;\n    \n            this.uid = Base.guid('client_');\n    \n            // 允许runtime没有初始化之前，注册一些方法在初始化后执行。\n            this.runtimeReady = function( cb ) {\n                return deferred.done( cb );\n            };\n    \n            this.connectRuntime = function( opts, cb ) {\n    \n                // already connected.\n                if ( runtime ) {\n                    throw new Error('already connected!');\n                }\n    \n                deferred.done( cb );\n    \n                if ( typeof opts === 'string' && cache.get( opts ) ) {\n                    runtime = cache.get( opts );\n                }\n    \n                // 像filePicker只能独立存在，不能公用。\n                runtime = runtime || cache.get( null, standalone );\n    \n                // 需要创建\n                if ( !runtime ) {\n                    runtime = Runtime.create( opts, opts.runtimeOrder );\n                    runtime.__promise = deferred.promise();\n                    runtime.once( 'ready', deferred.resolve );\n                    runtime.init();\n                    cache.add( runtime );\n                    runtime.__client = 1;\n                } else {\n                    // 来自cache\n                    Base.$.extend( runtime.options, opts );\n                    runtime.__promise.then( deferred.resolve );\n                    runtime.__client++;\n                }\n    \n                standalone && (runtime.__standalone = standalone);\n                return runtime;\n            };\n    \n            this.getRuntime = function() {\n                return runtime;\n            };\n    \n            this.disconnectRuntime = function() {\n                if ( !runtime ) {\n                    return;\n                }\n    \n                runtime.__client--;\n    \n                if ( runtime.__client <= 0 ) {\n                    cache.remove( runtime );\n                    delete runtime.__promise;\n                    runtime.destroy();\n                }\n    \n                runtime = null;\n            };\n    \n            this.exec = function() {\n                if ( !runtime ) {\n                    return;\n                }\n    \n                var args = Base.slice( arguments );\n                component && args.unshift( component );\n    \n                return runtime.exec.apply( this, args );\n            };\n    \n            this.getRuid = function() {\n                return runtime && runtime.uid;\n            };\n    \n            this.destroy = (function( destroy ) {\n                return function() {\n                    destroy && destroy.apply( this, arguments );\n                    this.trigger('destroy');\n                    this.off();\n                    this.exec('destroy');\n                    this.disconnectRuntime();\n                };\n            })( this.destroy );\n        }\n    \n        Mediator.installTo( RuntimeClient.prototype );\n        return RuntimeClient;\n    });\n    /**\n     * @fileOverview 错误信息\n     */\n    define('lib/dnd',[\n        'base',\n        'mediator',\n        'runtime/client'\n    ], function( Base, Mediator, RuntimeClent ) {\n    \n        var $ = Base.$;\n    \n        function DragAndDrop( opts ) {\n            opts = this.options = $.extend({}, DragAndDrop.options, opts );\n    \n            opts.container = $( opts.container );\n    \n            if ( !opts.container.length ) {\n                return;\n            }\n    \n            RuntimeClent.call( this, 'DragAndDrop' );\n        }\n    \n        DragAndDrop.options = {\n            accept: null,\n            disableGlobalDnd: false\n        };\n    \n        Base.inherits( RuntimeClent, {\n            constructor: DragAndDrop,\n    \n            init: function() {\n                var me = this;\n    \n                me.connectRuntime( me.options, function() {\n                    me.exec('init');\n                    me.trigger('ready');\n                });\n            }\n        });\n    \n        Mediator.installTo( DragAndDrop.prototype );\n    \n        return DragAndDrop;\n    });\n    /**\n     * @fileOverview 组件基类。\n     */\n    define('widgets/widget',[\n        'base',\n        'uploader'\n    ], function( Base, Uploader ) {\n    \n        var $ = Base.$,\n            _init = Uploader.prototype._init,\n            _destroy = Uploader.prototype.destroy,\n            IGNORE = {},\n            widgetClass = [];\n    \n        function isArrayLike( obj ) {\n            if ( !obj ) {\n                return false;\n            }\n    \n            var length = obj.length,\n                type = $.type( obj );\n    \n            if ( obj.nodeType === 1 && length ) {\n                return true;\n            }\n    \n            return type === 'array' || type !== 'function' && type !== 'string' &&\n                    (length === 0 || typeof length === 'number' && length > 0 &&\n                    (length - 1) in obj);\n        }\n    \n        function Widget( uploader ) {\n            this.owner = uploader;\n            this.options = uploader.options;\n        }\n    \n        $.extend( Widget.prototype, {\n    \n            init: Base.noop,\n    \n            // 类Backbone的事件监听声明，监听uploader实例上的事件\n            // widget直接无法监听事件，事件只能通过uploader来传递\n            invoke: function( apiName, args ) {\n    \n                /*\n                    {\n                        'make-thumb': 'makeThumb'\n                    }\n                 */\n                var map = this.responseMap;\n    \n                // 如果无API响应声明则忽略\n                if ( !map || !(apiName in map) || !(map[ apiName ] in this) ||\n                        !$.isFunction( this[ map[ apiName ] ] ) ) {\n    \n                    return IGNORE;\n                }\n    \n                return this[ map[ apiName ] ].apply( this, args );\n    \n            },\n    \n            /**\n             * 发送命令。当传入`callback`或者`handler`中返回`promise`时。返回一个当所有`handler`中的promise都完成后完成的新`promise`。\n             * @method request\n             * @grammar request( command, args ) => * | Promise\n             * @grammar request( command, args, callback ) => Promise\n             * @for  Uploader\n             */\n            request: function() {\n                return this.owner.request.apply( this.owner, arguments );\n            }\n        });\n    \n        // 扩展Uploader.\n        $.extend( Uploader.prototype, {\n    \n            /**\n             * @property {String | Array} [disableWidgets=undefined]\n             * @namespace options\n             * @for Uploader\n             * @description 默认所有 Uploader.register 了的 widget 都会被加载，如果禁用某一部分，请通过此 option 指定黑名单。\n             */\n    \n            // 覆写_init用来初始化widgets\n            _init: function() {\n                var me = this,\n                    widgets = me._widgets = [],\n                    deactives = me.options.disableWidgets || '';\n    \n                $.each( widgetClass, function( _, klass ) {\n                    (!deactives || !~deactives.indexOf( klass._name )) &&\n                        widgets.push( new klass( me ) );\n                });\n    \n                return _init.apply( me, arguments );\n            },\n    \n            request: function( apiName, args, callback ) {\n                var i = 0,\n                    widgets = this._widgets,\n                    len = widgets && widgets.length,\n                    rlts = [],\n                    dfds = [],\n                    widget, rlt, promise, key;\n    \n                args = isArrayLike( args ) ? args : [ args ];\n    \n                for ( ; i < len; i++ ) {\n                    widget = widgets[ i ];\n                    rlt = widget.invoke( apiName, args );\n    \n                    if ( rlt !== IGNORE ) {\n    \n                        // Deferred对象\n                        if ( Base.isPromise( rlt ) ) {\n                            dfds.push( rlt );\n                        } else {\n                            rlts.push( rlt );\n                        }\n                    }\n                }\n    \n                // 如果有callback，则用异步方式。\n                if ( callback || dfds.length ) {\n                    promise = Base.when.apply( Base, dfds );\n                    key = promise.pipe ? 'pipe' : 'then';\n    \n                    // 很重要不能删除。删除了会死循环。\n                    // 保证执行顺序。让callback总是在下一个 tick 中执行。\n                    return promise[ key ](function() {\n                                var deferred = Base.Deferred(),\n                                    args = arguments;\n    \n                                if ( args.length === 1 ) {\n                                    args = args[ 0 ];\n                                }\n    \n                                setTimeout(function() {\n                                    deferred.resolve( args );\n                                }, 1 );\n    \n                                return deferred.promise();\n                            })[ callback ? key : 'done' ]( callback || Base.noop );\n                } else {\n                    return rlts[ 0 ];\n                }\n            },\n    \n            destroy: function() {\n                _destroy.apply( this, arguments );\n                this._widgets = null;\n            }\n        });\n    \n        /**\n         * 添加组件\n         * @grammar Uploader.register(proto);\n         * @grammar Uploader.register(map, proto);\n         * @param  {object} responseMap API 名称与函数实现的映射\n         * @param  {object} proto 组件原型，构造函数通过 constructor 属性定义\n         * @method Uploader.register\n         * @for Uploader\n         * @example\n         * Uploader.register({\n         *     'make-thumb': 'makeThumb'\n         * }, {\n         *     init: function( options ) {},\n         *     makeThumb: function() {}\n         * });\n         *\n         * Uploader.register({\n         *     'make-thumb': function() {\n         *         \n         *     }\n         * });\n         */\n        Uploader.register = Widget.register = function( responseMap, widgetProto ) {\n            var map = { init: 'init', destroy: 'destroy', name: 'anonymous' },\n                klass;\n    \n            if ( arguments.length === 1 ) {\n                widgetProto = responseMap;\n    \n                // 自动生成 map 表。\n                $.each(widgetProto, function(key) {\n                    if ( key[0] === '_' || key === 'name' ) {\n                        key === 'name' && (map.name = widgetProto.name);\n                        return;\n                    }\n    \n                    map[key.replace(/[A-Z]/g, '-$&').toLowerCase()] = key;\n                });\n    \n            } else {\n                map = $.extend( map, responseMap );\n            }\n    \n            widgetProto.responseMap = map;\n            klass = Base.inherits( Widget, widgetProto );\n            klass._name = map.name;\n            widgetClass.push( klass );\n    \n            return klass;\n        };\n    \n        /**\n         * 删除插件，只有在注册时指定了名字的才能被删除。\n         * @grammar Uploader.unRegister(name);\n         * @param  {string} name 组件名字\n         * @method Uploader.unRegister\n         * @for Uploader\n         * @example\n         *\n         * Uploader.register({\n         *     name: 'custom',\n         *     \n         *     'make-thumb': function() {\n         *         \n         *     }\n         * });\n         *\n         * Uploader.unRegister('custom');\n         */\n        Uploader.unRegister = Widget.unRegister = function( name ) {\n            if ( !name || name === 'anonymous' ) {\n                return;\n            }\n            \n            // 删除指定的插件。\n            for ( var i = widgetClass.length; i--; ) {\n                if ( widgetClass[i]._name === name ) {\n                    widgetClass.splice(i, 1)\n                }\n            }\n        };\n    \n        return Widget;\n    });\n    /**\n     * @fileOverview DragAndDrop Widget。\n     */\n    define('widgets/filednd',[\n        'base',\n        'uploader',\n        'lib/dnd',\n        'widgets/widget'\n    ], function( Base, Uploader, Dnd ) {\n        var $ = Base.$;\n    \n        Uploader.options.dnd = '';\n    \n        /**\n         * @property {Selector} [dnd=undefined]  指定Drag And Drop拖拽的容器，如果不指定，则不启动。\n         * @namespace options\n         * @for Uploader\n         */\n        \n        /**\n         * @property {Selector} [disableGlobalDnd=false]  是否禁掉整个页面的拖拽功能，如果不禁用，图片拖进来的时候会默认被浏览器打开。\n         * @namespace options\n         * @for Uploader\n         */\n    \n        /**\n         * @event dndAccept\n         * @param {DataTransferItemList} items DataTransferItem\n         * @description 阻止此事件可以拒绝某些类型的文件拖入进来。目前只有 chrome 提供这样的 API，且只能通过 mime-type 验证。\n         * @for  Uploader\n         */\n        return Uploader.register({\n            name: 'dnd',\n            \n            init: function( opts ) {\n    \n                if ( !opts.dnd ||\n                        this.request('predict-runtime-type') !== 'html5' ) {\n                    return;\n                }\n    \n                var me = this,\n                    deferred = Base.Deferred(),\n                    options = $.extend({}, {\n                        disableGlobalDnd: opts.disableGlobalDnd,\n                        container: opts.dnd,\n                        accept: opts.accept\n                    }),\n                    dnd;\n    \n                this.dnd = dnd = new Dnd( options );\n    \n                dnd.once( 'ready', deferred.resolve );\n                dnd.on( 'drop', function( files ) {\n                    me.request( 'add-file', [ files ]);\n                });\n    \n                // 检测文件是否全部允许添加。\n                dnd.on( 'accept', function( items ) {\n                    return me.owner.trigger( 'dndAccept', items );\n                });\n    \n                dnd.init();\n    \n                return deferred.promise();\n            },\n    \n            destroy: function() {\n                this.dnd && this.dnd.destroy();\n            }\n        });\n    });\n    \n    /**\n     * @fileOverview 错误信息\n     */\n    define('lib/filepaste',[\n        'base',\n        'mediator',\n        'runtime/client'\n    ], function( Base, Mediator, RuntimeClent ) {\n    \n        var $ = Base.$;\n    \n        function FilePaste( opts ) {\n            opts = this.options = $.extend({}, opts );\n            opts.container = $( opts.container || document.body );\n            RuntimeClent.call( this, 'FilePaste' );\n        }\n    \n        Base.inherits( RuntimeClent, {\n            constructor: FilePaste,\n    \n            init: function() {\n                var me = this;\n    \n                me.connectRuntime( me.options, function() {\n                    me.exec('init');\n                    me.trigger('ready');\n                });\n            }\n        });\n    \n        Mediator.installTo( FilePaste.prototype );\n    \n        return FilePaste;\n    });\n    /**\n     * @fileOverview 组件基类。\n     */\n    define('widgets/filepaste',[\n        'base',\n        'uploader',\n        'lib/filepaste',\n        'widgets/widget'\n    ], function( Base, Uploader, FilePaste ) {\n        var $ = Base.$;\n    \n        /**\n         * @property {Selector} [paste=undefined]  指定监听paste事件的容器，如果不指定，不启用此功能。此功能为通过粘贴来添加截屏的图片。建议设置为`document.body`.\n         * @namespace options\n         * @for Uploader\n         */\n        return Uploader.register({\n            name: 'paste',\n            \n            init: function( opts ) {\n    \n                if ( !opts.paste ||\n                        this.request('predict-runtime-type') !== 'html5' ) {\n                    return;\n                }\n    \n                var me = this,\n                    deferred = Base.Deferred(),\n                    options = $.extend({}, {\n                        container: opts.paste,\n                        accept: opts.accept\n                    }),\n                    paste;\n    \n                this.paste = paste = new FilePaste( options );\n    \n                paste.once( 'ready', deferred.resolve );\n                paste.on( 'paste', function( files ) {\n                    me.owner.request( 'add-file', [ files ]);\n                });\n                paste.init();\n    \n                return deferred.promise();\n            },\n    \n            destroy: function() {\n                this.paste && this.paste.destroy();\n            }\n        });\n    });\n    /**\n     * @fileOverview Blob\n     */\n    define('lib/blob',[\n        'base',\n        'runtime/client'\n    ], function( Base, RuntimeClient ) {\n    \n        function Blob( ruid, source ) {\n            var me = this;\n    \n            me.source = source;\n            me.ruid = ruid;\n            this.size = source.size || 0;\n    \n            // 如果没有指定 mimetype, 但是知道文件后缀。\n            if ( !source.type && this.ext &&\n                    ~'jpg,jpeg,png,gif,bmp'.indexOf( this.ext ) ) {\n                this.type = 'image/' + (this.ext === 'jpg' ? 'jpeg' : this.ext);\n            } else {\n                this.type = source.type || 'application/octet-stream';\n            }\n    \n            RuntimeClient.call( me, 'Blob' );\n            this.uid = source.uid || this.uid;\n    \n            if ( ruid ) {\n                me.connectRuntime( ruid );\n            }\n        }\n    \n        Base.inherits( RuntimeClient, {\n            constructor: Blob,\n    \n            slice: function( start, end ) {\n                return this.exec( 'slice', start, end );\n            },\n    \n            getSource: function() {\n                return this.source;\n            }\n        });\n    \n        return Blob;\n    });\n    /**\n     * 为了统一化Flash的File和HTML5的File而存在。\n     * 以至于要调用Flash里面的File，也可以像调用HTML5版本的File一下。\n     * @fileOverview File\n     */\n    define('lib/file',[\n        'base',\n        'lib/blob'\n    ], function( Base, Blob ) {\n    \n        var uid = 1,\n            rExt = /\\.([^.]+)$/;\n    \n        function File( ruid, file ) {\n            var ext;\n    \n            this.name = file.name || ('untitled' + uid++);\n            ext = rExt.exec( file.name ) ? RegExp.$1.toLowerCase() : '';\n    \n            // todo 支持其他类型文件的转换。\n            // 如果有 mimetype, 但是文件名里面没有找出后缀规律\n            if ( !ext && file.type ) {\n                ext = /\\/(jpg|jpeg|png|gif|bmp)$/i.exec( file.type ) ?\n                        RegExp.$1.toLowerCase() : '';\n                this.name += '.' + ext;\n            }\n    \n            this.ext = ext;\n            this.lastModifiedDate = file.lastModifiedDate ||\n                    (new Date()).toLocaleString();\n    \n            Blob.apply( this, arguments );\n        }\n    \n        return Base.inherits( Blob, File );\n    });\n    \n    /**\n     * @fileOverview 错误信息\n     */\n    define('lib/filepicker',[\n        'base',\n        'runtime/client',\n        'lib/file'\n    ], function( Base, RuntimeClent, File ) {\n    \n        var $ = Base.$;\n    \n        function FilePicker( opts ) {\n            opts = this.options = $.extend({}, FilePicker.options, opts );\n    \n            opts.container = $( opts.id );\n    \n            if ( !opts.container.length ) {\n                throw new Error('按钮指定错误');\n            }\n    \n            opts.innerHTML = opts.innerHTML || opts.label ||\n                    opts.container.html() || '';\n    \n            opts.button = $( opts.button || document.createElement('div') );\n            opts.button.html( opts.innerHTML );\n            opts.container.html( opts.button );\n    \n            RuntimeClent.call( this, 'FilePicker', true );\n        }\n    \n        FilePicker.options = {\n            button: null,\n            container: null,\n            label: null,\n            innerHTML: null,\n            multiple: true,\n            accept: null,\n            name: 'file'\n        };\n    \n        Base.inherits( RuntimeClent, {\n            constructor: FilePicker,\n    \n            init: function() {\n                var me = this,\n                    opts = me.options,\n                    button = opts.button;\n    \n                button.addClass('webuploader-pick');\n    \n                me.on( 'all', function( type ) {\n                    var files;\n    \n                    switch ( type ) {\n                        case 'mouseenter':\n                            button.addClass('webuploader-pick-hover');\n                            break;\n    \n                        case 'mouseleave':\n                            button.removeClass('webuploader-pick-hover');\n                            break;\n    \n                        case 'change':\n                            files = me.exec('getFiles');\n                            me.trigger( 'select', $.map( files, function( file ) {\n                                file = new File( me.getRuid(), file );\n    \n                                // 记录来源。\n                                file._refer = opts.container;\n                                return file;\n                            }), opts.container );\n                            break;\n                    }\n                });\n    \n                me.connectRuntime( opts, function() {\n                    me.refresh();\n                    me.exec( 'init', opts );\n                    me.trigger('ready');\n                });\n    \n                this._resizeHandler = Base.bindFn( this.refresh, this );\n                $( window ).on( 'resize', this._resizeHandler );\n            },\n    \n            refresh: function() {\n                var shimContainer = this.getRuntime().getContainer(),\n                    button = this.options.button,\n                    width = button.outerWidth ?\n                            button.outerWidth() : button.width(),\n    \n                    height = button.outerHeight ?\n                            button.outerHeight() : button.height(),\n    \n                    pos = button.offset();\n    \n                width && height && shimContainer.css({\n                    bottom: 'auto',\n                    right: 'auto',\n                    width: width + 'px',\n                    height: height + 'px'\n                }).offset( pos );\n            },\n    \n            enable: function() {\n                var btn = this.options.button;\n    \n                btn.removeClass('webuploader-pick-disable');\n                this.refresh();\n            },\n    \n            disable: function() {\n                var btn = this.options.button;\n    \n                this.getRuntime().getContainer().css({\n                    top: '-99999px'\n                });\n    \n                btn.addClass('webuploader-pick-disable');\n            },\n    \n            destroy: function() {\n                var btn = this.options.button;\n                $( window ).off( 'resize', this._resizeHandler );\n                btn.removeClass('webuploader-pick-disable webuploader-pick-hover ' +\n                    'webuploader-pick');\n            }\n        });\n    \n        return FilePicker;\n    });\n    \n    /**\n     * @fileOverview 文件选择相关\n     */\n    define('widgets/filepicker',[\n        'base',\n        'uploader',\n        'lib/filepicker',\n        'widgets/widget'\n    ], function( Base, Uploader, FilePicker ) {\n        var $ = Base.$;\n    \n        $.extend( Uploader.options, {\n    \n            /**\n             * @property {Selector | Object} [pick=undefined]\n             * @namespace options\n             * @for Uploader\n             * @description 指定选择文件的按钮容器，不指定则不创建按钮。\n             *\n             * * `id` {Seletor|dom} 指定选择文件的按钮容器，不指定则不创建按钮。**注意** 这里虽然写的是 id, 但是不是只支持 id, 还支持 class, 或者 dom 节点。\n             * * `label` {String} 请采用 `innerHTML` 代替\n             * * `innerHTML` {String} 指定按钮文字。不指定时优先从指定的容器中看是否自带文字。\n             * * `multiple` {Boolean} 是否开起同时选择多个文件能力。\n             */\n            pick: null,\n    \n            /**\n             * @property {Arroy} [accept=null]\n             * @namespace options\n             * @for Uploader\n             * @description 指定接受哪些类型的文件。 由于目前还有ext转mimeType表，所以这里需要分开指定。\n             *\n             * * `title` {String} 文字描述\n             * * `extensions` {String} 允许的文件后缀，不带点，多个用逗号分割。\n             * * `mimeTypes` {String} 多个用逗号分割。\n             *\n             * 如：\n             *\n             * ```\n             * {\n             *     title: 'Images',\n             *     extensions: 'gif,jpg,jpeg,bmp,png',\n             *     mimeTypes: 'image/*'\n             * }\n             * ```\n             */\n            accept: null/*{\n                title: 'Images',\n                extensions: 'gif,jpg,jpeg,bmp,png',\n                mimeTypes: 'image/*'\n            }*/\n        });\n    \n        return Uploader.register({\n            name: 'picker',\n    \n            init: function( opts ) {\n                this.pickers = [];\n                return opts.pick && this.addBtn( opts.pick );\n            },\n    \n            refresh: function() {\n                $.each( this.pickers, function() {\n                    this.refresh();\n                });\n            },\n    \n            /**\n             * @method addButton\n             * @for Uploader\n             * @grammar addButton( pick ) => Promise\n             * @description\n             * 添加文件选择按钮，如果一个按钮不够，需要调用此方法来添加。参数跟[options.pick](#WebUploader:Uploader:options)一致。\n             * @example\n             * uploader.addButton({\n             *     id: '#btnContainer',\n             *     innerHTML: '选择文件'\n             * });\n             */\n            addBtn: function( pick ) {\n                var me = this,\n                    opts = me.options,\n                    accept = opts.accept,\n                    promises = [];\n    \n                if ( !pick ) {\n                    return;\n                }\n    \n                $.isPlainObject( pick ) || (pick = {\n                    id: pick\n                });\n    \n                $( pick.id ).each(function() {\n                    var options, picker, deferred;\n    \n                    deferred = Base.Deferred();\n    \n                    options = $.extend({}, pick, {\n                        accept: $.isPlainObject( accept ) ? [ accept ] : accept,\n                        swf: opts.swf,\n                        runtimeOrder: opts.runtimeOrder,\n                        id: this\n                    });\n    \n                    picker = new FilePicker( options );\n    \n                    picker.once( 'ready', deferred.resolve );\n                    picker.on( 'select', function( files ) {\n                        me.owner.request( 'add-file', [ files ]);\n                    });\n                    picker.init();\n    \n                    me.pickers.push( picker );\n    \n                    promises.push( deferred.promise() );\n                });\n    \n                return Base.when.apply( Base, promises );\n            },\n    \n            disable: function() {\n                $.each( this.pickers, function() {\n                    this.disable();\n                });\n            },\n    \n            enable: function() {\n                $.each( this.pickers, function() {\n                    this.enable();\n                });\n            },\n    \n            destroy: function() {\n                $.each( this.pickers, function() {\n                    this.destroy();\n                });\n                this.pickers = null;\n            }\n        });\n    });\n    /**\n     * @fileOverview Image\n     */\n    define('lib/image',[\n        'base',\n        'runtime/client',\n        'lib/blob'\n    ], function( Base, RuntimeClient, Blob ) {\n        var $ = Base.$;\n    \n        // 构造器。\n        function Image( opts ) {\n            this.options = $.extend({}, Image.options, opts );\n            RuntimeClient.call( this, 'Image' );\n    \n            this.on( 'load', function() {\n                this._info = this.exec('info');\n                this._meta = this.exec('meta');\n            });\n        }\n    \n        // 默认选项。\n        Image.options = {\n    \n            // 默认的图片处理质量\n            quality: 90,\n    \n            // 是否裁剪\n            crop: false,\n    \n            // 是否保留头部信息\n            preserveHeaders: false,\n    \n            // 是否允许放大。\n            allowMagnify: false\n        };\n    \n        // 继承RuntimeClient.\n        Base.inherits( RuntimeClient, {\n            constructor: Image,\n    \n            info: function( val ) {\n    \n                // setter\n                if ( val ) {\n                    this._info = val;\n                    return this;\n                }\n    \n                // getter\n                return this._info;\n            },\n    \n            meta: function( val ) {\n    \n                // setter\n                if ( val ) {\n                    this._meta = val;\n                    return this;\n                }\n    \n                // getter\n                return this._meta;\n            },\n    \n            loadFromBlob: function( blob ) {\n                var me = this,\n                    ruid = blob.getRuid();\n    \n                this.connectRuntime( ruid, function() {\n                    me.exec( 'init', me.options );\n                    me.exec( 'loadFromBlob', blob );\n                });\n            },\n    \n            resize: function() {\n                var args = Base.slice( arguments );\n                return this.exec.apply( this, [ 'resize' ].concat( args ) );\n            },\n    \n            crop: function() {\n                var args = Base.slice( arguments );\n                return this.exec.apply( this, [ 'crop' ].concat( args ) );\n            },\n    \n            getAsDataUrl: function( type ) {\n                return this.exec( 'getAsDataUrl', type );\n            },\n    \n            getAsBlob: function( type ) {\n                var blob = this.exec( 'getAsBlob', type );\n    \n                return new Blob( this.getRuid(), blob );\n            }\n        });\n    \n        return Image;\n    });\n    /**\n     * @fileOverview 图片操作, 负责预览图片和上传前压缩图片\n     */\n    define('widgets/image',[\n        'base',\n        'uploader',\n        'lib/image',\n        'widgets/widget'\n    ], function( Base, Uploader, Image ) {\n    \n        var $ = Base.$,\n            throttle;\n    \n        // 根据要处理的文件大小来节流，一次不能处理太多，会卡。\n        throttle = (function( max ) {\n            var occupied = 0,\n                waiting = [],\n                tick = function() {\n                    var item;\n    \n                    while ( waiting.length && occupied < max ) {\n                        item = waiting.shift();\n                        occupied += item[ 0 ];\n                        item[ 1 ]();\n                    }\n                };\n    \n            return function( emiter, size, cb ) {\n                waiting.push([ size, cb ]);\n                emiter.once( 'destroy', function() {\n                    occupied -= size;\n                    setTimeout( tick, 1 );\n                });\n                setTimeout( tick, 1 );\n            };\n        })( 5 * 1024 * 1024 );\n    \n        $.extend( Uploader.options, {\n    \n            /**\n             * @property {Object} [thumb]\n             * @namespace options\n             * @for Uploader\n             * @description 配置生成缩略图的选项。\n             *\n             * 默认为：\n             *\n             * ```javascript\n             * {\n             *     width: 110,\n             *     height: 110,\n             *\n             *     // 图片质量，只有type为`image/jpeg`的时候才有效。\n             *     quality: 70,\n             *\n             *     // 是否允许放大，如果想要生成小图的时候不失真，此选项应该设置为false.\n             *     allowMagnify: true,\n             *\n             *     // 是否允许裁剪。\n             *     crop: true,\n             *\n             *     // 为空的话则保留原有图片格式。\n             *     // 否则强制转换成指定的类型。\n             *     type: 'image/jpeg'\n             * }\n             * ```\n             */\n            thumb: {\n                width: 110,\n                height: 110,\n                quality: 70,\n                allowMagnify: true,\n                crop: true,\n                preserveHeaders: false,\n    \n                // 为空的话则保留原有图片格式。\n                // 否则强制转换成指定的类型。\n                // IE 8下面 base64 大小不能超过 32K 否则预览失败，而非 jpeg 编码的图片很可\n                // 能会超过 32k, 所以这里设置成预览的时候都是 image/jpeg\n                type: 'image/jpeg'\n            },\n    \n            /**\n             * @property {Object} [compress]\n             * @namespace options\n             * @for Uploader\n             * @description 配置压缩的图片的选项。如果此选项为`false`, 则图片在上传前不进行压缩。\n             *\n             * 默认为：\n             *\n             * ```javascript\n             * {\n             *     width: 1600,\n             *     height: 1600,\n             *\n             *     // 图片质量，只有type为`image/jpeg`的时候才有效。\n             *     quality: 90,\n             *\n             *     // 是否允许放大，如果想要生成小图的时候不失真，此选项应该设置为false.\n             *     allowMagnify: false,\n             *\n             *     // 是否允许裁剪。\n             *     crop: false,\n             *\n             *     // 是否保留头部meta信息。\n             *     preserveHeaders: true,\n             *\n             *     // 如果发现压缩后文件大小比原来还大，则使用原来图片\n             *     // 此属性可能会影响图片自动纠正功能\n             *     noCompressIfLarger: false,\n             *\n             *     // 单位字节，如果图片大小小于此值，不会采用压缩。\n             *     compressSize: 0\n             * }\n             * ```\n             */\n            compress: {\n                width: 1600,\n                height: 1600,\n                quality: 90,\n                allowMagnify: false,\n                crop: false,\n                preserveHeaders: true\n            }\n        });\n    \n        return Uploader.register({\n    \n            name: 'image',\n    \n    \n            /**\n             * 生成缩略图，此过程为异步，所以需要传入`callback`。\n             * 通常情况在图片加入队里后调用此方法来生成预览图以增强交互效果。\n             *\n             * 当 width 或者 height 的值介于 0 - 1 时，被当成百分比使用。\n             *\n             * `callback`中可以接收到两个参数。\n             * * 第一个为error，如果生成缩略图有错误，此error将为真。\n             * * 第二个为ret, 缩略图的Data URL值。\n             *\n             * **注意**\n             * Date URL在IE6/7中不支持，所以不用调用此方法了，直接显示一张暂不支持预览图片好了。\n             * 也可以借助服务端，将 base64 数据传给服务端，生成一个临时文件供预览。\n             *\n             * @method makeThumb\n             * @grammar makeThumb( file, callback ) => undefined\n             * @grammar makeThumb( file, callback, width, height ) => undefined\n             * @for Uploader\n             * @example\n             *\n             * uploader.on( 'fileQueued', function( file ) {\n             *     var $li = ...;\n             *\n             *     uploader.makeThumb( file, function( error, ret ) {\n             *         if ( error ) {\n             *             $li.text('预览错误');\n             *         } else {\n             *             $li.append('<img alt=\"\" src=\"' + ret + '\" />');\n             *         }\n             *     });\n             *\n             * });\n             */\n            makeThumb: function( file, cb, width, height ) {\n                var opts, image;\n                var isArtwork = false;\n                file = this.request( 'get-file', file );\n    \n                // 只预览图片格式。\n                if ( !file.type.match( /^image/ ) ) {\n                    cb( true );\n                    return;\n                }\n    \n                opts = $.extend({}, this.options.thumb );\n                isArtwork = $.isPlainObject( this.options.thumb ) ? false : true;\n                // 如果传入的是object.\n                if ( $.isPlainObject( width ) ) {\n                    opts = $.extend( opts, width );\n                    width = null;\n                }\n    \n                width = width || opts.width;\n                height = height || opts.height;\n    \n                image = new Image( opts );\n    \n                image.once( 'load', function() {\n                    file._info = file._info || image.info();\n                    file._meta = file._meta || image.meta();\n    \n                    // 如果 width 的值介于 0 - 1\n                    // 说明设置的是百分比。\n                    if ( width <= 1 && width > 0 ) {\n                        width = file._info.width * width;\n                    }\n    \n                    // 同样的规则应用于 height\n                    if ( height <= 1 && height > 0 ) {\n                        height = file._info.height * height;\n                    }\n                    if( isArtwork ){\n                        image.resize( file._info.width, file._info.height );\n                        \n                    }else{\n                        image.resize( width, height );\n                        \n                       \n                    }\n\n                });\n    \n                // 当 resize 完后\n                image.once( 'complete', function() {\n                    cb( false, image.getAsDataUrl( opts.type ) );\n                    image.destroy();\n                });\n    \n                image.once( 'error', function( reason ) {\n                    cb( reason || true );\n                    image.destroy();\n                });\n    \n                throttle( image, file.source.size, function() {\n                    file._info && image.info( file._info );\n                    file._meta && image.meta( file._meta );\n                    image.loadFromBlob( file.source );\n                });\n            },\n    \n            beforeSendFile: function( file ) {\n                var opts = this.options.compress || this.options.resize,\n                    compressSize = opts && opts.compressSize || 0,\n                    noCompressIfLarger = opts && opts.noCompressIfLarger || false,\n                    image, deferred;\n    \n                file = this.request( 'get-file', file );\n    \n                // 只压缩 jpeg 图片格式。\n                // gif 可能会丢失针\n                // bmp png 基本上尺寸都不大，且压缩比比较小。\n                if ( !opts || !~'image/jpeg,image/jpg'.indexOf( file.type ) ||\n                        file.size < compressSize ||\n                        file._compressed ) {\n                    return;\n                }\n    \n                opts = $.extend({}, opts );\n                deferred = Base.Deferred();\n    \n                image = new Image( opts );\n    \n                deferred.always(function() {\n                    image.destroy();\n                    image = null;\n                });\n                image.once( 'error', deferred.reject );\n                image.once( 'load', function() {\n                    var width = opts.width,\n                        height = opts.height;\n    \n                    file._info = file._info || image.info();\n                    file._meta = file._meta || image.meta();\n    \n                    // 如果 width 的值介于 0 - 1\n                    // 说明设置的是百分比。\n                    if ( width <= 1 && width > 0 ) {\n                        width = file._info.width * width;\n                    }\n    \n                    // 同样的规则应用于 height\n                    if ( height <= 1 && height > 0 ) {\n                        height = file._info.height * height;\n                    }\n    \n                    image.resize( width, height );\n                });\n    \n                image.once( 'complete', function() {\n                    var blob, size;\n    \n                    // 移动端 UC / qq 浏览器的无图模式下\n                    // ctx.getImageData 处理大图的时候会报 Exception\n                    // INDEX_SIZE_ERR: DOM Exception 1\n                    try {\n                        blob = image.getAsBlob( opts.type );\n    \n                        size = file.size;\n    \n                        // 如果压缩后，比原来还大则不用压缩后的。\n                        if ( !noCompressIfLarger || blob.size < size ) {\n                            // file.source.destroy && file.source.destroy();\n                            file.source = blob;\n                            file.size = blob.size;\n    \n                            file.trigger( 'resize', blob.size, size );\n                        }\n    \n                        // 标记，避免重复压缩。\n                        file._compressed = true;\n                        deferred.resolve();\n                    } catch ( e ) {\n                        // 出错了直接继续，让其上传原始图片\n                        deferred.resolve();\n                    }\n                });\n    \n                file._info && image.info( file._info );\n                file._meta && image.meta( file._meta );\n    \n                image.loadFromBlob( file.source );\n                return deferred.promise();\n            }\n        });\n    });\n    /**\n     * @fileOverview 文件属性封装\n     */\n    define('file',[\n        'base',\n        'mediator'\n    ], function( Base, Mediator ) {\n    \n        var $ = Base.$,\n            idPrefix = 'WU_FILE_',\n            idSuffix = 0,\n            rExt = /\\.([^.]+)$/,\n            statusMap = {};\n    \n        function gid() {\n            return idPrefix + idSuffix++;\n        }\n    \n        /**\n         * 文件类\n         * @class File\n         * @constructor 构造函数\n         * @grammar new File( source ) => File\n         * @param {Lib.File} source [lib.File](#Lib.File)实例, 此source对象是带有Runtime信息的。\n         */\n        function WUFile( source ) {\n    \n            /**\n             * 文件名，包括扩展名（后缀）\n             * @property name\n             * @type {string}\n             */\n            this.name = source.name || 'Untitled';\n    \n            /**\n             * 文件体积（字节）\n             * @property size\n             * @type {uint}\n             * @default 0\n             */\n            this.size = source.size || 0;\n    \n            /**\n             * 文件MIMETYPE类型，与文件类型的对应关系请参考[http://t.cn/z8ZnFny](http://t.cn/z8ZnFny)\n             * @property type\n             * @type {string}\n             * @default 'application/octet-stream'\n             */\n            this.type = source.type || 'application/octet-stream';\n    \n            /**\n             * 文件最后修改日期\n             * @property lastModifiedDate\n             * @type {int}\n             * @default 当前时间戳\n             */\n            this.lastModifiedDate = source.lastModifiedDate || (new Date() * 1);\n    \n            /**\n             * 文件ID，每个对象具有唯一ID，与文件名无关\n             * @property id\n             * @type {string}\n             */\n            this.id = gid();\n    \n            /**\n             * 文件扩展名，通过文件名获取，例如test.png的扩展名为png\n             * @property ext\n             * @type {string}\n             */\n            this.ext = rExt.exec( this.name ) ? RegExp.$1 : '';\n    \n    \n            /**\n             * 状态文字说明。在不同的status语境下有不同的用途。\n             * @property statusText\n             * @type {string}\n             */\n            this.statusText = '';\n    \n            // 存储文件状态，防止通过属性直接修改\n            statusMap[ this.id ] = WUFile.Status.INITED;\n    \n            this.source = source;\n            this.loaded = 0;\n    \n            this.on( 'error', function( msg ) {\n                this.setStatus( WUFile.Status.ERROR, msg );\n            });\n        }\n    \n        $.extend( WUFile.prototype, {\n    \n            /**\n             * 设置状态，状态变化时会触发`change`事件。\n             * @method setStatus\n             * @grammar setStatus( status[, statusText] );\n             * @param {File.Status|String} status [文件状态值](#WebUploader:File:File.Status)\n             * @param {String} [statusText=''] 状态说明，常在error时使用，用http, abort,server等来标记是由于什么原因导致文件错误。\n             */\n            setStatus: function( status, text ) {\n    \n                var prevStatus = statusMap[ this.id ];\n    \n                typeof text !== 'undefined' && (this.statusText = text);\n    \n                if ( status !== prevStatus ) {\n                    statusMap[ this.id ] = status;\n                    /**\n                     * 文件状态变化\n                     * @event statuschange\n                     */\n                    this.trigger( 'statuschange', status, prevStatus );\n                }\n    \n            },\n    \n            /**\n             * 获取文件状态\n             * @return {File.Status}\n             * @example\n                     文件状态具体包括以下几种类型：\n                     {\n                         // 初始化\n                        INITED:     0,\n                        // 已入队列\n                        QUEUED:     1,\n                        // 正在上传\n                        PROGRESS:     2,\n                        // 上传出错\n                        ERROR:         3,\n                        // 上传成功\n                        COMPLETE:     4,\n                        // 上传取消\n                        CANCELLED:     5\n                    }\n             */\n            getStatus: function() {\n                return statusMap[ this.id ];\n            },\n    \n            /**\n             * 获取文件原始信息。\n             * @return {*}\n             */\n            getSource: function() {\n                return this.source;\n            },\n    \n            destroy: function() {\n                this.off();\n                delete statusMap[ this.id ];\n            }\n        });\n    \n        Mediator.installTo( WUFile.prototype );\n    \n        /**\n         * 文件状态值，具体包括以下几种类型：\n         * * `inited` 初始状态\n         * * `queued` 已经进入队列, 等待上传\n         * * `progress` 上传中\n         * * `complete` 上传完成。\n         * * `error` 上传出错，可重试\n         * * `interrupt` 上传中断，可续传。\n         * * `invalid` 文件不合格，不能重试上传。会自动从队列中移除。\n         * * `cancelled` 文件被移除。\n         * @property {Object} Status\n         * @namespace File\n         * @class File\n         * @static\n         */\n        WUFile.Status = {\n            INITED:     'inited',    // 初始状态\n            QUEUED:     'queued',    // 已经进入队列, 等待上传\n            PROGRESS:   'progress',    // 上传中\n            ERROR:      'error',    // 上传出错，可重试\n            COMPLETE:   'complete',    // 上传完成。\n            CANCELLED:  'cancelled',    // 上传取消。\n            INTERRUPT:  'interrupt',    // 上传中断，可续传。\n            INVALID:    'invalid'    // 文件不合格，不能重试上传。\n        };\n    \n        return WUFile;\n    });\n    \n    /**\n     * @fileOverview 文件队列\n     */\n    define('queue',[\n        'base',\n        'mediator',\n        'file'\n    ], function( Base, Mediator, WUFile ) {\n    \n        var $ = Base.$,\n            STATUS = WUFile.Status;\n    \n        /**\n         * 文件队列, 用来存储各个状态中的文件。\n         * @class Queue\n         * @extends Mediator\n         */\n        function Queue() {\n    \n            /**\n             * 统计文件数。\n             * * `numOfQueue` 队列中的文件数。\n             * * `numOfSuccess` 上传成功的文件数\n             * * `numOfCancel` 被取消的文件数\n             * * `numOfProgress` 正在上传中的文件数\n             * * `numOfUploadFailed` 上传错误的文件数。\n             * * `numOfInvalid` 无效的文件数。\n             * * `numofDeleted` 被移除的文件数。\n             * @property {Object} stats\n             */\n            this.stats = {\n                numOfQueue: 0,\n                numOfSuccess: 0,\n                numOfCancel: 0,\n                numOfProgress: 0,\n                numOfUploadFailed: 0,\n                numOfInvalid: 0,\n                numofDeleted: 0,\n                numofInterrupt: 0\n            };\n    \n            // 上传队列，仅包括等待上传的文件\n            this._queue = [];\n    \n            // 存储所有文件\n            this._map = {};\n        }\n    \n        $.extend( Queue.prototype, {\n    \n            /**\n             * 将新文件加入对队列尾部\n             *\n             * @method append\n             * @param  {File} file   文件对象\n             */\n            append: function( file ) {\n                this._queue.push( file );\n                this._fileAdded( file );\n                return this;\n            },\n    \n            /**\n             * 将新文件加入对队列头部\n             *\n             * @method prepend\n             * @param  {File} file   文件对象\n             */\n            prepend: function( file ) {\n                this._queue.unshift( file );\n                this._fileAdded( file );\n                return this;\n            },\n    \n            /**\n             * 获取文件对象\n             *\n             * @method getFile\n             * @param  {String} fileId   文件ID\n             * @return {File}\n             */\n            getFile: function( fileId ) {\n                if ( typeof fileId !== 'string' ) {\n                    return fileId;\n                }\n                return this._map[ fileId ];\n            },\n    \n            /**\n             * 从队列中取出一个指定状态的文件。\n             * @grammar fetch( status ) => File\n             * @method fetch\n             * @param {String} status [文件状态值](#WebUploader:File:File.Status)\n             * @return {File} [File](#WebUploader:File)\n             */\n            fetch: function( status ) {\n                var len = this._queue.length,\n                    i, file;\n    \n                status = status || STATUS.QUEUED;\n    \n                for ( i = 0; i < len; i++ ) {\n                    file = this._queue[ i ];\n    \n                    if ( status === file.getStatus() ) {\n                        return file;\n                    }\n                }\n    \n                return null;\n            },\n    \n            /**\n             * 对队列进行排序，能够控制文件上传顺序。\n             * @grammar sort( fn ) => undefined\n             * @method sort\n             * @param {Function} fn 排序方法\n             */\n            sort: function( fn ) {\n                if ( typeof fn === 'function' ) {\n                    this._queue.sort( fn );\n                }\n            },\n    \n            /**\n             * 获取指定类型的文件列表, 列表中每一个成员为[File](#WebUploader:File)对象。\n             * @grammar getFiles( [status1[, status2 ...]] ) => Array\n             * @method getFiles\n             * @param {String} [status] [文件状态值](#WebUploader:File:File.Status)\n             */\n            getFiles: function() {\n                var sts = [].slice.call( arguments, 0 ),\n                    ret = [],\n                    i = 0,\n                    len = this._queue.length,\n                    file;\n    \n                for ( ; i < len; i++ ) {\n                    file = this._queue[ i ];\n    \n                    if ( sts.length && !~$.inArray( file.getStatus(), sts ) ) {\n                        continue;\n                    }\n    \n                    ret.push( file );\n                }\n    \n                return ret;\n            },\n    \n            /**\n             * 在队列中删除文件。\n             * @grammar removeFile( file ) => Array\n             * @method removeFile\n             * @param {File} 文件对象。\n             */\n            removeFile: function( file ) {\n                var me = this,\n                    existing = this._map[ file.id ];\n    \n                if ( existing ) {\n                    delete this._map[ file.id ];\n                    file.destroy();\n                    this.stats.numofDeleted++;\n                }\n            },\n    \n            _fileAdded: function( file ) {\n                var me = this,\n                    existing = this._map[ file.id ];\n    \n                if ( !existing ) {\n                    this._map[ file.id ] = file;\n    \n                    file.on( 'statuschange', function( cur, pre ) {\n                        me._onFileStatusChange( cur, pre );\n                    });\n                }\n            },\n    \n            _onFileStatusChange: function( curStatus, preStatus ) {\n                var stats = this.stats;\n    \n                switch ( preStatus ) {\n                    case STATUS.PROGRESS:\n                        stats.numOfProgress--;\n                        break;\n    \n                    case STATUS.QUEUED:\n                        stats.numOfQueue --;\n                        break;\n    \n                    case STATUS.ERROR:\n                        stats.numOfUploadFailed--;\n                        break;\n    \n                    case STATUS.INVALID:\n                        stats.numOfInvalid--;\n                        break;\n    \n                    case STATUS.INTERRUPT:\n                        stats.numofInterrupt--;\n                        break;\n                }\n    \n                switch ( curStatus ) {\n                    case STATUS.QUEUED:\n                        stats.numOfQueue++;\n                        break;\n    \n                    case STATUS.PROGRESS:\n                        stats.numOfProgress++;\n                        break;\n    \n                    case STATUS.ERROR:\n                        stats.numOfUploadFailed++;\n                        break;\n    \n                    case STATUS.COMPLETE:\n                        stats.numOfSuccess++;\n                        break;\n    \n                    case STATUS.CANCELLED:\n                        stats.numOfCancel++;\n                        break;\n    \n    \n                    case STATUS.INVALID:\n                        stats.numOfInvalid++;\n                        break;\n    \n                    case STATUS.INTERRUPT:\n                        stats.numofInterrupt++;\n                        break;\n                }\n            }\n    \n        });\n    \n        Mediator.installTo( Queue.prototype );\n    \n        return Queue;\n    });\n    /**\n     * @fileOverview 队列\n     */\n    define('widgets/queue',[\n        'base',\n        'uploader',\n        'queue',\n        'file',\n        'lib/file',\n        'runtime/client',\n        'widgets/widget'\n    ], function( Base, Uploader, Queue, WUFile, File, RuntimeClient ) {\n    \n        var $ = Base.$,\n            rExt = /\\.\\w+$/,\n            Status = WUFile.Status;\n    \n        return Uploader.register({\n            name: 'queue',\n    \n            init: function( opts ) {\n                var me = this,\n                    deferred, len, i, item, arr, accept, runtime;\n    \n                if ( $.isPlainObject( opts.accept ) ) {\n                    opts.accept = [ opts.accept ];\n                }\n    \n                // accept中的中生成匹配正则。\n                if ( opts.accept ) {\n                    arr = [];\n    \n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\n                        item = opts.accept[ i ].extensions;\n                        item && arr.push( item );\n                    }\n    \n                    if ( arr.length ) {\n                        accept = '\\\\.' + arr.join(',')\n                                .replace( /,/g, '$|\\\\.' )\n                                .replace( /\\*/g, '.*' ) + '$';\n                    }\n    \n                    me.accept = new RegExp( accept, 'i' );\n                }\n    \n                me.queue = new Queue();\n                me.stats = me.queue.stats;\n    \n                // 如果当前不是html5运行时，那就算了。\n                // 不执行后续操作\n                if ( this.request('predict-runtime-type') !== 'html5' ) {\n                    return;\n                }\n    \n                // 创建一个 html5 运行时的 placeholder\n                // 以至于外部添加原生 File 对象的时候能正确包裹一下供 webuploader 使用。\n                deferred = Base.Deferred();\n                this.placeholder = runtime = new RuntimeClient('Placeholder');\n                runtime.connectRuntime({\n                    runtimeOrder: 'html5'\n                }, function() {\n                    me._ruid = runtime.getRuid();\n                    deferred.resolve();\n                });\n                return deferred.promise();\n            },\n    \n    \n            // 为了支持外部直接添加一个原生File对象。\n            _wrapFile: function( file ) {\n                if ( !(file instanceof WUFile) ) {\n    \n                    if ( !(file instanceof File) ) {\n                        if ( !this._ruid ) {\n                            throw new Error('Can\\'t add external files.');\n                        }\n                        file = new File( this._ruid, file );\n                    }\n    \n                    file = new WUFile( file );\n                }\n    \n                return file;\n            },\n    \n            // 判断文件是否可以被加入队列\n            acceptFile: function( file ) {\n                 var invalid = !file || !file.size || this.accept &&\n    \n                        // 如果名字中有后缀，才做后缀白名单处理。\n                        rExt.exec( file.name )!== null ? !this.accept.test( file.name ) : true;\n                return !invalid;\n            },\n    \n    \n            /**\n             * @event beforeFileQueued\n             * @param {File} file File对象\n             * @description 当文件被加入队列之前触发，此事件的handler返回值为`false`，则此文件不会被添加进入队列。\n             * @for  Uploader\n             */\n    \n            /**\n             * @event fileQueued\n             * @param {File} file File对象\n             * @description 当文件被加入队列以后触发。\n             * @for  Uploader\n             */\n    \n            _addFile: function( file ) {\n                var me = this;\n    \n                file = me._wrapFile( file );\n    \n                // 不过类型判断允许不允许，先派送 `beforeFileQueued`\n                if ( !me.owner.trigger( 'beforeFileQueued', file ) ) {\n                    return;\n                }\n    \n                // 类型不匹配，则派送错误事件，并返回。\n                if ( !me.acceptFile( file ) ) {\n                    me.owner.trigger( 'error', 'Q_TYPE_DENIED', file );\n                    return;\n                }\n    \n                me.queue.append( file );\n                me.owner.trigger( 'fileQueued', file );\n                return file;\n            },\n    \n            getFile: function( fileId ) {\n                return this.queue.getFile( fileId );\n            },\n    \n            /**\n             * @event filesQueued\n             * @param {File} files 数组，内容为原始File(lib/File）对象。\n             * @description 当一批文件添加进队列以后触发。\n             * @for  Uploader\n             */\n            \n            /**\n             * @property {Boolean} [auto=false]\n             * @namespace options\n             * @for Uploader\n             * @description 设置为 true 后，不需要手动调用上传，有文件选择即开始上传。\n             * \n             */\n    \n            /**\n             * @method addFiles\n             * @grammar addFiles( file ) => undefined\n             * @grammar addFiles( [file1, file2 ...] ) => undefined\n             * @param {Array of File or File} [files] Files 对象 数组\n             * @description 添加文件到队列\n             * @for  Uploader\n             */\n            addFile: function( files ) {\n                var me = this;\n    \n                if ( !files.length ) {\n                    files = [ files ];\n                }\n    \n                files = $.map( files, function( file ) {\n                    return me._addFile( file );\n                });\n    \n                me.owner.trigger( 'filesQueued', files );\n    \n                if ( me.options.auto ) {\n                    setTimeout(function() {\n                        me.request('start-upload');\n                    }, 20 );\n                }\n            },\n    \n            getStats: function() {\n                return this.stats;\n            },\n    \n            /**\n             * @event fileDequeued\n             * @param {File} file File对象\n             * @description 当文件被移除队列后触发。\n             * @for  Uploader\n             */\n    \n             /**\n             * @method removeFile\n             * @grammar removeFile( file ) => undefined\n             * @grammar removeFile( id ) => undefined\n             * @grammar removeFile( file, true ) => undefined\n             * @grammar removeFile( id, true ) => undefined\n             * @param {File|id} file File对象或这File对象的id\n             * @description 移除某一文件, 默认只会标记文件状态为已取消，如果第二个参数为 `true` 则会从 queue 中移除。\n             * @for  Uploader\n             * @example\n             *\n             * $li.on('click', '.remove-this', function() {\n             *     uploader.removeFile( file );\n             * })\n             */\n            removeFile: function( file, remove ) {\n                var me = this;\n    \n                file = file.id ? file : me.queue.getFile( file );\n    \n                this.request( 'cancel-file', file );\n    \n                if ( remove ) {\n                    this.queue.removeFile( file );\n                }\n            },\n    \n            /**\n             * @method getFiles\n             * @grammar getFiles() => Array\n             * @grammar getFiles( status1, status2, status... ) => Array\n             * @description 返回指定状态的文件集合，不传参数将返回所有状态的文件。\n             * @for  Uploader\n             * @example\n             * console.log( uploader.getFiles() );    // => all files\n             * console.log( uploader.getFiles('error') )    // => all error files.\n             */\n            getFiles: function() {\n                return this.queue.getFiles.apply( this.queue, arguments );\n            },\n    \n            fetchFile: function() {\n                return this.queue.fetch.apply( this.queue, arguments );\n            },\n    \n            /**\n             * @method retry\n             * @grammar retry() => undefined\n             * @grammar retry( file ) => undefined\n             * @description 重试上传，重试指定文件，或者从出错的文件开始重新上传。\n             * @for  Uploader\n             * @example\n             * function retry() {\n             *     uploader.retry();\n             * }\n             */\n            retry: function( file, noForceStart ) {\n                var me = this,\n                    files, i, len;\n    \n                if ( file ) {\n                    file = file.id ? file : me.queue.getFile( file );\n                    file.setStatus( Status.QUEUED );\n                    noForceStart || me.request('start-upload');\n                    return;\n                }\n    \n                files = me.queue.getFiles( Status.ERROR );\n                i = 0;\n                len = files.length;\n    \n                for ( ; i < len; i++ ) {\n                    file = files[ i ];\n                    file.setStatus( Status.QUEUED );\n                }\n    \n                me.request('start-upload');\n            },\n    \n            /**\n             * @method sort\n             * @grammar sort( fn ) => undefined\n             * @description 排序队列中的文件，在上传之前调整可以控制上传顺序。\n             * @for  Uploader\n             */\n            sortFiles: function() {\n                return this.queue.sort.apply( this.queue, arguments );\n            },\n    \n            /**\n             * @event reset\n             * @description 当 uploader 被重置的时候触发。\n             * @for  Uploader\n             */\n    \n            /**\n             * @method reset\n             * @grammar reset() => undefined\n             * @description 重置uploader。目前只重置了队列。\n             * @for  Uploader\n             * @example\n             * uploader.reset();\n             */\n            reset: function() {\n                this.owner.trigger('reset');\n                this.queue = new Queue();\n                this.stats = this.queue.stats;\n            },\n    \n            destroy: function() {\n                this.reset();\n                this.placeholder && this.placeholder.destroy();\n            }\n        });\n    \n    });\n    /**\n     * @fileOverview 添加获取Runtime相关信息的方法。\n     */\n    define('widgets/runtime',[\n        'uploader',\n        'runtime/runtime',\n        'widgets/widget'\n    ], function( Uploader, Runtime ) {\n    \n        Uploader.support = function() {\n            return Runtime.hasRuntime.apply( Runtime, arguments );\n        };\n    \n        /**\n         * @property {Object} [runtimeOrder=html5,flash]\n         * @namespace options\n         * @for Uploader\n         * @description 指定运行时启动顺序。默认会想尝试 html5 是否支持，如果支持则使用 html5, 否则则使用 flash.\n         *\n         * 可以将此值设置成 `flash`，来强制使用 flash 运行时。\n         */\n    \n        return Uploader.register({\n            name: 'runtime',\n    \n            init: function() {\n                if ( !this.predictRuntimeType() ) {\n                    throw Error('Runtime Error');\n                }\n            },\n    \n            /**\n             * 预测Uploader将采用哪个`Runtime`\n             * @grammar predictRuntimeType() => String\n             * @method predictRuntimeType\n             * @for  Uploader\n             */\n            predictRuntimeType: function() {\n                var orders = this.options.runtimeOrder || Runtime.orders,\n                    type = this.type,\n                    i, len;\n    \n                if ( !type ) {\n                    orders = orders.split( /\\s*,\\s*/g );\n    \n                    for ( i = 0, len = orders.length; i < len; i++ ) {\n                        if ( Runtime.hasRuntime( orders[ i ] ) ) {\n                            this.type = type = orders[ i ];\n                            break;\n                        }\n                    }\n                }\n    \n                return type;\n            }\n        });\n    });\n    /**\n     * @fileOverview Transport\n     */\n    define('lib/transport',[\n        'base',\n        'runtime/client',\n        'mediator'\n    ], function( Base, RuntimeClient, Mediator ) {\n    \n        var $ = Base.$;\n    \n        function Transport( opts ) {\n            var me = this;\n    \n            opts = me.options = $.extend( true, {}, Transport.options, opts || {} );\n            RuntimeClient.call( this, 'Transport' );\n    \n            this._blob = null;\n            this._formData = opts.formData || {};\n            this._headers = opts.headers || {};\n    \n            this.on( 'progress', this._timeout );\n            this.on( 'load error', function() {\n                me.trigger( 'progress', 1 );\n                clearTimeout( me._timer );\n            });\n        }\n    \n        Transport.options = {\n            server: '',\n            method: 'POST',\n    \n            // 跨域时，是否允许携带cookie, 只有html5 runtime才有效\n            withCredentials: false,\n            fileVal: 'file',\n            timeout: 2 * 60 * 1000,    // 2分钟\n            formData: {},\n            headers: {},\n            sendAsBinary: false\n        };\n    \n        $.extend( Transport.prototype, {\n    \n            // 添加Blob, 只能添加一次，最后一次有效。\n            appendBlob: function( key, blob, filename ) {\n                var me = this,\n                    opts = me.options;\n    \n                if ( me.getRuid() ) {\n                    me.disconnectRuntime();\n                }\n    \n                // 连接到blob归属的同一个runtime.\n                me.connectRuntime( blob.ruid, function() {\n                    me.exec('init');\n                });\n    \n                me._blob = blob;\n                opts.fileVal = key || opts.fileVal;\n                opts.filename = filename || opts.filename;\n\n            },\n    \n            // 添加其他字段\n            append: function( key, value ) {\n                if ( typeof key === 'object' ) {\n                    $.extend( this._formData, key );\n                } else {\n                    this._formData[ key ] = value;\n                }\n            },\n    \n            setRequestHeader: function( key, value ) {\n                if ( typeof key === 'object' ) {\n                    $.extend( this._headers, key );\n                } else {\n                    this._headers[ key ] = value;\n                }\n            },\n    \n            send: function( method ) {\n                this.exec( 'send', method );\n                this._timeout();\n            },\n    \n            abort: function() {\n                clearTimeout( this._timer );\n                return this.exec('abort');\n            },\n    \n            destroy: function() {\n                this.trigger('destroy');\n                this.off();\n                this.exec('destroy');\n                this.disconnectRuntime();\n            },\n    \n            getResponse: function() {\n                return this.exec('getResponse');\n            },\n    \n            getResponseAsJson: function() {\n                return this.exec('getResponseAsJson');\n            },\n    \n            getStatus: function() {\n                return this.exec('getStatus');\n            },\n    \n            _timeout: function() {\n                var me = this,\n                    duration = me.options.timeout;\n    \n                if ( !duration ) {\n                    return;\n                }\n    \n                clearTimeout( me._timer );\n                me._timer = setTimeout(function() {\n                    me.abort();\n                    me.trigger( 'error', 'timeout' );\n                }, duration );\n            }\n    \n        });\n    \n        // 让Transport具备事件功能。\n        Mediator.installTo( Transport.prototype );\n    \n        return Transport;\n    });\n    /**\n     * @fileOverview 负责文件上传相关。\n     */\n    define('widgets/upload',[\n        'base',\n        'uploader',\n        'file',\n        'lib/transport',\n        'widgets/widget'\n    ], function( Base, Uploader, WUFile, Transport ) {\n    \n        var $ = Base.$,\n            isPromise = Base.isPromise,\n            Status = WUFile.Status;\n    \n        // 添加默认配置项\n        $.extend( Uploader.options, {\n    \n    \n            /**\n             * @property {Boolean} [prepareNextFile=false]\n             * @namespace options\n             * @for Uploader\n             * @description 是否允许在文件传输时提前把下一个文件准备好。\n             * 对于一个文件的准备工作比较耗时，比如图片压缩，md5序列化。\n             * 如果能提前在当前文件传输期处理，可以节省总体耗时。\n             */\n            prepareNextFile: false,\n    \n            /**\n             * @property {Boolean} [chunked=false]\n             * @namespace options\n             * @for Uploader\n             * @description 是否要分片处理大文件上传。\n             */\n            chunked: false,\n    \n            /**\n             * @property {Boolean} [chunkSize=5242880]\n             * @namespace options\n             * @for Uploader\n             * @description 如果要分片，分多大一片？ 默认大小为5M.\n             */\n            chunkSize: 5 * 1024 * 1024,\n    \n            /**\n             * @property {Boolean} [chunkRetry=2]\n             * @namespace options\n             * @for Uploader\n             * @description 如果某个分片由于网络问题出错，允许自动重传多少次？\n             */\n            chunkRetry: 2,\n    \n            /**\n             * @property {Boolean} [threads=3]\n             * @namespace options\n             * @for Uploader\n             * @description 上传并发数。允许同时最大上传进程数。\n             */\n            threads: 3,\n    \n    \n            /**\n             * @property {Object} [formData={}]\n             * @namespace options\n             * @for Uploader\n             * @description 文件上传请求的参数表，每次发送都会发送此对象中的参数。\n             */\n            formData: {}\n    \n            /**\n             * @property {Object} [fileVal='file']\n             * @namespace options\n             * @for Uploader\n             * @description 设置文件上传域的name。\n             */\n    \n            /**\n             * @property {Object} [method='POST']\n             * @namespace options\n             * @for Uploader\n             * @description 文件上传方式，`POST`或者`GET`。\n             */\n    \n            /**\n             * @property {Object} [sendAsBinary=false]\n             * @namespace options\n             * @for Uploader\n             * @description 是否已二进制的流的方式发送文件，这样整个上传内容`php://input`都为文件内容，\n             * 其他参数在$_GET数组中。\n             */\n        });\n    \n        // 负责将文件切片。\n        function CuteFile( file, chunkSize ) {\n            var pending = [],\n                blob = file.source,\n                total = blob.size,\n                chunks = chunkSize ? Math.ceil( total / chunkSize ) : 1,\n                start = 0,\n                index = 0,\n                len, api;\n    \n            api = {\n                file: file,\n    \n                has: function() {\n                    return !!pending.length;\n                },\n    \n                shift: function() {\n                    return pending.shift();\n                },\n    \n                unshift: function( block ) {\n                    pending.unshift( block );\n                }\n            };\n    \n            while ( index < chunks ) {\n                len = Math.min( chunkSize, total - start );\n    \n                pending.push({\n                    file: file,\n                    start: start,\n                    end: chunkSize ? (start + len) : total,\n                    total: total,\n                    chunks: chunks,\n                    chunk: index++,\n                    cuted: api\n                });\n                start += len;\n            }\n    \n            file.blocks = pending.concat();\n            file.remaning = pending.length;\n    \n            return api;\n        }\n    \n        Uploader.register({\n            name: 'upload',\n    \n            init: function() {\n                var owner = this.owner,\n                    me = this;\n    \n                this.runing = false;\n                this.progress = false;\n    \n                owner\n                    .on( 'startUpload', function() {\n                        me.progress = true;\n                    })\n                    .on( 'uploadFinished', function() {\n                        me.progress = false;\n                    });\n    \n                // 记录当前正在传的数据，跟threads相关\n                this.pool = [];\n    \n                // 缓存分好片的文件。\n                this.stack = [];\n    \n                // 缓存即将上传的文件。\n                this.pending = [];\n    \n                // 跟踪还有多少分片在上传中但是没有完成上传。\n                this.remaning = 0;\n                this.__tick = Base.bindFn( this._tick, this );\n    \n                owner.on( 'uploadComplete', function( file ) {\n    \n                    // 把其他块取消了。\n                    file.blocks && $.each( file.blocks, function( _, v ) {\n                        v.transport && (v.transport.abort(), v.transport.destroy());\n                        delete v.transport;\n                    });\n    \n                    delete file.blocks;\n                    delete file.remaning;\n                });\n            },\n    \n            reset: function() {\n                this.request( 'stop-upload', true );\n                this.runing = false;\n                this.pool = [];\n                this.stack = [];\n                this.pending = [];\n                this.remaning = 0;\n                this._trigged = false;\n                this._promise = null;\n            },\n    \n            /**\n             * @event startUpload\n             * @description 当开始上传流程时触发。\n             * @for  Uploader\n             */\n    \n            /**\n             * 开始上传。此方法可以从初始状态调用开始上传流程，也可以从暂停状态调用，继续上传流程。\n             *\n             * 可以指定开始某一个文件。\n             * @grammar upload() => undefined\n             * @grammar upload( file | fileId) => undefined\n             * @method upload\n             * @for  Uploader\n             */\n            startUpload: function(file) {\n                var me = this;\n    \n                // 移出invalid的文件\n                $.each( me.request( 'get-files', Status.INVALID ), function() {\n                    me.request( 'remove-file', this );\n                });\n    \n                // 如果指定了开始某个文件，则只开始指定文件。\n                if ( file ) {\n                    file = file.id ? file : me.request( 'get-file', file );\n    \n                    if (file.getStatus() === Status.INTERRUPT) {\n                        $.each( me.pool, function( _, v ) {\n    \n                            // 之前暂停过。\n                            if (v.file !== file) {\n                                return;\n                            }\n    \n                            v.transport && v.transport.send();\n                        });\n    \n                        file.setStatus( Status.QUEUED );\n                    } else if (file.getStatus() === Status.PROGRESS) {\n                        return;\n                    } else {\n                        file.setStatus( Status.QUEUED );\n                    }\n                } else {\n                    $.each( me.request( 'get-files', [ Status.INITED ] ), function() {\n                        this.setStatus( Status.QUEUED );\n                    });\n                }\n    \n                if ( me.runing ) {\n                    return;\n                }\n    \n                me.runing = true;\n    \n                var files = [];\n    \n                // 如果有暂停的，则续传\n                $.each( me.pool, function( _, v ) {\n                    var file = v.file;\n    \n                    if ( file.getStatus() === Status.INTERRUPT ) {\n                        files.push(file);\n                        me._trigged = false;\n                        v.transport && v.transport.send();\n                    }\n                });\n    \n                var file;\n                while ( (file = files.shift()) ) {\n                    file.setStatus( Status.PROGRESS );\n                }\n    \n                file || $.each( me.request( 'get-files',\n                        Status.INTERRUPT ), function() {\n                    this.setStatus( Status.PROGRESS );\n                });\n    \n                me._trigged = false;\n                Base.nextTick( me.__tick );\n                me.owner.trigger('startUpload');\n            },\n    \n            /**\n             * @event stopUpload\n             * @description 当开始上传流程暂停时触发。\n             * @for  Uploader\n             */\n    \n            /**\n             * 暂停上传。第一个参数为是否中断上传当前正在上传的文件。\n             *\n             * 如果第一个参数是文件，则只暂停指定文件。\n             * @grammar stop() => undefined\n             * @grammar stop( true ) => undefined\n             * @grammar stop( file ) => undefined\n             * @method stop\n             * @for  Uploader\n             */\n            stopUpload: function( file, interrupt ) {\n                var me = this;\n    \n                if (file === true) {\n                    interrupt = file;\n                    file = null;\n                }\n    \n                if ( me.runing === false ) {\n                    return;\n                }\n    \n                // 如果只是暂停某个文件。\n                if ( file ) {\n                    file = file.id ? file : me.request( 'get-file', file );\n    \n                    if ( file.getStatus() !== Status.PROGRESS &&\n                            file.getStatus() !== Status.QUEUED ) {\n                        return;\n                    }\n    \n                    file.setStatus( Status.INTERRUPT );\n                    $.each( me.pool, function( _, v ) {\n    \n                        // 只 abort 指定的文件。\n                        if (v.file !== file) {\n                            return;\n                        }\n    \n                        v.transport && v.transport.abort();\n                        me._putback(v);\n                        me._popBlock(v);\n                    });\n    \n                    return Base.nextTick( me.__tick );\n                }\n    \n                me.runing = false;\n    \n                if (this._promise && this._promise.file) {\n                    this._promise.file.setStatus( Status.INTERRUPT );\n                }\n    \n                interrupt && $.each( me.pool, function( _, v ) {\n                    v.transport && v.transport.abort();\n                    v.file.setStatus( Status.INTERRUPT );\n                });\n    \n                me.owner.trigger('stopUpload');\n            },\n    \n            /**\n             * @method cancelFile\n             * @grammar cancelFile( file ) => undefined\n             * @grammar cancelFile( id ) => undefined\n             * @param {File|id} file File对象或这File对象的id\n             * @description 标记文件状态为已取消, 同时将中断文件传输。\n             * @for  Uploader\n             * @example\n             *\n             * $li.on('click', '.remove-this', function() {\n             *     uploader.cancelFile( file );\n             * })\n             */\n            cancelFile: function( file ) {\n                file = file.id ? file : this.request( 'get-file', file );\n    \n                // 如果正在上传。\n                file.blocks && $.each( file.blocks, function( _, v ) {\n                    var _tr = v.transport;\n    \n                    if ( _tr ) {\n                        _tr.abort();\n                        _tr.destroy();\n                        delete v.transport;\n                    }\n                });\n    \n                file.setStatus( Status.CANCELLED );\n                this.owner.trigger( 'fileDequeued', file );\n            },\n    \n            /**\n             * 判断`Uplaode`r是否正在上传中。\n             * @grammar isInProgress() => Boolean\n             * @method isInProgress\n             * @for  Uploader\n             */\n            isInProgress: function() {\n                return !!this.progress;\n            },\n    \n            _getStats: function() {\n                return this.request('get-stats');\n            },\n    \n            /**\n             * 掉过一个文件上传，直接标记指定文件为已上传状态。\n             * @grammar skipFile( file ) => undefined\n             * @method skipFile\n             * @for  Uploader\n             */\n            skipFile: function( file, status ) {\n                file = file.id ? file : this.request( 'get-file', file );\n    \n                file.setStatus( status || Status.COMPLETE );\n                file.skipped = true;\n    \n                // 如果正在上传。\n                file.blocks && $.each( file.blocks, function( _, v ) {\n                    var _tr = v.transport;\n    \n                    if ( _tr ) {\n                        _tr.abort();\n                        _tr.destroy();\n                        delete v.transport;\n                    }\n                });\n    \n                this.owner.trigger( 'uploadSkip', file );\n            },\n    \n            /**\n             * @event uploadFinished\n             * @description 当所有文件上传结束时触发。\n             * @for  Uploader\n             */\n            _tick: function() {\n                var me = this,\n                    opts = me.options,\n                    fn, val;\n    \n                // 上一个promise还没有结束，则等待完成后再执行。\n                if ( me._promise ) {\n                    return me._promise.always( me.__tick );\n                }\n    \n                // 还有位置，且还有文件要处理的话。\n                if ( me.pool.length < opts.threads && (val = me._nextBlock()) ) {\n                    me._trigged = false;\n    \n                    fn = function( val ) {\n                        me._promise = null;\n    \n                        // 有可能是reject过来的，所以要检测val的类型。\n                        val && val.file && me._startSend( val );\n                        Base.nextTick( me.__tick );\n                    };\n    \n                    me._promise = isPromise( val ) ? val.always( fn ) : fn( val );\n    \n                // 没有要上传的了，且没有正在传输的了。\n                } else if ( !me.remaning && !me._getStats().numOfQueue &&\n                    !me._getStats().numofInterrupt ) {\n                    me.runing = false;\n    \n                    me._trigged || Base.nextTick(function() {\n                        me.owner.trigger('uploadFinished');\n                    });\n                    me._trigged = true;\n                }\n            },\n    \n            _putback: function(block) {\n                var idx;\n    \n                block.cuted.unshift(block);\n                idx = this.stack.indexOf(block.cuted);\n    \n                if (!~idx) {\n                    this.stack.unshift(block.cuted);\n                }\n            },\n    \n            _getStack: function() {\n                var i = 0,\n                    act;\n    \n                while ( (act = this.stack[ i++ ]) ) {\n                    if ( act.has() && act.file.getStatus() === Status.PROGRESS ) {\n                        return act;\n                    } else if (!act.has() ||\n                            act.file.getStatus() !== Status.PROGRESS &&\n                            act.file.getStatus() !== Status.INTERRUPT ) {\n    \n                        // 把已经处理完了的，或者，状态为非 progress（上传中）、\n                        // interupt（暂停中） 的移除。\n                        this.stack.splice( --i, 1 );\n                    }\n                }\n    \n                return null;\n            },\n    \n            _nextBlock: function() {\n                var me = this,\n                    opts = me.options,\n                    act, next, done, preparing;\n    \n                // 如果当前文件还有没有需要传输的，则直接返回剩下的。\n                if ( (act = this._getStack()) ) {\n    \n                    // 是否提前准备下一个文件\n                    if ( opts.prepareNextFile && !me.pending.length ) {\n                        me._prepareNextFile();\n                    }\n    \n                    return act.shift();\n    \n                // 否则，如果正在运行，则准备下一个文件，并等待完成后返回下个分片。\n                } else if ( me.runing ) {\n    \n                    // 如果缓存中有，则直接在缓存中取，没有则去queue中取。\n                    if ( !me.pending.length && me._getStats().numOfQueue ) {\n                        me._prepareNextFile();\n                    }\n    \n                    next = me.pending.shift();\n                    done = function( file ) {\n                        if ( !file ) {\n                            return null;\n                        }\n    \n                        act = CuteFile( file, opts.chunked ? opts.chunkSize : 0 );\n                        me.stack.push(act);\n                        return act.shift();\n                    };\n    \n                    // 文件可能还在prepare中，也有可能已经完全准备好了。\n                    if ( isPromise( next) ) {\n                        preparing = next.file;\n                        next = next[ next.pipe ? 'pipe' : 'then' ]( done );\n                        next.file = preparing;\n                        return next;\n                    }\n    \n                    return done( next );\n                }\n            },\n    \n    \n            /**\n             * @event uploadStart\n             * @param {File} file File对象\n             * @description 某个文件开始上传前触发，一个文件只会触发一次。\n             * @for  Uploader\n             */\n            _prepareNextFile: function() {\n                var me = this,\n                    file = me.request('fetch-file'),\n                    pending = me.pending,\n                    promise;\n    \n                if ( file ) {\n                    promise = me.request( 'before-send-file', file, function() {\n    \n                        // 有可能文件被skip掉了。文件被skip掉后，状态坑定不是Queued.\n                        if ( file.getStatus() === Status.PROGRESS ||\n                            file.getStatus() === Status.INTERRUPT ) {\n                            return file;\n                        }\n    \n                        return me._finishFile( file );\n                    });\n    \n                    me.owner.trigger( 'uploadStart', file );\n                    file.setStatus( Status.PROGRESS );\n    \n                    promise.file = file;\n    \n                    // 如果还在pending中，则替换成文件本身。\n                    promise.done(function() {\n                        var idx = $.inArray( promise, pending );\n    \n                        ~idx && pending.splice( idx, 1, file );\n                    });\n    \n                    // befeore-send-file的钩子就有错误发生。\n                    promise.fail(function( reason ) {\n                        file.setStatus( Status.ERROR, reason );\n                        me.owner.trigger( 'uploadError', file, reason );\n                        me.owner.trigger( 'uploadComplete', file );\n                    });\n    \n                    pending.push( promise );\n                }\n            },\n    \n            // 让出位置了，可以让其他分片开始上传\n            _popBlock: function( block ) {\n                var idx = $.inArray( block, this.pool );\n    \n                this.pool.splice( idx, 1 );\n                block.file.remaning--;\n                this.remaning--;\n            },\n    \n            // 开始上传，可以被掉过。如果promise被reject了，则表示跳过此分片。\n            _startSend: function( block ) {\n                var me = this,\n                    file = block.file,\n                    promise;\n    \n                // 有可能在 before-send-file 的 promise 期间改变了文件状态。\n                // 如：暂停，取消\n                // 我们不能中断 promise, 但是可以在 promise 完后，不做上传操作。\n                if ( file.getStatus() !== Status.PROGRESS ) {\n    \n                    // 如果是中断，则还需要放回去。\n                    if (file.getStatus() === Status.INTERRUPT) {\n                        me._putback(block);\n                    }\n    \n                    return;\n                }\n    \n                me.pool.push( block );\n                me.remaning++;\n    \n                // 如果没有分片，则直接使用原始的。\n                // 不会丢失content-type信息。\n                block.blob = block.chunks === 1 ? file.source :\n                        file.source.slice( block.start, block.end );\n    \n                // hook, 每个分片发送之前可能要做些异步的事情。\n                promise = me.request( 'before-send', block, function() {\n    \n                    // 有可能文件已经上传出错了，所以不需要再传输了。\n                    if ( file.getStatus() === Status.PROGRESS ) {\n                        me._doSend( block );\n                    } else {\n                        me._popBlock( block );\n                        Base.nextTick( me.__tick );\n                    }\n                });\n    \n                // 如果为fail了，则跳过此分片。\n                promise.fail(function() {\n                    if ( file.remaning === 1 ) {\n                        me._finishFile( file ).always(function() {\n                            block.percentage = 1;\n                            me._popBlock( block );\n                            me.owner.trigger( 'uploadComplete', file );\n                            Base.nextTick( me.__tick );\n                        });\n                    } else {\n                        block.percentage = 1;\n                        me.updateFileProgress( file );\n                        me._popBlock( block );\n                        Base.nextTick( me.__tick );\n                    }\n                });\n            },\n    \n    \n            /**\n             * @event uploadBeforeSend\n             * @param {Object} object\n             * @param {Object} data 默认的上传参数，可以扩展此对象来控制上传参数。\n             * @param {Object} headers 可以扩展此对象来控制上传头部。\n             * @description 当某个文件的分块在发送前触发，主要用来询问是否要添加附带参数，大文件在开起分片上传的前提下此事件可能会触发多次。\n             * @for  Uploader\n             */\n    \n            /**\n             * @event uploadAccept\n             * @param {Object} object\n             * @param {Object} ret 服务端的返回数据，json格式，如果服务端不是json格式，从ret._raw中取数据，自行解析。\n             * @description 当某个文件上传到服务端响应后，会派送此事件来询问服务端响应是否有效。如果此事件handler返回值为`false`, 则此文件将派送`server`类型的`uploadError`事件。\n             * @for  Uploader\n             */\n    \n            /**\n             * @event uploadProgress\n             * @param {File} file File对象\n             * @param {Number} percentage 上传进度\n             * @description 上传过程中触发，携带上传进度。\n             * @for  Uploader\n             */\n    \n    \n            /**\n             * @event uploadError\n             * @param {File} file File对象\n             * @param {String} reason 出错的code\n             * @description 当文件上传出错时触发。\n             * @for  Uploader\n             */\n    \n            /**\n             * @event uploadSuccess\n             * @param {File} file File对象\n             * @param {Object} response 服务端返回的数据\n             * @description 当文件上传成功时触发。\n             * @for  Uploader\n             */\n    \n            /**\n             * @event uploadComplete\n             * @param {File} [file] File对象\n             * @description 不管成功或者失败，文件上传完成时触发。\n             * @for  Uploader\n             */\n    \n            // 做上传操作。\n            _doSend: function( block ) {\n                var me = this,\n                    owner = me.owner,\n                    opts = me.options,\n                    file = block.file,\n                    tr = new Transport( opts ),\n                    data = $.extend({}, opts.formData ),\n                    headers = $.extend({}, opts.headers ),\n                    requestAccept, ret;\n    \n                block.transport = tr;\n    \n                tr.on( 'destroy', function() {\n                    delete block.transport;\n                    me._popBlock( block );\n                    Base.nextTick( me.__tick );\n                });\n    \n                // 广播上传进度。以文件为单位。\n                tr.on( 'progress', function( percentage ) {\n                    block.percentage = percentage;\n                    me.updateFileProgress( file );\n                });\n    \n                // 用来询问，是否返回的结果是有错误的。\n                requestAccept = function( reject ) {\n                    var fn;\n    \n                    ret = tr.getResponseAsJson() || {};\n                    ret._raw = tr.getResponse();\n                    fn = function( value ) {\n                        reject = value;\n                    };\n    \n                    // 服务端响应了，不代表成功了，询问是否响应正确。\n                    if ( !owner.trigger( 'uploadAccept', block, ret, fn ) ) {\n                        reject = reject || 'server';\n                    }\n    \n                    return reject;\n                };\n    \n                // 尝试重试，然后广播文件上传出错。\n                tr.on( 'error', function( type, flag ) {\n                    block.retried = block.retried || 0;\n    \n                    // 自动重试\n                    if ( block.chunks > 1 && ~'http,abort'.indexOf( type ) &&\n                            block.retried < opts.chunkRetry ) {\n    \n                        block.retried++;\n                        tr.send();\n    \n                    } else {\n    \n                        // http status 500 ~ 600\n                        if ( !flag && type === 'server' ) {\n                            type = requestAccept( type );\n                        }\n    \n                        file.setStatus( Status.ERROR, type );\n                        owner.trigger( 'uploadError', file, type );\n                        owner.trigger( 'uploadComplete', file );\n                    }\n                });\n    \n                // 上传成功\n                tr.on( 'load', function() {\n                    var reason;\n    \n                    // 如果非预期，转向上传出错。\n                    if ( (reason = requestAccept()) ) {\n                        tr.trigger( 'error', reason, true );\n                        return;\n                    }\n    \n                    // 全部上传完成。\n                    if ( file.remaning === 1 ) {\n                        me._finishFile( file, ret );\n                    } else {\n                        tr.destroy();\n                    }\n                });\n    \n                // 配置默认的上传字段。\n                data = $.extend( data, {\n                    id: file.id,\n                    name: file.name,\n                    type: file.type,\n                    lastModifiedDate: file.lastModifiedDate,\n                    size: file.size\n                });\n    \n                block.chunks > 1 && $.extend( data, {\n                    chunks: block.chunks,\n                    chunk: block.chunk\n                });\n    \n                // 在发送之间可以添加字段什么的。。。\n                // 如果默认的字段不够使用，可以通过监听此事件来扩展\n                owner.trigger( 'uploadBeforeSend', block, data, headers );\n    \n                // 开始发送。\n                tr.appendBlob( opts.fileVal, block.blob, file.name );\n                tr.append( data );\n                tr.setRequestHeader( headers );\n                tr.send();\n            },\n    \n            // 完成上传。\n            _finishFile: function( file, ret, hds ) {\n                var owner = this.owner;\n    \n                return owner\n                        .request( 'after-send-file', arguments, function() {\n                            file.setStatus( Status.COMPLETE );\n                            owner.trigger( 'uploadSuccess', file, ret, hds );\n                        })\n                        .fail(function( reason ) {\n    \n                            // 如果外部已经标记为invalid什么的，不再改状态。\n                            if ( file.getStatus() === Status.PROGRESS ) {\n                                file.setStatus( Status.ERROR, reason );\n                            }\n    \n                            owner.trigger( 'uploadError', file, reason );\n                        })\n                        .always(function() {\n                            owner.trigger( 'uploadComplete', file );\n                        });\n            },\n    \n            updateFileProgress: function(file) {\n                var totalPercent = 0,\n                    uploaded = 0;\n    \n                if (!file.blocks) {\n                    return;\n                }\n    \n                $.each( file.blocks, function( _, v ) {\n                    uploaded += (v.percentage || 0) * (v.end - v.start);\n                });\n    \n                totalPercent = uploaded / file.size;\n                this.owner.trigger( 'uploadProgress', file, totalPercent || 0 );\n            }\n    \n        });\n    });\n    /**\n     * @fileOverview 各种验证，包括文件总大小是否超出、单文件是否超出和文件是否重复。\n     */\n    \n    define('widgets/validator',[\n        'base',\n        'uploader',\n        'file',\n        'widgets/widget'\n    ], function( Base, Uploader, WUFile ) {\n    \n        var $ = Base.$,\n            validators = {},\n            api;\n    \n        /**\n         * @event error\n         * @param {String} type 错误类型。\n         * @description 当validate不通过时，会以派送错误事件的形式通知调用者。通过`upload.on('error', handler)`可以捕获到此类错误，目前有以下错误会在特定的情况下派送错来。\n         *\n         * * `Q_EXCEED_NUM_LIMIT` 在设置了`fileNumLimit`且尝试给`uploader`添加的文件数量超出这个值时派送。\n         * * `Q_EXCEED_SIZE_LIMIT` 在设置了`Q_EXCEED_SIZE_LIMIT`且尝试给`uploader`添加的文件总大小超出这个值时派送。\n         * * `Q_TYPE_DENIED` 当文件类型不满足时触发。。\n         * @for  Uploader\n         */\n    \n        // 暴露给外面的api\n        api = {\n    \n            // 添加验证器\n            addValidator: function( type, cb ) {\n                validators[ type ] = cb;\n            },\n    \n            // 移除验证器\n            removeValidator: function( type ) {\n                delete validators[ type ];\n            }\n        };\n    \n        // 在Uploader初始化的时候启动Validators的初始化\n        Uploader.register({\n            name: 'validator',\n    \n            init: function() {\n                var me = this;\n                Base.nextTick(function() {\n                    $.each( validators, function() {\n                        this.call( me.owner );\n                    });\n                });\n            }\n        });\n    \n        /**\n         * @property {int} [fileNumLimit=undefined]\n         * @namespace options\n         * @for Uploader\n         * @description 验证文件总数量, 超出则不允许加入队列。\n         */\n        api.addValidator( 'fileNumLimit', function() {\n            var uploader = this,\n                opts = uploader.options,\n                count = 0,\n                max = parseInt( opts.fileNumLimit, 10 ),\n                flag = true;\n    \n            if ( !max ) {\n                return;\n            }\n    \n            uploader.on( 'beforeFileQueued', function( file ) {\n    \n                if ( count >= max && flag ) {\n                    flag = false;\n                    this.trigger( 'error', 'Q_EXCEED_NUM_LIMIT', max, file );\n                    setTimeout(function() {\n                        flag = true;\n                    }, 1 );\n                }\n    \n                return count >= max ? false : true;\n            });\n    \n            uploader.on( 'fileQueued', function() {\n                count++;\n            });\n    \n            uploader.on( 'fileDequeued', function() {\n                count--;\n            });\n    \n            uploader.on( 'reset', function() {\n                count = 0;\n            });\n        });\n    \n    \n        /**\n         * @property {int} [fileSizeLimit=undefined]\n         * @namespace options\n         * @for Uploader\n         * @description 验证文件总大小是否超出限制, 超出则不允许加入队列。\n         */\n        api.addValidator( 'fileSizeLimit', function() {\n            var uploader = this,\n                opts = uploader.options,\n                count = 0,\n                max = parseInt( opts.fileSizeLimit, 10 ),\n                flag = true;\n    \n            if ( !max ) {\n                return;\n            }\n    \n            uploader.on( 'beforeFileQueued', function( file ) {\n                var invalid = count + file.size > max;\n    \n                if ( invalid && flag ) {\n                    flag = false;\n                    this.trigger( 'error', 'Q_EXCEED_SIZE_LIMIT', max, file );\n                    setTimeout(function() {\n                        flag = true;\n                    }, 1 );\n                }\n    \n                return invalid ? false : true;\n            });\n    \n            uploader.on( 'fileQueued', function( file ) {\n                count += file.size;\n            });\n    \n            uploader.on( 'fileDequeued', function( file ) {\n                count -= file.size;\n            });\n    \n            uploader.on( 'reset', function() {\n                count = 0;\n            });\n        });\n    \n        /**\n         * @property {int} [fileSingleSizeLimit=undefined]\n         * @namespace options\n         * @for Uploader\n         * @description 验证单个文件大小是否超出限制, 超出则不允许加入队列。\n         */\n        api.addValidator( 'fileSingleSizeLimit', function() {\n            var uploader = this,\n                opts = uploader.options,\n                max = opts.fileSingleSizeLimit;\n    \n            if ( !max ) {\n                return;\n            }\n    \n            uploader.on( 'beforeFileQueued', function( file ) {\n    \n                if ( file.size > max ) {\n                    file.setStatus( WUFile.Status.INVALID, 'exceed_size' );\n                    this.trigger( 'error', 'F_EXCEED_SIZE', max, file );\n                    return false;\n                }\n    \n            });\n    \n        });\n    \n        /**\n         * @property {Boolean} [duplicate=undefined]\n         * @namespace options\n         * @for Uploader\n         * @description 去重， 根据文件名字、文件大小和最后修改时间来生成hash Key.\n         */\n        api.addValidator( 'duplicate', function() {\n            var uploader = this,\n                opts = uploader.options,\n                mapping = {};\n    \n            if ( opts.duplicate ) {\n                return;\n            }\n    \n            function hashString( str ) {\n                var hash = 0,\n                    i = 0,\n                    len = str.length,\n                    _char;\n    \n                for ( ; i < len; i++ ) {\n                    _char = str.charCodeAt( i );\n                    hash = _char + (hash << 6) + (hash << 16) - hash;\n                }\n    \n                return hash;\n            }\n    \n            uploader.on( 'beforeFileQueued', function( file ) {\n                var hash = file.__hash || (file.__hash = hashString( file.name +\n                        file.size + file.lastModifiedDate ));\n    \n                // 已经重复了\n                if ( mapping[ hash ] ) {\n                    this.trigger( 'error', 'F_DUPLICATE', file );\n                    return false;\n                }\n            });\n    \n            uploader.on( 'fileQueued', function( file ) {\n                var hash = file.__hash;\n    \n                hash && (mapping[ hash ] = true);\n            });\n    \n            uploader.on( 'fileDequeued', function( file ) {\n                var hash = file.__hash;\n    \n                hash && (delete mapping[ hash ]);\n            });\n    \n            uploader.on( 'reset', function() {\n                mapping = {};\n            });\n        });\n    \n        return api;\n    });\n    \n    /**\n     * @fileOverview Md5\n     */\n    define('lib/md5',[\n        'runtime/client',\n        'mediator'\n    ], function( RuntimeClient, Mediator ) {\n    \n        function Md5() {\n            RuntimeClient.call( this, 'Md5' );\n        }\n    \n        // 让 Md5 具备事件功能。\n        Mediator.installTo( Md5.prototype );\n    \n        Md5.prototype.loadFromBlob = function( blob ) {\n            var me = this;\n    \n            if ( me.getRuid() ) {\n                me.disconnectRuntime();\n            }\n    \n            // 连接到blob归属的同一个runtime.\n            me.connectRuntime( blob.ruid, function() {\n                me.exec('init');\n                me.exec( 'loadFromBlob', blob );\n            });\n        };\n    \n        Md5.prototype.getResult = function() {\n            return this.exec('getResult');\n        };\n    \n        return Md5;\n    });\n    /**\n     * @fileOverview 图片操作, 负责预览图片和上传前压缩图片\n     */\n    define('widgets/md5',[\n        'base',\n        'uploader',\n        'lib/md5',\n        'lib/blob',\n        'widgets/widget'\n    ], function( Base, Uploader, Md5, Blob ) {\n    \n        return Uploader.register({\n            name: 'md5',\n    \n    \n            /**\n             * 计算文件 md5 值，返回一个 promise 对象，可以监听 progress 进度。\n             *\n             *\n             * @method md5File\n             * @grammar md5File( file[, start[, end]] ) => promise\n             * @for Uploader\n             * @example\n             *\n             * uploader.on( 'fileQueued', function( file ) {\n             *     var $li = ...;\n             *\n             *     uploader.md5File( file )\n             *\n             *         // 及时显示进度\n             *         .progress(function(percentage) {\n             *             console.log('Percentage:', percentage);\n             *         })\n             *\n             *         // 完成\n             *         .then(function(val) {\n             *             console.log('md5 result:', val);\n             *         });\n             *\n             * });\n             */\n            md5File: function( file, start, end ) {\n                var md5 = new Md5(),\n                    deferred = Base.Deferred(),\n                    blob = (file instanceof Blob) ? file :\n                        this.request( 'get-file', file ).source;\n    \n                md5.on( 'progress load', function( e ) {\n                    e = e || {};\n                    deferred.notify( e.total ? e.loaded / e.total : 1 );\n                });\n    \n                md5.on( 'complete', function() {\n                    deferred.resolve( md5.getResult() );\n                });\n    \n                md5.on( 'error', function( reason ) {\n                    deferred.reject( reason );\n                });\n    \n                if ( arguments.length > 1 ) {\n                    start = start || 0;\n                    end = end || 0;\n                    start < 0 && (start = blob.size + start);\n                    end < 0 && (end = blob.size + end);\n                    end = Math.min( end, blob.size );\n                    blob = blob.slice( start, end );\n                }\n    \n                md5.loadFromBlob( blob );\n    \n                return deferred.promise();\n            }\n        });\n    });\n    /**\n     * @fileOverview Runtime管理器，负责Runtime的选择, 连接\n     */\n    define('runtime/compbase',[],function() {\n    \n        function CompBase( owner, runtime ) {\n    \n            this.owner = owner;\n            this.options = owner.options;\n    \n            this.getRuntime = function() {\n                return runtime;\n            };\n    \n            this.getRuid = function() {\n                return runtime.uid;\n            };\n    \n            this.trigger = function() {\n                return owner.trigger.apply( owner, arguments );\n            };\n        }\n    \n        return CompBase;\n    });\n    /**\n     * @fileOverview Html5Runtime\n     */\n    define('runtime/html5/runtime',[\n        'base',\n        'runtime/runtime',\n        'runtime/compbase'\n    ], function( Base, Runtime, CompBase ) {\n    \n        var type = 'html5',\n            components = {};\n    \n        function Html5Runtime() {\n            var pool = {},\n                me = this,\n                destroy = this.destroy;\n    \n            Runtime.apply( me, arguments );\n            me.type = type;\n    \n    \n            // 这个方法的调用者，实际上是RuntimeClient\n            me.exec = function( comp, fn/*, args...*/) {\n                var client = this,\n                    uid = client.uid,\n                    args = Base.slice( arguments, 2 ),\n                    instance;\n    \n                if ( components[ comp ] ) {\n                    instance = pool[ uid ] = pool[ uid ] ||\n                            new components[ comp ]( client, me );\n    \n                    if ( instance[ fn ] ) {\n                        return instance[ fn ].apply( instance, args );\n                    }\n                }\n            };\n    \n            me.destroy = function() {\n                // @todo 删除池子中的所有实例\n                return destroy && destroy.apply( this, arguments );\n            };\n        }\n    \n        Base.inherits( Runtime, {\n            constructor: Html5Runtime,\n    \n            // 不需要连接其他程序，直接执行callback\n            init: function() {\n                var me = this;\n                setTimeout(function() {\n                    me.trigger('ready');\n                }, 1 );\n            }\n    \n        });\n    \n        // 注册Components\n        Html5Runtime.register = function( name, component ) {\n            var klass = components[ name ] = Base.inherits( CompBase, component );\n            return klass;\n        };\n    \n        // 注册html5运行时。\n        // 只有在支持的前提下注册。\n        if ( window.Blob && window.FileReader && window.DataView ) {\n            Runtime.addRuntime( type, Html5Runtime );\n        }\n    \n        return Html5Runtime;\n    });\n    /**\n     * @fileOverview Blob Html实现\n     */\n    define('runtime/html5/blob',[\n        'runtime/html5/runtime',\n        'lib/blob'\n    ], function( Html5Runtime, Blob ) {\n    \n        return Html5Runtime.register( 'Blob', {\n            slice: function( start, end ) {\n                var blob = this.owner.source,\n                    slice = blob.slice || blob.webkitSlice || blob.mozSlice;\n    \n                blob = slice.call( blob, start, end );\n    \n                return new Blob( this.getRuid(), blob );\n            }\n        });\n    });\n    /**\n     * @fileOverview FilePaste\n     */\n    define('runtime/html5/dnd',[\n        'base',\n        'runtime/html5/runtime',\n        'lib/file'\n    ], function( Base, Html5Runtime, File ) {\n    \n        var $ = Base.$,\n            prefix = 'webuploader-dnd-';\n    \n        return Html5Runtime.register( 'DragAndDrop', {\n            init: function() {\n                var elem = this.elem = this.options.container;\n    \n                this.dragEnterHandler = Base.bindFn( this._dragEnterHandler, this );\n                this.dragOverHandler = Base.bindFn( this._dragOverHandler, this );\n                this.dragLeaveHandler = Base.bindFn( this._dragLeaveHandler, this );\n                this.dropHandler = Base.bindFn( this._dropHandler, this );\n                this.dndOver = false;\n    \n                elem.on( 'dragenter', this.dragEnterHandler );\n                elem.on( 'dragover', this.dragOverHandler );\n                elem.on( 'dragleave', this.dragLeaveHandler );\n                elem.on( 'drop', this.dropHandler );\n    \n                if ( this.options.disableGlobalDnd ) {\n                    $( document ).on( 'dragover', this.dragOverHandler );\n                    $( document ).on( 'drop', this.dropHandler );\n                }\n            },\n    \n            _dragEnterHandler: function( e ) {\n                var me = this,\n                    denied = me._denied || false,\n                    items;\n    \n                e = e.originalEvent || e;\n    \n                if ( !me.dndOver ) {\n                    me.dndOver = true;\n    \n                    // 注意只有 chrome 支持。\n                    items = e.dataTransfer.items;\n    \n                    if ( items && items.length ) {\n                        me._denied = denied = !me.trigger( 'accept', items );\n                    }\n    \n                    me.elem.addClass( prefix + 'over' );\n                    me.elem[ denied ? 'addClass' :\n                            'removeClass' ]( prefix + 'denied' );\n                }\n    \n                e.dataTransfer.dropEffect = denied ? 'none' : 'copy';\n    \n                return false;\n            },\n    \n            _dragOverHandler: function( e ) {\n                // 只处理框内的。\n                var parentElem = this.elem.parent().get( 0 );\n                if ( parentElem && !$.contains( parentElem, e.currentTarget ) ) {\n                    return false;\n                }\n    \n                clearTimeout( this._leaveTimer );\n                this._dragEnterHandler.call( this, e );\n    \n                return false;\n            },\n    \n            _dragLeaveHandler: function() {\n                var me = this,\n                    handler;\n    \n                handler = function() {\n                    me.dndOver = false;\n                    me.elem.removeClass( prefix + 'over ' + prefix + 'denied' );\n                };\n    \n                clearTimeout( me._leaveTimer );\n                me._leaveTimer = setTimeout( handler, 100 );\n                return false;\n            },\n    \n            _dropHandler: function( e ) {\n                var me = this,\n                    ruid = me.getRuid(),\n                    parentElem = me.elem.parent().get( 0 ),\n                    dataTransfer, data;\n    \n                // 只处理框内的。\n                if ( parentElem && !$.contains( parentElem, e.currentTarget ) ) {\n                    return false;\n                }\n    \n                e = e.originalEvent || e;\n                dataTransfer = e.dataTransfer;\n    \n                // 如果是页面内拖拽，还不能处理，不阻止事件。\n                // 此处 ie11 下会报参数错误，\n                try {\n                    data = dataTransfer.getData('text/html');\n                } catch( err ) {\n                }\n    \n                if ( data ) {\n                    return;\n                }\n    \n                me._getTansferFiles( dataTransfer, function( results ) {\n                    me.trigger( 'drop', $.map( results, function( file ) {\n                        return new File( ruid, file );\n                    }) );\n                });\n    \n                me.dndOver = false;\n                me.elem.removeClass( prefix + 'over' );\n                return false;\n            },\n    \n            // 如果传入 callback 则去查看文件夹，否则只管当前文件夹。\n            _getTansferFiles: function( dataTransfer, callback ) {\n                var results  = [],\n                    promises = [],\n                    items, files, file, item, i, len, canAccessFolder;\n    \n                items = dataTransfer.items;\n                files = dataTransfer.files;\n    \n                canAccessFolder = !!(items && items[ 0 ].webkitGetAsEntry);\n    \n                for ( i = 0, len = files.length; i < len; i++ ) {\n                    file = files[ i ];\n                    item = items && items[ i ];\n    \n                    if ( canAccessFolder && item.webkitGetAsEntry().isDirectory ) {\n    \n                        promises.push( this._traverseDirectoryTree(\n                                item.webkitGetAsEntry(), results ) );\n                    } else {\n                        results.push( file );\n                    }\n                }\n    \n                Base.when.apply( Base, promises ).done(function() {\n    \n                    if ( !results.length ) {\n                        return;\n                    }\n    \n                    callback( results );\n                });\n            },\n    \n            _traverseDirectoryTree: function( entry, results ) {\n                var deferred = Base.Deferred(),\n                    me = this;\n    \n                if ( entry.isFile ) {\n                    entry.file(function( file ) {\n                        results.push( file );\n                        deferred.resolve();\n                    });\n                } else if ( entry.isDirectory ) {\n                    entry.createReader().readEntries(function( entries ) {\n                        var len = entries.length,\n                            promises = [],\n                            arr = [],    // 为了保证顺序。\n                            i;\n    \n                        for ( i = 0; i < len; i++ ) {\n                            promises.push( me._traverseDirectoryTree(\n                                    entries[ i ], arr ) );\n                        }\n    \n                        Base.when.apply( Base, promises ).then(function() {\n                            results.push.apply( results, arr );\n                            deferred.resolve();\n                        }, deferred.reject );\n                    });\n                }\n    \n                return deferred.promise();\n            },\n    \n            destroy: function() {\n                var elem = this.elem;\n    \n                // 还没 init 就调用 destroy\n                if (!elem) {\n                    return;\n                }\n                \n                elem.off( 'dragenter', this.dragEnterHandler );\n                elem.off( 'dragover', this.dragOverHandler );\n                elem.off( 'dragleave', this.dragLeaveHandler );\n                elem.off( 'drop', this.dropHandler );\n    \n                if ( this.options.disableGlobalDnd ) {\n                    $( document ).off( 'dragover', this.dragOverHandler );\n                    $( document ).off( 'drop', this.dropHandler );\n                }\n            }\n        });\n    });\n    \n    /**\n     * @fileOverview FilePaste\n     */\n    define('runtime/html5/filepaste',[\n        'base',\n        'runtime/html5/runtime',\n        'lib/file'\n    ], function( Base, Html5Runtime, File ) {\n    \n        return Html5Runtime.register( 'FilePaste', {\n            init: function() {\n                var opts = this.options,\n                    elem = this.elem = opts.container,\n                    accept = '.*',\n                    arr, i, len, item;\n    \n                // accetp的mimeTypes中生成匹配正则。\n                if ( opts.accept ) {\n                    arr = [];\n    \n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\n                        item = opts.accept[ i ].mimeTypes;\n                        item && arr.push( item );\n                    }\n    \n                    if ( arr.length ) {\n                        accept = arr.join(',');\n                        accept = accept.replace( /,/g, '|' ).replace( /\\*/g, '.*' );\n                    }\n                }\n                this.accept = accept = new RegExp( accept, 'i' );\n                this.hander = Base.bindFn( this._pasteHander, this );\n                elem.on( 'paste', this.hander );\n            },\n    \n            _pasteHander: function( e ) {\n                var allowed = [],\n                    ruid = this.getRuid(),\n                    items, item, blob, i, len;\n    \n                e = e.originalEvent || e;\n                items = e.clipboardData.items;\n    \n                for ( i = 0, len = items.length; i < len; i++ ) {\n                    item = items[ i ];\n    \n                    if ( item.kind !== 'file' || !(blob = item.getAsFile()) ) {\n                        continue;\n                    }\n    \n                    allowed.push( new File( ruid, blob ) );\n                }\n    \n                if ( allowed.length ) {\n                    // 不阻止非文件粘贴（文字粘贴）的事件冒泡\n                    e.preventDefault();\n                    e.stopPropagation();\n                    this.trigger( 'paste', allowed );\n                }\n            },\n    \n            destroy: function() {\n                this.elem.off( 'paste', this.hander );\n            }\n        });\n    });\n    \n    /**\n     * @fileOverview FilePicker\n     */\n    define('runtime/html5/filepicker',[\n        'base',\n        'runtime/html5/runtime'\n    ], function( Base, Html5Runtime ) {\n    \n        var $ = Base.$;\n    \n        return Html5Runtime.register( 'FilePicker', {\n            init: function() {\n                var container = this.getRuntime().getContainer(),\n                    me = this,\n                    owner = me.owner,\n                    opts = me.options,\n                    label = this.label = $( document.createElement('label') ),\n                    input =  this.input = $( document.createElement('input') ),\n                    arr, i, len, mouseHandler;\n    \n                input.attr( 'type', 'file' );\n                //console.log(opts.name)\n                input.attr( 'name', 'file' );\n                input.addClass('webuploader-element-invisible');\n    \n                label.on( 'click', function() {\n                    input.trigger('click');\n                });\n    \n                label.css({\n                    opacity: 0,\n                    width: '100%',\n                    height: '100%',\n                    display: 'block',\n                    cursor: 'pointer',\n                    background: '#ffffff'\n                });\n    \n                if ( opts.multiple ) {\n                    input.attr( 'multiple', 'multiple' );\n                }\n    \n                // @todo Firefox不支持单独指定后缀\n                if ( opts.accept && opts.accept.length > 0 ) {\n                    arr = [];\n    \n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\n                        arr.push( opts.accept[ i ].mimeTypes );\n                    }\n    \n                    input.attr( 'accept', arr.join(',') );\n                }\n    \n                container.append( input );\n                container.append( label );\n    \n                mouseHandler = function( e ) {\n                    owner.trigger( e.type );\n                };\n    \n                input.on( 'change', function( e ) {\n                    var fn = arguments.callee,\n                        clone;\n    \n                    me.files = e.target.files;\n    \n                    // reset input\n                    clone = this.cloneNode( true );\n                    clone.value = null;\n                    this.parentNode.replaceChild( clone, this );\n    \n                    input.off();\n                    input = $( clone ).on( 'change', fn )\n                            .on( 'mouseenter mouseleave', mouseHandler );\n    \n                    owner.trigger('change');\n                });\n    \n                label.on( 'mouseenter mouseleave', mouseHandler );\n    \n            },\n    \n    \n            getFiles: function() {\n                return this.files;\n            },\n    \n            destroy: function() {\n                this.input.off();\n                this.label.off();\n            }\n        });\n    });\n    /**\n     * Terms:\n     *\n     * Uint8Array, FileReader, BlobBuilder, atob, ArrayBuffer\n     * @fileOverview Image控件\n     */\n    define('runtime/html5/util',[\n        'base'\n    ], function( Base ) {\n    \n        var urlAPI = window.createObjectURL && window ||\n                window.URL && URL.revokeObjectURL && URL ||\n                window.webkitURL,\n            createObjectURL = Base.noop,\n            revokeObjectURL = createObjectURL;\n    \n        if ( urlAPI ) {\n    \n            // 更安全的方式调用，比如android里面就能把context改成其他的对象。\n            createObjectURL = function() {\n                return urlAPI.createObjectURL.apply( urlAPI, arguments );\n            };\n    \n            revokeObjectURL = function() {\n                return urlAPI.revokeObjectURL.apply( urlAPI, arguments );\n            };\n        }\n    \n        return {\n            createObjectURL: createObjectURL,\n            revokeObjectURL: revokeObjectURL,\n    \n            dataURL2Blob: function( dataURI ) {\n                var byteStr, intArray, ab, i, mimetype, parts;\n    \n                parts = dataURI.split(',');\n    \n                if ( ~parts[ 0 ].indexOf('base64') ) {\n                    byteStr = atob( parts[ 1 ] );\n                } else {\n                    byteStr = decodeURIComponent( parts[ 1 ] );\n                }\n    \n                ab = new ArrayBuffer( byteStr.length );\n                intArray = new Uint8Array( ab );\n    \n                for ( i = 0; i < byteStr.length; i++ ) {\n                    intArray[ i ] = byteStr.charCodeAt( i );\n                }\n    \n                mimetype = parts[ 0 ].split(':')[ 1 ].split(';')[ 0 ];\n    \n                return this.arrayBufferToBlob( ab, mimetype );\n            },\n    \n            dataURL2ArrayBuffer: function( dataURI ) {\n                var byteStr, intArray, i, parts;\n    \n                parts = dataURI.split(',');\n    \n                if ( ~parts[ 0 ].indexOf('base64') ) {\n                    byteStr = atob( parts[ 1 ] );\n                } else {\n                    byteStr = decodeURIComponent( parts[ 1 ] );\n                }\n    \n                intArray = new Uint8Array( byteStr.length );\n    \n                for ( i = 0; i < byteStr.length; i++ ) {\n                    intArray[ i ] = byteStr.charCodeAt( i );\n                }\n    \n                return intArray.buffer;\n            },\n    \n            arrayBufferToBlob: function( buffer, type ) {\n                var builder = window.BlobBuilder || window.WebKitBlobBuilder,\n                    bb;\n    \n                // android不支持直接new Blob, 只能借助blobbuilder.\n                if ( builder ) {\n                    bb = new builder();\n                    bb.append( buffer );\n                    return bb.getBlob( type );\n                }\n    \n                return new Blob([ buffer ], type ? { type: type } : {} );\n            },\n    \n            // 抽出来主要是为了解决android下面canvas.toDataUrl不支持jpeg.\n            // 你得到的结果是png.\n            canvasToDataUrl: function( canvas, type, quality ) {\n                return canvas.toDataURL( type, quality / 100 );\n            },\n    \n            // imagemeat会复写这个方法，如果用户选择加载那个文件了的话。\n            parseMeta: function( blob, callback ) {\n                callback( false, {});\n            },\n    \n            // imagemeat会复写这个方法，如果用户选择加载那个文件了的话。\n            updateImageHead: function( data ) {\n                return data;\n            }\n        };\n    });\n    /**\n     * Terms:\n     *\n     * Uint8Array, FileReader, BlobBuilder, atob, ArrayBuffer\n     * @fileOverview Image控件\n     */\n    define('runtime/html5/imagemeta',[\n        'runtime/html5/util'\n    ], function( Util ) {\n    \n        var api;\n    \n        api = {\n            parsers: {\n                0xffe1: []\n            },\n    \n            maxMetaDataSize: 262144,\n    \n            parse: function( blob, cb ) {\n                var me = this,\n                    fr = new FileReader();\n    \n                fr.onload = function() {\n                    cb( false, me._parse( this.result ) );\n                    fr = fr.onload = fr.onerror = null;\n                };\n    \n                fr.onerror = function( e ) {\n                    cb( e.message );\n                    fr = fr.onload = fr.onerror = null;\n                };\n    \n                blob = blob.slice( 0, me.maxMetaDataSize );\n                fr.readAsArrayBuffer( blob.getSource() );\n            },\n    \n            _parse: function( buffer, noParse ) {\n                if ( buffer.byteLength < 6 ) {\n                    return;\n                }\n    \n                var dataview = new DataView( buffer ),\n                    offset = 2,\n                    maxOffset = dataview.byteLength - 4,\n                    headLength = offset,\n                    ret = {},\n                    markerBytes, markerLength, parsers, i;\n    \n                if ( dataview.getUint16( 0 ) === 0xffd8 ) {\n    \n                    while ( offset < maxOffset ) {\n                        markerBytes = dataview.getUint16( offset );\n    \n                        if ( markerBytes >= 0xffe0 && markerBytes <= 0xffef ||\n                                markerBytes === 0xfffe ) {\n    \n                            markerLength = dataview.getUint16( offset + 2 ) + 2;\n    \n                            if ( offset + markerLength > dataview.byteLength ) {\n                                break;\n                            }\n    \n                            parsers = api.parsers[ markerBytes ];\n    \n                            if ( !noParse && parsers ) {\n                                for ( i = 0; i < parsers.length; i += 1 ) {\n                                    parsers[ i ].call( api, dataview, offset,\n                                            markerLength, ret );\n                                }\n                            }\n    \n                            offset += markerLength;\n                            headLength = offset;\n                        } else {\n                            break;\n                        }\n                    }\n    \n                    if ( headLength > 6 ) {\n                        if ( buffer.slice ) {\n                            ret.imageHead = buffer.slice( 2, headLength );\n                        } else {\n                            // Workaround for IE10, which does not yet\n                            // support ArrayBuffer.slice:\n                            ret.imageHead = new Uint8Array( buffer )\n                                    .subarray( 2, headLength );\n                        }\n                    }\n                }\n    \n                return ret;\n            },\n    \n            updateImageHead: function( buffer, head ) {\n                var data = this._parse( buffer, true ),\n                    buf1, buf2, bodyoffset;\n    \n    \n                bodyoffset = 2;\n                if ( data.imageHead ) {\n                    bodyoffset = 2 + data.imageHead.byteLength;\n                }\n    \n                if ( buffer.slice ) {\n                    buf2 = buffer.slice( bodyoffset );\n                } else {\n                    buf2 = new Uint8Array( buffer ).subarray( bodyoffset );\n                }\n    \n                buf1 = new Uint8Array( head.byteLength + 2 + buf2.byteLength );\n    \n                buf1[ 0 ] = 0xFF;\n                buf1[ 1 ] = 0xD8;\n                buf1.set( new Uint8Array( head ), 2 );\n                buf1.set( new Uint8Array( buf2 ), head.byteLength + 2 );\n    \n                return buf1.buffer;\n            }\n        };\n    \n        Util.parseMeta = function() {\n            return api.parse.apply( api, arguments );\n        };\n    \n        Util.updateImageHead = function() {\n            return api.updateImageHead.apply( api, arguments );\n        };\n    \n        return api;\n    });\n    /**\n     * 代码来自于：https://github.com/blueimp/JavaScript-Load-Image\n     * 暂时项目中只用了orientation.\n     *\n     * 去除了 Exif Sub IFD Pointer, GPS Info IFD Pointer, Exif Thumbnail.\n     * @fileOverview EXIF解析\n     */\n    \n    // Sample\n    // ====================================\n    // Make : Apple\n    // Model : iPhone 4S\n    // Orientation : 1\n    // XResolution : 72 [72/1]\n    // YResolution : 72 [72/1]\n    // ResolutionUnit : 2\n    // Software : QuickTime 7.7.1\n    // DateTime : 2013:09:01 22:53:55\n    // ExifIFDPointer : 190\n    // ExposureTime : 0.058823529411764705 [1/17]\n    // FNumber : 2.4 [12/5]\n    // ExposureProgram : Normal program\n    // ISOSpeedRatings : 800\n    // ExifVersion : 0220\n    // DateTimeOriginal : 2013:09:01 22:52:51\n    // DateTimeDigitized : 2013:09:01 22:52:51\n    // ComponentsConfiguration : YCbCr\n    // ShutterSpeedValue : 4.058893515764426\n    // ApertureValue : 2.5260688216892597 [4845/1918]\n    // BrightnessValue : -0.3126686601998395\n    // MeteringMode : Pattern\n    // Flash : Flash did not fire, compulsory flash mode\n    // FocalLength : 4.28 [107/25]\n    // SubjectArea : [4 values]\n    // FlashpixVersion : 0100\n    // ColorSpace : 1\n    // PixelXDimension : 2448\n    // PixelYDimension : 3264\n    // SensingMethod : One-chip color area sensor\n    // ExposureMode : 0\n    // WhiteBalance : Auto white balance\n    // FocalLengthIn35mmFilm : 35\n    // SceneCaptureType : Standard\n    define('runtime/html5/imagemeta/exif',[\n        'base',\n        'runtime/html5/imagemeta'\n    ], function( Base, ImageMeta ) {\n    \n        var EXIF = {};\n    \n        EXIF.ExifMap = function() {\n            return this;\n        };\n    \n        EXIF.ExifMap.prototype.map = {\n            'Orientation': 0x0112\n        };\n    \n        EXIF.ExifMap.prototype.get = function( id ) {\n            return this[ id ] || this[ this.map[ id ] ];\n        };\n    \n        EXIF.exifTagTypes = {\n            // byte, 8-bit unsigned int:\n            1: {\n                getValue: function( dataView, dataOffset ) {\n                    return dataView.getUint8( dataOffset );\n                },\n                size: 1\n            },\n    \n            // ascii, 8-bit byte:\n            2: {\n                getValue: function( dataView, dataOffset ) {\n                    return String.fromCharCode( dataView.getUint8( dataOffset ) );\n                },\n                size: 1,\n                ascii: true\n            },\n    \n            // short, 16 bit int:\n            3: {\n                getValue: function( dataView, dataOffset, littleEndian ) {\n                    return dataView.getUint16( dataOffset, littleEndian );\n                },\n                size: 2\n            },\n    \n            // long, 32 bit int:\n            4: {\n                getValue: function( dataView, dataOffset, littleEndian ) {\n                    return dataView.getUint32( dataOffset, littleEndian );\n                },\n                size: 4\n            },\n    \n            // rational = two long values,\n            // first is numerator, second is denominator:\n            5: {\n                getValue: function( dataView, dataOffset, littleEndian ) {\n                    return dataView.getUint32( dataOffset, littleEndian ) /\n                        dataView.getUint32( dataOffset + 4, littleEndian );\n                },\n                size: 8\n            },\n    \n            // slong, 32 bit signed int:\n            9: {\n                getValue: function( dataView, dataOffset, littleEndian ) {\n                    return dataView.getInt32( dataOffset, littleEndian );\n                },\n                size: 4\n            },\n    \n            // srational, two slongs, first is numerator, second is denominator:\n            10: {\n                getValue: function( dataView, dataOffset, littleEndian ) {\n                    return dataView.getInt32( dataOffset, littleEndian ) /\n                        dataView.getInt32( dataOffset + 4, littleEndian );\n                },\n                size: 8\n            }\n        };\n    \n        // undefined, 8-bit byte, value depending on field:\n        EXIF.exifTagTypes[ 7 ] = EXIF.exifTagTypes[ 1 ];\n    \n        EXIF.getExifValue = function( dataView, tiffOffset, offset, type, length,\n                littleEndian ) {\n    \n            var tagType = EXIF.exifTagTypes[ type ],\n                tagSize, dataOffset, values, i, str, c;\n    \n            if ( !tagType ) {\n                Base.log('Invalid Exif data: Invalid tag type.');\n                return;\n            }\n    \n            tagSize = tagType.size * length;\n    \n            // Determine if the value is contained in the dataOffset bytes,\n            // or if the value at the dataOffset is a pointer to the actual data:\n            dataOffset = tagSize > 4 ? tiffOffset + dataView.getUint32( offset + 8,\n                    littleEndian ) : (offset + 8);\n    \n            if ( dataOffset + tagSize > dataView.byteLength ) {\n                Base.log('Invalid Exif data: Invalid data offset.');\n                return;\n            }\n    \n            if ( length === 1 ) {\n                return tagType.getValue( dataView, dataOffset, littleEndian );\n            }\n    \n            values = [];\n    \n            for ( i = 0; i < length; i += 1 ) {\n                values[ i ] = tagType.getValue( dataView,\n                        dataOffset + i * tagType.size, littleEndian );\n            }\n    \n            if ( tagType.ascii ) {\n                str = '';\n    \n                // Concatenate the chars:\n                for ( i = 0; i < values.length; i += 1 ) {\n                    c = values[ i ];\n    \n                    // Ignore the terminating NULL byte(s):\n                    if ( c === '\\u0000' ) {\n                        break;\n                    }\n                    str += c;\n                }\n    \n                return str;\n            }\n            return values;\n        };\n    \n        EXIF.parseExifTag = function( dataView, tiffOffset, offset, littleEndian,\n                data ) {\n    \n            var tag = dataView.getUint16( offset, littleEndian );\n            data.exif[ tag ] = EXIF.getExifValue( dataView, tiffOffset, offset,\n                    dataView.getUint16( offset + 2, littleEndian ),    // tag type\n                    dataView.getUint32( offset + 4, littleEndian ),    // tag length\n                    littleEndian );\n        };\n    \n        EXIF.parseExifTags = function( dataView, tiffOffset, dirOffset,\n                littleEndian, data ) {\n    \n            var tagsNumber, dirEndOffset, i;\n    \n            if ( dirOffset + 6 > dataView.byteLength ) {\n                Base.log('Invalid Exif data: Invalid directory offset.');\n                return;\n            }\n    \n            tagsNumber = dataView.getUint16( dirOffset, littleEndian );\n            dirEndOffset = dirOffset + 2 + 12 * tagsNumber;\n    \n            if ( dirEndOffset + 4 > dataView.byteLength ) {\n                Base.log('Invalid Exif data: Invalid directory size.');\n                return;\n            }\n    \n            for ( i = 0; i < tagsNumber; i += 1 ) {\n                this.parseExifTag( dataView, tiffOffset,\n                        dirOffset + 2 + 12 * i,    // tag offset\n                        littleEndian, data );\n            }\n    \n            // Return the offset to the next directory:\n            return dataView.getUint32( dirEndOffset, littleEndian );\n        };\n    \n        // EXIF.getExifThumbnail = function(dataView, offset, length) {\n        //     var hexData,\n        //         i,\n        //         b;\n        //     if (!length || offset + length > dataView.byteLength) {\n        //         Base.log('Invalid Exif data: Invalid thumbnail data.');\n        //         return;\n        //     }\n        //     hexData = [];\n        //     for (i = 0; i < length; i += 1) {\n        //         b = dataView.getUint8(offset + i);\n        //         hexData.push((b < 16 ? '0' : '') + b.toString(16));\n        //     }\n        //     return 'data:image/jpeg,%' + hexData.join('%');\n        // };\n    \n        EXIF.parseExifData = function( dataView, offset, length, data ) {\n    \n            var tiffOffset = offset + 10,\n                littleEndian, dirOffset;\n    \n            // Check for the ASCII code for \"Exif\" (0x45786966):\n            if ( dataView.getUint32( offset + 4 ) !== 0x45786966 ) {\n                // No Exif data, might be XMP data instead\n                return;\n            }\n            if ( tiffOffset + 8 > dataView.byteLength ) {\n                Base.log('Invalid Exif data: Invalid segment size.');\n                return;\n            }\n    \n            // Check for the two null bytes:\n            if ( dataView.getUint16( offset + 8 ) !== 0x0000 ) {\n                Base.log('Invalid Exif data: Missing byte alignment offset.');\n                return;\n            }\n    \n            // Check the byte alignment:\n            switch ( dataView.getUint16( tiffOffset ) ) {\n                case 0x4949:\n                    littleEndian = true;\n                    break;\n    \n                case 0x4D4D:\n                    littleEndian = false;\n                    break;\n    \n                default:\n                    Base.log('Invalid Exif data: Invalid byte alignment marker.');\n                    return;\n            }\n    \n            // Check for the TIFF tag marker (0x002A):\n            if ( dataView.getUint16( tiffOffset + 2, littleEndian ) !== 0x002A ) {\n                Base.log('Invalid Exif data: Missing TIFF marker.');\n                return;\n            }\n    \n            // Retrieve the directory offset bytes, usually 0x00000008 or 8 decimal:\n            dirOffset = dataView.getUint32( tiffOffset + 4, littleEndian );\n            // Create the exif object to store the tags:\n            data.exif = new EXIF.ExifMap();\n            // Parse the tags of the main image directory and retrieve the\n            // offset to the next directory, usually the thumbnail directory:\n            dirOffset = EXIF.parseExifTags( dataView, tiffOffset,\n                    tiffOffset + dirOffset, littleEndian, data );\n    \n            // 尝试读取缩略图\n            // if ( dirOffset ) {\n            //     thumbnailData = {exif: {}};\n            //     dirOffset = EXIF.parseExifTags(\n            //         dataView,\n            //         tiffOffset,\n            //         tiffOffset + dirOffset,\n            //         littleEndian,\n            //         thumbnailData\n            //     );\n    \n            //     // Check for JPEG Thumbnail offset:\n            //     if (thumbnailData.exif[0x0201]) {\n            //         data.exif.Thumbnail = EXIF.getExifThumbnail(\n            //             dataView,\n            //             tiffOffset + thumbnailData.exif[0x0201],\n            //             thumbnailData.exif[0x0202] // Thumbnail data length\n            //         );\n            //     }\n            // }\n        };\n    \n        ImageMeta.parsers[ 0xffe1 ].push( EXIF.parseExifData );\n        return EXIF;\n    });\n    /**\n     * 这个方式性能不行，但是可以解决android里面的toDataUrl的bug\n     * android里面toDataUrl('image/jpege')得到的结果却是png.\n     *\n     * 所以这里没辙，只能借助这个工具\n     * @fileOverview jpeg encoder\n     */\n    define('runtime/html5/jpegencoder',[], function( require, exports, module ) {\n    \n        /*\n          Copyright (c) 2008, Adobe Systems Incorporated\n          All rights reserved.\n    \n          Redistribution and use in source and binary forms, with or without\n          modification, are permitted provided that the following conditions are\n          met:\n    \n          * Redistributions of source code must retain the above copyright notice,\n            this list of conditions and the following disclaimer.\n    \n          * Redistributions in binary form must reproduce the above copyright\n            notice, this list of conditions and the following disclaimer in the\n            documentation and/or other materials provided with the distribution.\n    \n          * Neither the name of Adobe Systems Incorporated nor the names of its\n            contributors may be used to endorse or promote products derived from\n            this software without specific prior written permission.\n    \n          THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n          IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,\n          THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n          PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n          CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n          EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n          PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n          PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n          LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n          NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n          SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n        */\n        /*\n        JPEG encoder ported to JavaScript and optimized by Andreas Ritter, www.bytestrom.eu, 11/2009\n    \n        Basic GUI blocking jpeg encoder\n        */\n    \n        function JPEGEncoder(quality) {\n          var self = this;\n            var fround = Math.round;\n            var ffloor = Math.floor;\n            var YTable = new Array(64);\n            var UVTable = new Array(64);\n            var fdtbl_Y = new Array(64);\n            var fdtbl_UV = new Array(64);\n            var YDC_HT;\n            var UVDC_HT;\n            var YAC_HT;\n            var UVAC_HT;\n    \n            var bitcode = new Array(65535);\n            var category = new Array(65535);\n            var outputfDCTQuant = new Array(64);\n            var DU = new Array(64);\n            var byteout = [];\n            var bytenew = 0;\n            var bytepos = 7;\n    \n            var YDU = new Array(64);\n            var UDU = new Array(64);\n            var VDU = new Array(64);\n            var clt = new Array(256);\n            var RGB_YUV_TABLE = new Array(2048);\n            var currentQuality;\n    \n            var ZigZag = [\n                     0, 1, 5, 6,14,15,27,28,\n                     2, 4, 7,13,16,26,29,42,\n                     3, 8,12,17,25,30,41,43,\n                     9,11,18,24,31,40,44,53,\n                    10,19,23,32,39,45,52,54,\n                    20,22,33,38,46,51,55,60,\n                    21,34,37,47,50,56,59,61,\n                    35,36,48,49,57,58,62,63\n                ];\n    \n            var std_dc_luminance_nrcodes = [0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];\n            var std_dc_luminance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n            var std_ac_luminance_nrcodes = [0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,0x7d];\n            var std_ac_luminance_values = [\n                    0x01,0x02,0x03,0x00,0x04,0x11,0x05,0x12,\n                    0x21,0x31,0x41,0x06,0x13,0x51,0x61,0x07,\n                    0x22,0x71,0x14,0x32,0x81,0x91,0xa1,0x08,\n                    0x23,0x42,0xb1,0xc1,0x15,0x52,0xd1,0xf0,\n                    0x24,0x33,0x62,0x72,0x82,0x09,0x0a,0x16,\n                    0x17,0x18,0x19,0x1a,0x25,0x26,0x27,0x28,\n                    0x29,0x2a,0x34,0x35,0x36,0x37,0x38,0x39,\n                    0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49,\n                    0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59,\n                    0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69,\n                    0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79,\n                    0x7a,0x83,0x84,0x85,0x86,0x87,0x88,0x89,\n                    0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98,\n                    0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,\n                    0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6,\n                    0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5,\n                    0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4,\n                    0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe1,0xe2,\n                    0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,\n                    0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n                    0xf9,0xfa\n                ];\n    \n            var std_dc_chrominance_nrcodes = [0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];\n            var std_dc_chrominance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n            var std_ac_chrominance_nrcodes = [0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,0x77];\n            var std_ac_chrominance_values = [\n                    0x00,0x01,0x02,0x03,0x11,0x04,0x05,0x21,\n                    0x31,0x06,0x12,0x41,0x51,0x07,0x61,0x71,\n                    0x13,0x22,0x32,0x81,0x08,0x14,0x42,0x91,\n                    0xa1,0xb1,0xc1,0x09,0x23,0x33,0x52,0xf0,\n                    0x15,0x62,0x72,0xd1,0x0a,0x16,0x24,0x34,\n                    0xe1,0x25,0xf1,0x17,0x18,0x19,0x1a,0x26,\n                    0x27,0x28,0x29,0x2a,0x35,0x36,0x37,0x38,\n                    0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48,\n                    0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58,\n                    0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68,\n                    0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78,\n                    0x79,0x7a,0x82,0x83,0x84,0x85,0x86,0x87,\n                    0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96,\n                    0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5,\n                    0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,\n                    0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3,\n                    0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2,\n                    0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,\n                    0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,\n                    0xea,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n                    0xf9,0xfa\n                ];\n    \n            function initQuantTables(sf){\n                    var YQT = [\n                        16, 11, 10, 16, 24, 40, 51, 61,\n                        12, 12, 14, 19, 26, 58, 60, 55,\n                        14, 13, 16, 24, 40, 57, 69, 56,\n                        14, 17, 22, 29, 51, 87, 80, 62,\n                        18, 22, 37, 56, 68,109,103, 77,\n                        24, 35, 55, 64, 81,104,113, 92,\n                        49, 64, 78, 87,103,121,120,101,\n                        72, 92, 95, 98,112,100,103, 99\n                    ];\n    \n                    for (var i = 0; i < 64; i++) {\n                        var t = ffloor((YQT[i]*sf+50)/100);\n                        if (t < 1) {\n                            t = 1;\n                        } else if (t > 255) {\n                            t = 255;\n                        }\n                        YTable[ZigZag[i]] = t;\n                    }\n                    var UVQT = [\n                        17, 18, 24, 47, 99, 99, 99, 99,\n                        18, 21, 26, 66, 99, 99, 99, 99,\n                        24, 26, 56, 99, 99, 99, 99, 99,\n                        47, 66, 99, 99, 99, 99, 99, 99,\n                        99, 99, 99, 99, 99, 99, 99, 99,\n                        99, 99, 99, 99, 99, 99, 99, 99,\n                        99, 99, 99, 99, 99, 99, 99, 99,\n                        99, 99, 99, 99, 99, 99, 99, 99\n                    ];\n                    for (var j = 0; j < 64; j++) {\n                        var u = ffloor((UVQT[j]*sf+50)/100);\n                        if (u < 1) {\n                            u = 1;\n                        } else if (u > 255) {\n                            u = 255;\n                        }\n                        UVTable[ZigZag[j]] = u;\n                    }\n                    var aasf = [\n                        1.0, 1.387039845, 1.306562965, 1.175875602,\n                        1.0, 0.785694958, 0.541196100, 0.275899379\n                    ];\n                    var k = 0;\n                    for (var row = 0; row < 8; row++)\n                    {\n                        for (var col = 0; col < 8; col++)\n                        {\n                            fdtbl_Y[k]  = (1.0 / (YTable [ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n                            fdtbl_UV[k] = (1.0 / (UVTable[ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n                            k++;\n                        }\n                    }\n                }\n    \n                function computeHuffmanTbl(nrcodes, std_table){\n                    var codevalue = 0;\n                    var pos_in_table = 0;\n                    var HT = new Array();\n                    for (var k = 1; k <= 16; k++) {\n                        for (var j = 1; j <= nrcodes[k]; j++) {\n                            HT[std_table[pos_in_table]] = [];\n                            HT[std_table[pos_in_table]][0] = codevalue;\n                            HT[std_table[pos_in_table]][1] = k;\n                            pos_in_table++;\n                            codevalue++;\n                        }\n                        codevalue*=2;\n                    }\n                    return HT;\n                }\n    \n                function initHuffmanTbl()\n                {\n                    YDC_HT = computeHuffmanTbl(std_dc_luminance_nrcodes,std_dc_luminance_values);\n                    UVDC_HT = computeHuffmanTbl(std_dc_chrominance_nrcodes,std_dc_chrominance_values);\n                    YAC_HT = computeHuffmanTbl(std_ac_luminance_nrcodes,std_ac_luminance_values);\n                    UVAC_HT = computeHuffmanTbl(std_ac_chrominance_nrcodes,std_ac_chrominance_values);\n                }\n    \n                function initCategoryNumber()\n                {\n                    var nrlower = 1;\n                    var nrupper = 2;\n                    for (var cat = 1; cat <= 15; cat++) {\n                        //Positive numbers\n                        for (var nr = nrlower; nr<nrupper; nr++) {\n                            category[32767+nr] = cat;\n                            bitcode[32767+nr] = [];\n                            bitcode[32767+nr][1] = cat;\n                            bitcode[32767+nr][0] = nr;\n                        }\n                        //Negative numbers\n                        for (var nrneg =-(nrupper-1); nrneg<=-nrlower; nrneg++) {\n                            category[32767+nrneg] = cat;\n                            bitcode[32767+nrneg] = [];\n                            bitcode[32767+nrneg][1] = cat;\n                            bitcode[32767+nrneg][0] = nrupper-1+nrneg;\n                        }\n                        nrlower <<= 1;\n                        nrupper <<= 1;\n                    }\n                }\n    \n                function initRGBYUVTable() {\n                    for(var i = 0; i < 256;i++) {\n                        RGB_YUV_TABLE[i]            =  19595 * i;\n                        RGB_YUV_TABLE[(i+ 256)>>0]  =  38470 * i;\n                        RGB_YUV_TABLE[(i+ 512)>>0]  =   7471 * i + 0x8000;\n                        RGB_YUV_TABLE[(i+ 768)>>0]  = -11059 * i;\n                        RGB_YUV_TABLE[(i+1024)>>0]  = -21709 * i;\n                        RGB_YUV_TABLE[(i+1280)>>0]  =  32768 * i + 0x807FFF;\n                        RGB_YUV_TABLE[(i+1536)>>0]  = -27439 * i;\n                        RGB_YUV_TABLE[(i+1792)>>0]  = - 5329 * i;\n                    }\n                }\n    \n                // IO functions\n                function writeBits(bs)\n                {\n                    var value = bs[0];\n                    var posval = bs[1]-1;\n                    while ( posval >= 0 ) {\n                        if (value & (1 << posval) ) {\n                            bytenew |= (1 << bytepos);\n                        }\n                        posval--;\n                        bytepos--;\n                        if (bytepos < 0) {\n                            if (bytenew == 0xFF) {\n                                writeByte(0xFF);\n                                writeByte(0);\n                            }\n                            else {\n                                writeByte(bytenew);\n                            }\n                            bytepos=7;\n                            bytenew=0;\n                        }\n                    }\n                }\n    \n                function writeByte(value)\n                {\n                    byteout.push(clt[value]); // write char directly instead of converting later\n                }\n    \n                function writeWord(value)\n                {\n                    writeByte((value>>8)&0xFF);\n                    writeByte((value   )&0xFF);\n                }\n    \n                // DCT & quantization core\n                function fDCTQuant(data, fdtbl)\n                {\n                    var d0, d1, d2, d3, d4, d5, d6, d7;\n                    /* Pass 1: process rows. */\n                    var dataOff=0;\n                    var i;\n                    var I8 = 8;\n                    var I64 = 64;\n                    for (i=0; i<I8; ++i)\n                    {\n                        d0 = data[dataOff];\n                        d1 = data[dataOff+1];\n                        d2 = data[dataOff+2];\n                        d3 = data[dataOff+3];\n                        d4 = data[dataOff+4];\n                        d5 = data[dataOff+5];\n                        d6 = data[dataOff+6];\n                        d7 = data[dataOff+7];\n    \n                        var tmp0 = d0 + d7;\n                        var tmp7 = d0 - d7;\n                        var tmp1 = d1 + d6;\n                        var tmp6 = d1 - d6;\n                        var tmp2 = d2 + d5;\n                        var tmp5 = d2 - d5;\n                        var tmp3 = d3 + d4;\n                        var tmp4 = d3 - d4;\n    \n                        /* Even part */\n                        var tmp10 = tmp0 + tmp3;    /* phase 2 */\n                        var tmp13 = tmp0 - tmp3;\n                        var tmp11 = tmp1 + tmp2;\n                        var tmp12 = tmp1 - tmp2;\n    \n                        data[dataOff] = tmp10 + tmp11; /* phase 3 */\n                        data[dataOff+4] = tmp10 - tmp11;\n    \n                        var z1 = (tmp12 + tmp13) * 0.707106781; /* c4 */\n                        data[dataOff+2] = tmp13 + z1; /* phase 5 */\n                        data[dataOff+6] = tmp13 - z1;\n    \n                        /* Odd part */\n                        tmp10 = tmp4 + tmp5; /* phase 2 */\n                        tmp11 = tmp5 + tmp6;\n                        tmp12 = tmp6 + tmp7;\n    \n                        /* The rotator is modified from fig 4-8 to avoid extra negations. */\n                        var z5 = (tmp10 - tmp12) * 0.382683433; /* c6 */\n                        var z2 = 0.541196100 * tmp10 + z5; /* c2-c6 */\n                        var z4 = 1.306562965 * tmp12 + z5; /* c2+c6 */\n                        var z3 = tmp11 * 0.707106781; /* c4 */\n    \n                        var z11 = tmp7 + z3;    /* phase 5 */\n                        var z13 = tmp7 - z3;\n    \n                        data[dataOff+5] = z13 + z2; /* phase 6 */\n                        data[dataOff+3] = z13 - z2;\n                        data[dataOff+1] = z11 + z4;\n                        data[dataOff+7] = z11 - z4;\n    \n                        dataOff += 8; /* advance pointer to next row */\n                    }\n    \n                    /* Pass 2: process columns. */\n                    dataOff = 0;\n                    for (i=0; i<I8; ++i)\n                    {\n                        d0 = data[dataOff];\n                        d1 = data[dataOff + 8];\n                        d2 = data[dataOff + 16];\n                        d3 = data[dataOff + 24];\n                        d4 = data[dataOff + 32];\n                        d5 = data[dataOff + 40];\n                        d6 = data[dataOff + 48];\n                        d7 = data[dataOff + 56];\n    \n                        var tmp0p2 = d0 + d7;\n                        var tmp7p2 = d0 - d7;\n                        var tmp1p2 = d1 + d6;\n                        var tmp6p2 = d1 - d6;\n                        var tmp2p2 = d2 + d5;\n                        var tmp5p2 = d2 - d5;\n                        var tmp3p2 = d3 + d4;\n                        var tmp4p2 = d3 - d4;\n    \n                        /* Even part */\n                        var tmp10p2 = tmp0p2 + tmp3p2;  /* phase 2 */\n                        var tmp13p2 = tmp0p2 - tmp3p2;\n                        var tmp11p2 = tmp1p2 + tmp2p2;\n                        var tmp12p2 = tmp1p2 - tmp2p2;\n    \n                        data[dataOff] = tmp10p2 + tmp11p2; /* phase 3 */\n                        data[dataOff+32] = tmp10p2 - tmp11p2;\n    \n                        var z1p2 = (tmp12p2 + tmp13p2) * 0.707106781; /* c4 */\n                        data[dataOff+16] = tmp13p2 + z1p2; /* phase 5 */\n                        data[dataOff+48] = tmp13p2 - z1p2;\n    \n                        /* Odd part */\n                        tmp10p2 = tmp4p2 + tmp5p2; /* phase 2 */\n                        tmp11p2 = tmp5p2 + tmp6p2;\n                        tmp12p2 = tmp6p2 + tmp7p2;\n    \n                        /* The rotator is modified from fig 4-8 to avoid extra negations. */\n                        var z5p2 = (tmp10p2 - tmp12p2) * 0.382683433; /* c6 */\n                        var z2p2 = 0.541196100 * tmp10p2 + z5p2; /* c2-c6 */\n                        var z4p2 = 1.306562965 * tmp12p2 + z5p2; /* c2+c6 */\n                        var z3p2 = tmp11p2 * 0.707106781; /* c4 */\n    \n                        var z11p2 = tmp7p2 + z3p2;  /* phase 5 */\n                        var z13p2 = tmp7p2 - z3p2;\n    \n                        data[dataOff+40] = z13p2 + z2p2; /* phase 6 */\n                        data[dataOff+24] = z13p2 - z2p2;\n                        data[dataOff+ 8] = z11p2 + z4p2;\n                        data[dataOff+56] = z11p2 - z4p2;\n    \n                        dataOff++; /* advance pointer to next column */\n                    }\n    \n                    // Quantize/descale the coefficients\n                    var fDCTQuant;\n                    for (i=0; i<I64; ++i)\n                    {\n                        // Apply the quantization and scaling factor & Round to nearest integer\n                        fDCTQuant = data[i]*fdtbl[i];\n                        outputfDCTQuant[i] = (fDCTQuant > 0.0) ? ((fDCTQuant + 0.5)|0) : ((fDCTQuant - 0.5)|0);\n                        //outputfDCTQuant[i] = fround(fDCTQuant);\n    \n                    }\n                    return outputfDCTQuant;\n                }\n    \n                function writeAPP0()\n                {\n                    writeWord(0xFFE0); // marker\n                    writeWord(16); // length\n                    writeByte(0x4A); // J\n                    writeByte(0x46); // F\n                    writeByte(0x49); // I\n                    writeByte(0x46); // F\n                    writeByte(0); // = \"JFIF\",'\\0'\n                    writeByte(1); // versionhi\n                    writeByte(1); // versionlo\n                    writeByte(0); // xyunits\n                    writeWord(1); // xdensity\n                    writeWord(1); // ydensity\n                    writeByte(0); // thumbnwidth\n                    writeByte(0); // thumbnheight\n                }\n    \n                function writeSOF0(width, height)\n                {\n                    writeWord(0xFFC0); // marker\n                    writeWord(17);   // length, truecolor YUV JPG\n                    writeByte(8);    // precision\n                    writeWord(height);\n                    writeWord(width);\n                    writeByte(3);    // nrofcomponents\n                    writeByte(1);    // IdY\n                    writeByte(0x11); // HVY\n                    writeByte(0);    // QTY\n                    writeByte(2);    // IdU\n                    writeByte(0x11); // HVU\n                    writeByte(1);    // QTU\n                    writeByte(3);    // IdV\n                    writeByte(0x11); // HVV\n                    writeByte(1);    // QTV\n                }\n    \n                function writeDQT()\n                {\n                    writeWord(0xFFDB); // marker\n                    writeWord(132);    // length\n                    writeByte(0);\n                    for (var i=0; i<64; i++) {\n                        writeByte(YTable[i]);\n                    }\n                    writeByte(1);\n                    for (var j=0; j<64; j++) {\n                        writeByte(UVTable[j]);\n                    }\n                }\n    \n                function writeDHT()\n                {\n                    writeWord(0xFFC4); // marker\n                    writeWord(0x01A2); // length\n    \n                    writeByte(0); // HTYDCinfo\n                    for (var i=0; i<16; i++) {\n                        writeByte(std_dc_luminance_nrcodes[i+1]);\n                    }\n                    for (var j=0; j<=11; j++) {\n                        writeByte(std_dc_luminance_values[j]);\n                    }\n    \n                    writeByte(0x10); // HTYACinfo\n                    for (var k=0; k<16; k++) {\n                        writeByte(std_ac_luminance_nrcodes[k+1]);\n                    }\n                    for (var l=0; l<=161; l++) {\n                        writeByte(std_ac_luminance_values[l]);\n                    }\n    \n                    writeByte(1); // HTUDCinfo\n                    for (var m=0; m<16; m++) {\n                        writeByte(std_dc_chrominance_nrcodes[m+1]);\n                    }\n                    for (var n=0; n<=11; n++) {\n                        writeByte(std_dc_chrominance_values[n]);\n                    }\n    \n                    writeByte(0x11); // HTUACinfo\n                    for (var o=0; o<16; o++) {\n                        writeByte(std_ac_chrominance_nrcodes[o+1]);\n                    }\n                    for (var p=0; p<=161; p++) {\n                        writeByte(std_ac_chrominance_values[p]);\n                    }\n                }\n    \n                function writeSOS()\n                {\n                    writeWord(0xFFDA); // marker\n                    writeWord(12); // length\n                    writeByte(3); // nrofcomponents\n                    writeByte(1); // IdY\n                    writeByte(0); // HTY\n                    writeByte(2); // IdU\n                    writeByte(0x11); // HTU\n                    writeByte(3); // IdV\n                    writeByte(0x11); // HTV\n                    writeByte(0); // Ss\n                    writeByte(0x3f); // Se\n                    writeByte(0); // Bf\n                }\n    \n                function processDU(CDU, fdtbl, DC, HTDC, HTAC){\n                    var EOB = HTAC[0x00];\n                    var M16zeroes = HTAC[0xF0];\n                    var pos;\n                    var I16 = 16;\n                    var I63 = 63;\n                    var I64 = 64;\n                    var DU_DCT = fDCTQuant(CDU, fdtbl);\n                    //ZigZag reorder\n                    for (var j=0;j<I64;++j) {\n                        DU[ZigZag[j]]=DU_DCT[j];\n                    }\n                    var Diff = DU[0] - DC; DC = DU[0];\n                    //Encode DC\n                    if (Diff==0) {\n                        writeBits(HTDC[0]); // Diff might be 0\n                    } else {\n                        pos = 32767+Diff;\n                        writeBits(HTDC[category[pos]]);\n                        writeBits(bitcode[pos]);\n                    }\n                    //Encode ACs\n                    var end0pos = 63; // was const... which is crazy\n                    for (; (end0pos>0)&&(DU[end0pos]==0); end0pos--) {}\n                    //end0pos = first element in reverse order !=0\n                    if ( end0pos == 0) {\n                        writeBits(EOB);\n                        return DC;\n                    }\n                    var i = 1;\n                    var lng;\n                    while ( i <= end0pos ) {\n                        var startpos = i;\n                        for (; (DU[i]==0) && (i<=end0pos); ++i) {}\n                        var nrzeroes = i-startpos;\n                        if ( nrzeroes >= I16 ) {\n                            lng = nrzeroes>>4;\n                            for (var nrmarker=1; nrmarker <= lng; ++nrmarker)\n                                writeBits(M16zeroes);\n                            nrzeroes = nrzeroes&0xF;\n                        }\n                        pos = 32767+DU[i];\n                        writeBits(HTAC[(nrzeroes<<4)+category[pos]]);\n                        writeBits(bitcode[pos]);\n                        i++;\n                    }\n                    if ( end0pos != I63 ) {\n                        writeBits(EOB);\n                    }\n                    return DC;\n                }\n    \n                function initCharLookupTable(){\n                    var sfcc = String.fromCharCode;\n                    for(var i=0; i < 256; i++){ ///// ACHTUNG // 255\n                        clt[i] = sfcc(i);\n                    }\n                }\n    \n                this.encode = function(image,quality) // image data object\n                {\n                    // var time_start = new Date().getTime();\n    \n                    if(quality) setQuality(quality);\n    \n                    // Initialize bit writer\n                    byteout = new Array();\n                    bytenew=0;\n                    bytepos=7;\n    \n                    // Add JPEG headers\n                    writeWord(0xFFD8); // SOI\n                    writeAPP0();\n                    writeDQT();\n                    writeSOF0(image.width,image.height);\n                    writeDHT();\n                    writeSOS();\n    \n    \n                    // Encode 8x8 macroblocks\n                    var DCY=0;\n                    var DCU=0;\n                    var DCV=0;\n    \n                    bytenew=0;\n                    bytepos=7;\n    \n    \n                    this.encode.displayName = \"_encode_\";\n    \n                    var imageData = image.data;\n                    var width = image.width;\n                    var height = image.height;\n    \n                    var quadWidth = width*4;\n                    var tripleWidth = width*3;\n    \n                    var x, y = 0;\n                    var r, g, b;\n                    var start,p, col,row,pos;\n                    while(y < height){\n                        x = 0;\n                        while(x < quadWidth){\n                        start = quadWidth * y + x;\n                        p = start;\n                        col = -1;\n                        row = 0;\n    \n                        for(pos=0; pos < 64; pos++){\n                            row = pos >> 3;// /8\n                            col = ( pos & 7 ) * 4; // %8\n                            p = start + ( row * quadWidth ) + col;\n    \n                            if(y+row >= height){ // padding bottom\n                                p-= (quadWidth*(y+1+row-height));\n                            }\n    \n                            if(x+col >= quadWidth){ // padding right\n                                p-= ((x+col) - quadWidth +4)\n                            }\n    \n                            r = imageData[ p++ ];\n                            g = imageData[ p++ ];\n                            b = imageData[ p++ ];\n    \n    \n                            /* // calculate YUV values dynamically\n                            YDU[pos]=((( 0.29900)*r+( 0.58700)*g+( 0.11400)*b))-128; //-0x80\n                            UDU[pos]=(((-0.16874)*r+(-0.33126)*g+( 0.50000)*b));\n                            VDU[pos]=((( 0.50000)*r+(-0.41869)*g+(-0.08131)*b));\n                            */\n    \n                            // use lookup table (slightly faster)\n                            YDU[pos] = ((RGB_YUV_TABLE[r]             + RGB_YUV_TABLE[(g +  256)>>0] + RGB_YUV_TABLE[(b +  512)>>0]) >> 16)-128;\n                            UDU[pos] = ((RGB_YUV_TABLE[(r +  768)>>0] + RGB_YUV_TABLE[(g + 1024)>>0] + RGB_YUV_TABLE[(b + 1280)>>0]) >> 16)-128;\n                            VDU[pos] = ((RGB_YUV_TABLE[(r + 1280)>>0] + RGB_YUV_TABLE[(g + 1536)>>0] + RGB_YUV_TABLE[(b + 1792)>>0]) >> 16)-128;\n    \n                        }\n    \n                        DCY = processDU(YDU, fdtbl_Y, DCY, YDC_HT, YAC_HT);\n                        DCU = processDU(UDU, fdtbl_UV, DCU, UVDC_HT, UVAC_HT);\n                        DCV = processDU(VDU, fdtbl_UV, DCV, UVDC_HT, UVAC_HT);\n                        x+=32;\n                        }\n                        y+=8;\n                    }\n    \n    \n                    ////////////////////////////////////////////////////////////////\n    \n                    // Do the bit alignment of the EOI marker\n                    if ( bytepos >= 0 ) {\n                        var fillbits = [];\n                        fillbits[1] = bytepos+1;\n                        fillbits[0] = (1<<(bytepos+1))-1;\n                        writeBits(fillbits);\n                    }\n    \n                    writeWord(0xFFD9); //EOI\n    \n                    var jpegDataUri = 'data:image/jpeg;base64,' + btoa(byteout.join(''));\n    \n                    byteout = [];\n    \n                    // benchmarking\n                    // var duration = new Date().getTime() - time_start;\n                    // console.log('Encoding time: '+ currentQuality + 'ms');\n                    //\n    \n                    return jpegDataUri\n            }\n    \n            function setQuality(quality){\n                if (quality <= 0) {\n                    quality = 1;\n                }\n                if (quality > 100) {\n                    quality = 100;\n                }\n    \n                if(currentQuality == quality) return // don't recalc if unchanged\n    \n                var sf = 0;\n                if (quality < 50) {\n                    sf = Math.floor(5000 / quality);\n                } else {\n                    sf = Math.floor(200 - quality*2);\n                }\n    \n                initQuantTables(sf);\n                currentQuality = quality;\n                // console.log('Quality set to: '+quality +'%');\n            }\n    \n            function init(){\n                // var time_start = new Date().getTime();\n                if(!quality) quality = 50;\n                // Create tables\n                initCharLookupTable()\n                initHuffmanTbl();\n                initCategoryNumber();\n                initRGBYUVTable();\n    \n                setQuality(quality);\n                // var duration = new Date().getTime() - time_start;\n                // console.log('Initialization '+ duration + 'ms');\n            }\n    \n            init();\n    \n        }\n    \n        JPEGEncoder.encode = function( data, quality ) {\n            var encoder = new JPEGEncoder( quality );\n    \n            return encoder.encode( data );\n        }\n    \n        return JPEGEncoder;\n    });\n    /**\n     * @fileOverview Fix android canvas.toDataUrl bug.\n     */\n    define('runtime/html5/androidpatch',[\n        'runtime/html5/util',\n        'runtime/html5/jpegencoder',\n        'base'\n    ], function( Util, encoder, Base ) {\n        var origin = Util.canvasToDataUrl,\n            supportJpeg;\n    \n        Util.canvasToDataUrl = function( canvas, type, quality ) {\n            var ctx, w, h, fragement, parts;\n    \n            // 非android手机直接跳过。\n            if ( !Base.os.android ) {\n                return origin.apply( null, arguments );\n            }\n    \n            // 检测是否canvas支持jpeg导出，根据数据格式来判断。\n            // JPEG 前两位分别是：255, 216\n            if ( type === 'image/jpeg' && typeof supportJpeg === 'undefined' ) {\n                fragement = origin.apply( null, arguments );\n    \n                parts = fragement.split(',');\n    \n                if ( ~parts[ 0 ].indexOf('base64') ) {\n                    fragement = atob( parts[ 1 ] );\n                } else {\n                    fragement = decodeURIComponent( parts[ 1 ] );\n                }\n    \n                fragement = fragement.substring( 0, 2 );\n    \n                supportJpeg = fragement.charCodeAt( 0 ) === 255 &&\n                        fragement.charCodeAt( 1 ) === 216;\n            }\n    \n            // 只有在android环境下才修复\n            if ( type === 'image/jpeg' && !supportJpeg ) {\n                w = canvas.width;\n                h = canvas.height;\n                ctx = canvas.getContext('2d');\n    \n                return encoder.encode( ctx.getImageData( 0, 0, w, h ), quality );\n            }\n    \n            return origin.apply( null, arguments );\n        };\n    });\n    /**\n     * @fileOverview Image\n     */\n    define('runtime/html5/image',[\n        'base',\n        'runtime/html5/runtime',\n        'runtime/html5/util'\n    ], function( Base, Html5Runtime, Util ) {\n    \n        var BLANK = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D';\n    \n        return Html5Runtime.register( 'Image', {\n    \n            // flag: 标记是否被修改过。\n            modified: false,\n    \n            init: function() {\n                var me = this,\n                    img = new Image();\n    \n                img.onload = function() {\n    \n                    me._info = {\n                        type: me.type,\n                        width: this.width,\n                        height: this.height\n                    };\n    \n                    // 读取meta信息。\n                    if ( !me._metas && 'image/jpeg' === me.type ) {\n                        Util.parseMeta( me._blob, function( error, ret ) {\n                            me._metas = ret;\n                            me.owner.trigger('load');\n                        });\n                    } else {\n                        me.owner.trigger('load');\n                    }\n                };\n    \n                img.onerror = function() {\n                    me.owner.trigger('error');\n                };\n    \n                me._img = img;\n            },\n    \n            loadFromBlob: function( blob ) {\n                var me = this,\n                    img = me._img;\n    \n                me._blob = blob;\n                me.type = blob.type;\n                img.src = Util.createObjectURL( blob.getSource() );\n                me.owner.once( 'load', function() {\n                    Util.revokeObjectURL( img.src );\n                });\n            },\n    \n            resize: function( width, height ) {\n                var canvas = this._canvas ||\n                        (this._canvas = document.createElement('canvas'));\n    \n                this._resize( this._img, canvas, width, height );\n                this._blob = null;    // 没用了，可以删掉了。\n                this.modified = true;\n                this.owner.trigger( 'complete', 'resize' );\n            },\n    \n            crop: function( x, y, w, h, s ) {\n                var cvs = this._canvas ||\n                        (this._canvas = document.createElement('canvas')),\n                    opts = this.options,\n                    img = this._img,\n                    iw = img.naturalWidth,\n                    ih = img.naturalHeight,\n                    orientation = this.getOrientation();\n    \n                s = s || 1;\n    \n                // todo 解决 orientation 的问题。\n                // values that require 90 degree rotation\n                // if ( ~[ 5, 6, 7, 8 ].indexOf( orientation ) ) {\n    \n                //     switch ( orientation ) {\n                //         case 6:\n                //             tmp = x;\n                //             x = y;\n                //             y = iw * s - tmp - w;\n                //             console.log(ih * s, tmp, w)\n                //             break;\n                //     }\n    \n                //     (w ^= h, h ^= w, w ^= h);\n                // }\n    \n                cvs.width = w;\n                cvs.height = h;\n    \n                opts.preserveHeaders || this._rotate2Orientaion( cvs, orientation );\n                this._renderImageToCanvas( cvs, img, -x, -y, iw * s, ih * s );\n    \n                this._blob = null;    // 没用了，可以删掉了。\n                this.modified = true;\n                this.owner.trigger( 'complete', 'crop' );\n            },\n    \n            getAsBlob: function( type ) {\n                var blob = this._blob,\n                    opts = this.options,\n                    canvas;\n    \n                type = type || this.type;\n    \n                // blob需要重新生成。\n                if ( this.modified || this.type !== type ) {\n                    canvas = this._canvas;\n    \n                    if ( type === 'image/jpeg' ) {\n    \n                        blob = Util.canvasToDataUrl( canvas, type, opts.quality );\n    \n                        if ( opts.preserveHeaders && this._metas &&\n                                this._metas.imageHead ) {\n    \n                            blob = Util.dataURL2ArrayBuffer( blob );\n                            blob = Util.updateImageHead( blob,\n                                    this._metas.imageHead );\n                            blob = Util.arrayBufferToBlob( blob, type );\n                            return blob;\n                        }\n                    } else {\n                        blob = Util.canvasToDataUrl( canvas, type );\n                    }\n    \n                    blob = Util.dataURL2Blob( blob );\n                }\n    \n                return blob;\n            },\n    \n            getAsDataUrl: function( type ) {\n                var opts = this.options;\n    \n                type = type || this.type;\n    \n                if ( type === 'image/jpeg' ) {\n                    return Util.canvasToDataUrl( this._canvas, type, opts.quality );\n                } else {\n                    return this._canvas.toDataURL( type );\n                }\n            },\n    \n            getOrientation: function() {\n                return this._metas && this._metas.exif &&\n                        this._metas.exif.get('Orientation') || 1;\n            },\n    \n            info: function( val ) {\n    \n                // setter\n                if ( val ) {\n                    this._info = val;\n                    return this;\n                }\n    \n                // getter\n                return this._info;\n            },\n    \n            meta: function( val ) {\n    \n                // setter\n                if ( val ) {\n                    this._meta = val;\n                    return this;\n                }\n    \n                // getter\n                return this._meta;\n            },\n    \n            destroy: function() {\n                var canvas = this._canvas;\n                this._img.onload = null;\n    \n                if ( canvas ) {\n                    canvas.getContext('2d')\n                            .clearRect( 0, 0, canvas.width, canvas.height );\n                    canvas.width = canvas.height = 0;\n                    this._canvas = null;\n                }\n    \n                // 释放内存。非常重要，否则释放不了image的内存。\n                this._img.src = BLANK;\n                this._img = this._blob = null;\n            },\n    \n            _resize: function( img, cvs, width, height ) {\n                var opts = this.options,\n                    naturalWidth = img.width,\n                    naturalHeight = img.height,\n                    orientation = this.getOrientation(),\n                    scale, w, h, x, y;\n    \n                // values that require 90 degree rotation\n                if ( ~[ 5, 6, 7, 8 ].indexOf( orientation ) ) {\n    \n                    // 交换width, height的值。\n                    width ^= height;\n                    height ^= width;\n                    width ^= height;\n                }\n    \n                scale = Math[ opts.crop ? 'max' : 'min' ]( width / naturalWidth,\n                        height / naturalHeight );\n    \n                // 不允许放大。\n                opts.allowMagnify || (scale = Math.min( 1, scale ));\n    \n                w = naturalWidth * scale;\n                h = naturalHeight * scale;\n    \n                if ( opts.crop ) {\n                    cvs.width = width;\n                    cvs.height = height;\n                } else {\n                    cvs.width = w;\n                    cvs.height = h;\n                }\n    \n                x = (cvs.width - w) / 2;\n                y = (cvs.height - h) / 2;\n    \n                opts.preserveHeaders || this._rotate2Orientaion( cvs, orientation );\n    \n                this._renderImageToCanvas( cvs, img, x, y, w, h );\n            },\n    \n            _rotate2Orientaion: function( canvas, orientation ) {\n                var width = canvas.width,\n                    height = canvas.height,\n                    ctx = canvas.getContext('2d');\n    \n                switch ( orientation ) {\n                    case 5:\n                    case 6:\n                    case 7:\n                    case 8:\n                        canvas.width = height;\n                        canvas.height = width;\n                        break;\n                }\n    \n                switch ( orientation ) {\n                    case 2:    // horizontal flip\n                        ctx.translate( width, 0 );\n                        ctx.scale( -1, 1 );\n                        break;\n    \n                    case 3:    // 180 rotate left\n                        ctx.translate( width, height );\n                        ctx.rotate( Math.PI );\n                        break;\n    \n                    case 4:    // vertical flip\n                        ctx.translate( 0, height );\n                        ctx.scale( 1, -1 );\n                        break;\n    \n                    case 5:    // vertical flip + 90 rotate right\n                        ctx.rotate( 0.5 * Math.PI );\n                        ctx.scale( 1, -1 );\n                        break;\n    \n                    case 6:    // 90 rotate right\n                        ctx.rotate( 0.5 * Math.PI );\n                        ctx.translate( 0, -height );\n                        break;\n    \n                    case 7:    // horizontal flip + 90 rotate right\n                        ctx.rotate( 0.5 * Math.PI );\n                        ctx.translate( width, -height );\n                        ctx.scale( -1, 1 );\n                        break;\n    \n                    case 8:    // 90 rotate left\n                        ctx.rotate( -0.5 * Math.PI );\n                        ctx.translate( -width, 0 );\n                        break;\n                }\n            },\n    \n            // https://github.com/stomita/ios-imagefile-megapixel/\n            // blob/master/src/megapix-image.js\n            _renderImageToCanvas: (function() {\n    \n                // 如果不是ios, 不需要这么复杂！\n                if ( !Base.os.ios ) {\n                    return function( canvas ) {\n                        var args = Base.slice( arguments, 1 ),\n                            ctx = canvas.getContext('2d');\n    \n                        ctx.drawImage.apply( ctx, args );\n                    };\n                }\n    \n                /**\n                 * Detecting vertical squash in loaded image.\n                 * Fixes a bug which squash image vertically while drawing into\n                 * canvas for some images.\n                 */\n                function detectVerticalSquash( img, iw, ih ) {\n                    var canvas = document.createElement('canvas'),\n                        ctx = canvas.getContext('2d'),\n                        sy = 0,\n                        ey = ih,\n                        py = ih,\n                        data, alpha, ratio;\n    \n    \n                    canvas.width = 1;\n                    canvas.height = ih;\n                    ctx.drawImage( img, 0, 0 );\n                    data = ctx.getImageData( 0, 0, 1, ih ).data;\n    \n                    // search image edge pixel position in case\n                    // it is squashed vertically.\n                    while ( py > sy ) {\n                        alpha = data[ (py - 1) * 4 + 3 ];\n    \n                        if ( alpha === 0 ) {\n                            ey = py;\n                        } else {\n                            sy = py;\n                        }\n    \n                        py = (ey + sy) >> 1;\n                    }\n    \n                    ratio = (py / ih);\n                    return (ratio === 0) ? 1 : ratio;\n                }\n    \n                // fix ie7 bug\n                // http://stackoverflow.com/questions/11929099/\n                // html5-canvas-drawimage-ratio-bug-ios\n                if ( Base.os.ios >= 7 ) {\n                    return function( canvas, img, x, y, w, h ) {\n                        var iw = img.naturalWidth,\n                            ih = img.naturalHeight,\n                            vertSquashRatio = detectVerticalSquash( img, iw, ih );\n    \n                        return canvas.getContext('2d').drawImage( img, 0, 0,\n                                iw * vertSquashRatio, ih * vertSquashRatio,\n                                x, y, w, h );\n                    };\n                }\n    \n                /**\n                 * Detect subsampling in loaded image.\n                 * In iOS, larger images than 2M pixels may be\n                 * subsampled in rendering.\n                 */\n                function detectSubsampling( img ) {\n                    var iw = img.naturalWidth,\n                        ih = img.naturalHeight,\n                        canvas, ctx;\n    \n                    // subsampling may happen overmegapixel image\n                    if ( iw * ih > 1024 * 1024 ) {\n                        canvas = document.createElement('canvas');\n                        canvas.width = canvas.height = 1;\n                        ctx = canvas.getContext('2d');\n                        ctx.drawImage( img, -iw + 1, 0 );\n    \n                        // subsampled image becomes half smaller in rendering size.\n                        // check alpha channel value to confirm image is covering\n                        // edge pixel or not. if alpha value is 0\n                        // image is not covering, hence subsampled.\n                        return ctx.getImageData( 0, 0, 1, 1 ).data[ 3 ] === 0;\n                    } else {\n                        return false;\n                    }\n                }\n    \n    \n                return function( canvas, img, x, y, width, height ) {\n                    var iw = img.naturalWidth,\n                        ih = img.naturalHeight,\n                        ctx = canvas.getContext('2d'),\n                        subsampled = detectSubsampling( img ),\n                        doSquash = this.type === 'image/jpeg',\n                        d = 1024,\n                        sy = 0,\n                        dy = 0,\n                        tmpCanvas, tmpCtx, vertSquashRatio, dw, dh, sx, dx;\n    \n                    if ( subsampled ) {\n                        iw /= 2;\n                        ih /= 2;\n                    }\n    \n                    ctx.save();\n                    tmpCanvas = document.createElement('canvas');\n                    tmpCanvas.width = tmpCanvas.height = d;\n    \n                    tmpCtx = tmpCanvas.getContext('2d');\n                    vertSquashRatio = doSquash ?\n                            detectVerticalSquash( img, iw, ih ) : 1;\n    \n                    dw = Math.ceil( d * width / iw );\n                    dh = Math.ceil( d * height / ih / vertSquashRatio );\n    \n                    while ( sy < ih ) {\n                        sx = 0;\n                        dx = 0;\n                        while ( sx < iw ) {\n                            tmpCtx.clearRect( 0, 0, d, d );\n                            tmpCtx.drawImage( img, -sx, -sy );\n                            ctx.drawImage( tmpCanvas, 0, 0, d, d,\n                                    x + dx, y + dy, dw, dh );\n                            sx += d;\n                            dx += dw;\n                        }\n                        sy += d;\n                        dy += dh;\n                    }\n                    ctx.restore();\n                    tmpCanvas = tmpCtx = null;\n                };\n            })()\n        });\n    });\n    /**\n     * @fileOverview Transport\n     * @todo 支持chunked传输，优势：\n     * 可以将大文件分成小块，挨个传输，可以提高大文件成功率，当失败的时候，也只需要重传那小部分，\n     * 而不需要重头再传一次。另外断点续传也需要用chunked方式。\n     */\n    define('runtime/html5/transport',[\n        'base',\n        'runtime/html5/runtime'\n    ], function( Base, Html5Runtime ) {\n    \n        var noop = Base.noop,\n            $ = Base.$;\n    \n        return Html5Runtime.register( 'Transport', {\n            init: function() {\n                this._status = 0;\n                this._response = null;\n            },\n    \n            send: function() {\n                var owner = this.owner,\n                    opts = this.options,\n                    xhr = this._initAjax(),\n                    blob = owner._blob,\n                    server = opts.server,\n                    formData, binary, fr;\n    \n                if ( opts.sendAsBinary ) {\n                    server += (/\\?/.test( server ) ? '&' : '?') +\n                            $.param( owner._formData );\n    \n                    binary = blob.getSource();\n                } else {\n                    formData = new FormData();\n                    $.each( owner._formData, function( k, v ) {\n                        formData.append( k, v );\n                    });\n    \n                    formData.append( opts.fileVal, blob.getSource(),\n                            opts.filename || owner._formData.name || '' );\n                }\n    \n                if ( opts.withCredentials && 'withCredentials' in xhr ) {\n                    xhr.open( opts.method, server, true );\n                    xhr.withCredentials = true;\n                } else {\n                    xhr.open( opts.method, server );\n                }\n    \n                this._setRequestHeader( xhr, opts.headers );\n    \n                if ( binary ) {\n                    // 强制设置成 content-type 为文件流。\n                    xhr.overrideMimeType &&\n                            xhr.overrideMimeType('application/octet-stream');\n    \n                    // android直接发送blob会导致服务端接收到的是空文件。\n                    // bug详情。\n                    // https://code.google.com/p/android/issues/detail?id=39882\n                    // 所以先用fileReader读取出来再通过arraybuffer的方式发送。\n                    if ( Base.os.android ) {\n                        fr = new FileReader();\n    \n                        fr.onload = function() {\n                            xhr.send( this.result );\n                            fr = fr.onload = null;\n                        };\n    \n                        fr.readAsArrayBuffer( binary );\n                    } else {\n                        xhr.send( binary );\n                    }\n                } else {\n                    xhr.send( formData );\n                }\n            },\n    \n            getResponse: function() {\n                return this._response;\n            },\n    \n            getResponseAsJson: function() {\n                return this._parseJson( this._response );\n            },\n    \n            getStatus: function() {\n                return this._status;\n            },\n    \n            abort: function() {\n                var xhr = this._xhr;\n    \n                if ( xhr ) {\n                    xhr.upload.onprogress = noop;\n                    xhr.onreadystatechange = noop;\n                    xhr.abort();\n    \n                    this._xhr = xhr = null;\n                }\n            },\n    \n            destroy: function() {\n                this.abort();\n            },\n    \n            _initAjax: function() {\n                var me = this,\n                    xhr = new XMLHttpRequest(),\n                    opts = this.options;\n    \n                if ( opts.withCredentials && !('withCredentials' in xhr) &&\n                        typeof XDomainRequest !== 'undefined' ) {\n                    xhr = new XDomainRequest();\n                }\n    \n                xhr.upload.onprogress = function( e ) {\n                    var percentage = 0;\n    \n                    if ( e.lengthComputable ) {\n                        percentage = e.loaded / e.total;\n                    }\n    \n                    return me.trigger( 'progress', percentage );\n                };\n    \n                xhr.onreadystatechange = function() {\n    \n                    if ( xhr.readyState !== 4 ) {\n                        return;\n                    }\n    \n                    xhr.upload.onprogress = noop;\n                    xhr.onreadystatechange = noop;\n                    me._xhr = null;\n                    me._status = xhr.status;\n    \n                    if ( xhr.status >= 200 && xhr.status < 300 ) {\n                        me._response = xhr.responseText;\n                        return me.trigger('load');\n                    } else if ( xhr.status >= 500 && xhr.status < 600 ) {\n                        me._response = xhr.responseText;\n                        return me.trigger( 'error', 'server' );\n                    }\n    \n    \n                    return me.trigger( 'error', me._status ? 'http' : 'abort' );\n                };\n    \n                me._xhr = xhr;\n                return xhr;\n            },\n    \n            _setRequestHeader: function( xhr, headers ) {\n                $.each( headers, function( key, val ) {\n                    xhr.setRequestHeader( key, val );\n                });\n            },\n    \n            _parseJson: function( str ) {\n                var json;\n    \n                try {\n                    json = JSON.parse( str );\n                } catch ( ex ) {\n                    json = {};\n                }\n    \n                return json;\n            }\n        });\n    });\n    /**\n     * @fileOverview  Transport flash实现\n     */\n    define('runtime/html5/md5',[\n        'runtime/html5/runtime'\n    ], function( FlashRuntime ) {\n    \n        /*\n         * Fastest md5 implementation around (JKM md5)\n         * Credits: Joseph Myers\n         *\n         * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n         * @see http://jsperf.com/md5-shootout/7\n         */\n    \n        /* this function is much faster,\n          so if possible we use it. Some IEs\n          are the only ones I know of that\n          need the idiotic second function,\n          generated by an if clause.  */\n        var add32 = function (a, b) {\n            return (a + b) & 0xFFFFFFFF;\n        },\n    \n        cmn = function (q, a, b, x, s, t) {\n            a = add32(add32(a, q), add32(x, t));\n            return add32((a << s) | (a >>> (32 - s)), b);\n        },\n    \n        ff = function (a, b, c, d, x, s, t) {\n            return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n        },\n    \n        gg = function (a, b, c, d, x, s, t) {\n            return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n        },\n    \n        hh = function (a, b, c, d, x, s, t) {\n            return cmn(b ^ c ^ d, a, b, x, s, t);\n        },\n    \n        ii = function (a, b, c, d, x, s, t) {\n            return cmn(c ^ (b | (~d)), a, b, x, s, t);\n        },\n    \n        md5cycle = function (x, k) {\n            var a = x[0],\n                b = x[1],\n                c = x[2],\n                d = x[3];\n    \n            a = ff(a, b, c, d, k[0], 7, -680876936);\n            d = ff(d, a, b, c, k[1], 12, -389564586);\n            c = ff(c, d, a, b, k[2], 17, 606105819);\n            b = ff(b, c, d, a, k[3], 22, -1044525330);\n            a = ff(a, b, c, d, k[4], 7, -176418897);\n            d = ff(d, a, b, c, k[5], 12, 1200080426);\n            c = ff(c, d, a, b, k[6], 17, -1473231341);\n            b = ff(b, c, d, a, k[7], 22, -45705983);\n            a = ff(a, b, c, d, k[8], 7, 1770035416);\n            d = ff(d, a, b, c, k[9], 12, -1958414417);\n            c = ff(c, d, a, b, k[10], 17, -42063);\n            b = ff(b, c, d, a, k[11], 22, -1990404162);\n            a = ff(a, b, c, d, k[12], 7, 1804603682);\n            d = ff(d, a, b, c, k[13], 12, -40341101);\n            c = ff(c, d, a, b, k[14], 17, -1502002290);\n            b = ff(b, c, d, a, k[15], 22, 1236535329);\n    \n            a = gg(a, b, c, d, k[1], 5, -165796510);\n            d = gg(d, a, b, c, k[6], 9, -1069501632);\n            c = gg(c, d, a, b, k[11], 14, 643717713);\n            b = gg(b, c, d, a, k[0], 20, -373897302);\n            a = gg(a, b, c, d, k[5], 5, -701558691);\n            d = gg(d, a, b, c, k[10], 9, 38016083);\n            c = gg(c, d, a, b, k[15], 14, -660478335);\n            b = gg(b, c, d, a, k[4], 20, -405537848);\n            a = gg(a, b, c, d, k[9], 5, 568446438);\n            d = gg(d, a, b, c, k[14], 9, -1019803690);\n            c = gg(c, d, a, b, k[3], 14, -187363961);\n            b = gg(b, c, d, a, k[8], 20, 1163531501);\n            a = gg(a, b, c, d, k[13], 5, -1444681467);\n            d = gg(d, a, b, c, k[2], 9, -51403784);\n            c = gg(c, d, a, b, k[7], 14, 1735328473);\n            b = gg(b, c, d, a, k[12], 20, -1926607734);\n    \n            a = hh(a, b, c, d, k[5], 4, -378558);\n            d = hh(d, a, b, c, k[8], 11, -2022574463);\n            c = hh(c, d, a, b, k[11], 16, 1839030562);\n            b = hh(b, c, d, a, k[14], 23, -35309556);\n            a = hh(a, b, c, d, k[1], 4, -1530992060);\n            d = hh(d, a, b, c, k[4], 11, 1272893353);\n            c = hh(c, d, a, b, k[7], 16, -155497632);\n            b = hh(b, c, d, a, k[10], 23, -1094730640);\n            a = hh(a, b, c, d, k[13], 4, 681279174);\n            d = hh(d, a, b, c, k[0], 11, -358537222);\n            c = hh(c, d, a, b, k[3], 16, -722521979);\n            b = hh(b, c, d, a, k[6], 23, 76029189);\n            a = hh(a, b, c, d, k[9], 4, -640364487);\n            d = hh(d, a, b, c, k[12], 11, -421815835);\n            c = hh(c, d, a, b, k[15], 16, 530742520);\n            b = hh(b, c, d, a, k[2], 23, -995338651);\n    \n            a = ii(a, b, c, d, k[0], 6, -198630844);\n            d = ii(d, a, b, c, k[7], 10, 1126891415);\n            c = ii(c, d, a, b, k[14], 15, -1416354905);\n            b = ii(b, c, d, a, k[5], 21, -57434055);\n            a = ii(a, b, c, d, k[12], 6, 1700485571);\n            d = ii(d, a, b, c, k[3], 10, -1894986606);\n            c = ii(c, d, a, b, k[10], 15, -1051523);\n            b = ii(b, c, d, a, k[1], 21, -2054922799);\n            a = ii(a, b, c, d, k[8], 6, 1873313359);\n            d = ii(d, a, b, c, k[15], 10, -30611744);\n            c = ii(c, d, a, b, k[6], 15, -1560198380);\n            b = ii(b, c, d, a, k[13], 21, 1309151649);\n            a = ii(a, b, c, d, k[4], 6, -145523070);\n            d = ii(d, a, b, c, k[11], 10, -1120210379);\n            c = ii(c, d, a, b, k[2], 15, 718787259);\n            b = ii(b, c, d, a, k[9], 21, -343485551);\n    \n            x[0] = add32(a, x[0]);\n            x[1] = add32(b, x[1]);\n            x[2] = add32(c, x[2]);\n            x[3] = add32(d, x[3]);\n        },\n    \n        /* there needs to be support for Unicode here,\n           * unless we pretend that we can redefine the MD-5\n           * algorithm for multi-byte characters (perhaps\n           * by adding every four 16-bit characters and\n           * shortening the sum to 32 bits). Otherwise\n           * I suggest performing MD-5 as if every character\n           * was two bytes--e.g., 0040 0025 = @%--but then\n           * how will an ordinary MD-5 sum be matched?\n           * There is no way to standardize text to something\n           * like UTF-8 before transformation; speed cost is\n           * utterly prohibitive. The JavaScript standard\n           * itself needs to look at this: it should start\n           * providing access to strings as preformed UTF-8\n           * 8-bit unsigned value arrays.\n           */\n        md5blk = function (s) {\n            var md5blks = [],\n                i; /* Andy King said do it this way. */\n    \n            for (i = 0; i < 64; i += 4) {\n                md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n            }\n            return md5blks;\n        },\n    \n        md5blk_array = function (a) {\n            var md5blks = [],\n                i; /* Andy King said do it this way. */\n    \n            for (i = 0; i < 64; i += 4) {\n                md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n            }\n            return md5blks;\n        },\n    \n        md51 = function (s) {\n            var n = s.length,\n                state = [1732584193, -271733879, -1732584194, 271733878],\n                i,\n                length,\n                tail,\n                tmp,\n                lo,\n                hi;\n    \n            for (i = 64; i <= n; i += 64) {\n                md5cycle(state, md5blk(s.substring(i - 64, i)));\n            }\n            s = s.substring(i - 64);\n            length = s.length;\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n            for (i = 0; i < length; i += 1) {\n                tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n            }\n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n            if (i > 55) {\n                md5cycle(state, tail);\n                for (i = 0; i < 16; i += 1) {\n                    tail[i] = 0;\n                }\n            }\n    \n            // Beware that the final length might not fit in 32 bits so we take care of that\n            tmp = n * 8;\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n            lo = parseInt(tmp[2], 16);\n            hi = parseInt(tmp[1], 16) || 0;\n    \n            tail[14] = lo;\n            tail[15] = hi;\n    \n            md5cycle(state, tail);\n            return state;\n        },\n    \n        md51_array = function (a) {\n            var n = a.length,\n                state = [1732584193, -271733879, -1732584194, 271733878],\n                i,\n                length,\n                tail,\n                tmp,\n                lo,\n                hi;\n    \n            for (i = 64; i <= n; i += 64) {\n                md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n            }\n    \n            // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n            // containing the last element of the parent array if the sub array specified starts\n            // beyond the length of the parent array - weird.\n            // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n            a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n    \n            length = a.length;\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n            for (i = 0; i < length; i += 1) {\n                tail[i >> 2] |= a[i] << ((i % 4) << 3);\n            }\n    \n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n            if (i > 55) {\n                md5cycle(state, tail);\n                for (i = 0; i < 16; i += 1) {\n                    tail[i] = 0;\n                }\n            }\n    \n            // Beware that the final length might not fit in 32 bits so we take care of that\n            tmp = n * 8;\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n            lo = parseInt(tmp[2], 16);\n            hi = parseInt(tmp[1], 16) || 0;\n    \n            tail[14] = lo;\n            tail[15] = hi;\n    \n            md5cycle(state, tail);\n    \n            return state;\n        },\n    \n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'],\n    \n        rhex = function (n) {\n            var s = '',\n                j;\n            for (j = 0; j < 4; j += 1) {\n                s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n            }\n            return s;\n        },\n    \n        hex = function (x) {\n            var i;\n            for (i = 0; i < x.length; i += 1) {\n                x[i] = rhex(x[i]);\n            }\n            return x.join('');\n        },\n    \n        md5 = function (s) {\n            return hex(md51(s));\n        },\n    \n    \n    \n        ////////////////////////////////////////////////////////////////////////////\n    \n        /**\n         * SparkMD5 OOP implementation.\n         *\n         * Use this class to perform an incremental md5, otherwise use the\n         * static methods instead.\n         */\n        SparkMD5 = function () {\n            // call reset to init the instance\n            this.reset();\n        };\n    \n    \n        // In some cases the fast add32 function cannot be used..\n        if (md5('hello') !== '5d41402abc4b2a76b9719d911017c592') {\n            add32 = function (x, y) {\n                var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                    msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n                return (msw << 16) | (lsw & 0xFFFF);\n            };\n        }\n    \n    \n        /**\n         * Appends a string.\n         * A conversion will be applied if an utf8 string is detected.\n         *\n         * @param {String} str The string to be appended\n         *\n         * @return {SparkMD5} The instance itself\n         */\n        SparkMD5.prototype.append = function (str) {\n            // converts the string to utf8 bytes if necessary\n            if (/[\\u0080-\\uFFFF]/.test(str)) {\n                str = unescape(encodeURIComponent(str));\n            }\n    \n            // then append as binary\n            this.appendBinary(str);\n    \n            return this;\n        };\n    \n        /**\n         * Appends a binary string.\n         *\n         * @param {String} contents The binary string to be appended\n         *\n         * @return {SparkMD5} The instance itself\n         */\n        SparkMD5.prototype.appendBinary = function (contents) {\n            this._buff += contents;\n            this._length += contents.length;\n    \n            var length = this._buff.length,\n                i;\n    \n            for (i = 64; i <= length; i += 64) {\n                md5cycle(this._state, md5blk(this._buff.substring(i - 64, i)));\n            }\n    \n            this._buff = this._buff.substr(i - 64);\n    \n            return this;\n        };\n    \n        /**\n         * Finishes the incremental computation, reseting the internal state and\n         * returning the result.\n         * Use the raw parameter to obtain the raw result instead of the hex one.\n         *\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\n         *\n         * @return {String|Array} The result\n         */\n        SparkMD5.prototype.end = function (raw) {\n            var buff = this._buff,\n                length = buff.length,\n                i,\n                tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n                ret;\n    \n            for (i = 0; i < length; i += 1) {\n                tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n            }\n    \n            this._finish(tail, length);\n            ret = raw ? this._state : hex(this._state);\n    \n            this.reset();\n    \n            return ret;\n        };\n    \n        /**\n         * Finish the final calculation based on the tail.\n         *\n         * @param {Array}  tail   The tail (will be modified)\n         * @param {Number} length The length of the remaining buffer\n         */\n        SparkMD5.prototype._finish = function (tail, length) {\n            var i = length,\n                tmp,\n                lo,\n                hi;\n    \n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n            if (i > 55) {\n                md5cycle(this._state, tail);\n                for (i = 0; i < 16; i += 1) {\n                    tail[i] = 0;\n                }\n            }\n    \n            // Do the final computation based on the tail and length\n            // Beware that the final length may not fit in 32 bits so we take care of that\n            tmp = this._length * 8;\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n            lo = parseInt(tmp[2], 16);\n            hi = parseInt(tmp[1], 16) || 0;\n    \n            tail[14] = lo;\n            tail[15] = hi;\n            md5cycle(this._state, tail);\n        };\n    \n        /**\n         * Resets the internal state of the computation.\n         *\n         * @return {SparkMD5} The instance itself\n         */\n        SparkMD5.prototype.reset = function () {\n            this._buff = \"\";\n            this._length = 0;\n            this._state = [1732584193, -271733879, -1732584194, 271733878];\n    \n            return this;\n        };\n    \n        /**\n         * Releases memory used by the incremental buffer and other aditional\n         * resources. If you plan to use the instance again, use reset instead.\n         */\n        SparkMD5.prototype.destroy = function () {\n            delete this._state;\n            delete this._buff;\n            delete this._length;\n        };\n    \n    \n        /**\n         * Performs the md5 hash on a string.\n         * A conversion will be applied if utf8 string is detected.\n         *\n         * @param {String}  str The string\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\n         *\n         * @return {String|Array} The result\n         */\n        SparkMD5.hash = function (str, raw) {\n            // converts the string to utf8 bytes if necessary\n            if (/[\\u0080-\\uFFFF]/.test(str)) {\n                str = unescape(encodeURIComponent(str));\n            }\n    \n            var hash = md51(str);\n    \n            return raw ? hash : hex(hash);\n        };\n    \n        /**\n         * Performs the md5 hash on a binary string.\n         *\n         * @param {String}  content The binary string\n         * @param {Boolean} raw     True to get the raw result, false to get the hex result\n         *\n         * @return {String|Array} The result\n         */\n        SparkMD5.hashBinary = function (content, raw) {\n            var hash = md51(content);\n    \n            return raw ? hash : hex(hash);\n        };\n    \n        /**\n         * SparkMD5 OOP implementation for array buffers.\n         *\n         * Use this class to perform an incremental md5 ONLY for array buffers.\n         */\n        SparkMD5.ArrayBuffer = function () {\n            // call reset to init the instance\n            this.reset();\n        };\n    \n        ////////////////////////////////////////////////////////////////////////////\n    \n        /**\n         * Appends an array buffer.\n         *\n         * @param {ArrayBuffer} arr The array to be appended\n         *\n         * @return {SparkMD5.ArrayBuffer} The instance itself\n         */\n        SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n            // TODO: we could avoid the concatenation here but the algorithm would be more complex\n            //       if you find yourself needing extra performance, please make a PR.\n            var buff = this._concatArrayBuffer(this._buff, arr),\n                length = buff.length,\n                i;\n    \n            this._length += arr.byteLength;\n    \n            for (i = 64; i <= length; i += 64) {\n                md5cycle(this._state, md5blk_array(buff.subarray(i - 64, i)));\n            }\n    \n            // Avoids IE10 weirdness (documented above)\n            this._buff = (i - 64) < length ? buff.subarray(i - 64) : new Uint8Array(0);\n    \n            return this;\n        };\n    \n        /**\n         * Finishes the incremental computation, reseting the internal state and\n         * returning the result.\n         * Use the raw parameter to obtain the raw result instead of the hex one.\n         *\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\n         *\n         * @return {String|Array} The result\n         */\n        SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n            var buff = this._buff,\n                length = buff.length,\n                tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n                i,\n                ret;\n    \n            for (i = 0; i < length; i += 1) {\n                tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n            }\n    \n            this._finish(tail, length);\n            ret = raw ? this._state : hex(this._state);\n    \n            this.reset();\n    \n            return ret;\n        };\n    \n        SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n    \n        /**\n         * Resets the internal state of the computation.\n         *\n         * @return {SparkMD5.ArrayBuffer} The instance itself\n         */\n        SparkMD5.ArrayBuffer.prototype.reset = function () {\n            this._buff = new Uint8Array(0);\n            this._length = 0;\n            this._state = [1732584193, -271733879, -1732584194, 271733878];\n    \n            return this;\n        };\n    \n        /**\n         * Releases memory used by the incremental buffer and other aditional\n         * resources. If you plan to use the instance again, use reset instead.\n         */\n        SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n    \n        /**\n         * Concats two array buffers, returning a new one.\n         *\n         * @param  {ArrayBuffer} first  The first array buffer\n         * @param  {ArrayBuffer} second The second array buffer\n         *\n         * @return {ArrayBuffer} The new array buffer\n         */\n        SparkMD5.ArrayBuffer.prototype._concatArrayBuffer = function (first, second) {\n            var firstLength = first.length,\n                result = new Uint8Array(firstLength + second.byteLength);\n    \n            result.set(first);\n            result.set(new Uint8Array(second), firstLength);\n    \n            return result;\n        };\n    \n        /**\n         * Performs the md5 hash on an array buffer.\n         *\n         * @param {ArrayBuffer} arr The array buffer\n         * @param {Boolean}     raw True to get the raw result, false to get the hex result\n         *\n         * @return {String|Array} The result\n         */\n        SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n            var hash = md51_array(new Uint8Array(arr));\n    \n            return raw ? hash : hex(hash);\n        };\n        \n        return FlashRuntime.register( 'Md5', {\n            init: function() {\n                // do nothing.\n            },\n    \n            loadFromBlob: function( file ) {\n                var blob = file.getSource(),\n                    chunkSize = 2 * 1024 * 1024,\n                    chunks = Math.ceil( blob.size / chunkSize ),\n                    chunk = 0,\n                    owner = this.owner,\n                    spark = new SparkMD5.ArrayBuffer(),\n                    me = this,\n                    blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice,\n                    loadNext, fr;\n    \n                fr = new FileReader();\n    \n                loadNext = function() {\n                    var start, end;\n    \n                    start = chunk * chunkSize;\n                    end = Math.min( start + chunkSize, blob.size );\n    \n                    fr.onload = function( e ) {\n                        spark.append( e.target.result );\n                        owner.trigger( 'progress', {\n                            total: file.size,\n                            loaded: end\n                        });\n                    };\n    \n                    fr.onloadend = function() {\n                        fr.onloadend = fr.onload = null;\n    \n                        if ( ++chunk < chunks ) {\n                            setTimeout( loadNext, 1 );\n                        } else {\n                            setTimeout(function(){\n                                owner.trigger('load');\n                                me.result = spark.end();\n                                loadNext = file = blob = spark = null;\n                                owner.trigger('complete');\n                            }, 50 );\n                        }\n                    };\n    \n                    fr.readAsArrayBuffer( blobSlice.call( blob, start, end ) );\n                };\n    \n                loadNext();\n            },\n    \n            getResult: function() {\n                return this.result;\n            }\n        });\n    });\n    /**\n     * @fileOverview FlashRuntime\n     */\n    define('runtime/flash/runtime',[\n        'base',\n        'runtime/runtime',\n        'runtime/compbase'\n    ], function( Base, Runtime, CompBase ) {\n    \n        var $ = Base.$,\n            type = 'flash',\n            components = {};\n    \n    \n        function getFlashVersion() {\n            var version;\n    \n            try {\n                version = navigator.plugins[ 'Shockwave Flash' ];\n                version = version.description;\n            } catch ( ex ) {\n                try {\n                    version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash')\n                            .GetVariable('$version');\n                } catch ( ex2 ) {\n                    version = '0.0';\n                }\n            }\n            version = version.match( /\\d+/g );\n            return parseFloat( version[ 0 ] + '.' + version[ 1 ], 10 );\n        }\n    \n        function FlashRuntime() {\n            var pool = {},\n                clients = {},\n                destroy = this.destroy,\n                me = this,\n                jsreciver = Base.guid('webuploader_');\n    \n            Runtime.apply( me, arguments );\n            me.type = type;\n    \n    \n            // 这个方法的调用者，实际上是RuntimeClient\n            me.exec = function( comp, fn/*, args...*/ ) {\n                var client = this,\n                    uid = client.uid,\n                    args = Base.slice( arguments, 2 ),\n                    instance;\n    \n                clients[ uid ] = client;\n    \n                if ( components[ comp ] ) {\n                    if ( !pool[ uid ] ) {\n                        pool[ uid ] = new components[ comp ]( client, me );\n                    }\n    \n                    instance = pool[ uid ];\n    \n                    if ( instance[ fn ] ) {\n                        return instance[ fn ].apply( instance, args );\n                    }\n                }\n    \n                return me.flashExec.apply( client, arguments );\n            };\n    \n            function handler( evt, obj ) {\n                var type = evt.type || evt,\n                    parts, uid;\n    \n                parts = type.split('::');\n                uid = parts[ 0 ];\n                type = parts[ 1 ];\n    \n                // console.log.apply( console, arguments );\n    \n                if ( type === 'Ready' && uid === me.uid ) {\n                    me.trigger('ready');\n                } else if ( clients[ uid ] ) {\n                    clients[ uid ].trigger( type.toLowerCase(), evt, obj );\n                }\n    \n                // Base.log( evt, obj );\n            }\n    \n            // flash的接受器。\n            window[ jsreciver ] = function() {\n                var args = arguments;\n    \n                // 为了能捕获得到。\n                setTimeout(function() {\n                    handler.apply( null, args );\n                }, 1 );\n            };\n    \n            this.jsreciver = jsreciver;\n    \n            this.destroy = function() {\n                // @todo 删除池子中的所有实例\n                return destroy && destroy.apply( this, arguments );\n            };\n    \n            this.flashExec = function( comp, fn ) {\n                var flash = me.getFlash(),\n                    args = Base.slice( arguments, 2 );\n    \n                return flash.exec( this.uid, comp, fn, args );\n            };\n    \n            // @todo\n        }\n    \n        Base.inherits( Runtime, {\n            constructor: FlashRuntime,\n    \n            init: function() {\n                var container = this.getContainer(),\n                    opts = this.options,\n                    html;\n    \n                // if not the minimal height, shims are not initialized\n                // in older browsers (e.g FF3.6, IE6,7,8, Safari 4.0,5.0, etc)\n                container.css({\n                    position: 'absolute',\n                    top: '-8px',\n                    left: '-8px',\n                    width: '9px',\n                    height: '9px',\n                    overflow: 'hidden'\n                });\n    \n                // insert flash object\n                html = '<object id=\"' + this.uid + '\" type=\"application/' +\n                        'x-shockwave-flash\" data=\"' +  opts.swf + '\" ';\n    \n                if ( Base.browser.ie ) {\n                    html += 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ';\n                }\n    \n                html += 'width=\"100%\" height=\"100%\" style=\"outline:0\">'  +\n                    '<param name=\"movie\" value=\"' + opts.swf + '\" />' +\n                    '<param name=\"flashvars\" value=\"uid=' + this.uid +\n                    '&jsreciver=' + this.jsreciver + '\" />' +\n                    '<param name=\"wmode\" value=\"transparent\" />' +\n                    '<param name=\"allowscriptaccess\" value=\"always\" />' +\n                '</object>';\n    \n                container.html( html );\n            },\n    \n            getFlash: function() {\n                if ( this._flash ) {\n                    return this._flash;\n                }\n    \n                this._flash = $( '#' + this.uid ).get( 0 );\n                return this._flash;\n            }\n    \n        });\n    \n        FlashRuntime.register = function( name, component ) {\n            component = components[ name ] = Base.inherits( CompBase, $.extend({\n    \n                // @todo fix this later\n                flashExec: function() {\n                    var owner = this.owner,\n                        runtime = this.getRuntime();\n    \n                    return runtime.flashExec.apply( owner, arguments );\n                }\n            }, component ) );\n    \n            return component;\n        };\n    \n        if ( getFlashVersion() >= 11.4 ) {\n            Runtime.addRuntime( type, FlashRuntime );\n        }\n    \n        return FlashRuntime;\n    });\n    /**\n     * @fileOverview FilePicker\n     */\n    define('runtime/flash/filepicker',[\n        'base',\n        'runtime/flash/runtime'\n    ], function( Base, FlashRuntime ) {\n        var $ = Base.$;\n    \n        return FlashRuntime.register( 'FilePicker', {\n            init: function( opts ) {\n                var copy = $.extend({}, opts ),\n                    len, i;\n    \n                // 修复Flash再没有设置title的情况下无法弹出flash文件选择框的bug.\n                len = copy.accept && copy.accept.length;\n                for (  i = 0; i < len; i++ ) {\n                    if ( !copy.accept[ i ].title ) {\n                        copy.accept[ i ].title = 'Files';\n                    }\n                }\n    \n                delete copy.button;\n                delete copy.id;\n                delete copy.container;\n    \n                this.flashExec( 'FilePicker', 'init', copy );\n            },\n    \n            destroy: function() {\n                this.flashExec( 'FilePicker', 'destroy' );\n            }\n        });\n    });\n    /**\n     * @fileOverview 图片压缩\n     */\n    define('runtime/flash/image',[\n        'runtime/flash/runtime'\n    ], function( FlashRuntime ) {\n    \n        return FlashRuntime.register( 'Image', {\n            // init: function( options ) {\n            //     var owner = this.owner;\n    \n            //     this.flashExec( 'Image', 'init', options );\n            //     owner.on( 'load', function() {\n            //         debugger;\n            //     });\n            // },\n    \n            loadFromBlob: function( blob ) {\n                var owner = this.owner;\n    \n                owner.info() && this.flashExec( 'Image', 'info', owner.info() );\n                owner.meta() && this.flashExec( 'Image', 'meta', owner.meta() );\n    \n                this.flashExec( 'Image', 'loadFromBlob', blob.uid );\n            }\n        });\n    });\n    /**\n     * @fileOverview  Transport flash实现\n     */\n    define('runtime/flash/transport',[\n        'base',\n        'runtime/flash/runtime',\n        'runtime/client'\n    ], function( Base, FlashRuntime, RuntimeClient ) {\n        var $ = Base.$;\n    \n        return FlashRuntime.register( 'Transport', {\n            init: function() {\n                this._status = 0;\n                this._response = null;\n                this._responseJson = null;\n            },\n    \n            send: function() {\n                var owner = this.owner,\n                    opts = this.options,\n                    xhr = this._initAjax(),\n                    blob = owner._blob,\n                    server = opts.server,\n                    binary;\n    \n                xhr.connectRuntime( blob.ruid );\n    \n                if ( opts.sendAsBinary ) {\n                    server += (/\\?/.test( server ) ? '&' : '?') +\n                            $.param( owner._formData );\n    \n                    binary = blob.uid;\n                } else {\n                    $.each( owner._formData, function( k, v ) {\n                        xhr.exec( 'append', k, v );\n                    });\n    \n                    xhr.exec( 'appendBlob', opts.fileVal, blob.uid,\n                            opts.filename || owner._formData.name || '' );\n                }\n    \n                this._setRequestHeader( xhr, opts.headers );\n                xhr.exec( 'send', {\n                    method: opts.method,\n                    url: server,\n                    forceURLStream: opts.forceURLStream,\n                    mimeType: 'application/octet-stream'\n                }, binary );\n            },\n    \n            getStatus: function() {\n                return this._status;\n            },\n    \n            getResponse: function() {\n                return this._response || '';\n            },\n    \n            getResponseAsJson: function() {\n                return this._responseJson;\n            },\n    \n            abort: function() {\n                var xhr = this._xhr;\n    \n                if ( xhr ) {\n                    xhr.exec('abort');\n                    xhr.destroy();\n                    this._xhr = xhr = null;\n                }\n            },\n    \n            destroy: function() {\n                this.abort();\n            },\n    \n            _initAjax: function() {\n                var me = this,\n                    xhr = new RuntimeClient('XMLHttpRequest');\n    \n                xhr.on( 'uploadprogress progress', function( e ) {\n                    var percent = e.loaded / e.total;\n                    percent = Math.min( 1, Math.max( 0, percent ) );\n                    return me.trigger( 'progress', percent );\n                });\n    \n                xhr.on( 'load', function() {\n                    var status = xhr.exec('getStatus'),\n                        readBody = false,\n                        err = '',\n                        p;\n    \n                    xhr.off();\n                    me._xhr = null;\n    \n                    if ( status >= 200 && status < 300 ) {\n                        readBody = true;\n                    } else if ( status >= 500 && status < 600 ) {\n                        readBody = true;\n                        err = 'server';\n                    } else {\n                        err = 'http';\n                    }\n    \n                    if ( readBody ) {\n                        me._response = xhr.exec('getResponse');\n                        me._response = decodeURIComponent( me._response );\n    \n                        // flash 处理可能存在 bug, 没辙只能靠 js 了\n                        // try {\n                        //     me._responseJson = xhr.exec('getResponseAsJson');\n                        // } catch ( error ) {\n                            \n                        p = window.JSON && window.JSON.parse || function( s ) {\n                            try {\n                                return new Function('return ' + s).call();\n                            } catch ( err ) {\n                                return {};\n                            }\n                        };\n                        me._responseJson  = me._response ? p(me._response) : {};\n                            \n                        // }\n                    }\n                    \n                    xhr.destroy();\n                    xhr = null;\n    \n                    return err ? me.trigger( 'error', err ) : me.trigger('load');\n                });\n    \n                xhr.on( 'error', function() {\n                    xhr.off();\n                    me._xhr = null;\n                    me.trigger( 'error', 'http' );\n                });\n    \n                me._xhr = xhr;\n                return xhr;\n            },\n    \n            _setRequestHeader: function( xhr, headers ) {\n                $.each( headers, function( key, val ) {\n                    xhr.exec( 'setRequestHeader', key, val );\n                });\n            }\n        });\n    });\n    /**\n     * @fileOverview Blob Html实现\n     */\n    define('runtime/flash/blob',[\n        'runtime/flash/runtime',\n        'lib/blob'\n    ], function( FlashRuntime, Blob ) {\n    \n        return FlashRuntime.register( 'Blob', {\n            slice: function( start, end ) {\n                var blob = this.flashExec( 'Blob', 'slice', start, end );\n    \n                return new Blob( blob.uid, blob );\n            }\n        });\n    });\n    /**\n     * @fileOverview  Md5 flash实现\n     */\n    define('runtime/flash/md5',[\n        'runtime/flash/runtime'\n    ], function( FlashRuntime ) {\n        \n        return FlashRuntime.register( 'Md5', {\n            init: function() {\n                // do nothing.\n            },\n    \n            loadFromBlob: function( blob ) {\n                return this.flashExec( 'Md5', 'loadFromBlob', blob.uid );\n            }\n        });\n    });\n    /**\n     * @fileOverview 完全版本。\n     */\n    define('preset/all',[\n        'base',\n    \n        // widgets\n        'widgets/filednd',\n        'widgets/filepaste',\n        'widgets/filepicker',\n        'widgets/image',\n        'widgets/queue',\n        'widgets/runtime',\n        'widgets/upload',\n        'widgets/validator',\n        'widgets/md5',\n    \n        // runtimes\n        // html5\n        'runtime/html5/blob',\n        'runtime/html5/dnd',\n        'runtime/html5/filepaste',\n        'runtime/html5/filepicker',\n        'runtime/html5/imagemeta/exif',\n        'runtime/html5/androidpatch',\n        'runtime/html5/image',\n        'runtime/html5/transport',\n        'runtime/html5/md5',\n    \n        // flash\n        'runtime/flash/filepicker',\n        'runtime/flash/image',\n        'runtime/flash/transport',\n        'runtime/flash/blob',\n        'runtime/flash/md5'\n    ], function( Base ) {\n        return Base;\n    });\n    /**\n     * @fileOverview 日志组件，主要用来收集错误信息，可以帮助 webuploader 更好的定位问题和发展。\n     *\n     * 如果您不想要启用此功能，请在打包的时候去掉 log 模块。\n     *\n     * 或者可以在初始化的时候通过 options.disableWidgets 属性禁用。\n     *\n     * 如：\n     * WebUploader.create({\n     *     ...\n     *\n     *     disableWidgets: 'log',\n     *\n     *     ...\n     * })\n     */\n    define('widgets/log',[\n        'base',\n        'uploader',\n        'widgets/widget'\n    ], function( Base, Uploader ) {\n        var $ = Base.$,\n            logUrl = ' http://static.tieba.baidu.com/tb/pms/img/st.gif??',\n            product = (location.hostname || location.host || 'protected').toLowerCase(),\n    \n            // 只针对 baidu 内部产品用户做统计功能。\n            enable = product && /baidu/i.exec(product),\n            base;\n    \n        if (!enable) {\n            return;\n        }\n    \n        base = {\n            dv: 3,\n            master: 'webuploader',\n            online: /test/.exec(product) ? 0 : 1,\n            module: '',\n            product: product,\n            type: 0\n        };\n    \n        function send(data) {\n            var obj = $.extend({}, base, data),\n                url = logUrl.replace(/^(.*)\\?/, '$1' + $.param( obj )),\n                image = new Image();\n    \n            image.src = url;\n        }\n    \n        return Uploader.register({\n            name: 'log',\n    \n            init: function() {\n                var owner = this.owner,\n                    count = 0,\n                    size = 0;\n    \n                owner\n                    .on('error', function(code) {\n                        send({\n                            type: 2,\n                            c_error_code: code\n                        });\n                    })\n                    .on('uploadError', function(file, reason) {\n                        send({\n                            type: 2,\n                            c_error_code: 'UPLOAD_ERROR',\n                            c_reason: '' + reason\n                        });\n                    })\n                    .on('uploadComplete', function(file) {\n                        count++;\n                        size += file.size;\n                    }).\n                    on('uploadFinished', function() {\n                        send({\n                            c_count: count,\n                            c_size: size\n                        });\n                        count = size = 0;\n                    });\n    \n                send({\n                    c_usage: 1\n                });\n            }\n        });\n    });\n    /**\n     * @fileOverview Uploader上传类\n     */\n    define('webuploader',[\n        'preset/all',\n        'widgets/log'\n    ], function( preset ) {\n        return preset;\n    });\n    return require('webuploader');\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/plugin/webuploader/webuploader.js\n// module id = 85\n// module chunks = 3 5 6 11 15 29 33","/*!\r\n * Cropper v0.9.2\r\n * https://github.com/fengyuanchen/cropper\r\n *\r\n * Copyright (c) 2014-2015 Fengyuan Chen and contributors\r\n * Released under the MIT license\r\n *\r\n * Date: 2015-04-18T04:35:01.500Z\r\n */\r\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(\"object\"==typeof exports?require(\"jquery\"):jQuery)}(function(a){\"use strict\";function b(a){return\"number\"==typeof a}function c(a){return\"undefined\"==typeof a}function d(a,c){var d=[];return b(c)&&d.push(c),d.slice.apply(a,d)}function e(a,b){var c=d(arguments,2);return function(){return a.apply(b,c.concat(d(arguments)))}}function f(a){var b=a.match(/^(https?:)\\/\\/([^\\:\\/\\?#]+):?(\\d*)/i);return b&&(b[1]!==o.protocol||b[2]!==o.hostname||b[3]!==o.port)}function g(a){var b=\"timestamp=\"+(new Date).getTime();return a+(-1===a.indexOf(\"?\")?\"?\":\"&\")+b}function h(a,b){return b.left<0&&a.width<b.left+b.width&&b.top<0&&a.height<b.top+b.height}function i(a){return a?\"rotate(\"+a+\"deg)\":\"none\"}function j(a,b){var c,d,e=R(a.degree)%180,f=(e>90?180-e:e)*Math.PI/180,g=S(f),h=T(f),i=a.width,j=a.height,k=a.aspectRatio;return b?(c=i/(h+g/k),d=c/k):(c=i*h+j*g,d=i*g+j*h),{width:c,height:d}}function k(b,c){var d=a(\"<canvas>\")[0],e=d.getContext(\"2d\"),f=c.naturalWidth,g=c.naturalHeight,h=c.rotate,i=j({width:f,height:g,degree:h});return h?(d.width=i.width,d.height=i.height,e.save(),e.translate(i.width/2,i.height/2),e.rotate(h*Math.PI/180),e.drawImage(b,-f/2,-g/2,f,g),e.restore()):(d.width=f,d.height=g,e.drawImage(b,0,0,f,g)),d}function l(b,c){this.$element=a(b),this.options=a.extend({},l.DEFAULTS,a.isPlainObject(c)&&c),this.ready=!1,this.built=!1,this.rotated=!1,this.cropped=!1,this.disabled=!1,this.canvas=null,this.cropBox=null,this.load()}var m=a(window),n=a(document),o=window.location,p=\".cropper\",q=\"preview\"+p,r=/^(e|n|w|s|ne|nw|sw|se|all|crop|move|zoom)$/,s=\"cropper-modal\",t=\"cropper-hide\",u=\"cropper-hidden\",v=\"cropper-invisible\",w=\"cropper-move\",x=\"cropper-crop\",y=\"cropper-disabled\",z=\"cropper-bg\",A=\"mousedown touchstart\",B=\"mousemove touchmove\",C=\"mouseup mouseleave touchend touchleave touchcancel\",D=\"wheel mousewheel DOMMouseScroll\",E=\"dblclick\",F=\"resize\"+p,G=\"build\"+p,H=\"built\"+p,I=\"dragstart\"+p,J=\"dragmove\"+p,K=\"dragend\"+p,L=\"zoomin\"+p,M=\"zoomout\"+p,N=a.isFunction(a(\"<canvas>\")[0].getContext),O=Math.sqrt,P=Math.min,Q=Math.max,R=Math.abs,S=Math.sin,T=Math.cos,U=parseFloat,V={};V.load=function(b){var c,d,e,h,i=this.options,j=this.$element;if(!b)if(j.is(\"img\")){if(!j.attr(\"src\"))return;b=j.prop(\"src\")}else j.is(\"canvas\")&&N&&(b=j[0].toDataURL());b&&(e=a.Event(G),j.one(G,i.build).trigger(e),e.isDefaultPrevented()||(i.checkImageOrigin&&f(b)&&(c=\"anonymous\",j.prop(\"crossOrigin\")||(d=g(b))),this.$clone=h=a(\"<img>\"),h.one(\"load\",a.proxy(function(){var a=h.prop(\"naturalWidth\")||h.width(),c=h.prop(\"naturalHeight\")||h.height();this.image={naturalWidth:a,naturalHeight:c,aspectRatio:a/c,rotate:0},this.url=b,this.ready=!0,this.build()},this)).one(\"error\",function(){h.remove()}).attr({src:d||b,crossOrigin:c}),h.addClass(t).insertAfter(j)))},V.build=function(){var b,c,d=this.$element,e=this.$clone,f=this.options;this.ready&&(this.built&&this.unbuild(),this.$cropper=b=a(l.TEMPLATE),d.addClass(u),e.removeClass(t),this.$container=d.parent().append(b),this.$canvas=b.find(\".cropper-canvas\").append(e),this.$dragBox=b.find(\".cropper-drag-box\"),this.$cropBox=c=b.find(\".cropper-crop-box\"),this.$viewBox=b.find(\".cropper-view-box\"),this.addListeners(),this.initPreview(),f.aspectRatio=U(f.aspectRatio)||0/0,f.autoCrop?(this.cropped=!0,f.modal&&this.$dragBox.addClass(s)):c.addClass(u),f.background&&b.addClass(z),f.highlight||c.find(\".cropper-face\").addClass(v),f.guides||c.find(\".cropper-dashed\").addClass(u),f.movable||c.find(\".cropper-face\").data(\"drag\",\"move\"),f.resizable||c.find(\".cropper-line, .cropper-point\").addClass(u),this.setDragMode(f.dragCrop?\"crop\":\"move\"),this.built=!0,this.render(),d.one(H,f.built).trigger(H))},V.unbuild=function(){this.built&&(this.built=!1,this.container=null,this.canvas=null,this.cropBox=null,this.removeListeners(),this.resetPreview(),this.$preview=null,this.$viewBox=null,this.$cropBox=null,this.$dragBox=null,this.$canvas=null,this.$container=null,this.$cropper.remove(),this.$cropper=null)},a.extend(V,{render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var a=this.$element,b=this.$container,c=this.$cropper,d=this.options;c.addClass(u),a.removeClass(u),c.css(this.container={width:Q(b.width(),U(d.minContainerWidth)||200),height:Q(b.height(),U(d.minContainerHeight)||100)}),a.addClass(u),c.removeClass(u)},initCanvas:function(){var b=this.container,c=b.width,d=b.height,e=this.image,f=e.aspectRatio,g={aspectRatio:f,width:c,height:d};d*f>c?g.height=c/f:g.width=d*f,g.oldLeft=g.left=(c-g.width)/2,g.oldTop=g.top=(d-g.height)/2,this.canvas=g,this.limitCanvas(!0,!0),this.initialImage=a.extend({},e),this.initialCanvas=a.extend({},g)},limitCanvas:function(b,c){var d,e,f=this.options,g=f.strict,h=this.container,i=h.width,j=h.height,k=this.canvas,l=k.aspectRatio,m=this.cropBox,n=this.cropped&&m;b&&(d=U(f.minCanvasWidth)||0,e=U(f.minCanvasHeight)||0,d?(g&&(d=Q(n?m.width:i,d)),e=d/l):e?(g&&(e=Q(n?m.height:j,e)),d=e*l):g&&(n?(d=m.width,e=m.height,e*l>d?d=e*l:e=d/l):(d=i,e=j,e*l>d?e=d/l:d=e*l)),a.extend(k,{minWidth:d,minHeight:e,maxWidth:1/0,maxHeight:1/0})),c&&(g?n?(k.minLeft=P(m.left,m.left+m.width-k.width),k.minTop=P(m.top,m.top+m.height-k.height),k.maxLeft=m.left,k.maxTop=m.top):(k.minLeft=P(0,i-k.width),k.minTop=P(0,j-k.height),k.maxLeft=Q(0,i-k.width),k.maxTop=Q(0,j-k.height)):(k.minLeft=-k.width,k.minTop=-k.height,k.maxLeft=i,k.maxTop=j))},renderCanvas:function(a){var b,c,d=this.options,e=this.canvas,f=this.image;this.rotated&&(this.rotated=!1,c=j({width:f.width,height:f.height,degree:f.rotate}),b=c.width/c.height,b!==e.aspectRatio&&(e.left-=(c.width-e.width)/2,e.top-=(c.height-e.height)/2,e.width=c.width,e.height=c.height,e.aspectRatio=b,this.limitCanvas(!0,!1))),(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=P(Q(e.width,e.minWidth),e.maxWidth),e.height=P(Q(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.oldLeft=e.left=P(Q(e.left,e.minLeft),e.maxLeft),e.oldTop=e.top=P(Q(e.top,e.minTop),e.maxTop),this.$canvas.css({width:e.width,height:e.height,left:e.left,top:e.top}),this.renderImage(),this.cropped&&d.strict&&!h(this.container,e)&&this.limitCropBox(!0,!0),a&&this.output()},renderImage:function(){var b,c=this.canvas,d=this.image;d.rotate&&(b=j({width:c.width,height:c.height,degree:d.rotate,aspectRatio:d.aspectRatio},!0)),a.extend(d,b?{width:b.width,height:b.height,left:(c.width-b.width)/2,top:(c.height-b.height)/2}:{width:c.width,height:c.height,left:0,top:0}),this.$clone.css({width:d.width,height:d.height,marginLeft:d.left,marginTop:d.top,transform:i(d.rotate)})},initCropBox:function(){var b=this.options,c=this.canvas,d=b.aspectRatio,e=U(b.autoCropArea)||.8,f={width:c.width,height:c.height};d&&(c.height*d>c.width?f.height=f.width/d:f.width=f.height*d),this.cropBox=f,this.limitCropBox(!0,!0),f.width=P(Q(f.width,f.minWidth),f.maxWidth),f.height=P(Q(f.height,f.minHeight),f.maxHeight),f.width=Q(f.minWidth,f.width*e),f.height=Q(f.minHeight,f.height*e),f.oldLeft=f.left=c.left+(c.width-f.width)/2,f.oldTop=f.top=c.top+(c.height-f.height)/2,this.initialCropBox=a.extend({},f)},limitCropBox:function(a,b){var c,d,e=this.options,f=e.strict,g=this.container,h=g.width,i=g.height,j=this.canvas,k=this.cropBox,l=e.aspectRatio;a&&(c=U(e.minCropBoxWidth)||0,d=U(e.minCropBoxHeight)||0,k.minWidth=P(h,c),k.minHeight=P(i,d),k.maxWidth=P(h,f?j.width:h),k.maxHeight=P(i,f?j.height:i),l&&(k.maxHeight*l>k.maxWidth?(k.minHeight=k.minWidth/l,k.maxHeight=k.maxWidth/l):(k.minWidth=k.minHeight*l,k.maxWidth=k.maxHeight*l)),k.minWidth=P(k.maxWidth,k.minWidth),k.minHeight=P(k.maxHeight,k.minHeight)),b&&(f?(k.minLeft=Q(0,j.left),k.minTop=Q(0,j.top),k.maxLeft=P(h,j.left+j.width)-k.width,k.maxTop=P(i,j.top+j.height)-k.height):(k.minLeft=0,k.minTop=0,k.maxLeft=h-k.width,k.maxTop=i-k.height))},renderCropBox:function(){var a=this.options,b=this.container,c=b.width,d=b.height,e=this.$cropBox,f=this.cropBox;(f.width>f.maxWidth||f.width<f.minWidth)&&(f.left=f.oldLeft),(f.height>f.maxHeight||f.height<f.minHeight)&&(f.top=f.oldTop),f.width=P(Q(f.width,f.minWidth),f.maxWidth),f.height=P(Q(f.height,f.minHeight),f.maxHeight),this.limitCropBox(!1,!0),f.oldLeft=f.left=P(Q(f.left,f.minLeft),f.maxLeft),f.oldTop=f.top=P(Q(f.top,f.minTop),f.maxTop),a.movable&&e.find(\".cropper-face\").data(\"drag\",f.width===c&&f.height===d?\"move\":\"all\"),e.css({width:f.width,height:f.height,left:f.left,top:f.top}),this.cropped&&a.strict&&!h(b,this.canvas)&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){var a=this.options;this.preview(),a.crop&&a.crop.call(this.$element,this.getData())}}),V.initPreview=function(){var b=this.url;this.$preview=a(this.options.preview),this.$viewBox.html('<img src=\"'+b+'\">'),this.$preview.each(function(){var c=a(this);c.data(q,{width:c.width(),height:c.height(),original:c.html()}).html('<img src=\"'+b+'\" style=\"display:block;width:100%;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation: 0deg!important\">')})},V.resetPreview=function(){this.$preview.each(function(){var b=a(this);b.html(b.data(q).original).removeData(q)})},V.preview=function(){var b=this.image,c=this.canvas,d=this.cropBox,e=b.width,f=b.height,g=d.left-c.left-b.left,h=d.top-c.top-b.top,j=b.rotate;this.cropped&&!this.disabled&&(this.$viewBox.find(\"img\").css({width:e,height:f,marginLeft:-g,marginTop:-h,transform:i(j)}),this.$preview.each(function(){var b=a(this),c=b.data(q),k=c.width/d.width,l=c.width,m=d.height*k;m>c.height&&(k=c.height/d.height,l=d.width*k,m=c.height),b.width(l).height(m).find(\"img\").css({width:e*k,height:f*k,marginLeft:-g*k,marginTop:-h*k,transform:i(j)})}))},V.addListeners=function(){var b=this.options;this.$element.on(I,b.dragstart).on(J,b.dragmove).on(K,b.dragend).on(L,b.zoomin).on(M,b.zoomout),this.$cropper.on(A,a.proxy(this.dragstart,this)).on(E,a.proxy(this.dblclick,this)),b.zoomable&&b.mouseWheelZoom&&this.$cropper.on(D,a.proxy(this.wheel,this)),n.on(B,this._dragmove=e(this.dragmove,this)).on(C,this._dragend=e(this.dragend,this)),b.responsive&&m.on(F,this._resize=e(this.resize,this))},V.removeListeners=function(){var a=this.options;this.$element.off(I,a.dragstart).off(J,a.dragmove).off(K,a.dragend).off(L,a.zoomin).off(M,a.zoomout),this.$cropper.off(A,this.dragstart).off(E,this.dblclick),a.zoomable&&a.mouseWheelZoom&&this.$cropper.off(D,this.wheel),n.off(B,this._dragmove).off(C,this._dragend),a.responsive&&m.off(F,this._resize)},a.extend(V,{resize:function(){var b,c,d,e=this.$container,f=this.container;this.disabled||(d=e.width()/f.width,(1!==d||e.height()!==f.height)&&(b=this.getCanvasData(),c=this.getCropBoxData(),this.render(),this.setCanvasData(a.each(b,function(a,c){b[a]=c*d})),this.setCropBoxData(a.each(c,function(a,b){c[a]=b*d}))))},dblclick:function(){this.disabled||this.setDragMode(this.$dragBox.hasClass(x)?\"move\":\"crop\")},wheel:function(a){var b=a.originalEvent,c=1;this.disabled||(a.preventDefault(),b.deltaY?c=b.deltaY>0?1:-1:b.wheelDelta?c=-b.wheelDelta/120:b.detail&&(c=b.detail>0?1:-1),this.zoom(.1*-c))},dragstart:function(b){var c,d,e,f=this.options,g=b.originalEvent,h=g&&g.touches,i=b;if(!this.disabled){if(h){if(e=h.length,e>1){if(!f.zoomable||!f.touchDragZoom||2!==e)return;i=h[1],this.startX2=i.pageX,this.startY2=i.pageY,c=\"zoom\"}i=h[0]}if(c=c||a(i.target).data(\"drag\"),r.test(c)){if(b.preventDefault(),d=a.Event(I,{originalEvent:g,dragType:c}),this.$element.trigger(d),d.isDefaultPrevented())return;this.dragType=c,this.cropping=!1,this.startX=i.pageX,this.startY=i.pageY,\"crop\"===c&&(this.cropping=!0,this.$dragBox.addClass(s))}}},dragmove:function(b){var c,d,e=this.options,f=b.originalEvent,g=f&&f.touches,h=b,i=this.dragType;if(!this.disabled){if(g){if(d=g.length,d>1){if(!e.zoomable||!e.touchDragZoom||2!==d)return;h=g[1],this.endX2=h.pageX,this.endY2=h.pageY}h=g[0]}if(i){if(b.preventDefault(),c=a.Event(J,{originalEvent:f,dragType:i}),this.$element.trigger(c),c.isDefaultPrevented())return;this.endX=h.pageX,this.endY=h.pageY,this.change()}}},dragend:function(b){var c,d=this.dragType;if(!this.disabled&&d){if(b.preventDefault(),c=a.Event(K,{originalEvent:b.originalEvent,dragType:d}),this.$element.trigger(c),c.isDefaultPrevented())return;this.cropping&&(this.cropping=!1,this.$dragBox.toggleClass(s,this.cropped&&this.options.modal)),this.dragType=\"\"}}}),a.extend(V,{reset:function(){this.built&&!this.disabled&&(this.image=a.extend({},this.initialImage),this.canvas=a.extend({},this.initialCanvas),this.renderCanvas(),this.cropped&&(this.cropBox=a.extend({},this.initialCropBox),this.renderCropBox()))},clear:function(){this.cropped&&!this.disabled&&(a.extend(this.cropBox,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(),this.renderCanvas(),this.$dragBox.removeClass(s),this.$cropBox.addClass(u))},destroy:function(){var a=this.$element;this.ready?(this.unbuild(),a.removeClass(u)):this.$clone.off(\"load\").remove(),a.removeData(\"cropper\")},replace:function(a){!this.disabled&&a&&this.load(a)},enable:function(){this.built&&(this.disabled=!1,this.$cropper.removeClass(y))},disable:function(){this.built&&(this.disabled=!0,this.$cropper.addClass(y))},move:function(a,c){var d=this.canvas;this.built&&!this.disabled&&b(a)&&b(c)&&(d.left+=a,d.top+=c,this.renderCanvas(!0))},zoom:function(b){var c,d,e,f=this.canvas;if(b=U(b),b&&this.built&&!this.disabled&&this.options.zoomable){if(c=a.Event(b>0?L:M),this.$element.trigger(c),c.isDefaultPrevented())return;b=-1>=b?1/(1-b):1>=b?1+b:b,d=f.width*b,e=f.height*b,f.left-=(d-f.width)/2,f.top-=(e-f.height)/2,f.width=d,f.height=e,this.renderCanvas(!0),this.setDragMode(\"move\")}},rotate:function(a){var b=this.image;a=U(a),a&&this.built&&!this.disabled&&this.options.rotatable&&(b.rotate=(b.rotate+a)%360,this.rotated=!0,this.renderCanvas(!0))},getData:function(){var b,c,d=this.cropBox,e=this.canvas,f=this.image;return this.built&&this.cropped?(c={x:d.left-e.left,y:d.top-e.top,width:d.width,height:d.height},b=f.width/f.naturalWidth,a.each(c,function(a,d){d/=b,c[a]=d})):c={x:0,y:0,width:0,height:0},c.rotate=f.rotate,c},getContainerData:function(){return this.built?this.container:{}},getImageData:function(){return this.ready?this.image:{}},getCanvasData:function(){var a,b=this.canvas;return this.built&&(a={left:b.left,top:b.top,width:b.width,height:b.height}),a||{}},setCanvasData:function(c){var d=this.canvas,e=d.aspectRatio;this.built&&!this.disabled&&a.isPlainObject(c)&&(b(c.left)&&(d.left=c.left),b(c.top)&&(d.top=c.top),b(c.width)?(d.width=c.width,d.height=c.width/e):b(c.height)&&(d.height=c.height,d.width=c.height*e),this.renderCanvas(!0))},getCropBoxData:function(){var a,b=this.cropBox;return this.built&&this.cropped&&(a={left:b.left,top:b.top,width:b.width,height:b.height}),a||{}},setCropBoxData:function(c){var d=this.cropBox,e=this.options.aspectRatio;this.built&&this.cropped&&!this.disabled&&a.isPlainObject(c)&&(b(c.left)&&(d.left=c.left),b(c.top)&&(d.top=c.top),e?b(c.width)?(d.width=c.width,d.height=d.width/e):b(c.height)&&(d.height=c.height,d.width=d.height*e):(b(c.width)&&(d.width=c.width),b(c.height)&&(d.height=c.height)),this.renderCropBox())},getCroppedCanvas:function(b){var c,d,e,f,g,h,i,j,l,m,n;if(this.built&&this.cropped&&N)return a.isPlainObject(b)||(b={}),n=this.getData(),c=n.width,d=n.height,j=c/d,a.isPlainObject(b)&&(g=b.width,h=b.height,g?(h=g/j,i=g/c):h&&(g=h*j,i=h/d)),e=g||c,f=h||d,l=a(\"<canvas>\")[0],l.width=e,l.height=f,m=l.getContext(\"2d\"),b.fillColor&&(m.fillStyle=b.fillColor,m.fillRect(0,0,e,f)),m.drawImage.apply(m,function(){var a,b,e,f,g,h,j=k(this.$clone[0],this.image),l=j.width,m=j.height,o=[j],p=n.x,q=n.y;return-c>=p||p>l?p=a=e=g=0:0>=p?(e=-p,p=0,a=g=P(l,c+p)):l>=p&&(e=0,a=g=P(c,l-p)),0>=a||-d>=q||q>m?q=b=f=h=0:0>=q?(f=-q,q=0,b=h=P(m,d+q)):m>=q&&(f=0,b=h=P(d,m-q)),o.push(p,q,a,b),i&&(e*=i,f*=i,g*=i,h*=i),g>0&&h>0&&o.push(e,f,g,h),o}.call(this)),l},setAspectRatio:function(a){var b=this.options;this.disabled||c(a)||(b.aspectRatio=U(a)||0/0,this.built&&(this.initCropBox(),this.cropped&&this.renderCropBox()))},setDragMode:function(a){var b=this.$dragBox,c=!1,d=!1;if(this.ready&&!this.disabled){switch(a){case\"crop\":this.options.dragCrop?(c=!0,b.data(\"drag\",a)):d=!0;break;case\"move\":d=!0,b.data(\"drag\",a);break;default:b.removeData(\"drag\")}b.toggleClass(x,c).toggleClass(w,d)}}}),V.change=function(){var a,b=this.dragType,c=this.options,d=this.canvas,e=this.container,f=this.cropBox,g=f.width,h=f.height,i=f.left,j=f.top,k=i+g,l=j+h,m=0,n=0,o=e.width,p=e.height,q=!0,r=c.aspectRatio,s={x:this.endX-this.startX,y:this.endY-this.startY};switch(c.strict&&(m=f.minLeft,n=f.minTop,o=m+P(e.width,d.width),p=n+P(e.height,d.height)),r&&(s.X=s.y*r,s.Y=s.x/r),b){case\"all\":i+=s.x,j+=s.y;break;case\"e\":if(s.x>=0&&(k>=o||r&&(n>=j||l>=p))){q=!1;break}g+=s.x,r&&(h=g/r,j-=s.Y/2),0>g&&(b=\"w\",g=0);break;case\"n\":if(s.y<=0&&(n>=j||r&&(m>=i||k>=o))){q=!1;break}h-=s.y,j+=s.y,r&&(g=h*r,i+=s.X/2),0>h&&(b=\"s\",h=0);break;case\"w\":if(s.x<=0&&(m>=i||r&&(n>=j||l>=p))){q=!1;break}g-=s.x,i+=s.x,r&&(h=g/r,j+=s.Y/2),0>g&&(b=\"e\",g=0);break;case\"s\":if(s.y>=0&&(l>=p||r&&(m>=i||k>=o))){q=!1;break}h+=s.y,r&&(g=h*r,i-=s.X/2),0>h&&(b=\"n\",h=0);break;case\"ne\":if(r){if(s.y<=0&&(n>=j||k>=o)){q=!1;break}h-=s.y,j+=s.y,g=h*r}else s.x>=0?o>k?g+=s.x:s.y<=0&&n>=j&&(q=!1):g+=s.x,s.y<=0?j>0&&(h-=s.y,j+=s.y):(h-=s.y,j+=s.y);0>g&&0>h?(b=\"sw\",h=0,g=0):0>g?(b=\"nw\",g=0):0>h&&(b=\"se\",h=0);break;case\"nw\":if(r){if(s.y<=0&&(n>=j||m>=i)){q=!1;break}h-=s.y,j+=s.y,g=h*r,i+=s.X}else s.x<=0?i>0?(g-=s.x,i+=s.x):s.y<=0&&n>=j&&(q=!1):(g-=s.x,i+=s.x),s.y<=0?j>0&&(h-=s.y,j+=s.y):(h-=s.y,j+=s.y);0>g&&0>h?(b=\"se\",h=0,g=0):0>g?(b=\"ne\",g=0):0>h&&(b=\"sw\",h=0);break;case\"sw\":if(r){if(s.x<=0&&(m>=i||l>=p)){q=!1;break}g-=s.x,i+=s.x,h=g/r}else s.x<=0?i>0?(g-=s.x,i+=s.x):s.y>=0&&l>=p&&(q=!1):(g-=s.x,i+=s.x),s.y>=0?p>l&&(h+=s.y):h+=s.y;0>g&&0>h?(b=\"ne\",h=0,g=0):0>g?(b=\"se\",g=0):0>h&&(b=\"nw\",h=0);break;case\"se\":if(r){if(s.x>=0&&(k>=o||l>=p)){q=!1;break}g+=s.x,h=g/r}else s.x>=0?o>k?g+=s.x:s.y>=0&&l>=p&&(q=!1):g+=s.x,s.y>=0?p>l&&(h+=s.y):h+=s.y;0>g&&0>h?(b=\"nw\",h=0,g=0):0>g?(b=\"sw\",g=0):0>h&&(b=\"ne\",h=0);break;case\"move\":d.left+=s.x,d.top+=s.y,this.renderCanvas(!0),q=!1;break;case\"zoom\":this.zoom(function(a,b,c,d){var e=O(a*a+b*b),f=O(c*c+d*d);return(f-e)/e}(R(this.startX-this.startX2),R(this.startY-this.startY2),R(this.endX-this.endX2),R(this.endY-this.endY2))),this.startX2=this.endX2,this.startY2=this.endY2,q=!1;break;case\"crop\":s.x&&s.y&&(a=this.$cropper.offset(),i=this.startX-a.left,j=this.startY-a.top,g=f.minWidth,h=f.minHeight,s.x>0?s.y>0?b=\"se\":(b=\"ne\",j-=h):s.y>0?(b=\"sw\",i-=g):(b=\"nw\",i-=g,j-=h),this.cropped||(this.cropped=!0,this.$cropBox.removeClass(u)))}q&&(f.width=g,f.height=h,f.left=i,f.top=j,this.dragType=b,this.renderCropBox()),this.startX=this.endX,this.startY=this.endY},a.extend(l.prototype,V),l.DEFAULTS={aspectRatio:0/0,autoCropArea:.8,crop:null,preview:\"\",strict:!0,responsive:!0,checkImageOrigin:!0,modal:!0,guides:!0,highlight:!0,background:!0,autoCrop:!0,dragCrop:!0,movable:!0,resizable:!0,rotatable:!0,zoomable:!0,touchDragZoom:!0,mouseWheelZoom:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,dragstart:null,dragmove:null,dragend:null,zoomin:null,zoomout:null},l.setDefaults=function(b){a.extend(l.DEFAULTS,b)},l.TEMPLATE=function(a,b){return b=b.split(\",\"),a.replace(/\\d+/g,function(a){return b[a]})}('<0 6=\"5-container\"><0 6=\"5-canvas\"></0><0 6=\"5-2-9\" 3-2=\"move\"></0><0 6=\"5-crop-9\"><1 6=\"5-view-9\"></1><1 6=\"5-8 8-h\"></1><1 6=\"5-8 8-v\"></1><1 6=\"5-face\" 3-2=\"all\"></1><1 6=\"5-7 7-e\" 3-2=\"e\"></1><1 6=\"5-7 7-n\" 3-2=\"n\"></1><1 6=\"5-7 7-w\" 3-2=\"w\"></1><1 6=\"5-7 7-s\" 3-2=\"s\"></1><1 6=\"5-4 4-e\" 3-2=\"e\"></1><1 6=\"5-4 4-n\" 3-2=\"n\"></1><1 6=\"5-4 4-w\" 3-2=\"w\"></1><1 6=\"5-4 4-s\" 3-2=\"s\"></1><1 6=\"5-4 4-ne\" 3-2=\"ne\"></1><1 6=\"5-4 4-nw\" 3-2=\"nw\"></1><1 6=\"5-4 4-sw\" 3-2=\"sw\"></1><1 6=\"5-4 4-se\" 3-2=\"se\"></1></0></0>',\"div,span,drag,data,point,cropper,class,line,dashed,box\"),l.other=a.fn.cropper,a.fn.cropper=function(b){var e,f=d(arguments,1);return this.each(function(){var c,d=a(this),g=d.data(\"cropper\");g||d.data(\"cropper\",g=new l(this,b)),\"string\"==typeof b&&a.isFunction(c=g[b])&&(e=c.apply(g,f))}),c(e)?this:e},a.fn.cropper.Constructor=l,a.fn.cropper.setDefaults=l.setDefaults,a.fn.cropper.noConflict=function(){return a.fn.cropper=l.other,this}});\n\n\n// WEBPACK FOOTER //\n// ./src/js/plugin/jquery.cropper.js","var cropper = require('module/cropper');\r\nvar fetch = require('io/fetch');\r\nvar url = require('io/url');\r\nvar hint = require('module/hint');\r\n\r\nvar $tabs = $('[data-node=\"editTab\"] a');\r\nvar $tabBoxs = $('[data-node=\"editBox\"]');\r\nvar $faceBox = $('[data-action=\"editFaceImg\"]');\r\n\r\nvar firstTab = true;\r\n\r\n\r\nvar cropperInit = function() {\r\n\r\n\tcropper.init(function(src) {\r\n\t\tfetch.post(url.get('subName'), {\r\n\t\t\tdata: {\r\n\t\t\t\tfacePicUrl: src\r\n\t\t\t}\r\n\t\t}).done(function(result) {\r\n\r\n\t\t\tif (result && result.success && result.code === 200) {\r\n\t\t\t\t$faceBox.find('img').attr(\"src\", src);\r\n\t\t\t\t$('[data-node=\"headImg\"]').attr(\"src\", src);\r\n\t\t\t\thint.init('保存成功');\r\n\t\t\t} else {\r\n\t\t\t\thint.init('保存失败');\r\n\t\t\t}\r\n\r\n\t\t}).fail(function() {\r\n\t\t\thint.init('保存失败');\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\nvar Tab = function() {\r\n\t$(document).on('click', '[data-node=\"editTab\"] a', function() {\r\n\t\tif (!$(this).hasClass('active')) {\r\n\t\t\t$('[data-node=comErrTip]').addClass('hide');\r\n\t\t\tvar index = $tabs.index($(this));\r\n\t\t\t$tabs.removeClass('active').eq(index).addClass('active');\r\n\t\t\t$tabBoxs.hide().eq(index).show();\r\n\t\t\tif (index === 1 && firstTab) {\r\n\t\t\t\tfirstTab = false;\r\n\t\t\t\tcropperInit();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t$faceBox.on('click', function() {\r\n\t\t$('[data-node=comErrTip]').addClass('hide');\r\n\t\t$tabs.eq(1).click();\r\n\t});\r\n};\r\n\r\n\r\n\r\nvar init = function() {\r\n\tTab();\r\n\tif (window.location.href.indexOf('type=2') !== -1) {\r\n\t\tcropperInit();\r\n\t}\r\n\r\n};\r\n\r\n\r\n\r\nmodule.exports = {\r\n\tinit: init\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uc_editInfo/editFace.js","var tips = require('module/i18n');\r\nvar editBox = $('[data-node=editBox]').eq(0);\r\nvar birTip = editBox.find('[data-node=birTip]');\r\nvar hideCls = 'hide';\r\n\r\nvar dateClick = function() {\r\n    editBox.on('click', '[data-node=showDate]', function() {\r\n        var dateDefault = $(this).attr('data-default');\r\n        if (dateDefault) {\r\n            birTip.removeClass(hideCls).text(tips.birthTip.tip);\r\n            return false;\r\n        }\r\n    });\r\n    var eTime = +$_CONFIG['curr_time'];\r\n    var option = {\r\n        endTime: eTime\r\n    };\r\n    require('module/date').initDate(option);\r\n};\r\nmodule.exports = {\r\n    init: dateClick\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uc_editInfo/selDate.js","/**\r\n * Created by dongyukuan on 2016/7/21.\r\n */\r\nfunction ShowDate(option) {\r\n    this.startTime = option ? option.startTime : +new Date(1930, 1, 1);\r\n    this.endTime = option ? option.endTime : +new Date(2099, 12, 30);\r\n    this.dateReg = /^\\d{4}-\\d{1,2}-\\d{1,2}$/;\r\n    this.yearErrTip = \"请输入正确年份！\";\r\n    this.monErrTip = \"请输入正确月份！\";\r\n    this.ymErrTip = \"请填写正确的年和月！\";\r\n}\r\nShowDate.prototype.addZero = function(num) {\r\n    var n = /^\\d$/;\r\n    var m;\r\n    if (n.test(num)) {\r\n        m = '0' + num;\r\n    } else {\r\n        m = num;\r\n    }\r\n    return m;\r\n};\r\n//获取内容或者写入内容\r\nShowDate.prototype.handleVal = function($node, text) {\r\n    if (text) {\r\n        $node.text(text);\r\n    } else {\r\n        return $node.text();\r\n    }\r\n};\r\n//指定时间戳与当前时间戳做比较\r\nShowDate.prototype.compareDate = function(date) {\r\n    var nowDate = this.endTime;\r\n    var ret = true;\r\n    if (date > nowDate) {\r\n        ret = false;\r\n    } else {\r\n        ret = true;\r\n    }\r\n    return ret;\r\n};\r\n//阿拉伯数字与大写数字的转换\r\nShowDate.prototype.switchNum = function(num) {\r\n    var numAry = ['一',\r\n        '二', '三', '四', '五', '六', '七', '八', '九', '十', '十一', '十二'\r\n    ];\r\n    var upperNum;\r\n    if (/^\\d+$/.test(num)) {\r\n        return numAry[num - 1];\r\n    } else {\r\n        $.each(numAry, function(index, value) {\r\n            if (value == num) {\r\n                upperNum = index + 1;\r\n            }\r\n        });\r\n        return upperNum;\r\n    }\r\n};\r\nShowDate.prototype.init = function() {\r\n    var _self = this;\r\n    //将日历模板添加到盒子中\r\n    if ($('[data-node=data_box]').length === 0) {\r\n        var tplHtml = _self.tpl();\r\n        $('body').append(tplHtml);\r\n    }\r\n    _self.dateContainer = $('[data-node=data_box]');\r\n\r\n    _self.dateBox = _self.dateContainer.find('[data-node=sel_date]');\r\n\r\n    _self.yearBox = _self.dateContainer.find('[data-node=year]');\r\n    _self.mnBox = _self.dateContainer.find('[data-node=month]');\r\n    _self.ymBox = _self.dateContainer.find('[data-node=month],[data-node=year]');\r\n\r\n    _self.dataTable = _self.dateBox.find('[data-node=data_table]');\r\n    _self.tbody = _self.dateBox.find('[data-node=tBody]');\r\n    _self.td = _self.tbody.find('td');\r\n\r\n    _self.prevM = _self.dateBox.find('[data-node=prev_m]');\r\n    _self.nextM = _self.dateBox.find('[data-node=next_m]');\r\n    _self.monBtn = _self.dateBox.find('[data-node=prev_m],[data-node=next_m]');\r\n\r\n    _self.prevY = _self.dateBox.find('[data-node=prev_y]');\r\n    _self.nextY = _self.dateBox.find('[data-node=next_y]');\r\n    _self.yearBtn = _self.dateBox.find('[data-node=prev_y],[data-node=next_y]');\r\n\r\n    //显示日历\r\n    $(document).on('click', '[data-node=showDate]', function() {\r\n        _self.changeDefault($(this));\r\n        _self.show();\r\n        _self.dateText = $(this);\r\n        var topBtn = $(this).offset().top;\r\n        var leftBtn = $(this).offset().left;\r\n\r\n        _self.dateContainer.css('position', 'absolute').css({\r\n            top: topBtn + 50,\r\n            left: leftBtn\r\n        });\r\n        _self.dateBox.css('marginTop', 0);\r\n        return false;\r\n    });\r\n    //点击空白 隐藏日历\r\n    $(document).on('click', function(event) {\r\n        var Target = $(event.target);\r\n        _self.hide(event, Target, $(this));\r\n    });\r\n    //点击选择日期\r\n    _self.tbody.on('click', 'td', function() {\r\n        var newDd = +$(this).text();\r\n        var newYear = parseInt(_self.handleVal(_self.yearBox), 10);\r\n        var newMn = _self.switchNum(_self.handleVal(_self.mnBox));\r\n        var dateFlag = $(this).hasClass('grayClr');\r\n        var trIndex = $(this).parents('tr').index();\r\n        if (dateFlag) {\r\n            if (trIndex === 0) {\r\n                if (newMn === 1) {\r\n                    newYear--;\r\n                    newMn = 12;\r\n                } else {\r\n                    newMn--;\r\n                }\r\n            } else {\r\n                if (newMn === 12) {\r\n                    newYear++;\r\n                    newMn = 1;\r\n                } else {\r\n                    newMn++;\r\n                }\r\n            }\r\n        }\r\n        if (isNaN(newYear) || isNaN(newMn) || newYear < 1930 || newYear > 2099 || newMn < 1 || newMn > 12) { //如果td有值;\r\n            //alert(_self.ymErrTip);\r\n            return false;\r\n        }\r\n        var newDate = +new Date(newYear + \"/\" + newMn + \"/\" + newDd);\r\n        var dateComFlag = _self.compareDate(newDate);\r\n        if (!dateComFlag) {\r\n            //alert(_self.ymErrTip);\r\n            return false;\r\n        }\r\n        _self.dateText.val(newYear + \"-\" + _self.addZero(newMn) + \"-\" + _self.addZero(newDd));\r\n        _self.dateContainer.addClass('hide');\r\n        _self.dateBox.addClass(\"hide\");\r\n    });\r\n    //点击切换月份\r\n    _self.monBtn.on('click', function() {\r\n        _self.changeMn($(this));\r\n        return $(this);\r\n    });\r\n    //点击切换年份\r\n    _self.yearBtn.on('click', function() {\r\n        _self.changeYr($(this));\r\n        return $(this);\r\n    });\r\n};\r\n//日历模板\r\nShowDate.prototype.tpl = function() {\r\n    var str = '';\r\n    str += '<div class=\"data_box hide\" data-node=\"data_box\"> <div class=\"sel_date hide\" data-node=\"sel_date\"> <div class=\"date-nav clearfix\"> <span class=\"icon prev_y fl\" data-node=\"prev_y\">&#xea72;</span> <span class=\"icon prev_m fl\" data-node=\"prev_m\">&#xe970;</span> <div class=\"show_mn fl\"> <a href=\"javascript:;\" data-node=\"month\"> </a> <span class=\"ml5\">月</span> <a href=\"javascript:;\" data-node=\"year\"></a> </div>  <span class=\"icon next_y fr\" data-node=\"next_y\">&#xea73;</span> <span class=\"icon next_m fr\" data-node=\"next_m\">&#xe98c;</span> </div> <table class=\"data_table\" data-node=\"data_table\" cellpadding=\"0\" cellspacing=\"0\"> <thead> <tr> <td>日</td> <td>一</td> <td>二</td> <td>三</td> <td>四</td> <td>五</td> <td>六</td> </tr> </thead> <tbody data-node=\"tBody\"> <tr> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> </tr> <tr> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> </tr> <tr> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> </tr> <tr> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> </tr> <tr> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> </tr> <tr> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> <td><span></span></td> </tr> </tbody> </table> </div> </div>';\r\n    return str;\r\n};\r\n//点击切换月份\r\nShowDate.prototype.changeMn = function(dateContainer) {\r\n    var _self = this;\r\n    var NewMn = _self.switchNum(_self.handleVal(_self.mnBox));\r\n    var newYear = parseInt(_self.handleVal(_self.yearBox), 10);\r\n    if (isNaN(NewMn) || isNaN(newYear)) {\r\n        alert(_self.ymErrTip);\r\n        return false;\r\n    }\r\n    if (dateContainer.hasClass('next_m')) {\r\n        NewMn++;\r\n    } else {\r\n        NewMn--;\r\n    }\r\n    if (NewMn < 1) {\r\n        NewMn = 12;\r\n        newYear--;\r\n    } else if (NewMn > 12) {\r\n        NewMn = 1;\r\n        newYear++;\r\n    }\r\n    _self.handleVal(_self.mnBox, _self.switchNum(NewMn));\r\n    _self.showNow(newYear, NewMn);\r\n};\r\n//点击切换年份\r\nShowDate.prototype.changeYr = function(dateContainer) {\r\n    var _self = this;\r\n    var NewMn = _self.switchNum(_self.handleVal(_self.mnBox));\r\n    var newYear = parseInt(_self.handleVal(_self.yearBox), 10);\r\n    if (isNaN(NewMn) || isNaN(newYear)) {\r\n        alert(_self.ymErrTip);\r\n        return false;\r\n    }\r\n    if (dateContainer.hasClass('next_y')) {\r\n        newYear++;\r\n    } else {\r\n        newYear--;\r\n    }\r\n    if (newYear < 1900) {\r\n        newYear = 1900;\r\n    } else if (newYear > 2099) {\r\n        newYear = 2099;\r\n    }\r\n    _self.handleVal(_self.mnBox, _self.switchNum(NewMn));\r\n    _self.showNow(newYear, NewMn);\r\n};\r\n//文本框 清空初始值\r\nShowDate.prototype.changeDefault = function(dateContainer) {\r\n    var _self = this;\r\n    var deVal = dateContainer.val();\r\n    var regExp = /^\\s*$/g;\r\n    if (!_self.dateReg.test(deVal)) {\r\n        dateContainer.text(\"\");\r\n        _self.showNow();\r\n    } else if (deVal.match(regExp) === null && _self.dateBox.hasClass('hide')) { //如果显示的是非空字符\r\n        var dayArr = deVal.match(/[0-9]{1,4}/g);\r\n        _self.showNow(dayArr[0], dayArr[1], dayArr[2]); //刷新日期\r\n    }\r\n};\r\n//文本框 还原初始值;\r\nShowDate.prototype.changeDefault2 = function(dateContainer) {\r\n    var _self = this;\r\n    var deVal = dateContainer.text();\r\n    if (/^\\s{0}$/.test(deVal)) {\r\n        dateContainer.text(_self.btnTxt);\r\n    }\r\n};\r\n//显示日历\r\nShowDate.prototype.show = function() {\r\n    var _self = this;\r\n    _self.dateContainer.toggleClass('hide');\r\n    _self.dateBox.toggleClass('hide');\r\n};\r\n//隐藏日历\r\nShowDate.prototype.hide = function(event, Target) {\r\n    var _self = this;\r\n    var oPare = Target;\r\n    var isChild = true;\r\n    if (oPare.parents('[data-node=data_box]').length === 0) {\r\n        isChild = false;\r\n    }\r\n    if (!isChild && !_self.dateBox.hasClass('hide')) {\r\n        _self.dateContainer.toggleClass('hide');\r\n        _self.dateBox.addClass('hide');\r\n        _self.changeDefault2(_self.dateText);\r\n    }\r\n};\r\n//填充年、月\r\nShowDate.prototype.showNow = function(yr, mn, date) {\r\n    var _self = this;\r\n    var now = new Date(_self.endTime);\r\n    var year = yr || now.getFullYear();\r\n    var month = mn - 1 || now.getMonth();\r\n    var dd = date || now.getDate();\r\n    //填充 年 和 月\r\n    _self.handleVal(_self.yearBox, year);\r\n    _self.handleVal(_self.mnBox, (_self.switchNum(mn) || _self.switchNum(now.getMonth() + 1)));\r\n    //填充日期\r\n    _self.showAllDay(year, month, dd);\r\n};\r\n//获取每月多少天\r\nShowDate.prototype.getDayLen = function(year, month) {\r\n    var d = new Date(year, month + 1);\r\n    d.setDate(0);\r\n    return d.getDate();\r\n};\r\n//填充当月的所有日期\r\nShowDate.prototype.showAllDay = function(Yr, Mn, Dd) {\r\n    var _self = this;\r\n    var newDate = new Date(Yr, Mn, Dd);\r\n    var year = newDate.getFullYear();\r\n    var month = newDate.getMonth();\r\n    newDate.setDate(0);\r\n    var firstDay = newDate.getDay() + 1;\r\n    var monthPre;//, monthNext;\r\n    if (month === 0) {\r\n        monthPre = 11;\r\n        // monthNext = 1;\r\n    } else if (month === 11) {\r\n        monthPre = 10;\r\n        // monthNext = 0;\r\n    } else {\r\n        monthPre = month - 1;\r\n        // monthNext = month + 1;\r\n    }\r\n    var dayLen = _self.getDayLen(year, month);\r\n    var dayLenPre = _self.getDayLen(year, monthPre);\r\n    // var daylenNext = _self.getDayLen(year, monthNext);\r\n    //清空日期\r\n    _self.td.each(function(index) {\r\n        _self.td.eq(index).removeClass('active').find('span').text(\"\");\r\n    });\r\n    //渲染日期排列\r\n    _self.td.removeClass('grayClr');\r\n    /*\r\n    针对2012-4，日历第一行皆置灰的处理 \r\n       if(firstDay >= 7){\r\n            firstDay -=7;\r\n        }\r\n    */\r\n    for (var i = 0, len = _self.td.length; i < len; i++) {\r\n        if (i < firstDay) {\r\n            _self.td.eq(i).addClass('grayClr').find('span').text(dayLenPre - firstDay + i + 1);\r\n        } else if (i >= firstDay && i < firstDay + dayLen) {\r\n            _self.td.eq(i).find('span').text(i - firstDay + 1);\r\n            if (i - firstDay + 1 == Dd && !_self.td.eq(i).hasClass(\"active\")) {\r\n                _self.td.eq(i).addClass('active');\r\n            }\r\n        } else {\r\n            _self.td.eq(i).addClass('grayClr').find('span').text(i - firstDay - dayLen + 1);\r\n        }\r\n    }\r\n};\r\n//函数调用\r\nmodule.exports = {\r\n    initDate: function(option) {\r\n        var miniDate = new ShowDate(option);\r\n        miniDate.init();\r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/date.js","var verifyName = require('./verifyName');\r\nvar limitLen = require('utils/limitLen');\r\nvar editCls = require('./editCls');\r\nvar remCls = editCls.remCls;\r\nvar addCls = editCls.addCls;\r\n\r\nvar editBox = $('[data-node=editBox]').eq(0);\r\nvar nickname = editBox.find('[data-node=nickname]');\r\nvar nameErr = editBox.find('[data-node=nameErr]');\r\nvar errBorder = editBox.find('[data-node=nameBorErr]');\r\nvar comErr = editBox.find('[data-node=comErrTip]');\r\n\r\nvar hideCls = 'hide';\r\nvar borErrCls = 'nicknerror';\r\nvar nameFoc = function() {\r\n\tremCls(errBorder, borErrCls);\r\n\taddCls(nameErr, hideCls);\r\n\taddCls(comErr, hideCls);\r\n};\r\nvar nameKeyup = function() {\r\n\tvar nameVal = nickname.val();\r\n\tvar len = nameVal.length;\r\n\tif (len > 20) {\r\n\t\tnickname.val(limitLen(nameVal, 20));\r\n\t}\r\n};\r\nvar initObj = {\r\n\tinit: function() {\r\n\t\tnickname.on({\r\n\t\t\tblur: verifyName.checkNameRule,\r\n\t\t\tfocus: nameFoc,\r\n\t\t\tkeyup: nameKeyup\r\n\t\t});\r\n\t}\r\n};\r\nmodule.exports = initObj;\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uc_editInfo/nameEvent.js","// var fetch = require('io/fetch');\r\n// var url = require('io/url');\r\nvar check = require('utils/check');\r\nvar nickTips = require('module/i18n').nickName;\r\n\r\n\r\nvar editCls = require('./editCls');\r\nvar remCls = editCls.remCls;\r\nvar addCls = editCls.addCls;\r\n\r\nvar editBox = $('[data-node=editBox]').eq(0);\r\nvar nickname = editBox.find('[data-node=nickname]');\r\nvar nameErr = editBox.find('[data-node=nameErr]');\r\nvar errBorder = editBox.find('[data-node=nameBorErr]');\r\n\r\nvar hideCls = 'hide';\r\nvar borErrCls = 'nicknerror';\r\n\r\nvar checkRule = function() {\r\n    var ret = true;\r\n    var nameVal = nickname.val();\r\n    var len = nameVal.length;\r\n    var lenFlag = !!(len >= 2 && len <= 20);\r\n    if (!nameVal) {\r\n        ret = false;\r\n        addCls(errBorder, borErrCls);\r\n        remCls(nameErr, hideCls).text(nickTips.eptName);\r\n    } else if (!check.checkNickName(nameVal) || !lenFlag) {\r\n        ret = false;\r\n        addCls(errBorder, borErrCls);\r\n        remCls(nameErr, hideCls).text(nickTips.commonTip);\r\n    } else {\r\n        ret = true;\r\n    }\r\n    return ret;\r\n};\r\n/*var nameExist = function() {\r\n    var nameVal = nickname.val();\r\n    var nameData = {\r\n        \"nickname\": nameVal\r\n    };\r\n    return fetch.get(url.get('checkName'), {\r\n        \"data\": nameData\r\n    }).done(function(data) {\r\n        if (data.success) {\r\n            remCls(errBorder, borErrCls);\r\n            addCls(nameErr, hideCls);\r\n        } else {\r\n            addCls(errBorder, borErrCls);\r\n            remCls(nameErr, hideCls).text(data.message);\r\n        }\r\n    }).fail(function() {\r\n        addCls(errBorder, borErrCls);\r\n        remCls(nameErr, hideCls).text(nickTips.errLine);\r\n    });\r\n};*/\r\n/*var checkName = function() {\r\n    var nameFlag = checkRule();\r\n    if (nameFlag) {\r\n        nameExist();\r\n    }\r\n};*/\r\nmodule.exports = {\r\n    /*\"checkName\": checkName,*/\r\n    \"checkNameRule\": checkRule\r\n   /* \"checkExist\": nameExist*/\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uc_editInfo/verifyName.js","/**\r\n * Created by dongyukuan on 2016/5/20.\r\n */\r\nvar obj = {\r\n    checkVal: function(val, pattern) {\r\n        return pattern.test(val);\r\n    },\r\n    isMobileNum: function(mobile) {\r\n        return /^1[34578][0-9]{9}$/.test(mobile);\r\n    },\r\n    isEmail: function(email) {\r\n        return /w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/.test(email);\r\n    },\r\n    isCertificate: function(certificate) {\r\n        return /^(\\d{15}$|^\\d{18}$|^\\d{17}(\\d|X|x))$/.test(certificate);\r\n    },\r\n    isCID: function(cardNo) {\r\n        return /^(\\d{16}|\\d{19})$/.test(cardNo);\r\n    },\r\n    isCWord: function(word, start, end) {\r\n        start = !isNaN(start) && start > 0 ? start : 1;\r\n        end = !isNaN(end) && end > 0 ? end : '';\r\n        var reg = new RegExp('^[\\\\u4e00-\\\\u9fa5]{' + start + ',' + end + '}$');\r\n        //var regPunctuation = /[1-9<>《》！\\*\\(\\^\\)\\$%~!@#\\…&%￥—\\+=、。，；‘’“”：'\"\\·`]/;\r\n        // var regRes = reg.test(word);\r\n        //var pugRes = regPunctuation.test(word);\r\n        return reg.test(word);\r\n    },\r\n    isArray: function(arr) {\r\n        return Array.isArray(arr) || (arr instanceof Array);\r\n    },\r\n    passwordReg: function(val) {\r\n        var reg = /^((?=.*?\\d)(?=.*?[A-Za-z])|(?=.*?\\d)(?=.*?[<>《》！\\*\\(\\^\\)\\$%~!@#\\…&%￥—\\+=、。，\\\"\\,\\:\\;；,\\.‘’“”：'\"\\·`【】])|(?=.*?[A-Za-z])(?=.*?[<>《》！\\*\\(\\^\\)\\$%~!@#\\…&%￥—\\+=、。，；‘’“”：'\"\\·`,\\.【】]))[\\dA-Za-z<>《》！\\*\\(\\^\\)\\$%~!@#\\…&%￥—\\+=、。，；‘’“”：'\"\\·`,\\.【】]{6,21}$/;\r\n        return reg.test(val);\r\n    },\r\n    checkSpace: function(val) {\r\n        var reg = /\\s+/;\r\n        return reg.test(val);\r\n    },\r\n    checkRefCode: function(refCode) {\r\n        var reg = /^[0-9a-zA-Z]{8}$/;\r\n        return reg.test(refCode);\r\n    },\r\n    checkNickName: function(name) {\r\n        var nickNameReg = /^([\\u4e00-\\u9fa5]|[0-9a-zA-Z_-])+$/;\r\n        return nickNameReg.test(name);\r\n    },\r\n    isMsgCode: function(num) {\r\n        var reg = /^\\d{6}$/;\r\n        return reg.test(num);\r\n    },\r\n    isImgCode: function(str) {\r\n        var reg = /^[0-9a-zA-Z]{4}$/;\r\n        return reg.test(str);\r\n    }\r\n};\r\nmodule.exports = obj;\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/check.js","var remCls = function($node, cls) {\r\n    if ($node.hasClass(cls)) {\r\n        $node.removeClass(cls);\r\n    }\r\n    return $node;\r\n};\r\nvar addCls = function($node, cls) {\r\n    if (!$node.hasClass(cls)) {\r\n        $node.addClass(cls);\r\n    }\r\n    return $node;\r\n};\r\nmodule.exports = {\r\n    remCls: remCls,\r\n    addCls: addCls\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uc_editInfo/editCls.js","/**\r\n * Created by dongyukuan on 2016/5/28.\r\n */\r\nfunction limitLen(str, len) {\r\n    if (str.length > len) {\r\n        return str.substr(0, len);\r\n    } else {\r\n        return str;\r\n    }\r\n}\r\nmodule.exports = limitLen;\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/limitLen.js","var fetch = require('io/fetch');\r\nvar url = require('io/url');\r\nvar nameTips = require('module/i18n').nickName;\r\nvar verifyName = require('./verifyName');\r\n\r\nvar editBox = $('[data-node=editBox]').eq(0);\r\nvar nickname = editBox.find('[data-node=nickname]');\r\nvar sexBox = editBox.find('[data-node=sexBox]');\r\nvar birthday = editBox.find('[data-node=showDate]');\r\nvar subDate = editBox.find('[data-action=subDate]');\r\nvar comTip = editBox.find('[data-node=comErrTip]');\r\nvar nameBorErr = editBox.find('[data-node=nameBorErr]');\r\nvar faceImg = editBox.find('[data-node=faceImg]');\r\nvar birthTip = editBox.find('[data-node=birTip]');\r\n\r\nvar header = $('[data-node=header]');\r\nvar headImg = header.find('[data-node=headImg]');\r\nvar headName = header.find('[data-node=headName]');\r\n\r\nvar birthPre = birthday.attr('data-default');\r\n\r\nvar dateReg = /^\\d{4}-\\d{1,2}-\\d{1,2}$/;\r\nvar hideCls = 'hide';\r\nvar errBorCls = 'nicknerror';\r\nvar sub = function() {\r\n    comTip.addClass(hideCls);\r\n    var nameVal = nickname.val();\r\n    var sexVal = sexBox.find('input:checked').val();\r\n    var birthVal = birthday.val();\r\n    birthVal = birthPre || (dateReg.test(birthVal) ? birthVal : '');\r\n    var faceImgUrl = faceImg.attr('src');\r\n    var nameFlag = verifyName.checkNameRule();\r\n    var errFlag = !nameBorErr.hasClass(errBorCls);\r\n    if (nameFlag && errFlag) {\r\n        // verifyName.checkExist().then(function(data) {\r\n        // if (data.success) {\r\n        var subData = {\r\n            \"facePicUrl\": faceImgUrl,\r\n            \"birthday\": birthVal,\r\n            \"nickname\": nameVal,\r\n            \"gender\": sexVal\r\n        };\r\n        fetch.post(url.get('subName'), {\r\n            data: subData\r\n        }).done(function(data) {\r\n            if (data.success) {\r\n                comTip.removeClass(hideCls).text(nameTips.sucSub);\r\n                headImg.attr('src', faceImgUrl);\r\n                headName.text(nameVal);\r\n                var birFlag = dateReg.test(birthVal);\r\n                if (birFlag && !birthPre) {\r\n                    birthday.attr('data-default', birthVal);\r\n                    birthTip.addClass(hideCls);\r\n                }\r\n            } else {\r\n                comTip.removeClass(hideCls).text(data.message);\r\n            }\r\n        }).fail(function() {\r\n            comTip.removeClass(hideCls).text(nameTips.errLine);\r\n        });\r\n    }\r\n    // });\r\n    // }\r\n};\r\nvar subEvent = function() {\r\n    subDate.on('click', sub);\r\n};\r\nmodule.exports = {\r\n    subInit: subEvent\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uc_editInfo/subData.js"],"sourceRoot":""}