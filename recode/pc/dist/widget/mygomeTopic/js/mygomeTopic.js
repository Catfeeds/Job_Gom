!function(){var p=mygomeTopicData.data.data;if(p.topics){var i,s=[],c=[],l=!0,a=[!0,!0,!0],o='<div class="pluspc-mygomeTopic-box" data-small="pluspc-mygomeTopic-boxS"><div class="pluspc-mygomeTopic-cont clearfix "><div class="pluspc-mygomeTopic-tab"> <div class="pluspc-left-tab J-pluspcTopic-tab"><a href="javascript:;" class="active">热门话题</a><a href="javascript:;">我发布的话题</a><a href="javascript:;">我收藏的话题</a></div><div class="pluspc-right-tab J-pluspc-create" ><a href="'+p.createTopicUrl+'" target="_blank">发布话题</a></div></div><div class="pluspc-mygomeTopic-list pluspc-mygomeTopic-show J-pluspcTopic-tabBox" ><div class="clearfix"><div class="pluspc-topic-list"></div><div class="pluspc-topic-list"></div><div class="pluspc-topic-list pluspc-topic-last"></div></div><div class="pluspc-moreTopic"><p>没看够？去发现更多<a href="'+p.homeUrl+'" target="_blank">精彩话题</a>吧～</p></div></div><div class="pluspc-mygomeTopic-list J-pluspcTopic-tabBox" ><div class="J-pluspc-info" style="display:none;"><div class="clearfix"><div class="pluspc-topic-list"></div><div class="pluspc-topic-list"></div><div class="pluspc-topic-list pluspc-topic-last"></div></div><div class="pluspc-moreTopic"><p>查看更多<a href="'+p.publishedTopicUrl+'" target="_blank">我发布的话题</a></p></div></div><div class="pluspc-noTopic J-pluspc-normal"><p>这里空空的~快去<a href="'+p.createTopicUrl+'" target="_blank">发布话题</a>吧！</p></div><div class="pluspc-noTopic J-pluspc-error"><p>系统繁忙，请稍后再试。<a href="'+window.location.href+'">点击刷新</a></p></div><div class="pluspc-topic-loading J-pluspc-loading"><span>加载中</span></div></div><div class="pluspc-mygomeTopic-list J-pluspcTopic-tabBox" ><div class="J-pluspc-info" style="display:none;"><div class="clearfix"><div class="pluspc-topic-list"></div><div class="pluspc-topic-list"></div><div class="pluspc-topic-list pluspc-topic-last"></div></div><div class="pluspc-moreTopic"><p>查看更多<a href="'+p.collectedTopicUrl+'" target="_blank">我收藏的话题</a></p></div></div><div class="pluspc-noTopic J-pluspc-error"><p>系统繁忙，请稍后再试。<a href="'+window.location.href+'">点击刷新</a></p></div><div class="pluspc-noTopic J-pluspc-normal"><p>暂无收藏话题~快去发现更多<a href="'+p.homeUrl+'" target="_blank">精彩话题</a>吧！</p></div><div class="pluspc-topic-loading J-pluspc-loading"><span>加载中</span></div></div></div></div>';mygomeTopicElement.html(o);var t={"//js.dev.meixincdn.com:1314/CDN8053/":"pre","//js.meixincdn.com/m/pc/":"online"},e="undefined"!=typeof gomeplusCdn?t[gomeplusCdn]:"online",d="";switch(e){case"pre":d="//api-pluspc.atguat.com.cn/widget/index";break;default:d="//api-pluspc.gome.com.cn/widget/index"}var n={createChild:function(p){var i=p.itemShow,s='<div class="pluspc-topic-box '+(""!==p.imageShow?"":"no-pic")+'">';if(""!==p.imageShow&&(s+='<div class="pluspc-topic-img"><a href="'+p.topicDetailUrl+'" target="_blank"><span class="pluspc-topic-img-bg"></span><img src="'+p.imageShow+'" alt="'+p.nameShow+'"></a></div>'),s+='<div class="pluspc-topic-cont">',s+='<p class="pluspc-topic-title"><a href="'+p.topicDetailUrl+'" target="_blank">'+p.nameShow+'</a></p><p class="pluspc-topic-icon clearfix"><span class="icon-like">'+p.likeQuantity+'</span><span class="icon-discuss">'+p.replyShow+'</span></p><p class="pluspc-topic-description"><a href="'+p.topicDetailUrl+'" target="_blank">'+p.textShow+"</a></p>",i.length>0){s+='<div class="pluspc-goods-list">';for(var c=0,l=p.itemShow.length;c<l;c++)s+='<div class="pluspc-goods-box clearfix"><a href="'+i[c].itemDetailUrl+'" target="_blank"><div class="pluspc-goods-img"><img src="'+i[c].url+'" alt="'+i[c].item.name+'"></div><div class="pluspc-goods-text"><p class="pluspc-goods-title">'+i[c].item.name+'</p><p class="pluspc-goods-price">'+i[c].item.salePrice+"</p></div></a></div>";s+="</div>"}return s+="</div>",s+="</div>"},getRows:function(p){i=$(".pluspc-mygomeTopic-list").eq(p).find(".pluspc-topic-list"),s=$("body").hasClass("w1000")||$("body").hasClass("w990")?[i.eq(0),i.eq(1)]:[i.eq(0),i.eq(1),i.eq(2)]},sortByHeight:function(){return s.sort(function(p,i){return p.height()-i.height()}),s},append:function(p,i){this.getRows(i);var s=n.sortByHeight(i),c=$(".pluspc-mygomeTopic-cont .J-pluspcTopic-tabBox").eq(i);if(p)if(p.topics){$(".pluspc-mygomeTopic-list").eq(i).find(".J-pluspc-info").show();for(var a=0,o=p.topics.length;a<o;a++)s=n.sortByHeight(i),s[0].append(n.createChild(p.topics[a])),s[0].find("img").error(function(){$(this).attr("src","//app.gomein.net.cn/images/grey.gif")});p.topics.length>29&&c.find(".pluspc-moreTopic").show()}else c.find(".J-pluspc-info").hide(),c.find(".J-pluspc-normal").show();0===i&&l&&(mygomeTopicElement.css("height","auto"),l=!1)},tab:function(){$("body").on("click",".J-pluspcTopic-tab a",function(){var p=$(".J-pluspcTopic-tab a").index($(this)),i=$(".J-pluspcTopic-tabBox");$(this).hasClass("active")||($(this).addClass("active").siblings().removeClass("active"),i.removeClass("pluspc-mygomeTopic-show").eq(p).addClass("pluspc-mygomeTopic-show"),1===p?$(".J-pluspc-create").show():$(".J-pluspc-create").hide(),p>0&&n.getOther(p),a[p]&&c[p]&&(n.append(c[p],p),a[p]=!1))})},getOther:function(p){var i,s,l=["","publishedTopic","collectedTopic"],i=$(".pluspc-mygomeTopic-cont .J-pluspcTopic-tabBox").eq(p);c[p]||$.ajax({url:d,type:"GET",dataType:"jsonp",data:{tplname:"mygome_topic",flag:l[p]},success:function(l){i.find(".J-pluspc-loading").hide(),200===l.code?(i=$(".pluspc-mygomeTopic-show"),s=$(".J-pluspcTopic-tabBox").index(i),c[p]=l.data.data,p===s&&(n.append(c[p],s),a[p]=!1)):i.find(".J-pluspc-error").show()},error:function(){i.find("J-pluspc-loading").hide(),i.find(".J-pluspc-error").show()}})},init:function(){n.append(p,0),n.tab()}};n.init()}}();