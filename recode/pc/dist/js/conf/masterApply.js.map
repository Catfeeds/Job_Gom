{"version":3,"sources":["webpack:///masterApply.js","webpack:///./src/js/page/masterApply/index.js","webpack:///./src/js/utils/truncate.js?b86a*","webpack:///./src/js/utils/byteLen.js?1ae0*","webpack:///./src/js/module/i18n.js?8f86***","webpack:///./src/js/plugin/webuploader/webuploader.js?37bb**","webpack:///./src/js/utils/trim.js?2399*","webpack:///./src/js/page/masterApply/checkIdCard/index.js","webpack:///./src/js/page/masterApply/validate/index.js","webpack:///./src/js/page/masterApply/regExp/index.js","webpack:///./src/js/page/masterApply/chooseCategory/index.js","webpack:///./src/js/page/masterApply/photoUpload/index.js","webpack:///./src/js/page/masterApply/dataBackfill/index.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","$","$_CONFIG","byteLen","fetch","url","truncate","errorMsg","masterApply","vilidate","chooseCategory","upload","inputInterval","$form","$tipError","find","$liName","$tipName","$inputName","$markerName","$liId","$inputId","$markerId","$tipId","$liCategory","$tipCategory","$textCategory","$liSummary","$inputSummary","$numSummary","$tipSummary","$btnSubmit","validSuccess","$li","$marker","removeClass","validFail","$tip","msg","addClass","html","publicTips","state","blurTemplete","params","result","defaultOptions","type","$target","options","extend","alert","Error","checkName","checkIdCard","checkSummary","success","lengthLimit","node","maxLength","val","inputNameEvent","oninput","onblur","$this","this","inputIdEvent","isIdCard","inputSummaryEvent","onfocus","setInterval","length","substring","clearInterval","submitEvent","sendAjax","imgs","option","realName","idCardNo","idcardFrontImageUrl","attr","idcardBackImageUrl","idcardPersonImageUrl","categoryId","introduction","post","data","done","code","location","href","i_domain","message","fail","check","checkupload","get","bindEvent","on","input","blur","focus","init","call","72","isHighSurrogate","codePoint","isLowSurrogate","string","byteLength","segment","charLength","curByteLength","i","charCodeAt","slice","73","str","replace","84","inputTip","tel","ept","err","errBack","msgCode","tipGet","tipEpt","tipErr","tipErrEdit","tipWrong","checkCodeWrong","send","tipSend","tipDisabled","tipLimitEdit","btnAfterSend","btnDefault","pwd","commonTip","pwdV","nickName","eptName","existName","sucSub","errLine","wrongName","birthTip","tip","refCode","imgCode","login","errCode","errNum","errPwd","agreement","createCircle","typeEmpty","nameEmpty","upperLimit","circle","unJoin","cannotJoin","review","joinSuccess","joinSuccessPublic","cannotJoinCircle","exit","dissolved","qrCodeTip","loseEffTip","loseEffBtn","failGetTip","failGetBtn","nameLength","nameType","summary","noUpload","uploadError","uploadFaild","uploadError_Master","Q_EXCEED_NUM_LIMIT","Q_EXCEED_SIZE_LIMIT","Q_TYPE_DENIED","F_EXCEED_SIZE","excess","86","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","__webpack_provided_window_dot_jQuery","root","factory","modules","_require","deps","callback","args","len","getModule","push","apply","_define","id","arguments","setModule","returned","undefined","exportsTo","obj","key","host","parts","part","last","ucFirst","charAt","toUpperCase","substr","hasOwnProperty","split","pop","shift","makeExport","dollar","__dollar","window","define","require","jQuery","Zepto","_","Deferred","when","isPromise","anything","then","promise","uncurryThis","fn","bindFn","context","createObject","proto","f","Object","create","prototype","noop","Function","version","browser","ua","ret","webkit","match","chrome","ie","firefox","safari","opera","parseFloat","navigator","userAgent","os","android","ios","inherits","Super","protos","staticProtos","child","constructor","__super__","log","console","nextTick","cb","setTimeout","guid","counter","prefix","Date","toString","Math","floor","random","formatSize","size","pointLength","units","unit","toFixed","Base","findHandlers","arr","name","grep","handler","e","_cb","ctx","eachEvent","events","iterator","each","separator","triggerHanders","stoped","ctx2","set","me","_events","once","off","trigger","allEvents","installTo","Mediator","Uploader","opts","_init","stop","getFile","getFiles","addFile","addFiles","sort","removeFile","cancelFile","skipFile","retry","isInProgress","makeThumb","md5File","getDimension","addButton","predictRuntimeType","refresh","disable","enable","reset","command","request","isPlainObject","getStats","stats","successNum","numOfSuccess","progressNum","numOfProgress","cancelNum","numOfCancel","invalidNum","numOfInvalid","uploadFailNum","numOfUploadFailed","queueNum","numOfQueue","interruptNum","numofInterrupt","isFunction","concat","destroy","Runtime","container","document","body","uid","factories","getFirstKey","getContainer","parent","_container","createElement","css","position","top","left","width","height","overflow","append","_parent","exec","remove","orders","addRuntime","hasRuntime","runtime","RuntimeClient","component","standalone","deferred","runtimeReady","connectRuntime","cache","__promise","resolve","__client","runtimeOrder","add","__standalone","getRuntime","disconnectRuntime","unshift","getRuid","ruid","RuntimeClent","DragAndDrop","accept","disableGlobalDnd","isArrayLike","nodeType","Widget","uploader","owner","_destroy","IGNORE","widgetClass","invoke","apiName","map","responseMap","widgets","_widgets","deactives","disableWidgets","klass","indexOf","_name","widget","rlt","rlts","dfds","pipe","register","widgetProto","toLowerCase","unRegister","splice","Dnd","dnd","files","items","FilePaste","paste","Blob","source","ext","start","end","getSource","File","file","rExt","RegExp","$1","lastModifiedDate","toLocaleString","FilePicker","innerHTML","label","button","multiple","_refer","_resizeHandler","shimContainer","outerWidth","outerHeight","pos","offset","bottom","right","btn","pick","pickers","addBtn","promises","picker","swf","Image","_info","_meta","quality","crop","preserveHeaders","allowMagnify","info","meta","loadFromBlob","blob","resize","getAsDataUrl","getAsBlob","throttle","max","occupied","waiting","tick","item","emiter","thumb","compress","image","isArtwork","reason","beforeSendFile","compressSize","noCompressIfLarger","_compressed","always","reject","gid","idPrefix","idSuffix","WUFile","statusText","statusMap","Status","INITED","loaded","setStatus","ERROR","status","text","prevStatus","getStatus","QUEUED","PROGRESS","COMPLETE","CANCELLED","INTERRUPT","INVALID","Queue","numofDeleted","_queue","_map","STATUS","_fileAdded","prepend","fileId","sts","inArray","existing","cur","pre","_onFileStatusChange","curStatus","preStatus","extensions","join","queue","placeholder","_ruid","_wrapFile","acceptFile","invalid","test","_addFile","auto","fetchFile","noForceStart","sortFiles","support","Transport","_blob","_formData","formData","_headers","headers","_timeout","clearTimeout","_timer","server","method","withCredentials","fileVal","timeout","sendAsBinary","appendBlob","filename","value","setRequestHeader","abort","getResponse","getResponseAsJson","duration","CuteFile","chunkSize","api","pending","total","chunks","ceil","index","has","block","min","chunk","cuted","blocks","remaning","prepareNextFile","chunked","chunkRetry","threads","runing","progress","pool","stack","__tick","_tick","v","transport","_trigged","_promise","startUpload","stopUpload","interrupt","_putback","_popBlock","_tr","_getStats","skipped","_nextBlock","_startSend","idx","_getStack","act","next","preparing","_prepareNextFile","_finishFile","_doSend","percentage","updateFileProgress","requestAccept","tr","_raw","flag","retried","hds","totalPercent","uploaded","validators","addValidator","removeValidator","count","parseInt","fileNumLimit","fileSizeLimit","fileSingleSizeLimit","hashString","_char","hash","mapping","duplicate","__hash","Md5","getResult","md5","notify","CompBase","Html5Runtime","comp","instance","client","components","FileReader","DataView","webkitSlice","mozSlice","elem","dragEnterHandler","_dragEnterHandler","dragOverHandler","_dragOverHandler","dragLeaveHandler","_dragLeaveHandler","dropHandler","_dropHandler","dndOver","denied","_denied","originalEvent","dataTransfer","dropEffect","parentElem","contains","currentTarget","_leaveTimer","getData","_getTansferFiles","results","canAccessFolder","webkitGetAsEntry","isDirectory","_traverseDirectoryTree","entry","isFile","createReader","readEntries","entries","mimeTypes","hander","_pasteHander","allowed","clipboardData","kind","getAsFile","preventDefault","stopPropagation","mouseHandler","opacity","display","cursor","background","clone","callee","target","cloneNode","parentNode","replaceChild","urlAPI","createObjectURL","URL","revokeObjectURL","webkitURL","dataURL2Blob","dataURI","byteStr","intArray","ab","mimetype","atob","decodeURIComponent","ArrayBuffer","Uint8Array","arrayBufferToBlob","dataURL2ArrayBuffer","buffer","bb","builder","BlobBuilder","WebKitBlobBuilder","getBlob","canvasToDataUrl","canvas","toDataURL","parseMeta","updateImageHead","Util","parsers","65505","maxMetaDataSize","parse","fr","onload","_parse","onerror","readAsArrayBuffer","noParse","markerBytes","markerLength","dataview","maxOffset","headLength","getUint16","imageHead","subarray","head","buf1","buf2","bodyoffset","ImageMeta","EXIF","ExifMap","Orientation","exifTagTypes","1","getValue","dataView","dataOffset","getUint8","2","String","fromCharCode","ascii","3","littleEndian","4","getUint32","5","9","getInt32","10","getExifValue","tiffOffset","tagSize","values","c","tagType","parseExifTag","tag","exif","parseExifTags","dirOffset","tagsNumber","dirEndOffset","parseExifData","JPEGEncoder","initQuantTables","sf","YQT","t","ffloor","YTable","ZigZag","UVQT","j","u","UVTable","aasf","k","row","col","fdtbl_Y","fdtbl_UV","computeHuffmanTbl","nrcodes","std_table","codevalue","pos_in_table","HT","Array","initHuffmanTbl","YDC_HT","std_dc_luminance_nrcodes","std_dc_luminance_values","UVDC_HT","std_dc_chrominance_nrcodes","std_dc_chrominance_values","YAC_HT","std_ac_luminance_nrcodes","std_ac_luminance_values","UVAC_HT","std_ac_chrominance_nrcodes","std_ac_chrominance_values","initCategoryNumber","nrlower","nrupper","cat","nr","category","bitcode","nrneg","initRGBYUVTable","RGB_YUV_TABLE","writeBits","bs","posval","bytenew","bytepos","writeByte","byteout","clt","writeWord","fDCTQuant","fdtbl","d0","d1","d2","d3","d4","d5","d6","d7","dataOff","I8","I64","tmp0","tmp7","tmp1","tmp6","tmp2","tmp5","tmp3","tmp4","tmp10","tmp13","tmp11","tmp12","z1","z5","z2","z4","z3","z11","z13","tmp0p2","tmp7p2","tmp1p2","tmp6p2","tmp2p2","tmp5p2","tmp3p2","tmp4p2","tmp10p2","tmp13p2","tmp11p2","tmp12p2","z1p2","z5p2","z2p2","z4p2","z3p2","z11p2","z13p2","outputfDCTQuant","writeAPP0","writeSOF0","writeDQT","writeDHT","l","m","n","o","p","writeSOS","processDU","CDU","DC","HTDC","HTAC","EOB","M16zeroes","I16","I63","DU_DCT","DU","Diff","end0pos","lng","startpos","nrzeroes","nrmarker","initCharLookupTable","sfcc","setQuality","currentQuality","round","YDU","UDU","VDU","encode","DCY","DCU","DCV","displayName","x","r","g","b","imageData","quadWidth","y","fillbits","jpegDataUri","btoa","encoder","supportJpeg","origin","w","h","fragement","getContext","getImageData","BLANK","modified","img","_metas","error","_img","src","_canvas","_resize","s","cvs","iw","naturalWidth","ih","naturalHeight","orientation","getOrientation","_rotate2Orientaion","_renderImageToCanvas","clearRect","scale","translate","rotate","PI","detectVerticalSquash","alpha","ratio","sy","ey","py","drawImage","detectSubsampling","vertSquashRatio","tmpCanvas","tmpCtx","dw","dh","sx","dx","subsampled","doSquash","d","dy","save","restore","_status","_response","binary","xhr","_initAjax","param","FormData","open","_setRequestHeader","overrideMimeType","_parseJson","_xhr","onprogress","onreadystatechange","XMLHttpRequest","XDomainRequest","lengthComputable","readyState","responseText","json","JSON","ex","FlashRuntime","add32","a","cmn","q","ff","gg","hh","ii","md5cycle","md5blk","md5blks","md5blk_array","md51","tail","tmp","lo","hi","md51_array","hex_chr","rhex","hex","SparkMD5","lsw","msw","unescape","encodeURIComponent","appendBinary","contents","_buff","_length","_state","raw","buff","_finish","hashBinary","content","_concatArrayBuffer","first","second","firstLength","loadNext","spark","blobSlice","onloadend","getFlashVersion","plugins","description","ActiveXObject","GetVariable","ex2","evt","clients","jsreciver","flashExec","flash","getFlash","_flash","copy","title","_responseJson","forceURLStream","mimeType","percent","readBody","base","logUrl","product","hostname","dv","master","online","c_error_code","c_reason","c_count","c_size","c_usage","preset","89","trim","180","aCity","11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91","sId","iSum","sBirthday","Number","getFullYear","getMonth","getDate","pow","181","moduleTrim","regExp","fn_checkId","pass","webPick","182","183","listData","$categoryForm","$categoryActive","$categoryTxt","$categoryList","$categoryTip","$document","getChooseData","children","expertCategories","event","is","184","$rt","webUploader","imgpath","onFileQueued","prev","parents","eq","nextAll","response","uli","hasClass","fun","185","applyFlag","backfillData","expertInfo","listOptions","time","$pick","$uploader","childNodes"],"mappings":"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","file":"masterApply.js","sourcesContent":["webpackJsonp([12],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($, $_CONFIG) {'use strict';\n\t\n\tvar byteLen = __webpack_require__(73);\n\tvar fetch = __webpack_require__(21);\n\tvar url = __webpack_require__(24);\n\tvar truncate = __webpack_require__(72);\n\tvar errorMsg = __webpack_require__(84).masterApply;\n\t\n\t__webpack_require__(180);\n\tvar vilidate = __webpack_require__(181);\n\tvar chooseCategory = __webpack_require__(183);\n\tvar upload = __webpack_require__(184);\n\t__webpack_require__(185);\n\t\n\tvar $form = $('[data-node=form]');\n\tvar $tipError = $form.find('[data-node=tipError]');\n\t\n\tvar $liName = $form.find('[data-node=liName]');\n\tvar $tipName = $liName.find('[data-node=tipTxt]');\n\tvar $inputName = $liName.find('[data-node=inputName]');\n\tvar $markerName = $liName.find('[data-node=markerName]');\n\t\n\tvar $liId = $form.find('[data-node=liId]');\n\tvar $inputId = $liId.find('[data-node=inputId]');\n\tvar $markerId = $liId.find('[data-node=markerId]');\n\tvar $tipId = $liId.find('[data-node=tipId]');\n\t\n\tvar $liCategory = $form.find('[data-node=categoryLi]');\n\tvar $tipCategory = $form.find('[data-node=categoryTip]');\n\tvar $textCategory = $form.find('[data-node=categoryTxt]');\n\t\n\tvar $liSummary = $form.find('[data-node=liSummary]');\n\tvar $inputSummary = $liSummary.find('[data-node=inputSummary]');\n\tvar $numSummary = $liSummary.find('[data-node=numSummary]');\n\tvar $tipSummary = $liSummary.find('[data-node=tipSummary]');\n\tvar inputInterval;\n\t\n\tvar $btnSubmit = $('[data-node=btnSubmit]');\n\tvar validSuccess = function validSuccess($li, $marker) {\n\t    if ($li) $li.removeClass('dr-form-error');\n\t    if ($marker) $marker.removeClass('hide');\n\t};\n\t\n\tvar validFail = function validFail($li, $marker, $tip, msg) {\n\t    if ($li) $li.addClass('dr-form-error');\n\t    if ($marker) $marker.addClass('hide');\n\t    if ($tip) $tip.html(msg);\n\t};\n\t\n\tvar publicTips = function publicTips(state, msg) {\n\t    msg = msg || '';\n\t    state = state || 'show';\n\t    if (state === 'show') {\n\t        $tipError.html(msg).removeClass('hide');\n\t    } else if (state === 'hide') {\n\t        $tipError.html(msg).addClass('hide');\n\t    }\n\t};\n\t\n\tvar blurTemplete = function blurTemplete(params) {\n\t    var defaultOptions = {\n\t        type: null,\n\t        $target: {},\n\t        $li: false,\n\t        $marker: false,\n\t        $tip: false,\n\t        msg: false\n\t    };\n\t    var options = $.extend({}, true, defaultOptions, params);\n\t    var result;\n\t    if (options.type === null) return alert(new Error(''));\n\t    switch (options.type) {\n\t        case 'name':\n\t            result = vilidate.checkName(options.$target);\n\t            break;\n\t        case 'id':\n\t            result = vilidate.checkIdCard(options.$target);\n\t            break;\n\t        case 'summary':\n\t            result = vilidate.checkSummary(options.$target);\n\t            break;\n\t    }\n\t    if (result.success) {\n\t        validSuccess(options.$li, options.$marker);\n\t    } else {\n\t        if (options.msg) {\n\t            validFail(options.$li, options.$marker, options.$tip, options.msg);\n\t        } else {\n\t            validFail(options.$li, options.$marker, options.$tip, result.msg);\n\t        }\n\t    }\n\t};\n\t\n\tvar lengthLimit = function lengthLimit(node, maxLength) {\n\t    if (byteLen(node.val()) >= maxLength) {\n\t        node.val(truncate(node.val(), maxLength));\n\t    }\n\t};\n\t//\n\tvar inputNameEvent = {\n\t    oninput: function oninput() {\n\t        lengthLimit($inputName, 20);\n\t    },\n\t    onblur: function onblur() {\n\t        var $this = this;\n\t        blurTemplete({\n\t            type: 'name',\n\t            $target: $this,\n\t            $li: $liName,\n\t            $marker: $markerName,\n\t            $tip: $tipName\n\t        });\n\t    }\n\t};\n\t// \n\tvar inputIdEvent = {\n\t    oninput: function oninput() {\n\t        lengthLimit($inputId, 18);\n\t    },\n\t    onblur: function onblur() {\n\t        var $this = this;\n\t        blurTemplete({\n\t            type: 'id',\n\t            $target: $this,\n\t            $li: $liId,\n\t            $marker: $markerId,\n\t            $tip: $tipId,\n\t            msg: errorMsg.isIdCard\n\t        });\n\t    }\n\t};\n\t\n\t//\n\tvar inputSummaryEvent = {\n\t    onfocus: function onfocus() {\n\t        inputInterval = setInterval(function () {\n\t            if ($inputSummary.val().length >= 100) {\n\t                $inputSummary.val($inputSummary.val().substring(0, 100));\n\t            }\n\t            $numSummary.html($inputSummary.val().length);\n\t        }, 100);\n\t    },\n\t    oninput: function oninput() {\n\t        $numSummary.html($inputSummary.val().length);\n\t        if ($inputSummary.val().length >= 100) {\n\t            $inputSummary.val($inputSummary.val().substring(0, 100));\n\t        }\n\t    },\n\t    onblur: function onblur() {\n\t        clearInterval(inputInterval);\n\t        var $this = this;\n\t        blurTemplete({\n\t            type: 'summary',\n\t            $target: $this,\n\t            $li: $liSummary,\n\t            $tip: $tipSummary\n\t        });\n\t    }\n\t};\n\tvar submitEvent = function submitEvent() {\n\t    publicTips('hide');\n\t    if (!vilidate.checkName($inputName).success) {\n\t        return validFail($liName, $markerName, $tipName, vilidate.checkName($inputName).msg);\n\t    }\n\t    if (!vilidate.checkIdCard($inputId).success) {\n\t        return validFail($liId, $markerId, $tipId, errorMsg.isIdCard);\n\t    }\n\t    if (!upload.check()) {\n\t        return false;\n\t    }\n\t    if (!vilidate.checkupload()) {\n\t        return false;\n\t    }\n\t    if ($textCategory.attr('data-id') == 'false') {\n\t        $liCategory.addClass('dr-form-error');\n\t        $tipCategory.html(errorMsg.type);\n\t        return;\n\t    } else {\n\t        $liCategory.removeClass('dr-form-error');\n\t    }\n\t    if (!vilidate.checkSummary($inputSummary).success) {\n\t        return validFail($liSummary, false, $tipSummary, vilidate.checkSummary($inputSummary).msg);\n\t    }\n\t    //sendAjax\n\t    function sendAjax(url) {\n\t        var imgs = $form.find('[data-node=uploaderImg]');\n\t        var option = {\n\t            realName: $inputName.val(),\n\t            idCardNo: $inputId.val(),\n\t            idcardFrontImageUrl: $(imgs[0]).attr('src'),\n\t            idcardBackImageUrl: $(imgs[1]).attr('src'),\n\t            idcardPersonImageUrl: $(imgs[2]).attr('src'),\n\t            categoryId: $form.find('[data-node=categoryTxt]').attr('data-id'),\n\t            introduction: $form.find('[data-node=inputSummary]').val()\n\t        };\n\t        fetch.post(url, {\n\t            data: option\n\t        }).done(function (data) {\n\t            if (data.success) {\n\t                if (data.code === 200) {\n\t                    location.href = $_CONFIG.i_domain + 'expert';\n\t                }\n\t            } else {\n\t                publicTips('show', data.message);\n\t            }\n\t        }).fail(function () {\n\t            publicTips();\n\t        });\n\t    }\n\t    if ($_CONFIG['applyFlag'] === 0) {\n\t        sendAjax(url.get('subMaster'));\n\t    } else {\n\t        sendAjax(url.get('subMasterAgain'));\n\t    }\n\t};\n\t\n\tvar bindEvent = function bindEvent() {\n\t    $inputName.on({\n\t        input: inputNameEvent.oninput,\n\t        blur: inputNameEvent.onblur\n\t    });\n\t    $inputId.on({\n\t        input: inputIdEvent.oninput,\n\t        blur: inputIdEvent.onblur\n\t    });\n\t    $inputSummary.on({\n\t        focus: inputSummaryEvent.onfocus,\n\t        input: inputSummaryEvent.oninput,\n\t        blur: inputSummaryEvent.onblur\n\t    });\n\t    $btnSubmit.on('click', submitEvent);\n\t};\n\t\n\tbindEvent();\n\t\n\t//\n\tchooseCategory.init();\n\t\n\t//\n\tupload.init();\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(3)))\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t/**\n\t * [truncate ]\n\t * @param  {[function]}  getLength []\n\t * @param  {[string]}  string []\n\t * @param  {[number]}  byteLength []\n\t * @return {string}           []\n\t */\n\tvar byteLen = __webpack_require__(73);\n\t\n\tfunction isHighSurrogate(codePoint) {\n\t    return codePoint >= 0xd800 && codePoint <= 0xdbff;\n\t}\n\t\n\tfunction isLowSurrogate(codePoint) {\n\t    return codePoint >= 0xdc00 && codePoint <= 0xdfff;\n\t}\n\t\n\t// Truncate string by size in bytes\n\tfunction truncate(string, byteLength) {\n\t    if (typeof string !== \"string\") {\n\t        throw new Error(\"Input must be string\");\n\t    }\n\t\n\t    var charLength = string.length;\n\t    var curByteLength = 0;\n\t    var codePoint;\n\t    var segment;\n\t\n\t    for (var i = 0; i < charLength; i += 1) {\n\t        codePoint = string.charCodeAt(i);\n\t        segment = string[i];\n\t\n\t        if (isHighSurrogate(codePoint) && isLowSurrogate(string.charCodeAt(i + 1))) {\n\t            i += 1;\n\t            segment += string[i];\n\t        }\n\t\n\t        curByteLength += byteLen(segment);\n\t\n\t        if (curByteLength === byteLength) {\n\t            return string.slice(0, i + 1);\n\t        } else if (curByteLength > byteLength) {\n\t            return string.slice(0, i - segment.length + 1);\n\t        }\n\t    }\n\t\n\t    return string;\n\t}\n\t\n\tmodule.exports = truncate;\n\n/***/ }),\n\n/***/ 73:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar byteLen = function byteLen(str) {\n\t    if (str == null) return 0;\n\t    if (typeof str != \"string\") {\n\t        str += \"\";\n\t    }\n\t    return str.replace(/[^\\x00-\\xff]/g, \"01\").length;\n\t};\n\t\n\tmodule.exports = byteLen;\n\n/***/ }),\n\n/***/ 84:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t * Created by dongyukuan on 2016/7/4.\n\t */\n\tvar inputTip = {\n\t    tel: {\n\t        ept: '11',\n\t        err: '',\n\t        errBack: ''\n\t    },\n\t    msgCode: {\n\t        tipGet: '',\n\t        tipEpt: '',\n\t        tipErr: '6,',\n\t        tipErrEdit: '',\n\t        tipWrong: ',',\n\t        checkCodeWrong: ',',\n\t        send: '',\n\t        tipSend: '10',\n\t        tipDisabled: \"60s\",\n\t        tipLimitEdit: '',\n\t        btnAfterSend: \"\",\n\t        btnDefault: \"\"\n\t    },\n\t    pwd: {\n\t        commonTip: '6-20,'\n\t    },\n\t    pwdV: {\n\t        ept: '',\n\t        err: ''\n\t    },\n\t    nickName: {\n\t        eptName: '',\n\t        commonTip: '2-20-_',\n\t        existName: '~',\n\t        sucSub: '',\n\t        errLine: \"!\",\n\t        wrongName: ','\n\t    },\n\t    birthTip: {\n\t        tip: ''\n\t    },\n\t    refCode: {\n\t        err: ''\n\t    },\n\t    imgCode: {\n\t        ept: '',\n\t        err: ''\n\t    },\n\t    login: {\n\t        errCode: '',\n\t        errNum: '',\n\t        errPwd: '',\n\t        agreement: ''\n\t    },\n\t    createCircle: {\n\t        typeEmpty: '',\n\t        nameEmpty: '',\n\t        upperLimit: ''\n\t    },\n\t    circle: {\n\t        login: '',\n\t        unJoin: '',\n\t        cannotJoin: '!',\n\t        review: '!',\n\t        joinSuccess: '',\n\t        joinSuccessPublic: '',\n\t        cannotJoinCircle: '',\n\t        exit: '',\n\t        dissolved: ''\n\t    },\n\t    qrCodeTip: {\n\t        loseEffTip: '',\n\t        loseEffBtn: '',\n\t        failGetTip: '',\n\t        failGetBtn: ''\n\t    },\n\t    masterApply: {\n\t        nameLength: '2-20',\n\t        nameType: '',\n\t        isIdCard: '18',\n\t        type: '',\n\t        summary: '2-100'\n\t    },\n\t    upload: {\n\t        noUpload: '',\n\t        uploadError: '4Mjpgjpegpnggif',\n\t        uploadFaild: ',',\n\t        uploadError_Master: '4Mjpgjpegpnggif!',\n\t        Q_EXCEED_NUM_LIMIT: '4Mjpgjpegpnggif',\n\t        Q_EXCEED_SIZE_LIMIT: '',\n\t        Q_TYPE_DENIED: '',\n\t        F_EXCEED_SIZE: 'jpgpng4M',\n\t        excess: ''\n\t    },\n\t    errLine: {\n\t        tip: ','\n\t    }\n\t};\n\tmodule.exports = inputTip;\n\n/***/ }),\n\n/***/ 86:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(__webpack_provided_window_dot_jQuery) {/*! WebUploader 0.1.5 */\n\t\n\t\n\t/**\n\t * @fileOverview [amd](https://github.com/amdjs/amdjs-api/wiki/AMD)\n\t *\n\t * AMD API WebUploader\n\t */\n\t(function( root, factory ) {\n\t    var modules = {},\n\t\n\t        // require, \n\t        // https://github.com/amdjs/amdjs-api/wiki/require\n\t        _require = function( deps, callback ) {\n\t            var args, len, i;\n\t\n\t            // depsmodule\n\t            if ( typeof deps === 'string' ) {\n\t                return getModule( deps );\n\t            } else {\n\t                args = [];\n\t                for( len = deps.length, i = 0; i < len; i++ ) {\n\t                    args.push( getModule( deps[ i ] ) );\n\t                }\n\t\n\t                return callback.apply( null, args );\n\t            }\n\t        },\n\t\n\t        // defineid.\n\t        _define = function( id, deps, factory ) {\n\t            if ( arguments.length === 2 ) {\n\t                factory = deps;\n\t                deps = null;\n\t            }\n\t\n\t            _require( deps || [], function() {\n\t                setModule( id, factory, arguments );\n\t            });\n\t        },\n\t\n\t        // module, CommonJs\n\t        setModule = function( id, factory, args ) {\n\t            var module = {\n\t                    exports: factory\n\t                },\n\t                returned;\n\t\n\t            if ( typeof factory === 'function' ) {\n\t                args.length || (args = [ _require, module.exports, module ,__webpack_provided_window_dot_jQuery]);\n\t                returned = factory.apply( null, args );\n\t                returned !== undefined && (module.exports = returned);\n\t            }\n\t\n\t            modules[ id ] = module.exports;\n\t        },\n\t\n\t        // idmodule\n\t        getModule = function( id ) {\n\t            var module = modules[ id ] || root[ id ];\n\t\n\t            if ( !module ) {\n\t                throw new Error( '`' + id + '` is undefined' );\n\t            }\n\t\n\t            return module;\n\t        },\n\t\n\t        // modulesids\n\t        exportsTo = function( obj ) {\n\t            var key, host, parts, part, last, ucFirst;\n\t\n\t            // make the first character upper case.\n\t            ucFirst = function( str ) {\n\t                return str && (str.charAt( 0 ).toUpperCase() + str.substr( 1 ));\n\t            };\n\t\n\t            for ( key in modules ) {\n\t                host = obj;\n\t\n\t                if ( !modules.hasOwnProperty( key ) ) {\n\t                    continue;\n\t                }\n\t\n\t                parts = key.split('/');\n\t                last = ucFirst( parts.pop() );\n\t\n\t                while( (part = ucFirst( parts.shift() )) ) {\n\t                    host[ part ] = host[ part ] || {};\n\t                    host = host[ part ];\n\t                }\n\t\n\t                host[ last ] = modules[ key ];\n\t            }\n\t\n\t            return obj;\n\t        },\n\t\n\t        makeExport = function( dollar ) {\n\t            root.__dollar = dollar;\n\t\n\t            // exports every module.\n\t            return exportsTo( factory( root, _define, _require,__webpack_provided_window_dot_jQuery ) );\n\t        },\n\t\n\t        origin;\n\t\n\t    if ( typeof module === 'object' && typeof module.exports === 'object' ) {\n\t\n\t        // For CommonJS and CommonJS-like environments where a proper window is present,\n\t        module.exports = makeExport();\n\t    } else if ( true ) {\n\t\n\t        // Allow using this built library as an AMD module\n\t        // in another project. That other project will only\n\t        // see this AMD call, not the internal modules in\n\t        // the closure below.\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(2) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (makeExport), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    } else {\n\t\n\t        // Browser globals case. Just assign the\n\t        // result to a property on the global.\n\t        origin = root.WebUploader;\n\t        root.WebUploader = makeExport();\n\t        root.WebUploader.noConflict = function() {\n\t            root.WebUploader = origin;\n\t        };\n\t    }\n\t})( window, function( window, define, require ,jQuery ) {\n\t\n\t\n\t    /**\n\t     * @fileOverview jQuery or Zepto\n\t     */\n\t    define('dollar-third',[],function() {\n\t        var $ = window.__dollar || window.jQuery || window.Zepto || jQuery;\n\t\n\t        if ( !$ ) {\n\t            throw new Error('jQuery or Zepto not found!');\n\t        }\n\t\n\t        return $;\n\t    });\n\t    /**\n\t     * @fileOverview Dom \n\t     */\n\t    define('dollar',[\n\t        'dollar-third'\n\t    ], function( _ ) {\n\t        return _;\n\t    });\n\t    /**\n\t     * @fileOverview jQueryPromise\n\t     */\n\t    define('promise-third',[\n\t        'dollar'\n\t    ], function( $ ) {\n\t        return {\n\t            Deferred: $.Deferred,\n\t            when: $.when,\n\t\n\t            isPromise: function( anything ) {\n\t                return anything && typeof anything.then === 'function';\n\t            }\n\t        };\n\t    });\n\t    /**\n\t     * @fileOverview Promise/A+\n\t     */\n\t    define('promise',[\n\t        'promise-third'\n\t    ], function( _ ) {\n\t        return _;\n\t    });\n\t    /**\n\t     * @fileOverview \n\t     */\n\t\n\t    /**\n\t     * Web Uploader`WebUploader`\n\t     *\n\t     * As you know, Web Uploader[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)`define`, Modulemodule id.\n\t     * module idWebUploader\n\t     *\n\t     * * module `base`WebUploader.Base\n\t     * * module `file`: WebUploader.File\n\t     * * module `lib/dnd`: WebUploader.Lib.Dnd\n\t     * * module `runtime/html5/dnd`: WebUploader.Runtime.Html5.Dnd\n\t     *\n\t     *\n\t     * `WebUploader`\n\t     * @module WebUploader\n\t     * @title WebUploader API\n\t     */\n\t    define('base',[\n\t        'dollar',\n\t        'promise'\n\t    ], function( $, promise ) {\n\t\n\t        var noop = function() {},\n\t            call = Function.call;\n\t\n\t        // http://jsperf.com/uncurrythis\n\t        // \n\t        function uncurryThis( fn ) {\n\t            return function() {\n\t                return call.apply( fn, arguments );\n\t            };\n\t        }\n\t\n\t        function bindFn( fn, context ) {\n\t            return function() {\n\t                return fn.apply( context, arguments );\n\t            };\n\t        }\n\t\n\t        function createObject( proto ) {\n\t            var f;\n\t\n\t            if ( Object.create ) {\n\t                return Object.create( proto );\n\t            } else {\n\t                f = function() {};\n\t                f.prototype = proto;\n\t                return new f();\n\t            }\n\t        }\n\t\n\t\n\t        /**\n\t         * \n\t         * @class Base\n\t         */\n\t        return {\n\t\n\t            /**\n\t             * @property {String} version \n\t             */\n\t            version: '0.1.5',\n\t\n\t            /**\n\t             * @property {jQuery|Zepto} $ jQueryZepto\n\t             */\n\t            $: $,\n\t\n\t            Deferred: promise.Deferred,\n\t\n\t            isPromise: promise.isPromise,\n\t\n\t            when: promise.when,\n\t\n\t            /**\n\t             * @description  \n\t             *\n\t             * * `webkit`  webkitwebkit`undefined`\n\t             * * `chrome`  chromechrome`undefined`\n\t             * * `ie`  ieie`undefined`**ie10+**\n\t             * * `firefox`  firefoxfirefox`undefined`\n\t             * * `safari`  safarisafari`undefined`\n\t             * * `opera`  operaopera`undefined`\n\t             *\n\t             * @property {Object} [browser]\n\t             */\n\t            browser: (function( ua ) {\n\t                var ret = {},\n\t                    webkit = ua.match( /WebKit\\/([\\d.]+)/ ),\n\t                    chrome = ua.match( /Chrome\\/([\\d.]+)/ ) ||\n\t                        ua.match( /CriOS\\/([\\d.]+)/ ),\n\t\n\t                    ie = ua.match( /MSIE\\s([\\d\\.]+)/ ) ||\n\t                        ua.match( /(?:trident)(?:.*rv:([\\w.]+))?/i ),\n\t                    firefox = ua.match( /Firefox\\/([\\d.]+)/ ),\n\t                    safari = ua.match( /Safari\\/([\\d.]+)/ ),\n\t                    opera = ua.match( /OPR\\/([\\d.]+)/ );\n\t\n\t                webkit && (ret.webkit = parseFloat( webkit[ 1 ] ));\n\t                chrome && (ret.chrome = parseFloat( chrome[ 1 ] ));\n\t                ie && (ret.ie = parseFloat( ie[ 1 ] ));\n\t                firefox && (ret.firefox = parseFloat( firefox[ 1 ] ));\n\t                safari && (ret.safari = parseFloat( safari[ 1 ] ));\n\t                opera && (ret.opera = parseFloat( opera[ 1 ] ));\n\t\n\t                return ret;\n\t            })( navigator.userAgent ),\n\t\n\t            /**\n\t             * @description  \n\t             *\n\t             * * `android`  androidandroid`undefined`\n\t             * * `ios` iosios`undefined`\n\t             * @property {Object} [os]\n\t             */\n\t            os: (function( ua ) {\n\t                var ret = {},\n\t\n\t                    // osx = !!ua.match( /\\(Macintosh\\; Intel / ),\n\t                    android = ua.match( /(?:Android);?[\\s\\/]+([\\d.]+)?/ ),\n\t                    ios = ua.match( /(?:iPad|iPod|iPhone).*OS\\s([\\d_]+)/ );\n\t\n\t                // osx && (ret.osx = true);\n\t                android && (ret.android = parseFloat( android[ 1 ] ));\n\t                ios && (ret.ios = parseFloat( ios[ 1 ].replace( /_/g, '.' ) ));\n\t\n\t                return ret;\n\t            })( navigator.userAgent ),\n\t\n\t            /**\n\t             * \n\t             * @method inherits\n\t             * @grammar Base.inherits( super ) => child\n\t             * @grammar Base.inherits( super, protos ) => child\n\t             * @grammar Base.inherits( super, protos, statics ) => child\n\t             * @param  {Class} super \n\t             * @param  {Object | Function} [protos] constructor\n\t             * @param  {Function} [protos.constructor] \n\t             * @param  {Object} [statics] \n\t             * @return {Class} \n\t             * @example\n\t             * function Person() {\n\t             *     console.log( 'Super' );\n\t             * }\n\t             * Person.prototype.hello = function() {\n\t             *     console.log( 'hello' );\n\t             * };\n\t             *\n\t             * var Manager = Base.inherits( Person, {\n\t             *     world: function() {\n\t             *         console.log( 'World' );\n\t             *     }\n\t             * });\n\t             *\n\t             * // \n\t             * var instance = new Manager();    // => Super\n\t             *\n\t             * // \n\t             * instance.hello();    // => hello\n\t             * instance.world();    // => World\n\t             *\n\t             * // __super__\n\t             * console.log( Manager.__super__ === Person );    // => true\n\t             */\n\t            inherits: function( Super, protos, staticProtos ) {\n\t                var child;\n\t\n\t                if ( typeof protos === 'function' ) {\n\t                    child = protos;\n\t                    protos = null;\n\t                } else if ( protos && protos.hasOwnProperty('constructor') ) {\n\t                    child = protos.constructor;\n\t                } else {\n\t                    child = function() {\n\t                        return Super.apply( this, arguments );\n\t                    };\n\t                }\n\t\n\t                // \n\t                $.extend( true, child, Super, staticProtos || {} );\n\t\n\t                /* jshint camelcase: false */\n\t\n\t                // __super__\n\t                child.__super__ = Super.prototype;\n\t\n\t                // \n\t                // Object.create\n\t                child.prototype = createObject( Super.prototype );\n\t                protos && $.extend( true, child.prototype, protos );\n\t\n\t                return child;\n\t            },\n\t\n\t            /**\n\t             * callback.\n\t             * @method noop\n\t             */\n\t            noop: noop,\n\t\n\t            /**\n\t             * `context`\n\t             * @grammar Base.bindFn( fn, context ) => Function\n\t             * @method bindFn\n\t             * @example\n\t             * var doSomething = function() {\n\t             *         console.log( this.name );\n\t             *     },\n\t             *     obj = {\n\t             *         name: 'Object Name'\n\t             *     },\n\t             *     aliasFn = Base.bind( doSomething, obj );\n\t             *\n\t             *  aliasFn();    // => Object Name\n\t             *\n\t             */\n\t            bindFn: bindFn,\n\t\n\t            /**\n\t             * Console.log[noop](#WebUploader:Base.noop)\n\t             * @grammar Base.log( args... ) => undefined\n\t             * @method log\n\t             */\n\t            log: (function() {\n\t                if ( window.console ) {\n\t                    return bindFn( console.log, console );\n\t                }\n\t                return noop;\n\t            })(),\n\t\n\t            nextTick: (function() {\n\t\n\t                return function( cb ) {\n\t                    setTimeout( cb, 1 );\n\t                };\n\t\n\t                // @bug \n\t                // var next = window.requestAnimationFrame ||\n\t                //     window.webkitRequestAnimationFrame ||\n\t                //     window.mozRequestAnimationFrame ||\n\t                //     function( cb ) {\n\t                //         window.setTimeout( cb, 1000 / 60 );\n\t                //     };\n\t\n\t                // // fix: Uncaught TypeError: Illegal invocation\n\t                // return bindFn( next, window );\n\t            })(),\n\t\n\t            /**\n\t             * [uncurrythis](http://www.2ality.com/2011/11/uncurrying-this.html)slice\n\t             * \n\t             * @grammar Base.slice( target, start[, end] ) => Array\n\t             * @method slice\n\t             * @example\n\t             * function doSomthing() {\n\t             *     var args = Base.slice( arguments, 1 );\n\t             *     console.log( args );\n\t             * }\n\t             *\n\t             * doSomthing( 'ignored', 'arg2', 'arg3' );    // => Array [\"arg2\", \"arg3\"]\n\t             */\n\t            slice: uncurryThis( [].slice ),\n\t\n\t            /**\n\t             * ID\n\t             * @method guid\n\t             * @grammar Base.guid() => String\n\t             * @grammar Base.guid( prefx ) => String\n\t             */\n\t            guid: (function() {\n\t                var counter = 0;\n\t\n\t                return function( prefix ) {\n\t                    var guid = (+new Date()).toString( 32 ),\n\t                        i = 0;\n\t\n\t                    for ( ; i < 5; i++ ) {\n\t                        guid += Math.floor( Math.random() * 65535 ).toString( 32 );\n\t                    }\n\t\n\t                    return (prefix || 'wu_') + guid + (counter++).toString( 32 );\n\t                };\n\t            })(),\n\t\n\t            /**\n\t             * , \n\t             * @method formatSize\n\t             * @grammar Base.formatSize( size ) => String\n\t             * @grammar Base.formatSize( size, pointLength ) => String\n\t             * @grammar Base.formatSize( size, pointLength, units ) => String\n\t             * @param {Number} size \n\t             * @param {Number} [pointLength=2] \n\t             * @param {Array} [units=[ 'B', 'K', 'M', 'G', 'TB' ]] K()M, K.\n\t             * @example\n\t             * console.log( Base.formatSize( 100 ) );    // => 100B\n\t             * console.log( Base.formatSize( 1024 ) );    // => 1.00K\n\t             * console.log( Base.formatSize( 1024, 0 ) );    // => 1K\n\t             * console.log( Base.formatSize( 1024 * 1024 ) );    // => 1.00M\n\t             * console.log( Base.formatSize( 1024 * 1024 * 1024 ) );    // => 1.00G\n\t             * console.log( Base.formatSize( 1024 * 1024 * 1024, 0, ['B', 'KB', 'MB'] ) );    // => 1024MB\n\t             */\n\t            formatSize: function( size, pointLength, units ) {\n\t                var unit;\n\t\n\t                units = units || [ 'B', 'K', 'M', 'G', 'TB' ];\n\t\n\t                while ( (unit = units.shift()) && size > 1024 ) {\n\t                    size = size / 1024;\n\t                }\n\t\n\t                return (unit === 'B' ? size : size.toFixed( pointLength || 2 )) +\n\t                        unit;\n\t            }\n\t        };\n\t    });\n\t    /**\n\t     * \n\t     * @fileOverview Mediator\n\t     */\n\t    define('mediator',[\n\t        'base'\n\t    ], function( Base ) {\n\t        var $ = Base.$,\n\t            slice = [].slice,\n\t            separator = /\\s+/,\n\t            protos;\n\t\n\t        // handlers.\n\t        function findHandlers( arr, name, callback, context ) {\n\t            return $.grep( arr, function( handler ) {\n\t                return handler &&\n\t                        (!name || handler.e === name) &&\n\t                        (!callback || handler.cb === callback ||\n\t                        handler.cb._cb === callback) &&\n\t                        (!context || handler.ctx === context);\n\t            });\n\t        }\n\t\n\t        function eachEvent( events, callback, iterator ) {\n\t            // event\n\t            $.each( (events || '').split( separator ), function( _, key ) {\n\t                iterator( key, callback );\n\t            });\n\t        }\n\t\n\t        function triggerHanders( events, args ) {\n\t            var stoped = false,\n\t                i = -1,\n\t                len = events.length,\n\t                handler;\n\t\n\t            while ( ++i < len ) {\n\t                handler = events[ i ];\n\t\n\t                if ( handler.cb.apply( handler.ctx2, args ) === false ) {\n\t                    stoped = true;\n\t                    break;\n\t                }\n\t            }\n\t\n\t            return !stoped;\n\t        }\n\t\n\t        protos = {\n\t\n\t            /**\n\t             * \n\t             *\n\t             * `callback`argumentstrigger\n\t             * ```javascript\n\t             * var obj = {};\n\t             *\n\t             * // obj\n\t             * Mediator.installTo( obj );\n\t             *\n\t             * obj.on( 'testa', function( arg1, arg2 ) {\n\t             *     console.log( arg1, arg2 ); // => 'arg1', 'arg2'\n\t             * });\n\t             *\n\t             * obj.trigger( 'testa', 'arg1', 'arg2' );\n\t             * ```\n\t             *\n\t             * `callback``return false``callback`\n\t             * `trigger``false`\n\t             *\n\t             * `on``all`, `callback`arguments\n\t             * `type``callback``callback`\n\t             * ```javascript\n\t             * obj.on( 'all', function( type, arg1, arg2 ) {\n\t             *     console.log( type, arg1, arg2 ); // => 'testa', 'arg1', 'arg2'\n\t             * });\n\t             * ```\n\t             *\n\t             * @method on\n\t             * @grammar on( name, callback[, context] ) => self\n\t             * @param  {String}   name     \n\t             * @param  {Function} callback \n\t             * @param  {Object}   [context]  \n\t             * @return {self} \n\t             * @chainable\n\t             * @class Mediator\n\t             */\n\t            on: function( name, callback, context ) {\n\t                var me = this,\n\t                    set;\n\t\n\t                if ( !callback ) {\n\t                    return this;\n\t                }\n\t\n\t                set = this._events || (this._events = []);\n\t\n\t                eachEvent( name, callback, function( name, callback ) {\n\t                    var handler = { e: name };\n\t\n\t                    handler.cb = callback;\n\t                    handler.ctx = context;\n\t                    handler.ctx2 = context || me;\n\t                    handler.id = set.length;\n\t\n\t                    set.push( handler );\n\t                });\n\t\n\t                return this;\n\t            },\n\t\n\t            /**\n\t             * handler\n\t             * @method once\n\t             * @grammar once( name, callback[, context] ) => self\n\t             * @param  {String}   name     \n\t             * @param  {Function} callback \n\t             * @param  {Object}   [context]  \n\t             * @return {self} \n\t             * @chainable\n\t             */\n\t            once: function( name, callback, context ) {\n\t                var me = this;\n\t\n\t                if ( !callback ) {\n\t                    return me;\n\t                }\n\t\n\t                eachEvent( name, callback, function( name, callback ) {\n\t                    var once = function() {\n\t                            me.off( name, once );\n\t                            return callback.apply( context || me, arguments );\n\t                        };\n\t\n\t                    once._cb = callback;\n\t                    me.on( name, once, context );\n\t                });\n\t\n\t                return me;\n\t            },\n\t\n\t            /**\n\t             * \n\t             * @method off\n\t             * @grammar off( [name[, callback[, context] ] ] ) => self\n\t             * @param  {String}   [name]     \n\t             * @param  {Function} [callback] \n\t             * @param  {Object}   [context]  \n\t             * @return {self} \n\t             * @chainable\n\t             */\n\t            off: function( name, cb, ctx ) {\n\t                var events = this._events;\n\t\n\t                if ( !events ) {\n\t                    return this;\n\t                }\n\t\n\t                if ( !name && !cb && !ctx ) {\n\t                    this._events = [];\n\t                    return this;\n\t                }\n\t\n\t                eachEvent( name, cb, function( name, cb ) {\n\t                    $.each( findHandlers( events, name, cb, ctx ), function() {\n\t                        delete events[ this.id ];\n\t                    });\n\t                });\n\t\n\t                return this;\n\t            },\n\t\n\t            /**\n\t             * \n\t             * @method trigger\n\t             * @grammar trigger( name[, args...] ) => self\n\t             * @param  {String}   type     \n\t             * @param  {*} [...] \n\t             * @return {Boolean} handlerreturn falsefalse, true\n\t             */\n\t            trigger: function( type ) {\n\t                var args, events, allEvents;\n\t\n\t                if ( !this._events || !type ) {\n\t                    return this;\n\t                }\n\t\n\t                args = slice.call( arguments, 1 );\n\t                events = findHandlers( this._events, type );\n\t                allEvents = findHandlers( this._events, 'all' );\n\t\n\t                return triggerHanders( events, args ) &&\n\t                        triggerHanders( allEvents, arguments );\n\t            }\n\t        };\n\t\n\t        /**\n\t         * [installTo](#WebUploader:Mediator:installTo)\n\t         * \n\t         *\n\t         * @class Mediator\n\t         */\n\t        return $.extend({\n\t\n\t            /**\n\t             * \n\t             * @method installTo\n\t             * @param  {Object} obj \n\t             * @return {Object} obj.\n\t             */\n\t            installTo: function( obj ) {\n\t                return $.extend( obj, protos );\n\t            }\n\t\n\t        }, protos );\n\t    });\n\t    /**\n\t     * @fileOverview Uploader\n\t     */\n\t    define('uploader',[\n\t        'base',\n\t        'mediator'\n\t    ], function( Base, Mediator ) {\n\t\n\t        var $ = Base.$;\n\t\n\t        /**\n\t         * \n\t         * @class Uploader\n\t         * @constructor\n\t         * @grammar new Uploader( opts ) => Uploader\n\t         * @example\n\t         * var uploader = WebUploader.Uploader({\n\t         *     swf: 'path_of_swf/Uploader.swf',\n\t         *\n\t         *     // \n\t         *     chunked: true\n\t         * });\n\t         */\n\t        function Uploader( opts ) {\n\t            this.options = $.extend( true, {}, Uploader.options, opts );\n\t            this._init( this.options );\n\t        }\n\t\n\t        // default Options\n\t        // widgets\n\t        Uploader.options = {};\n\t        Mediator.installTo( Uploader.prototype );\n\t\n\t        // \n\t        $.each({\n\t            upload: 'start-upload',\n\t            stop: 'stop-upload',\n\t            getFile: 'get-file',\n\t            getFiles: 'get-files',\n\t            addFile: 'add-file',\n\t            addFiles: 'add-file',\n\t            sort: 'sort-files',\n\t            removeFile: 'remove-file',\n\t            cancelFile: 'cancel-file',\n\t            skipFile: 'skip-file',\n\t            retry: 'retry',\n\t            isInProgress: 'is-in-progress',\n\t            makeThumb: 'make-thumb',\n\t            md5File: 'md5-file',\n\t            getDimension: 'get-dimension',\n\t            addButton: 'add-btn',\n\t            predictRuntimeType: 'predict-runtime-type',\n\t            refresh: 'refresh',\n\t            disable: 'disable',\n\t            enable: 'enable',\n\t            reset: 'reset'\n\t        }, function( fn, command ) {\n\t            Uploader.prototype[ fn ] = function() {\n\t                return this.request( command, arguments );\n\t            };\n\t        });\n\t\n\t        $.extend( Uploader.prototype, {\n\t            state: 'pending',\n\t\n\t            _init: function( opts ) {\n\t                var me = this;\n\t\n\t                me.request( 'init', opts, function() {\n\t                    me.state = 'ready';\n\t                    me.trigger('ready');\n\t                });\n\t            },\n\t\n\t            /**\n\t             * Uploader\n\t             * @method option\n\t             * @grammar option( key ) => *\n\t             * @grammar option( key, val ) => self\n\t             * @example\n\t             *\n\t             * // \n\t             * var uploader = new WebUploader.Uploader({\n\t             *     compress: null;\n\t             * });\n\t             *\n\t             * // 1600 * 1600\n\t             * uploader.option( 'compress', {\n\t             *     width: 1600,\n\t             *     height: 1600\n\t             * });\n\t             */\n\t            option: function( key, val ) {\n\t                var opts = this.options;\n\t\n\t                // setter\n\t                if ( arguments.length > 1 ) {\n\t\n\t                    if ( $.isPlainObject( val ) &&\n\t                            $.isPlainObject( opts[ key ] ) ) {\n\t                        $.extend( opts[ key ], val );\n\t                    } else {\n\t                        opts[ key ] = val;\n\t                    }\n\t\n\t                } else {    // getter\n\t                    return key ? opts[ key ] : opts;\n\t                }\n\t            },\n\t\n\t            /**\n\t             * \n\t             * * `successNum` \n\t             * * `progressNum` \n\t             * * `cancelNum` \n\t             * * `invalidNum` \n\t             * * `uploadFailNum` \n\t             * * `queueNum` \n\t             * * `interruptNum` \n\t             * @method getStats\n\t             * @grammar getStats() => Object\n\t             */\n\t            getStats: function() {\n\t                // return this._mgr.getStats.apply( this._mgr, arguments );\n\t                var stats = this.request('get-stats');\n\t\n\t                return stats ? {\n\t                    successNum: stats.numOfSuccess,\n\t                    progressNum: stats.numOfProgress,\n\t\n\t                    // who care?\n\t                    // queueFailNum: 0,\n\t                    cancelNum: stats.numOfCancel,\n\t                    invalidNum: stats.numOfInvalid,\n\t                    uploadFailNum: stats.numOfUploadFailed,\n\t                    queueNum: stats.numOfQueue,\n\t                    interruptNum: stats.numofInterrupt\n\t                } : {};\n\t            },\n\t\n\t            // opts.onEventinstance.onEvent\n\t            trigger: function( type/*, args...*/ ) {\n\t                var args = [].slice.call( arguments, 1 ),\n\t                    opts = this.options,\n\t                    name = 'on' + type.substring( 0, 1 ).toUpperCase() +\n\t                        type.substring( 1 );\n\t\n\t                if (\n\t                        // onhandler.\n\t                        Mediator.trigger.apply( this, arguments ) === false ||\n\t\n\t                        // opts.onEvent\n\t                        $.isFunction( opts[ name ] ) &&\n\t                        opts[ name ].apply( this, args ) === false ||\n\t\n\t                        // this.onEvent\n\t                        $.isFunction( this[ name ] ) &&\n\t                        this[ name ].apply( this, args ) === false ||\n\t\n\t                        // uploader\n\t                        Mediator.trigger.apply( Mediator,\n\t                        [ this, type ].concat( args ) ) === false ) {\n\t\n\t                    return false;\n\t                }\n\t\n\t                return true;\n\t            },\n\t\n\t            /**\n\t             *  webuploader \n\t             * @method destroy\n\t             * @grammar destroy() => undefined\n\t             */\n\t            destroy: function() {\n\t                this.request( 'destroy', arguments );\n\t                this.off();\n\t            },\n\t\n\t            // widgets/widget.js\n\t            request: Base.noop\n\t        });\n\t\n\t        /**\n\t         * Uploadernew Uploader( opts );\n\t         * @method create\n\t         * @class Base\n\t         * @static\n\t         * @grammar Base.create( opts ) => Uploader\n\t         */\n\t        Base.create = Uploader.create = function( opts ) {\n\t            return new Uploader( opts );\n\t        };\n\t\n\t        // Uploader\n\t        Base.Uploader = Uploader;\n\t\n\t        return Uploader;\n\t    });\n\t    /**\n\t     * @fileOverview RuntimeRuntime, \n\t     */\n\t    define('runtime/runtime',[\n\t        'base',\n\t        'mediator'\n\t    ], function( Base, Mediator ) {\n\t\n\t        var $ = Base.$,\n\t            factories = {},\n\t\n\t            // key\n\t            getFirstKey = function( obj ) {\n\t                for ( var key in obj ) {\n\t                    if ( obj.hasOwnProperty( key ) ) {\n\t                        return key;\n\t                    }\n\t                }\n\t                return null;\n\t            };\n\t\n\t        // \n\t        function Runtime( options ) {\n\t            this.options = $.extend({\n\t                container: document.body\n\t            }, options );\n\t            this.uid = Base.guid('rt_');\n\t        }\n\t\n\t        $.extend( Runtime.prototype, {\n\t\n\t            getContainer: function() {\n\t                var opts = this.options,\n\t                    parent, container;\n\t\n\t                if ( this._container ) {\n\t                    return this._container;\n\t                }\n\t\n\t                parent = $( opts.container || document.body );\n\t                container = $( document.createElement('div') );\n\t\n\t                container.attr( 'id', 'rt_' + this.uid );\n\t                container.css({\n\t                    position: 'absolute',\n\t                    top: '0px',\n\t                    left: '0px',\n\t                    width: '1px',\n\t                    height: '1px',\n\t                    overflow: 'hidden'\n\t                });\n\t\n\t                parent.append( container );\n\t                parent.addClass('webuploader-container');\n\t                this._container = container;\n\t                this._parent = parent;\n\t                return container;\n\t            },\n\t\n\t            init: Base.noop,\n\t            exec: Base.noop,\n\t\n\t            destroy: function() {\n\t                this._container && this._container.remove();\n\t                this._parent && this._parent.removeClass('webuploader-container');\n\t                this.off();\n\t            }\n\t        });\n\t\n\t        Runtime.orders = 'html5,flash';\n\t\n\t\n\t        /**\n\t         * Runtime\n\t         * @param {String} type    \n\t         * @param {Runtime} factory Runtime\n\t         */\n\t        Runtime.addRuntime = function( type, factory ) {\n\t            factories[ type ] = factory;\n\t        };\n\t\n\t        Runtime.hasRuntime = function( type ) {\n\t            return !!(type ? factories[ type ] : getFirstKey( factories ));\n\t        };\n\t\n\t        Runtime.create = function( opts, orders ) {\n\t            var type, runtime;\n\t\n\t            orders = orders || Runtime.orders;\n\t            $.each( orders.split( /\\s*,\\s*/g ), function() {\n\t                if ( factories[ this ] ) {\n\t                    type = this;\n\t                    return false;\n\t                }\n\t            });\n\t\n\t            type = type || getFirstKey( factories );\n\t            if ( !type ) {\n\t                throw new Error('Runtime Error');\n\t            }\n\t\n\t            runtime = new factories[ type ]( opts );\n\t            return runtime;\n\t        };\n\t\n\t        Mediator.installTo( Runtime.prototype );\n\t        return Runtime;\n\t    });\n\t\n\t    /**\n\t     * @fileOverview RuntimeRuntime, \n\t     */\n\t    define('runtime/client',[\n\t        'base',\n\t        'mediator',\n\t        'runtime/runtime'\n\t    ], function( Base, Mediator, Runtime ) {\n\t\n\t        var cache;\n\t\n\t        cache = (function() {\n\t            var obj = {};\n\t\n\t            return {\n\t                add: function( runtime ) {\n\t                    obj[ runtime.uid ] = runtime;\n\t                },\n\t\n\t                get: function( ruid, standalone ) {\n\t                    var i;\n\t\n\t                    if ( ruid ) {\n\t                        return obj[ ruid ];\n\t                    }\n\t\n\t                    for ( i in obj ) {\n\t                        // filepicker.\n\t                        if ( standalone && obj[ i ].__standalone ) {\n\t                            continue;\n\t                        }\n\t\n\t                        return obj[ i ];\n\t                    }\n\t\n\t                    return null;\n\t                },\n\t\n\t                remove: function( runtime ) {\n\t                    delete obj[ runtime.uid ];\n\t                }\n\t            };\n\t        })();\n\t\n\t        function RuntimeClient( component, standalone ) {\n\t            var deferred = Base.Deferred(),\n\t                runtime;\n\t\n\t            this.uid = Base.guid('client_');\n\t\n\t            // runtime\n\t            this.runtimeReady = function( cb ) {\n\t                return deferred.done( cb );\n\t            };\n\t\n\t            this.connectRuntime = function( opts, cb ) {\n\t\n\t                // already connected.\n\t                if ( runtime ) {\n\t                    throw new Error('already connected!');\n\t                }\n\t\n\t                deferred.done( cb );\n\t\n\t                if ( typeof opts === 'string' && cache.get( opts ) ) {\n\t                    runtime = cache.get( opts );\n\t                }\n\t\n\t                // filePicker\n\t                runtime = runtime || cache.get( null, standalone );\n\t\n\t                // \n\t                if ( !runtime ) {\n\t                    runtime = Runtime.create( opts, opts.runtimeOrder );\n\t                    runtime.__promise = deferred.promise();\n\t                    runtime.once( 'ready', deferred.resolve );\n\t                    runtime.init();\n\t                    cache.add( runtime );\n\t                    runtime.__client = 1;\n\t                } else {\n\t                    // cache\n\t                    Base.$.extend( runtime.options, opts );\n\t                    runtime.__promise.then( deferred.resolve );\n\t                    runtime.__client++;\n\t                }\n\t\n\t                standalone && (runtime.__standalone = standalone);\n\t                return runtime;\n\t            };\n\t\n\t            this.getRuntime = function() {\n\t                return runtime;\n\t            };\n\t\n\t            this.disconnectRuntime = function() {\n\t                if ( !runtime ) {\n\t                    return;\n\t                }\n\t\n\t                runtime.__client--;\n\t\n\t                if ( runtime.__client <= 0 ) {\n\t                    cache.remove( runtime );\n\t                    delete runtime.__promise;\n\t                    runtime.destroy();\n\t                }\n\t\n\t                runtime = null;\n\t            };\n\t\n\t            this.exec = function() {\n\t                if ( !runtime ) {\n\t                    return;\n\t                }\n\t\n\t                var args = Base.slice( arguments );\n\t                component && args.unshift( component );\n\t\n\t                return runtime.exec.apply( this, args );\n\t            };\n\t\n\t            this.getRuid = function() {\n\t                return runtime && runtime.uid;\n\t            };\n\t\n\t            this.destroy = (function( destroy ) {\n\t                return function() {\n\t                    destroy && destroy.apply( this, arguments );\n\t                    this.trigger('destroy');\n\t                    this.off();\n\t                    this.exec('destroy');\n\t                    this.disconnectRuntime();\n\t                };\n\t            })( this.destroy );\n\t        }\n\t\n\t        Mediator.installTo( RuntimeClient.prototype );\n\t        return RuntimeClient;\n\t    });\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('lib/dnd',[\n\t        'base',\n\t        'mediator',\n\t        'runtime/client'\n\t    ], function( Base, Mediator, RuntimeClent ) {\n\t\n\t        var $ = Base.$;\n\t\n\t        function DragAndDrop( opts ) {\n\t            opts = this.options = $.extend({}, DragAndDrop.options, opts );\n\t\n\t            opts.container = $( opts.container );\n\t\n\t            if ( !opts.container.length ) {\n\t                return;\n\t            }\n\t\n\t            RuntimeClent.call( this, 'DragAndDrop' );\n\t        }\n\t\n\t        DragAndDrop.options = {\n\t            accept: null,\n\t            disableGlobalDnd: false\n\t        };\n\t\n\t        Base.inherits( RuntimeClent, {\n\t            constructor: DragAndDrop,\n\t\n\t            init: function() {\n\t                var me = this;\n\t\n\t                me.connectRuntime( me.options, function() {\n\t                    me.exec('init');\n\t                    me.trigger('ready');\n\t                });\n\t            }\n\t        });\n\t\n\t        Mediator.installTo( DragAndDrop.prototype );\n\t\n\t        return DragAndDrop;\n\t    });\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('widgets/widget',[\n\t        'base',\n\t        'uploader'\n\t    ], function( Base, Uploader ) {\n\t\n\t        var $ = Base.$,\n\t            _init = Uploader.prototype._init,\n\t            _destroy = Uploader.prototype.destroy,\n\t            IGNORE = {},\n\t            widgetClass = [];\n\t\n\t        function isArrayLike( obj ) {\n\t            if ( !obj ) {\n\t                return false;\n\t            }\n\t\n\t            var length = obj.length,\n\t                type = $.type( obj );\n\t\n\t            if ( obj.nodeType === 1 && length ) {\n\t                return true;\n\t            }\n\t\n\t            return type === 'array' || type !== 'function' && type !== 'string' &&\n\t                    (length === 0 || typeof length === 'number' && length > 0 &&\n\t                    (length - 1) in obj);\n\t        }\n\t\n\t        function Widget( uploader ) {\n\t            this.owner = uploader;\n\t            this.options = uploader.options;\n\t        }\n\t\n\t        $.extend( Widget.prototype, {\n\t\n\t            init: Base.noop,\n\t\n\t            // Backboneuploader\n\t            // widgetuploader\n\t            invoke: function( apiName, args ) {\n\t\n\t                /*\n\t                    {\n\t                        'make-thumb': 'makeThumb'\n\t                    }\n\t                 */\n\t                var map = this.responseMap;\n\t\n\t                // API\n\t                if ( !map || !(apiName in map) || !(map[ apiName ] in this) ||\n\t                        !$.isFunction( this[ map[ apiName ] ] ) ) {\n\t\n\t                    return IGNORE;\n\t                }\n\t\n\t                return this[ map[ apiName ] ].apply( this, args );\n\t\n\t            },\n\t\n\t            /**\n\t             * `callback``handler``promise``handler`promise`promise`\n\t             * @method request\n\t             * @grammar request( command, args ) => * | Promise\n\t             * @grammar request( command, args, callback ) => Promise\n\t             * @for  Uploader\n\t             */\n\t            request: function() {\n\t                return this.owner.request.apply( this.owner, arguments );\n\t            }\n\t        });\n\t\n\t        // Uploader.\n\t        $.extend( Uploader.prototype, {\n\t\n\t            /**\n\t             * @property {String | Array} [disableWidgets=undefined]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description  Uploader.register  widget  option \n\t             */\n\t\n\t            // _initwidgets\n\t            _init: function() {\n\t                var me = this,\n\t                    widgets = me._widgets = [],\n\t                    deactives = me.options.disableWidgets || '';\n\t\n\t                $.each( widgetClass, function( _, klass ) {\n\t                    (!deactives || !~deactives.indexOf( klass._name )) &&\n\t                        widgets.push( new klass( me ) );\n\t                });\n\t\n\t                return _init.apply( me, arguments );\n\t            },\n\t\n\t            request: function( apiName, args, callback ) {\n\t                var i = 0,\n\t                    widgets = this._widgets,\n\t                    len = widgets && widgets.length,\n\t                    rlts = [],\n\t                    dfds = [],\n\t                    widget, rlt, promise, key;\n\t\n\t                args = isArrayLike( args ) ? args : [ args ];\n\t\n\t                for ( ; i < len; i++ ) {\n\t                    widget = widgets[ i ];\n\t                    rlt = widget.invoke( apiName, args );\n\t\n\t                    if ( rlt !== IGNORE ) {\n\t\n\t                        // Deferred\n\t                        if ( Base.isPromise( rlt ) ) {\n\t                            dfds.push( rlt );\n\t                        } else {\n\t                            rlts.push( rlt );\n\t                        }\n\t                    }\n\t                }\n\t\n\t                // callback\n\t                if ( callback || dfds.length ) {\n\t                    promise = Base.when.apply( Base, dfds );\n\t                    key = promise.pipe ? 'pipe' : 'then';\n\t\n\t                    // \n\t                    // callback tick \n\t                    return promise[ key ](function() {\n\t                                var deferred = Base.Deferred(),\n\t                                    args = arguments;\n\t\n\t                                if ( args.length === 1 ) {\n\t                                    args = args[ 0 ];\n\t                                }\n\t\n\t                                setTimeout(function() {\n\t                                    deferred.resolve( args );\n\t                                }, 1 );\n\t\n\t                                return deferred.promise();\n\t                            })[ callback ? key : 'done' ]( callback || Base.noop );\n\t                } else {\n\t                    return rlts[ 0 ];\n\t                }\n\t            },\n\t\n\t            destroy: function() {\n\t                _destroy.apply( this, arguments );\n\t                this._widgets = null;\n\t            }\n\t        });\n\t\n\t        /**\n\t         * \n\t         * @grammar Uploader.register(proto);\n\t         * @grammar Uploader.register(map, proto);\n\t         * @param  {object} responseMap API \n\t         * @param  {object} proto  constructor \n\t         * @method Uploader.register\n\t         * @for Uploader\n\t         * @example\n\t         * Uploader.register({\n\t         *     'make-thumb': 'makeThumb'\n\t         * }, {\n\t         *     init: function( options ) {},\n\t         *     makeThumb: function() {}\n\t         * });\n\t         *\n\t         * Uploader.register({\n\t         *     'make-thumb': function() {\n\t         *\n\t         *     }\n\t         * });\n\t         */\n\t        Uploader.register = Widget.register = function( responseMap, widgetProto ) {\n\t            var map = { init: 'init', destroy: 'destroy', name: 'anonymous' },\n\t                klass;\n\t\n\t            if ( arguments.length === 1 ) {\n\t                widgetProto = responseMap;\n\t\n\t                //  map \n\t                $.each(widgetProto, function(key) {\n\t                    if ( key[0] === '_' || key === 'name' ) {\n\t                        key === 'name' && (map.name = widgetProto.name);\n\t                        return;\n\t                    }\n\t\n\t                    map[key.replace(/[A-Z]/g, '-$&').toLowerCase()] = key;\n\t                });\n\t\n\t            } else {\n\t                map = $.extend( map, responseMap );\n\t            }\n\t\n\t            widgetProto.responseMap = map;\n\t            klass = Base.inherits( Widget, widgetProto );\n\t            klass._name = map.name;\n\t            widgetClass.push( klass );\n\t\n\t            return klass;\n\t        };\n\t\n\t        /**\n\t         * \n\t         * @grammar Uploader.unRegister(name);\n\t         * @param  {string} name \n\t         * @method Uploader.unRegister\n\t         * @for Uploader\n\t         * @example\n\t         *\n\t         * Uploader.register({\n\t         *     name: 'custom',\n\t         *\n\t         *     'make-thumb': function() {\n\t         *\n\t         *     }\n\t         * });\n\t         *\n\t         * Uploader.unRegister('custom');\n\t         */\n\t        Uploader.unRegister = Widget.unRegister = function( name ) {\n\t            if ( !name || name === 'anonymous' ) {\n\t                return;\n\t            }\n\t\n\t            // \n\t            for ( var i = widgetClass.length; i--; ) {\n\t                if ( widgetClass[i]._name === name ) {\n\t                    widgetClass.splice(i, 1)\n\t                }\n\t            }\n\t        };\n\t\n\t        return Widget;\n\t    });\n\t    /**\n\t     * @fileOverview DragAndDrop Widget\n\t     */\n\t    define('widgets/filednd',[\n\t        'base',\n\t        'uploader',\n\t        'lib/dnd',\n\t        'widgets/widget'\n\t    ], function( Base, Uploader, Dnd ) {\n\t        var $ = Base.$;\n\t\n\t        Uploader.options.dnd = '';\n\t\n\t        /**\n\t         * @property {Selector} [dnd=undefined]  Drag And Drop\n\t         * @namespace options\n\t         * @for Uploader\n\t         */\n\t\n\t        /**\n\t         * @property {Selector} [disableGlobalDnd=false]  \n\t         * @namespace options\n\t         * @for Uploader\n\t         */\n\t\n\t        /**\n\t         * @event dndAccept\n\t         * @param {DataTransferItemList} items DataTransferItem\n\t         * @description  chrome  API mime-type \n\t         * @for  Uploader\n\t         */\n\t        return Uploader.register({\n\t            name: 'dnd',\n\t\n\t            init: function( opts ) {\n\t\n\t                if ( !opts.dnd ||\n\t                        this.request('predict-runtime-type') !== 'html5' ) {\n\t                    return;\n\t                }\n\t\n\t                var me = this,\n\t                    deferred = Base.Deferred(),\n\t                    options = $.extend({}, {\n\t                        disableGlobalDnd: opts.disableGlobalDnd,\n\t                        container: opts.dnd,\n\t                        accept: opts.accept\n\t                    }),\n\t                    dnd;\n\t\n\t                this.dnd = dnd = new Dnd( options );\n\t\n\t                dnd.once( 'ready', deferred.resolve );\n\t                dnd.on( 'drop', function( files ) {\n\t                    me.request( 'add-file', [ files ]);\n\t                });\n\t\n\t                // \n\t                dnd.on( 'accept', function( items ) {\n\t                    return me.owner.trigger( 'dndAccept', items );\n\t                });\n\t\n\t                dnd.init();\n\t\n\t                return deferred.promise();\n\t            },\n\t\n\t            destroy: function() {\n\t                this.dnd && this.dnd.destroy();\n\t            }\n\t        });\n\t    });\n\t\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('lib/filepaste',[\n\t        'base',\n\t        'mediator',\n\t        'runtime/client'\n\t    ], function( Base, Mediator, RuntimeClent ) {\n\t\n\t        var $ = Base.$;\n\t\n\t        function FilePaste( opts ) {\n\t            opts = this.options = $.extend({}, opts );\n\t            opts.container = $( opts.container || document.body );\n\t            RuntimeClent.call( this, 'FilePaste' );\n\t        }\n\t\n\t        Base.inherits( RuntimeClent, {\n\t            constructor: FilePaste,\n\t\n\t            init: function() {\n\t                var me = this;\n\t\n\t                me.connectRuntime( me.options, function() {\n\t                    me.exec('init');\n\t                    me.trigger('ready');\n\t                });\n\t            }\n\t        });\n\t\n\t        Mediator.installTo( FilePaste.prototype );\n\t\n\t        return FilePaste;\n\t    });\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('widgets/filepaste',[\n\t        'base',\n\t        'uploader',\n\t        'lib/filepaste',\n\t        'widgets/widget'\n\t    ], function( Base, Uploader, FilePaste ) {\n\t        var $ = Base.$;\n\t\n\t        /**\n\t         * @property {Selector} [paste=undefined]  paste`document.body`.\n\t         * @namespace options\n\t         * @for Uploader\n\t         */\n\t        return Uploader.register({\n\t            name: 'paste',\n\t\n\t            init: function( opts ) {\n\t\n\t                if ( !opts.paste ||\n\t                        this.request('predict-runtime-type') !== 'html5' ) {\n\t                    return;\n\t                }\n\t\n\t                var me = this,\n\t                    deferred = Base.Deferred(),\n\t                    options = $.extend({}, {\n\t                        container: opts.paste,\n\t                        accept: opts.accept\n\t                    }),\n\t                    paste;\n\t\n\t                this.paste = paste = new FilePaste( options );\n\t\n\t                paste.once( 'ready', deferred.resolve );\n\t                paste.on( 'paste', function( files ) {\n\t                    me.owner.request( 'add-file', [ files ]);\n\t                });\n\t                paste.init();\n\t\n\t                return deferred.promise();\n\t            },\n\t\n\t            destroy: function() {\n\t                this.paste && this.paste.destroy();\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview Blob\n\t     */\n\t    define('lib/blob',[\n\t        'base',\n\t        'runtime/client'\n\t    ], function( Base, RuntimeClient ) {\n\t\n\t        function Blob( ruid, source ) {\n\t            var me = this;\n\t\n\t            me.source = source;\n\t            me.ruid = ruid;\n\t            this.size = source.size || 0;\n\t\n\t            //  mimetype, \n\t            if ( !source.type && this.ext &&\n\t                    ~'jpg,jpeg,png,gif,bmp'.indexOf( this.ext ) ) {\n\t                this.type = 'image/' + (this.ext === 'jpg' ? 'jpeg' : this.ext);\n\t            } else {\n\t                this.type = source.type || 'application/octet-stream';\n\t            }\n\t\n\t            RuntimeClient.call( me, 'Blob' );\n\t            this.uid = source.uid || this.uid;\n\t\n\t            if ( ruid ) {\n\t                me.connectRuntime( ruid );\n\t            }\n\t        }\n\t\n\t        Base.inherits( RuntimeClient, {\n\t            constructor: Blob,\n\t\n\t            slice: function( start, end ) {\n\t                return this.exec( 'slice', start, end );\n\t            },\n\t\n\t            getSource: function() {\n\t                return this.source;\n\t            }\n\t        });\n\t\n\t        return Blob;\n\t    });\n\t    /**\n\t     * FlashFileHTML5File\n\t     * FlashFileHTML5File\n\t     * @fileOverview File\n\t     */\n\t    define('lib/file',[\n\t        'base',\n\t        'lib/blob'\n\t    ], function( Base, Blob ) {\n\t\n\t        var uid = 1,\n\t            rExt = /\\.([^.]+)$/;\n\t\n\t        function File( ruid, file ) {\n\t            var ext;\n\t\n\t            this.name = file.name || ('untitled' + uid++);\n\t            ext = rExt.exec( file.name ) ? RegExp.$1.toLowerCase() : '';\n\t\n\t            // todo \n\t            //  mimetype, \n\t            if ( !ext && file.type ) {\n\t                ext = /\\/(jpg|jpeg|png|gif|bmp)$/i.exec( file.type ) ?\n\t                        RegExp.$1.toLowerCase() : '';\n\t                this.name += '.' + ext;\n\t            }\n\t\n\t            this.ext = ext;\n\t            this.lastModifiedDate = file.lastModifiedDate ||\n\t                    (new Date()).toLocaleString();\n\t\n\t            Blob.apply( this, arguments );\n\t        }\n\t\n\t        return Base.inherits( Blob, File );\n\t    });\n\t\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('lib/filepicker',[\n\t        'base',\n\t        'runtime/client',\n\t        'lib/file'\n\t    ], function( Base, RuntimeClent, File ) {\n\t\n\t        var $ = Base.$;\n\t\n\t        function FilePicker( opts ) {\n\t            opts = this.options = $.extend({}, FilePicker.options, opts );\n\t\n\t            opts.container = $( opts.id );\n\t\n\t            if ( !opts.container.length ) {\n\t                throw new Error('');\n\t            }\n\t\n\t            opts.innerHTML = opts.innerHTML || opts.label ||\n\t                    opts.container.html() || '';\n\t\n\t            opts.button = $( opts.button || document.createElement('div') );\n\t            opts.button.html( opts.innerHTML );\n\t            opts.container.html( opts.button );\n\t\n\t            RuntimeClent.call( this, 'FilePicker', true );\n\t        }\n\t\n\t        FilePicker.options = {\n\t            button: null,\n\t            container: null,\n\t            label: null,\n\t            innerHTML: null,\n\t            multiple: true,\n\t            accept: null,\n\t            name: 'file'\n\t        };\n\t\n\t        Base.inherits( RuntimeClent, {\n\t            constructor: FilePicker,\n\t\n\t            init: function() {\n\t                var me = this,\n\t                    opts = me.options,\n\t                    button = opts.button;\n\t\n\t                button.addClass('webuploader-pick');\n\t\n\t                me.on( 'all', function( type ) {\n\t                    var files;\n\t\n\t                    switch ( type ) {\n\t                        case 'mouseenter':\n\t                            button.addClass('webuploader-pick-hover');\n\t                            break;\n\t\n\t                        case 'mouseleave':\n\t                            button.removeClass('webuploader-pick-hover');\n\t                            break;\n\t\n\t                        case 'change':\n\t                            files = me.exec('getFiles');\n\t                            me.trigger( 'select', $.map( files, function( file ) {\n\t                                file = new File( me.getRuid(), file );\n\t\n\t                                // \n\t                                file._refer = opts.container;\n\t                                return file;\n\t                            }), opts.container );\n\t                            break;\n\t                    }\n\t                });\n\t\n\t                me.connectRuntime( opts, function() {\n\t                    me.refresh();\n\t                    me.exec( 'init', opts );\n\t                    me.trigger('ready');\n\t                });\n\t\n\t                this._resizeHandler = Base.bindFn( this.refresh, this );\n\t                $( window ).on( 'resize', this._resizeHandler );\n\t            },\n\t\n\t            refresh: function() {\n\t                var shimContainer = this.getRuntime().getContainer(),\n\t                    button = this.options.button,\n\t                    width = button.outerWidth ?\n\t                            button.outerWidth() : button.width(),\n\t\n\t                    height = button.outerHeight ?\n\t                            button.outerHeight() : button.height(),\n\t\n\t                    pos = button.offset();\n\t\n\t                width && height && shimContainer.css({\n\t                    bottom: 'auto',\n\t                    right: 'auto',\n\t                    width: width + 'px',\n\t                    height: height + 'px'\n\t                }).offset( pos );\n\t            },\n\t\n\t            enable: function() {\n\t                var btn = this.options.button;\n\t\n\t                btn.removeClass('webuploader-pick-disable');\n\t                this.refresh();\n\t            },\n\t\n\t            disable: function() {\n\t                var btn = this.options.button;\n\t\n\t                this.getRuntime().getContainer().css({\n\t                    top: '-99999px'\n\t                });\n\t\n\t                btn.addClass('webuploader-pick-disable');\n\t            },\n\t\n\t            destroy: function() {\n\t                var btn = this.options.button;\n\t                $( window ).off( 'resize', this._resizeHandler );\n\t                btn.removeClass('webuploader-pick-disable webuploader-pick-hover ' +\n\t                    'webuploader-pick');\n\t            }\n\t        });\n\t\n\t        return FilePicker;\n\t    });\n\t\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('widgets/filepicker',[\n\t        'base',\n\t        'uploader',\n\t        'lib/filepicker',\n\t        'widgets/widget'\n\t    ], function( Base, Uploader, FilePicker ) {\n\t        var $ = Base.$;\n\t\n\t        $.extend( Uploader.options, {\n\t\n\t            /**\n\t             * @property {Selector | Object} [pick=undefined]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description \n\t             *\n\t             * * `id` {Seletor|dom} ****  id,  id,  class,  dom \n\t             * * `label` {String}  `innerHTML` \n\t             * * `innerHTML` {String} \n\t             * * `multiple` {Boolean} \n\t             */\n\t            pick: null,\n\t\n\t            /**\n\t             * @property {Arroy} [accept=null]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description  extmimeType\n\t             *\n\t             * * `title` {String} \n\t             * * `extensions` {String} \n\t             * * `mimeTypes` {String} \n\t             *\n\t             * \n\t             *\n\t             * ```\n\t             * {\n\t             *     title: 'Images',\n\t             *     extensions: 'gif,jpg,jpeg,bmp,png',\n\t             *     mimeTypes: 'image/*'\n\t             * }\n\t             * ```\n\t             */\n\t            accept: null/*{\n\t                title: 'Images',\n\t                extensions: 'gif,jpg,jpeg,bmp,png',\n\t                mimeTypes: 'image/*'\n\t            }*/\n\t        });\n\t\n\t        return Uploader.register({\n\t            name: 'picker',\n\t\n\t            init: function( opts ) {\n\t                this.pickers = [];\n\t                return opts.pick && this.addBtn( opts.pick );\n\t            },\n\t\n\t            refresh: function() {\n\t                $.each( this.pickers, function() {\n\t                    this.refresh();\n\t                });\n\t            },\n\t\n\t            /**\n\t             * @method addButton\n\t             * @for Uploader\n\t             * @grammar addButton( pick ) => Promise\n\t             * @description\n\t             * [options.pick](#WebUploader:Uploader:options)\n\t             * @example\n\t             * uploader.addButton({\n\t             *     id: '#btnContainer',\n\t             *     innerHTML: ''\n\t             * });\n\t             */\n\t            addBtn: function( pick ) {\n\t                var me = this,\n\t                    opts = me.options,\n\t                    accept = opts.accept,\n\t                    promises = [];\n\t\n\t                if ( !pick ) {\n\t                    return;\n\t                }\n\t\n\t                $.isPlainObject( pick ) || (pick = {\n\t                    id: pick\n\t                });\n\t\n\t                $( pick.id ).each(function() {\n\t                    var options, picker, deferred;\n\t\n\t                    deferred = Base.Deferred();\n\t\n\t                    options = $.extend({}, pick, {\n\t                        accept: $.isPlainObject( accept ) ? [ accept ] : accept,\n\t                        swf: opts.swf,\n\t                        runtimeOrder: opts.runtimeOrder,\n\t                        id: this\n\t                    });\n\t\n\t                    picker = new FilePicker( options );\n\t\n\t                    picker.once( 'ready', deferred.resolve );\n\t                    picker.on( 'select', function( files ) {\n\t                        me.owner.request( 'add-file', [ files ]);\n\t                    });\n\t                    picker.init();\n\t\n\t                    me.pickers.push( picker );\n\t\n\t                    promises.push( deferred.promise() );\n\t                });\n\t\n\t                return Base.when.apply( Base, promises );\n\t            },\n\t\n\t            disable: function() {\n\t                $.each( this.pickers, function() {\n\t                    this.disable();\n\t                });\n\t            },\n\t\n\t            enable: function() {\n\t                $.each( this.pickers, function() {\n\t                    this.enable();\n\t                });\n\t            },\n\t\n\t            destroy: function() {\n\t                $.each( this.pickers, function() {\n\t                    this.destroy();\n\t                });\n\t                this.pickers = null;\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview Image\n\t     */\n\t    define('lib/image',[\n\t        'base',\n\t        'runtime/client',\n\t        'lib/blob'\n\t    ], function( Base, RuntimeClient, Blob ) {\n\t        var $ = Base.$;\n\t\n\t        // \n\t        function Image( opts ) {\n\t            this.options = $.extend({}, Image.options, opts );\n\t            RuntimeClient.call( this, 'Image' );\n\t\n\t            this.on( 'load', function() {\n\t                this._info = this.exec('info');\n\t                this._meta = this.exec('meta');\n\t            });\n\t        }\n\t\n\t        // \n\t        Image.options = {\n\t\n\t            // \n\t            quality: 90,\n\t\n\t            // \n\t            crop: false,\n\t\n\t            // \n\t            preserveHeaders: false,\n\t\n\t            // \n\t            allowMagnify: false\n\t        };\n\t\n\t        // RuntimeClient.\n\t        Base.inherits( RuntimeClient, {\n\t            constructor: Image,\n\t\n\t            info: function( val ) {\n\t\n\t                // setter\n\t                if ( val ) {\n\t                    this._info = val;\n\t                    return this;\n\t                }\n\t\n\t                // getter\n\t                return this._info;\n\t            },\n\t\n\t            meta: function( val ) {\n\t\n\t                // setter\n\t                if ( val ) {\n\t                    this._meta = val;\n\t                    return this;\n\t                }\n\t\n\t                // getter\n\t                return this._meta;\n\t            },\n\t\n\t            loadFromBlob: function( blob ) {\n\t                var me = this,\n\t                    ruid = blob.getRuid();\n\t\n\t                this.connectRuntime( ruid, function() {\n\t                    me.exec( 'init', me.options );\n\t                    me.exec( 'loadFromBlob', blob );\n\t                });\n\t            },\n\t\n\t            resize: function() {\n\t                var args = Base.slice( arguments );\n\t                return this.exec.apply( this, [ 'resize' ].concat( args ) );\n\t            },\n\t\n\t            crop: function() {\n\t                var args = Base.slice( arguments );\n\t                return this.exec.apply( this, [ 'crop' ].concat( args ) );\n\t            },\n\t\n\t            getAsDataUrl: function( type ) {\n\t                return this.exec( 'getAsDataUrl', type );\n\t            },\n\t\n\t            getAsBlob: function( type ) {\n\t                var blob = this.exec( 'getAsBlob', type );\n\t\n\t                return new Blob( this.getRuid(), blob );\n\t            }\n\t        });\n\t\n\t        return Image;\n\t    });\n\t    /**\n\t     * @fileOverview , \n\t     */\n\t    define('widgets/image',[\n\t        'base',\n\t        'uploader',\n\t        'lib/image',\n\t        'widgets/widget'\n\t    ], function( Base, Uploader, Image ) {\n\t\n\t        var $ = Base.$,\n\t            throttle;\n\t\n\t        // \n\t        throttle = (function( max ) {\n\t            var occupied = 0,\n\t                waiting = [],\n\t                tick = function() {\n\t                    var item;\n\t\n\t                    while ( waiting.length && occupied < max ) {\n\t                        item = waiting.shift();\n\t                        occupied += item[ 0 ];\n\t                        item[ 1 ]();\n\t                    }\n\t                };\n\t\n\t            return function( emiter, size, cb ) {\n\t                waiting.push([ size, cb ]);\n\t                emiter.once( 'destroy', function() {\n\t                    occupied -= size;\n\t                    setTimeout( tick, 1 );\n\t                });\n\t                setTimeout( tick, 1 );\n\t            };\n\t        })( 5 * 1024 * 1024 );\n\t\n\t        $.extend( Uploader.options, {\n\t\n\t            /**\n\t             * @property {Object} [thumb]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description \n\t             *\n\t             * \n\t             *\n\t             * ```javascript\n\t             * {\n\t             *     width: 110,\n\t             *     height: 110,\n\t             *\n\t             *     // type`image/jpeg`\n\t             *     quality: 70,\n\t             *\n\t             *     // false.\n\t             *     allowMagnify: true,\n\t             *\n\t             *     // \n\t             *     crop: true,\n\t             *\n\t             *     // \n\t             *     // \n\t             *     type: 'image/jpeg'\n\t             * }\n\t             * ```\n\t             */\n\t            thumb: {\n\t                width: 110,\n\t                height: 110,\n\t                quality: 70,\n\t                allowMagnify: true,\n\t                crop: true,\n\t                preserveHeaders: false,\n\t\n\t                // \n\t                // \n\t                // IE 8 base64  32K  jpeg \n\t                //  32k,  image/jpeg\n\t                type: 'image/jpeg'\n\t            },\n\t\n\t            /**\n\t             * @property {Object} [compress]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description `false`, \n\t             *\n\t             * \n\t             *\n\t             * ```javascript\n\t             * {\n\t             *     width: 1600,\n\t             *     height: 1600,\n\t             *\n\t             *     // type`image/jpeg`\n\t             *     quality: 90,\n\t             *\n\t             *     // false.\n\t             *     allowMagnify: false,\n\t             *\n\t             *     // \n\t             *     crop: false,\n\t             *\n\t             *     // meta\n\t             *     preserveHeaders: true,\n\t             *\n\t             *     // \n\t             *     // \n\t             *     noCompressIfLarger: false,\n\t             *\n\t             *     // \n\t             *     compressSize: 0\n\t             * }\n\t             * ```\n\t             */\n\t            compress: {\n\t                width: 1600,\n\t                height: 1600,\n\t                quality: 90,\n\t                allowMagnify: false,\n\t                crop: false,\n\t                preserveHeaders: true\n\t            }\n\t        });\n\t\n\t        return Uploader.register({\n\t\n\t            name: 'image',\n\t\n\t\n\t            /**\n\t             * `callback`\n\t             * \n\t             *\n\t             *  width  height  0 - 1 \n\t             *\n\t             * `callback`\n\t             * * errorerror\n\t             * * ret, Data URL\n\t             *\n\t             * ****\n\t             * Date URLIE6/7\n\t             *  base64 \n\t             *\n\t             * @method makeThumb\n\t             * @grammar makeThumb( file, callback ) => undefined\n\t             * @grammar makeThumb( file, callback, width, height ) => undefined\n\t             * @for Uploader\n\t             * @example\n\t             *\n\t             * uploader.on( 'fileQueued', function( file ) {\n\t             *     var $li = ...;\n\t             *\n\t             *     uploader.makeThumb( file, function( error, ret ) {\n\t             *         if ( error ) {\n\t             *             $li.text('');\n\t             *         } else {\n\t             *             $li.append('<img alt=\"\" src=\"' + ret + '\" />');\n\t             *         }\n\t             *     });\n\t             *\n\t             * });\n\t             */\n\t            makeThumb: function( file, cb, width, height ) {\n\t                var opts, image;\n\t                var isArtwork = false;\n\t                file = this.request( 'get-file', file );\n\t\n\t                // \n\t                if ( !file.type.match( /^image/ ) ) {\n\t                    cb( true );\n\t                    return;\n\t                }\n\t\n\t                opts = $.extend({}, this.options.thumb );\n\t                isArtwork = $.isPlainObject( this.options.thumb ) ? false : true;\n\t                // object.\n\t                if ( $.isPlainObject( width ) ) {\n\t                    opts = $.extend( opts, width );\n\t                    width = null;\n\t                }\n\t\n\t                width = width || opts.width;\n\t                height = height || opts.height;\n\t\n\t                image = new Image( opts );\n\t\n\t                image.once( 'load', function() {\n\t                    file._info = file._info || image.info();\n\t                    file._meta = file._meta || image.meta();\n\t\n\t                    //  width  0 - 1\n\t                    // \n\t                    if ( width <= 1 && width > 0 ) {\n\t                        width = file._info.width * width;\n\t                    }\n\t\n\t                    //  height\n\t                    if ( height <= 1 && height > 0 ) {\n\t                        height = file._info.height * height;\n\t                    }\n\t                    if( isArtwork ){\n\t                        image.resize( file._info.width, file._info.height );\n\t\n\t                    }else{\n\t                        image.resize( width, height );\n\t\n\t\n\t                    }\n\t\n\t                });\n\t\n\t                //  resize \n\t                image.once( 'complete', function() {\n\t                    cb( false, image.getAsDataUrl( opts.type ) );\n\t                    image.destroy();\n\t                });\n\t\n\t                image.once( 'error', function( reason ) {\n\t                    cb( reason || true );\n\t                    image.destroy();\n\t                });\n\t\n\t                throttle( image, file.source.size, function() {\n\t                    file._info && image.info( file._info );\n\t                    file._meta && image.meta( file._meta );\n\t                    image.loadFromBlob( file.source );\n\t                });\n\t            },\n\t\n\t            beforeSendFile: function( file ) {\n\t                var opts = this.options.compress || this.options.resize,\n\t                    compressSize = opts && opts.compressSize || 0,\n\t                    noCompressIfLarger = opts && opts.noCompressIfLarger || false,\n\t                    image, deferred;\n\t\n\t                file = this.request( 'get-file', file );\n\t\n\t                //  jpeg \n\t                // gif \n\t                // bmp png \n\t                if ( !opts || !~'image/jpeg,image/jpg'.indexOf( file.type ) ||\n\t                        file.size < compressSize ||\n\t                        file._compressed ) {\n\t                    return;\n\t                }\n\t\n\t                opts = $.extend({}, opts );\n\t                deferred = Base.Deferred();\n\t\n\t                image = new Image( opts );\n\t\n\t                deferred.always(function() {\n\t                    image.destroy();\n\t                    image = null;\n\t                });\n\t                image.once( 'error', deferred.reject );\n\t                image.once( 'load', function() {\n\t                    var width = opts.width,\n\t                        height = opts.height;\n\t\n\t                    file._info = file._info || image.info();\n\t                    file._meta = file._meta || image.meta();\n\t\n\t                    //  width  0 - 1\n\t                    // \n\t                    if ( width <= 1 && width > 0 ) {\n\t                        width = file._info.width * width;\n\t                    }\n\t\n\t                    //  height\n\t                    if ( height <= 1 && height > 0 ) {\n\t                        height = file._info.height * height;\n\t                    }\n\t\n\t                    image.resize( width, height );\n\t                });\n\t\n\t                image.once( 'complete', function() {\n\t                    var blob, size;\n\t\n\t                    //  UC / qq \n\t                    // ctx.getImageData  Exception\n\t                    // INDEX_SIZE_ERR: DOM Exception 1\n\t                    try {\n\t                        blob = image.getAsBlob( opts.type );\n\t\n\t                        size = file.size;\n\t\n\t                        // \n\t                        if ( !noCompressIfLarger || blob.size < size ) {\n\t                            // file.source.destroy && file.source.destroy();\n\t                            file.source = blob;\n\t                            file.size = blob.size;\n\t\n\t                            file.trigger( 'resize', blob.size, size );\n\t                        }\n\t\n\t                        // \n\t                        file._compressed = true;\n\t                        deferred.resolve();\n\t                    } catch ( e ) {\n\t                        // \n\t                        deferred.resolve();\n\t                    }\n\t                });\n\t\n\t                file._info && image.info( file._info );\n\t                file._meta && image.meta( file._meta );\n\t\n\t                image.loadFromBlob( file.source );\n\t                return deferred.promise();\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('file',[\n\t        'base',\n\t        'mediator'\n\t    ], function( Base, Mediator ) {\n\t\n\t        var $ = Base.$,\n\t            idPrefix = 'WU_FILE_',\n\t            idSuffix = 0,\n\t            rExt = /\\.([^.]+)$/,\n\t            statusMap = {};\n\t\n\t        function gid() {\n\t            return idPrefix + idSuffix++;\n\t        }\n\t\n\t        /**\n\t         * \n\t         * @class File\n\t         * @constructor \n\t         * @grammar new File( source ) => File\n\t         * @param {Lib.File} source [lib.File](#Lib.File), sourceRuntime\n\t         */\n\t        function WUFile( source ) {\n\t\n\t            /**\n\t             * \n\t             * @property name\n\t             * @type {string}\n\t             */\n\t            this.name = source.name || 'Untitled';\n\t\n\t            /**\n\t             * \n\t             * @property size\n\t             * @type {uint}\n\t             * @default 0\n\t             */\n\t            this.size = source.size || 0;\n\t\n\t            /**\n\t             * MIMETYPE[http://t.cn/z8ZnFny](http://t.cn/z8ZnFny)\n\t             * @property type\n\t             * @type {string}\n\t             * @default 'application/octet-stream'\n\t             */\n\t            this.type = source.type || 'application/octet-stream';\n\t\n\t            /**\n\t             * \n\t             * @property lastModifiedDate\n\t             * @type {int}\n\t             * @default \n\t             */\n\t            this.lastModifiedDate = source.lastModifiedDate || (new Date() * 1);\n\t\n\t            /**\n\t             * IDID\n\t             * @property id\n\t             * @type {string}\n\t             */\n\t            this.id = gid();\n\t\n\t            /**\n\t             * test.pngpng\n\t             * @property ext\n\t             * @type {string}\n\t             */\n\t            this.ext = rExt.exec( this.name ) ? RegExp.$1 : '';\n\t\n\t\n\t            /**\n\t             * status\n\t             * @property statusText\n\t             * @type {string}\n\t             */\n\t            this.statusText = '';\n\t\n\t            // \n\t            statusMap[ this.id ] = WUFile.Status.INITED;\n\t\n\t            this.source = source;\n\t            this.loaded = 0;\n\t\n\t            this.on( 'error', function( msg ) {\n\t                this.setStatus( WUFile.Status.ERROR, msg );\n\t            });\n\t        }\n\t\n\t        $.extend( WUFile.prototype, {\n\t\n\t            /**\n\t             * `change`\n\t             * @method setStatus\n\t             * @grammar setStatus( status[, statusText] );\n\t             * @param {File.Status|String} status [](#WebUploader:File:File.Status)\n\t             * @param {String} [statusText=''] errorhttp, abort,server\n\t             */\n\t            setStatus: function( status, text ) {\n\t\n\t                var prevStatus = statusMap[ this.id ];\n\t\n\t                typeof text !== 'undefined' && (this.statusText = text);\n\t\n\t                if ( status !== prevStatus ) {\n\t                    statusMap[ this.id ] = status;\n\t                    /**\n\t                     * \n\t                     * @event statuschange\n\t                     */\n\t                    this.trigger( 'statuschange', status, prevStatus );\n\t                }\n\t\n\t            },\n\t\n\t            /**\n\t             * \n\t             * @return {File.Status}\n\t             * @example\n\t                     \n\t                     {\n\t                         // \n\t                        INITED:     0,\n\t                        // \n\t                        QUEUED:     1,\n\t                        // \n\t                        PROGRESS:     2,\n\t                        // \n\t                        ERROR:         3,\n\t                        // \n\t                        COMPLETE:     4,\n\t                        // \n\t                        CANCELLED:     5\n\t                    }\n\t             */\n\t            getStatus: function() {\n\t                return statusMap[ this.id ];\n\t            },\n\t\n\t            /**\n\t             * \n\t             * @return {*}\n\t             */\n\t            getSource: function() {\n\t                return this.source;\n\t            },\n\t\n\t            destroy: function() {\n\t                this.off();\n\t                delete statusMap[ this.id ];\n\t            }\n\t        });\n\t\n\t        Mediator.installTo( WUFile.prototype );\n\t\n\t        /**\n\t         * \n\t         * * `inited` \n\t         * * `queued` , \n\t         * * `progress` \n\t         * * `complete` \n\t         * * `error` \n\t         * * `interrupt` \n\t         * * `invalid` \n\t         * * `cancelled` \n\t         * @property {Object} Status\n\t         * @namespace File\n\t         * @class File\n\t         * @static\n\t         */\n\t        WUFile.Status = {\n\t            INITED:     'inited',    // \n\t            QUEUED:     'queued',    // , \n\t            PROGRESS:   'progress',    // \n\t            ERROR:      'error',    // \n\t            COMPLETE:   'complete',    // \n\t            CANCELLED:  'cancelled',    // \n\t            INTERRUPT:  'interrupt',    // \n\t            INVALID:    'invalid'    // \n\t        };\n\t\n\t        return WUFile;\n\t    });\n\t\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('queue',[\n\t        'base',\n\t        'mediator',\n\t        'file'\n\t    ], function( Base, Mediator, WUFile ) {\n\t\n\t        var $ = Base.$,\n\t            STATUS = WUFile.Status;\n\t\n\t        /**\n\t         * , \n\t         * @class Queue\n\t         * @extends Mediator\n\t         */\n\t        function Queue() {\n\t\n\t            /**\n\t             * \n\t             * * `numOfQueue` \n\t             * * `numOfSuccess` \n\t             * * `numOfCancel` \n\t             * * `numOfProgress` \n\t             * * `numOfUploadFailed` \n\t             * * `numOfInvalid` \n\t             * * `numofDeleted` \n\t             * @property {Object} stats\n\t             */\n\t            this.stats = {\n\t                numOfQueue: 0,\n\t                numOfSuccess: 0,\n\t                numOfCancel: 0,\n\t                numOfProgress: 0,\n\t                numOfUploadFailed: 0,\n\t                numOfInvalid: 0,\n\t                numofDeleted: 0,\n\t                numofInterrupt: 0\n\t            };\n\t\n\t            // \n\t            this._queue = [];\n\t\n\t            // \n\t            this._map = {};\n\t        }\n\t\n\t        $.extend( Queue.prototype, {\n\t\n\t            /**\n\t             * \n\t             *\n\t             * @method append\n\t             * @param  {File} file   \n\t             */\n\t            append: function( file ) {\n\t                this._queue.push( file );\n\t                this._fileAdded( file );\n\t                return this;\n\t            },\n\t\n\t            /**\n\t             * \n\t             *\n\t             * @method prepend\n\t             * @param  {File} file   \n\t             */\n\t            prepend: function( file ) {\n\t                this._queue.unshift( file );\n\t                this._fileAdded( file );\n\t                return this;\n\t            },\n\t\n\t            /**\n\t             * \n\t             *\n\t             * @method getFile\n\t             * @param  {String} fileId   ID\n\t             * @return {File}\n\t             */\n\t            getFile: function( fileId ) {\n\t                if ( typeof fileId !== 'string' ) {\n\t                    return fileId;\n\t                }\n\t                return this._map[ fileId ];\n\t            },\n\t\n\t            /**\n\t             * \n\t             * @grammar fetch( status ) => File\n\t             * @method fetch\n\t             * @param {String} status [](#WebUploader:File:File.Status)\n\t             * @return {File} [File](#WebUploader:File)\n\t             */\n\t            fetch: function( status ) {\n\t                var len = this._queue.length,\n\t                    i, file;\n\t\n\t                status = status || STATUS.QUEUED;\n\t\n\t                for ( i = 0; i < len; i++ ) {\n\t                    file = this._queue[ i ];\n\t\n\t                    if ( status === file.getStatus() ) {\n\t                        return file;\n\t                    }\n\t                }\n\t\n\t                return null;\n\t            },\n\t\n\t            /**\n\t             * \n\t             * @grammar sort( fn ) => undefined\n\t             * @method sort\n\t             * @param {Function} fn \n\t             */\n\t            sort: function( fn ) {\n\t                if ( typeof fn === 'function' ) {\n\t                    this._queue.sort( fn );\n\t                }\n\t            },\n\t\n\t            /**\n\t             * , [File](#WebUploader:File)\n\t             * @grammar getFiles( [status1[, status2 ...]] ) => Array\n\t             * @method getFiles\n\t             * @param {String} [status] [](#WebUploader:File:File.Status)\n\t             */\n\t            getFiles: function() {\n\t                var sts = [].slice.call( arguments, 0 ),\n\t                    ret = [],\n\t                    i = 0,\n\t                    len = this._queue.length,\n\t                    file;\n\t\n\t                for ( ; i < len; i++ ) {\n\t                    file = this._queue[ i ];\n\t\n\t                    if ( sts.length && !~$.inArray( file.getStatus(), sts ) ) {\n\t                        continue;\n\t                    }\n\t\n\t                    ret.push( file );\n\t                }\n\t\n\t                return ret;\n\t            },\n\t\n\t            /**\n\t             * \n\t             * @grammar removeFile( file ) => Array\n\t             * @method removeFile\n\t             * @param {File} \n\t             */\n\t            removeFile: function( file ) {\n\t                var me = this,\n\t                    existing = this._map[ file.id ];\n\t\n\t                if ( existing ) {\n\t                    delete this._map[ file.id ];\n\t                    file.destroy();\n\t                    this.stats.numofDeleted++;\n\t                }\n\t            },\n\t\n\t            _fileAdded: function( file ) {\n\t                var me = this,\n\t                    existing = this._map[ file.id ];\n\t\n\t                if ( !existing ) {\n\t                    this._map[ file.id ] = file;\n\t\n\t                    file.on( 'statuschange', function( cur, pre ) {\n\t                        me._onFileStatusChange( cur, pre );\n\t                    });\n\t                }\n\t            },\n\t\n\t            _onFileStatusChange: function( curStatus, preStatus ) {\n\t                var stats = this.stats;\n\t\n\t                switch ( preStatus ) {\n\t                    case STATUS.PROGRESS:\n\t                        stats.numOfProgress--;\n\t                        break;\n\t\n\t                    case STATUS.QUEUED:\n\t                        stats.numOfQueue --;\n\t                        break;\n\t\n\t                    case STATUS.ERROR:\n\t                        stats.numOfUploadFailed--;\n\t                        break;\n\t\n\t                    case STATUS.INVALID:\n\t                        stats.numOfInvalid--;\n\t                        break;\n\t\n\t                    case STATUS.INTERRUPT:\n\t                        stats.numofInterrupt--;\n\t                        break;\n\t                }\n\t\n\t                switch ( curStatus ) {\n\t                    case STATUS.QUEUED:\n\t                        stats.numOfQueue++;\n\t                        break;\n\t\n\t                    case STATUS.PROGRESS:\n\t                        stats.numOfProgress++;\n\t                        break;\n\t\n\t                    case STATUS.ERROR:\n\t                        stats.numOfUploadFailed++;\n\t                        break;\n\t\n\t                    case STATUS.COMPLETE:\n\t                        stats.numOfSuccess++;\n\t                        break;\n\t\n\t                    case STATUS.CANCELLED:\n\t                        stats.numOfCancel++;\n\t                        break;\n\t\n\t\n\t                    case STATUS.INVALID:\n\t                        stats.numOfInvalid++;\n\t                        break;\n\t\n\t                    case STATUS.INTERRUPT:\n\t                        stats.numofInterrupt++;\n\t                        break;\n\t                }\n\t            }\n\t\n\t        });\n\t\n\t        Mediator.installTo( Queue.prototype );\n\t\n\t        return Queue;\n\t    });\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('widgets/queue',[\n\t        'base',\n\t        'uploader',\n\t        'queue',\n\t        'file',\n\t        'lib/file',\n\t        'runtime/client',\n\t        'widgets/widget'\n\t    ], function( Base, Uploader, Queue, WUFile, File, RuntimeClient ) {\n\t\n\t        var $ = Base.$,\n\t            rExt = /\\.\\w+$/,\n\t            Status = WUFile.Status;\n\t\n\t        return Uploader.register({\n\t            name: 'queue',\n\t\n\t            init: function( opts ) {\n\t                var me = this,\n\t                    deferred, len, i, item, arr, accept, runtime;\n\t\n\t                if ( $.isPlainObject( opts.accept ) ) {\n\t                    opts.accept = [ opts.accept ];\n\t                }\n\t\n\t                // accept\n\t                if ( opts.accept ) {\n\t                    arr = [];\n\t\n\t                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\n\t                        item = opts.accept[ i ].extensions;\n\t                        item && arr.push( item );\n\t                    }\n\t\n\t                    if ( arr.length ) {\n\t                        accept = '\\\\.' + arr.join(',')\n\t                                .replace( /,/g, '$|\\\\.' )\n\t                                .replace( /\\*/g, '.*' ) + '$';\n\t                    }\n\t\n\t                    me.accept = new RegExp( accept, 'i' );\n\t                }\n\t\n\t                me.queue = new Queue();\n\t                me.stats = me.queue.stats;\n\t\n\t                // html5\n\t                // \n\t                if ( this.request('predict-runtime-type') !== 'html5' ) {\n\t                    return;\n\t                }\n\t\n\t                //  html5  placeholder\n\t                //  File  webuploader \n\t                deferred = Base.Deferred();\n\t                this.placeholder = runtime = new RuntimeClient('Placeholder');\n\t                runtime.connectRuntime({\n\t                    runtimeOrder: 'html5'\n\t                }, function() {\n\t                    me._ruid = runtime.getRuid();\n\t                    deferred.resolve();\n\t                });\n\t                return deferred.promise();\n\t            },\n\t\n\t\n\t            // File\n\t            _wrapFile: function( file ) {\n\t                if ( !(file instanceof WUFile) ) {\n\t\n\t                    if ( !(file instanceof File) ) {\n\t                        if ( !this._ruid ) {\n\t                            throw new Error('Can\\'t add external files.');\n\t                        }\n\t                        file = new File( this._ruid, file );\n\t                    }\n\t\n\t                    file = new WUFile( file );\n\t                }\n\t\n\t                return file;\n\t            },\n\t\n\t            // \n\t            acceptFile: function( file ) {\n\t                 var invalid = !file || !file.size || this.accept &&\n\t\n\t                        // \n\t                        rExt.exec( file.name )!== null ? !this.accept.test( file.name ) : true;\n\t                return !invalid;\n\t            },\n\t\n\t\n\t            /**\n\t             * @event beforeFileQueued\n\t             * @param {File} file File\n\t             * @description handler`false`\n\t             * @for  Uploader\n\t             */\n\t\n\t            /**\n\t             * @event fileQueued\n\t             * @param {File} file File\n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t\n\t            _addFile: function( file ) {\n\t                var me = this;\n\t\n\t                file = me._wrapFile( file );\n\t\n\t                //  `beforeFileQueued`\n\t                if ( !me.owner.trigger( 'beforeFileQueued', file ) ) {\n\t                    return;\n\t                }\n\t\n\t                // \n\t                if ( !me.acceptFile( file ) ) {\n\t                    me.owner.trigger( 'error', 'Q_TYPE_DENIED', file );\n\t                    return;\n\t                }\n\t\n\t                me.queue.append( file );\n\t                me.owner.trigger( 'fileQueued', file );\n\t                return file;\n\t            },\n\t\n\t            getFile: function( fileId ) {\n\t                return this.queue.getFile( fileId );\n\t            },\n\t\n\t            /**\n\t             * @event filesQueued\n\t             * @param {File} files File(lib/File\n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t\n\t            /**\n\t             * @property {Boolean} [auto=false]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description  true \n\t             *\n\t             */\n\t\n\t            /**\n\t             * @method addFiles\n\t             * @grammar addFiles( file ) => undefined\n\t             * @grammar addFiles( [file1, file2 ...] ) => undefined\n\t             * @param {Array of File or File} [files] Files  \n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t            addFile: function( files ) {\n\t                var me = this;\n\t\n\t                if ( !files.length ) {\n\t                    files = [ files ];\n\t                }\n\t\n\t                files = $.map( files, function( file ) {\n\t                    return me._addFile( file );\n\t                });\n\t\n\t                me.owner.trigger( 'filesQueued', files );\n\t\n\t                if ( me.options.auto ) {\n\t                    setTimeout(function() {\n\t                        me.request('start-upload');\n\t                    }, 20 );\n\t                }\n\t            },\n\t\n\t            getStats: function() {\n\t                return this.stats;\n\t            },\n\t\n\t            /**\n\t             * @event fileDequeued\n\t             * @param {File} file File\n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t\n\t             /**\n\t             * @method removeFile\n\t             * @grammar removeFile( file ) => undefined\n\t             * @grammar removeFile( id ) => undefined\n\t             * @grammar removeFile( file, true ) => undefined\n\t             * @grammar removeFile( id, true ) => undefined\n\t             * @param {File|id} file FileFileid\n\t             * @description ,  `true`  queue \n\t             * @for  Uploader\n\t             * @example\n\t             *\n\t             * $li.on('click', '.remove-this', function() {\n\t             *     uploader.removeFile( file );\n\t             * })\n\t             */\n\t            removeFile: function( file, remove ) {\n\t                var me = this;\n\t\n\t                file = file.id ? file : me.queue.getFile( file );\n\t\n\t                this.request( 'cancel-file', file );\n\t\n\t                if ( remove ) {\n\t                    this.queue.removeFile( file );\n\t                }\n\t            },\n\t\n\t            /**\n\t             * @method getFiles\n\t             * @grammar getFiles() => Array\n\t             * @grammar getFiles( status1, status2, status... ) => Array\n\t             * @description \n\t             * @for  Uploader\n\t             * @example\n\t             * console.log( uploader.getFiles() );    // => all files\n\t             * console.log( uploader.getFiles('error') )    // => all error files.\n\t             */\n\t            getFiles: function() {\n\t                return this.queue.getFiles.apply( this.queue, arguments );\n\t            },\n\t\n\t            fetchFile: function() {\n\t                return this.queue.fetch.apply( this.queue, arguments );\n\t            },\n\t\n\t            /**\n\t             * @method retry\n\t             * @grammar retry() => undefined\n\t             * @grammar retry( file ) => undefined\n\t             * @description \n\t             * @for  Uploader\n\t             * @example\n\t             * function retry() {\n\t             *     uploader.retry();\n\t             * }\n\t             */\n\t            retry: function( file, noForceStart ) {\n\t                var me = this,\n\t                    files, i, len;\n\t\n\t                if ( file ) {\n\t                    file = file.id ? file : me.queue.getFile( file );\n\t                    file.setStatus( Status.QUEUED );\n\t                    noForceStart || me.request('start-upload');\n\t                    return;\n\t                }\n\t\n\t                files = me.queue.getFiles( Status.ERROR );\n\t                i = 0;\n\t                len = files.length;\n\t\n\t                for ( ; i < len; i++ ) {\n\t                    file = files[ i ];\n\t                    file.setStatus( Status.QUEUED );\n\t                }\n\t\n\t                me.request('start-upload');\n\t            },\n\t\n\t            /**\n\t             * @method sort\n\t             * @grammar sort( fn ) => undefined\n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t            sortFiles: function() {\n\t                return this.queue.sort.apply( this.queue, arguments );\n\t            },\n\t\n\t            /**\n\t             * @event reset\n\t             * @description  uploader \n\t             * @for  Uploader\n\t             */\n\t\n\t            /**\n\t             * @method reset\n\t             * @grammar reset() => undefined\n\t             * @description uploader\n\t             * @for  Uploader\n\t             * @example\n\t             * uploader.reset();\n\t             */\n\t            reset: function() {\n\t                this.owner.trigger('reset');\n\t                this.queue = new Queue();\n\t                this.stats = this.queue.stats;\n\t            },\n\t\n\t            destroy: function() {\n\t                this.reset();\n\t                this.placeholder && this.placeholder.destroy();\n\t            }\n\t        });\n\t\n\t    });\n\t    /**\n\t     * @fileOverview Runtime\n\t     */\n\t    define('widgets/runtime',[\n\t        'uploader',\n\t        'runtime/runtime',\n\t        'widgets/widget'\n\t    ], function( Uploader, Runtime ) {\n\t\n\t        Uploader.support = function() {\n\t            return Runtime.hasRuntime.apply( Runtime, arguments );\n\t        };\n\t\n\t        /**\n\t         * @property {Object} [runtimeOrder=html5,flash]\n\t         * @namespace options\n\t         * @for Uploader\n\t         * @description  html5  html5,  flash.\n\t         *\n\t         *  `flash` flash \n\t         */\n\t\n\t        return Uploader.register({\n\t            name: 'runtime',\n\t\n\t            init: function() {\n\t                if ( !this.predictRuntimeType() ) {\n\t                    throw Error('Runtime Error');\n\t                }\n\t            },\n\t\n\t            /**\n\t             * Uploader`Runtime`\n\t             * @grammar predictRuntimeType() => String\n\t             * @method predictRuntimeType\n\t             * @for  Uploader\n\t             */\n\t            predictRuntimeType: function() {\n\t                var orders = this.options.runtimeOrder || Runtime.orders,\n\t                    type = this.type,\n\t                    i, len;\n\t\n\t                if ( !type ) {\n\t                    orders = orders.split( /\\s*,\\s*/g );\n\t\n\t                    for ( i = 0, len = orders.length; i < len; i++ ) {\n\t                        if ( Runtime.hasRuntime( orders[ i ] ) ) {\n\t                            this.type = type = orders[ i ];\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t\n\t                return type;\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview Transport\n\t     */\n\t    define('lib/transport',[\n\t        'base',\n\t        'runtime/client',\n\t        'mediator'\n\t    ], function( Base, RuntimeClient, Mediator ) {\n\t\n\t        var $ = Base.$;\n\t\n\t        function Transport( opts ) {\n\t            var me = this;\n\t\n\t            opts = me.options = $.extend( true, {}, Transport.options, opts || {} );\n\t            RuntimeClient.call( this, 'Transport' );\n\t\n\t            this._blob = null;\n\t            this._formData = opts.formData || {};\n\t            this._headers = opts.headers || {};\n\t\n\t            this.on( 'progress', this._timeout );\n\t            this.on( 'load error', function() {\n\t                me.trigger( 'progress', 1 );\n\t                clearTimeout( me._timer );\n\t            });\n\t        }\n\t\n\t        Transport.options = {\n\t            server: '',\n\t            method: 'POST',\n\t\n\t            // cookie, html5 runtime\n\t            withCredentials: false,\n\t            fileVal: 'file',\n\t            timeout: 2 * 60 * 1000,    // 2\n\t            formData: {},\n\t            headers: {},\n\t            sendAsBinary: false\n\t        };\n\t\n\t        $.extend( Transport.prototype, {\n\t\n\t            // Blob, \n\t            appendBlob: function( key, blob, filename ) {\n\t                var me = this,\n\t                    opts = me.options;\n\t\n\t                if ( me.getRuid() ) {\n\t                    me.disconnectRuntime();\n\t                }\n\t\n\t                // blobruntime.\n\t                me.connectRuntime( blob.ruid, function() {\n\t                    me.exec('init');\n\t                });\n\t\n\t                me._blob = blob;\n\t                opts.fileVal = key || opts.fileVal;\n\t                opts.filename = filename || opts.filename;\n\t\n\t            },\n\t\n\t            // \n\t            append: function( key, value ) {\n\t                if ( typeof key === 'object' ) {\n\t                    $.extend( this._formData, key );\n\t                } else {\n\t                    this._formData[ key ] = value;\n\t                }\n\t            },\n\t\n\t            setRequestHeader: function( key, value ) {\n\t                if ( typeof key === 'object' ) {\n\t                    $.extend( this._headers, key );\n\t                } else {\n\t                    this._headers[ key ] = value;\n\t                }\n\t            },\n\t\n\t            send: function( method ) {\n\t                this.exec( 'send', method );\n\t                this._timeout();\n\t            },\n\t\n\t            abort: function() {\n\t                clearTimeout( this._timer );\n\t                return this.exec('abort');\n\t            },\n\t\n\t            destroy: function() {\n\t                this.trigger('destroy');\n\t                this.off();\n\t                this.exec('destroy');\n\t                this.disconnectRuntime();\n\t            },\n\t\n\t            getResponse: function() {\n\t                return this.exec('getResponse');\n\t            },\n\t\n\t            getResponseAsJson: function() {\n\t                return this.exec('getResponseAsJson');\n\t            },\n\t\n\t            getStatus: function() {\n\t                return this.exec('getStatus');\n\t            },\n\t\n\t            _timeout: function() {\n\t                var me = this,\n\t                    duration = me.options.timeout;\n\t\n\t                if ( !duration ) {\n\t                    return;\n\t                }\n\t\n\t                clearTimeout( me._timer );\n\t                me._timer = setTimeout(function() {\n\t                    me.abort();\n\t                    me.trigger( 'error', 'timeout' );\n\t                }, duration );\n\t            }\n\t\n\t        });\n\t\n\t        // Transport\n\t        Mediator.installTo( Transport.prototype );\n\t\n\t        return Transport;\n\t    });\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('widgets/upload',[\n\t        'base',\n\t        'uploader',\n\t        'file',\n\t        'lib/transport',\n\t        'widgets/widget'\n\t    ], function( Base, Uploader, WUFile, Transport ) {\n\t\n\t        var $ = Base.$,\n\t            isPromise = Base.isPromise,\n\t            Status = WUFile.Status;\n\t\n\t        // \n\t        $.extend( Uploader.options, {\n\t\n\t\n\t            /**\n\t             * @property {Boolean} [prepareNextFile=false]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description \n\t             * md5\n\t             * \n\t             */\n\t            prepareNextFile: false,\n\t\n\t            /**\n\t             * @property {Boolean} [chunked=false]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description \n\t             */\n\t            chunked: false,\n\t\n\t            /**\n\t             * @property {Boolean} [chunkSize=5242880]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description  5M.\n\t             */\n\t            chunkSize: 5 * 1024 * 1024,\n\t\n\t            /**\n\t             * @property {Boolean} [chunkRetry=2]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description \n\t             */\n\t            chunkRetry: 2,\n\t\n\t            /**\n\t             * @property {Boolean} [threads=3]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description \n\t             */\n\t            threads: 3,\n\t\n\t\n\t            /**\n\t             * @property {Object} [formData={}]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description \n\t             */\n\t            formData: {}\n\t\n\t            /**\n\t             * @property {Object} [fileVal='file']\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description name\n\t             */\n\t\n\t            /**\n\t             * @property {Object} [method='POST']\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description `POST``GET`\n\t             */\n\t\n\t            /**\n\t             * @property {Object} [sendAsBinary=false]\n\t             * @namespace options\n\t             * @for Uploader\n\t             * @description `php://input`\n\t             * $_GET\n\t             */\n\t        });\n\t\n\t        // \n\t        function CuteFile( file, chunkSize ) {\n\t            var pending = [],\n\t                blob = file.source,\n\t                total = blob.size,\n\t                chunks = chunkSize ? Math.ceil( total / chunkSize ) : 1,\n\t                start = 0,\n\t                index = 0,\n\t                len, api;\n\t\n\t            api = {\n\t                file: file,\n\t\n\t                has: function() {\n\t                    return !!pending.length;\n\t                },\n\t\n\t                shift: function() {\n\t                    return pending.shift();\n\t                },\n\t\n\t                unshift: function( block ) {\n\t                    pending.unshift( block );\n\t                }\n\t            };\n\t\n\t            while ( index < chunks ) {\n\t                len = Math.min( chunkSize, total - start );\n\t\n\t                pending.push({\n\t                    file: file,\n\t                    start: start,\n\t                    end: chunkSize ? (start + len) : total,\n\t                    total: total,\n\t                    chunks: chunks,\n\t                    chunk: index++,\n\t                    cuted: api\n\t                });\n\t                start += len;\n\t            }\n\t\n\t            file.blocks = pending.concat();\n\t            file.remaning = pending.length;\n\t\n\t            return api;\n\t        }\n\t\n\t        Uploader.register({\n\t            name: 'upload',\n\t\n\t            init: function() {\n\t                var owner = this.owner,\n\t                    me = this;\n\t\n\t                this.runing = false;\n\t                this.progress = false;\n\t\n\t                owner\n\t                    .on( 'startUpload', function() {\n\t                        me.progress = true;\n\t                    })\n\t                    .on( 'uploadFinished', function() {\n\t                        me.progress = false;\n\t                    });\n\t\n\t                // threads\n\t                this.pool = [];\n\t\n\t                // \n\t                this.stack = [];\n\t\n\t                // \n\t                this.pending = [];\n\t\n\t                // \n\t                this.remaning = 0;\n\t                this.__tick = Base.bindFn( this._tick, this );\n\t\n\t                owner.on( 'uploadComplete', function( file ) {\n\t\n\t                    // \n\t                    file.blocks && $.each( file.blocks, function( _, v ) {\n\t                        v.transport && (v.transport.abort(), v.transport.destroy());\n\t                        delete v.transport;\n\t                    });\n\t\n\t                    delete file.blocks;\n\t                    delete file.remaning;\n\t                });\n\t            },\n\t\n\t            reset: function() {\n\t                this.request( 'stop-upload', true );\n\t                this.runing = false;\n\t                this.pool = [];\n\t                this.stack = [];\n\t                this.pending = [];\n\t                this.remaning = 0;\n\t                this._trigged = false;\n\t                this._promise = null;\n\t            },\n\t\n\t            /**\n\t             * @event startUpload\n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t\n\t            /**\n\t             * \n\t             *\n\t             * \n\t             * @grammar upload() => undefined\n\t             * @grammar upload( file | fileId) => undefined\n\t             * @method upload\n\t             * @for  Uploader\n\t             */\n\t            startUpload: function(file) {\n\t                var me = this;\n\t\n\t                // invalid\n\t                $.each( me.request( 'get-files', Status.INVALID ), function() {\n\t                    me.request( 'remove-file', this );\n\t                });\n\t\n\t                // \n\t                if ( file ) {\n\t                    file = file.id ? file : me.request( 'get-file', file );\n\t\n\t                    if (file.getStatus() === Status.INTERRUPT) {\n\t                        $.each( me.pool, function( _, v ) {\n\t\n\t                            // \n\t                            if (v.file !== file) {\n\t                                return;\n\t                            }\n\t\n\t                            v.transport && v.transport.send();\n\t                        });\n\t\n\t                        file.setStatus( Status.QUEUED );\n\t                    } else if (file.getStatus() === Status.PROGRESS) {\n\t                        return;\n\t                    } else {\n\t                        file.setStatus( Status.QUEUED );\n\t                    }\n\t                } else {\n\t                    $.each( me.request( 'get-files', [ Status.INITED ] ), function() {\n\t                        this.setStatus( Status.QUEUED );\n\t                    });\n\t                }\n\t\n\t                if ( me.runing ) {\n\t                    return;\n\t                }\n\t\n\t                me.runing = true;\n\t\n\t                var files = [];\n\t\n\t                // \n\t                $.each( me.pool, function( _, v ) {\n\t                    var file = v.file;\n\t\n\t                    if ( file.getStatus() === Status.INTERRUPT ) {\n\t                        files.push(file);\n\t                        me._trigged = false;\n\t                        v.transport && v.transport.send();\n\t                    }\n\t                });\n\t\n\t                var file;\n\t                while ( (file = files.shift()) ) {\n\t                    file.setStatus( Status.PROGRESS );\n\t                }\n\t\n\t                file || $.each( me.request( 'get-files',\n\t                        Status.INTERRUPT ), function() {\n\t                    this.setStatus( Status.PROGRESS );\n\t                });\n\t\n\t                me._trigged = false;\n\t                Base.nextTick( me.__tick );\n\t                me.owner.trigger('startUpload');\n\t            },\n\t\n\t            /**\n\t             * @event stopUpload\n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t\n\t            /**\n\t             * \n\t             *\n\t             * \n\t             * @grammar stop() => undefined\n\t             * @grammar stop( true ) => undefined\n\t             * @grammar stop( file ) => undefined\n\t             * @method stop\n\t             * @for  Uploader\n\t             */\n\t            stopUpload: function( file, interrupt ) {\n\t                var me = this;\n\t\n\t                if (file === true) {\n\t                    interrupt = file;\n\t                    file = null;\n\t                }\n\t\n\t                if ( me.runing === false ) {\n\t                    return;\n\t                }\n\t\n\t                // \n\t                if ( file ) {\n\t                    file = file.id ? file : me.request( 'get-file', file );\n\t\n\t                    if ( file.getStatus() !== Status.PROGRESS &&\n\t                            file.getStatus() !== Status.QUEUED ) {\n\t                        return;\n\t                    }\n\t\n\t                    file.setStatus( Status.INTERRUPT );\n\t                    $.each( me.pool, function( _, v ) {\n\t\n\t                        //  abort \n\t                        if (v.file !== file) {\n\t                            return;\n\t                        }\n\t\n\t                        v.transport && v.transport.abort();\n\t                        me._putback(v);\n\t                        me._popBlock(v);\n\t                    });\n\t\n\t                    return Base.nextTick( me.__tick );\n\t                }\n\t\n\t                me.runing = false;\n\t\n\t                if (this._promise && this._promise.file) {\n\t                    this._promise.file.setStatus( Status.INTERRUPT );\n\t                }\n\t\n\t                interrupt && $.each( me.pool, function( _, v ) {\n\t                    v.transport && v.transport.abort();\n\t                    v.file.setStatus( Status.INTERRUPT );\n\t                });\n\t\n\t                me.owner.trigger('stopUpload');\n\t            },\n\t\n\t            /**\n\t             * @method cancelFile\n\t             * @grammar cancelFile( file ) => undefined\n\t             * @grammar cancelFile( id ) => undefined\n\t             * @param {File|id} file FileFileid\n\t             * @description , \n\t             * @for  Uploader\n\t             * @example\n\t             *\n\t             * $li.on('click', '.remove-this', function() {\n\t             *     uploader.cancelFile( file );\n\t             * })\n\t             */\n\t            cancelFile: function( file ) {\n\t                file = file.id ? file : this.request( 'get-file', file );\n\t\n\t                // \n\t                file.blocks && $.each( file.blocks, function( _, v ) {\n\t                    var _tr = v.transport;\n\t\n\t                    if ( _tr ) {\n\t                        _tr.abort();\n\t                        _tr.destroy();\n\t                        delete v.transport;\n\t                    }\n\t                });\n\t\n\t                file.setStatus( Status.CANCELLED );\n\t                this.owner.trigger( 'fileDequeued', file );\n\t            },\n\t\n\t            /**\n\t             * `Uplaode`r\n\t             * @grammar isInProgress() => Boolean\n\t             * @method isInProgress\n\t             * @for  Uploader\n\t             */\n\t            isInProgress: function() {\n\t                return !!this.progress;\n\t            },\n\t\n\t            _getStats: function() {\n\t                return this.request('get-stats');\n\t            },\n\t\n\t            /**\n\t             * \n\t             * @grammar skipFile( file ) => undefined\n\t             * @method skipFile\n\t             * @for  Uploader\n\t             */\n\t            skipFile: function( file, status ) {\n\t                file = file.id ? file : this.request( 'get-file', file );\n\t\n\t                file.setStatus( status || Status.COMPLETE );\n\t                file.skipped = true;\n\t\n\t                // \n\t                file.blocks && $.each( file.blocks, function( _, v ) {\n\t                    var _tr = v.transport;\n\t\n\t                    if ( _tr ) {\n\t                        _tr.abort();\n\t                        _tr.destroy();\n\t                        delete v.transport;\n\t                    }\n\t                });\n\t\n\t                this.owner.trigger( 'uploadSkip', file );\n\t            },\n\t\n\t            /**\n\t             * @event uploadFinished\n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t            _tick: function() {\n\t                var me = this,\n\t                    opts = me.options,\n\t                    fn, val;\n\t\n\t                // promise\n\t                if ( me._promise ) {\n\t                    return me._promise.always( me.__tick );\n\t                }\n\t\n\t                // \n\t                if ( me.pool.length < opts.threads && (val = me._nextBlock()) ) {\n\t                    me._trigged = false;\n\t\n\t                    fn = function( val ) {\n\t                        me._promise = null;\n\t\n\t                        // rejectval\n\t                        val && val.file && me._startSend( val );\n\t                        Base.nextTick( me.__tick );\n\t                    };\n\t\n\t                    me._promise = isPromise( val ) ? val.always( fn ) : fn( val );\n\t\n\t                // \n\t                } else if ( !me.remaning && !me._getStats().numOfQueue &&\n\t                    !me._getStats().numofInterrupt ) {\n\t                    me.runing = false;\n\t\n\t                    me._trigged || Base.nextTick(function() {\n\t                        me.owner.trigger('uploadFinished');\n\t                    });\n\t                    me._trigged = true;\n\t                }\n\t            },\n\t\n\t            _putback: function(block) {\n\t                var idx;\n\t\n\t                block.cuted.unshift(block);\n\t                idx = this.stack.indexOf(block.cuted);\n\t\n\t                if (!~idx) {\n\t                    this.stack.unshift(block.cuted);\n\t                }\n\t            },\n\t\n\t            _getStack: function() {\n\t                var i = 0,\n\t                    act;\n\t\n\t                while ( (act = this.stack[ i++ ]) ) {\n\t                    if ( act.has() && act.file.getStatus() === Status.PROGRESS ) {\n\t                        return act;\n\t                    } else if (!act.has() ||\n\t                            act.file.getStatus() !== Status.PROGRESS &&\n\t                            act.file.getStatus() !== Status.INTERRUPT ) {\n\t\n\t                        //  progress\n\t                        // interupt \n\t                        this.stack.splice( --i, 1 );\n\t                    }\n\t                }\n\t\n\t                return null;\n\t            },\n\t\n\t            _nextBlock: function() {\n\t                var me = this,\n\t                    opts = me.options,\n\t                    act, next, done, preparing;\n\t\n\t                // \n\t                if ( (act = this._getStack()) ) {\n\t\n\t                    // \n\t                    if ( opts.prepareNextFile && !me.pending.length ) {\n\t                        me._prepareNextFile();\n\t                    }\n\t\n\t                    return act.shift();\n\t\n\t                // \n\t                } else if ( me.runing ) {\n\t\n\t                    // queue\n\t                    if ( !me.pending.length && me._getStats().numOfQueue ) {\n\t                        me._prepareNextFile();\n\t                    }\n\t\n\t                    next = me.pending.shift();\n\t                    done = function( file ) {\n\t                        if ( !file ) {\n\t                            return null;\n\t                        }\n\t\n\t                        act = CuteFile( file, opts.chunked ? opts.chunkSize : 0 );\n\t                        me.stack.push(act);\n\t                        return act.shift();\n\t                    };\n\t\n\t                    // prepare\n\t                    if ( isPromise( next) ) {\n\t                        preparing = next.file;\n\t                        next = next[ next.pipe ? 'pipe' : 'then' ]( done );\n\t                        next.file = preparing;\n\t                        return next;\n\t                    }\n\t\n\t                    return done( next );\n\t                }\n\t            },\n\t\n\t\n\t            /**\n\t             * @event uploadStart\n\t             * @param {File} file File\n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t            _prepareNextFile: function() {\n\t                var me = this,\n\t                    file = me.request('fetch-file'),\n\t                    pending = me.pending,\n\t                    promise;\n\t\n\t                if ( file ) {\n\t                    promise = me.request( 'before-send-file', file, function() {\n\t\n\t                        // skipskipQueued.\n\t                        if ( file.getStatus() === Status.PROGRESS ||\n\t                            file.getStatus() === Status.INTERRUPT ) {\n\t                            return file;\n\t                        }\n\t\n\t                        return me._finishFile( file );\n\t                    });\n\t\n\t                    me.owner.trigger( 'uploadStart', file );\n\t                    file.setStatus( Status.PROGRESS );\n\t\n\t                    promise.file = file;\n\t\n\t                    // pending\n\t                    promise.done(function() {\n\t                        var idx = $.inArray( promise, pending );\n\t\n\t                        ~idx && pending.splice( idx, 1, file );\n\t                    });\n\t\n\t                    // befeore-send-file\n\t                    promise.fail(function( reason ) {\n\t                        file.setStatus( Status.ERROR, reason );\n\t                        me.owner.trigger( 'uploadError', file, reason );\n\t                        me.owner.trigger( 'uploadComplete', file );\n\t                    });\n\t\n\t                    pending.push( promise );\n\t                }\n\t            },\n\t\n\t            // \n\t            _popBlock: function( block ) {\n\t                var idx = $.inArray( block, this.pool );\n\t\n\t                this.pool.splice( idx, 1 );\n\t                block.file.remaning--;\n\t                this.remaning--;\n\t            },\n\t\n\t            // promisereject\n\t            _startSend: function( block ) {\n\t                var me = this,\n\t                    file = block.file,\n\t                    promise;\n\t\n\t                //  before-send-file  promise \n\t                // \n\t                //  promise,  promise \n\t                if ( file.getStatus() !== Status.PROGRESS ) {\n\t\n\t                    // \n\t                    if (file.getStatus() === Status.INTERRUPT) {\n\t                        me._putback(block);\n\t                    }\n\t\n\t                    return;\n\t                }\n\t\n\t                me.pool.push( block );\n\t                me.remaning++;\n\t\n\t                // \n\t                // content-type\n\t                block.blob = block.chunks === 1 ? file.source :\n\t                        file.source.slice( block.start, block.end );\n\t\n\t                // hook, \n\t                promise = me.request( 'before-send', block, function() {\n\t\n\t                    // \n\t                    if ( file.getStatus() === Status.PROGRESS ) {\n\t                        me._doSend( block );\n\t                    } else {\n\t                        me._popBlock( block );\n\t                        Base.nextTick( me.__tick );\n\t                    }\n\t                });\n\t\n\t                // fail\n\t                promise.fail(function() {\n\t                    if ( file.remaning === 1 ) {\n\t                        me._finishFile( file ).always(function() {\n\t                            block.percentage = 1;\n\t                            me._popBlock( block );\n\t                            me.owner.trigger( 'uploadComplete', file );\n\t                            Base.nextTick( me.__tick );\n\t                        });\n\t                    } else {\n\t                        block.percentage = 1;\n\t                        me.updateFileProgress( file );\n\t                        me._popBlock( block );\n\t                        Base.nextTick( me.__tick );\n\t                    }\n\t                });\n\t            },\n\t\n\t\n\t            /**\n\t             * @event uploadBeforeSend\n\t             * @param {Object} object\n\t             * @param {Object} data \n\t             * @param {Object} headers \n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t\n\t            /**\n\t             * @event uploadAccept\n\t             * @param {Object} object\n\t             * @param {Object} ret jsonjsonret._raw\n\t             * @description handler`false`, `server``uploadError`\n\t             * @for  Uploader\n\t             */\n\t\n\t            /**\n\t             * @event uploadProgress\n\t             * @param {File} file File\n\t             * @param {Number} percentage \n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t\n\t\n\t            /**\n\t             * @event uploadError\n\t             * @param {File} file File\n\t             * @param {String} reason code\n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t\n\t            /**\n\t             * @event uploadSuccess\n\t             * @param {File} file File\n\t             * @param {Object} response \n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t\n\t            /**\n\t             * @event uploadComplete\n\t             * @param {File} [file] File\n\t             * @description \n\t             * @for  Uploader\n\t             */\n\t\n\t            // \n\t            _doSend: function( block ) {\n\t                var me = this,\n\t                    owner = me.owner,\n\t                    opts = me.options,\n\t                    file = block.file,\n\t                    tr = new Transport( opts ),\n\t                    data = $.extend({}, opts.formData ),\n\t                    headers = $.extend({}, opts.headers ),\n\t                    requestAccept, ret;\n\t\n\t                block.transport = tr;\n\t\n\t                tr.on( 'destroy', function() {\n\t                    delete block.transport;\n\t                    me._popBlock( block );\n\t                    Base.nextTick( me.__tick );\n\t                });\n\t\n\t                // \n\t                tr.on( 'progress', function( percentage ) {\n\t                    block.percentage = percentage;\n\t                    me.updateFileProgress( file );\n\t                });\n\t\n\t                // \n\t                requestAccept = function( reject ) {\n\t                    var fn;\n\t\n\t                    ret = tr.getResponseAsJson() || {};\n\t                    ret._raw = tr.getResponse();\n\t                    fn = function( value ) {\n\t                        reject = value;\n\t                    };\n\t\n\t                    // \n\t                    if ( !owner.trigger( 'uploadAccept', block, ret, fn ) ) {\n\t                        reject = reject || 'server';\n\t                    }\n\t\n\t                    return reject;\n\t                };\n\t\n\t                // \n\t                tr.on( 'error', function( type, flag ) {\n\t                    block.retried = block.retried || 0;\n\t\n\t                    // \n\t                    if ( block.chunks > 1 && ~'http,abort'.indexOf( type ) &&\n\t                            block.retried < opts.chunkRetry ) {\n\t\n\t                        block.retried++;\n\t                        tr.send();\n\t\n\t                    } else {\n\t\n\t                        // http status 500 ~ 600\n\t                        if ( !flag && type === 'server' ) {\n\t                            type = requestAccept( type );\n\t                        }\n\t\n\t                        file.setStatus( Status.ERROR, type );\n\t                        owner.trigger( 'uploadError', file, type );\n\t                        owner.trigger( 'uploadComplete', file );\n\t                    }\n\t                });\n\t\n\t                // \n\t                tr.on( 'load', function() {\n\t                    var reason;\n\t\n\t                    // \n\t                    if ( (reason = requestAccept()) ) {\n\t                        tr.trigger( 'error', reason, true );\n\t                        return;\n\t                    }\n\t\n\t                    // \n\t                    if ( file.remaning === 1 ) {\n\t                        me._finishFile( file, ret );\n\t                    } else {\n\t                        tr.destroy();\n\t                    }\n\t                });\n\t\n\t                // \n\t                data = $.extend( data, {\n\t                    id: file.id,\n\t                    name: file.name,\n\t                    type: file.type,\n\t                    lastModifiedDate: file.lastModifiedDate,\n\t                    size: file.size\n\t                });\n\t\n\t                block.chunks > 1 && $.extend( data, {\n\t                    chunks: block.chunks,\n\t                    chunk: block.chunk\n\t                });\n\t\n\t                // \n\t                // \n\t                owner.trigger( 'uploadBeforeSend', block, data, headers );\n\t\n\t                // \n\t                tr.appendBlob( opts.fileVal, block.blob, file.name );\n\t                tr.append( data );\n\t                tr.setRequestHeader( headers );\n\t                tr.send();\n\t            },\n\t\n\t            // \n\t            _finishFile: function( file, ret, hds ) {\n\t                var owner = this.owner;\n\t\n\t                return owner\n\t                        .request( 'after-send-file', arguments, function() {\n\t                            file.setStatus( Status.COMPLETE );\n\t                            owner.trigger( 'uploadSuccess', file, ret, hds );\n\t                        })\n\t                        .fail(function( reason ) {\n\t\n\t                            // invalid\n\t                            if ( file.getStatus() === Status.PROGRESS ) {\n\t                                file.setStatus( Status.ERROR, reason );\n\t                            }\n\t\n\t                            owner.trigger( 'uploadError', file, reason );\n\t                        })\n\t                        .always(function() {\n\t                            owner.trigger( 'uploadComplete', file );\n\t                        });\n\t            },\n\t\n\t            updateFileProgress: function(file) {\n\t                var totalPercent = 0,\n\t                    uploaded = 0;\n\t\n\t                if (!file.blocks) {\n\t                    return;\n\t                }\n\t\n\t                $.each( file.blocks, function( _, v ) {\n\t                    uploaded += (v.percentage || 0) * (v.end - v.start);\n\t                });\n\t\n\t                totalPercent = uploaded / file.size;\n\t                this.owner.trigger( 'uploadProgress', file, totalPercent || 0 );\n\t            }\n\t\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview \n\t     */\n\t\n\t    define('widgets/validator',[\n\t        'base',\n\t        'uploader',\n\t        'file',\n\t        'widgets/widget'\n\t    ], function( Base, Uploader, WUFile ) {\n\t\n\t        var $ = Base.$,\n\t            validators = {},\n\t            api;\n\t\n\t        /**\n\t         * @event error\n\t         * @param {String} type \n\t         * @description validate`upload.on('error', handler)`\n\t         *\n\t         * * `Q_EXCEED_NUM_LIMIT` `fileNumLimit``uploader`\n\t         * * `Q_EXCEED_SIZE_LIMIT` `Q_EXCEED_SIZE_LIMIT``uploader`\n\t         * * `Q_TYPE_DENIED` \n\t         * @for  Uploader\n\t         */\n\t\n\t        // api\n\t        api = {\n\t\n\t            // \n\t            addValidator: function( type, cb ) {\n\t                validators[ type ] = cb;\n\t            },\n\t\n\t            // \n\t            removeValidator: function( type ) {\n\t                delete validators[ type ];\n\t            }\n\t        };\n\t\n\t        // UploaderValidators\n\t        Uploader.register({\n\t            name: 'validator',\n\t\n\t            init: function() {\n\t                var me = this;\n\t                Base.nextTick(function() {\n\t                    $.each( validators, function() {\n\t                        this.call( me.owner );\n\t                    });\n\t                });\n\t            }\n\t        });\n\t\n\t        /**\n\t         * @property {int} [fileNumLimit=undefined]\n\t         * @namespace options\n\t         * @for Uploader\n\t         * @description , \n\t         */\n\t        api.addValidator( 'fileNumLimit', function() {\n\t            var uploader = this,\n\t                opts = uploader.options,\n\t                count = 0,\n\t                max = parseInt( opts.fileNumLimit, 10 ),\n\t                flag = true;\n\t\n\t            if ( !max ) {\n\t                return;\n\t            }\n\t\n\t            uploader.on( 'beforeFileQueued', function( file ) {\n\t\n\t                if ( count >= max && flag ) {\n\t                    flag = false;\n\t                    this.trigger( 'error', 'Q_EXCEED_NUM_LIMIT', max, file );\n\t                    setTimeout(function() {\n\t                        flag = true;\n\t                    }, 1 );\n\t                }\n\t\n\t                return count >= max ? false : true;\n\t            });\n\t\n\t            uploader.on( 'fileQueued', function() {\n\t                count++;\n\t            });\n\t\n\t            uploader.on( 'fileDequeued', function() {\n\t                count--;\n\t            });\n\t\n\t            uploader.on( 'reset', function() {\n\t                count = 0;\n\t            });\n\t        });\n\t\n\t\n\t        /**\n\t         * @property {int} [fileSizeLimit=undefined]\n\t         * @namespace options\n\t         * @for Uploader\n\t         * @description , \n\t         */\n\t        api.addValidator( 'fileSizeLimit', function() {\n\t            var uploader = this,\n\t                opts = uploader.options,\n\t                count = 0,\n\t                max = parseInt( opts.fileSizeLimit, 10 ),\n\t                flag = true;\n\t\n\t            if ( !max ) {\n\t                return;\n\t            }\n\t\n\t            uploader.on( 'beforeFileQueued', function( file ) {\n\t                var invalid = count + file.size > max;\n\t\n\t                if ( invalid && flag ) {\n\t                    flag = false;\n\t                    this.trigger( 'error', 'Q_EXCEED_SIZE_LIMIT', max, file );\n\t                    setTimeout(function() {\n\t                        flag = true;\n\t                    }, 1 );\n\t                }\n\t\n\t                return invalid ? false : true;\n\t            });\n\t\n\t            uploader.on( 'fileQueued', function( file ) {\n\t                count += file.size;\n\t            });\n\t\n\t            uploader.on( 'fileDequeued', function( file ) {\n\t                count -= file.size;\n\t            });\n\t\n\t            uploader.on( 'reset', function() {\n\t                count = 0;\n\t            });\n\t        });\n\t\n\t        /**\n\t         * @property {int} [fileSingleSizeLimit=undefined]\n\t         * @namespace options\n\t         * @for Uploader\n\t         * @description , \n\t         */\n\t        api.addValidator( 'fileSingleSizeLimit', function() {\n\t            var uploader = this,\n\t                opts = uploader.options,\n\t                max = opts.fileSingleSizeLimit;\n\t\n\t            if ( !max ) {\n\t                return;\n\t            }\n\t\n\t            uploader.on( 'beforeFileQueued', function( file ) {\n\t\n\t                if ( file.size > max ) {\n\t                    file.setStatus( WUFile.Status.INVALID, 'exceed_size' );\n\t                    this.trigger( 'error', 'F_EXCEED_SIZE', max, file );\n\t                    return false;\n\t                }\n\t\n\t            });\n\t\n\t        });\n\t\n\t        /**\n\t         * @property {Boolean} [duplicate=undefined]\n\t         * @namespace options\n\t         * @for Uploader\n\t         * @description  hash Key.\n\t         */\n\t        api.addValidator( 'duplicate', function() {\n\t            var uploader = this,\n\t                opts = uploader.options,\n\t                mapping = {};\n\t\n\t            if ( opts.duplicate ) {\n\t                return;\n\t            }\n\t\n\t            function hashString( str ) {\n\t                var hash = 0,\n\t                    i = 0,\n\t                    len = str.length,\n\t                    _char;\n\t\n\t                for ( ; i < len; i++ ) {\n\t                    _char = str.charCodeAt( i );\n\t                    hash = _char + (hash << 6) + (hash << 16) - hash;\n\t                }\n\t\n\t                return hash;\n\t            }\n\t\n\t            uploader.on( 'beforeFileQueued', function( file ) {\n\t                var hash = file.__hash || (file.__hash = hashString( file.name +\n\t                        file.size + file.lastModifiedDate ));\n\t\n\t                // \n\t                if ( mapping[ hash ] ) {\n\t                    this.trigger( 'error', 'F_DUPLICATE', file );\n\t                    return false;\n\t                }\n\t            });\n\t\n\t            uploader.on( 'fileQueued', function( file ) {\n\t                var hash = file.__hash;\n\t\n\t                hash && (mapping[ hash ] = true);\n\t            });\n\t\n\t            uploader.on( 'fileDequeued', function( file ) {\n\t                var hash = file.__hash;\n\t\n\t                hash && (delete mapping[ hash ]);\n\t            });\n\t\n\t            uploader.on( 'reset', function() {\n\t                mapping = {};\n\t            });\n\t        });\n\t\n\t        return api;\n\t    });\n\t\n\t    /**\n\t     * @fileOverview Md5\n\t     */\n\t    define('lib/md5',[\n\t        'runtime/client',\n\t        'mediator'\n\t    ], function( RuntimeClient, Mediator ) {\n\t\n\t        function Md5() {\n\t            RuntimeClient.call( this, 'Md5' );\n\t        }\n\t\n\t        //  Md5 \n\t        Mediator.installTo( Md5.prototype );\n\t\n\t        Md5.prototype.loadFromBlob = function( blob ) {\n\t            var me = this;\n\t\n\t            if ( me.getRuid() ) {\n\t                me.disconnectRuntime();\n\t            }\n\t\n\t            // blobruntime.\n\t            me.connectRuntime( blob.ruid, function() {\n\t                me.exec('init');\n\t                me.exec( 'loadFromBlob', blob );\n\t            });\n\t        };\n\t\n\t        Md5.prototype.getResult = function() {\n\t            return this.exec('getResult');\n\t        };\n\t\n\t        return Md5;\n\t    });\n\t    /**\n\t     * @fileOverview , \n\t     */\n\t    define('widgets/md5',[\n\t        'base',\n\t        'uploader',\n\t        'lib/md5',\n\t        'lib/blob',\n\t        'widgets/widget'\n\t    ], function( Base, Uploader, Md5, Blob ) {\n\t\n\t        return Uploader.register({\n\t            name: 'md5',\n\t\n\t\n\t            /**\n\t             *  md5  promise  progress \n\t             *\n\t             *\n\t             * @method md5File\n\t             * @grammar md5File( file[, start[, end]] ) => promise\n\t             * @for Uploader\n\t             * @example\n\t             *\n\t             * uploader.on( 'fileQueued', function( file ) {\n\t             *     var $li = ...;\n\t             *\n\t             *     uploader.md5File( file )\n\t             *\n\t             *         // \n\t             *         .progress(function(percentage) {\n\t             *             console.log('Percentage:', percentage);\n\t             *         })\n\t             *\n\t             *         // \n\t             *         .then(function(val) {\n\t             *             console.log('md5 result:', val);\n\t             *         });\n\t             *\n\t             * });\n\t             */\n\t            md5File: function( file, start, end ) {\n\t                var md5 = new Md5(),\n\t                    deferred = Base.Deferred(),\n\t                    blob = (file instanceof Blob) ? file :\n\t                        this.request( 'get-file', file ).source;\n\t\n\t                md5.on( 'progress load', function( e ) {\n\t                    e = e || {};\n\t                    deferred.notify( e.total ? e.loaded / e.total : 1 );\n\t                });\n\t\n\t                md5.on( 'complete', function() {\n\t                    deferred.resolve( md5.getResult() );\n\t                });\n\t\n\t                md5.on( 'error', function( reason ) {\n\t                    deferred.reject( reason );\n\t                });\n\t\n\t                if ( arguments.length > 1 ) {\n\t                    start = start || 0;\n\t                    end = end || 0;\n\t                    start < 0 && (start = blob.size + start);\n\t                    end < 0 && (end = blob.size + end);\n\t                    end = Math.min( end, blob.size );\n\t                    blob = blob.slice( start, end );\n\t                }\n\t\n\t                md5.loadFromBlob( blob );\n\t\n\t                return deferred.promise();\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview RuntimeRuntime, \n\t     */\n\t    define('runtime/compbase',[],function() {\n\t\n\t        function CompBase( owner, runtime ) {\n\t\n\t            this.owner = owner;\n\t            this.options = owner.options;\n\t\n\t            this.getRuntime = function() {\n\t                return runtime;\n\t            };\n\t\n\t            this.getRuid = function() {\n\t                return runtime.uid;\n\t            };\n\t\n\t            this.trigger = function() {\n\t                return owner.trigger.apply( owner, arguments );\n\t            };\n\t        }\n\t\n\t        return CompBase;\n\t    });\n\t    /**\n\t     * @fileOverview Html5Runtime\n\t     */\n\t    define('runtime/html5/runtime',[\n\t        'base',\n\t        'runtime/runtime',\n\t        'runtime/compbase'\n\t    ], function( Base, Runtime, CompBase ) {\n\t\n\t        var type = 'html5',\n\t            components = {};\n\t\n\t        function Html5Runtime() {\n\t            var pool = {},\n\t                me = this,\n\t                destroy = this.destroy;\n\t\n\t            Runtime.apply( me, arguments );\n\t            me.type = type;\n\t\n\t\n\t            // RuntimeClient\n\t            me.exec = function( comp, fn/*, args...*/) {\n\t                var client = this,\n\t                    uid = client.uid,\n\t                    args = Base.slice( arguments, 2 ),\n\t                    instance;\n\t\n\t                if ( components[ comp ] ) {\n\t                    instance = pool[ uid ] = pool[ uid ] ||\n\t                            new components[ comp ]( client, me );\n\t\n\t                    if ( instance[ fn ] ) {\n\t                        return instance[ fn ].apply( instance, args );\n\t                    }\n\t                }\n\t            };\n\t\n\t            me.destroy = function() {\n\t                // @todo \n\t                return destroy && destroy.apply( this, arguments );\n\t            };\n\t        }\n\t\n\t        Base.inherits( Runtime, {\n\t            constructor: Html5Runtime,\n\t\n\t            // callback\n\t            init: function() {\n\t                var me = this;\n\t                setTimeout(function() {\n\t                    me.trigger('ready');\n\t                }, 1 );\n\t            }\n\t\n\t        });\n\t\n\t        // Components\n\t        Html5Runtime.register = function( name, component ) {\n\t            var klass = components[ name ] = Base.inherits( CompBase, component );\n\t            return klass;\n\t        };\n\t\n\t        // html5\n\t        // \n\t        if ( window.Blob && window.FileReader && window.DataView ) {\n\t            Runtime.addRuntime( type, Html5Runtime );\n\t        }\n\t\n\t        return Html5Runtime;\n\t    });\n\t    /**\n\t     * @fileOverview Blob Html\n\t     */\n\t    define('runtime/html5/blob',[\n\t        'runtime/html5/runtime',\n\t        'lib/blob'\n\t    ], function( Html5Runtime, Blob ) {\n\t\n\t        return Html5Runtime.register( 'Blob', {\n\t            slice: function( start, end ) {\n\t                var blob = this.owner.source,\n\t                    slice = blob.slice || blob.webkitSlice || blob.mozSlice;\n\t\n\t                blob = slice.call( blob, start, end );\n\t\n\t                return new Blob( this.getRuid(), blob );\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview FilePaste\n\t     */\n\t    define('runtime/html5/dnd',[\n\t        'base',\n\t        'runtime/html5/runtime',\n\t        'lib/file'\n\t    ], function( Base, Html5Runtime, File ) {\n\t\n\t        var $ = Base.$,\n\t            prefix = 'webuploader-dnd-';\n\t\n\t        return Html5Runtime.register( 'DragAndDrop', {\n\t            init: function() {\n\t                var elem = this.elem = this.options.container;\n\t\n\t                this.dragEnterHandler = Base.bindFn( this._dragEnterHandler, this );\n\t                this.dragOverHandler = Base.bindFn( this._dragOverHandler, this );\n\t                this.dragLeaveHandler = Base.bindFn( this._dragLeaveHandler, this );\n\t                this.dropHandler = Base.bindFn( this._dropHandler, this );\n\t                this.dndOver = false;\n\t\n\t                elem.on( 'dragenter', this.dragEnterHandler );\n\t                elem.on( 'dragover', this.dragOverHandler );\n\t                elem.on( 'dragleave', this.dragLeaveHandler );\n\t                elem.on( 'drop', this.dropHandler );\n\t\n\t                if ( this.options.disableGlobalDnd ) {\n\t                    $( document ).on( 'dragover', this.dragOverHandler );\n\t                    $( document ).on( 'drop', this.dropHandler );\n\t                }\n\t            },\n\t\n\t            _dragEnterHandler: function( e ) {\n\t                var me = this,\n\t                    denied = me._denied || false,\n\t                    items;\n\t\n\t                e = e.originalEvent || e;\n\t\n\t                if ( !me.dndOver ) {\n\t                    me.dndOver = true;\n\t\n\t                    //  chrome \n\t                    items = e.dataTransfer.items;\n\t\n\t                    if ( items && items.length ) {\n\t                        me._denied = denied = !me.trigger( 'accept', items );\n\t                    }\n\t\n\t                    me.elem.addClass( prefix + 'over' );\n\t                    me.elem[ denied ? 'addClass' :\n\t                            'removeClass' ]( prefix + 'denied' );\n\t                }\n\t\n\t                e.dataTransfer.dropEffect = denied ? 'none' : 'copy';\n\t\n\t                return false;\n\t            },\n\t\n\t            _dragOverHandler: function( e ) {\n\t                // \n\t                var parentElem = this.elem.parent().get( 0 );\n\t                if ( parentElem && !$.contains( parentElem, e.currentTarget ) ) {\n\t                    return false;\n\t                }\n\t\n\t                clearTimeout( this._leaveTimer );\n\t                this._dragEnterHandler.call( this, e );\n\t\n\t                return false;\n\t            },\n\t\n\t            _dragLeaveHandler: function() {\n\t                var me = this,\n\t                    handler;\n\t\n\t                handler = function() {\n\t                    me.dndOver = false;\n\t                    me.elem.removeClass( prefix + 'over ' + prefix + 'denied' );\n\t                };\n\t\n\t                clearTimeout( me._leaveTimer );\n\t                me._leaveTimer = setTimeout( handler, 100 );\n\t                return false;\n\t            },\n\t\n\t            _dropHandler: function( e ) {\n\t                var me = this,\n\t                    ruid = me.getRuid(),\n\t                    parentElem = me.elem.parent().get( 0 ),\n\t                    dataTransfer, data;\n\t\n\t                // \n\t                if ( parentElem && !$.contains( parentElem, e.currentTarget ) ) {\n\t                    return false;\n\t                }\n\t\n\t                e = e.originalEvent || e;\n\t                dataTransfer = e.dataTransfer;\n\t\n\t                // \n\t                //  ie11 \n\t                try {\n\t                    data = dataTransfer.getData('text/html');\n\t                } catch( err ) {\n\t                }\n\t\n\t                if ( data ) {\n\t                    return;\n\t                }\n\t\n\t                me._getTansferFiles( dataTransfer, function( results ) {\n\t                    me.trigger( 'drop', $.map( results, function( file ) {\n\t                        return new File( ruid, file );\n\t                    }) );\n\t                });\n\t\n\t                me.dndOver = false;\n\t                me.elem.removeClass( prefix + 'over' );\n\t                return false;\n\t            },\n\t\n\t            //  callback \n\t            _getTansferFiles: function( dataTransfer, callback ) {\n\t                var results  = [],\n\t                    promises = [],\n\t                    items, files, file, item, i, len, canAccessFolder;\n\t\n\t                items = dataTransfer.items;\n\t                files = dataTransfer.files;\n\t\n\t                canAccessFolder = !!(items && items[ 0 ].webkitGetAsEntry);\n\t\n\t                for ( i = 0, len = files.length; i < len; i++ ) {\n\t                    file = files[ i ];\n\t                    item = items && items[ i ];\n\t\n\t                    if ( canAccessFolder && item.webkitGetAsEntry().isDirectory ) {\n\t\n\t                        promises.push( this._traverseDirectoryTree(\n\t                                item.webkitGetAsEntry(), results ) );\n\t                    } else {\n\t                        results.push( file );\n\t                    }\n\t                }\n\t\n\t                Base.when.apply( Base, promises ).done(function() {\n\t\n\t                    if ( !results.length ) {\n\t                        return;\n\t                    }\n\t\n\t                    callback( results );\n\t                });\n\t            },\n\t\n\t            _traverseDirectoryTree: function( entry, results ) {\n\t                var deferred = Base.Deferred(),\n\t                    me = this;\n\t\n\t                if ( entry.isFile ) {\n\t                    entry.file(function( file ) {\n\t                        results.push( file );\n\t                        deferred.resolve();\n\t                    });\n\t                } else if ( entry.isDirectory ) {\n\t                    entry.createReader().readEntries(function( entries ) {\n\t                        var len = entries.length,\n\t                            promises = [],\n\t                            arr = [],    // \n\t                            i;\n\t\n\t                        for ( i = 0; i < len; i++ ) {\n\t                            promises.push( me._traverseDirectoryTree(\n\t                                    entries[ i ], arr ) );\n\t                        }\n\t\n\t                        Base.when.apply( Base, promises ).then(function() {\n\t                            results.push.apply( results, arr );\n\t                            deferred.resolve();\n\t                        }, deferred.reject );\n\t                    });\n\t                }\n\t\n\t                return deferred.promise();\n\t            },\n\t\n\t            destroy: function() {\n\t                var elem = this.elem;\n\t\n\t                //  init  destroy\n\t                if (!elem) {\n\t                    return;\n\t                }\n\t\n\t                elem.off( 'dragenter', this.dragEnterHandler );\n\t                elem.off( 'dragover', this.dragOverHandler );\n\t                elem.off( 'dragleave', this.dragLeaveHandler );\n\t                elem.off( 'drop', this.dropHandler );\n\t\n\t                if ( this.options.disableGlobalDnd ) {\n\t                    $( document ).off( 'dragover', this.dragOverHandler );\n\t                    $( document ).off( 'drop', this.dropHandler );\n\t                }\n\t            }\n\t        });\n\t    });\n\t\n\t    /**\n\t     * @fileOverview FilePaste\n\t     */\n\t    define('runtime/html5/filepaste',[\n\t        'base',\n\t        'runtime/html5/runtime',\n\t        'lib/file'\n\t    ], function( Base, Html5Runtime, File ) {\n\t\n\t        return Html5Runtime.register( 'FilePaste', {\n\t            init: function() {\n\t                var opts = this.options,\n\t                    elem = this.elem = opts.container,\n\t                    accept = '.*',\n\t                    arr, i, len, item;\n\t\n\t                // accetpmimeTypes\n\t                if ( opts.accept ) {\n\t                    arr = [];\n\t\n\t                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\n\t                        item = opts.accept[ i ].mimeTypes;\n\t                        item && arr.push( item );\n\t                    }\n\t\n\t                    if ( arr.length ) {\n\t                        accept = arr.join(',');\n\t                        accept = accept.replace( /,/g, '|' ).replace( /\\*/g, '.*' );\n\t                    }\n\t                }\n\t                this.accept = accept = new RegExp( accept, 'i' );\n\t                this.hander = Base.bindFn( this._pasteHander, this );\n\t                elem.on( 'paste', this.hander );\n\t            },\n\t\n\t            _pasteHander: function( e ) {\n\t                var allowed = [],\n\t                    ruid = this.getRuid(),\n\t                    items, item, blob, i, len;\n\t\n\t                e = e.originalEvent || e;\n\t                items = e.clipboardData.items;\n\t\n\t                for ( i = 0, len = items.length; i < len; i++ ) {\n\t                    item = items[ i ];\n\t\n\t                    if ( item.kind !== 'file' || !(blob = item.getAsFile()) ) {\n\t                        continue;\n\t                    }\n\t\n\t                    allowed.push( new File( ruid, blob ) );\n\t                }\n\t\n\t                if ( allowed.length ) {\n\t                    // \n\t                    e.preventDefault();\n\t                    e.stopPropagation();\n\t                    this.trigger( 'paste', allowed );\n\t                }\n\t            },\n\t\n\t            destroy: function() {\n\t                this.elem.off( 'paste', this.hander );\n\t            }\n\t        });\n\t    });\n\t\n\t    /**\n\t     * @fileOverview FilePicker\n\t     */\n\t    define('runtime/html5/filepicker',[\n\t        'base',\n\t        'runtime/html5/runtime'\n\t    ], function( Base, Html5Runtime ) {\n\t\n\t        var $ = Base.$;\n\t\n\t        return Html5Runtime.register( 'FilePicker', {\n\t            init: function() {\n\t                var container = this.getRuntime().getContainer(),\n\t                    me = this,\n\t                    owner = me.owner,\n\t                    opts = me.options,\n\t                    label = this.label = $( document.createElement('label') ),\n\t                    input =  this.input = $( document.createElement('input') ),\n\t                    arr, i, len, mouseHandler;\n\t\n\t                input.attr( 'type', 'file' );\n\t                //console.log(opts.name)\n\t                input.attr( 'name', 'file' );\n\t                input.addClass('webuploader-element-invisible');\n\t\n\t                label.on( 'click', function() {\n\t                    input.trigger('click');\n\t                });\n\t\n\t                label.css({\n\t                    opacity: 0,\n\t                    width: '100%',\n\t                    height: '100%',\n\t                    display: 'block',\n\t                    cursor: 'pointer',\n\t                    background: '#ffffff'\n\t                });\n\t\n\t                if ( opts.multiple ) {\n\t                    input.attr( 'multiple', 'multiple' );\n\t                }\n\t\n\t                // @todo Firefox\n\t                if ( opts.accept && opts.accept.length > 0 ) {\n\t                    arr = [];\n\t\n\t                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\n\t                        arr.push( opts.accept[ i ].mimeTypes );\n\t                    }\n\t\n\t                    input.attr( 'accept', arr.join(',') );\n\t                }\n\t\n\t                container.append( input );\n\t                container.append( label );\n\t\n\t                mouseHandler = function( e ) {\n\t                    owner.trigger( e.type );\n\t                };\n\t\n\t                input.on( 'change', function( e ) {\n\t                    var fn = arguments.callee,\n\t                        clone;\n\t\n\t                    me.files = e.target.files;\n\t\n\t                    // reset input\n\t                    clone = this.cloneNode( true );\n\t                    clone.value = null;\n\t                    this.parentNode.replaceChild( clone, this );\n\t\n\t                    input.off();\n\t                    input = $( clone ).on( 'change', fn )\n\t                            .on( 'mouseenter mouseleave', mouseHandler );\n\t\n\t                    owner.trigger('change');\n\t                });\n\t\n\t                label.on( 'mouseenter mouseleave', mouseHandler );\n\t\n\t            },\n\t\n\t\n\t            getFiles: function() {\n\t                return this.files;\n\t            },\n\t\n\t            destroy: function() {\n\t                this.input.off();\n\t                this.label.off();\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * Terms:\n\t     *\n\t     * Uint8Array, FileReader, BlobBuilder, atob, ArrayBuffer\n\t     * @fileOverview Image\n\t     */\n\t    define('runtime/html5/util',[\n\t        'base'\n\t    ], function( Base ) {\n\t\n\t        var urlAPI = window.createObjectURL && window ||\n\t                window.URL && URL.revokeObjectURL && URL ||\n\t                window.webkitURL,\n\t            createObjectURL = Base.noop,\n\t            revokeObjectURL = createObjectURL;\n\t\n\t        if ( urlAPI ) {\n\t\n\t            // androidcontext\n\t            createObjectURL = function() {\n\t                return urlAPI.createObjectURL.apply( urlAPI, arguments );\n\t            };\n\t\n\t            revokeObjectURL = function() {\n\t                return urlAPI.revokeObjectURL.apply( urlAPI, arguments );\n\t            };\n\t        }\n\t\n\t        return {\n\t            createObjectURL: createObjectURL,\n\t            revokeObjectURL: revokeObjectURL,\n\t\n\t            dataURL2Blob: function( dataURI ) {\n\t                var byteStr, intArray, ab, i, mimetype, parts;\n\t\n\t                parts = dataURI.split(',');\n\t\n\t                if ( ~parts[ 0 ].indexOf('base64') ) {\n\t                    byteStr = atob( parts[ 1 ] );\n\t                } else {\n\t                    byteStr = decodeURIComponent( parts[ 1 ] );\n\t                }\n\t\n\t                ab = new ArrayBuffer( byteStr.length );\n\t                intArray = new Uint8Array( ab );\n\t\n\t                for ( i = 0; i < byteStr.length; i++ ) {\n\t                    intArray[ i ] = byteStr.charCodeAt( i );\n\t                }\n\t\n\t                mimetype = parts[ 0 ].split(':')[ 1 ].split(';')[ 0 ];\n\t\n\t                return this.arrayBufferToBlob( ab, mimetype );\n\t            },\n\t\n\t            dataURL2ArrayBuffer: function( dataURI ) {\n\t                var byteStr, intArray, i, parts;\n\t\n\t                parts = dataURI.split(',');\n\t\n\t                if ( ~parts[ 0 ].indexOf('base64') ) {\n\t                    byteStr = atob( parts[ 1 ] );\n\t                } else {\n\t                    byteStr = decodeURIComponent( parts[ 1 ] );\n\t                }\n\t\n\t                intArray = new Uint8Array( byteStr.length );\n\t\n\t                for ( i = 0; i < byteStr.length; i++ ) {\n\t                    intArray[ i ] = byteStr.charCodeAt( i );\n\t                }\n\t\n\t                return intArray.buffer;\n\t            },\n\t\n\t            arrayBufferToBlob: function( buffer, type ) {\n\t                var builder = window.BlobBuilder || window.WebKitBlobBuilder,\n\t                    bb;\n\t\n\t                // androidnew Blob, blobbuilder.\n\t                if ( builder ) {\n\t                    bb = new builder();\n\t                    bb.append( buffer );\n\t                    return bb.getBlob( type );\n\t                }\n\t\n\t                return new Blob([ buffer ], type ? { type: type } : {} );\n\t            },\n\t\n\t            // androidcanvas.toDataUrljpeg.\n\t            // png.\n\t            canvasToDataUrl: function( canvas, type, quality ) {\n\t                return canvas.toDataURL( type, quality / 100 );\n\t            },\n\t\n\t            // imagemeat\n\t            parseMeta: function( blob, callback ) {\n\t                callback( false, {});\n\t            },\n\t\n\t            // imagemeat\n\t            updateImageHead: function( data ) {\n\t                return data;\n\t            }\n\t        };\n\t    });\n\t    /**\n\t     * Terms:\n\t     *\n\t     * Uint8Array, FileReader, BlobBuilder, atob, ArrayBuffer\n\t     * @fileOverview Image\n\t     */\n\t    define('runtime/html5/imagemeta',[\n\t        'runtime/html5/util'\n\t    ], function( Util ) {\n\t\n\t        var api;\n\t\n\t        api = {\n\t            parsers: {\n\t                0xffe1: []\n\t            },\n\t\n\t            maxMetaDataSize: 262144,\n\t\n\t            parse: function( blob, cb ) {\n\t                var me = this,\n\t                    fr = new FileReader();\n\t\n\t                fr.onload = function() {\n\t                    cb( false, me._parse( this.result ) );\n\t                    fr = fr.onload = fr.onerror = null;\n\t                };\n\t\n\t                fr.onerror = function( e ) {\n\t                    cb( e.message );\n\t                    fr = fr.onload = fr.onerror = null;\n\t                };\n\t\n\t                blob = blob.slice( 0, me.maxMetaDataSize );\n\t                fr.readAsArrayBuffer( blob.getSource() );\n\t            },\n\t\n\t            _parse: function( buffer, noParse ) {\n\t                if ( buffer.byteLength < 6 ) {\n\t                    return;\n\t                }\n\t\n\t                var dataview = new DataView( buffer ),\n\t                    offset = 2,\n\t                    maxOffset = dataview.byteLength - 4,\n\t                    headLength = offset,\n\t                    ret = {},\n\t                    markerBytes, markerLength, parsers, i;\n\t\n\t                if ( dataview.getUint16( 0 ) === 0xffd8 ) {\n\t\n\t                    while ( offset < maxOffset ) {\n\t                        markerBytes = dataview.getUint16( offset );\n\t\n\t                        if ( markerBytes >= 0xffe0 && markerBytes <= 0xffef ||\n\t                                markerBytes === 0xfffe ) {\n\t\n\t                            markerLength = dataview.getUint16( offset + 2 ) + 2;\n\t\n\t                            if ( offset + markerLength > dataview.byteLength ) {\n\t                                break;\n\t                            }\n\t\n\t                            parsers = api.parsers[ markerBytes ];\n\t\n\t                            if ( !noParse && parsers ) {\n\t                                for ( i = 0; i < parsers.length; i += 1 ) {\n\t                                    parsers[ i ].call( api, dataview, offset,\n\t                                            markerLength, ret );\n\t                                }\n\t                            }\n\t\n\t                            offset += markerLength;\n\t                            headLength = offset;\n\t                        } else {\n\t                            break;\n\t                        }\n\t                    }\n\t\n\t                    if ( headLength > 6 ) {\n\t                        if ( buffer.slice ) {\n\t                            ret.imageHead = buffer.slice( 2, headLength );\n\t                        } else {\n\t                            // Workaround for IE10, which does not yet\n\t                            // support ArrayBuffer.slice:\n\t                            ret.imageHead = new Uint8Array( buffer )\n\t                                    .subarray( 2, headLength );\n\t                        }\n\t                    }\n\t                }\n\t\n\t                return ret;\n\t            },\n\t\n\t            updateImageHead: function( buffer, head ) {\n\t                var data = this._parse( buffer, true ),\n\t                    buf1, buf2, bodyoffset;\n\t\n\t\n\t                bodyoffset = 2;\n\t                if ( data.imageHead ) {\n\t                    bodyoffset = 2 + data.imageHead.byteLength;\n\t                }\n\t\n\t                if ( buffer.slice ) {\n\t                    buf2 = buffer.slice( bodyoffset );\n\t                } else {\n\t                    buf2 = new Uint8Array( buffer ).subarray( bodyoffset );\n\t                }\n\t\n\t                buf1 = new Uint8Array( head.byteLength + 2 + buf2.byteLength );\n\t\n\t                buf1[ 0 ] = 0xFF;\n\t                buf1[ 1 ] = 0xD8;\n\t                buf1.set( new Uint8Array( head ), 2 );\n\t                buf1.set( new Uint8Array( buf2 ), head.byteLength + 2 );\n\t\n\t                return buf1.buffer;\n\t            }\n\t        };\n\t\n\t        Util.parseMeta = function() {\n\t            return api.parse.apply( api, arguments );\n\t        };\n\t\n\t        Util.updateImageHead = function() {\n\t            return api.updateImageHead.apply( api, arguments );\n\t        };\n\t\n\t        return api;\n\t    });\n\t    /**\n\t     * https://github.com/blueimp/JavaScript-Load-Image\n\t     * orientation.\n\t     *\n\t     *  Exif Sub IFD Pointer, GPS Info IFD Pointer, Exif Thumbnail.\n\t     * @fileOverview EXIF\n\t     */\n\t\n\t    // Sample\n\t    // ====================================\n\t    // Make : Apple\n\t    // Model : iPhone 4S\n\t    // Orientation : 1\n\t    // XResolution : 72 [72/1]\n\t    // YResolution : 72 [72/1]\n\t    // ResolutionUnit : 2\n\t    // Software : QuickTime 7.7.1\n\t    // DateTime : 2013:09:01 22:53:55\n\t    // ExifIFDPointer : 190\n\t    // ExposureTime : 0.058823529411764705 [1/17]\n\t    // FNumber : 2.4 [12/5]\n\t    // ExposureProgram : Normal program\n\t    // ISOSpeedRatings : 800\n\t    // ExifVersion : 0220\n\t    // DateTimeOriginal : 2013:09:01 22:52:51\n\t    // DateTimeDigitized : 2013:09:01 22:52:51\n\t    // ComponentsConfiguration : YCbCr\n\t    // ShutterSpeedValue : 4.058893515764426\n\t    // ApertureValue : 2.5260688216892597 [4845/1918]\n\t    // BrightnessValue : -0.3126686601998395\n\t    // MeteringMode : Pattern\n\t    // Flash : Flash did not fire, compulsory flash mode\n\t    // FocalLength : 4.28 [107/25]\n\t    // SubjectArea : [4 values]\n\t    // FlashpixVersion : 0100\n\t    // ColorSpace : 1\n\t    // PixelXDimension : 2448\n\t    // PixelYDimension : 3264\n\t    // SensingMethod : One-chip color area sensor\n\t    // ExposureMode : 0\n\t    // WhiteBalance : Auto white balance\n\t    // FocalLengthIn35mmFilm : 35\n\t    // SceneCaptureType : Standard\n\t    define('runtime/html5/imagemeta/exif',[\n\t        'base',\n\t        'runtime/html5/imagemeta'\n\t    ], function( Base, ImageMeta ) {\n\t\n\t        var EXIF = {};\n\t\n\t        EXIF.ExifMap = function() {\n\t            return this;\n\t        };\n\t\n\t        EXIF.ExifMap.prototype.map = {\n\t            'Orientation': 0x0112\n\t        };\n\t\n\t        EXIF.ExifMap.prototype.get = function( id ) {\n\t            return this[ id ] || this[ this.map[ id ] ];\n\t        };\n\t\n\t        EXIF.exifTagTypes = {\n\t            // byte, 8-bit unsigned int:\n\t            1: {\n\t                getValue: function( dataView, dataOffset ) {\n\t                    return dataView.getUint8( dataOffset );\n\t                },\n\t                size: 1\n\t            },\n\t\n\t            // ascii, 8-bit byte:\n\t            2: {\n\t                getValue: function( dataView, dataOffset ) {\n\t                    return String.fromCharCode( dataView.getUint8( dataOffset ) );\n\t                },\n\t                size: 1,\n\t                ascii: true\n\t            },\n\t\n\t            // short, 16 bit int:\n\t            3: {\n\t                getValue: function( dataView, dataOffset, littleEndian ) {\n\t                    return dataView.getUint16( dataOffset, littleEndian );\n\t                },\n\t                size: 2\n\t            },\n\t\n\t            // long, 32 bit int:\n\t            4: {\n\t                getValue: function( dataView, dataOffset, littleEndian ) {\n\t                    return dataView.getUint32( dataOffset, littleEndian );\n\t                },\n\t                size: 4\n\t            },\n\t\n\t            // rational = two long values,\n\t            // first is numerator, second is denominator:\n\t            5: {\n\t                getValue: function( dataView, dataOffset, littleEndian ) {\n\t                    return dataView.getUint32( dataOffset, littleEndian ) /\n\t                        dataView.getUint32( dataOffset + 4, littleEndian );\n\t                },\n\t                size: 8\n\t            },\n\t\n\t            // slong, 32 bit signed int:\n\t            9: {\n\t                getValue: function( dataView, dataOffset, littleEndian ) {\n\t                    return dataView.getInt32( dataOffset, littleEndian );\n\t                },\n\t                size: 4\n\t            },\n\t\n\t            // srational, two slongs, first is numerator, second is denominator:\n\t            10: {\n\t                getValue: function( dataView, dataOffset, littleEndian ) {\n\t                    return dataView.getInt32( dataOffset, littleEndian ) /\n\t                        dataView.getInt32( dataOffset + 4, littleEndian );\n\t                },\n\t                size: 8\n\t            }\n\t        };\n\t\n\t        // undefined, 8-bit byte, value depending on field:\n\t        EXIF.exifTagTypes[ 7 ] = EXIF.exifTagTypes[ 1 ];\n\t\n\t        EXIF.getExifValue = function( dataView, tiffOffset, offset, type, length,\n\t                littleEndian ) {\n\t\n\t            var tagType = EXIF.exifTagTypes[ type ],\n\t                tagSize, dataOffset, values, i, str, c;\n\t\n\t            if ( !tagType ) {\n\t                Base.log('Invalid Exif data: Invalid tag type.');\n\t                return;\n\t            }\n\t\n\t            tagSize = tagType.size * length;\n\t\n\t            // Determine if the value is contained in the dataOffset bytes,\n\t            // or if the value at the dataOffset is a pointer to the actual data:\n\t            dataOffset = tagSize > 4 ? tiffOffset + dataView.getUint32( offset + 8,\n\t                    littleEndian ) : (offset + 8);\n\t\n\t            if ( dataOffset + tagSize > dataView.byteLength ) {\n\t                Base.log('Invalid Exif data: Invalid data offset.');\n\t                return;\n\t            }\n\t\n\t            if ( length === 1 ) {\n\t                return tagType.getValue( dataView, dataOffset, littleEndian );\n\t            }\n\t\n\t            values = [];\n\t\n\t            for ( i = 0; i < length; i += 1 ) {\n\t                values[ i ] = tagType.getValue( dataView,\n\t                        dataOffset + i * tagType.size, littleEndian );\n\t            }\n\t\n\t            if ( tagType.ascii ) {\n\t                str = '';\n\t\n\t                // Concatenate the chars:\n\t                for ( i = 0; i < values.length; i += 1 ) {\n\t                    c = values[ i ];\n\t\n\t                    // Ignore the terminating NULL byte(s):\n\t                    if ( c === '\\u0000' ) {\n\t                        break;\n\t                    }\n\t                    str += c;\n\t                }\n\t\n\t                return str;\n\t            }\n\t            return values;\n\t        };\n\t\n\t        EXIF.parseExifTag = function( dataView, tiffOffset, offset, littleEndian,\n\t                data ) {\n\t\n\t            var tag = dataView.getUint16( offset, littleEndian );\n\t            data.exif[ tag ] = EXIF.getExifValue( dataView, tiffOffset, offset,\n\t                    dataView.getUint16( offset + 2, littleEndian ),    // tag type\n\t                    dataView.getUint32( offset + 4, littleEndian ),    // tag length\n\t                    littleEndian );\n\t        };\n\t\n\t        EXIF.parseExifTags = function( dataView, tiffOffset, dirOffset,\n\t                littleEndian, data ) {\n\t\n\t            var tagsNumber, dirEndOffset, i;\n\t\n\t            if ( dirOffset + 6 > dataView.byteLength ) {\n\t                Base.log('Invalid Exif data: Invalid directory offset.');\n\t                return;\n\t            }\n\t\n\t            tagsNumber = dataView.getUint16( dirOffset, littleEndian );\n\t            dirEndOffset = dirOffset + 2 + 12 * tagsNumber;\n\t\n\t            if ( dirEndOffset + 4 > dataView.byteLength ) {\n\t                Base.log('Invalid Exif data: Invalid directory size.');\n\t                return;\n\t            }\n\t\n\t            for ( i = 0; i < tagsNumber; i += 1 ) {\n\t                this.parseExifTag( dataView, tiffOffset,\n\t                        dirOffset + 2 + 12 * i,    // tag offset\n\t                        littleEndian, data );\n\t            }\n\t\n\t            // Return the offset to the next directory:\n\t            return dataView.getUint32( dirEndOffset, littleEndian );\n\t        };\n\t\n\t        // EXIF.getExifThumbnail = function(dataView, offset, length) {\n\t        //     var hexData,\n\t        //         i,\n\t        //         b;\n\t        //     if (!length || offset + length > dataView.byteLength) {\n\t        //         Base.log('Invalid Exif data: Invalid thumbnail data.');\n\t        //         return;\n\t        //     }\n\t        //     hexData = [];\n\t        //     for (i = 0; i < length; i += 1) {\n\t        //         b = dataView.getUint8(offset + i);\n\t        //         hexData.push((b < 16 ? '0' : '') + b.toString(16));\n\t        //     }\n\t        //     return 'data:image/jpeg,%' + hexData.join('%');\n\t        // };\n\t\n\t        EXIF.parseExifData = function( dataView, offset, length, data ) {\n\t\n\t            var tiffOffset = offset + 10,\n\t                littleEndian, dirOffset;\n\t\n\t            // Check for the ASCII code for \"Exif\" (0x45786966):\n\t            if ( dataView.getUint32( offset + 4 ) !== 0x45786966 ) {\n\t                // No Exif data, might be XMP data instead\n\t                return;\n\t            }\n\t            if ( tiffOffset + 8 > dataView.byteLength ) {\n\t                Base.log('Invalid Exif data: Invalid segment size.');\n\t                return;\n\t            }\n\t\n\t            // Check for the two null bytes:\n\t            if ( dataView.getUint16( offset + 8 ) !== 0x0000 ) {\n\t                Base.log('Invalid Exif data: Missing byte alignment offset.');\n\t                return;\n\t            }\n\t\n\t            // Check the byte alignment:\n\t            switch ( dataView.getUint16( tiffOffset ) ) {\n\t                case 0x4949:\n\t                    littleEndian = true;\n\t                    break;\n\t\n\t                case 0x4D4D:\n\t                    littleEndian = false;\n\t                    break;\n\t\n\t                default:\n\t                    Base.log('Invalid Exif data: Invalid byte alignment marker.');\n\t                    return;\n\t            }\n\t\n\t            // Check for the TIFF tag marker (0x002A):\n\t            if ( dataView.getUint16( tiffOffset + 2, littleEndian ) !== 0x002A ) {\n\t                Base.log('Invalid Exif data: Missing TIFF marker.');\n\t                return;\n\t            }\n\t\n\t            // Retrieve the directory offset bytes, usually 0x00000008 or 8 decimal:\n\t            dirOffset = dataView.getUint32( tiffOffset + 4, littleEndian );\n\t            // Create the exif object to store the tags:\n\t            data.exif = new EXIF.ExifMap();\n\t            // Parse the tags of the main image directory and retrieve the\n\t            // offset to the next directory, usually the thumbnail directory:\n\t            dirOffset = EXIF.parseExifTags( dataView, tiffOffset,\n\t                    tiffOffset + dirOffset, littleEndian, data );\n\t\n\t            // \n\t            // if ( dirOffset ) {\n\t            //     thumbnailData = {exif: {}};\n\t            //     dirOffset = EXIF.parseExifTags(\n\t            //         dataView,\n\t            //         tiffOffset,\n\t            //         tiffOffset + dirOffset,\n\t            //         littleEndian,\n\t            //         thumbnailData\n\t            //     );\n\t\n\t            //     // Check for JPEG Thumbnail offset:\n\t            //     if (thumbnailData.exif[0x0201]) {\n\t            //         data.exif.Thumbnail = EXIF.getExifThumbnail(\n\t            //             dataView,\n\t            //             tiffOffset + thumbnailData.exif[0x0201],\n\t            //             thumbnailData.exif[0x0202] // Thumbnail data length\n\t            //         );\n\t            //     }\n\t            // }\n\t        };\n\t\n\t        ImageMeta.parsers[ 0xffe1 ].push( EXIF.parseExifData );\n\t        return EXIF;\n\t    });\n\t    /**\n\t     * androidtoDataUrlbug\n\t     * androidtoDataUrl('image/jpege')png.\n\t     *\n\t     * \n\t     * @fileOverview jpeg encoder\n\t     */\n\t    define('runtime/html5/jpegencoder',[], function( require, exports, module ) {\n\t\n\t        /*\n\t          Copyright (c) 2008, Adobe Systems Incorporated\n\t          All rights reserved.\n\t\n\t          Redistribution and use in source and binary forms, with or without\n\t          modification, are permitted provided that the following conditions are\n\t          met:\n\t\n\t          * Redistributions of source code must retain the above copyright notice,\n\t            this list of conditions and the following disclaimer.\n\t\n\t          * Redistributions in binary form must reproduce the above copyright\n\t            notice, this list of conditions and the following disclaimer in the\n\t            documentation and/or other materials provided with the distribution.\n\t\n\t          * Neither the name of Adobe Systems Incorporated nor the names of its\n\t            contributors may be used to endorse or promote products derived from\n\t            this software without specific prior written permission.\n\t\n\t          THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n\t          IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,\n\t          THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t          PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t          CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t          EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t          PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t          PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n\t          LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n\t          NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n\t          SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t        */\n\t        /*\n\t        JPEG encoder ported to JavaScript and optimized by Andreas Ritter, www.bytestrom.eu, 11/2009\n\t\n\t        Basic GUI blocking jpeg encoder\n\t        */\n\t\n\t        function JPEGEncoder(quality) {\n\t          var self = this;\n\t            var fround = Math.round;\n\t            var ffloor = Math.floor;\n\t            var YTable = new Array(64);\n\t            var UVTable = new Array(64);\n\t            var fdtbl_Y = new Array(64);\n\t            var fdtbl_UV = new Array(64);\n\t            var YDC_HT;\n\t            var UVDC_HT;\n\t            var YAC_HT;\n\t            var UVAC_HT;\n\t\n\t            var bitcode = new Array(65535);\n\t            var category = new Array(65535);\n\t            var outputfDCTQuant = new Array(64);\n\t            var DU = new Array(64);\n\t            var byteout = [];\n\t            var bytenew = 0;\n\t            var bytepos = 7;\n\t\n\t            var YDU = new Array(64);\n\t            var UDU = new Array(64);\n\t            var VDU = new Array(64);\n\t            var clt = new Array(256);\n\t            var RGB_YUV_TABLE = new Array(2048);\n\t            var currentQuality;\n\t\n\t            var ZigZag = [\n\t                     0, 1, 5, 6,14,15,27,28,\n\t                     2, 4, 7,13,16,26,29,42,\n\t                     3, 8,12,17,25,30,41,43,\n\t                     9,11,18,24,31,40,44,53,\n\t                    10,19,23,32,39,45,52,54,\n\t                    20,22,33,38,46,51,55,60,\n\t                    21,34,37,47,50,56,59,61,\n\t                    35,36,48,49,57,58,62,63\n\t                ];\n\t\n\t            var std_dc_luminance_nrcodes = [0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];\n\t            var std_dc_luminance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n\t            var std_ac_luminance_nrcodes = [0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,0x7d];\n\t            var std_ac_luminance_values = [\n\t                    0x01,0x02,0x03,0x00,0x04,0x11,0x05,0x12,\n\t                    0x21,0x31,0x41,0x06,0x13,0x51,0x61,0x07,\n\t                    0x22,0x71,0x14,0x32,0x81,0x91,0xa1,0x08,\n\t                    0x23,0x42,0xb1,0xc1,0x15,0x52,0xd1,0xf0,\n\t                    0x24,0x33,0x62,0x72,0x82,0x09,0x0a,0x16,\n\t                    0x17,0x18,0x19,0x1a,0x25,0x26,0x27,0x28,\n\t                    0x29,0x2a,0x34,0x35,0x36,0x37,0x38,0x39,\n\t                    0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49,\n\t                    0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59,\n\t                    0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69,\n\t                    0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79,\n\t                    0x7a,0x83,0x84,0x85,0x86,0x87,0x88,0x89,\n\t                    0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98,\n\t                    0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,\n\t                    0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6,\n\t                    0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5,\n\t                    0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4,\n\t                    0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe1,0xe2,\n\t                    0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,\n\t                    0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n\t                    0xf9,0xfa\n\t                ];\n\t\n\t            var std_dc_chrominance_nrcodes = [0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];\n\t            var std_dc_chrominance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n\t            var std_ac_chrominance_nrcodes = [0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,0x77];\n\t            var std_ac_chrominance_values = [\n\t                    0x00,0x01,0x02,0x03,0x11,0x04,0x05,0x21,\n\t                    0x31,0x06,0x12,0x41,0x51,0x07,0x61,0x71,\n\t                    0x13,0x22,0x32,0x81,0x08,0x14,0x42,0x91,\n\t                    0xa1,0xb1,0xc1,0x09,0x23,0x33,0x52,0xf0,\n\t                    0x15,0x62,0x72,0xd1,0x0a,0x16,0x24,0x34,\n\t                    0xe1,0x25,0xf1,0x17,0x18,0x19,0x1a,0x26,\n\t                    0x27,0x28,0x29,0x2a,0x35,0x36,0x37,0x38,\n\t                    0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48,\n\t                    0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58,\n\t                    0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68,\n\t                    0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78,\n\t                    0x79,0x7a,0x82,0x83,0x84,0x85,0x86,0x87,\n\t                    0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96,\n\t                    0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5,\n\t                    0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,\n\t                    0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3,\n\t                    0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2,\n\t                    0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,\n\t                    0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,\n\t                    0xea,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n\t                    0xf9,0xfa\n\t                ];\n\t\n\t            function initQuantTables(sf){\n\t                    var YQT = [\n\t                        16, 11, 10, 16, 24, 40, 51, 61,\n\t                        12, 12, 14, 19, 26, 58, 60, 55,\n\t                        14, 13, 16, 24, 40, 57, 69, 56,\n\t                        14, 17, 22, 29, 51, 87, 80, 62,\n\t                        18, 22, 37, 56, 68,109,103, 77,\n\t                        24, 35, 55, 64, 81,104,113, 92,\n\t                        49, 64, 78, 87,103,121,120,101,\n\t                        72, 92, 95, 98,112,100,103, 99\n\t                    ];\n\t\n\t                    for (var i = 0; i < 64; i++) {\n\t                        var t = ffloor((YQT[i]*sf+50)/100);\n\t                        if (t < 1) {\n\t                            t = 1;\n\t                        } else if (t > 255) {\n\t                            t = 255;\n\t                        }\n\t                        YTable[ZigZag[i]] = t;\n\t                    }\n\t                    var UVQT = [\n\t                        17, 18, 24, 47, 99, 99, 99, 99,\n\t                        18, 21, 26, 66, 99, 99, 99, 99,\n\t                        24, 26, 56, 99, 99, 99, 99, 99,\n\t                        47, 66, 99, 99, 99, 99, 99, 99,\n\t                        99, 99, 99, 99, 99, 99, 99, 99,\n\t                        99, 99, 99, 99, 99, 99, 99, 99,\n\t                        99, 99, 99, 99, 99, 99, 99, 99,\n\t                        99, 99, 99, 99, 99, 99, 99, 99\n\t                    ];\n\t                    for (var j = 0; j < 64; j++) {\n\t                        var u = ffloor((UVQT[j]*sf+50)/100);\n\t                        if (u < 1) {\n\t                            u = 1;\n\t                        } else if (u > 255) {\n\t                            u = 255;\n\t                        }\n\t                        UVTable[ZigZag[j]] = u;\n\t                    }\n\t                    var aasf = [\n\t                        1.0, 1.387039845, 1.306562965, 1.175875602,\n\t                        1.0, 0.785694958, 0.541196100, 0.275899379\n\t                    ];\n\t                    var k = 0;\n\t                    for (var row = 0; row < 8; row++)\n\t                    {\n\t                        for (var col = 0; col < 8; col++)\n\t                        {\n\t                            fdtbl_Y[k]  = (1.0 / (YTable [ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n\t                            fdtbl_UV[k] = (1.0 / (UVTable[ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n\t                            k++;\n\t                        }\n\t                    }\n\t                }\n\t\n\t                function computeHuffmanTbl(nrcodes, std_table){\n\t                    var codevalue = 0;\n\t                    var pos_in_table = 0;\n\t                    var HT = new Array();\n\t                    for (var k = 1; k <= 16; k++) {\n\t                        for (var j = 1; j <= nrcodes[k]; j++) {\n\t                            HT[std_table[pos_in_table]] = [];\n\t                            HT[std_table[pos_in_table]][0] = codevalue;\n\t                            HT[std_table[pos_in_table]][1] = k;\n\t                            pos_in_table++;\n\t                            codevalue++;\n\t                        }\n\t                        codevalue*=2;\n\t                    }\n\t                    return HT;\n\t                }\n\t\n\t                function initHuffmanTbl()\n\t                {\n\t                    YDC_HT = computeHuffmanTbl(std_dc_luminance_nrcodes,std_dc_luminance_values);\n\t                    UVDC_HT = computeHuffmanTbl(std_dc_chrominance_nrcodes,std_dc_chrominance_values);\n\t                    YAC_HT = computeHuffmanTbl(std_ac_luminance_nrcodes,std_ac_luminance_values);\n\t                    UVAC_HT = computeHuffmanTbl(std_ac_chrominance_nrcodes,std_ac_chrominance_values);\n\t                }\n\t\n\t                function initCategoryNumber()\n\t                {\n\t                    var nrlower = 1;\n\t                    var nrupper = 2;\n\t                    for (var cat = 1; cat <= 15; cat++) {\n\t                        //Positive numbers\n\t                        for (var nr = nrlower; nr<nrupper; nr++) {\n\t                            category[32767+nr] = cat;\n\t                            bitcode[32767+nr] = [];\n\t                            bitcode[32767+nr][1] = cat;\n\t                            bitcode[32767+nr][0] = nr;\n\t                        }\n\t                        //Negative numbers\n\t                        for (var nrneg =-(nrupper-1); nrneg<=-nrlower; nrneg++) {\n\t                            category[32767+nrneg] = cat;\n\t                            bitcode[32767+nrneg] = [];\n\t                            bitcode[32767+nrneg][1] = cat;\n\t                            bitcode[32767+nrneg][0] = nrupper-1+nrneg;\n\t                        }\n\t                        nrlower <<= 1;\n\t                        nrupper <<= 1;\n\t                    }\n\t                }\n\t\n\t                function initRGBYUVTable() {\n\t                    for(var i = 0; i < 256;i++) {\n\t                        RGB_YUV_TABLE[i]            =  19595 * i;\n\t                        RGB_YUV_TABLE[(i+ 256)>>0]  =  38470 * i;\n\t                        RGB_YUV_TABLE[(i+ 512)>>0]  =   7471 * i + 0x8000;\n\t                        RGB_YUV_TABLE[(i+ 768)>>0]  = -11059 * i;\n\t                        RGB_YUV_TABLE[(i+1024)>>0]  = -21709 * i;\n\t                        RGB_YUV_TABLE[(i+1280)>>0]  =  32768 * i + 0x807FFF;\n\t                        RGB_YUV_TABLE[(i+1536)>>0]  = -27439 * i;\n\t                        RGB_YUV_TABLE[(i+1792)>>0]  = - 5329 * i;\n\t                    }\n\t                }\n\t\n\t                // IO functions\n\t                function writeBits(bs)\n\t                {\n\t                    var value = bs[0];\n\t                    var posval = bs[1]-1;\n\t                    while ( posval >= 0 ) {\n\t                        if (value & (1 << posval) ) {\n\t                            bytenew |= (1 << bytepos);\n\t                        }\n\t                        posval--;\n\t                        bytepos--;\n\t                        if (bytepos < 0) {\n\t                            if (bytenew == 0xFF) {\n\t                                writeByte(0xFF);\n\t                                writeByte(0);\n\t                            }\n\t                            else {\n\t                                writeByte(bytenew);\n\t                            }\n\t                            bytepos=7;\n\t                            bytenew=0;\n\t                        }\n\t                    }\n\t                }\n\t\n\t                function writeByte(value)\n\t                {\n\t                    byteout.push(clt[value]); // write char directly instead of converting later\n\t                }\n\t\n\t                function writeWord(value)\n\t                {\n\t                    writeByte((value>>8)&0xFF);\n\t                    writeByte((value   )&0xFF);\n\t                }\n\t\n\t                // DCT & quantization core\n\t                function fDCTQuant(data, fdtbl)\n\t                {\n\t                    var d0, d1, d2, d3, d4, d5, d6, d7;\n\t                    /* Pass 1: process rows. */\n\t                    var dataOff=0;\n\t                    var i;\n\t                    var I8 = 8;\n\t                    var I64 = 64;\n\t                    for (i=0; i<I8; ++i)\n\t                    {\n\t                        d0 = data[dataOff];\n\t                        d1 = data[dataOff+1];\n\t                        d2 = data[dataOff+2];\n\t                        d3 = data[dataOff+3];\n\t                        d4 = data[dataOff+4];\n\t                        d5 = data[dataOff+5];\n\t                        d6 = data[dataOff+6];\n\t                        d7 = data[dataOff+7];\n\t\n\t                        var tmp0 = d0 + d7;\n\t                        var tmp7 = d0 - d7;\n\t                        var tmp1 = d1 + d6;\n\t                        var tmp6 = d1 - d6;\n\t                        var tmp2 = d2 + d5;\n\t                        var tmp5 = d2 - d5;\n\t                        var tmp3 = d3 + d4;\n\t                        var tmp4 = d3 - d4;\n\t\n\t                        /* Even part */\n\t                        var tmp10 = tmp0 + tmp3;    /* phase 2 */\n\t                        var tmp13 = tmp0 - tmp3;\n\t                        var tmp11 = tmp1 + tmp2;\n\t                        var tmp12 = tmp1 - tmp2;\n\t\n\t                        data[dataOff] = tmp10 + tmp11; /* phase 3 */\n\t                        data[dataOff+4] = tmp10 - tmp11;\n\t\n\t                        var z1 = (tmp12 + tmp13) * 0.707106781; /* c4 */\n\t                        data[dataOff+2] = tmp13 + z1; /* phase 5 */\n\t                        data[dataOff+6] = tmp13 - z1;\n\t\n\t                        /* Odd part */\n\t                        tmp10 = tmp4 + tmp5; /* phase 2 */\n\t                        tmp11 = tmp5 + tmp6;\n\t                        tmp12 = tmp6 + tmp7;\n\t\n\t                        /* The rotator is modified from fig 4-8 to avoid extra negations. */\n\t                        var z5 = (tmp10 - tmp12) * 0.382683433; /* c6 */\n\t                        var z2 = 0.541196100 * tmp10 + z5; /* c2-c6 */\n\t                        var z4 = 1.306562965 * tmp12 + z5; /* c2+c6 */\n\t                        var z3 = tmp11 * 0.707106781; /* c4 */\n\t\n\t                        var z11 = tmp7 + z3;    /* phase 5 */\n\t                        var z13 = tmp7 - z3;\n\t\n\t                        data[dataOff+5] = z13 + z2; /* phase 6 */\n\t                        data[dataOff+3] = z13 - z2;\n\t                        data[dataOff+1] = z11 + z4;\n\t                        data[dataOff+7] = z11 - z4;\n\t\n\t                        dataOff += 8; /* advance pointer to next row */\n\t                    }\n\t\n\t                    /* Pass 2: process columns. */\n\t                    dataOff = 0;\n\t                    for (i=0; i<I8; ++i)\n\t                    {\n\t                        d0 = data[dataOff];\n\t                        d1 = data[dataOff + 8];\n\t                        d2 = data[dataOff + 16];\n\t                        d3 = data[dataOff + 24];\n\t                        d4 = data[dataOff + 32];\n\t                        d5 = data[dataOff + 40];\n\t                        d6 = data[dataOff + 48];\n\t                        d7 = data[dataOff + 56];\n\t\n\t                        var tmp0p2 = d0 + d7;\n\t                        var tmp7p2 = d0 - d7;\n\t                        var tmp1p2 = d1 + d6;\n\t                        var tmp6p2 = d1 - d6;\n\t                        var tmp2p2 = d2 + d5;\n\t                        var tmp5p2 = d2 - d5;\n\t                        var tmp3p2 = d3 + d4;\n\t                        var tmp4p2 = d3 - d4;\n\t\n\t                        /* Even part */\n\t                        var tmp10p2 = tmp0p2 + tmp3p2;  /* phase 2 */\n\t                        var tmp13p2 = tmp0p2 - tmp3p2;\n\t                        var tmp11p2 = tmp1p2 + tmp2p2;\n\t                        var tmp12p2 = tmp1p2 - tmp2p2;\n\t\n\t                        data[dataOff] = tmp10p2 + tmp11p2; /* phase 3 */\n\t                        data[dataOff+32] = tmp10p2 - tmp11p2;\n\t\n\t                        var z1p2 = (tmp12p2 + tmp13p2) * 0.707106781; /* c4 */\n\t                        data[dataOff+16] = tmp13p2 + z1p2; /* phase 5 */\n\t                        data[dataOff+48] = tmp13p2 - z1p2;\n\t\n\t                        /* Odd part */\n\t                        tmp10p2 = tmp4p2 + tmp5p2; /* phase 2 */\n\t                        tmp11p2 = tmp5p2 + tmp6p2;\n\t                        tmp12p2 = tmp6p2 + tmp7p2;\n\t\n\t                        /* The rotator is modified from fig 4-8 to avoid extra negations. */\n\t                        var z5p2 = (tmp10p2 - tmp12p2) * 0.382683433; /* c6 */\n\t                        var z2p2 = 0.541196100 * tmp10p2 + z5p2; /* c2-c6 */\n\t                        var z4p2 = 1.306562965 * tmp12p2 + z5p2; /* c2+c6 */\n\t                        var z3p2 = tmp11p2 * 0.707106781; /* c4 */\n\t\n\t                        var z11p2 = tmp7p2 + z3p2;  /* phase 5 */\n\t                        var z13p2 = tmp7p2 - z3p2;\n\t\n\t                        data[dataOff+40] = z13p2 + z2p2; /* phase 6 */\n\t                        data[dataOff+24] = z13p2 - z2p2;\n\t                        data[dataOff+ 8] = z11p2 + z4p2;\n\t                        data[dataOff+56] = z11p2 - z4p2;\n\t\n\t                        dataOff++; /* advance pointer to next column */\n\t                    }\n\t\n\t                    // Quantize/descale the coefficients\n\t                    var fDCTQuant;\n\t                    for (i=0; i<I64; ++i)\n\t                    {\n\t                        // Apply the quantization and scaling factor & Round to nearest integer\n\t                        fDCTQuant = data[i]*fdtbl[i];\n\t                        outputfDCTQuant[i] = (fDCTQuant > 0.0) ? ((fDCTQuant + 0.5)|0) : ((fDCTQuant - 0.5)|0);\n\t                        //outputfDCTQuant[i] = fround(fDCTQuant);\n\t\n\t                    }\n\t                    return outputfDCTQuant;\n\t                }\n\t\n\t                function writeAPP0()\n\t                {\n\t                    writeWord(0xFFE0); // marker\n\t                    writeWord(16); // length\n\t                    writeByte(0x4A); // J\n\t                    writeByte(0x46); // F\n\t                    writeByte(0x49); // I\n\t                    writeByte(0x46); // F\n\t                    writeByte(0); // = \"JFIF\",'\\0'\n\t                    writeByte(1); // versionhi\n\t                    writeByte(1); // versionlo\n\t                    writeByte(0); // xyunits\n\t                    writeWord(1); // xdensity\n\t                    writeWord(1); // ydensity\n\t                    writeByte(0); // thumbnwidth\n\t                    writeByte(0); // thumbnheight\n\t                }\n\t\n\t                function writeSOF0(width, height)\n\t                {\n\t                    writeWord(0xFFC0); // marker\n\t                    writeWord(17);   // length, truecolor YUV JPG\n\t                    writeByte(8);    // precision\n\t                    writeWord(height);\n\t                    writeWord(width);\n\t                    writeByte(3);    // nrofcomponents\n\t                    writeByte(1);    // IdY\n\t                    writeByte(0x11); // HVY\n\t                    writeByte(0);    // QTY\n\t                    writeByte(2);    // IdU\n\t                    writeByte(0x11); // HVU\n\t                    writeByte(1);    // QTU\n\t                    writeByte(3);    // IdV\n\t                    writeByte(0x11); // HVV\n\t                    writeByte(1);    // QTV\n\t                }\n\t\n\t                function writeDQT()\n\t                {\n\t                    writeWord(0xFFDB); // marker\n\t                    writeWord(132);    // length\n\t                    writeByte(0);\n\t                    for (var i=0; i<64; i++) {\n\t                        writeByte(YTable[i]);\n\t                    }\n\t                    writeByte(1);\n\t                    for (var j=0; j<64; j++) {\n\t                        writeByte(UVTable[j]);\n\t                    }\n\t                }\n\t\n\t                function writeDHT()\n\t                {\n\t                    writeWord(0xFFC4); // marker\n\t                    writeWord(0x01A2); // length\n\t\n\t                    writeByte(0); // HTYDCinfo\n\t                    for (var i=0; i<16; i++) {\n\t                        writeByte(std_dc_luminance_nrcodes[i+1]);\n\t                    }\n\t                    for (var j=0; j<=11; j++) {\n\t                        writeByte(std_dc_luminance_values[j]);\n\t                    }\n\t\n\t                    writeByte(0x10); // HTYACinfo\n\t                    for (var k=0; k<16; k++) {\n\t                        writeByte(std_ac_luminance_nrcodes[k+1]);\n\t                    }\n\t                    for (var l=0; l<=161; l++) {\n\t                        writeByte(std_ac_luminance_values[l]);\n\t                    }\n\t\n\t                    writeByte(1); // HTUDCinfo\n\t                    for (var m=0; m<16; m++) {\n\t                        writeByte(std_dc_chrominance_nrcodes[m+1]);\n\t                    }\n\t                    for (var n=0; n<=11; n++) {\n\t                        writeByte(std_dc_chrominance_values[n]);\n\t                    }\n\t\n\t                    writeByte(0x11); // HTUACinfo\n\t                    for (var o=0; o<16; o++) {\n\t                        writeByte(std_ac_chrominance_nrcodes[o+1]);\n\t                    }\n\t                    for (var p=0; p<=161; p++) {\n\t                        writeByte(std_ac_chrominance_values[p]);\n\t                    }\n\t                }\n\t\n\t                function writeSOS()\n\t                {\n\t                    writeWord(0xFFDA); // marker\n\t                    writeWord(12); // length\n\t                    writeByte(3); // nrofcomponents\n\t                    writeByte(1); // IdY\n\t                    writeByte(0); // HTY\n\t                    writeByte(2); // IdU\n\t                    writeByte(0x11); // HTU\n\t                    writeByte(3); // IdV\n\t                    writeByte(0x11); // HTV\n\t                    writeByte(0); // Ss\n\t                    writeByte(0x3f); // Se\n\t                    writeByte(0); // Bf\n\t                }\n\t\n\t                function processDU(CDU, fdtbl, DC, HTDC, HTAC){\n\t                    var EOB = HTAC[0x00];\n\t                    var M16zeroes = HTAC[0xF0];\n\t                    var pos;\n\t                    var I16 = 16;\n\t                    var I63 = 63;\n\t                    var I64 = 64;\n\t                    var DU_DCT = fDCTQuant(CDU, fdtbl);\n\t                    //ZigZag reorder\n\t                    for (var j=0;j<I64;++j) {\n\t                        DU[ZigZag[j]]=DU_DCT[j];\n\t                    }\n\t                    var Diff = DU[0] - DC; DC = DU[0];\n\t                    //Encode DC\n\t                    if (Diff==0) {\n\t                        writeBits(HTDC[0]); // Diff might be 0\n\t                    } else {\n\t                        pos = 32767+Diff;\n\t                        writeBits(HTDC[category[pos]]);\n\t                        writeBits(bitcode[pos]);\n\t                    }\n\t                    //Encode ACs\n\t                    var end0pos = 63; // was const... which is crazy\n\t                    for (; (end0pos>0)&&(DU[end0pos]==0); end0pos--) {}\n\t                    //end0pos = first element in reverse order !=0\n\t                    if ( end0pos == 0) {\n\t                        writeBits(EOB);\n\t                        return DC;\n\t                    }\n\t                    var i = 1;\n\t                    var lng;\n\t                    while ( i <= end0pos ) {\n\t                        var startpos = i;\n\t                        for (; (DU[i]==0) && (i<=end0pos); ++i) {}\n\t                        var nrzeroes = i-startpos;\n\t                        if ( nrzeroes >= I16 ) {\n\t                            lng = nrzeroes>>4;\n\t                            for (var nrmarker=1; nrmarker <= lng; ++nrmarker)\n\t                                writeBits(M16zeroes);\n\t                            nrzeroes = nrzeroes&0xF;\n\t                        }\n\t                        pos = 32767+DU[i];\n\t                        writeBits(HTAC[(nrzeroes<<4)+category[pos]]);\n\t                        writeBits(bitcode[pos]);\n\t                        i++;\n\t                    }\n\t                    if ( end0pos != I63 ) {\n\t                        writeBits(EOB);\n\t                    }\n\t                    return DC;\n\t                }\n\t\n\t                function initCharLookupTable(){\n\t                    var sfcc = String.fromCharCode;\n\t                    for(var i=0; i < 256; i++){ ///// ACHTUNG // 255\n\t                        clt[i] = sfcc(i);\n\t                    }\n\t                }\n\t\n\t                this.encode = function(image,quality) // image data object\n\t                {\n\t                    // var time_start = new Date().getTime();\n\t\n\t                    if(quality) setQuality(quality);\n\t\n\t                    // Initialize bit writer\n\t                    byteout = new Array();\n\t                    bytenew=0;\n\t                    bytepos=7;\n\t\n\t                    // Add JPEG headers\n\t                    writeWord(0xFFD8); // SOI\n\t                    writeAPP0();\n\t                    writeDQT();\n\t                    writeSOF0(image.width,image.height);\n\t                    writeDHT();\n\t                    writeSOS();\n\t\n\t\n\t                    // Encode 8x8 macroblocks\n\t                    var DCY=0;\n\t                    var DCU=0;\n\t                    var DCV=0;\n\t\n\t                    bytenew=0;\n\t                    bytepos=7;\n\t\n\t\n\t                    this.encode.displayName = \"_encode_\";\n\t\n\t                    var imageData = image.data;\n\t                    var width = image.width;\n\t                    var height = image.height;\n\t\n\t                    var quadWidth = width*4;\n\t                    var tripleWidth = width*3;\n\t\n\t                    var x, y = 0;\n\t                    var r, g, b;\n\t                    var start,p, col,row,pos;\n\t                    while(y < height){\n\t                        x = 0;\n\t                        while(x < quadWidth){\n\t                        start = quadWidth * y + x;\n\t                        p = start;\n\t                        col = -1;\n\t                        row = 0;\n\t\n\t                        for(pos=0; pos < 64; pos++){\n\t                            row = pos >> 3;// /8\n\t                            col = ( pos & 7 ) * 4; // %8\n\t                            p = start + ( row * quadWidth ) + col;\n\t\n\t                            if(y+row >= height){ // padding bottom\n\t                                p-= (quadWidth*(y+1+row-height));\n\t                            }\n\t\n\t                            if(x+col >= quadWidth){ // padding right\n\t                                p-= ((x+col) - quadWidth +4)\n\t                            }\n\t\n\t                            r = imageData[ p++ ];\n\t                            g = imageData[ p++ ];\n\t                            b = imageData[ p++ ];\n\t\n\t\n\t                            /* // calculate YUV values dynamically\n\t                            YDU[pos]=((( 0.29900)*r+( 0.58700)*g+( 0.11400)*b))-128; //-0x80\n\t                            UDU[pos]=(((-0.16874)*r+(-0.33126)*g+( 0.50000)*b));\n\t                            VDU[pos]=((( 0.50000)*r+(-0.41869)*g+(-0.08131)*b));\n\t                            */\n\t\n\t                            // use lookup table (slightly faster)\n\t                            YDU[pos] = ((RGB_YUV_TABLE[r]             + RGB_YUV_TABLE[(g +  256)>>0] + RGB_YUV_TABLE[(b +  512)>>0]) >> 16)-128;\n\t                            UDU[pos] = ((RGB_YUV_TABLE[(r +  768)>>0] + RGB_YUV_TABLE[(g + 1024)>>0] + RGB_YUV_TABLE[(b + 1280)>>0]) >> 16)-128;\n\t                            VDU[pos] = ((RGB_YUV_TABLE[(r + 1280)>>0] + RGB_YUV_TABLE[(g + 1536)>>0] + RGB_YUV_TABLE[(b + 1792)>>0]) >> 16)-128;\n\t\n\t                        }\n\t\n\t                        DCY = processDU(YDU, fdtbl_Y, DCY, YDC_HT, YAC_HT);\n\t                        DCU = processDU(UDU, fdtbl_UV, DCU, UVDC_HT, UVAC_HT);\n\t                        DCV = processDU(VDU, fdtbl_UV, DCV, UVDC_HT, UVAC_HT);\n\t                        x+=32;\n\t                        }\n\t                        y+=8;\n\t                    }\n\t\n\t\n\t                    ////////////////////////////////////////////////////////////////\n\t\n\t                    // Do the bit alignment of the EOI marker\n\t                    if ( bytepos >= 0 ) {\n\t                        var fillbits = [];\n\t                        fillbits[1] = bytepos+1;\n\t                        fillbits[0] = (1<<(bytepos+1))-1;\n\t                        writeBits(fillbits);\n\t                    }\n\t\n\t                    writeWord(0xFFD9); //EOI\n\t\n\t                    var jpegDataUri = 'data:image/jpeg;base64,' + btoa(byteout.join(''));\n\t\n\t                    byteout = [];\n\t\n\t                    // benchmarking\n\t                    // var duration = new Date().getTime() - time_start;\n\t                    // console.log('Encoding time: '+ currentQuality + 'ms');\n\t                    //\n\t\n\t                    return jpegDataUri\n\t            }\n\t\n\t            function setQuality(quality){\n\t                if (quality <= 0) {\n\t                    quality = 1;\n\t                }\n\t                if (quality > 100) {\n\t                    quality = 100;\n\t                }\n\t\n\t                if(currentQuality == quality) return // don't recalc if unchanged\n\t\n\t                var sf = 0;\n\t                if (quality < 50) {\n\t                    sf = Math.floor(5000 / quality);\n\t                } else {\n\t                    sf = Math.floor(200 - quality*2);\n\t                }\n\t\n\t                initQuantTables(sf);\n\t                currentQuality = quality;\n\t                // console.log('Quality set to: '+quality +'%');\n\t            }\n\t\n\t            function init(){\n\t                // var time_start = new Date().getTime();\n\t                if(!quality) quality = 50;\n\t                // Create tables\n\t                initCharLookupTable()\n\t                initHuffmanTbl();\n\t                initCategoryNumber();\n\t                initRGBYUVTable();\n\t\n\t                setQuality(quality);\n\t                // var duration = new Date().getTime() - time_start;\n\t                // console.log('Initialization '+ duration + 'ms');\n\t            }\n\t\n\t            init();\n\t\n\t        }\n\t\n\t        JPEGEncoder.encode = function( data, quality ) {\n\t            var encoder = new JPEGEncoder( quality );\n\t\n\t            return encoder.encode( data );\n\t        }\n\t\n\t        return JPEGEncoder;\n\t    });\n\t    /**\n\t     * @fileOverview Fix android canvas.toDataUrl bug.\n\t     */\n\t    define('runtime/html5/androidpatch',[\n\t        'runtime/html5/util',\n\t        'runtime/html5/jpegencoder',\n\t        'base'\n\t    ], function( Util, encoder, Base ) {\n\t        var origin = Util.canvasToDataUrl,\n\t            supportJpeg;\n\t\n\t        Util.canvasToDataUrl = function( canvas, type, quality ) {\n\t            var ctx, w, h, fragement, parts;\n\t\n\t            // android\n\t            if ( !Base.os.android ) {\n\t                return origin.apply( null, arguments );\n\t            }\n\t\n\t            // canvasjpeg\n\t            // JPEG 255, 216\n\t            if ( type === 'image/jpeg' && typeof supportJpeg === 'undefined' ) {\n\t                fragement = origin.apply( null, arguments );\n\t\n\t                parts = fragement.split(',');\n\t\n\t                if ( ~parts[ 0 ].indexOf('base64') ) {\n\t                    fragement = atob( parts[ 1 ] );\n\t                } else {\n\t                    fragement = decodeURIComponent( parts[ 1 ] );\n\t                }\n\t\n\t                fragement = fragement.substring( 0, 2 );\n\t\n\t                supportJpeg = fragement.charCodeAt( 0 ) === 255 &&\n\t                        fragement.charCodeAt( 1 ) === 216;\n\t            }\n\t\n\t            // android\n\t            if ( type === 'image/jpeg' && !supportJpeg ) {\n\t                w = canvas.width;\n\t                h = canvas.height;\n\t                ctx = canvas.getContext('2d');\n\t\n\t                return encoder.encode( ctx.getImageData( 0, 0, w, h ), quality );\n\t            }\n\t\n\t            return origin.apply( null, arguments );\n\t        };\n\t    });\n\t    /**\n\t     * @fileOverview Image\n\t     */\n\t    define('runtime/html5/image',[\n\t        'base',\n\t        'runtime/html5/runtime',\n\t        'runtime/html5/util'\n\t    ], function( Base, Html5Runtime, Util ) {\n\t\n\t        var BLANK = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D';\n\t\n\t        return Html5Runtime.register( 'Image', {\n\t\n\t            // flag: \n\t            modified: false,\n\t\n\t            init: function() {\n\t                var me = this,\n\t                    img = new Image();\n\t\n\t                img.onload = function() {\n\t\n\t                    me._info = {\n\t                        type: me.type,\n\t                        width: this.width,\n\t                        height: this.height\n\t                    };\n\t\n\t                    // meta\n\t                    if ( !me._metas && 'image/jpeg' === me.type ) {\n\t                        Util.parseMeta( me._blob, function( error, ret ) {\n\t                            me._metas = ret;\n\t                            me.owner.trigger('load');\n\t                        });\n\t                    } else {\n\t                        me.owner.trigger('load');\n\t                    }\n\t                };\n\t\n\t                img.onerror = function() {\n\t                    me.owner.trigger('error');\n\t                };\n\t\n\t                me._img = img;\n\t            },\n\t\n\t            loadFromBlob: function( blob ) {\n\t                var me = this,\n\t                    img = me._img;\n\t\n\t                me._blob = blob;\n\t                me.type = blob.type;\n\t                img.src = Util.createObjectURL( blob.getSource() );\n\t                me.owner.once( 'load', function() {\n\t                    Util.revokeObjectURL( img.src );\n\t                });\n\t            },\n\t\n\t            resize: function( width, height ) {\n\t                var canvas = this._canvas ||\n\t                        (this._canvas = document.createElement('canvas'));\n\t\n\t                this._resize( this._img, canvas, width, height );\n\t                this._blob = null;    // \n\t                this.modified = true;\n\t                this.owner.trigger( 'complete', 'resize' );\n\t            },\n\t\n\t            crop: function( x, y, w, h, s ) {\n\t                var cvs = this._canvas ||\n\t                        (this._canvas = document.createElement('canvas')),\n\t                    opts = this.options,\n\t                    img = this._img,\n\t                    iw = img.naturalWidth,\n\t                    ih = img.naturalHeight,\n\t                    orientation = this.getOrientation();\n\t\n\t                s = s || 1;\n\t\n\t                // todo  orientation \n\t                // values that require 90 degree rotation\n\t                // if ( ~[ 5, 6, 7, 8 ].indexOf( orientation ) ) {\n\t\n\t                //     switch ( orientation ) {\n\t                //         case 6:\n\t                //             tmp = x;\n\t                //             x = y;\n\t                //             y = iw * s - tmp - w;\n\t                //             console.log(ih * s, tmp, w)\n\t                //             break;\n\t                //     }\n\t\n\t                //     (w ^= h, h ^= w, w ^= h);\n\t                // }\n\t\n\t                cvs.width = w;\n\t                cvs.height = h;\n\t\n\t                opts.preserveHeaders || this._rotate2Orientaion( cvs, orientation );\n\t                this._renderImageToCanvas( cvs, img, -x, -y, iw * s, ih * s );\n\t\n\t                this._blob = null;    // \n\t                this.modified = true;\n\t                this.owner.trigger( 'complete', 'crop' );\n\t            },\n\t\n\t            getAsBlob: function( type ) {\n\t                var blob = this._blob,\n\t                    opts = this.options,\n\t                    canvas;\n\t\n\t                type = type || this.type;\n\t\n\t                // blob\n\t                if ( this.modified || this.type !== type ) {\n\t                    canvas = this._canvas;\n\t\n\t                    if ( type === 'image/jpeg' ) {\n\t\n\t                        blob = Util.canvasToDataUrl( canvas, type, opts.quality );\n\t\n\t                        if ( opts.preserveHeaders && this._metas &&\n\t                                this._metas.imageHead ) {\n\t\n\t                            blob = Util.dataURL2ArrayBuffer( blob );\n\t                            blob = Util.updateImageHead( blob,\n\t                                    this._metas.imageHead );\n\t                            blob = Util.arrayBufferToBlob( blob, type );\n\t                            return blob;\n\t                        }\n\t                    } else {\n\t                        blob = Util.canvasToDataUrl( canvas, type );\n\t                    }\n\t\n\t                    blob = Util.dataURL2Blob( blob );\n\t                }\n\t\n\t                return blob;\n\t            },\n\t\n\t            getAsDataUrl: function( type ) {\n\t                var opts = this.options;\n\t\n\t                type = type || this.type;\n\t\n\t                if ( type === 'image/jpeg' ) {\n\t                    return Util.canvasToDataUrl( this._canvas, type, opts.quality );\n\t                } else {\n\t                    return this._canvas.toDataURL( type );\n\t                }\n\t            },\n\t\n\t            getOrientation: function() {\n\t                return this._metas && this._metas.exif &&\n\t                        this._metas.exif.get('Orientation') || 1;\n\t            },\n\t\n\t            info: function( val ) {\n\t\n\t                // setter\n\t                if ( val ) {\n\t                    this._info = val;\n\t                    return this;\n\t                }\n\t\n\t                // getter\n\t                return this._info;\n\t            },\n\t\n\t            meta: function( val ) {\n\t\n\t                // setter\n\t                if ( val ) {\n\t                    this._meta = val;\n\t                    return this;\n\t                }\n\t\n\t                // getter\n\t                return this._meta;\n\t            },\n\t\n\t            destroy: function() {\n\t                var canvas = this._canvas;\n\t                this._img.onload = null;\n\t\n\t                if ( canvas ) {\n\t                    canvas.getContext('2d')\n\t                            .clearRect( 0, 0, canvas.width, canvas.height );\n\t                    canvas.width = canvas.height = 0;\n\t                    this._canvas = null;\n\t                }\n\t\n\t                // image\n\t                this._img.src = BLANK;\n\t                this._img = this._blob = null;\n\t            },\n\t\n\t            _resize: function( img, cvs, width, height ) {\n\t                var opts = this.options,\n\t                    naturalWidth = img.width,\n\t                    naturalHeight = img.height,\n\t                    orientation = this.getOrientation(),\n\t                    scale, w, h, x, y;\n\t\n\t                // values that require 90 degree rotation\n\t                if ( ~[ 5, 6, 7, 8 ].indexOf( orientation ) ) {\n\t\n\t                    // width, height\n\t                    width ^= height;\n\t                    height ^= width;\n\t                    width ^= height;\n\t                }\n\t\n\t                scale = Math[ opts.crop ? 'max' : 'min' ]( width / naturalWidth,\n\t                        height / naturalHeight );\n\t\n\t                // \n\t                opts.allowMagnify || (scale = Math.min( 1, scale ));\n\t\n\t                w = naturalWidth * scale;\n\t                h = naturalHeight * scale;\n\t\n\t                if ( opts.crop ) {\n\t                    cvs.width = width;\n\t                    cvs.height = height;\n\t                } else {\n\t                    cvs.width = w;\n\t                    cvs.height = h;\n\t                }\n\t\n\t                x = (cvs.width - w) / 2;\n\t                y = (cvs.height - h) / 2;\n\t\n\t                opts.preserveHeaders || this._rotate2Orientaion( cvs, orientation );\n\t\n\t                this._renderImageToCanvas( cvs, img, x, y, w, h );\n\t            },\n\t\n\t            _rotate2Orientaion: function( canvas, orientation ) {\n\t                var width = canvas.width,\n\t                    height = canvas.height,\n\t                    ctx = canvas.getContext('2d');\n\t\n\t                switch ( orientation ) {\n\t                    case 5:\n\t                    case 6:\n\t                    case 7:\n\t                    case 8:\n\t                        canvas.width = height;\n\t                        canvas.height = width;\n\t                        break;\n\t                }\n\t\n\t                switch ( orientation ) {\n\t                    case 2:    // horizontal flip\n\t                        ctx.translate( width, 0 );\n\t                        ctx.scale( -1, 1 );\n\t                        break;\n\t\n\t                    case 3:    // 180 rotate left\n\t                        ctx.translate( width, height );\n\t                        ctx.rotate( Math.PI );\n\t                        break;\n\t\n\t                    case 4:    // vertical flip\n\t                        ctx.translate( 0, height );\n\t                        ctx.scale( 1, -1 );\n\t                        break;\n\t\n\t                    case 5:    // vertical flip + 90 rotate right\n\t                        ctx.rotate( 0.5 * Math.PI );\n\t                        ctx.scale( 1, -1 );\n\t                        break;\n\t\n\t                    case 6:    // 90 rotate right\n\t                        ctx.rotate( 0.5 * Math.PI );\n\t                        ctx.translate( 0, -height );\n\t                        break;\n\t\n\t                    case 7:    // horizontal flip + 90 rotate right\n\t                        ctx.rotate( 0.5 * Math.PI );\n\t                        ctx.translate( width, -height );\n\t                        ctx.scale( -1, 1 );\n\t                        break;\n\t\n\t                    case 8:    // 90 rotate left\n\t                        ctx.rotate( -0.5 * Math.PI );\n\t                        ctx.translate( -width, 0 );\n\t                        break;\n\t                }\n\t            },\n\t\n\t            // https://github.com/stomita/ios-imagefile-megapixel/\n\t            // blob/master/src/megapix-image.js\n\t            _renderImageToCanvas: (function() {\n\t\n\t                // ios, \n\t                if ( !Base.os.ios ) {\n\t                    return function( canvas ) {\n\t                        var args = Base.slice( arguments, 1 ),\n\t                            ctx = canvas.getContext('2d');\n\t\n\t                        ctx.drawImage.apply( ctx, args );\n\t                    };\n\t                }\n\t\n\t                /**\n\t                 * Detecting vertical squash in loaded image.\n\t                 * Fixes a bug which squash image vertically while drawing into\n\t                 * canvas for some images.\n\t                 */\n\t                function detectVerticalSquash( img, iw, ih ) {\n\t                    var canvas = document.createElement('canvas'),\n\t                        ctx = canvas.getContext('2d'),\n\t                        sy = 0,\n\t                        ey = ih,\n\t                        py = ih,\n\t                        data, alpha, ratio;\n\t\n\t\n\t                    canvas.width = 1;\n\t                    canvas.height = ih;\n\t                    ctx.drawImage( img, 0, 0 );\n\t                    data = ctx.getImageData( 0, 0, 1, ih ).data;\n\t\n\t                    // search image edge pixel position in case\n\t                    // it is squashed vertically.\n\t                    while ( py > sy ) {\n\t                        alpha = data[ (py - 1) * 4 + 3 ];\n\t\n\t                        if ( alpha === 0 ) {\n\t                            ey = py;\n\t                        } else {\n\t                            sy = py;\n\t                        }\n\t\n\t                        py = (ey + sy) >> 1;\n\t                    }\n\t\n\t                    ratio = (py / ih);\n\t                    return (ratio === 0) ? 1 : ratio;\n\t                }\n\t\n\t                // fix ie7 bug\n\t                // http://stackoverflow.com/questions/11929099/\n\t                // html5-canvas-drawimage-ratio-bug-ios\n\t                if ( Base.os.ios >= 7 ) {\n\t                    return function( canvas, img, x, y, w, h ) {\n\t                        var iw = img.naturalWidth,\n\t                            ih = img.naturalHeight,\n\t                            vertSquashRatio = detectVerticalSquash( img, iw, ih );\n\t\n\t                        return canvas.getContext('2d').drawImage( img, 0, 0,\n\t                                iw * vertSquashRatio, ih * vertSquashRatio,\n\t                                x, y, w, h );\n\t                    };\n\t                }\n\t\n\t                /**\n\t                 * Detect subsampling in loaded image.\n\t                 * In iOS, larger images than 2M pixels may be\n\t                 * subsampled in rendering.\n\t                 */\n\t                function detectSubsampling( img ) {\n\t                    var iw = img.naturalWidth,\n\t                        ih = img.naturalHeight,\n\t                        canvas, ctx;\n\t\n\t                    // subsampling may happen overmegapixel image\n\t                    if ( iw * ih > 1024 * 1024 ) {\n\t                        canvas = document.createElement('canvas');\n\t                        canvas.width = canvas.height = 1;\n\t                        ctx = canvas.getContext('2d');\n\t                        ctx.drawImage( img, -iw + 1, 0 );\n\t\n\t                        // subsampled image becomes half smaller in rendering size.\n\t                        // check alpha channel value to confirm image is covering\n\t                        // edge pixel or not. if alpha value is 0\n\t                        // image is not covering, hence subsampled.\n\t                        return ctx.getImageData( 0, 0, 1, 1 ).data[ 3 ] === 0;\n\t                    } else {\n\t                        return false;\n\t                    }\n\t                }\n\t\n\t\n\t                return function( canvas, img, x, y, width, height ) {\n\t                    var iw = img.naturalWidth,\n\t                        ih = img.naturalHeight,\n\t                        ctx = canvas.getContext('2d'),\n\t                        subsampled = detectSubsampling( img ),\n\t                        doSquash = this.type === 'image/jpeg',\n\t                        d = 1024,\n\t                        sy = 0,\n\t                        dy = 0,\n\t                        tmpCanvas, tmpCtx, vertSquashRatio, dw, dh, sx, dx;\n\t\n\t                    if ( subsampled ) {\n\t                        iw /= 2;\n\t                        ih /= 2;\n\t                    }\n\t\n\t                    ctx.save();\n\t                    tmpCanvas = document.createElement('canvas');\n\t                    tmpCanvas.width = tmpCanvas.height = d;\n\t\n\t                    tmpCtx = tmpCanvas.getContext('2d');\n\t                    vertSquashRatio = doSquash ?\n\t                            detectVerticalSquash( img, iw, ih ) : 1;\n\t\n\t                    dw = Math.ceil( d * width / iw );\n\t                    dh = Math.ceil( d * height / ih / vertSquashRatio );\n\t\n\t                    while ( sy < ih ) {\n\t                        sx = 0;\n\t                        dx = 0;\n\t                        while ( sx < iw ) {\n\t                            tmpCtx.clearRect( 0, 0, d, d );\n\t                            tmpCtx.drawImage( img, -sx, -sy );\n\t                            ctx.drawImage( tmpCanvas, 0, 0, d, d,\n\t                                    x + dx, y + dy, dw, dh );\n\t                            sx += d;\n\t                            dx += dw;\n\t                        }\n\t                        sy += d;\n\t                        dy += dh;\n\t                    }\n\t                    ctx.restore();\n\t                    tmpCanvas = tmpCtx = null;\n\t                };\n\t            })()\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview Transport\n\t     * @todo chunked\n\t     * \n\t     * chunked\n\t     */\n\t    define('runtime/html5/transport',[\n\t        'base',\n\t        'runtime/html5/runtime'\n\t    ], function( Base, Html5Runtime ) {\n\t\n\t        var noop = Base.noop,\n\t            $ = Base.$;\n\t\n\t        return Html5Runtime.register( 'Transport', {\n\t            init: function() {\n\t                this._status = 0;\n\t                this._response = null;\n\t            },\n\t\n\t            send: function() {\n\t                var owner = this.owner,\n\t                    opts = this.options,\n\t                    xhr = this._initAjax(),\n\t                    blob = owner._blob,\n\t                    server = opts.server,\n\t                    formData, binary, fr;\n\t\n\t                if ( opts.sendAsBinary ) {\n\t                    server += (/\\?/.test( server ) ? '&' : '?') +\n\t                            $.param( owner._formData );\n\t\n\t                    binary = blob.getSource();\n\t                } else {\n\t                    formData = new FormData();\n\t                    $.each( owner._formData, function( k, v ) {\n\t                        formData.append( k, v );\n\t                    });\n\t\n\t                    formData.append( opts.fileVal, blob.getSource(),\n\t                            opts.filename || owner._formData.name || '' );\n\t                }\n\t\n\t                if ( opts.withCredentials && 'withCredentials' in xhr ) {\n\t                    xhr.open( opts.method, server, true );\n\t                    xhr.withCredentials = true;\n\t                } else {\n\t                    xhr.open( opts.method, server );\n\t                }\n\t\n\t                this._setRequestHeader( xhr, opts.headers );\n\t\n\t                if ( binary ) {\n\t                    //  content-type \n\t                    xhr.overrideMimeType &&\n\t                            xhr.overrideMimeType('application/octet-stream');\n\t\n\t                    // androidblob\n\t                    // bug\n\t                    // https://code.google.com/p/android/issues/detail?id=39882\n\t                    // fileReaderarraybuffer\n\t                    if ( Base.os.android ) {\n\t                        fr = new FileReader();\n\t\n\t                        fr.onload = function() {\n\t                            xhr.send( this.result );\n\t                            fr = fr.onload = null;\n\t                        };\n\t\n\t                        fr.readAsArrayBuffer( binary );\n\t                    } else {\n\t                        xhr.send( binary );\n\t                    }\n\t                } else {\n\t                    xhr.send( formData );\n\t                }\n\t            },\n\t\n\t            getResponse: function() {\n\t                return this._response;\n\t            },\n\t\n\t            getResponseAsJson: function() {\n\t                return this._parseJson( this._response );\n\t            },\n\t\n\t            getStatus: function() {\n\t                return this._status;\n\t            },\n\t\n\t            abort: function() {\n\t                var xhr = this._xhr;\n\t\n\t                if ( xhr ) {\n\t                    xhr.upload.onprogress = noop;\n\t                    xhr.onreadystatechange = noop;\n\t                    xhr.abort();\n\t\n\t                    this._xhr = xhr = null;\n\t                }\n\t            },\n\t\n\t            destroy: function() {\n\t                this.abort();\n\t            },\n\t\n\t            _initAjax: function() {\n\t                var me = this,\n\t                    xhr = new XMLHttpRequest(),\n\t                    opts = this.options;\n\t\n\t                if ( opts.withCredentials && !('withCredentials' in xhr) &&\n\t                        typeof XDomainRequest !== 'undefined' ) {\n\t                    xhr = new XDomainRequest();\n\t                }\n\t\n\t                xhr.upload.onprogress = function( e ) {\n\t                    var percentage = 0;\n\t\n\t                    if ( e.lengthComputable ) {\n\t                        percentage = e.loaded / e.total;\n\t                    }\n\t\n\t                    return me.trigger( 'progress', percentage );\n\t                };\n\t\n\t                xhr.onreadystatechange = function() {\n\t\n\t                    if ( xhr.readyState !== 4 ) {\n\t                        return;\n\t                    }\n\t\n\t                    xhr.upload.onprogress = noop;\n\t                    xhr.onreadystatechange = noop;\n\t                    me._xhr = null;\n\t                    me._status = xhr.status;\n\t\n\t                    if ( xhr.status >= 200 && xhr.status < 300 ) {\n\t                        me._response = xhr.responseText;\n\t                        return me.trigger('load');\n\t                    } else if ( xhr.status >= 500 && xhr.status < 600 ) {\n\t                        me._response = xhr.responseText;\n\t                        return me.trigger( 'error', 'server' );\n\t                    }\n\t\n\t\n\t                    return me.trigger( 'error', me._status ? 'http' : 'abort' );\n\t                };\n\t\n\t                me._xhr = xhr;\n\t                return xhr;\n\t            },\n\t\n\t            _setRequestHeader: function( xhr, headers ) {\n\t                $.each( headers, function( key, val ) {\n\t                    xhr.setRequestHeader( key, val );\n\t                });\n\t            },\n\t\n\t            _parseJson: function( str ) {\n\t                var json;\n\t\n\t                try {\n\t                    json = JSON.parse( str );\n\t                } catch ( ex ) {\n\t                    json = {};\n\t                }\n\t\n\t                return json;\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview  Transport flash\n\t     */\n\t    define('runtime/html5/md5',[\n\t        'runtime/html5/runtime'\n\t    ], function( FlashRuntime ) {\n\t\n\t        /*\n\t         * Fastest md5 implementation around (JKM md5)\n\t         * Credits: Joseph Myers\n\t         *\n\t         * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n\t         * @see http://jsperf.com/md5-shootout/7\n\t         */\n\t\n\t        /* this function is much faster,\n\t          so if possible we use it. Some IEs\n\t          are the only ones I know of that\n\t          need the idiotic second function,\n\t          generated by an if clause.  */\n\t        var add32 = function (a, b) {\n\t            return (a + b) & 0xFFFFFFFF;\n\t        },\n\t\n\t        cmn = function (q, a, b, x, s, t) {\n\t            a = add32(add32(a, q), add32(x, t));\n\t            return add32((a << s) | (a >>> (32 - s)), b);\n\t        },\n\t\n\t        ff = function (a, b, c, d, x, s, t) {\n\t            return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n\t        },\n\t\n\t        gg = function (a, b, c, d, x, s, t) {\n\t            return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n\t        },\n\t\n\t        hh = function (a, b, c, d, x, s, t) {\n\t            return cmn(b ^ c ^ d, a, b, x, s, t);\n\t        },\n\t\n\t        ii = function (a, b, c, d, x, s, t) {\n\t            return cmn(c ^ (b | (~d)), a, b, x, s, t);\n\t        },\n\t\n\t        md5cycle = function (x, k) {\n\t            var a = x[0],\n\t                b = x[1],\n\t                c = x[2],\n\t                d = x[3];\n\t\n\t            a = ff(a, b, c, d, k[0], 7, -680876936);\n\t            d = ff(d, a, b, c, k[1], 12, -389564586);\n\t            c = ff(c, d, a, b, k[2], 17, 606105819);\n\t            b = ff(b, c, d, a, k[3], 22, -1044525330);\n\t            a = ff(a, b, c, d, k[4], 7, -176418897);\n\t            d = ff(d, a, b, c, k[5], 12, 1200080426);\n\t            c = ff(c, d, a, b, k[6], 17, -1473231341);\n\t            b = ff(b, c, d, a, k[7], 22, -45705983);\n\t            a = ff(a, b, c, d, k[8], 7, 1770035416);\n\t            d = ff(d, a, b, c, k[9], 12, -1958414417);\n\t            c = ff(c, d, a, b, k[10], 17, -42063);\n\t            b = ff(b, c, d, a, k[11], 22, -1990404162);\n\t            a = ff(a, b, c, d, k[12], 7, 1804603682);\n\t            d = ff(d, a, b, c, k[13], 12, -40341101);\n\t            c = ff(c, d, a, b, k[14], 17, -1502002290);\n\t            b = ff(b, c, d, a, k[15], 22, 1236535329);\n\t\n\t            a = gg(a, b, c, d, k[1], 5, -165796510);\n\t            d = gg(d, a, b, c, k[6], 9, -1069501632);\n\t            c = gg(c, d, a, b, k[11], 14, 643717713);\n\t            b = gg(b, c, d, a, k[0], 20, -373897302);\n\t            a = gg(a, b, c, d, k[5], 5, -701558691);\n\t            d = gg(d, a, b, c, k[10], 9, 38016083);\n\t            c = gg(c, d, a, b, k[15], 14, -660478335);\n\t            b = gg(b, c, d, a, k[4], 20, -405537848);\n\t            a = gg(a, b, c, d, k[9], 5, 568446438);\n\t            d = gg(d, a, b, c, k[14], 9, -1019803690);\n\t            c = gg(c, d, a, b, k[3], 14, -187363961);\n\t            b = gg(b, c, d, a, k[8], 20, 1163531501);\n\t            a = gg(a, b, c, d, k[13], 5, -1444681467);\n\t            d = gg(d, a, b, c, k[2], 9, -51403784);\n\t            c = gg(c, d, a, b, k[7], 14, 1735328473);\n\t            b = gg(b, c, d, a, k[12], 20, -1926607734);\n\t\n\t            a = hh(a, b, c, d, k[5], 4, -378558);\n\t            d = hh(d, a, b, c, k[8], 11, -2022574463);\n\t            c = hh(c, d, a, b, k[11], 16, 1839030562);\n\t            b = hh(b, c, d, a, k[14], 23, -35309556);\n\t            a = hh(a, b, c, d, k[1], 4, -1530992060);\n\t            d = hh(d, a, b, c, k[4], 11, 1272893353);\n\t            c = hh(c, d, a, b, k[7], 16, -155497632);\n\t            b = hh(b, c, d, a, k[10], 23, -1094730640);\n\t            a = hh(a, b, c, d, k[13], 4, 681279174);\n\t            d = hh(d, a, b, c, k[0], 11, -358537222);\n\t            c = hh(c, d, a, b, k[3], 16, -722521979);\n\t            b = hh(b, c, d, a, k[6], 23, 76029189);\n\t            a = hh(a, b, c, d, k[9], 4, -640364487);\n\t            d = hh(d, a, b, c, k[12], 11, -421815835);\n\t            c = hh(c, d, a, b, k[15], 16, 530742520);\n\t            b = hh(b, c, d, a, k[2], 23, -995338651);\n\t\n\t            a = ii(a, b, c, d, k[0], 6, -198630844);\n\t            d = ii(d, a, b, c, k[7], 10, 1126891415);\n\t            c = ii(c, d, a, b, k[14], 15, -1416354905);\n\t            b = ii(b, c, d, a, k[5], 21, -57434055);\n\t            a = ii(a, b, c, d, k[12], 6, 1700485571);\n\t            d = ii(d, a, b, c, k[3], 10, -1894986606);\n\t            c = ii(c, d, a, b, k[10], 15, -1051523);\n\t            b = ii(b, c, d, a, k[1], 21, -2054922799);\n\t            a = ii(a, b, c, d, k[8], 6, 1873313359);\n\t            d = ii(d, a, b, c, k[15], 10, -30611744);\n\t            c = ii(c, d, a, b, k[6], 15, -1560198380);\n\t            b = ii(b, c, d, a, k[13], 21, 1309151649);\n\t            a = ii(a, b, c, d, k[4], 6, -145523070);\n\t            d = ii(d, a, b, c, k[11], 10, -1120210379);\n\t            c = ii(c, d, a, b, k[2], 15, 718787259);\n\t            b = ii(b, c, d, a, k[9], 21, -343485551);\n\t\n\t            x[0] = add32(a, x[0]);\n\t            x[1] = add32(b, x[1]);\n\t            x[2] = add32(c, x[2]);\n\t            x[3] = add32(d, x[3]);\n\t        },\n\t\n\t        /* there needs to be support for Unicode here,\n\t           * unless we pretend that we can redefine the MD-5\n\t           * algorithm for multi-byte characters (perhaps\n\t           * by adding every four 16-bit characters and\n\t           * shortening the sum to 32 bits). Otherwise\n\t           * I suggest performing MD-5 as if every character\n\t           * was two bytes--e.g., 0040 0025 = @%--but then\n\t           * how will an ordinary MD-5 sum be matched?\n\t           * There is no way to standardize text to something\n\t           * like UTF-8 before transformation; speed cost is\n\t           * utterly prohibitive. The JavaScript standard\n\t           * itself needs to look at this: it should start\n\t           * providing access to strings as preformed UTF-8\n\t           * 8-bit unsigned value arrays.\n\t           */\n\t        md5blk = function (s) {\n\t            var md5blks = [],\n\t                i; /* Andy King said do it this way. */\n\t\n\t            for (i = 0; i < 64; i += 4) {\n\t                md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n\t            }\n\t            return md5blks;\n\t        },\n\t\n\t        md5blk_array = function (a) {\n\t            var md5blks = [],\n\t                i; /* Andy King said do it this way. */\n\t\n\t            for (i = 0; i < 64; i += 4) {\n\t                md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n\t            }\n\t            return md5blks;\n\t        },\n\t\n\t        md51 = function (s) {\n\t            var n = s.length,\n\t                state = [1732584193, -271733879, -1732584194, 271733878],\n\t                i,\n\t                length,\n\t                tail,\n\t                tmp,\n\t                lo,\n\t                hi;\n\t\n\t            for (i = 64; i <= n; i += 64) {\n\t                md5cycle(state, md5blk(s.substring(i - 64, i)));\n\t            }\n\t            s = s.substring(i - 64);\n\t            length = s.length;\n\t            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\t            for (i = 0; i < length; i += 1) {\n\t                tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n\t            }\n\t            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n\t            if (i > 55) {\n\t                md5cycle(state, tail);\n\t                for (i = 0; i < 16; i += 1) {\n\t                    tail[i] = 0;\n\t                }\n\t            }\n\t\n\t            // Beware that the final length might not fit in 32 bits so we take care of that\n\t            tmp = n * 8;\n\t            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n\t            lo = parseInt(tmp[2], 16);\n\t            hi = parseInt(tmp[1], 16) || 0;\n\t\n\t            tail[14] = lo;\n\t            tail[15] = hi;\n\t\n\t            md5cycle(state, tail);\n\t            return state;\n\t        },\n\t\n\t        md51_array = function (a) {\n\t            var n = a.length,\n\t                state = [1732584193, -271733879, -1732584194, 271733878],\n\t                i,\n\t                length,\n\t                tail,\n\t                tmp,\n\t                lo,\n\t                hi;\n\t\n\t            for (i = 64; i <= n; i += 64) {\n\t                md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n\t            }\n\t\n\t            // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n\t            // containing the last element of the parent array if the sub array specified starts\n\t            // beyond the length of the parent array - weird.\n\t            // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n\t            a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\t\n\t            length = a.length;\n\t            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\t            for (i = 0; i < length; i += 1) {\n\t                tail[i >> 2] |= a[i] << ((i % 4) << 3);\n\t            }\n\t\n\t            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n\t            if (i > 55) {\n\t                md5cycle(state, tail);\n\t                for (i = 0; i < 16; i += 1) {\n\t                    tail[i] = 0;\n\t                }\n\t            }\n\t\n\t            // Beware that the final length might not fit in 32 bits so we take care of that\n\t            tmp = n * 8;\n\t            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n\t            lo = parseInt(tmp[2], 16);\n\t            hi = parseInt(tmp[1], 16) || 0;\n\t\n\t            tail[14] = lo;\n\t            tail[15] = hi;\n\t\n\t            md5cycle(state, tail);\n\t\n\t            return state;\n\t        },\n\t\n\t        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'],\n\t\n\t        rhex = function (n) {\n\t            var s = '',\n\t                j;\n\t            for (j = 0; j < 4; j += 1) {\n\t                s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n\t            }\n\t            return s;\n\t        },\n\t\n\t        hex = function (x) {\n\t            var i;\n\t            for (i = 0; i < x.length; i += 1) {\n\t                x[i] = rhex(x[i]);\n\t            }\n\t            return x.join('');\n\t        },\n\t\n\t        md5 = function (s) {\n\t            return hex(md51(s));\n\t        },\n\t\n\t\n\t\n\t        ////////////////////////////////////////////////////////////////////////////\n\t\n\t        /**\n\t         * SparkMD5 OOP implementation.\n\t         *\n\t         * Use this class to perform an incremental md5, otherwise use the\n\t         * static methods instead.\n\t         */\n\t        SparkMD5 = function () {\n\t            // call reset to init the instance\n\t            this.reset();\n\t        };\n\t\n\t\n\t        // In some cases the fast add32 function cannot be used..\n\t        if (md5('hello') !== '5d41402abc4b2a76b9719d911017c592') {\n\t            add32 = function (x, y) {\n\t                var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n\t                    msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\t                return (msw << 16) | (lsw & 0xFFFF);\n\t            };\n\t        }\n\t\n\t\n\t        /**\n\t         * Appends a string.\n\t         * A conversion will be applied if an utf8 string is detected.\n\t         *\n\t         * @param {String} str The string to be appended\n\t         *\n\t         * @return {SparkMD5} The instance itself\n\t         */\n\t        SparkMD5.prototype.append = function (str) {\n\t            // converts the string to utf8 bytes if necessary\n\t            if (/[\\u0080-\\uFFFF]/.test(str)) {\n\t                str = unescape(encodeURIComponent(str));\n\t            }\n\t\n\t            // then append as binary\n\t            this.appendBinary(str);\n\t\n\t            return this;\n\t        };\n\t\n\t        /**\n\t         * Appends a binary string.\n\t         *\n\t         * @param {String} contents The binary string to be appended\n\t         *\n\t         * @return {SparkMD5} The instance itself\n\t         */\n\t        SparkMD5.prototype.appendBinary = function (contents) {\n\t            this._buff += contents;\n\t            this._length += contents.length;\n\t\n\t            var length = this._buff.length,\n\t                i;\n\t\n\t            for (i = 64; i <= length; i += 64) {\n\t                md5cycle(this._state, md5blk(this._buff.substring(i - 64, i)));\n\t            }\n\t\n\t            this._buff = this._buff.substr(i - 64);\n\t\n\t            return this;\n\t        };\n\t\n\t        /**\n\t         * Finishes the incremental computation, reseting the internal state and\n\t         * returning the result.\n\t         * Use the raw parameter to obtain the raw result instead of the hex one.\n\t         *\n\t         * @param {Boolean} raw True to get the raw result, false to get the hex result\n\t         *\n\t         * @return {String|Array} The result\n\t         */\n\t        SparkMD5.prototype.end = function (raw) {\n\t            var buff = this._buff,\n\t                length = buff.length,\n\t                i,\n\t                tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t                ret;\n\t\n\t            for (i = 0; i < length; i += 1) {\n\t                tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n\t            }\n\t\n\t            this._finish(tail, length);\n\t            ret = raw ? this._state : hex(this._state);\n\t\n\t            this.reset();\n\t\n\t            return ret;\n\t        };\n\t\n\t        /**\n\t         * Finish the final calculation based on the tail.\n\t         *\n\t         * @param {Array}  tail   The tail (will be modified)\n\t         * @param {Number} length The length of the remaining buffer\n\t         */\n\t        SparkMD5.prototype._finish = function (tail, length) {\n\t            var i = length,\n\t                tmp,\n\t                lo,\n\t                hi;\n\t\n\t            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n\t            if (i > 55) {\n\t                md5cycle(this._state, tail);\n\t                for (i = 0; i < 16; i += 1) {\n\t                    tail[i] = 0;\n\t                }\n\t            }\n\t\n\t            // Do the final computation based on the tail and length\n\t            // Beware that the final length may not fit in 32 bits so we take care of that\n\t            tmp = this._length * 8;\n\t            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n\t            lo = parseInt(tmp[2], 16);\n\t            hi = parseInt(tmp[1], 16) || 0;\n\t\n\t            tail[14] = lo;\n\t            tail[15] = hi;\n\t            md5cycle(this._state, tail);\n\t        };\n\t\n\t        /**\n\t         * Resets the internal state of the computation.\n\t         *\n\t         * @return {SparkMD5} The instance itself\n\t         */\n\t        SparkMD5.prototype.reset = function () {\n\t            this._buff = \"\";\n\t            this._length = 0;\n\t            this._state = [1732584193, -271733879, -1732584194, 271733878];\n\t\n\t            return this;\n\t        };\n\t\n\t        /**\n\t         * Releases memory used by the incremental buffer and other aditional\n\t         * resources. If you plan to use the instance again, use reset instead.\n\t         */\n\t        SparkMD5.prototype.destroy = function () {\n\t            delete this._state;\n\t            delete this._buff;\n\t            delete this._length;\n\t        };\n\t\n\t\n\t        /**\n\t         * Performs the md5 hash on a string.\n\t         * A conversion will be applied if utf8 string is detected.\n\t         *\n\t         * @param {String}  str The string\n\t         * @param {Boolean} raw True to get the raw result, false to get the hex result\n\t         *\n\t         * @return {String|Array} The result\n\t         */\n\t        SparkMD5.hash = function (str, raw) {\n\t            // converts the string to utf8 bytes if necessary\n\t            if (/[\\u0080-\\uFFFF]/.test(str)) {\n\t                str = unescape(encodeURIComponent(str));\n\t            }\n\t\n\t            var hash = md51(str);\n\t\n\t            return raw ? hash : hex(hash);\n\t        };\n\t\n\t        /**\n\t         * Performs the md5 hash on a binary string.\n\t         *\n\t         * @param {String}  content The binary string\n\t         * @param {Boolean} raw     True to get the raw result, false to get the hex result\n\t         *\n\t         * @return {String|Array} The result\n\t         */\n\t        SparkMD5.hashBinary = function (content, raw) {\n\t            var hash = md51(content);\n\t\n\t            return raw ? hash : hex(hash);\n\t        };\n\t\n\t        /**\n\t         * SparkMD5 OOP implementation for array buffers.\n\t         *\n\t         * Use this class to perform an incremental md5 ONLY for array buffers.\n\t         */\n\t        SparkMD5.ArrayBuffer = function () {\n\t            // call reset to init the instance\n\t            this.reset();\n\t        };\n\t\n\t        ////////////////////////////////////////////////////////////////////////////\n\t\n\t        /**\n\t         * Appends an array buffer.\n\t         *\n\t         * @param {ArrayBuffer} arr The array to be appended\n\t         *\n\t         * @return {SparkMD5.ArrayBuffer} The instance itself\n\t         */\n\t        SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n\t            // TODO: we could avoid the concatenation here but the algorithm would be more complex\n\t            //       if you find yourself needing extra performance, please make a PR.\n\t            var buff = this._concatArrayBuffer(this._buff, arr),\n\t                length = buff.length,\n\t                i;\n\t\n\t            this._length += arr.byteLength;\n\t\n\t            for (i = 64; i <= length; i += 64) {\n\t                md5cycle(this._state, md5blk_array(buff.subarray(i - 64, i)));\n\t            }\n\t\n\t            // Avoids IE10 weirdness (documented above)\n\t            this._buff = (i - 64) < length ? buff.subarray(i - 64) : new Uint8Array(0);\n\t\n\t            return this;\n\t        };\n\t\n\t        /**\n\t         * Finishes the incremental computation, reseting the internal state and\n\t         * returning the result.\n\t         * Use the raw parameter to obtain the raw result instead of the hex one.\n\t         *\n\t         * @param {Boolean} raw True to get the raw result, false to get the hex result\n\t         *\n\t         * @return {String|Array} The result\n\t         */\n\t        SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n\t            var buff = this._buff,\n\t                length = buff.length,\n\t                tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t                i,\n\t                ret;\n\t\n\t            for (i = 0; i < length; i += 1) {\n\t                tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n\t            }\n\t\n\t            this._finish(tail, length);\n\t            ret = raw ? this._state : hex(this._state);\n\t\n\t            this.reset();\n\t\n\t            return ret;\n\t        };\n\t\n\t        SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\t\n\t        /**\n\t         * Resets the internal state of the computation.\n\t         *\n\t         * @return {SparkMD5.ArrayBuffer} The instance itself\n\t         */\n\t        SparkMD5.ArrayBuffer.prototype.reset = function () {\n\t            this._buff = new Uint8Array(0);\n\t            this._length = 0;\n\t            this._state = [1732584193, -271733879, -1732584194, 271733878];\n\t\n\t            return this;\n\t        };\n\t\n\t        /**\n\t         * Releases memory used by the incremental buffer and other aditional\n\t         * resources. If you plan to use the instance again, use reset instead.\n\t         */\n\t        SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\t\n\t        /**\n\t         * Concats two array buffers, returning a new one.\n\t         *\n\t         * @param  {ArrayBuffer} first  The first array buffer\n\t         * @param  {ArrayBuffer} second The second array buffer\n\t         *\n\t         * @return {ArrayBuffer} The new array buffer\n\t         */\n\t        SparkMD5.ArrayBuffer.prototype._concatArrayBuffer = function (first, second) {\n\t            var firstLength = first.length,\n\t                result = new Uint8Array(firstLength + second.byteLength);\n\t\n\t            result.set(first);\n\t            result.set(new Uint8Array(second), firstLength);\n\t\n\t            return result;\n\t        };\n\t\n\t        /**\n\t         * Performs the md5 hash on an array buffer.\n\t         *\n\t         * @param {ArrayBuffer} arr The array buffer\n\t         * @param {Boolean}     raw True to get the raw result, false to get the hex result\n\t         *\n\t         * @return {String|Array} The result\n\t         */\n\t        SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n\t            var hash = md51_array(new Uint8Array(arr));\n\t\n\t            return raw ? hash : hex(hash);\n\t        };\n\t\n\t        return FlashRuntime.register( 'Md5', {\n\t            init: function() {\n\t                // do nothing.\n\t            },\n\t\n\t            loadFromBlob: function( file ) {\n\t                var blob = file.getSource(),\n\t                    chunkSize = 2 * 1024 * 1024,\n\t                    chunks = Math.ceil( blob.size / chunkSize ),\n\t                    chunk = 0,\n\t                    owner = this.owner,\n\t                    spark = new SparkMD5.ArrayBuffer(),\n\t                    me = this,\n\t                    blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice,\n\t                    loadNext, fr;\n\t\n\t                fr = new FileReader();\n\t\n\t                loadNext = function() {\n\t                    var start, end;\n\t\n\t                    start = chunk * chunkSize;\n\t                    end = Math.min( start + chunkSize, blob.size );\n\t\n\t                    fr.onload = function( e ) {\n\t                        spark.append( e.target.result );\n\t                        owner.trigger( 'progress', {\n\t                            total: file.size,\n\t                            loaded: end\n\t                        });\n\t                    };\n\t\n\t                    fr.onloadend = function() {\n\t                        fr.onloadend = fr.onload = null;\n\t\n\t                        if ( ++chunk < chunks ) {\n\t                            setTimeout( loadNext, 1 );\n\t                        } else {\n\t                            setTimeout(function(){\n\t                                owner.trigger('load');\n\t                                me.result = spark.end();\n\t                                loadNext = file = blob = spark = null;\n\t                                owner.trigger('complete');\n\t                            }, 50 );\n\t                        }\n\t                    };\n\t\n\t                    fr.readAsArrayBuffer( blobSlice.call( blob, start, end ) );\n\t                };\n\t\n\t                loadNext();\n\t            },\n\t\n\t            getResult: function() {\n\t                return this.result;\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview FlashRuntime\n\t     */\n\t    define('runtime/flash/runtime',[\n\t        'base',\n\t        'runtime/runtime',\n\t        'runtime/compbase'\n\t    ], function( Base, Runtime, CompBase ) {\n\t\n\t        var $ = Base.$,\n\t            type = 'flash',\n\t            components = {};\n\t\n\t\n\t        function getFlashVersion() {\n\t            var version;\n\t\n\t            try {\n\t                version = navigator.plugins[ 'Shockwave Flash' ];\n\t                version = version.description;\n\t            } catch ( ex ) {\n\t                try {\n\t                    version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash')\n\t                            .GetVariable('$version');\n\t                } catch ( ex2 ) {\n\t                    version = '0.0';\n\t                }\n\t            }\n\t            version = version.match( /\\d+/g );\n\t            return parseFloat( version[ 0 ] + '.' + version[ 1 ], 10 );\n\t        }\n\t\n\t        function FlashRuntime() {\n\t            var pool = {},\n\t                clients = {},\n\t                destroy = this.destroy,\n\t                me = this,\n\t                jsreciver = Base.guid('webuploader_');\n\t\n\t            Runtime.apply( me, arguments );\n\t            me.type = type;\n\t\n\t\n\t            // RuntimeClient\n\t            me.exec = function( comp, fn/*, args...*/ ) {\n\t                var client = this,\n\t                    uid = client.uid,\n\t                    args = Base.slice( arguments, 2 ),\n\t                    instance;\n\t\n\t                clients[ uid ] = client;\n\t\n\t                if ( components[ comp ] ) {\n\t                    if ( !pool[ uid ] ) {\n\t                        pool[ uid ] = new components[ comp ]( client, me );\n\t                    }\n\t\n\t                    instance = pool[ uid ];\n\t\n\t                    if ( instance[ fn ] ) {\n\t                        return instance[ fn ].apply( instance, args );\n\t                    }\n\t                }\n\t\n\t                return me.flashExec.apply( client, arguments );\n\t            };\n\t\n\t            function handler( evt, obj ) {\n\t                var type = evt.type || evt,\n\t                    parts, uid;\n\t\n\t                parts = type.split('::');\n\t                uid = parts[ 0 ];\n\t                type = parts[ 1 ];\n\t\n\t                // console.log.apply( console, arguments );\n\t\n\t                if ( type === 'Ready' && uid === me.uid ) {\n\t                    me.trigger('ready');\n\t                } else if ( clients[ uid ] ) {\n\t                    clients[ uid ].trigger( type.toLowerCase(), evt, obj );\n\t                }\n\t\n\t                // Base.log( evt, obj );\n\t            }\n\t\n\t            // flash\n\t            window[ jsreciver ] = function() {\n\t                var args = arguments;\n\t\n\t                // \n\t                setTimeout(function() {\n\t                    handler.apply( null, args );\n\t                }, 1 );\n\t            };\n\t\n\t            this.jsreciver = jsreciver;\n\t\n\t            this.destroy = function() {\n\t                // @todo \n\t                return destroy && destroy.apply( this, arguments );\n\t            };\n\t\n\t            this.flashExec = function( comp, fn ) {\n\t                var flash = me.getFlash(),\n\t                    args = Base.slice( arguments, 2 );\n\t\n\t                return flash.exec( this.uid, comp, fn, args );\n\t            };\n\t\n\t            // @todo\n\t        }\n\t\n\t        Base.inherits( Runtime, {\n\t            constructor: FlashRuntime,\n\t\n\t            init: function() {\n\t                var container = this.getContainer(),\n\t                    opts = this.options,\n\t                    html;\n\t\n\t                // if not the minimal height, shims are not initialized\n\t                // in older browsers (e.g FF3.6, IE6,7,8, Safari 4.0,5.0, etc)\n\t                container.css({\n\t                    position: 'absolute',\n\t                    top: '-8px',\n\t                    left: '-8px',\n\t                    width: '9px',\n\t                    height: '9px',\n\t                    overflow: 'hidden'\n\t                });\n\t\n\t                // insert flash object\n\t                html = '<object id=\"' + this.uid + '\" type=\"application/' +\n\t                        'x-shockwave-flash\" data=\"' +  opts.swf + '\" ';\n\t\n\t                if ( Base.browser.ie ) {\n\t                    html += 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ';\n\t                }\n\t\n\t                html += 'width=\"100%\" height=\"100%\" style=\"outline:0\">'  +\n\t                    '<param name=\"movie\" value=\"' + opts.swf + '\" />' +\n\t                    '<param name=\"flashvars\" value=\"uid=' + this.uid +\n\t                    '&jsreciver=' + this.jsreciver + '\" />' +\n\t                    '<param name=\"wmode\" value=\"transparent\" />' +\n\t                    '<param name=\"allowscriptaccess\" value=\"always\" />' +\n\t                '</object>';\n\t\n\t                container.html( html );\n\t            },\n\t\n\t            getFlash: function() {\n\t                if ( this._flash ) {\n\t                    return this._flash;\n\t                }\n\t\n\t                this._flash = $( '#' + this.uid ).get( 0 );\n\t                return this._flash;\n\t            }\n\t\n\t        });\n\t\n\t        FlashRuntime.register = function( name, component ) {\n\t            component = components[ name ] = Base.inherits( CompBase, $.extend({\n\t\n\t                // @todo fix this later\n\t                flashExec: function() {\n\t                    var owner = this.owner,\n\t                        runtime = this.getRuntime();\n\t\n\t                    return runtime.flashExec.apply( owner, arguments );\n\t                }\n\t            }, component ) );\n\t\n\t            return component;\n\t        };\n\t\n\t        if ( getFlashVersion() >= 11.4 ) {\n\t            Runtime.addRuntime( type, FlashRuntime );\n\t        }\n\t\n\t        return FlashRuntime;\n\t    });\n\t    /**\n\t     * @fileOverview FilePicker\n\t     */\n\t    define('runtime/flash/filepicker',[\n\t        'base',\n\t        'runtime/flash/runtime'\n\t    ], function( Base, FlashRuntime ) {\n\t        var $ = Base.$;\n\t\n\t        return FlashRuntime.register( 'FilePicker', {\n\t            init: function( opts ) {\n\t                var copy = $.extend({}, opts ),\n\t                    len, i;\n\t\n\t                // Flashtitleflashbug.\n\t                len = copy.accept && copy.accept.length;\n\t                for (  i = 0; i < len; i++ ) {\n\t                    if ( !copy.accept[ i ].title ) {\n\t                        copy.accept[ i ].title = 'Files';\n\t                    }\n\t                }\n\t\n\t                delete copy.button;\n\t                delete copy.id;\n\t                delete copy.container;\n\t\n\t                this.flashExec( 'FilePicker', 'init', copy );\n\t            },\n\t\n\t            destroy: function() {\n\t                this.flashExec( 'FilePicker', 'destroy' );\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('runtime/flash/image',[\n\t        'runtime/flash/runtime'\n\t    ], function( FlashRuntime ) {\n\t\n\t        return FlashRuntime.register( 'Image', {\n\t            // init: function( options ) {\n\t            //     var owner = this.owner;\n\t\n\t            //     this.flashExec( 'Image', 'init', options );\n\t            //     owner.on( 'load', function() {\n\t            //         debugger;\n\t            //     });\n\t            // },\n\t\n\t            loadFromBlob: function( blob ) {\n\t                var owner = this.owner;\n\t\n\t                owner.info() && this.flashExec( 'Image', 'info', owner.info() );\n\t                owner.meta() && this.flashExec( 'Image', 'meta', owner.meta() );\n\t\n\t                this.flashExec( 'Image', 'loadFromBlob', blob.uid );\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview  Transport flash\n\t     */\n\t    define('runtime/flash/transport',[\n\t        'base',\n\t        'runtime/flash/runtime',\n\t        'runtime/client'\n\t    ], function( Base, FlashRuntime, RuntimeClient ) {\n\t        var $ = Base.$;\n\t\n\t        return FlashRuntime.register( 'Transport', {\n\t            init: function() {\n\t                this._status = 0;\n\t                this._response = null;\n\t                this._responseJson = null;\n\t            },\n\t\n\t            send: function() {\n\t                var owner = this.owner,\n\t                    opts = this.options,\n\t                    xhr = this._initAjax(),\n\t                    blob = owner._blob,\n\t                    server = opts.server,\n\t                    binary;\n\t\n\t                xhr.connectRuntime( blob.ruid );\n\t\n\t                if ( opts.sendAsBinary ) {\n\t                    server += (/\\?/.test( server ) ? '&' : '?') +\n\t                            $.param( owner._formData );\n\t\n\t                    binary = blob.uid;\n\t                } else {\n\t                    $.each( owner._formData, function( k, v ) {\n\t                        xhr.exec( 'append', k, v );\n\t                    });\n\t\n\t                    xhr.exec( 'appendBlob', opts.fileVal, blob.uid,\n\t                            opts.filename || owner._formData.name || '' );\n\t                }\n\t\n\t                this._setRequestHeader( xhr, opts.headers );\n\t                xhr.exec( 'send', {\n\t                    method: opts.method,\n\t                    url: server,\n\t                    forceURLStream: opts.forceURLStream,\n\t                    mimeType: 'application/octet-stream',\n\t                }, binary );\n\t            },\n\t\n\t            getStatus: function() {\n\t                return this._status;\n\t            },\n\t\n\t            getResponse: function() {\n\t                return this._response || '';\n\t            },\n\t\n\t            getResponseAsJson: function() {\n\t                return this._responseJson;\n\t            },\n\t\n\t            abort: function() {\n\t                var xhr = this._xhr;\n\t\n\t                if ( xhr ) {\n\t                    xhr.exec('abort');\n\t                    xhr.destroy();\n\t                    this._xhr = xhr = null;\n\t                }\n\t            },\n\t\n\t            destroy: function() {\n\t                this.abort();\n\t            },\n\t\n\t            _initAjax: function() {\n\t                var me = this,\n\t                    xhr = new RuntimeClient('XMLHttpRequest');\n\t\n\t                xhr.on( 'uploadprogress progress', function( e ) {\n\t                    var percent = e.loaded / e.total;\n\t                    percent = Math.min( 1, Math.max( 0, percent ) );\n\t                    return me.trigger( 'progress', percent );\n\t                });\n\t\n\t                xhr.on( 'load', function() {\n\t                    var status = xhr.exec('getStatus'),\n\t                        readBody = false,\n\t                        err = '',\n\t                        p;\n\t\n\t                    xhr.off();\n\t                    me._xhr = null;\n\t\n\t                    if ( status >= 200 && status < 300 ) {\n\t                        readBody = true;\n\t                    } else if ( status >= 500 && status < 600 ) {\n\t                        readBody = true;\n\t                        err = 'server';\n\t                    } else {\n\t                        err = 'http';\n\t                    }\n\t\n\t                    if ( readBody ) {\n\t                        me._response = xhr.exec('getResponse');\n\t                        me._response = decodeURIComponent( me._response );\n\t\n\t                        // flash  bug,  js \n\t                        // try {\n\t                        //     me._responseJson = xhr.exec('getResponseAsJson');\n\t                        // } catch ( error ) {\n\t\n\t                        p = window.JSON && window.JSON.parse || function( s ) {\n\t                            try {\n\t                                return new Function('return ' + s).call();\n\t                            } catch ( err ) {\n\t                                return {};\n\t                            }\n\t                        };\n\t                        me._responseJson  = me._response ? p(me._response) : {};\n\t\n\t                        // }\n\t                    }\n\t\n\t                    xhr.destroy();\n\t                    xhr = null;\n\t\n\t                    return err ? me.trigger( 'error', err ) : me.trigger('load');\n\t                });\n\t\n\t                xhr.on( 'error', function() {\n\t                    xhr.off();\n\t                    me._xhr = null;\n\t                    me.trigger( 'error', 'http' );\n\t                });\n\t\n\t                me._xhr = xhr;\n\t                return xhr;\n\t            },\n\t\n\t            _setRequestHeader: function( xhr, headers ) {\n\t                $.each( headers, function( key, val ) {\n\t                    xhr.exec( 'setRequestHeader', key, val );\n\t                });\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview Blob Html\n\t     */\n\t    define('runtime/flash/blob',[\n\t        'runtime/flash/runtime',\n\t        'lib/blob'\n\t    ], function( FlashRuntime, Blob ) {\n\t\n\t        return FlashRuntime.register( 'Blob', {\n\t            slice: function( start, end ) {\n\t                var blob = this.flashExec( 'Blob', 'slice', start, end );\n\t\n\t                return new Blob( blob.uid, blob );\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview  Md5 flash\n\t     */\n\t    define('runtime/flash/md5',[\n\t        'runtime/flash/runtime'\n\t    ], function( FlashRuntime ) {\n\t\n\t        return FlashRuntime.register( 'Md5', {\n\t            init: function() {\n\t                // do nothing.\n\t            },\n\t\n\t            loadFromBlob: function( blob ) {\n\t                return this.flashExec( 'Md5', 'loadFromBlob', blob.uid );\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview \n\t     */\n\t    define('preset/all',[\n\t        'base',\n\t\n\t        // widgets\n\t        'widgets/filednd',\n\t        'widgets/filepaste',\n\t        'widgets/filepicker',\n\t        'widgets/image',\n\t        'widgets/queue',\n\t        'widgets/runtime',\n\t        'widgets/upload',\n\t        'widgets/validator',\n\t        'widgets/md5',\n\t\n\t        // runtimes\n\t        // html5\n\t        'runtime/html5/blob',\n\t        'runtime/html5/dnd',\n\t        'runtime/html5/filepaste',\n\t        'runtime/html5/filepicker',\n\t        'runtime/html5/imagemeta/exif',\n\t        'runtime/html5/androidpatch',\n\t        'runtime/html5/image',\n\t        'runtime/html5/transport',\n\t        'runtime/html5/md5',\n\t\n\t        // flash\n\t        'runtime/flash/filepicker',\n\t        'runtime/flash/image',\n\t        'runtime/flash/transport',\n\t        'runtime/flash/blob',\n\t        'runtime/flash/md5'\n\t    ], function( Base ) {\n\t        return Base;\n\t    });\n\t    /**\n\t     * @fileOverview  webuploader \n\t     *\n\t     *  log \n\t     *\n\t     *  options.disableWidgets \n\t     *\n\t     * \n\t     * WebUploader.create({\n\t     *     ...\n\t     *\n\t     *     disableWidgets: 'log',\n\t     *\n\t     *     ...\n\t     * })\n\t     */\n\t    define('widgets/log',[\n\t        'base',\n\t        'uploader',\n\t        'widgets/widget'\n\t    ], function( Base, Uploader ) {\n\t        var $ = Base.$,\n\t            logUrl = ' http://static.tieba.baidu.com/tb/pms/img/st.gif??',\n\t            product = (location.hostname || location.host || 'protected').toLowerCase(),\n\t\n\t            //  baidu \n\t            enable = product && /baidu/i.exec(product),\n\t            base;\n\t\n\t        if (!enable) {\n\t            return;\n\t        }\n\t\n\t        base = {\n\t            dv: 3,\n\t            master: 'webuploader',\n\t            online: /test/.exec(product) ? 0 : 1,\n\t            module: '',\n\t            product: product,\n\t            type: 0\n\t        };\n\t\n\t        function send(data) {\n\t            var obj = $.extend({}, base, data),\n\t                url = logUrl.replace(/^(.*)\\?/, '$1' + $.param( obj )),\n\t                image = new Image();\n\t\n\t            image.src = url;\n\t        }\n\t\n\t        return Uploader.register({\n\t            name: 'log',\n\t\n\t            init: function() {\n\t                var owner = this.owner,\n\t                    count = 0,\n\t                    size = 0;\n\t\n\t                owner\n\t                    .on('error', function(code) {\n\t                        send({\n\t                            type: 2,\n\t                            c_error_code: code\n\t                        });\n\t                    })\n\t                    .on('uploadError', function(file, reason) {\n\t                        send({\n\t                            type: 2,\n\t                            c_error_code: 'UPLOAD_ERROR',\n\t                            c_reason: '' + reason\n\t                        });\n\t                    })\n\t                    .on('uploadComplete', function(file) {\n\t                        count++;\n\t                        size += file.size;\n\t                    }).\n\t                    on('uploadFinished', function() {\n\t                        send({\n\t                            c_count: count,\n\t                            c_size: size\n\t                        });\n\t                        count = size = 0;\n\t                    });\n\t\n\t                send({\n\t                    c_usage: 1\n\t                });\n\t            }\n\t        });\n\t    });\n\t    /**\n\t     * @fileOverview Uploader\n\t     */\n\t    define('webuploader',[\n\t        'preset/all',\n\t        'widgets/log'\n\t    ], function( preset ) {\n\t        return preset;\n\t    });\n\t    return require('webuploader');\n\t});\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 89:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t * str\n\t */\n\t\n\tvar trim = function trim(str) {\n\t  return str.replace(/(^[ \\t\\n\\r]+)|([ \\t\\n\\r]+$)/g, '');\n\t};\n\t\n\tmodule.exports = trim;\n\n/***/ }),\n\n/***/ 180:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar aCity = {\n\t    11: \"\",\n\t    12: \"\",\n\t    13: \"\",\n\t    14: \"\",\n\t    15: \"\",\n\t    21: \"\",\n\t    22: \"\",\n\t    23: \"\",\n\t    31: \"\",\n\t    32: \"\",\n\t    33: \"\",\n\t    34: \"\",\n\t    35: \"\",\n\t    36: \"\",\n\t    37: \"\",\n\t    41: \"\",\n\t    42: \"\",\n\t    43: \"\",\n\t    44: \"\",\n\t    45: \"\",\n\t    46: \"\",\n\t    50: \"\",\n\t    51: \"\",\n\t    52: \"\",\n\t    53: \"\",\n\t    54: \"\",\n\t    61: \"\",\n\t    62: \"\",\n\t    63: \"\",\n\t    64: \"\",\n\t    65: \"\",\n\t    71: \"\",\n\t    81: \"\",\n\t    82: \"\",\n\t    91: \"\"\n\t};\n\tmodule.exports = function (sId) {\n\t    var iSum = 0;\n\t    var sBirthday = \"\";\n\t    if (!/^\\d{17}(\\d|x)$/i.test(sId)) return {\n\t        success: false,\n\t        msg: \"\"\n\t    };\n\t    sId = sId.replace(/x$/i, \"a\");\n\t    if (aCity[parseInt(sId.substr(0, 2))] == null) return {\n\t        success: false,\n\t        msg: \"\"\n\t    };\n\t    sBirthday = sId.substr(6, 4) + \"-\" + Number(sId.substr(10, 2)) + \"-\" + Number(sId.substr(12, 2));\n\t    var d = new Date(sBirthday.replace(/-/g, \"/\"));\n\t    if (sBirthday != d.getFullYear() + \"-\" + (d.getMonth() + 1) + \"-\" + d.getDate()) return {\n\t        success: false,\n\t        msg: \"\"\n\t    };\n\t    for (var i = 17; i >= 0; i--) {\n\t        iSum += Math.pow(2, i) % 11 * parseInt(sId.charAt(17 - i), 11);\n\t    }if (iSum % 11 != 1) return {\n\t        success: false,\n\t        msg: \"\"\n\t    };\n\t    // aCity[parseInt(sId.substr(0,2))]+\",\"+sBirthday+\",\"+(sId.substr(16,1)%2?\"\":\"\");\n\t    return {\n\t        success: true\n\t    };\n\t};\n\n/***/ }),\n\n/***/ 181:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {'use strict';\n\t\n\tvar byteLen = __webpack_require__(73);\n\tvar moduleTrim = __webpack_require__(89);\n\tvar regExp = __webpack_require__(182);\n\tvar fn_checkId = __webpack_require__(180);\n\tvar errorMsg = __webpack_require__(84).masterApply;\n\t\n\tmodule.exports = {\n\t\tcheckName: function checkName(node) {\n\t\t\tvar val = $(node).val();\n\t\t\tif (byteLen(val) < 2 || byteLen(val) > 20) return {\n\t\t\t\tsuccess: false,\n\t\t\t\tmsg: errorMsg.nameLength\n\t\t\t};\n\t\t\tif (!regExp.checkName.test(val)) return {\n\t\t\t\tsuccess: false,\n\t\t\t\tmsg: errorMsg.nameType\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tsuccess: true\n\t\t\t};\n\t\t},\n\t\tcheckIdCard: function checkIdCard(node) {\n\t\t\tvar val = $(node).val();\n\t\t\tif (moduleTrim(val) === \"\") return false;\n\t\t\treturn fn_checkId(val);\n\t\t},\n\t\tcheckSummary: function checkSummary(node) {\n\t\t\tvar val = $(node).val();\n\t\t\tif (val.length < 2 || val.length > 100) return {\n\t\t\t\tsuccess: false,\n\t\t\t\tmsg: errorMsg.summary\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tsuccess: true\n\t\t\t};\n\t\t},\n\t\tcheckupload: function checkupload() {\n\t\t\tvar upload = $('[data-node=uploader]');\n\t\t\tvar pass = 0;\n\t\t\tupload.each(function () {\n\t\t\t\tvar $this = $(this);\n\t\t\t\tvar webPick = $this.find('.webuploader-pick');\n\t\t\t\tif (webPick.find('img').attr('src') === undefined) {\n\t\t\t\t\t$this.parent().addClass('dr-form-error');\n\t\t\t\t\t$this.parent().find('.error-txt').html(errorMsg.noUpload);\n\t\t\t\t\tpass++;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn pass > 0 ? false : true;\n\t\t}\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 182:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = {\n\t\t\t// \n\t\t\tcheckName: /^[\\u4E00-\\u9FA5A-Za-z]+$/\n\t};\n\n/***/ }),\n\n/***/ 183:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {'use strict';\n\t\n\tvar fetch = __webpack_require__(21);\n\tvar url = __webpack_require__(24);\n\tvar $form = $('[data-node=form]');\n\t// var $categoryLi = $form.find('[data-node=categoryLi]');\n\tvar $categoryForm = $form.find('[data-node=categoryForm]');\n\tvar $categoryActive = $form.find('[data-node=categoryActive]');\n\tvar $categoryTxt = $form.find('[data-node=categoryTxt]');\n\tvar $categoryList = $form.find('[data-node=categoryList]');\n\tvar $categoryTip = $form.find('[data-node=categoryTip]');\n\tvar $document = $(document);\n\t\n\tvar listData;\n\t\n\tvar getChooseData = function getChooseData(callback) {\n\t    callback = callback || function () {};\n\t    var $categoryList = $form.find('[data-node=categoryList]');\n\t    $categoryList.children().remove();\n\t    fetch.get(url.get('getMasterTypeList')).done(function (data) {\n\t        listData = data.data.expertCategories;\n\t        $(listData).each(function () {\n\t            $categoryList.append('<a href=\"javascript:;\" data-id=\"' + this.id + '\">' + this.name + '</a>');\n\t        });\n\t        callback();\n\t    }).fail(function () {\n\t        alert(\" \");\n\t    });\n\t};\n\t\n\tvar init = function init() {\n\t    $categoryActive.on('click', function () {\n\t        if (!listData) {\n\t            getChooseData();\n\t        }\n\t        $categoryActive.addClass('active');\n\t        $categoryList.css('display', 'block');\n\t    });\n\t    $categoryList.on('click', 'a', function (event) {\n\t        $categoryActive.removeClass('active');\n\t        $categoryList.css('display', 'none');\n\t        $categoryTxt.attr('data-id', $(event.target).attr('data-id')).html(event.target.innerHTML);\n\t        $categoryTip.html('');\n\t    });\n\t    //\n\t    $document.on('click', function (event) {\n\t        if (!$categoryForm.is(event.target) && $categoryForm.has(event.target).length === 0) {\n\t            $categoryList.css('display', 'none');\n\t            $categoryActive.removeClass('active');\n\t        }\n\t    });\n\t};\n\t\n\tmodule.exports = {\n\t    init: init,\n\t    getChooseData: getChooseData\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 184:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($_CONFIG, $) {'use strict';\n\t\n\tvar webUploader = __webpack_require__(86);\n\tvar errorMsg = __webpack_require__(84).upload;\n\tvar $rt;\n\tvar init = function init() {\n\t    // var uploaderNodeAttr = $('[data-node=uploader]');\n\t    var uploader = webUploader.create({\n\t        auto: true,\n\t        swf: $_CONFIG.imgpath + '/images/swf/Uploader.swf',\n\t        server: '/ajax/crop/crop_img',\n\t        fileVal: 'avatar_file',\n\t        threads: 1,\n\t        duplicate: true,\n\t        fileSingleSizeLimit: 4 * 1024 * 1024,\n\t        fileSizeLimit: 50 * 1024 * 1024,\n\t        pick: {\n\t            id: '[data-node=uploader]',\n\t            innerHTML: '<em data-node=\"icon\" class=\"iconn-50\"></em>'\n\t        },\n\t        accept: {\n\t            title: 'Images',\n\t            extensions: 'jpg,jpeg,png',\n\t            mimeTypes: 'image/*'\n\t        },\n\t        thumb: {\n\t            width: '100%',\n\t            height: '100%',\n\t            // type`image/jpeg`\n\t            quality: 70,\n\t            // false.\n\t            allowMagnify: false,\n\t            // \n\t            crop: false,\n\t            // \n\t            // \n\t            type: 'image/jpeg'\n\t        },\n\t        compress: {\n\t            // type`image/jpeg`\n\t            quality: 90,\n\t            // false.\n\t            allowMagnify: false,\n\t            // \n\t            crop: false,\n\t            // meta\n\t            preserveHeaders: true,\n\t            // \n\t            // \n\t            noCompressIfLarger: false,\n\t            // \n\t            compressSize: 0\n\t        }\n\t    });\n\t    uploader.onFileQueued = function (file) {\n\t        var html = '<li id=\"' + file.id + '\">' + '<div class=\"bar-upload-pic\"><span data-node=\"progress\"></span></div>' + '</li>';\n\t        $rt.prev().html(html);\n\t    };\n\t\n\t    var uploadError = function uploadError(msg) {\n\t        $rt.parents('[data-node=uli]').addClass('dr-form-error');\n\t        $rt.parent().eq(0).nextAll('[class=error-txt]').html(msg);\n\t    };\n\t\n\t    uploader.on('uploadSuccess', function (file, response) {\n\t        if (response.code === 200 && response.success) {\n\t            $rt.parents('[data-node=uli]').removeClass('dr-form-error');\n\t            $rt.prev().html('<img data-node=\"uploaderImg\" src=\"' + response.data[0] + '\" alt=\"\"><a href=\"javascript:;\" class=\"modify-mask\"><span class=\"mask-txt\" data-node=\"change\" data-ruid=\"' + file.source.ruid + '\"> </span></a>');\n\t            $rt.css({\n\t                'height': '20px',\n\t                'top': '60px'\n\t            });\n\t        } else {\n\t            $rt.prev().html('<em data-node=\"icon\" class=\"iconn-50\"></em>');\n\t            uploadError(errorMsg.uploadFaild);\n\t        }\n\t    });\n\t\n\t    uploader.on('beforeFileQueued', function (file) {\n\t        $rt = $('#rt_' + file.source.ruid);\n\t    });\n\t\n\t    uploader.on('error', function () {\n\t        uploadError(errorMsg.uploadError_Master);\n\t    });\n\t\n\t    uploader.on('uploadProgress', function (file, percentage) {\n\t        $('#' + file.id).find('[data-node=\"progress\"]').css('width', percentage * 100 + '%');\n\t    });\n\t    uploader.on('uploadError', function () {\n\t        $rt.prev().html('<em data-node=\"icon\" class=\"iconn-50\"></em>');\n\t        uploadError(errorMsg.uploadFaild);\n\t    });\n\t    callback();\n\t};\n\t\n\tvar check = function check() {\n\t    var uli = $('[data-node=uli]');\n\t    return uli.hasClass('dr-form-error') ? false : true;\n\t};\n\t\n\tvar callback = function callback(fn) {\n\t    var fun = fn || function () {};\n\t    fun();\n\t};\n\t\n\tmodule.exports = {\n\t    init: init,\n\t    check: check,\n\t    callback: callback\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3), __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 185:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($, $_CONFIG) {'use strict';\n\t\n\tvar byteLen = __webpack_require__(73);\n\t\n\tvar chooseCategory = __webpack_require__(183);\n\tvar upload = __webpack_require__(184);\n\t\n\tvar $form = $('[data-node=form]');\n\tvar $categoryList = $form.find('[data-node=categoryList]');\n\tvar $categoryTxt = $form.find('[data-node=categoryTxt]');\n\t\n\tvar $liName = $form.find('[data-node=liName]');\n\tvar $inputName = $liName.find('[data-node=inputName]');\n\tvar $markerName = $liName.find('[data-node=markerName]');\n\t\n\tvar $liId = $form.find('[data-node=liId]');\n\tvar $inputId = $liId.find('[data-node=inputId]');\n\tvar $markerId = $liId.find('[data-node=markerId]');\n\t\n\tvar $liSummary = $form.find('[data-node=liSummary]');\n\tvar $inputSummary = $liSummary.find('[data-node=inputSummary]');\n\tvar $numSummary = $liSummary.find('[data-node=numSummary]');\n\t\n\tif ($_CONFIG.applyFlag === 1) {\n\t    var backfillData = $_CONFIG.expertInfo;\n\t    // backfillData = {\n\t    //        \"auditFailReason\": \"123\",\n\t    //        \"auditOperator\": \"admin\",\n\t    //        \"auditStatus\": 1,//dataauditStatus=1\n\t    //        \"auditTime\": 1469419814000,\n\t    //        \"category\": {\n\t    //            \"id\": 36,\n\t    //            \"name\": \"\"\n\t    //        },\n\t    //        \"createTime\": 1469080394000,\n\t    //        \"expertType\": \"normal\",\n\t    //        \"idCardNo\": \"131155188602486244\",\n\t    //        \"idcardBackImageUrl\": \"https://i-pre.meixincdn.com/v1/img/T1At_TBT_T1RXrhCrK.jpg\",\n\t    //        \"idcardFrontImageUrl\": \"https://i-pre.meixincdn.com/v1/img/T1YzxTBgLT1RXrhCrK.jpg\",\n\t    //        \"idcardPersonImageUrl\": \"https://i-pre.meixincdn.com/v1/img/T1ZzxTBTdT1RXrhCrK.jpg\",\n\t    //        \"introduction\": \"dawdwadwadawdw\",\n\t    //        \"isExpert\": true,\n\t    //        \"realName\": \"\",\n\t    //        \"userId\": 767\n\t    //    }\n\t    chooseCategory.getChooseData(function () {\n\t        var listOptions = $categoryList.children('a');\n\t        $(listOptions).each(function () {\n\t            if (backfillData.category.id == $(this).attr('data-id')) {\n\t                return $categoryTxt.attr('data-id', $(this).attr('data-id')).html($(this).html());\n\t            }\n\t        });\n\t    });\n\t    $inputName.val(backfillData.realName);\n\t    $markerName.removeClass('hide');\n\t    $inputId.val(backfillData.idCardNo);\n\t    $markerId.removeClass('hide');\n\t    $inputSummary.val(backfillData.introduction);\n\t    $numSummary.html(byteLen($inputSummary.val()));\n\t    var imgs = [backfillData.idcardFrontImageUrl, backfillData.idcardBackImageUrl, backfillData.idcardPersonImageUrl];\n\t    var time = 0;\n\t    upload.callback(function () {\n\t        var t = setInterval(function () {\n\t            time++;\n\t            var $pick = $form.find('.webuploader-pick');\n\t            if ($pick.length === 3) {\n\t                clearInterval(t);\n\t                var $uploader = $form.find('[data-node=uploader]');\n\t                $uploader.each(function (i) {\n\t                    var ruid = $(this.childNodes[1]).attr('id').substring(3);\n\t                    $(this.childNodes[0]).html('<img data-node=\"uploaderImg\" src=\"' + imgs[i] + '\" alt=\"\"><a href=\"javascript:;\" class=\"modify-mask\"><span class=\"mask-txt\" data-node=\"change\" data-ruid=\"' + ruid + '\"> </span></a>');\n\t                });\n\t            } else if (time === 50) {\n\t                clearInterval(t);\n\t            }\n\t        }, 100);\n\t    });\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(3)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// masterApply.js","var byteLen = require('utils/byteLen');\nvar fetch = require(\"io/fetch\");\nvar url = require('io/url');\nvar truncate = require('utils/truncate');\nvar errorMsg = require(\"module/i18n\").masterApply;\n\nrequire('./checkIdCard');\nvar vilidate = require('./validate');\nvar chooseCategory = require('./chooseCategory');\nvar upload = require('./photoUpload');\nrequire('./dataBackfill');\n\nvar $form = $('[data-node=form]');\nvar $tipError = $form.find('[data-node=tipError]');\n\nvar $liName = $form.find('[data-node=liName]');\nvar $tipName = $liName.find('[data-node=tipTxt]');\nvar $inputName = $liName.find('[data-node=inputName]');\nvar $markerName = $liName.find('[data-node=markerName]');\n\nvar $liId = $form.find('[data-node=liId]');\nvar $inputId = $liId.find('[data-node=inputId]');\nvar $markerId = $liId.find('[data-node=markerId]');\nvar $tipId = $liId.find('[data-node=tipId]');\n\nvar $liCategory = $form.find('[data-node=categoryLi]');\nvar $tipCategory = $form.find('[data-node=categoryTip]');\nvar $textCategory = $form.find('[data-node=categoryTxt]');\n\nvar $liSummary = $form.find('[data-node=liSummary]');\nvar $inputSummary = $liSummary.find('[data-node=inputSummary]');\nvar $numSummary = $liSummary.find('[data-node=numSummary]');\nvar $tipSummary = $liSummary.find('[data-node=tipSummary]');\nvar inputInterval;\n\nvar $btnSubmit = $('[data-node=btnSubmit]');\nvar validSuccess = function($li, $marker) {\n    if ($li) $li.removeClass('dr-form-error');\n    if ($marker) $marker.removeClass('hide');\n};\n\nvar validFail = function($li, $marker, $tip, msg) {\n    if ($li) $li.addClass('dr-form-error');\n    if ($marker) $marker.addClass('hide');\n    if ($tip) $tip.html(msg);\n};\n\nvar publicTips = function(state, msg) {\n    msg = msg || '';\n    state = state || 'show';\n    if (state === 'show') {\n        $tipError.html(msg).removeClass('hide');\n    } else if (state === 'hide') {\n        $tipError.html(msg).addClass('hide');\n    }\n\n};\n\nvar blurTemplete = function(params) {\n    var defaultOptions = {\n        type: null,\n        $target: {},\n        $li: false,\n        $marker: false,\n        $tip: false,\n        msg: false\n    };\n    var options = $.extend({}, true, defaultOptions, params);\n    var result;\n    if (options.type === null) return alert(new Error(''));\n    switch (options.type) {\n        case 'name':\n            result = vilidate.checkName(options.$target);\n            break;\n        case 'id':\n            result = vilidate.checkIdCard(options.$target);\n            break;\n        case 'summary':\n            result = vilidate.checkSummary(options.$target);\n            break;\n    }\n    if (result.success) {\n        validSuccess(options.$li, options.$marker);\n    } else {\n        if (options.msg) {\n            validFail(options.$li, options.$marker, options.$tip, options.msg);\n        } else {\n            validFail(options.$li, options.$marker, options.$tip, result.msg);\n        }\n\n    }\n};\n\nvar lengthLimit = function(node, maxLength) {\n    if (byteLen(node.val()) >= maxLength) {\n        node.val(truncate(node.val(), maxLength));\n    }\n};\n//\nvar inputNameEvent = {\n    oninput: function() {\n        lengthLimit($inputName, 20);\n    },\n    onblur: function() {\n        var $this = this;\n        blurTemplete({\n            type: 'name',\n            $target: $this,\n            $li: $liName,\n            $marker: $markerName,\n            $tip: $tipName\n        });\n    }\n};\n// \nvar inputIdEvent = {\n    oninput: function() {\n        lengthLimit($inputId, 18);\n    },\n    onblur: function() {\n        var $this = this;\n        blurTemplete({\n            type: 'id',\n            $target: $this,\n            $li: $liId,\n            $marker: $markerId,\n            $tip: $tipId,\n            msg: errorMsg.isIdCard\n        });\n    }\n};\n\n//\nvar inputSummaryEvent = {\n    onfocus: function() {\n        inputInterval = setInterval(function() {\n            if ($inputSummary.val().length >= 100) {\n                $inputSummary.val($inputSummary.val().substring(0, 100));\n            }\n            $numSummary.html($inputSummary.val().length);\n        }, 100);\n    },\n    oninput: function() {\n        $numSummary.html($inputSummary.val().length);\n        if ($inputSummary.val().length >= 100) {\n            $inputSummary.val($inputSummary.val().substring(0, 100));\n        }\n    },\n    onblur: function() {\n        clearInterval(inputInterval);\n        var $this = this;\n        blurTemplete({\n            type: 'summary',\n            $target: $this,\n            $li: $liSummary,\n            $tip: $tipSummary\n        });\n    }\n};\nvar submitEvent = function() {\n    publicTips('hide');\n    if (!vilidate.checkName($inputName).success) {\n        return validFail($liName, $markerName, $tipName, vilidate.checkName($inputName).msg);\n    }\n    if (!vilidate.checkIdCard($inputId).success) {\n        return validFail($liId, $markerId, $tipId, errorMsg.isIdCard);\n    }\n    if (!upload.check()) {\n        return false;\n    }\n    if (!vilidate.checkupload()) {\n        return false;\n    }\n    if ($textCategory.attr('data-id') == 'false') {\n        $liCategory.addClass('dr-form-error');\n        $tipCategory.html(errorMsg.type);\n        return;\n    } else {\n        $liCategory.removeClass('dr-form-error');\n    }\n    if (!vilidate.checkSummary($inputSummary).success) {\n        return validFail($liSummary, false, $tipSummary, vilidate.checkSummary($inputSummary).msg);\n    }\n    //sendAjax\n    function sendAjax(url) {\n        var imgs = $form.find('[data-node=uploaderImg]');\n        var option = {\n            realName: $inputName.val(),\n            idCardNo: $inputId.val(),\n            idcardFrontImageUrl: $(imgs[0]).attr('src'),\n            idcardBackImageUrl: $(imgs[1]).attr('src'),\n            idcardPersonImageUrl: $(imgs[2]).attr('src'),\n            categoryId: $form.find('[data-node=categoryTxt]').attr('data-id'),\n            introduction: $form.find('[data-node=inputSummary]').val()\n        };\n        fetch.post(url, {\n            data: option\n        }).done(function(data) {\n            if (data.success) {\n                if (data.code === 200) {\n                    location.href = $_CONFIG.i_domain + 'expert';\n                }\n            } else {\n                publicTips('show', data.message);\n            }\n        }).fail(function() {\n            publicTips();\n        });\n    }\n    if ($_CONFIG['applyFlag'] === 0) {\n        sendAjax(url.get('subMaster'));\n    } else {\n        sendAjax(url.get('subMasterAgain'));\n    }\n};\n\nvar bindEvent = function() {\n    $inputName.on({\n        input: inputNameEvent.oninput,\n        blur: inputNameEvent.onblur\n    });\n    $inputId.on({\n        input: inputIdEvent.oninput,\n        blur: inputIdEvent.onblur\n    });\n    $inputSummary.on({\n        focus: inputSummaryEvent.onfocus,\n        input: inputSummaryEvent.oninput,\n        blur: inputSummaryEvent.onblur\n    });\n    $btnSubmit.on('click', submitEvent);\n};\n\nbindEvent();\n\n//\nchooseCategory.init();\n\n//\nupload.init();\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/masterApply/index.js","/**\n * [truncate ]\n * @param  {[function]}  getLength []\n * @param  {[string]}  string []\n * @param  {[number]}  byteLength []\n * @return {string}           []\n */\nvar byteLen = require('./byteLen');\n\nfunction isHighSurrogate(codePoint) {\n    return codePoint >= 0xd800 && codePoint <= 0xdbff;\n}\n\nfunction isLowSurrogate(codePoint) {\n    return codePoint >= 0xdc00 && codePoint <= 0xdfff;\n}\n\n// Truncate string by size in bytes\nfunction truncate(string, byteLength) {\n    if (typeof string !== \"string\") {\n        throw new Error(\"Input must be string\");\n    }\n\n    var charLength = string.length;\n    var curByteLength = 0;\n    var codePoint;\n    var segment;\n\n    for (var i = 0; i < charLength; i += 1) {\n        codePoint = string.charCodeAt(i);\n        segment = string[i];\n\n        if (isHighSurrogate(codePoint) && isLowSurrogate(string.charCodeAt(i + 1))) {\n            i += 1;\n            segment += string[i];\n        }\n\n        curByteLength += byteLen(segment);\n\n        if (curByteLength === byteLength) {\n            return string.slice(0, i + 1);\n        } else if (curByteLength > byteLength) {\n            return string.slice(0, i - segment.length + 1);\n        }\n    }\n\n    return string;\n}\n\nmodule.exports = truncate;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/truncate.js","var byteLen = function (str) {\n    if (str == null) return 0;\n    if (typeof str != \"string\") {\n        str += \"\";\n    }\n    return str.replace(/[^\\x00-\\xff]/g, \"01\").length;\n}\n\nmodule.exports = byteLen;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/byteLen.js","/**\n * Created by dongyukuan on 2016/7/4.\n */\nvar inputTip = {\n    tel: {\n        ept: '11',\n        err: '',\n        errBack: ''\n    },\n    msgCode: {\n        tipGet: '',\n        tipEpt: '',\n        tipErr: '6,',\n        tipErrEdit: '',\n        tipWrong: ',',\n        checkCodeWrong: ',',\n        send: '',\n        tipSend: '10',\n        tipDisabled: \"60s\",\n        tipLimitEdit: '',\n        btnAfterSend: \"\",\n        btnDefault: \"\"\n    },\n    pwd: {\n        commonTip: '6-20,'\n    },\n    pwdV: {\n        ept: '',\n        err: ''\n    },\n    nickName: {\n        eptName: '',\n        commonTip: '2-20-_',\n        existName: '~',\n        sucSub: '',\n        errLine: \"!\",\n        wrongName: ','\n    },\n    birthTip: {\n        tip: ''\n    },\n    refCode: {\n        err: ''\n    },\n    imgCode: {\n        ept: '',\n        err: ''\n    },\n    login: {\n        errCode: '',\n        errNum: '',\n        errPwd: '',\n        agreement: ''\n    },\n    createCircle: {\n        typeEmpty: '',\n        nameEmpty: '',\n        upperLimit: ''\n    },\n    circle: {\n    \tlogin: '',\n        unJoin: '',\n        cannotJoin: '!',\n        review: '!',\n        joinSuccess: '',\n        joinSuccessPublic: '',\n        cannotJoinCircle: '',\n        exit: '',\n        dissolved: ''\n    },\n    qrCodeTip: {\n        loseEffTip: '',\n        loseEffBtn: '',\n        failGetTip: '',\n        failGetBtn: ''\n    },\n    masterApply: {\n        nameLength: '2-20',\n        nameType: '',\n        isIdCard: '18',\n        type: '',\n        summary: '2-100'\n    },\n    upload: {\n        noUpload: '',\n        uploadError: '4Mjpgjpegpnggif',\n        uploadFaild: ',',\n        uploadError_Master: '4Mjpgjpegpnggif!',\n        Q_EXCEED_NUM_LIMIT: '4Mjpgjpegpnggif',\n        Q_EXCEED_SIZE_LIMIT: '',\n        Q_TYPE_DENIED: '',\n        F_EXCEED_SIZE: 'jpgpng4M',\n        excess: ''\n    },\n    errLine: {\n        tip: ','\n    }\n};\nmodule.exports = inputTip;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/module/i18n.js","/*! WebUploader 0.1.5 */\n\n\n/**\n * @fileOverview [amd](https://github.com/amdjs/amdjs-api/wiki/AMD)\n *\n * AMD API WebUploader\n */\n(function( root, factory ) {\n    var modules = {},\n\n        // require, \n        // https://github.com/amdjs/amdjs-api/wiki/require\n        _require = function( deps, callback ) {\n            var args, len, i;\n\n            // depsmodule\n            if ( typeof deps === 'string' ) {\n                return getModule( deps );\n            } else {\n                args = [];\n                for( len = deps.length, i = 0; i < len; i++ ) {\n                    args.push( getModule( deps[ i ] ) );\n                }\n\n                return callback.apply( null, args );\n            }\n        },\n\n        // defineid.\n        _define = function( id, deps, factory ) {\n            if ( arguments.length === 2 ) {\n                factory = deps;\n                deps = null;\n            }\n\n            _require( deps || [], function() {\n                setModule( id, factory, arguments );\n            });\n        },\n\n        // module, CommonJs\n        setModule = function( id, factory, args ) {\n            var module = {\n                    exports: factory\n                },\n                returned;\n\n            if ( typeof factory === 'function' ) {\n                args.length || (args = [ _require, module.exports, module ,window.jQuery]);\n                returned = factory.apply( null, args );\n                returned !== undefined && (module.exports = returned);\n            }\n\n            modules[ id ] = module.exports;\n        },\n\n        // idmodule\n        getModule = function( id ) {\n            var module = modules[ id ] || root[ id ];\n\n            if ( !module ) {\n                throw new Error( '`' + id + '` is undefined' );\n            }\n\n            return module;\n        },\n\n        // modulesids\n        exportsTo = function( obj ) {\n            var key, host, parts, part, last, ucFirst;\n\n            // make the first character upper case.\n            ucFirst = function( str ) {\n                return str && (str.charAt( 0 ).toUpperCase() + str.substr( 1 ));\n            };\n\n            for ( key in modules ) {\n                host = obj;\n\n                if ( !modules.hasOwnProperty( key ) ) {\n                    continue;\n                }\n\n                parts = key.split('/');\n                last = ucFirst( parts.pop() );\n\n                while( (part = ucFirst( parts.shift() )) ) {\n                    host[ part ] = host[ part ] || {};\n                    host = host[ part ];\n                }\n\n                host[ last ] = modules[ key ];\n            }\n\n            return obj;\n        },\n\n        makeExport = function( dollar ) {\n            root.__dollar = dollar;\n\n            // exports every module.\n            return exportsTo( factory( root, _define, _require,window.jQuery ) );\n        },\n\n        origin;\n\n    if ( typeof module === 'object' && typeof module.exports === 'object' ) {\n\n        // For CommonJS and CommonJS-like environments where a proper window is present,\n        module.exports = makeExport();\n    } else if ( typeof define === 'function' && define.amd ) {\n\n        // Allow using this built library as an AMD module\n        // in another project. That other project will only\n        // see this AMD call, not the internal modules in\n        // the closure below.\n        define([ 'jquery' ], makeExport );\n    } else {\n\n        // Browser globals case. Just assign the\n        // result to a property on the global.\n        origin = root.WebUploader;\n        root.WebUploader = makeExport();\n        root.WebUploader.noConflict = function() {\n            root.WebUploader = origin;\n        };\n    }\n})( window, function( window, define, require ,jQuery ) {\n\n\n    /**\n     * @fileOverview jQuery or Zepto\n     */\n    define('dollar-third',[],function() {\n        var $ = window.__dollar || window.jQuery || window.Zepto || jQuery;\n\n        if ( !$ ) {\n            throw new Error('jQuery or Zepto not found!');\n        }\n\n        return $;\n    });\n    /**\n     * @fileOverview Dom \n     */\n    define('dollar',[\n        'dollar-third'\n    ], function( _ ) {\n        return _;\n    });\n    /**\n     * @fileOverview jQueryPromise\n     */\n    define('promise-third',[\n        'dollar'\n    ], function( $ ) {\n        return {\n            Deferred: $.Deferred,\n            when: $.when,\n\n            isPromise: function( anything ) {\n                return anything && typeof anything.then === 'function';\n            }\n        };\n    });\n    /**\n     * @fileOverview Promise/A+\n     */\n    define('promise',[\n        'promise-third'\n    ], function( _ ) {\n        return _;\n    });\n    /**\n     * @fileOverview \n     */\n\n    /**\n     * Web Uploader`WebUploader`\n     *\n     * As you know, Web Uploader[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)`define`, Modulemodule id.\n     * module idWebUploader\n     *\n     * * module `base`WebUploader.Base\n     * * module `file`: WebUploader.File\n     * * module `lib/dnd`: WebUploader.Lib.Dnd\n     * * module `runtime/html5/dnd`: WebUploader.Runtime.Html5.Dnd\n     *\n     *\n     * `WebUploader`\n     * @module WebUploader\n     * @title WebUploader API\n     */\n    define('base',[\n        'dollar',\n        'promise'\n    ], function( $, promise ) {\n\n        var noop = function() {},\n            call = Function.call;\n\n        // http://jsperf.com/uncurrythis\n        // \n        function uncurryThis( fn ) {\n            return function() {\n                return call.apply( fn, arguments );\n            };\n        }\n\n        function bindFn( fn, context ) {\n            return function() {\n                return fn.apply( context, arguments );\n            };\n        }\n\n        function createObject( proto ) {\n            var f;\n\n            if ( Object.create ) {\n                return Object.create( proto );\n            } else {\n                f = function() {};\n                f.prototype = proto;\n                return new f();\n            }\n        }\n\n\n        /**\n         * \n         * @class Base\n         */\n        return {\n\n            /**\n             * @property {String} version \n             */\n            version: '0.1.5',\n\n            /**\n             * @property {jQuery|Zepto} $ jQueryZepto\n             */\n            $: $,\n\n            Deferred: promise.Deferred,\n\n            isPromise: promise.isPromise,\n\n            when: promise.when,\n\n            /**\n             * @description  \n             *\n             * * `webkit`  webkitwebkit`undefined`\n             * * `chrome`  chromechrome`undefined`\n             * * `ie`  ieie`undefined`**ie10+**\n             * * `firefox`  firefoxfirefox`undefined`\n             * * `safari`  safarisafari`undefined`\n             * * `opera`  operaopera`undefined`\n             *\n             * @property {Object} [browser]\n             */\n            browser: (function( ua ) {\n                var ret = {},\n                    webkit = ua.match( /WebKit\\/([\\d.]+)/ ),\n                    chrome = ua.match( /Chrome\\/([\\d.]+)/ ) ||\n                        ua.match( /CriOS\\/([\\d.]+)/ ),\n\n                    ie = ua.match( /MSIE\\s([\\d\\.]+)/ ) ||\n                        ua.match( /(?:trident)(?:.*rv:([\\w.]+))?/i ),\n                    firefox = ua.match( /Firefox\\/([\\d.]+)/ ),\n                    safari = ua.match( /Safari\\/([\\d.]+)/ ),\n                    opera = ua.match( /OPR\\/([\\d.]+)/ );\n\n                webkit && (ret.webkit = parseFloat( webkit[ 1 ] ));\n                chrome && (ret.chrome = parseFloat( chrome[ 1 ] ));\n                ie && (ret.ie = parseFloat( ie[ 1 ] ));\n                firefox && (ret.firefox = parseFloat( firefox[ 1 ] ));\n                safari && (ret.safari = parseFloat( safari[ 1 ] ));\n                opera && (ret.opera = parseFloat( opera[ 1 ] ));\n\n                return ret;\n            })( navigator.userAgent ),\n\n            /**\n             * @description  \n             *\n             * * `android`  androidandroid`undefined`\n             * * `ios` iosios`undefined`\n             * @property {Object} [os]\n             */\n            os: (function( ua ) {\n                var ret = {},\n\n                    // osx = !!ua.match( /\\(Macintosh\\; Intel / ),\n                    android = ua.match( /(?:Android);?[\\s\\/]+([\\d.]+)?/ ),\n                    ios = ua.match( /(?:iPad|iPod|iPhone).*OS\\s([\\d_]+)/ );\n\n                // osx && (ret.osx = true);\n                android && (ret.android = parseFloat( android[ 1 ] ));\n                ios && (ret.ios = parseFloat( ios[ 1 ].replace( /_/g, '.' ) ));\n\n                return ret;\n            })( navigator.userAgent ),\n\n            /**\n             * \n             * @method inherits\n             * @grammar Base.inherits( super ) => child\n             * @grammar Base.inherits( super, protos ) => child\n             * @grammar Base.inherits( super, protos, statics ) => child\n             * @param  {Class} super \n             * @param  {Object | Function} [protos] constructor\n             * @param  {Function} [protos.constructor] \n             * @param  {Object} [statics] \n             * @return {Class} \n             * @example\n             * function Person() {\n             *     console.log( 'Super' );\n             * }\n             * Person.prototype.hello = function() {\n             *     console.log( 'hello' );\n             * };\n             *\n             * var Manager = Base.inherits( Person, {\n             *     world: function() {\n             *         console.log( 'World' );\n             *     }\n             * });\n             *\n             * // \n             * var instance = new Manager();    // => Super\n             *\n             * // \n             * instance.hello();    // => hello\n             * instance.world();    // => World\n             *\n             * // __super__\n             * console.log( Manager.__super__ === Person );    // => true\n             */\n            inherits: function( Super, protos, staticProtos ) {\n                var child;\n\n                if ( typeof protos === 'function' ) {\n                    child = protos;\n                    protos = null;\n                } else if ( protos && protos.hasOwnProperty('constructor') ) {\n                    child = protos.constructor;\n                } else {\n                    child = function() {\n                        return Super.apply( this, arguments );\n                    };\n                }\n\n                // \n                $.extend( true, child, Super, staticProtos || {} );\n\n                /* jshint camelcase: false */\n\n                // __super__\n                child.__super__ = Super.prototype;\n\n                // \n                // Object.create\n                child.prototype = createObject( Super.prototype );\n                protos && $.extend( true, child.prototype, protos );\n\n                return child;\n            },\n\n            /**\n             * callback.\n             * @method noop\n             */\n            noop: noop,\n\n            /**\n             * `context`\n             * @grammar Base.bindFn( fn, context ) => Function\n             * @method bindFn\n             * @example\n             * var doSomething = function() {\n             *         console.log( this.name );\n             *     },\n             *     obj = {\n             *         name: 'Object Name'\n             *     },\n             *     aliasFn = Base.bind( doSomething, obj );\n             *\n             *  aliasFn();    // => Object Name\n             *\n             */\n            bindFn: bindFn,\n\n            /**\n             * Console.log[noop](#WebUploader:Base.noop)\n             * @grammar Base.log( args... ) => undefined\n             * @method log\n             */\n            log: (function() {\n                if ( window.console ) {\n                    return bindFn( console.log, console );\n                }\n                return noop;\n            })(),\n\n            nextTick: (function() {\n\n                return function( cb ) {\n                    setTimeout( cb, 1 );\n                };\n\n                // @bug \n                // var next = window.requestAnimationFrame ||\n                //     window.webkitRequestAnimationFrame ||\n                //     window.mozRequestAnimationFrame ||\n                //     function( cb ) {\n                //         window.setTimeout( cb, 1000 / 60 );\n                //     };\n\n                // // fix: Uncaught TypeError: Illegal invocation\n                // return bindFn( next, window );\n            })(),\n\n            /**\n             * [uncurrythis](http://www.2ality.com/2011/11/uncurrying-this.html)slice\n             * \n             * @grammar Base.slice( target, start[, end] ) => Array\n             * @method slice\n             * @example\n             * function doSomthing() {\n             *     var args = Base.slice( arguments, 1 );\n             *     console.log( args );\n             * }\n             *\n             * doSomthing( 'ignored', 'arg2', 'arg3' );    // => Array [\"arg2\", \"arg3\"]\n             */\n            slice: uncurryThis( [].slice ),\n\n            /**\n             * ID\n             * @method guid\n             * @grammar Base.guid() => String\n             * @grammar Base.guid( prefx ) => String\n             */\n            guid: (function() {\n                var counter = 0;\n\n                return function( prefix ) {\n                    var guid = (+new Date()).toString( 32 ),\n                        i = 0;\n\n                    for ( ; i < 5; i++ ) {\n                        guid += Math.floor( Math.random() * 65535 ).toString( 32 );\n                    }\n\n                    return (prefix || 'wu_') + guid + (counter++).toString( 32 );\n                };\n            })(),\n\n            /**\n             * , \n             * @method formatSize\n             * @grammar Base.formatSize( size ) => String\n             * @grammar Base.formatSize( size, pointLength ) => String\n             * @grammar Base.formatSize( size, pointLength, units ) => String\n             * @param {Number} size \n             * @param {Number} [pointLength=2] \n             * @param {Array} [units=[ 'B', 'K', 'M', 'G', 'TB' ]] K()M, K.\n             * @example\n             * console.log( Base.formatSize( 100 ) );    // => 100B\n             * console.log( Base.formatSize( 1024 ) );    // => 1.00K\n             * console.log( Base.formatSize( 1024, 0 ) );    // => 1K\n             * console.log( Base.formatSize( 1024 * 1024 ) );    // => 1.00M\n             * console.log( Base.formatSize( 1024 * 1024 * 1024 ) );    // => 1.00G\n             * console.log( Base.formatSize( 1024 * 1024 * 1024, 0, ['B', 'KB', 'MB'] ) );    // => 1024MB\n             */\n            formatSize: function( size, pointLength, units ) {\n                var unit;\n\n                units = units || [ 'B', 'K', 'M', 'G', 'TB' ];\n\n                while ( (unit = units.shift()) && size > 1024 ) {\n                    size = size / 1024;\n                }\n\n                return (unit === 'B' ? size : size.toFixed( pointLength || 2 )) +\n                        unit;\n            }\n        };\n    });\n    /**\n     * \n     * @fileOverview Mediator\n     */\n    define('mediator',[\n        'base'\n    ], function( Base ) {\n        var $ = Base.$,\n            slice = [].slice,\n            separator = /\\s+/,\n            protos;\n\n        // handlers.\n        function findHandlers( arr, name, callback, context ) {\n            return $.grep( arr, function( handler ) {\n                return handler &&\n                        (!name || handler.e === name) &&\n                        (!callback || handler.cb === callback ||\n                        handler.cb._cb === callback) &&\n                        (!context || handler.ctx === context);\n            });\n        }\n\n        function eachEvent( events, callback, iterator ) {\n            // event\n            $.each( (events || '').split( separator ), function( _, key ) {\n                iterator( key, callback );\n            });\n        }\n\n        function triggerHanders( events, args ) {\n            var stoped = false,\n                i = -1,\n                len = events.length,\n                handler;\n\n            while ( ++i < len ) {\n                handler = events[ i ];\n\n                if ( handler.cb.apply( handler.ctx2, args ) === false ) {\n                    stoped = true;\n                    break;\n                }\n            }\n\n            return !stoped;\n        }\n\n        protos = {\n\n            /**\n             * \n             *\n             * `callback`argumentstrigger\n             * ```javascript\n             * var obj = {};\n             *\n             * // obj\n             * Mediator.installTo( obj );\n             *\n             * obj.on( 'testa', function( arg1, arg2 ) {\n             *     console.log( arg1, arg2 ); // => 'arg1', 'arg2'\n             * });\n             *\n             * obj.trigger( 'testa', 'arg1', 'arg2' );\n             * ```\n             *\n             * `callback``return false``callback`\n             * `trigger``false`\n             *\n             * `on``all`, `callback`arguments\n             * `type``callback``callback`\n             * ```javascript\n             * obj.on( 'all', function( type, arg1, arg2 ) {\n             *     console.log( type, arg1, arg2 ); // => 'testa', 'arg1', 'arg2'\n             * });\n             * ```\n             *\n             * @method on\n             * @grammar on( name, callback[, context] ) => self\n             * @param  {String}   name     \n             * @param  {Function} callback \n             * @param  {Object}   [context]  \n             * @return {self} \n             * @chainable\n             * @class Mediator\n             */\n            on: function( name, callback, context ) {\n                var me = this,\n                    set;\n\n                if ( !callback ) {\n                    return this;\n                }\n\n                set = this._events || (this._events = []);\n\n                eachEvent( name, callback, function( name, callback ) {\n                    var handler = { e: name };\n\n                    handler.cb = callback;\n                    handler.ctx = context;\n                    handler.ctx2 = context || me;\n                    handler.id = set.length;\n\n                    set.push( handler );\n                });\n\n                return this;\n            },\n\n            /**\n             * handler\n             * @method once\n             * @grammar once( name, callback[, context] ) => self\n             * @param  {String}   name     \n             * @param  {Function} callback \n             * @param  {Object}   [context]  \n             * @return {self} \n             * @chainable\n             */\n            once: function( name, callback, context ) {\n                var me = this;\n\n                if ( !callback ) {\n                    return me;\n                }\n\n                eachEvent( name, callback, function( name, callback ) {\n                    var once = function() {\n                            me.off( name, once );\n                            return callback.apply( context || me, arguments );\n                        };\n\n                    once._cb = callback;\n                    me.on( name, once, context );\n                });\n\n                return me;\n            },\n\n            /**\n             * \n             * @method off\n             * @grammar off( [name[, callback[, context] ] ] ) => self\n             * @param  {String}   [name]     \n             * @param  {Function} [callback] \n             * @param  {Object}   [context]  \n             * @return {self} \n             * @chainable\n             */\n            off: function( name, cb, ctx ) {\n                var events = this._events;\n\n                if ( !events ) {\n                    return this;\n                }\n\n                if ( !name && !cb && !ctx ) {\n                    this._events = [];\n                    return this;\n                }\n\n                eachEvent( name, cb, function( name, cb ) {\n                    $.each( findHandlers( events, name, cb, ctx ), function() {\n                        delete events[ this.id ];\n                    });\n                });\n\n                return this;\n            },\n\n            /**\n             * \n             * @method trigger\n             * @grammar trigger( name[, args...] ) => self\n             * @param  {String}   type     \n             * @param  {*} [...] \n             * @return {Boolean} handlerreturn falsefalse, true\n             */\n            trigger: function( type ) {\n                var args, events, allEvents;\n\n                if ( !this._events || !type ) {\n                    return this;\n                }\n\n                args = slice.call( arguments, 1 );\n                events = findHandlers( this._events, type );\n                allEvents = findHandlers( this._events, 'all' );\n\n                return triggerHanders( events, args ) &&\n                        triggerHanders( allEvents, arguments );\n            }\n        };\n\n        /**\n         * [installTo](#WebUploader:Mediator:installTo)\n         * \n         *\n         * @class Mediator\n         */\n        return $.extend({\n\n            /**\n             * \n             * @method installTo\n             * @param  {Object} obj \n             * @return {Object} obj.\n             */\n            installTo: function( obj ) {\n                return $.extend( obj, protos );\n            }\n\n        }, protos );\n    });\n    /**\n     * @fileOverview Uploader\n     */\n    define('uploader',[\n        'base',\n        'mediator'\n    ], function( Base, Mediator ) {\n\n        var $ = Base.$;\n\n        /**\n         * \n         * @class Uploader\n         * @constructor\n         * @grammar new Uploader( opts ) => Uploader\n         * @example\n         * var uploader = WebUploader.Uploader({\n         *     swf: 'path_of_swf/Uploader.swf',\n         *\n         *     // \n         *     chunked: true\n         * });\n         */\n        function Uploader( opts ) {\n            this.options = $.extend( true, {}, Uploader.options, opts );\n            this._init( this.options );\n        }\n\n        // default Options\n        // widgets\n        Uploader.options = {};\n        Mediator.installTo( Uploader.prototype );\n\n        // \n        $.each({\n            upload: 'start-upload',\n            stop: 'stop-upload',\n            getFile: 'get-file',\n            getFiles: 'get-files',\n            addFile: 'add-file',\n            addFiles: 'add-file',\n            sort: 'sort-files',\n            removeFile: 'remove-file',\n            cancelFile: 'cancel-file',\n            skipFile: 'skip-file',\n            retry: 'retry',\n            isInProgress: 'is-in-progress',\n            makeThumb: 'make-thumb',\n            md5File: 'md5-file',\n            getDimension: 'get-dimension',\n            addButton: 'add-btn',\n            predictRuntimeType: 'predict-runtime-type',\n            refresh: 'refresh',\n            disable: 'disable',\n            enable: 'enable',\n            reset: 'reset'\n        }, function( fn, command ) {\n            Uploader.prototype[ fn ] = function() {\n                return this.request( command, arguments );\n            };\n        });\n\n        $.extend( Uploader.prototype, {\n            state: 'pending',\n\n            _init: function( opts ) {\n                var me = this;\n\n                me.request( 'init', opts, function() {\n                    me.state = 'ready';\n                    me.trigger('ready');\n                });\n            },\n\n            /**\n             * Uploader\n             * @method option\n             * @grammar option( key ) => *\n             * @grammar option( key, val ) => self\n             * @example\n             *\n             * // \n             * var uploader = new WebUploader.Uploader({\n             *     compress: null;\n             * });\n             *\n             * // 1600 * 1600\n             * uploader.option( 'compress', {\n             *     width: 1600,\n             *     height: 1600\n             * });\n             */\n            option: function( key, val ) {\n                var opts = this.options;\n\n                // setter\n                if ( arguments.length > 1 ) {\n\n                    if ( $.isPlainObject( val ) &&\n                            $.isPlainObject( opts[ key ] ) ) {\n                        $.extend( opts[ key ], val );\n                    } else {\n                        opts[ key ] = val;\n                    }\n\n                } else {    // getter\n                    return key ? opts[ key ] : opts;\n                }\n            },\n\n            /**\n             * \n             * * `successNum` \n             * * `progressNum` \n             * * `cancelNum` \n             * * `invalidNum` \n             * * `uploadFailNum` \n             * * `queueNum` \n             * * `interruptNum` \n             * @method getStats\n             * @grammar getStats() => Object\n             */\n            getStats: function() {\n                // return this._mgr.getStats.apply( this._mgr, arguments );\n                var stats = this.request('get-stats');\n\n                return stats ? {\n                    successNum: stats.numOfSuccess,\n                    progressNum: stats.numOfProgress,\n\n                    // who care?\n                    // queueFailNum: 0,\n                    cancelNum: stats.numOfCancel,\n                    invalidNum: stats.numOfInvalid,\n                    uploadFailNum: stats.numOfUploadFailed,\n                    queueNum: stats.numOfQueue,\n                    interruptNum: stats.numofInterrupt\n                } : {};\n            },\n\n            // opts.onEventinstance.onEvent\n            trigger: function( type/*, args...*/ ) {\n                var args = [].slice.call( arguments, 1 ),\n                    opts = this.options,\n                    name = 'on' + type.substring( 0, 1 ).toUpperCase() +\n                        type.substring( 1 );\n\n                if (\n                        // onhandler.\n                        Mediator.trigger.apply( this, arguments ) === false ||\n\n                        // opts.onEvent\n                        $.isFunction( opts[ name ] ) &&\n                        opts[ name ].apply( this, args ) === false ||\n\n                        // this.onEvent\n                        $.isFunction( this[ name ] ) &&\n                        this[ name ].apply( this, args ) === false ||\n\n                        // uploader\n                        Mediator.trigger.apply( Mediator,\n                        [ this, type ].concat( args ) ) === false ) {\n\n                    return false;\n                }\n\n                return true;\n            },\n\n            /**\n             *  webuploader \n             * @method destroy\n             * @grammar destroy() => undefined\n             */\n            destroy: function() {\n                this.request( 'destroy', arguments );\n                this.off();\n            },\n\n            // widgets/widget.js\n            request: Base.noop\n        });\n\n        /**\n         * Uploadernew Uploader( opts );\n         * @method create\n         * @class Base\n         * @static\n         * @grammar Base.create( opts ) => Uploader\n         */\n        Base.create = Uploader.create = function( opts ) {\n            return new Uploader( opts );\n        };\n\n        // Uploader\n        Base.Uploader = Uploader;\n\n        return Uploader;\n    });\n    /**\n     * @fileOverview RuntimeRuntime, \n     */\n    define('runtime/runtime',[\n        'base',\n        'mediator'\n    ], function( Base, Mediator ) {\n\n        var $ = Base.$,\n            factories = {},\n\n            // key\n            getFirstKey = function( obj ) {\n                for ( var key in obj ) {\n                    if ( obj.hasOwnProperty( key ) ) {\n                        return key;\n                    }\n                }\n                return null;\n            };\n\n        // \n        function Runtime( options ) {\n            this.options = $.extend({\n                container: document.body\n            }, options );\n            this.uid = Base.guid('rt_');\n        }\n\n        $.extend( Runtime.prototype, {\n\n            getContainer: function() {\n                var opts = this.options,\n                    parent, container;\n\n                if ( this._container ) {\n                    return this._container;\n                }\n\n                parent = $( opts.container || document.body );\n                container = $( document.createElement('div') );\n\n                container.attr( 'id', 'rt_' + this.uid );\n                container.css({\n                    position: 'absolute',\n                    top: '0px',\n                    left: '0px',\n                    width: '1px',\n                    height: '1px',\n                    overflow: 'hidden'\n                });\n\n                parent.append( container );\n                parent.addClass('webuploader-container');\n                this._container = container;\n                this._parent = parent;\n                return container;\n            },\n\n            init: Base.noop,\n            exec: Base.noop,\n\n            destroy: function() {\n                this._container && this._container.remove();\n                this._parent && this._parent.removeClass('webuploader-container');\n                this.off();\n            }\n        });\n\n        Runtime.orders = 'html5,flash';\n\n\n        /**\n         * Runtime\n         * @param {String} type    \n         * @param {Runtime} factory Runtime\n         */\n        Runtime.addRuntime = function( type, factory ) {\n            factories[ type ] = factory;\n        };\n\n        Runtime.hasRuntime = function( type ) {\n            return !!(type ? factories[ type ] : getFirstKey( factories ));\n        };\n\n        Runtime.create = function( opts, orders ) {\n            var type, runtime;\n\n            orders = orders || Runtime.orders;\n            $.each( orders.split( /\\s*,\\s*/g ), function() {\n                if ( factories[ this ] ) {\n                    type = this;\n                    return false;\n                }\n            });\n\n            type = type || getFirstKey( factories );\n            if ( !type ) {\n                throw new Error('Runtime Error');\n            }\n\n            runtime = new factories[ type ]( opts );\n            return runtime;\n        };\n\n        Mediator.installTo( Runtime.prototype );\n        return Runtime;\n    });\n\n    /**\n     * @fileOverview RuntimeRuntime, \n     */\n    define('runtime/client',[\n        'base',\n        'mediator',\n        'runtime/runtime'\n    ], function( Base, Mediator, Runtime ) {\n\n        var cache;\n\n        cache = (function() {\n            var obj = {};\n\n            return {\n                add: function( runtime ) {\n                    obj[ runtime.uid ] = runtime;\n                },\n\n                get: function( ruid, standalone ) {\n                    var i;\n\n                    if ( ruid ) {\n                        return obj[ ruid ];\n                    }\n\n                    for ( i in obj ) {\n                        // filepicker.\n                        if ( standalone && obj[ i ].__standalone ) {\n                            continue;\n                        }\n\n                        return obj[ i ];\n                    }\n\n                    return null;\n                },\n\n                remove: function( runtime ) {\n                    delete obj[ runtime.uid ];\n                }\n            };\n        })();\n\n        function RuntimeClient( component, standalone ) {\n            var deferred = Base.Deferred(),\n                runtime;\n\n            this.uid = Base.guid('client_');\n\n            // runtime\n            this.runtimeReady = function( cb ) {\n                return deferred.done( cb );\n            };\n\n            this.connectRuntime = function( opts, cb ) {\n\n                // already connected.\n                if ( runtime ) {\n                    throw new Error('already connected!');\n                }\n\n                deferred.done( cb );\n\n                if ( typeof opts === 'string' && cache.get( opts ) ) {\n                    runtime = cache.get( opts );\n                }\n\n                // filePicker\n                runtime = runtime || cache.get( null, standalone );\n\n                // \n                if ( !runtime ) {\n                    runtime = Runtime.create( opts, opts.runtimeOrder );\n                    runtime.__promise = deferred.promise();\n                    runtime.once( 'ready', deferred.resolve );\n                    runtime.init();\n                    cache.add( runtime );\n                    runtime.__client = 1;\n                } else {\n                    // cache\n                    Base.$.extend( runtime.options, opts );\n                    runtime.__promise.then( deferred.resolve );\n                    runtime.__client++;\n                }\n\n                standalone && (runtime.__standalone = standalone);\n                return runtime;\n            };\n\n            this.getRuntime = function() {\n                return runtime;\n            };\n\n            this.disconnectRuntime = function() {\n                if ( !runtime ) {\n                    return;\n                }\n\n                runtime.__client--;\n\n                if ( runtime.__client <= 0 ) {\n                    cache.remove( runtime );\n                    delete runtime.__promise;\n                    runtime.destroy();\n                }\n\n                runtime = null;\n            };\n\n            this.exec = function() {\n                if ( !runtime ) {\n                    return;\n                }\n\n                var args = Base.slice( arguments );\n                component && args.unshift( component );\n\n                return runtime.exec.apply( this, args );\n            };\n\n            this.getRuid = function() {\n                return runtime && runtime.uid;\n            };\n\n            this.destroy = (function( destroy ) {\n                return function() {\n                    destroy && destroy.apply( this, arguments );\n                    this.trigger('destroy');\n                    this.off();\n                    this.exec('destroy');\n                    this.disconnectRuntime();\n                };\n            })( this.destroy );\n        }\n\n        Mediator.installTo( RuntimeClient.prototype );\n        return RuntimeClient;\n    });\n    /**\n     * @fileOverview \n     */\n    define('lib/dnd',[\n        'base',\n        'mediator',\n        'runtime/client'\n    ], function( Base, Mediator, RuntimeClent ) {\n\n        var $ = Base.$;\n\n        function DragAndDrop( opts ) {\n            opts = this.options = $.extend({}, DragAndDrop.options, opts );\n\n            opts.container = $( opts.container );\n\n            if ( !opts.container.length ) {\n                return;\n            }\n\n            RuntimeClent.call( this, 'DragAndDrop' );\n        }\n\n        DragAndDrop.options = {\n            accept: null,\n            disableGlobalDnd: false\n        };\n\n        Base.inherits( RuntimeClent, {\n            constructor: DragAndDrop,\n\n            init: function() {\n                var me = this;\n\n                me.connectRuntime( me.options, function() {\n                    me.exec('init');\n                    me.trigger('ready');\n                });\n            }\n        });\n\n        Mediator.installTo( DragAndDrop.prototype );\n\n        return DragAndDrop;\n    });\n    /**\n     * @fileOverview \n     */\n    define('widgets/widget',[\n        'base',\n        'uploader'\n    ], function( Base, Uploader ) {\n\n        var $ = Base.$,\n            _init = Uploader.prototype._init,\n            _destroy = Uploader.prototype.destroy,\n            IGNORE = {},\n            widgetClass = [];\n\n        function isArrayLike( obj ) {\n            if ( !obj ) {\n                return false;\n            }\n\n            var length = obj.length,\n                type = $.type( obj );\n\n            if ( obj.nodeType === 1 && length ) {\n                return true;\n            }\n\n            return type === 'array' || type !== 'function' && type !== 'string' &&\n                    (length === 0 || typeof length === 'number' && length > 0 &&\n                    (length - 1) in obj);\n        }\n\n        function Widget( uploader ) {\n            this.owner = uploader;\n            this.options = uploader.options;\n        }\n\n        $.extend( Widget.prototype, {\n\n            init: Base.noop,\n\n            // Backboneuploader\n            // widgetuploader\n            invoke: function( apiName, args ) {\n\n                /*\n                    {\n                        'make-thumb': 'makeThumb'\n                    }\n                 */\n                var map = this.responseMap;\n\n                // API\n                if ( !map || !(apiName in map) || !(map[ apiName ] in this) ||\n                        !$.isFunction( this[ map[ apiName ] ] ) ) {\n\n                    return IGNORE;\n                }\n\n                return this[ map[ apiName ] ].apply( this, args );\n\n            },\n\n            /**\n             * `callback``handler``promise``handler`promise`promise`\n             * @method request\n             * @grammar request( command, args ) => * | Promise\n             * @grammar request( command, args, callback ) => Promise\n             * @for  Uploader\n             */\n            request: function() {\n                return this.owner.request.apply( this.owner, arguments );\n            }\n        });\n\n        // Uploader.\n        $.extend( Uploader.prototype, {\n\n            /**\n             * @property {String | Array} [disableWidgets=undefined]\n             * @namespace options\n             * @for Uploader\n             * @description  Uploader.register  widget  option \n             */\n\n            // _initwidgets\n            _init: function() {\n                var me = this,\n                    widgets = me._widgets = [],\n                    deactives = me.options.disableWidgets || '';\n\n                $.each( widgetClass, function( _, klass ) {\n                    (!deactives || !~deactives.indexOf( klass._name )) &&\n                        widgets.push( new klass( me ) );\n                });\n\n                return _init.apply( me, arguments );\n            },\n\n            request: function( apiName, args, callback ) {\n                var i = 0,\n                    widgets = this._widgets,\n                    len = widgets && widgets.length,\n                    rlts = [],\n                    dfds = [],\n                    widget, rlt, promise, key;\n\n                args = isArrayLike( args ) ? args : [ args ];\n\n                for ( ; i < len; i++ ) {\n                    widget = widgets[ i ];\n                    rlt = widget.invoke( apiName, args );\n\n                    if ( rlt !== IGNORE ) {\n\n                        // Deferred\n                        if ( Base.isPromise( rlt ) ) {\n                            dfds.push( rlt );\n                        } else {\n                            rlts.push( rlt );\n                        }\n                    }\n                }\n\n                // callback\n                if ( callback || dfds.length ) {\n                    promise = Base.when.apply( Base, dfds );\n                    key = promise.pipe ? 'pipe' : 'then';\n\n                    // \n                    // callback tick \n                    return promise[ key ](function() {\n                                var deferred = Base.Deferred(),\n                                    args = arguments;\n\n                                if ( args.length === 1 ) {\n                                    args = args[ 0 ];\n                                }\n\n                                setTimeout(function() {\n                                    deferred.resolve( args );\n                                }, 1 );\n\n                                return deferred.promise();\n                            })[ callback ? key : 'done' ]( callback || Base.noop );\n                } else {\n                    return rlts[ 0 ];\n                }\n            },\n\n            destroy: function() {\n                _destroy.apply( this, arguments );\n                this._widgets = null;\n            }\n        });\n\n        /**\n         * \n         * @grammar Uploader.register(proto);\n         * @grammar Uploader.register(map, proto);\n         * @param  {object} responseMap API \n         * @param  {object} proto  constructor \n         * @method Uploader.register\n         * @for Uploader\n         * @example\n         * Uploader.register({\n         *     'make-thumb': 'makeThumb'\n         * }, {\n         *     init: function( options ) {},\n         *     makeThumb: function() {}\n         * });\n         *\n         * Uploader.register({\n         *     'make-thumb': function() {\n         *\n         *     }\n         * });\n         */\n        Uploader.register = Widget.register = function( responseMap, widgetProto ) {\n            var map = { init: 'init', destroy: 'destroy', name: 'anonymous' },\n                klass;\n\n            if ( arguments.length === 1 ) {\n                widgetProto = responseMap;\n\n                //  map \n                $.each(widgetProto, function(key) {\n                    if ( key[0] === '_' || key === 'name' ) {\n                        key === 'name' && (map.name = widgetProto.name);\n                        return;\n                    }\n\n                    map[key.replace(/[A-Z]/g, '-$&').toLowerCase()] = key;\n                });\n\n            } else {\n                map = $.extend( map, responseMap );\n            }\n\n            widgetProto.responseMap = map;\n            klass = Base.inherits( Widget, widgetProto );\n            klass._name = map.name;\n            widgetClass.push( klass );\n\n            return klass;\n        };\n\n        /**\n         * \n         * @grammar Uploader.unRegister(name);\n         * @param  {string} name \n         * @method Uploader.unRegister\n         * @for Uploader\n         * @example\n         *\n         * Uploader.register({\n         *     name: 'custom',\n         *\n         *     'make-thumb': function() {\n         *\n         *     }\n         * });\n         *\n         * Uploader.unRegister('custom');\n         */\n        Uploader.unRegister = Widget.unRegister = function( name ) {\n            if ( !name || name === 'anonymous' ) {\n                return;\n            }\n\n            // \n            for ( var i = widgetClass.length; i--; ) {\n                if ( widgetClass[i]._name === name ) {\n                    widgetClass.splice(i, 1)\n                }\n            }\n        };\n\n        return Widget;\n    });\n    /**\n     * @fileOverview DragAndDrop Widget\n     */\n    define('widgets/filednd',[\n        'base',\n        'uploader',\n        'lib/dnd',\n        'widgets/widget'\n    ], function( Base, Uploader, Dnd ) {\n        var $ = Base.$;\n\n        Uploader.options.dnd = '';\n\n        /**\n         * @property {Selector} [dnd=undefined]  Drag And Drop\n         * @namespace options\n         * @for Uploader\n         */\n\n        /**\n         * @property {Selector} [disableGlobalDnd=false]  \n         * @namespace options\n         * @for Uploader\n         */\n\n        /**\n         * @event dndAccept\n         * @param {DataTransferItemList} items DataTransferItem\n         * @description  chrome  API mime-type \n         * @for  Uploader\n         */\n        return Uploader.register({\n            name: 'dnd',\n\n            init: function( opts ) {\n\n                if ( !opts.dnd ||\n                        this.request('predict-runtime-type') !== 'html5' ) {\n                    return;\n                }\n\n                var me = this,\n                    deferred = Base.Deferred(),\n                    options = $.extend({}, {\n                        disableGlobalDnd: opts.disableGlobalDnd,\n                        container: opts.dnd,\n                        accept: opts.accept\n                    }),\n                    dnd;\n\n                this.dnd = dnd = new Dnd( options );\n\n                dnd.once( 'ready', deferred.resolve );\n                dnd.on( 'drop', function( files ) {\n                    me.request( 'add-file', [ files ]);\n                });\n\n                // \n                dnd.on( 'accept', function( items ) {\n                    return me.owner.trigger( 'dndAccept', items );\n                });\n\n                dnd.init();\n\n                return deferred.promise();\n            },\n\n            destroy: function() {\n                this.dnd && this.dnd.destroy();\n            }\n        });\n    });\n\n    /**\n     * @fileOverview \n     */\n    define('lib/filepaste',[\n        'base',\n        'mediator',\n        'runtime/client'\n    ], function( Base, Mediator, RuntimeClent ) {\n\n        var $ = Base.$;\n\n        function FilePaste( opts ) {\n            opts = this.options = $.extend({}, opts );\n            opts.container = $( opts.container || document.body );\n            RuntimeClent.call( this, 'FilePaste' );\n        }\n\n        Base.inherits( RuntimeClent, {\n            constructor: FilePaste,\n\n            init: function() {\n                var me = this;\n\n                me.connectRuntime( me.options, function() {\n                    me.exec('init');\n                    me.trigger('ready');\n                });\n            }\n        });\n\n        Mediator.installTo( FilePaste.prototype );\n\n        return FilePaste;\n    });\n    /**\n     * @fileOverview \n     */\n    define('widgets/filepaste',[\n        'base',\n        'uploader',\n        'lib/filepaste',\n        'widgets/widget'\n    ], function( Base, Uploader, FilePaste ) {\n        var $ = Base.$;\n\n        /**\n         * @property {Selector} [paste=undefined]  paste`document.body`.\n         * @namespace options\n         * @for Uploader\n         */\n        return Uploader.register({\n            name: 'paste',\n\n            init: function( opts ) {\n\n                if ( !opts.paste ||\n                        this.request('predict-runtime-type') !== 'html5' ) {\n                    return;\n                }\n\n                var me = this,\n                    deferred = Base.Deferred(),\n                    options = $.extend({}, {\n                        container: opts.paste,\n                        accept: opts.accept\n                    }),\n                    paste;\n\n                this.paste = paste = new FilePaste( options );\n\n                paste.once( 'ready', deferred.resolve );\n                paste.on( 'paste', function( files ) {\n                    me.owner.request( 'add-file', [ files ]);\n                });\n                paste.init();\n\n                return deferred.promise();\n            },\n\n            destroy: function() {\n                this.paste && this.paste.destroy();\n            }\n        });\n    });\n    /**\n     * @fileOverview Blob\n     */\n    define('lib/blob',[\n        'base',\n        'runtime/client'\n    ], function( Base, RuntimeClient ) {\n\n        function Blob( ruid, source ) {\n            var me = this;\n\n            me.source = source;\n            me.ruid = ruid;\n            this.size = source.size || 0;\n\n            //  mimetype, \n            if ( !source.type && this.ext &&\n                    ~'jpg,jpeg,png,gif,bmp'.indexOf( this.ext ) ) {\n                this.type = 'image/' + (this.ext === 'jpg' ? 'jpeg' : this.ext);\n            } else {\n                this.type = source.type || 'application/octet-stream';\n            }\n\n            RuntimeClient.call( me, 'Blob' );\n            this.uid = source.uid || this.uid;\n\n            if ( ruid ) {\n                me.connectRuntime( ruid );\n            }\n        }\n\n        Base.inherits( RuntimeClient, {\n            constructor: Blob,\n\n            slice: function( start, end ) {\n                return this.exec( 'slice', start, end );\n            },\n\n            getSource: function() {\n                return this.source;\n            }\n        });\n\n        return Blob;\n    });\n    /**\n     * FlashFileHTML5File\n     * FlashFileHTML5File\n     * @fileOverview File\n     */\n    define('lib/file',[\n        'base',\n        'lib/blob'\n    ], function( Base, Blob ) {\n\n        var uid = 1,\n            rExt = /\\.([^.]+)$/;\n\n        function File( ruid, file ) {\n            var ext;\n\n            this.name = file.name || ('untitled' + uid++);\n            ext = rExt.exec( file.name ) ? RegExp.$1.toLowerCase() : '';\n\n            // todo \n            //  mimetype, \n            if ( !ext && file.type ) {\n                ext = /\\/(jpg|jpeg|png|gif|bmp)$/i.exec( file.type ) ?\n                        RegExp.$1.toLowerCase() : '';\n                this.name += '.' + ext;\n            }\n\n            this.ext = ext;\n            this.lastModifiedDate = file.lastModifiedDate ||\n                    (new Date()).toLocaleString();\n\n            Blob.apply( this, arguments );\n        }\n\n        return Base.inherits( Blob, File );\n    });\n\n    /**\n     * @fileOverview \n     */\n    define('lib/filepicker',[\n        'base',\n        'runtime/client',\n        'lib/file'\n    ], function( Base, RuntimeClent, File ) {\n\n        var $ = Base.$;\n\n        function FilePicker( opts ) {\n            opts = this.options = $.extend({}, FilePicker.options, opts );\n\n            opts.container = $( opts.id );\n\n            if ( !opts.container.length ) {\n                throw new Error('');\n            }\n\n            opts.innerHTML = opts.innerHTML || opts.label ||\n                    opts.container.html() || '';\n\n            opts.button = $( opts.button || document.createElement('div') );\n            opts.button.html( opts.innerHTML );\n            opts.container.html( opts.button );\n\n            RuntimeClent.call( this, 'FilePicker', true );\n        }\n\n        FilePicker.options = {\n            button: null,\n            container: null,\n            label: null,\n            innerHTML: null,\n            multiple: true,\n            accept: null,\n            name: 'file'\n        };\n\n        Base.inherits( RuntimeClent, {\n            constructor: FilePicker,\n\n            init: function() {\n                var me = this,\n                    opts = me.options,\n                    button = opts.button;\n\n                button.addClass('webuploader-pick');\n\n                me.on( 'all', function( type ) {\n                    var files;\n\n                    switch ( type ) {\n                        case 'mouseenter':\n                            button.addClass('webuploader-pick-hover');\n                            break;\n\n                        case 'mouseleave':\n                            button.removeClass('webuploader-pick-hover');\n                            break;\n\n                        case 'change':\n                            files = me.exec('getFiles');\n                            me.trigger( 'select', $.map( files, function( file ) {\n                                file = new File( me.getRuid(), file );\n\n                                // \n                                file._refer = opts.container;\n                                return file;\n                            }), opts.container );\n                            break;\n                    }\n                });\n\n                me.connectRuntime( opts, function() {\n                    me.refresh();\n                    me.exec( 'init', opts );\n                    me.trigger('ready');\n                });\n\n                this._resizeHandler = Base.bindFn( this.refresh, this );\n                $( window ).on( 'resize', this._resizeHandler );\n            },\n\n            refresh: function() {\n                var shimContainer = this.getRuntime().getContainer(),\n                    button = this.options.button,\n                    width = button.outerWidth ?\n                            button.outerWidth() : button.width(),\n\n                    height = button.outerHeight ?\n                            button.outerHeight() : button.height(),\n\n                    pos = button.offset();\n\n                width && height && shimContainer.css({\n                    bottom: 'auto',\n                    right: 'auto',\n                    width: width + 'px',\n                    height: height + 'px'\n                }).offset( pos );\n            },\n\n            enable: function() {\n                var btn = this.options.button;\n\n                btn.removeClass('webuploader-pick-disable');\n                this.refresh();\n            },\n\n            disable: function() {\n                var btn = this.options.button;\n\n                this.getRuntime().getContainer().css({\n                    top: '-99999px'\n                });\n\n                btn.addClass('webuploader-pick-disable');\n            },\n\n            destroy: function() {\n                var btn = this.options.button;\n                $( window ).off( 'resize', this._resizeHandler );\n                btn.removeClass('webuploader-pick-disable webuploader-pick-hover ' +\n                    'webuploader-pick');\n            }\n        });\n\n        return FilePicker;\n    });\n\n    /**\n     * @fileOverview \n     */\n    define('widgets/filepicker',[\n        'base',\n        'uploader',\n        'lib/filepicker',\n        'widgets/widget'\n    ], function( Base, Uploader, FilePicker ) {\n        var $ = Base.$;\n\n        $.extend( Uploader.options, {\n\n            /**\n             * @property {Selector | Object} [pick=undefined]\n             * @namespace options\n             * @for Uploader\n             * @description \n             *\n             * * `id` {Seletor|dom} ****  id,  id,  class,  dom \n             * * `label` {String}  `innerHTML` \n             * * `innerHTML` {String} \n             * * `multiple` {Boolean} \n             */\n            pick: null,\n\n            /**\n             * @property {Arroy} [accept=null]\n             * @namespace options\n             * @for Uploader\n             * @description  extmimeType\n             *\n             * * `title` {String} \n             * * `extensions` {String} \n             * * `mimeTypes` {String} \n             *\n             * \n             *\n             * ```\n             * {\n             *     title: 'Images',\n             *     extensions: 'gif,jpg,jpeg,bmp,png',\n             *     mimeTypes: 'image/*'\n             * }\n             * ```\n             */\n            accept: null/*{\n                title: 'Images',\n                extensions: 'gif,jpg,jpeg,bmp,png',\n                mimeTypes: 'image/*'\n            }*/\n        });\n\n        return Uploader.register({\n            name: 'picker',\n\n            init: function( opts ) {\n                this.pickers = [];\n                return opts.pick && this.addBtn( opts.pick );\n            },\n\n            refresh: function() {\n                $.each( this.pickers, function() {\n                    this.refresh();\n                });\n            },\n\n            /**\n             * @method addButton\n             * @for Uploader\n             * @grammar addButton( pick ) => Promise\n             * @description\n             * [options.pick](#WebUploader:Uploader:options)\n             * @example\n             * uploader.addButton({\n             *     id: '#btnContainer',\n             *     innerHTML: ''\n             * });\n             */\n            addBtn: function( pick ) {\n                var me = this,\n                    opts = me.options,\n                    accept = opts.accept,\n                    promises = [];\n\n                if ( !pick ) {\n                    return;\n                }\n\n                $.isPlainObject( pick ) || (pick = {\n                    id: pick\n                });\n\n                $( pick.id ).each(function() {\n                    var options, picker, deferred;\n\n                    deferred = Base.Deferred();\n\n                    options = $.extend({}, pick, {\n                        accept: $.isPlainObject( accept ) ? [ accept ] : accept,\n                        swf: opts.swf,\n                        runtimeOrder: opts.runtimeOrder,\n                        id: this\n                    });\n\n                    picker = new FilePicker( options );\n\n                    picker.once( 'ready', deferred.resolve );\n                    picker.on( 'select', function( files ) {\n                        me.owner.request( 'add-file', [ files ]);\n                    });\n                    picker.init();\n\n                    me.pickers.push( picker );\n\n                    promises.push( deferred.promise() );\n                });\n\n                return Base.when.apply( Base, promises );\n            },\n\n            disable: function() {\n                $.each( this.pickers, function() {\n                    this.disable();\n                });\n            },\n\n            enable: function() {\n                $.each( this.pickers, function() {\n                    this.enable();\n                });\n            },\n\n            destroy: function() {\n                $.each( this.pickers, function() {\n                    this.destroy();\n                });\n                this.pickers = null;\n            }\n        });\n    });\n    /**\n     * @fileOverview Image\n     */\n    define('lib/image',[\n        'base',\n        'runtime/client',\n        'lib/blob'\n    ], function( Base, RuntimeClient, Blob ) {\n        var $ = Base.$;\n\n        // \n        function Image( opts ) {\n            this.options = $.extend({}, Image.options, opts );\n            RuntimeClient.call( this, 'Image' );\n\n            this.on( 'load', function() {\n                this._info = this.exec('info');\n                this._meta = this.exec('meta');\n            });\n        }\n\n        // \n        Image.options = {\n\n            // \n            quality: 90,\n\n            // \n            crop: false,\n\n            // \n            preserveHeaders: false,\n\n            // \n            allowMagnify: false\n        };\n\n        // RuntimeClient.\n        Base.inherits( RuntimeClient, {\n            constructor: Image,\n\n            info: function( val ) {\n\n                // setter\n                if ( val ) {\n                    this._info = val;\n                    return this;\n                }\n\n                // getter\n                return this._info;\n            },\n\n            meta: function( val ) {\n\n                // setter\n                if ( val ) {\n                    this._meta = val;\n                    return this;\n                }\n\n                // getter\n                return this._meta;\n            },\n\n            loadFromBlob: function( blob ) {\n                var me = this,\n                    ruid = blob.getRuid();\n\n                this.connectRuntime( ruid, function() {\n                    me.exec( 'init', me.options );\n                    me.exec( 'loadFromBlob', blob );\n                });\n            },\n\n            resize: function() {\n                var args = Base.slice( arguments );\n                return this.exec.apply( this, [ 'resize' ].concat( args ) );\n            },\n\n            crop: function() {\n                var args = Base.slice( arguments );\n                return this.exec.apply( this, [ 'crop' ].concat( args ) );\n            },\n\n            getAsDataUrl: function( type ) {\n                return this.exec( 'getAsDataUrl', type );\n            },\n\n            getAsBlob: function( type ) {\n                var blob = this.exec( 'getAsBlob', type );\n\n                return new Blob( this.getRuid(), blob );\n            }\n        });\n\n        return Image;\n    });\n    /**\n     * @fileOverview , \n     */\n    define('widgets/image',[\n        'base',\n        'uploader',\n        'lib/image',\n        'widgets/widget'\n    ], function( Base, Uploader, Image ) {\n\n        var $ = Base.$,\n            throttle;\n\n        // \n        throttle = (function( max ) {\n            var occupied = 0,\n                waiting = [],\n                tick = function() {\n                    var item;\n\n                    while ( waiting.length && occupied < max ) {\n                        item = waiting.shift();\n                        occupied += item[ 0 ];\n                        item[ 1 ]();\n                    }\n                };\n\n            return function( emiter, size, cb ) {\n                waiting.push([ size, cb ]);\n                emiter.once( 'destroy', function() {\n                    occupied -= size;\n                    setTimeout( tick, 1 );\n                });\n                setTimeout( tick, 1 );\n            };\n        })( 5 * 1024 * 1024 );\n\n        $.extend( Uploader.options, {\n\n            /**\n             * @property {Object} [thumb]\n             * @namespace options\n             * @for Uploader\n             * @description \n             *\n             * \n             *\n             * ```javascript\n             * {\n             *     width: 110,\n             *     height: 110,\n             *\n             *     // type`image/jpeg`\n             *     quality: 70,\n             *\n             *     // false.\n             *     allowMagnify: true,\n             *\n             *     // \n             *     crop: true,\n             *\n             *     // \n             *     // \n             *     type: 'image/jpeg'\n             * }\n             * ```\n             */\n            thumb: {\n                width: 110,\n                height: 110,\n                quality: 70,\n                allowMagnify: true,\n                crop: true,\n                preserveHeaders: false,\n\n                // \n                // \n                // IE 8 base64  32K  jpeg \n                //  32k,  image/jpeg\n                type: 'image/jpeg'\n            },\n\n            /**\n             * @property {Object} [compress]\n             * @namespace options\n             * @for Uploader\n             * @description `false`, \n             *\n             * \n             *\n             * ```javascript\n             * {\n             *     width: 1600,\n             *     height: 1600,\n             *\n             *     // type`image/jpeg`\n             *     quality: 90,\n             *\n             *     // false.\n             *     allowMagnify: false,\n             *\n             *     // \n             *     crop: false,\n             *\n             *     // meta\n             *     preserveHeaders: true,\n             *\n             *     // \n             *     // \n             *     noCompressIfLarger: false,\n             *\n             *     // \n             *     compressSize: 0\n             * }\n             * ```\n             */\n            compress: {\n                width: 1600,\n                height: 1600,\n                quality: 90,\n                allowMagnify: false,\n                crop: false,\n                preserveHeaders: true\n            }\n        });\n\n        return Uploader.register({\n\n            name: 'image',\n\n\n            /**\n             * `callback`\n             * \n             *\n             *  width  height  0 - 1 \n             *\n             * `callback`\n             * * errorerror\n             * * ret, Data URL\n             *\n             * ****\n             * Date URLIE6/7\n             *  base64 \n             *\n             * @method makeThumb\n             * @grammar makeThumb( file, callback ) => undefined\n             * @grammar makeThumb( file, callback, width, height ) => undefined\n             * @for Uploader\n             * @example\n             *\n             * uploader.on( 'fileQueued', function( file ) {\n             *     var $li = ...;\n             *\n             *     uploader.makeThumb( file, function( error, ret ) {\n             *         if ( error ) {\n             *             $li.text('');\n             *         } else {\n             *             $li.append('<img alt=\"\" src=\"' + ret + '\" />');\n             *         }\n             *     });\n             *\n             * });\n             */\n            makeThumb: function( file, cb, width, height ) {\n                var opts, image;\n                var isArtwork = false;\n                file = this.request( 'get-file', file );\n\n                // \n                if ( !file.type.match( /^image/ ) ) {\n                    cb( true );\n                    return;\n                }\n\n                opts = $.extend({}, this.options.thumb );\n                isArtwork = $.isPlainObject( this.options.thumb ) ? false : true;\n                // object.\n                if ( $.isPlainObject( width ) ) {\n                    opts = $.extend( opts, width );\n                    width = null;\n                }\n\n                width = width || opts.width;\n                height = height || opts.height;\n\n                image = new Image( opts );\n\n                image.once( 'load', function() {\n                    file._info = file._info || image.info();\n                    file._meta = file._meta || image.meta();\n\n                    //  width  0 - 1\n                    // \n                    if ( width <= 1 && width > 0 ) {\n                        width = file._info.width * width;\n                    }\n\n                    //  height\n                    if ( height <= 1 && height > 0 ) {\n                        height = file._info.height * height;\n                    }\n                    if( isArtwork ){\n                        image.resize( file._info.width, file._info.height );\n\n                    }else{\n                        image.resize( width, height );\n\n\n                    }\n\n                });\n\n                //  resize \n                image.once( 'complete', function() {\n                    cb( false, image.getAsDataUrl( opts.type ) );\n                    image.destroy();\n                });\n\n                image.once( 'error', function( reason ) {\n                    cb( reason || true );\n                    image.destroy();\n                });\n\n                throttle( image, file.source.size, function() {\n                    file._info && image.info( file._info );\n                    file._meta && image.meta( file._meta );\n                    image.loadFromBlob( file.source );\n                });\n            },\n\n            beforeSendFile: function( file ) {\n                var opts = this.options.compress || this.options.resize,\n                    compressSize = opts && opts.compressSize || 0,\n                    noCompressIfLarger = opts && opts.noCompressIfLarger || false,\n                    image, deferred;\n\n                file = this.request( 'get-file', file );\n\n                //  jpeg \n                // gif \n                // bmp png \n                if ( !opts || !~'image/jpeg,image/jpg'.indexOf( file.type ) ||\n                        file.size < compressSize ||\n                        file._compressed ) {\n                    return;\n                }\n\n                opts = $.extend({}, opts );\n                deferred = Base.Deferred();\n\n                image = new Image( opts );\n\n                deferred.always(function() {\n                    image.destroy();\n                    image = null;\n                });\n                image.once( 'error', deferred.reject );\n                image.once( 'load', function() {\n                    var width = opts.width,\n                        height = opts.height;\n\n                    file._info = file._info || image.info();\n                    file._meta = file._meta || image.meta();\n\n                    //  width  0 - 1\n                    // \n                    if ( width <= 1 && width > 0 ) {\n                        width = file._info.width * width;\n                    }\n\n                    //  height\n                    if ( height <= 1 && height > 0 ) {\n                        height = file._info.height * height;\n                    }\n\n                    image.resize( width, height );\n                });\n\n                image.once( 'complete', function() {\n                    var blob, size;\n\n                    //  UC / qq \n                    // ctx.getImageData  Exception\n                    // INDEX_SIZE_ERR: DOM Exception 1\n                    try {\n                        blob = image.getAsBlob( opts.type );\n\n                        size = file.size;\n\n                        // \n                        if ( !noCompressIfLarger || blob.size < size ) {\n                            // file.source.destroy && file.source.destroy();\n                            file.source = blob;\n                            file.size = blob.size;\n\n                            file.trigger( 'resize', blob.size, size );\n                        }\n\n                        // \n                        file._compressed = true;\n                        deferred.resolve();\n                    } catch ( e ) {\n                        // \n                        deferred.resolve();\n                    }\n                });\n\n                file._info && image.info( file._info );\n                file._meta && image.meta( file._meta );\n\n                image.loadFromBlob( file.source );\n                return deferred.promise();\n            }\n        });\n    });\n    /**\n     * @fileOverview \n     */\n    define('file',[\n        'base',\n        'mediator'\n    ], function( Base, Mediator ) {\n\n        var $ = Base.$,\n            idPrefix = 'WU_FILE_',\n            idSuffix = 0,\n            rExt = /\\.([^.]+)$/,\n            statusMap = {};\n\n        function gid() {\n            return idPrefix + idSuffix++;\n        }\n\n        /**\n         * \n         * @class File\n         * @constructor \n         * @grammar new File( source ) => File\n         * @param {Lib.File} source [lib.File](#Lib.File), sourceRuntime\n         */\n        function WUFile( source ) {\n\n            /**\n             * \n             * @property name\n             * @type {string}\n             */\n            this.name = source.name || 'Untitled';\n\n            /**\n             * \n             * @property size\n             * @type {uint}\n             * @default 0\n             */\n            this.size = source.size || 0;\n\n            /**\n             * MIMETYPE[http://t.cn/z8ZnFny](http://t.cn/z8ZnFny)\n             * @property type\n             * @type {string}\n             * @default 'application/octet-stream'\n             */\n            this.type = source.type || 'application/octet-stream';\n\n            /**\n             * \n             * @property lastModifiedDate\n             * @type {int}\n             * @default \n             */\n            this.lastModifiedDate = source.lastModifiedDate || (new Date() * 1);\n\n            /**\n             * IDID\n             * @property id\n             * @type {string}\n             */\n            this.id = gid();\n\n            /**\n             * test.pngpng\n             * @property ext\n             * @type {string}\n             */\n            this.ext = rExt.exec( this.name ) ? RegExp.$1 : '';\n\n\n            /**\n             * status\n             * @property statusText\n             * @type {string}\n             */\n            this.statusText = '';\n\n            // \n            statusMap[ this.id ] = WUFile.Status.INITED;\n\n            this.source = source;\n            this.loaded = 0;\n\n            this.on( 'error', function( msg ) {\n                this.setStatus( WUFile.Status.ERROR, msg );\n            });\n        }\n\n        $.extend( WUFile.prototype, {\n\n            /**\n             * `change`\n             * @method setStatus\n             * @grammar setStatus( status[, statusText] );\n             * @param {File.Status|String} status [](#WebUploader:File:File.Status)\n             * @param {String} [statusText=''] errorhttp, abort,server\n             */\n            setStatus: function( status, text ) {\n\n                var prevStatus = statusMap[ this.id ];\n\n                typeof text !== 'undefined' && (this.statusText = text);\n\n                if ( status !== prevStatus ) {\n                    statusMap[ this.id ] = status;\n                    /**\n                     * \n                     * @event statuschange\n                     */\n                    this.trigger( 'statuschange', status, prevStatus );\n                }\n\n            },\n\n            /**\n             * \n             * @return {File.Status}\n             * @example\n                     \n                     {\n                         // \n                        INITED:     0,\n                        // \n                        QUEUED:     1,\n                        // \n                        PROGRESS:     2,\n                        // \n                        ERROR:         3,\n                        // \n                        COMPLETE:     4,\n                        // \n                        CANCELLED:     5\n                    }\n             */\n            getStatus: function() {\n                return statusMap[ this.id ];\n            },\n\n            /**\n             * \n             * @return {*}\n             */\n            getSource: function() {\n                return this.source;\n            },\n\n            destroy: function() {\n                this.off();\n                delete statusMap[ this.id ];\n            }\n        });\n\n        Mediator.installTo( WUFile.prototype );\n\n        /**\n         * \n         * * `inited` \n         * * `queued` , \n         * * `progress` \n         * * `complete` \n         * * `error` \n         * * `interrupt` \n         * * `invalid` \n         * * `cancelled` \n         * @property {Object} Status\n         * @namespace File\n         * @class File\n         * @static\n         */\n        WUFile.Status = {\n            INITED:     'inited',    // \n            QUEUED:     'queued',    // , \n            PROGRESS:   'progress',    // \n            ERROR:      'error',    // \n            COMPLETE:   'complete',    // \n            CANCELLED:  'cancelled',    // \n            INTERRUPT:  'interrupt',    // \n            INVALID:    'invalid'    // \n        };\n\n        return WUFile;\n    });\n\n    /**\n     * @fileOverview \n     */\n    define('queue',[\n        'base',\n        'mediator',\n        'file'\n    ], function( Base, Mediator, WUFile ) {\n\n        var $ = Base.$,\n            STATUS = WUFile.Status;\n\n        /**\n         * , \n         * @class Queue\n         * @extends Mediator\n         */\n        function Queue() {\n\n            /**\n             * \n             * * `numOfQueue` \n             * * `numOfSuccess` \n             * * `numOfCancel` \n             * * `numOfProgress` \n             * * `numOfUploadFailed` \n             * * `numOfInvalid` \n             * * `numofDeleted` \n             * @property {Object} stats\n             */\n            this.stats = {\n                numOfQueue: 0,\n                numOfSuccess: 0,\n                numOfCancel: 0,\n                numOfProgress: 0,\n                numOfUploadFailed: 0,\n                numOfInvalid: 0,\n                numofDeleted: 0,\n                numofInterrupt: 0\n            };\n\n            // \n            this._queue = [];\n\n            // \n            this._map = {};\n        }\n\n        $.extend( Queue.prototype, {\n\n            /**\n             * \n             *\n             * @method append\n             * @param  {File} file   \n             */\n            append: function( file ) {\n                this._queue.push( file );\n                this._fileAdded( file );\n                return this;\n            },\n\n            /**\n             * \n             *\n             * @method prepend\n             * @param  {File} file   \n             */\n            prepend: function( file ) {\n                this._queue.unshift( file );\n                this._fileAdded( file );\n                return this;\n            },\n\n            /**\n             * \n             *\n             * @method getFile\n             * @param  {String} fileId   ID\n             * @return {File}\n             */\n            getFile: function( fileId ) {\n                if ( typeof fileId !== 'string' ) {\n                    return fileId;\n                }\n                return this._map[ fileId ];\n            },\n\n            /**\n             * \n             * @grammar fetch( status ) => File\n             * @method fetch\n             * @param {String} status [](#WebUploader:File:File.Status)\n             * @return {File} [File](#WebUploader:File)\n             */\n            fetch: function( status ) {\n                var len = this._queue.length,\n                    i, file;\n\n                status = status || STATUS.QUEUED;\n\n                for ( i = 0; i < len; i++ ) {\n                    file = this._queue[ i ];\n\n                    if ( status === file.getStatus() ) {\n                        return file;\n                    }\n                }\n\n                return null;\n            },\n\n            /**\n             * \n             * @grammar sort( fn ) => undefined\n             * @method sort\n             * @param {Function} fn \n             */\n            sort: function( fn ) {\n                if ( typeof fn === 'function' ) {\n                    this._queue.sort( fn );\n                }\n            },\n\n            /**\n             * , [File](#WebUploader:File)\n             * @grammar getFiles( [status1[, status2 ...]] ) => Array\n             * @method getFiles\n             * @param {String} [status] [](#WebUploader:File:File.Status)\n             */\n            getFiles: function() {\n                var sts = [].slice.call( arguments, 0 ),\n                    ret = [],\n                    i = 0,\n                    len = this._queue.length,\n                    file;\n\n                for ( ; i < len; i++ ) {\n                    file = this._queue[ i ];\n\n                    if ( sts.length && !~$.inArray( file.getStatus(), sts ) ) {\n                        continue;\n                    }\n\n                    ret.push( file );\n                }\n\n                return ret;\n            },\n\n            /**\n             * \n             * @grammar removeFile( file ) => Array\n             * @method removeFile\n             * @param {File} \n             */\n            removeFile: function( file ) {\n                var me = this,\n                    existing = this._map[ file.id ];\n\n                if ( existing ) {\n                    delete this._map[ file.id ];\n                    file.destroy();\n                    this.stats.numofDeleted++;\n                }\n            },\n\n            _fileAdded: function( file ) {\n                var me = this,\n                    existing = this._map[ file.id ];\n\n                if ( !existing ) {\n                    this._map[ file.id ] = file;\n\n                    file.on( 'statuschange', function( cur, pre ) {\n                        me._onFileStatusChange( cur, pre );\n                    });\n                }\n            },\n\n            _onFileStatusChange: function( curStatus, preStatus ) {\n                var stats = this.stats;\n\n                switch ( preStatus ) {\n                    case STATUS.PROGRESS:\n                        stats.numOfProgress--;\n                        break;\n\n                    case STATUS.QUEUED:\n                        stats.numOfQueue --;\n                        break;\n\n                    case STATUS.ERROR:\n                        stats.numOfUploadFailed--;\n                        break;\n\n                    case STATUS.INVALID:\n                        stats.numOfInvalid--;\n                        break;\n\n                    case STATUS.INTERRUPT:\n                        stats.numofInterrupt--;\n                        break;\n                }\n\n                switch ( curStatus ) {\n                    case STATUS.QUEUED:\n                        stats.numOfQueue++;\n                        break;\n\n                    case STATUS.PROGRESS:\n                        stats.numOfProgress++;\n                        break;\n\n                    case STATUS.ERROR:\n                        stats.numOfUploadFailed++;\n                        break;\n\n                    case STATUS.COMPLETE:\n                        stats.numOfSuccess++;\n                        break;\n\n                    case STATUS.CANCELLED:\n                        stats.numOfCancel++;\n                        break;\n\n\n                    case STATUS.INVALID:\n                        stats.numOfInvalid++;\n                        break;\n\n                    case STATUS.INTERRUPT:\n                        stats.numofInterrupt++;\n                        break;\n                }\n            }\n\n        });\n\n        Mediator.installTo( Queue.prototype );\n\n        return Queue;\n    });\n    /**\n     * @fileOverview \n     */\n    define('widgets/queue',[\n        'base',\n        'uploader',\n        'queue',\n        'file',\n        'lib/file',\n        'runtime/client',\n        'widgets/widget'\n    ], function( Base, Uploader, Queue, WUFile, File, RuntimeClient ) {\n\n        var $ = Base.$,\n            rExt = /\\.\\w+$/,\n            Status = WUFile.Status;\n\n        return Uploader.register({\n            name: 'queue',\n\n            init: function( opts ) {\n                var me = this,\n                    deferred, len, i, item, arr, accept, runtime;\n\n                if ( $.isPlainObject( opts.accept ) ) {\n                    opts.accept = [ opts.accept ];\n                }\n\n                // accept\n                if ( opts.accept ) {\n                    arr = [];\n\n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\n                        item = opts.accept[ i ].extensions;\n                        item && arr.push( item );\n                    }\n\n                    if ( arr.length ) {\n                        accept = '\\\\.' + arr.join(',')\n                                .replace( /,/g, '$|\\\\.' )\n                                .replace( /\\*/g, '.*' ) + '$';\n                    }\n\n                    me.accept = new RegExp( accept, 'i' );\n                }\n\n                me.queue = new Queue();\n                me.stats = me.queue.stats;\n\n                // html5\n                // \n                if ( this.request('predict-runtime-type') !== 'html5' ) {\n                    return;\n                }\n\n                //  html5  placeholder\n                //  File  webuploader \n                deferred = Base.Deferred();\n                this.placeholder = runtime = new RuntimeClient('Placeholder');\n                runtime.connectRuntime({\n                    runtimeOrder: 'html5'\n                }, function() {\n                    me._ruid = runtime.getRuid();\n                    deferred.resolve();\n                });\n                return deferred.promise();\n            },\n\n\n            // File\n            _wrapFile: function( file ) {\n                if ( !(file instanceof WUFile) ) {\n\n                    if ( !(file instanceof File) ) {\n                        if ( !this._ruid ) {\n                            throw new Error('Can\\'t add external files.');\n                        }\n                        file = new File( this._ruid, file );\n                    }\n\n                    file = new WUFile( file );\n                }\n\n                return file;\n            },\n\n            // \n            acceptFile: function( file ) {\n                 var invalid = !file || !file.size || this.accept &&\n\n                        // \n                        rExt.exec( file.name )!== null ? !this.accept.test( file.name ) : true;\n                return !invalid;\n            },\n\n\n            /**\n             * @event beforeFileQueued\n             * @param {File} file File\n             * @description handler`false`\n             * @for  Uploader\n             */\n\n            /**\n             * @event fileQueued\n             * @param {File} file File\n             * @description \n             * @for  Uploader\n             */\n\n            _addFile: function( file ) {\n                var me = this;\n\n                file = me._wrapFile( file );\n\n                //  `beforeFileQueued`\n                if ( !me.owner.trigger( 'beforeFileQueued', file ) ) {\n                    return;\n                }\n\n                // \n                if ( !me.acceptFile( file ) ) {\n                    me.owner.trigger( 'error', 'Q_TYPE_DENIED', file );\n                    return;\n                }\n\n                me.queue.append( file );\n                me.owner.trigger( 'fileQueued', file );\n                return file;\n            },\n\n            getFile: function( fileId ) {\n                return this.queue.getFile( fileId );\n            },\n\n            /**\n             * @event filesQueued\n             * @param {File} files File(lib/File\n             * @description \n             * @for  Uploader\n             */\n\n            /**\n             * @property {Boolean} [auto=false]\n             * @namespace options\n             * @for Uploader\n             * @description  true \n             *\n             */\n\n            /**\n             * @method addFiles\n             * @grammar addFiles( file ) => undefined\n             * @grammar addFiles( [file1, file2 ...] ) => undefined\n             * @param {Array of File or File} [files] Files  \n             * @description \n             * @for  Uploader\n             */\n            addFile: function( files ) {\n                var me = this;\n\n                if ( !files.length ) {\n                    files = [ files ];\n                }\n\n                files = $.map( files, function( file ) {\n                    return me._addFile( file );\n                });\n\n                me.owner.trigger( 'filesQueued', files );\n\n                if ( me.options.auto ) {\n                    setTimeout(function() {\n                        me.request('start-upload');\n                    }, 20 );\n                }\n            },\n\n            getStats: function() {\n                return this.stats;\n            },\n\n            /**\n             * @event fileDequeued\n             * @param {File} file File\n             * @description \n             * @for  Uploader\n             */\n\n             /**\n             * @method removeFile\n             * @grammar removeFile( file ) => undefined\n             * @grammar removeFile( id ) => undefined\n             * @grammar removeFile( file, true ) => undefined\n             * @grammar removeFile( id, true ) => undefined\n             * @param {File|id} file FileFileid\n             * @description ,  `true`  queue \n             * @for  Uploader\n             * @example\n             *\n             * $li.on('click', '.remove-this', function() {\n             *     uploader.removeFile( file );\n             * })\n             */\n            removeFile: function( file, remove ) {\n                var me = this;\n\n                file = file.id ? file : me.queue.getFile( file );\n\n                this.request( 'cancel-file', file );\n\n                if ( remove ) {\n                    this.queue.removeFile( file );\n                }\n            },\n\n            /**\n             * @method getFiles\n             * @grammar getFiles() => Array\n             * @grammar getFiles( status1, status2, status... ) => Array\n             * @description \n             * @for  Uploader\n             * @example\n             * console.log( uploader.getFiles() );    // => all files\n             * console.log( uploader.getFiles('error') )    // => all error files.\n             */\n            getFiles: function() {\n                return this.queue.getFiles.apply( this.queue, arguments );\n            },\n\n            fetchFile: function() {\n                return this.queue.fetch.apply( this.queue, arguments );\n            },\n\n            /**\n             * @method retry\n             * @grammar retry() => undefined\n             * @grammar retry( file ) => undefined\n             * @description \n             * @for  Uploader\n             * @example\n             * function retry() {\n             *     uploader.retry();\n             * }\n             */\n            retry: function( file, noForceStart ) {\n                var me = this,\n                    files, i, len;\n\n                if ( file ) {\n                    file = file.id ? file : me.queue.getFile( file );\n                    file.setStatus( Status.QUEUED );\n                    noForceStart || me.request('start-upload');\n                    return;\n                }\n\n                files = me.queue.getFiles( Status.ERROR );\n                i = 0;\n                len = files.length;\n\n                for ( ; i < len; i++ ) {\n                    file = files[ i ];\n                    file.setStatus( Status.QUEUED );\n                }\n\n                me.request('start-upload');\n            },\n\n            /**\n             * @method sort\n             * @grammar sort( fn ) => undefined\n             * @description \n             * @for  Uploader\n             */\n            sortFiles: function() {\n                return this.queue.sort.apply( this.queue, arguments );\n            },\n\n            /**\n             * @event reset\n             * @description  uploader \n             * @for  Uploader\n             */\n\n            /**\n             * @method reset\n             * @grammar reset() => undefined\n             * @description uploader\n             * @for  Uploader\n             * @example\n             * uploader.reset();\n             */\n            reset: function() {\n                this.owner.trigger('reset');\n                this.queue = new Queue();\n                this.stats = this.queue.stats;\n            },\n\n            destroy: function() {\n                this.reset();\n                this.placeholder && this.placeholder.destroy();\n            }\n        });\n\n    });\n    /**\n     * @fileOverview Runtime\n     */\n    define('widgets/runtime',[\n        'uploader',\n        'runtime/runtime',\n        'widgets/widget'\n    ], function( Uploader, Runtime ) {\n\n        Uploader.support = function() {\n            return Runtime.hasRuntime.apply( Runtime, arguments );\n        };\n\n        /**\n         * @property {Object} [runtimeOrder=html5,flash]\n         * @namespace options\n         * @for Uploader\n         * @description  html5  html5,  flash.\n         *\n         *  `flash` flash \n         */\n\n        return Uploader.register({\n            name: 'runtime',\n\n            init: function() {\n                if ( !this.predictRuntimeType() ) {\n                    throw Error('Runtime Error');\n                }\n            },\n\n            /**\n             * Uploader`Runtime`\n             * @grammar predictRuntimeType() => String\n             * @method predictRuntimeType\n             * @for  Uploader\n             */\n            predictRuntimeType: function() {\n                var orders = this.options.runtimeOrder || Runtime.orders,\n                    type = this.type,\n                    i, len;\n\n                if ( !type ) {\n                    orders = orders.split( /\\s*,\\s*/g );\n\n                    for ( i = 0, len = orders.length; i < len; i++ ) {\n                        if ( Runtime.hasRuntime( orders[ i ] ) ) {\n                            this.type = type = orders[ i ];\n                            break;\n                        }\n                    }\n                }\n\n                return type;\n            }\n        });\n    });\n    /**\n     * @fileOverview Transport\n     */\n    define('lib/transport',[\n        'base',\n        'runtime/client',\n        'mediator'\n    ], function( Base, RuntimeClient, Mediator ) {\n\n        var $ = Base.$;\n\n        function Transport( opts ) {\n            var me = this;\n\n            opts = me.options = $.extend( true, {}, Transport.options, opts || {} );\n            RuntimeClient.call( this, 'Transport' );\n\n            this._blob = null;\n            this._formData = opts.formData || {};\n            this._headers = opts.headers || {};\n\n            this.on( 'progress', this._timeout );\n            this.on( 'load error', function() {\n                me.trigger( 'progress', 1 );\n                clearTimeout( me._timer );\n            });\n        }\n\n        Transport.options = {\n            server: '',\n            method: 'POST',\n\n            // cookie, html5 runtime\n            withCredentials: false,\n            fileVal: 'file',\n            timeout: 2 * 60 * 1000,    // 2\n            formData: {},\n            headers: {},\n            sendAsBinary: false\n        };\n\n        $.extend( Transport.prototype, {\n\n            // Blob, \n            appendBlob: function( key, blob, filename ) {\n                var me = this,\n                    opts = me.options;\n\n                if ( me.getRuid() ) {\n                    me.disconnectRuntime();\n                }\n\n                // blobruntime.\n                me.connectRuntime( blob.ruid, function() {\n                    me.exec('init');\n                });\n\n                me._blob = blob;\n                opts.fileVal = key || opts.fileVal;\n                opts.filename = filename || opts.filename;\n\n            },\n\n            // \n            append: function( key, value ) {\n                if ( typeof key === 'object' ) {\n                    $.extend( this._formData, key );\n                } else {\n                    this._formData[ key ] = value;\n                }\n            },\n\n            setRequestHeader: function( key, value ) {\n                if ( typeof key === 'object' ) {\n                    $.extend( this._headers, key );\n                } else {\n                    this._headers[ key ] = value;\n                }\n            },\n\n            send: function( method ) {\n                this.exec( 'send', method );\n                this._timeout();\n            },\n\n            abort: function() {\n                clearTimeout( this._timer );\n                return this.exec('abort');\n            },\n\n            destroy: function() {\n                this.trigger('destroy');\n                this.off();\n                this.exec('destroy');\n                this.disconnectRuntime();\n            },\n\n            getResponse: function() {\n                return this.exec('getResponse');\n            },\n\n            getResponseAsJson: function() {\n                return this.exec('getResponseAsJson');\n            },\n\n            getStatus: function() {\n                return this.exec('getStatus');\n            },\n\n            _timeout: function() {\n                var me = this,\n                    duration = me.options.timeout;\n\n                if ( !duration ) {\n                    return;\n                }\n\n                clearTimeout( me._timer );\n                me._timer = setTimeout(function() {\n                    me.abort();\n                    me.trigger( 'error', 'timeout' );\n                }, duration );\n            }\n\n        });\n\n        // Transport\n        Mediator.installTo( Transport.prototype );\n\n        return Transport;\n    });\n    /**\n     * @fileOverview \n     */\n    define('widgets/upload',[\n        'base',\n        'uploader',\n        'file',\n        'lib/transport',\n        'widgets/widget'\n    ], function( Base, Uploader, WUFile, Transport ) {\n\n        var $ = Base.$,\n            isPromise = Base.isPromise,\n            Status = WUFile.Status;\n\n        // \n        $.extend( Uploader.options, {\n\n\n            /**\n             * @property {Boolean} [prepareNextFile=false]\n             * @namespace options\n             * @for Uploader\n             * @description \n             * md5\n             * \n             */\n            prepareNextFile: false,\n\n            /**\n             * @property {Boolean} [chunked=false]\n             * @namespace options\n             * @for Uploader\n             * @description \n             */\n            chunked: false,\n\n            /**\n             * @property {Boolean} [chunkSize=5242880]\n             * @namespace options\n             * @for Uploader\n             * @description  5M.\n             */\n            chunkSize: 5 * 1024 * 1024,\n\n            /**\n             * @property {Boolean} [chunkRetry=2]\n             * @namespace options\n             * @for Uploader\n             * @description \n             */\n            chunkRetry: 2,\n\n            /**\n             * @property {Boolean} [threads=3]\n             * @namespace options\n             * @for Uploader\n             * @description \n             */\n            threads: 3,\n\n\n            /**\n             * @property {Object} [formData={}]\n             * @namespace options\n             * @for Uploader\n             * @description \n             */\n            formData: {}\n\n            /**\n             * @property {Object} [fileVal='file']\n             * @namespace options\n             * @for Uploader\n             * @description name\n             */\n\n            /**\n             * @property {Object} [method='POST']\n             * @namespace options\n             * @for Uploader\n             * @description `POST``GET`\n             */\n\n            /**\n             * @property {Object} [sendAsBinary=false]\n             * @namespace options\n             * @for Uploader\n             * @description `php://input`\n             * $_GET\n             */\n        });\n\n        // \n        function CuteFile( file, chunkSize ) {\n            var pending = [],\n                blob = file.source,\n                total = blob.size,\n                chunks = chunkSize ? Math.ceil( total / chunkSize ) : 1,\n                start = 0,\n                index = 0,\n                len, api;\n\n            api = {\n                file: file,\n\n                has: function() {\n                    return !!pending.length;\n                },\n\n                shift: function() {\n                    return pending.shift();\n                },\n\n                unshift: function( block ) {\n                    pending.unshift( block );\n                }\n            };\n\n            while ( index < chunks ) {\n                len = Math.min( chunkSize, total - start );\n\n                pending.push({\n                    file: file,\n                    start: start,\n                    end: chunkSize ? (start + len) : total,\n                    total: total,\n                    chunks: chunks,\n                    chunk: index++,\n                    cuted: api\n                });\n                start += len;\n            }\n\n            file.blocks = pending.concat();\n            file.remaning = pending.length;\n\n            return api;\n        }\n\n        Uploader.register({\n            name: 'upload',\n\n            init: function() {\n                var owner = this.owner,\n                    me = this;\n\n                this.runing = false;\n                this.progress = false;\n\n                owner\n                    .on( 'startUpload', function() {\n                        me.progress = true;\n                    })\n                    .on( 'uploadFinished', function() {\n                        me.progress = false;\n                    });\n\n                // threads\n                this.pool = [];\n\n                // \n                this.stack = [];\n\n                // \n                this.pending = [];\n\n                // \n                this.remaning = 0;\n                this.__tick = Base.bindFn( this._tick, this );\n\n                owner.on( 'uploadComplete', function( file ) {\n\n                    // \n                    file.blocks && $.each( file.blocks, function( _, v ) {\n                        v.transport && (v.transport.abort(), v.transport.destroy());\n                        delete v.transport;\n                    });\n\n                    delete file.blocks;\n                    delete file.remaning;\n                });\n            },\n\n            reset: function() {\n                this.request( 'stop-upload', true );\n                this.runing = false;\n                this.pool = [];\n                this.stack = [];\n                this.pending = [];\n                this.remaning = 0;\n                this._trigged = false;\n                this._promise = null;\n            },\n\n            /**\n             * @event startUpload\n             * @description \n             * @for  Uploader\n             */\n\n            /**\n             * \n             *\n             * \n             * @grammar upload() => undefined\n             * @grammar upload( file | fileId) => undefined\n             * @method upload\n             * @for  Uploader\n             */\n            startUpload: function(file) {\n                var me = this;\n\n                // invalid\n                $.each( me.request( 'get-files', Status.INVALID ), function() {\n                    me.request( 'remove-file', this );\n                });\n\n                // \n                if ( file ) {\n                    file = file.id ? file : me.request( 'get-file', file );\n\n                    if (file.getStatus() === Status.INTERRUPT) {\n                        $.each( me.pool, function( _, v ) {\n\n                            // \n                            if (v.file !== file) {\n                                return;\n                            }\n\n                            v.transport && v.transport.send();\n                        });\n\n                        file.setStatus( Status.QUEUED );\n                    } else if (file.getStatus() === Status.PROGRESS) {\n                        return;\n                    } else {\n                        file.setStatus( Status.QUEUED );\n                    }\n                } else {\n                    $.each( me.request( 'get-files', [ Status.INITED ] ), function() {\n                        this.setStatus( Status.QUEUED );\n                    });\n                }\n\n                if ( me.runing ) {\n                    return;\n                }\n\n                me.runing = true;\n\n                var files = [];\n\n                // \n                $.each( me.pool, function( _, v ) {\n                    var file = v.file;\n\n                    if ( file.getStatus() === Status.INTERRUPT ) {\n                        files.push(file);\n                        me._trigged = false;\n                        v.transport && v.transport.send();\n                    }\n                });\n\n                var file;\n                while ( (file = files.shift()) ) {\n                    file.setStatus( Status.PROGRESS );\n                }\n\n                file || $.each( me.request( 'get-files',\n                        Status.INTERRUPT ), function() {\n                    this.setStatus( Status.PROGRESS );\n                });\n\n                me._trigged = false;\n                Base.nextTick( me.__tick );\n                me.owner.trigger('startUpload');\n            },\n\n            /**\n             * @event stopUpload\n             * @description \n             * @for  Uploader\n             */\n\n            /**\n             * \n             *\n             * \n             * @grammar stop() => undefined\n             * @grammar stop( true ) => undefined\n             * @grammar stop( file ) => undefined\n             * @method stop\n             * @for  Uploader\n             */\n            stopUpload: function( file, interrupt ) {\n                var me = this;\n\n                if (file === true) {\n                    interrupt = file;\n                    file = null;\n                }\n\n                if ( me.runing === false ) {\n                    return;\n                }\n\n                // \n                if ( file ) {\n                    file = file.id ? file : me.request( 'get-file', file );\n\n                    if ( file.getStatus() !== Status.PROGRESS &&\n                            file.getStatus() !== Status.QUEUED ) {\n                        return;\n                    }\n\n                    file.setStatus( Status.INTERRUPT );\n                    $.each( me.pool, function( _, v ) {\n\n                        //  abort \n                        if (v.file !== file) {\n                            return;\n                        }\n\n                        v.transport && v.transport.abort();\n                        me._putback(v);\n                        me._popBlock(v);\n                    });\n\n                    return Base.nextTick( me.__tick );\n                }\n\n                me.runing = false;\n\n                if (this._promise && this._promise.file) {\n                    this._promise.file.setStatus( Status.INTERRUPT );\n                }\n\n                interrupt && $.each( me.pool, function( _, v ) {\n                    v.transport && v.transport.abort();\n                    v.file.setStatus( Status.INTERRUPT );\n                });\n\n                me.owner.trigger('stopUpload');\n            },\n\n            /**\n             * @method cancelFile\n             * @grammar cancelFile( file ) => undefined\n             * @grammar cancelFile( id ) => undefined\n             * @param {File|id} file FileFileid\n             * @description , \n             * @for  Uploader\n             * @example\n             *\n             * $li.on('click', '.remove-this', function() {\n             *     uploader.cancelFile( file );\n             * })\n             */\n            cancelFile: function( file ) {\n                file = file.id ? file : this.request( 'get-file', file );\n\n                // \n                file.blocks && $.each( file.blocks, function( _, v ) {\n                    var _tr = v.transport;\n\n                    if ( _tr ) {\n                        _tr.abort();\n                        _tr.destroy();\n                        delete v.transport;\n                    }\n                });\n\n                file.setStatus( Status.CANCELLED );\n                this.owner.trigger( 'fileDequeued', file );\n            },\n\n            /**\n             * `Uplaode`r\n             * @grammar isInProgress() => Boolean\n             * @method isInProgress\n             * @for  Uploader\n             */\n            isInProgress: function() {\n                return !!this.progress;\n            },\n\n            _getStats: function() {\n                return this.request('get-stats');\n            },\n\n            /**\n             * \n             * @grammar skipFile( file ) => undefined\n             * @method skipFile\n             * @for  Uploader\n             */\n            skipFile: function( file, status ) {\n                file = file.id ? file : this.request( 'get-file', file );\n\n                file.setStatus( status || Status.COMPLETE );\n                file.skipped = true;\n\n                // \n                file.blocks && $.each( file.blocks, function( _, v ) {\n                    var _tr = v.transport;\n\n                    if ( _tr ) {\n                        _tr.abort();\n                        _tr.destroy();\n                        delete v.transport;\n                    }\n                });\n\n                this.owner.trigger( 'uploadSkip', file );\n            },\n\n            /**\n             * @event uploadFinished\n             * @description \n             * @for  Uploader\n             */\n            _tick: function() {\n                var me = this,\n                    opts = me.options,\n                    fn, val;\n\n                // promise\n                if ( me._promise ) {\n                    return me._promise.always( me.__tick );\n                }\n\n                // \n                if ( me.pool.length < opts.threads && (val = me._nextBlock()) ) {\n                    me._trigged = false;\n\n                    fn = function( val ) {\n                        me._promise = null;\n\n                        // rejectval\n                        val && val.file && me._startSend( val );\n                        Base.nextTick( me.__tick );\n                    };\n\n                    me._promise = isPromise( val ) ? val.always( fn ) : fn( val );\n\n                // \n                } else if ( !me.remaning && !me._getStats().numOfQueue &&\n                    !me._getStats().numofInterrupt ) {\n                    me.runing = false;\n\n                    me._trigged || Base.nextTick(function() {\n                        me.owner.trigger('uploadFinished');\n                    });\n                    me._trigged = true;\n                }\n            },\n\n            _putback: function(block) {\n                var idx;\n\n                block.cuted.unshift(block);\n                idx = this.stack.indexOf(block.cuted);\n\n                if (!~idx) {\n                    this.stack.unshift(block.cuted);\n                }\n            },\n\n            _getStack: function() {\n                var i = 0,\n                    act;\n\n                while ( (act = this.stack[ i++ ]) ) {\n                    if ( act.has() && act.file.getStatus() === Status.PROGRESS ) {\n                        return act;\n                    } else if (!act.has() ||\n                            act.file.getStatus() !== Status.PROGRESS &&\n                            act.file.getStatus() !== Status.INTERRUPT ) {\n\n                        //  progress\n                        // interupt \n                        this.stack.splice( --i, 1 );\n                    }\n                }\n\n                return null;\n            },\n\n            _nextBlock: function() {\n                var me = this,\n                    opts = me.options,\n                    act, next, done, preparing;\n\n                // \n                if ( (act = this._getStack()) ) {\n\n                    // \n                    if ( opts.prepareNextFile && !me.pending.length ) {\n                        me._prepareNextFile();\n                    }\n\n                    return act.shift();\n\n                // \n                } else if ( me.runing ) {\n\n                    // queue\n                    if ( !me.pending.length && me._getStats().numOfQueue ) {\n                        me._prepareNextFile();\n                    }\n\n                    next = me.pending.shift();\n                    done = function( file ) {\n                        if ( !file ) {\n                            return null;\n                        }\n\n                        act = CuteFile( file, opts.chunked ? opts.chunkSize : 0 );\n                        me.stack.push(act);\n                        return act.shift();\n                    };\n\n                    // prepare\n                    if ( isPromise( next) ) {\n                        preparing = next.file;\n                        next = next[ next.pipe ? 'pipe' : 'then' ]( done );\n                        next.file = preparing;\n                        return next;\n                    }\n\n                    return done( next );\n                }\n            },\n\n\n            /**\n             * @event uploadStart\n             * @param {File} file File\n             * @description \n             * @for  Uploader\n             */\n            _prepareNextFile: function() {\n                var me = this,\n                    file = me.request('fetch-file'),\n                    pending = me.pending,\n                    promise;\n\n                if ( file ) {\n                    promise = me.request( 'before-send-file', file, function() {\n\n                        // skipskipQueued.\n                        if ( file.getStatus() === Status.PROGRESS ||\n                            file.getStatus() === Status.INTERRUPT ) {\n                            return file;\n                        }\n\n                        return me._finishFile( file );\n                    });\n\n                    me.owner.trigger( 'uploadStart', file );\n                    file.setStatus( Status.PROGRESS );\n\n                    promise.file = file;\n\n                    // pending\n                    promise.done(function() {\n                        var idx = $.inArray( promise, pending );\n\n                        ~idx && pending.splice( idx, 1, file );\n                    });\n\n                    // befeore-send-file\n                    promise.fail(function( reason ) {\n                        file.setStatus( Status.ERROR, reason );\n                        me.owner.trigger( 'uploadError', file, reason );\n                        me.owner.trigger( 'uploadComplete', file );\n                    });\n\n                    pending.push( promise );\n                }\n            },\n\n            // \n            _popBlock: function( block ) {\n                var idx = $.inArray( block, this.pool );\n\n                this.pool.splice( idx, 1 );\n                block.file.remaning--;\n                this.remaning--;\n            },\n\n            // promisereject\n            _startSend: function( block ) {\n                var me = this,\n                    file = block.file,\n                    promise;\n\n                //  before-send-file  promise \n                // \n                //  promise,  promise \n                if ( file.getStatus() !== Status.PROGRESS ) {\n\n                    // \n                    if (file.getStatus() === Status.INTERRUPT) {\n                        me._putback(block);\n                    }\n\n                    return;\n                }\n\n                me.pool.push( block );\n                me.remaning++;\n\n                // \n                // content-type\n                block.blob = block.chunks === 1 ? file.source :\n                        file.source.slice( block.start, block.end );\n\n                // hook, \n                promise = me.request( 'before-send', block, function() {\n\n                    // \n                    if ( file.getStatus() === Status.PROGRESS ) {\n                        me._doSend( block );\n                    } else {\n                        me._popBlock( block );\n                        Base.nextTick( me.__tick );\n                    }\n                });\n\n                // fail\n                promise.fail(function() {\n                    if ( file.remaning === 1 ) {\n                        me._finishFile( file ).always(function() {\n                            block.percentage = 1;\n                            me._popBlock( block );\n                            me.owner.trigger( 'uploadComplete', file );\n                            Base.nextTick( me.__tick );\n                        });\n                    } else {\n                        block.percentage = 1;\n                        me.updateFileProgress( file );\n                        me._popBlock( block );\n                        Base.nextTick( me.__tick );\n                    }\n                });\n            },\n\n\n            /**\n             * @event uploadBeforeSend\n             * @param {Object} object\n             * @param {Object} data \n             * @param {Object} headers \n             * @description \n             * @for  Uploader\n             */\n\n            /**\n             * @event uploadAccept\n             * @param {Object} object\n             * @param {Object} ret jsonjsonret._raw\n             * @description handler`false`, `server``uploadError`\n             * @for  Uploader\n             */\n\n            /**\n             * @event uploadProgress\n             * @param {File} file File\n             * @param {Number} percentage \n             * @description \n             * @for  Uploader\n             */\n\n\n            /**\n             * @event uploadError\n             * @param {File} file File\n             * @param {String} reason code\n             * @description \n             * @for  Uploader\n             */\n\n            /**\n             * @event uploadSuccess\n             * @param {File} file File\n             * @param {Object} response \n             * @description \n             * @for  Uploader\n             */\n\n            /**\n             * @event uploadComplete\n             * @param {File} [file] File\n             * @description \n             * @for  Uploader\n             */\n\n            // \n            _doSend: function( block ) {\n                var me = this,\n                    owner = me.owner,\n                    opts = me.options,\n                    file = block.file,\n                    tr = new Transport( opts ),\n                    data = $.extend({}, opts.formData ),\n                    headers = $.extend({}, opts.headers ),\n                    requestAccept, ret;\n\n                block.transport = tr;\n\n                tr.on( 'destroy', function() {\n                    delete block.transport;\n                    me._popBlock( block );\n                    Base.nextTick( me.__tick );\n                });\n\n                // \n                tr.on( 'progress', function( percentage ) {\n                    block.percentage = percentage;\n                    me.updateFileProgress( file );\n                });\n\n                // \n                requestAccept = function( reject ) {\n                    var fn;\n\n                    ret = tr.getResponseAsJson() || {};\n                    ret._raw = tr.getResponse();\n                    fn = function( value ) {\n                        reject = value;\n                    };\n\n                    // \n                    if ( !owner.trigger( 'uploadAccept', block, ret, fn ) ) {\n                        reject = reject || 'server';\n                    }\n\n                    return reject;\n                };\n\n                // \n                tr.on( 'error', function( type, flag ) {\n                    block.retried = block.retried || 0;\n\n                    // \n                    if ( block.chunks > 1 && ~'http,abort'.indexOf( type ) &&\n                            block.retried < opts.chunkRetry ) {\n\n                        block.retried++;\n                        tr.send();\n\n                    } else {\n\n                        // http status 500 ~ 600\n                        if ( !flag && type === 'server' ) {\n                            type = requestAccept( type );\n                        }\n\n                        file.setStatus( Status.ERROR, type );\n                        owner.trigger( 'uploadError', file, type );\n                        owner.trigger( 'uploadComplete', file );\n                    }\n                });\n\n                // \n                tr.on( 'load', function() {\n                    var reason;\n\n                    // \n                    if ( (reason = requestAccept()) ) {\n                        tr.trigger( 'error', reason, true );\n                        return;\n                    }\n\n                    // \n                    if ( file.remaning === 1 ) {\n                        me._finishFile( file, ret );\n                    } else {\n                        tr.destroy();\n                    }\n                });\n\n                // \n                data = $.extend( data, {\n                    id: file.id,\n                    name: file.name,\n                    type: file.type,\n                    lastModifiedDate: file.lastModifiedDate,\n                    size: file.size\n                });\n\n                block.chunks > 1 && $.extend( data, {\n                    chunks: block.chunks,\n                    chunk: block.chunk\n                });\n\n                // \n                // \n                owner.trigger( 'uploadBeforeSend', block, data, headers );\n\n                // \n                tr.appendBlob( opts.fileVal, block.blob, file.name );\n                tr.append( data );\n                tr.setRequestHeader( headers );\n                tr.send();\n            },\n\n            // \n            _finishFile: function( file, ret, hds ) {\n                var owner = this.owner;\n\n                return owner\n                        .request( 'after-send-file', arguments, function() {\n                            file.setStatus( Status.COMPLETE );\n                            owner.trigger( 'uploadSuccess', file, ret, hds );\n                        })\n                        .fail(function( reason ) {\n\n                            // invalid\n                            if ( file.getStatus() === Status.PROGRESS ) {\n                                file.setStatus( Status.ERROR, reason );\n                            }\n\n                            owner.trigger( 'uploadError', file, reason );\n                        })\n                        .always(function() {\n                            owner.trigger( 'uploadComplete', file );\n                        });\n            },\n\n            updateFileProgress: function(file) {\n                var totalPercent = 0,\n                    uploaded = 0;\n\n                if (!file.blocks) {\n                    return;\n                }\n\n                $.each( file.blocks, function( _, v ) {\n                    uploaded += (v.percentage || 0) * (v.end - v.start);\n                });\n\n                totalPercent = uploaded / file.size;\n                this.owner.trigger( 'uploadProgress', file, totalPercent || 0 );\n            }\n\n        });\n    });\n    /**\n     * @fileOverview \n     */\n\n    define('widgets/validator',[\n        'base',\n        'uploader',\n        'file',\n        'widgets/widget'\n    ], function( Base, Uploader, WUFile ) {\n\n        var $ = Base.$,\n            validators = {},\n            api;\n\n        /**\n         * @event error\n         * @param {String} type \n         * @description validate`upload.on('error', handler)`\n         *\n         * * `Q_EXCEED_NUM_LIMIT` `fileNumLimit``uploader`\n         * * `Q_EXCEED_SIZE_LIMIT` `Q_EXCEED_SIZE_LIMIT``uploader`\n         * * `Q_TYPE_DENIED` \n         * @for  Uploader\n         */\n\n        // api\n        api = {\n\n            // \n            addValidator: function( type, cb ) {\n                validators[ type ] = cb;\n            },\n\n            // \n            removeValidator: function( type ) {\n                delete validators[ type ];\n            }\n        };\n\n        // UploaderValidators\n        Uploader.register({\n            name: 'validator',\n\n            init: function() {\n                var me = this;\n                Base.nextTick(function() {\n                    $.each( validators, function() {\n                        this.call( me.owner );\n                    });\n                });\n            }\n        });\n\n        /**\n         * @property {int} [fileNumLimit=undefined]\n         * @namespace options\n         * @for Uploader\n         * @description , \n         */\n        api.addValidator( 'fileNumLimit', function() {\n            var uploader = this,\n                opts = uploader.options,\n                count = 0,\n                max = parseInt( opts.fileNumLimit, 10 ),\n                flag = true;\n\n            if ( !max ) {\n                return;\n            }\n\n            uploader.on( 'beforeFileQueued', function( file ) {\n\n                if ( count >= max && flag ) {\n                    flag = false;\n                    this.trigger( 'error', 'Q_EXCEED_NUM_LIMIT', max, file );\n                    setTimeout(function() {\n                        flag = true;\n                    }, 1 );\n                }\n\n                return count >= max ? false : true;\n            });\n\n            uploader.on( 'fileQueued', function() {\n                count++;\n            });\n\n            uploader.on( 'fileDequeued', function() {\n                count--;\n            });\n\n            uploader.on( 'reset', function() {\n                count = 0;\n            });\n        });\n\n\n        /**\n         * @property {int} [fileSizeLimit=undefined]\n         * @namespace options\n         * @for Uploader\n         * @description , \n         */\n        api.addValidator( 'fileSizeLimit', function() {\n            var uploader = this,\n                opts = uploader.options,\n                count = 0,\n                max = parseInt( opts.fileSizeLimit, 10 ),\n                flag = true;\n\n            if ( !max ) {\n                return;\n            }\n\n            uploader.on( 'beforeFileQueued', function( file ) {\n                var invalid = count + file.size > max;\n\n                if ( invalid && flag ) {\n                    flag = false;\n                    this.trigger( 'error', 'Q_EXCEED_SIZE_LIMIT', max, file );\n                    setTimeout(function() {\n                        flag = true;\n                    }, 1 );\n                }\n\n                return invalid ? false : true;\n            });\n\n            uploader.on( 'fileQueued', function( file ) {\n                count += file.size;\n            });\n\n            uploader.on( 'fileDequeued', function( file ) {\n                count -= file.size;\n            });\n\n            uploader.on( 'reset', function() {\n                count = 0;\n            });\n        });\n\n        /**\n         * @property {int} [fileSingleSizeLimit=undefined]\n         * @namespace options\n         * @for Uploader\n         * @description , \n         */\n        api.addValidator( 'fileSingleSizeLimit', function() {\n            var uploader = this,\n                opts = uploader.options,\n                max = opts.fileSingleSizeLimit;\n\n            if ( !max ) {\n                return;\n            }\n\n            uploader.on( 'beforeFileQueued', function( file ) {\n\n                if ( file.size > max ) {\n                    file.setStatus( WUFile.Status.INVALID, 'exceed_size' );\n                    this.trigger( 'error', 'F_EXCEED_SIZE', max, file );\n                    return false;\n                }\n\n            });\n\n        });\n\n        /**\n         * @property {Boolean} [duplicate=undefined]\n         * @namespace options\n         * @for Uploader\n         * @description  hash Key.\n         */\n        api.addValidator( 'duplicate', function() {\n            var uploader = this,\n                opts = uploader.options,\n                mapping = {};\n\n            if ( opts.duplicate ) {\n                return;\n            }\n\n            function hashString( str ) {\n                var hash = 0,\n                    i = 0,\n                    len = str.length,\n                    _char;\n\n                for ( ; i < len; i++ ) {\n                    _char = str.charCodeAt( i );\n                    hash = _char + (hash << 6) + (hash << 16) - hash;\n                }\n\n                return hash;\n            }\n\n            uploader.on( 'beforeFileQueued', function( file ) {\n                var hash = file.__hash || (file.__hash = hashString( file.name +\n                        file.size + file.lastModifiedDate ));\n\n                // \n                if ( mapping[ hash ] ) {\n                    this.trigger( 'error', 'F_DUPLICATE', file );\n                    return false;\n                }\n            });\n\n            uploader.on( 'fileQueued', function( file ) {\n                var hash = file.__hash;\n\n                hash && (mapping[ hash ] = true);\n            });\n\n            uploader.on( 'fileDequeued', function( file ) {\n                var hash = file.__hash;\n\n                hash && (delete mapping[ hash ]);\n            });\n\n            uploader.on( 'reset', function() {\n                mapping = {};\n            });\n        });\n\n        return api;\n    });\n\n    /**\n     * @fileOverview Md5\n     */\n    define('lib/md5',[\n        'runtime/client',\n        'mediator'\n    ], function( RuntimeClient, Mediator ) {\n\n        function Md5() {\n            RuntimeClient.call( this, 'Md5' );\n        }\n\n        //  Md5 \n        Mediator.installTo( Md5.prototype );\n\n        Md5.prototype.loadFromBlob = function( blob ) {\n            var me = this;\n\n            if ( me.getRuid() ) {\n                me.disconnectRuntime();\n            }\n\n            // blobruntime.\n            me.connectRuntime( blob.ruid, function() {\n                me.exec('init');\n                me.exec( 'loadFromBlob', blob );\n            });\n        };\n\n        Md5.prototype.getResult = function() {\n            return this.exec('getResult');\n        };\n\n        return Md5;\n    });\n    /**\n     * @fileOverview , \n     */\n    define('widgets/md5',[\n        'base',\n        'uploader',\n        'lib/md5',\n        'lib/blob',\n        'widgets/widget'\n    ], function( Base, Uploader, Md5, Blob ) {\n\n        return Uploader.register({\n            name: 'md5',\n\n\n            /**\n             *  md5  promise  progress \n             *\n             *\n             * @method md5File\n             * @grammar md5File( file[, start[, end]] ) => promise\n             * @for Uploader\n             * @example\n             *\n             * uploader.on( 'fileQueued', function( file ) {\n             *     var $li = ...;\n             *\n             *     uploader.md5File( file )\n             *\n             *         // \n             *         .progress(function(percentage) {\n             *             console.log('Percentage:', percentage);\n             *         })\n             *\n             *         // \n             *         .then(function(val) {\n             *             console.log('md5 result:', val);\n             *         });\n             *\n             * });\n             */\n            md5File: function( file, start, end ) {\n                var md5 = new Md5(),\n                    deferred = Base.Deferred(),\n                    blob = (file instanceof Blob) ? file :\n                        this.request( 'get-file', file ).source;\n\n                md5.on( 'progress load', function( e ) {\n                    e = e || {};\n                    deferred.notify( e.total ? e.loaded / e.total : 1 );\n                });\n\n                md5.on( 'complete', function() {\n                    deferred.resolve( md5.getResult() );\n                });\n\n                md5.on( 'error', function( reason ) {\n                    deferred.reject( reason );\n                });\n\n                if ( arguments.length > 1 ) {\n                    start = start || 0;\n                    end = end || 0;\n                    start < 0 && (start = blob.size + start);\n                    end < 0 && (end = blob.size + end);\n                    end = Math.min( end, blob.size );\n                    blob = blob.slice( start, end );\n                }\n\n                md5.loadFromBlob( blob );\n\n                return deferred.promise();\n            }\n        });\n    });\n    /**\n     * @fileOverview RuntimeRuntime, \n     */\n    define('runtime/compbase',[],function() {\n\n        function CompBase( owner, runtime ) {\n\n            this.owner = owner;\n            this.options = owner.options;\n\n            this.getRuntime = function() {\n                return runtime;\n            };\n\n            this.getRuid = function() {\n                return runtime.uid;\n            };\n\n            this.trigger = function() {\n                return owner.trigger.apply( owner, arguments );\n            };\n        }\n\n        return CompBase;\n    });\n    /**\n     * @fileOverview Html5Runtime\n     */\n    define('runtime/html5/runtime',[\n        'base',\n        'runtime/runtime',\n        'runtime/compbase'\n    ], function( Base, Runtime, CompBase ) {\n\n        var type = 'html5',\n            components = {};\n\n        function Html5Runtime() {\n            var pool = {},\n                me = this,\n                destroy = this.destroy;\n\n            Runtime.apply( me, arguments );\n            me.type = type;\n\n\n            // RuntimeClient\n            me.exec = function( comp, fn/*, args...*/) {\n                var client = this,\n                    uid = client.uid,\n                    args = Base.slice( arguments, 2 ),\n                    instance;\n\n                if ( components[ comp ] ) {\n                    instance = pool[ uid ] = pool[ uid ] ||\n                            new components[ comp ]( client, me );\n\n                    if ( instance[ fn ] ) {\n                        return instance[ fn ].apply( instance, args );\n                    }\n                }\n            };\n\n            me.destroy = function() {\n                // @todo \n                return destroy && destroy.apply( this, arguments );\n            };\n        }\n\n        Base.inherits( Runtime, {\n            constructor: Html5Runtime,\n\n            // callback\n            init: function() {\n                var me = this;\n                setTimeout(function() {\n                    me.trigger('ready');\n                }, 1 );\n            }\n\n        });\n\n        // Components\n        Html5Runtime.register = function( name, component ) {\n            var klass = components[ name ] = Base.inherits( CompBase, component );\n            return klass;\n        };\n\n        // html5\n        // \n        if ( window.Blob && window.FileReader && window.DataView ) {\n            Runtime.addRuntime( type, Html5Runtime );\n        }\n\n        return Html5Runtime;\n    });\n    /**\n     * @fileOverview Blob Html\n     */\n    define('runtime/html5/blob',[\n        'runtime/html5/runtime',\n        'lib/blob'\n    ], function( Html5Runtime, Blob ) {\n\n        return Html5Runtime.register( 'Blob', {\n            slice: function( start, end ) {\n                var blob = this.owner.source,\n                    slice = blob.slice || blob.webkitSlice || blob.mozSlice;\n\n                blob = slice.call( blob, start, end );\n\n                return new Blob( this.getRuid(), blob );\n            }\n        });\n    });\n    /**\n     * @fileOverview FilePaste\n     */\n    define('runtime/html5/dnd',[\n        'base',\n        'runtime/html5/runtime',\n        'lib/file'\n    ], function( Base, Html5Runtime, File ) {\n\n        var $ = Base.$,\n            prefix = 'webuploader-dnd-';\n\n        return Html5Runtime.register( 'DragAndDrop', {\n            init: function() {\n                var elem = this.elem = this.options.container;\n\n                this.dragEnterHandler = Base.bindFn( this._dragEnterHandler, this );\n                this.dragOverHandler = Base.bindFn( this._dragOverHandler, this );\n                this.dragLeaveHandler = Base.bindFn( this._dragLeaveHandler, this );\n                this.dropHandler = Base.bindFn( this._dropHandler, this );\n                this.dndOver = false;\n\n                elem.on( 'dragenter', this.dragEnterHandler );\n                elem.on( 'dragover', this.dragOverHandler );\n                elem.on( 'dragleave', this.dragLeaveHandler );\n                elem.on( 'drop', this.dropHandler );\n\n                if ( this.options.disableGlobalDnd ) {\n                    $( document ).on( 'dragover', this.dragOverHandler );\n                    $( document ).on( 'drop', this.dropHandler );\n                }\n            },\n\n            _dragEnterHandler: function( e ) {\n                var me = this,\n                    denied = me._denied || false,\n                    items;\n\n                e = e.originalEvent || e;\n\n                if ( !me.dndOver ) {\n                    me.dndOver = true;\n\n                    //  chrome \n                    items = e.dataTransfer.items;\n\n                    if ( items && items.length ) {\n                        me._denied = denied = !me.trigger( 'accept', items );\n                    }\n\n                    me.elem.addClass( prefix + 'over' );\n                    me.elem[ denied ? 'addClass' :\n                            'removeClass' ]( prefix + 'denied' );\n                }\n\n                e.dataTransfer.dropEffect = denied ? 'none' : 'copy';\n\n                return false;\n            },\n\n            _dragOverHandler: function( e ) {\n                // \n                var parentElem = this.elem.parent().get( 0 );\n                if ( parentElem && !$.contains( parentElem, e.currentTarget ) ) {\n                    return false;\n                }\n\n                clearTimeout( this._leaveTimer );\n                this._dragEnterHandler.call( this, e );\n\n                return false;\n            },\n\n            _dragLeaveHandler: function() {\n                var me = this,\n                    handler;\n\n                handler = function() {\n                    me.dndOver = false;\n                    me.elem.removeClass( prefix + 'over ' + prefix + 'denied' );\n                };\n\n                clearTimeout( me._leaveTimer );\n                me._leaveTimer = setTimeout( handler, 100 );\n                return false;\n            },\n\n            _dropHandler: function( e ) {\n                var me = this,\n                    ruid = me.getRuid(),\n                    parentElem = me.elem.parent().get( 0 ),\n                    dataTransfer, data;\n\n                // \n                if ( parentElem && !$.contains( parentElem, e.currentTarget ) ) {\n                    return false;\n                }\n\n                e = e.originalEvent || e;\n                dataTransfer = e.dataTransfer;\n\n                // \n                //  ie11 \n                try {\n                    data = dataTransfer.getData('text/html');\n                } catch( err ) {\n                }\n\n                if ( data ) {\n                    return;\n                }\n\n                me._getTansferFiles( dataTransfer, function( results ) {\n                    me.trigger( 'drop', $.map( results, function( file ) {\n                        return new File( ruid, file );\n                    }) );\n                });\n\n                me.dndOver = false;\n                me.elem.removeClass( prefix + 'over' );\n                return false;\n            },\n\n            //  callback \n            _getTansferFiles: function( dataTransfer, callback ) {\n                var results  = [],\n                    promises = [],\n                    items, files, file, item, i, len, canAccessFolder;\n\n                items = dataTransfer.items;\n                files = dataTransfer.files;\n\n                canAccessFolder = !!(items && items[ 0 ].webkitGetAsEntry);\n\n                for ( i = 0, len = files.length; i < len; i++ ) {\n                    file = files[ i ];\n                    item = items && items[ i ];\n\n                    if ( canAccessFolder && item.webkitGetAsEntry().isDirectory ) {\n\n                        promises.push( this._traverseDirectoryTree(\n                                item.webkitGetAsEntry(), results ) );\n                    } else {\n                        results.push( file );\n                    }\n                }\n\n                Base.when.apply( Base, promises ).done(function() {\n\n                    if ( !results.length ) {\n                        return;\n                    }\n\n                    callback( results );\n                });\n            },\n\n            _traverseDirectoryTree: function( entry, results ) {\n                var deferred = Base.Deferred(),\n                    me = this;\n\n                if ( entry.isFile ) {\n                    entry.file(function( file ) {\n                        results.push( file );\n                        deferred.resolve();\n                    });\n                } else if ( entry.isDirectory ) {\n                    entry.createReader().readEntries(function( entries ) {\n                        var len = entries.length,\n                            promises = [],\n                            arr = [],    // \n                            i;\n\n                        for ( i = 0; i < len; i++ ) {\n                            promises.push( me._traverseDirectoryTree(\n                                    entries[ i ], arr ) );\n                        }\n\n                        Base.when.apply( Base, promises ).then(function() {\n                            results.push.apply( results, arr );\n                            deferred.resolve();\n                        }, deferred.reject );\n                    });\n                }\n\n                return deferred.promise();\n            },\n\n            destroy: function() {\n                var elem = this.elem;\n\n                //  init  destroy\n                if (!elem) {\n                    return;\n                }\n\n                elem.off( 'dragenter', this.dragEnterHandler );\n                elem.off( 'dragover', this.dragOverHandler );\n                elem.off( 'dragleave', this.dragLeaveHandler );\n                elem.off( 'drop', this.dropHandler );\n\n                if ( this.options.disableGlobalDnd ) {\n                    $( document ).off( 'dragover', this.dragOverHandler );\n                    $( document ).off( 'drop', this.dropHandler );\n                }\n            }\n        });\n    });\n\n    /**\n     * @fileOverview FilePaste\n     */\n    define('runtime/html5/filepaste',[\n        'base',\n        'runtime/html5/runtime',\n        'lib/file'\n    ], function( Base, Html5Runtime, File ) {\n\n        return Html5Runtime.register( 'FilePaste', {\n            init: function() {\n                var opts = this.options,\n                    elem = this.elem = opts.container,\n                    accept = '.*',\n                    arr, i, len, item;\n\n                // accetpmimeTypes\n                if ( opts.accept ) {\n                    arr = [];\n\n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\n                        item = opts.accept[ i ].mimeTypes;\n                        item && arr.push( item );\n                    }\n\n                    if ( arr.length ) {\n                        accept = arr.join(',');\n                        accept = accept.replace( /,/g, '|' ).replace( /\\*/g, '.*' );\n                    }\n                }\n                this.accept = accept = new RegExp( accept, 'i' );\n                this.hander = Base.bindFn( this._pasteHander, this );\n                elem.on( 'paste', this.hander );\n            },\n\n            _pasteHander: function( e ) {\n                var allowed = [],\n                    ruid = this.getRuid(),\n                    items, item, blob, i, len;\n\n                e = e.originalEvent || e;\n                items = e.clipboardData.items;\n\n                for ( i = 0, len = items.length; i < len; i++ ) {\n                    item = items[ i ];\n\n                    if ( item.kind !== 'file' || !(blob = item.getAsFile()) ) {\n                        continue;\n                    }\n\n                    allowed.push( new File( ruid, blob ) );\n                }\n\n                if ( allowed.length ) {\n                    // \n                    e.preventDefault();\n                    e.stopPropagation();\n                    this.trigger( 'paste', allowed );\n                }\n            },\n\n            destroy: function() {\n                this.elem.off( 'paste', this.hander );\n            }\n        });\n    });\n\n    /**\n     * @fileOverview FilePicker\n     */\n    define('runtime/html5/filepicker',[\n        'base',\n        'runtime/html5/runtime'\n    ], function( Base, Html5Runtime ) {\n\n        var $ = Base.$;\n\n        return Html5Runtime.register( 'FilePicker', {\n            init: function() {\n                var container = this.getRuntime().getContainer(),\n                    me = this,\n                    owner = me.owner,\n                    opts = me.options,\n                    label = this.label = $( document.createElement('label') ),\n                    input =  this.input = $( document.createElement('input') ),\n                    arr, i, len, mouseHandler;\n\n                input.attr( 'type', 'file' );\n                //console.log(opts.name)\n                input.attr( 'name', 'file' );\n                input.addClass('webuploader-element-invisible');\n\n                label.on( 'click', function() {\n                    input.trigger('click');\n                });\n\n                label.css({\n                    opacity: 0,\n                    width: '100%',\n                    height: '100%',\n                    display: 'block',\n                    cursor: 'pointer',\n                    background: '#ffffff'\n                });\n\n                if ( opts.multiple ) {\n                    input.attr( 'multiple', 'multiple' );\n                }\n\n                // @todo Firefox\n                if ( opts.accept && opts.accept.length > 0 ) {\n                    arr = [];\n\n                    for ( i = 0, len = opts.accept.length; i < len; i++ ) {\n                        arr.push( opts.accept[ i ].mimeTypes );\n                    }\n\n                    input.attr( 'accept', arr.join(',') );\n                }\n\n                container.append( input );\n                container.append( label );\n\n                mouseHandler = function( e ) {\n                    owner.trigger( e.type );\n                };\n\n                input.on( 'change', function( e ) {\n                    var fn = arguments.callee,\n                        clone;\n\n                    me.files = e.target.files;\n\n                    // reset input\n                    clone = this.cloneNode( true );\n                    clone.value = null;\n                    this.parentNode.replaceChild( clone, this );\n\n                    input.off();\n                    input = $( clone ).on( 'change', fn )\n                            .on( 'mouseenter mouseleave', mouseHandler );\n\n                    owner.trigger('change');\n                });\n\n                label.on( 'mouseenter mouseleave', mouseHandler );\n\n            },\n\n\n            getFiles: function() {\n                return this.files;\n            },\n\n            destroy: function() {\n                this.input.off();\n                this.label.off();\n            }\n        });\n    });\n    /**\n     * Terms:\n     *\n     * Uint8Array, FileReader, BlobBuilder, atob, ArrayBuffer\n     * @fileOverview Image\n     */\n    define('runtime/html5/util',[\n        'base'\n    ], function( Base ) {\n\n        var urlAPI = window.createObjectURL && window ||\n                window.URL && URL.revokeObjectURL && URL ||\n                window.webkitURL,\n            createObjectURL = Base.noop,\n            revokeObjectURL = createObjectURL;\n\n        if ( urlAPI ) {\n\n            // androidcontext\n            createObjectURL = function() {\n                return urlAPI.createObjectURL.apply( urlAPI, arguments );\n            };\n\n            revokeObjectURL = function() {\n                return urlAPI.revokeObjectURL.apply( urlAPI, arguments );\n            };\n        }\n\n        return {\n            createObjectURL: createObjectURL,\n            revokeObjectURL: revokeObjectURL,\n\n            dataURL2Blob: function( dataURI ) {\n                var byteStr, intArray, ab, i, mimetype, parts;\n\n                parts = dataURI.split(',');\n\n                if ( ~parts[ 0 ].indexOf('base64') ) {\n                    byteStr = atob( parts[ 1 ] );\n                } else {\n                    byteStr = decodeURIComponent( parts[ 1 ] );\n                }\n\n                ab = new ArrayBuffer( byteStr.length );\n                intArray = new Uint8Array( ab );\n\n                for ( i = 0; i < byteStr.length; i++ ) {\n                    intArray[ i ] = byteStr.charCodeAt( i );\n                }\n\n                mimetype = parts[ 0 ].split(':')[ 1 ].split(';')[ 0 ];\n\n                return this.arrayBufferToBlob( ab, mimetype );\n            },\n\n            dataURL2ArrayBuffer: function( dataURI ) {\n                var byteStr, intArray, i, parts;\n\n                parts = dataURI.split(',');\n\n                if ( ~parts[ 0 ].indexOf('base64') ) {\n                    byteStr = atob( parts[ 1 ] );\n                } else {\n                    byteStr = decodeURIComponent( parts[ 1 ] );\n                }\n\n                intArray = new Uint8Array( byteStr.length );\n\n                for ( i = 0; i < byteStr.length; i++ ) {\n                    intArray[ i ] = byteStr.charCodeAt( i );\n                }\n\n                return intArray.buffer;\n            },\n\n            arrayBufferToBlob: function( buffer, type ) {\n                var builder = window.BlobBuilder || window.WebKitBlobBuilder,\n                    bb;\n\n                // androidnew Blob, blobbuilder.\n                if ( builder ) {\n                    bb = new builder();\n                    bb.append( buffer );\n                    return bb.getBlob( type );\n                }\n\n                return new Blob([ buffer ], type ? { type: type } : {} );\n            },\n\n            // androidcanvas.toDataUrljpeg.\n            // png.\n            canvasToDataUrl: function( canvas, type, quality ) {\n                return canvas.toDataURL( type, quality / 100 );\n            },\n\n            // imagemeat\n            parseMeta: function( blob, callback ) {\n                callback( false, {});\n            },\n\n            // imagemeat\n            updateImageHead: function( data ) {\n                return data;\n            }\n        };\n    });\n    /**\n     * Terms:\n     *\n     * Uint8Array, FileReader, BlobBuilder, atob, ArrayBuffer\n     * @fileOverview Image\n     */\n    define('runtime/html5/imagemeta',[\n        'runtime/html5/util'\n    ], function( Util ) {\n\n        var api;\n\n        api = {\n            parsers: {\n                0xffe1: []\n            },\n\n            maxMetaDataSize: 262144,\n\n            parse: function( blob, cb ) {\n                var me = this,\n                    fr = new FileReader();\n\n                fr.onload = function() {\n                    cb( false, me._parse( this.result ) );\n                    fr = fr.onload = fr.onerror = null;\n                };\n\n                fr.onerror = function( e ) {\n                    cb( e.message );\n                    fr = fr.onload = fr.onerror = null;\n                };\n\n                blob = blob.slice( 0, me.maxMetaDataSize );\n                fr.readAsArrayBuffer( blob.getSource() );\n            },\n\n            _parse: function( buffer, noParse ) {\n                if ( buffer.byteLength < 6 ) {\n                    return;\n                }\n\n                var dataview = new DataView( buffer ),\n                    offset = 2,\n                    maxOffset = dataview.byteLength - 4,\n                    headLength = offset,\n                    ret = {},\n                    markerBytes, markerLength, parsers, i;\n\n                if ( dataview.getUint16( 0 ) === 0xffd8 ) {\n\n                    while ( offset < maxOffset ) {\n                        markerBytes = dataview.getUint16( offset );\n\n                        if ( markerBytes >= 0xffe0 && markerBytes <= 0xffef ||\n                                markerBytes === 0xfffe ) {\n\n                            markerLength = dataview.getUint16( offset + 2 ) + 2;\n\n                            if ( offset + markerLength > dataview.byteLength ) {\n                                break;\n                            }\n\n                            parsers = api.parsers[ markerBytes ];\n\n                            if ( !noParse && parsers ) {\n                                for ( i = 0; i < parsers.length; i += 1 ) {\n                                    parsers[ i ].call( api, dataview, offset,\n                                            markerLength, ret );\n                                }\n                            }\n\n                            offset += markerLength;\n                            headLength = offset;\n                        } else {\n                            break;\n                        }\n                    }\n\n                    if ( headLength > 6 ) {\n                        if ( buffer.slice ) {\n                            ret.imageHead = buffer.slice( 2, headLength );\n                        } else {\n                            // Workaround for IE10, which does not yet\n                            // support ArrayBuffer.slice:\n                            ret.imageHead = new Uint8Array( buffer )\n                                    .subarray( 2, headLength );\n                        }\n                    }\n                }\n\n                return ret;\n            },\n\n            updateImageHead: function( buffer, head ) {\n                var data = this._parse( buffer, true ),\n                    buf1, buf2, bodyoffset;\n\n\n                bodyoffset = 2;\n                if ( data.imageHead ) {\n                    bodyoffset = 2 + data.imageHead.byteLength;\n                }\n\n                if ( buffer.slice ) {\n                    buf2 = buffer.slice( bodyoffset );\n                } else {\n                    buf2 = new Uint8Array( buffer ).subarray( bodyoffset );\n                }\n\n                buf1 = new Uint8Array( head.byteLength + 2 + buf2.byteLength );\n\n                buf1[ 0 ] = 0xFF;\n                buf1[ 1 ] = 0xD8;\n                buf1.set( new Uint8Array( head ), 2 );\n                buf1.set( new Uint8Array( buf2 ), head.byteLength + 2 );\n\n                return buf1.buffer;\n            }\n        };\n\n        Util.parseMeta = function() {\n            return api.parse.apply( api, arguments );\n        };\n\n        Util.updateImageHead = function() {\n            return api.updateImageHead.apply( api, arguments );\n        };\n\n        return api;\n    });\n    /**\n     * https://github.com/blueimp/JavaScript-Load-Image\n     * orientation.\n     *\n     *  Exif Sub IFD Pointer, GPS Info IFD Pointer, Exif Thumbnail.\n     * @fileOverview EXIF\n     */\n\n    // Sample\n    // ====================================\n    // Make : Apple\n    // Model : iPhone 4S\n    // Orientation : 1\n    // XResolution : 72 [72/1]\n    // YResolution : 72 [72/1]\n    // ResolutionUnit : 2\n    // Software : QuickTime 7.7.1\n    // DateTime : 2013:09:01 22:53:55\n    // ExifIFDPointer : 190\n    // ExposureTime : 0.058823529411764705 [1/17]\n    // FNumber : 2.4 [12/5]\n    // ExposureProgram : Normal program\n    // ISOSpeedRatings : 800\n    // ExifVersion : 0220\n    // DateTimeOriginal : 2013:09:01 22:52:51\n    // DateTimeDigitized : 2013:09:01 22:52:51\n    // ComponentsConfiguration : YCbCr\n    // ShutterSpeedValue : 4.058893515764426\n    // ApertureValue : 2.5260688216892597 [4845/1918]\n    // BrightnessValue : -0.3126686601998395\n    // MeteringMode : Pattern\n    // Flash : Flash did not fire, compulsory flash mode\n    // FocalLength : 4.28 [107/25]\n    // SubjectArea : [4 values]\n    // FlashpixVersion : 0100\n    // ColorSpace : 1\n    // PixelXDimension : 2448\n    // PixelYDimension : 3264\n    // SensingMethod : One-chip color area sensor\n    // ExposureMode : 0\n    // WhiteBalance : Auto white balance\n    // FocalLengthIn35mmFilm : 35\n    // SceneCaptureType : Standard\n    define('runtime/html5/imagemeta/exif',[\n        'base',\n        'runtime/html5/imagemeta'\n    ], function( Base, ImageMeta ) {\n\n        var EXIF = {};\n\n        EXIF.ExifMap = function() {\n            return this;\n        };\n\n        EXIF.ExifMap.prototype.map = {\n            'Orientation': 0x0112\n        };\n\n        EXIF.ExifMap.prototype.get = function( id ) {\n            return this[ id ] || this[ this.map[ id ] ];\n        };\n\n        EXIF.exifTagTypes = {\n            // byte, 8-bit unsigned int:\n            1: {\n                getValue: function( dataView, dataOffset ) {\n                    return dataView.getUint8( dataOffset );\n                },\n                size: 1\n            },\n\n            // ascii, 8-bit byte:\n            2: {\n                getValue: function( dataView, dataOffset ) {\n                    return String.fromCharCode( dataView.getUint8( dataOffset ) );\n                },\n                size: 1,\n                ascii: true\n            },\n\n            // short, 16 bit int:\n            3: {\n                getValue: function( dataView, dataOffset, littleEndian ) {\n                    return dataView.getUint16( dataOffset, littleEndian );\n                },\n                size: 2\n            },\n\n            // long, 32 bit int:\n            4: {\n                getValue: function( dataView, dataOffset, littleEndian ) {\n                    return dataView.getUint32( dataOffset, littleEndian );\n                },\n                size: 4\n            },\n\n            // rational = two long values,\n            // first is numerator, second is denominator:\n            5: {\n                getValue: function( dataView, dataOffset, littleEndian ) {\n                    return dataView.getUint32( dataOffset, littleEndian ) /\n                        dataView.getUint32( dataOffset + 4, littleEndian );\n                },\n                size: 8\n            },\n\n            // slong, 32 bit signed int:\n            9: {\n                getValue: function( dataView, dataOffset, littleEndian ) {\n                    return dataView.getInt32( dataOffset, littleEndian );\n                },\n                size: 4\n            },\n\n            // srational, two slongs, first is numerator, second is denominator:\n            10: {\n                getValue: function( dataView, dataOffset, littleEndian ) {\n                    return dataView.getInt32( dataOffset, littleEndian ) /\n                        dataView.getInt32( dataOffset + 4, littleEndian );\n                },\n                size: 8\n            }\n        };\n\n        // undefined, 8-bit byte, value depending on field:\n        EXIF.exifTagTypes[ 7 ] = EXIF.exifTagTypes[ 1 ];\n\n        EXIF.getExifValue = function( dataView, tiffOffset, offset, type, length,\n                littleEndian ) {\n\n            var tagType = EXIF.exifTagTypes[ type ],\n                tagSize, dataOffset, values, i, str, c;\n\n            if ( !tagType ) {\n                Base.log('Invalid Exif data: Invalid tag type.');\n                return;\n            }\n\n            tagSize = tagType.size * length;\n\n            // Determine if the value is contained in the dataOffset bytes,\n            // or if the value at the dataOffset is a pointer to the actual data:\n            dataOffset = tagSize > 4 ? tiffOffset + dataView.getUint32( offset + 8,\n                    littleEndian ) : (offset + 8);\n\n            if ( dataOffset + tagSize > dataView.byteLength ) {\n                Base.log('Invalid Exif data: Invalid data offset.');\n                return;\n            }\n\n            if ( length === 1 ) {\n                return tagType.getValue( dataView, dataOffset, littleEndian );\n            }\n\n            values = [];\n\n            for ( i = 0; i < length; i += 1 ) {\n                values[ i ] = tagType.getValue( dataView,\n                        dataOffset + i * tagType.size, littleEndian );\n            }\n\n            if ( tagType.ascii ) {\n                str = '';\n\n                // Concatenate the chars:\n                for ( i = 0; i < values.length; i += 1 ) {\n                    c = values[ i ];\n\n                    // Ignore the terminating NULL byte(s):\n                    if ( c === '\\u0000' ) {\n                        break;\n                    }\n                    str += c;\n                }\n\n                return str;\n            }\n            return values;\n        };\n\n        EXIF.parseExifTag = function( dataView, tiffOffset, offset, littleEndian,\n                data ) {\n\n            var tag = dataView.getUint16( offset, littleEndian );\n            data.exif[ tag ] = EXIF.getExifValue( dataView, tiffOffset, offset,\n                    dataView.getUint16( offset + 2, littleEndian ),    // tag type\n                    dataView.getUint32( offset + 4, littleEndian ),    // tag length\n                    littleEndian );\n        };\n\n        EXIF.parseExifTags = function( dataView, tiffOffset, dirOffset,\n                littleEndian, data ) {\n\n            var tagsNumber, dirEndOffset, i;\n\n            if ( dirOffset + 6 > dataView.byteLength ) {\n                Base.log('Invalid Exif data: Invalid directory offset.');\n                return;\n            }\n\n            tagsNumber = dataView.getUint16( dirOffset, littleEndian );\n            dirEndOffset = dirOffset + 2 + 12 * tagsNumber;\n\n            if ( dirEndOffset + 4 > dataView.byteLength ) {\n                Base.log('Invalid Exif data: Invalid directory size.');\n                return;\n            }\n\n            for ( i = 0; i < tagsNumber; i += 1 ) {\n                this.parseExifTag( dataView, tiffOffset,\n                        dirOffset + 2 + 12 * i,    // tag offset\n                        littleEndian, data );\n            }\n\n            // Return the offset to the next directory:\n            return dataView.getUint32( dirEndOffset, littleEndian );\n        };\n\n        // EXIF.getExifThumbnail = function(dataView, offset, length) {\n        //     var hexData,\n        //         i,\n        //         b;\n        //     if (!length || offset + length > dataView.byteLength) {\n        //         Base.log('Invalid Exif data: Invalid thumbnail data.');\n        //         return;\n        //     }\n        //     hexData = [];\n        //     for (i = 0; i < length; i += 1) {\n        //         b = dataView.getUint8(offset + i);\n        //         hexData.push((b < 16 ? '0' : '') + b.toString(16));\n        //     }\n        //     return 'data:image/jpeg,%' + hexData.join('%');\n        // };\n\n        EXIF.parseExifData = function( dataView, offset, length, data ) {\n\n            var tiffOffset = offset + 10,\n                littleEndian, dirOffset;\n\n            // Check for the ASCII code for \"Exif\" (0x45786966):\n            if ( dataView.getUint32( offset + 4 ) !== 0x45786966 ) {\n                // No Exif data, might be XMP data instead\n                return;\n            }\n            if ( tiffOffset + 8 > dataView.byteLength ) {\n                Base.log('Invalid Exif data: Invalid segment size.');\n                return;\n            }\n\n            // Check for the two null bytes:\n            if ( dataView.getUint16( offset + 8 ) !== 0x0000 ) {\n                Base.log('Invalid Exif data: Missing byte alignment offset.');\n                return;\n            }\n\n            // Check the byte alignment:\n            switch ( dataView.getUint16( tiffOffset ) ) {\n                case 0x4949:\n                    littleEndian = true;\n                    break;\n\n                case 0x4D4D:\n                    littleEndian = false;\n                    break;\n\n                default:\n                    Base.log('Invalid Exif data: Invalid byte alignment marker.');\n                    return;\n            }\n\n            // Check for the TIFF tag marker (0x002A):\n            if ( dataView.getUint16( tiffOffset + 2, littleEndian ) !== 0x002A ) {\n                Base.log('Invalid Exif data: Missing TIFF marker.');\n                return;\n            }\n\n            // Retrieve the directory offset bytes, usually 0x00000008 or 8 decimal:\n            dirOffset = dataView.getUint32( tiffOffset + 4, littleEndian );\n            // Create the exif object to store the tags:\n            data.exif = new EXIF.ExifMap();\n            // Parse the tags of the main image directory and retrieve the\n            // offset to the next directory, usually the thumbnail directory:\n            dirOffset = EXIF.parseExifTags( dataView, tiffOffset,\n                    tiffOffset + dirOffset, littleEndian, data );\n\n            // \n            // if ( dirOffset ) {\n            //     thumbnailData = {exif: {}};\n            //     dirOffset = EXIF.parseExifTags(\n            //         dataView,\n            //         tiffOffset,\n            //         tiffOffset + dirOffset,\n            //         littleEndian,\n            //         thumbnailData\n            //     );\n\n            //     // Check for JPEG Thumbnail offset:\n            //     if (thumbnailData.exif[0x0201]) {\n            //         data.exif.Thumbnail = EXIF.getExifThumbnail(\n            //             dataView,\n            //             tiffOffset + thumbnailData.exif[0x0201],\n            //             thumbnailData.exif[0x0202] // Thumbnail data length\n            //         );\n            //     }\n            // }\n        };\n\n        ImageMeta.parsers[ 0xffe1 ].push( EXIF.parseExifData );\n        return EXIF;\n    });\n    /**\n     * androidtoDataUrlbug\n     * androidtoDataUrl('image/jpege')png.\n     *\n     * \n     * @fileOverview jpeg encoder\n     */\n    define('runtime/html5/jpegencoder',[], function( require, exports, module ) {\n\n        /*\n          Copyright (c) 2008, Adobe Systems Incorporated\n          All rights reserved.\n\n          Redistribution and use in source and binary forms, with or without\n          modification, are permitted provided that the following conditions are\n          met:\n\n          * Redistributions of source code must retain the above copyright notice,\n            this list of conditions and the following disclaimer.\n\n          * Redistributions in binary form must reproduce the above copyright\n            notice, this list of conditions and the following disclaimer in the\n            documentation and/or other materials provided with the distribution.\n\n          * Neither the name of Adobe Systems Incorporated nor the names of its\n            contributors may be used to endorse or promote products derived from\n            this software without specific prior written permission.\n\n          THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n          IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,\n          THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n          PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n          CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n          EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n          PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n          PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n          LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n          NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n          SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n        */\n        /*\n        JPEG encoder ported to JavaScript and optimized by Andreas Ritter, www.bytestrom.eu, 11/2009\n\n        Basic GUI blocking jpeg encoder\n        */\n\n        function JPEGEncoder(quality) {\n          var self = this;\n            var fround = Math.round;\n            var ffloor = Math.floor;\n            var YTable = new Array(64);\n            var UVTable = new Array(64);\n            var fdtbl_Y = new Array(64);\n            var fdtbl_UV = new Array(64);\n            var YDC_HT;\n            var UVDC_HT;\n            var YAC_HT;\n            var UVAC_HT;\n\n            var bitcode = new Array(65535);\n            var category = new Array(65535);\n            var outputfDCTQuant = new Array(64);\n            var DU = new Array(64);\n            var byteout = [];\n            var bytenew = 0;\n            var bytepos = 7;\n\n            var YDU = new Array(64);\n            var UDU = new Array(64);\n            var VDU = new Array(64);\n            var clt = new Array(256);\n            var RGB_YUV_TABLE = new Array(2048);\n            var currentQuality;\n\n            var ZigZag = [\n                     0, 1, 5, 6,14,15,27,28,\n                     2, 4, 7,13,16,26,29,42,\n                     3, 8,12,17,25,30,41,43,\n                     9,11,18,24,31,40,44,53,\n                    10,19,23,32,39,45,52,54,\n                    20,22,33,38,46,51,55,60,\n                    21,34,37,47,50,56,59,61,\n                    35,36,48,49,57,58,62,63\n                ];\n\n            var std_dc_luminance_nrcodes = [0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];\n            var std_dc_luminance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n            var std_ac_luminance_nrcodes = [0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,0x7d];\n            var std_ac_luminance_values = [\n                    0x01,0x02,0x03,0x00,0x04,0x11,0x05,0x12,\n                    0x21,0x31,0x41,0x06,0x13,0x51,0x61,0x07,\n                    0x22,0x71,0x14,0x32,0x81,0x91,0xa1,0x08,\n                    0x23,0x42,0xb1,0xc1,0x15,0x52,0xd1,0xf0,\n                    0x24,0x33,0x62,0x72,0x82,0x09,0x0a,0x16,\n                    0x17,0x18,0x19,0x1a,0x25,0x26,0x27,0x28,\n                    0x29,0x2a,0x34,0x35,0x36,0x37,0x38,0x39,\n                    0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49,\n                    0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59,\n                    0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69,\n                    0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79,\n                    0x7a,0x83,0x84,0x85,0x86,0x87,0x88,0x89,\n                    0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98,\n                    0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7,\n                    0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6,\n                    0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5,\n                    0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4,\n                    0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe1,0xe2,\n                    0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea,\n                    0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n                    0xf9,0xfa\n                ];\n\n            var std_dc_chrominance_nrcodes = [0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];\n            var std_dc_chrominance_values = [0,1,2,3,4,5,6,7,8,9,10,11];\n            var std_ac_chrominance_nrcodes = [0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,0x77];\n            var std_ac_chrominance_values = [\n                    0x00,0x01,0x02,0x03,0x11,0x04,0x05,0x21,\n                    0x31,0x06,0x12,0x41,0x51,0x07,0x61,0x71,\n                    0x13,0x22,0x32,0x81,0x08,0x14,0x42,0x91,\n                    0xa1,0xb1,0xc1,0x09,0x23,0x33,0x52,0xf0,\n                    0x15,0x62,0x72,0xd1,0x0a,0x16,0x24,0x34,\n                    0xe1,0x25,0xf1,0x17,0x18,0x19,0x1a,0x26,\n                    0x27,0x28,0x29,0x2a,0x35,0x36,0x37,0x38,\n                    0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48,\n                    0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58,\n                    0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68,\n                    0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78,\n                    0x79,0x7a,0x82,0x83,0x84,0x85,0x86,0x87,\n                    0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96,\n                    0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5,\n                    0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,\n                    0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3,\n                    0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2,\n                    0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda,\n                    0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,\n                    0xea,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8,\n                    0xf9,0xfa\n                ];\n\n            function initQuantTables(sf){\n                    var YQT = [\n                        16, 11, 10, 16, 24, 40, 51, 61,\n                        12, 12, 14, 19, 26, 58, 60, 55,\n                        14, 13, 16, 24, 40, 57, 69, 56,\n                        14, 17, 22, 29, 51, 87, 80, 62,\n                        18, 22, 37, 56, 68,109,103, 77,\n                        24, 35, 55, 64, 81,104,113, 92,\n                        49, 64, 78, 87,103,121,120,101,\n                        72, 92, 95, 98,112,100,103, 99\n                    ];\n\n                    for (var i = 0; i < 64; i++) {\n                        var t = ffloor((YQT[i]*sf+50)/100);\n                        if (t < 1) {\n                            t = 1;\n                        } else if (t > 255) {\n                            t = 255;\n                        }\n                        YTable[ZigZag[i]] = t;\n                    }\n                    var UVQT = [\n                        17, 18, 24, 47, 99, 99, 99, 99,\n                        18, 21, 26, 66, 99, 99, 99, 99,\n                        24, 26, 56, 99, 99, 99, 99, 99,\n                        47, 66, 99, 99, 99, 99, 99, 99,\n                        99, 99, 99, 99, 99, 99, 99, 99,\n                        99, 99, 99, 99, 99, 99, 99, 99,\n                        99, 99, 99, 99, 99, 99, 99, 99,\n                        99, 99, 99, 99, 99, 99, 99, 99\n                    ];\n                    for (var j = 0; j < 64; j++) {\n                        var u = ffloor((UVQT[j]*sf+50)/100);\n                        if (u < 1) {\n                            u = 1;\n                        } else if (u > 255) {\n                            u = 255;\n                        }\n                        UVTable[ZigZag[j]] = u;\n                    }\n                    var aasf = [\n                        1.0, 1.387039845, 1.306562965, 1.175875602,\n                        1.0, 0.785694958, 0.541196100, 0.275899379\n                    ];\n                    var k = 0;\n                    for (var row = 0; row < 8; row++)\n                    {\n                        for (var col = 0; col < 8; col++)\n                        {\n                            fdtbl_Y[k]  = (1.0 / (YTable [ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n                            fdtbl_UV[k] = (1.0 / (UVTable[ZigZag[k]] * aasf[row] * aasf[col] * 8.0));\n                            k++;\n                        }\n                    }\n                }\n\n                function computeHuffmanTbl(nrcodes, std_table){\n                    var codevalue = 0;\n                    var pos_in_table = 0;\n                    var HT = new Array();\n                    for (var k = 1; k <= 16; k++) {\n                        for (var j = 1; j <= nrcodes[k]; j++) {\n                            HT[std_table[pos_in_table]] = [];\n                            HT[std_table[pos_in_table]][0] = codevalue;\n                            HT[std_table[pos_in_table]][1] = k;\n                            pos_in_table++;\n                            codevalue++;\n                        }\n                        codevalue*=2;\n                    }\n                    return HT;\n                }\n\n                function initHuffmanTbl()\n                {\n                    YDC_HT = computeHuffmanTbl(std_dc_luminance_nrcodes,std_dc_luminance_values);\n                    UVDC_HT = computeHuffmanTbl(std_dc_chrominance_nrcodes,std_dc_chrominance_values);\n                    YAC_HT = computeHuffmanTbl(std_ac_luminance_nrcodes,std_ac_luminance_values);\n                    UVAC_HT = computeHuffmanTbl(std_ac_chrominance_nrcodes,std_ac_chrominance_values);\n                }\n\n                function initCategoryNumber()\n                {\n                    var nrlower = 1;\n                    var nrupper = 2;\n                    for (var cat = 1; cat <= 15; cat++) {\n                        //Positive numbers\n                        for (var nr = nrlower; nr<nrupper; nr++) {\n                            category[32767+nr] = cat;\n                            bitcode[32767+nr] = [];\n                            bitcode[32767+nr][1] = cat;\n                            bitcode[32767+nr][0] = nr;\n                        }\n                        //Negative numbers\n                        for (var nrneg =-(nrupper-1); nrneg<=-nrlower; nrneg++) {\n                            category[32767+nrneg] = cat;\n                            bitcode[32767+nrneg] = [];\n                            bitcode[32767+nrneg][1] = cat;\n                            bitcode[32767+nrneg][0] = nrupper-1+nrneg;\n                        }\n                        nrlower <<= 1;\n                        nrupper <<= 1;\n                    }\n                }\n\n                function initRGBYUVTable() {\n                    for(var i = 0; i < 256;i++) {\n                        RGB_YUV_TABLE[i]            =  19595 * i;\n                        RGB_YUV_TABLE[(i+ 256)>>0]  =  38470 * i;\n                        RGB_YUV_TABLE[(i+ 512)>>0]  =   7471 * i + 0x8000;\n                        RGB_YUV_TABLE[(i+ 768)>>0]  = -11059 * i;\n                        RGB_YUV_TABLE[(i+1024)>>0]  = -21709 * i;\n                        RGB_YUV_TABLE[(i+1280)>>0]  =  32768 * i + 0x807FFF;\n                        RGB_YUV_TABLE[(i+1536)>>0]  = -27439 * i;\n                        RGB_YUV_TABLE[(i+1792)>>0]  = - 5329 * i;\n                    }\n                }\n\n                // IO functions\n                function writeBits(bs)\n                {\n                    var value = bs[0];\n                    var posval = bs[1]-1;\n                    while ( posval >= 0 ) {\n                        if (value & (1 << posval) ) {\n                            bytenew |= (1 << bytepos);\n                        }\n                        posval--;\n                        bytepos--;\n                        if (bytepos < 0) {\n                            if (bytenew == 0xFF) {\n                                writeByte(0xFF);\n                                writeByte(0);\n                            }\n                            else {\n                                writeByte(bytenew);\n                            }\n                            bytepos=7;\n                            bytenew=0;\n                        }\n                    }\n                }\n\n                function writeByte(value)\n                {\n                    byteout.push(clt[value]); // write char directly instead of converting later\n                }\n\n                function writeWord(value)\n                {\n                    writeByte((value>>8)&0xFF);\n                    writeByte((value   )&0xFF);\n                }\n\n                // DCT & quantization core\n                function fDCTQuant(data, fdtbl)\n                {\n                    var d0, d1, d2, d3, d4, d5, d6, d7;\n                    /* Pass 1: process rows. */\n                    var dataOff=0;\n                    var i;\n                    var I8 = 8;\n                    var I64 = 64;\n                    for (i=0; i<I8; ++i)\n                    {\n                        d0 = data[dataOff];\n                        d1 = data[dataOff+1];\n                        d2 = data[dataOff+2];\n                        d3 = data[dataOff+3];\n                        d4 = data[dataOff+4];\n                        d5 = data[dataOff+5];\n                        d6 = data[dataOff+6];\n                        d7 = data[dataOff+7];\n\n                        var tmp0 = d0 + d7;\n                        var tmp7 = d0 - d7;\n                        var tmp1 = d1 + d6;\n                        var tmp6 = d1 - d6;\n                        var tmp2 = d2 + d5;\n                        var tmp5 = d2 - d5;\n                        var tmp3 = d3 + d4;\n                        var tmp4 = d3 - d4;\n\n                        /* Even part */\n                        var tmp10 = tmp0 + tmp3;    /* phase 2 */\n                        var tmp13 = tmp0 - tmp3;\n                        var tmp11 = tmp1 + tmp2;\n                        var tmp12 = tmp1 - tmp2;\n\n                        data[dataOff] = tmp10 + tmp11; /* phase 3 */\n                        data[dataOff+4] = tmp10 - tmp11;\n\n                        var z1 = (tmp12 + tmp13) * 0.707106781; /* c4 */\n                        data[dataOff+2] = tmp13 + z1; /* phase 5 */\n                        data[dataOff+6] = tmp13 - z1;\n\n                        /* Odd part */\n                        tmp10 = tmp4 + tmp5; /* phase 2 */\n                        tmp11 = tmp5 + tmp6;\n                        tmp12 = tmp6 + tmp7;\n\n                        /* The rotator is modified from fig 4-8 to avoid extra negations. */\n                        var z5 = (tmp10 - tmp12) * 0.382683433; /* c6 */\n                        var z2 = 0.541196100 * tmp10 + z5; /* c2-c6 */\n                        var z4 = 1.306562965 * tmp12 + z5; /* c2+c6 */\n                        var z3 = tmp11 * 0.707106781; /* c4 */\n\n                        var z11 = tmp7 + z3;    /* phase 5 */\n                        var z13 = tmp7 - z3;\n\n                        data[dataOff+5] = z13 + z2; /* phase 6 */\n                        data[dataOff+3] = z13 - z2;\n                        data[dataOff+1] = z11 + z4;\n                        data[dataOff+7] = z11 - z4;\n\n                        dataOff += 8; /* advance pointer to next row */\n                    }\n\n                    /* Pass 2: process columns. */\n                    dataOff = 0;\n                    for (i=0; i<I8; ++i)\n                    {\n                        d0 = data[dataOff];\n                        d1 = data[dataOff + 8];\n                        d2 = data[dataOff + 16];\n                        d3 = data[dataOff + 24];\n                        d4 = data[dataOff + 32];\n                        d5 = data[dataOff + 40];\n                        d6 = data[dataOff + 48];\n                        d7 = data[dataOff + 56];\n\n                        var tmp0p2 = d0 + d7;\n                        var tmp7p2 = d0 - d7;\n                        var tmp1p2 = d1 + d6;\n                        var tmp6p2 = d1 - d6;\n                        var tmp2p2 = d2 + d5;\n                        var tmp5p2 = d2 - d5;\n                        var tmp3p2 = d3 + d4;\n                        var tmp4p2 = d3 - d4;\n\n                        /* Even part */\n                        var tmp10p2 = tmp0p2 + tmp3p2;  /* phase 2 */\n                        var tmp13p2 = tmp0p2 - tmp3p2;\n                        var tmp11p2 = tmp1p2 + tmp2p2;\n                        var tmp12p2 = tmp1p2 - tmp2p2;\n\n                        data[dataOff] = tmp10p2 + tmp11p2; /* phase 3 */\n                        data[dataOff+32] = tmp10p2 - tmp11p2;\n\n                        var z1p2 = (tmp12p2 + tmp13p2) * 0.707106781; /* c4 */\n                        data[dataOff+16] = tmp13p2 + z1p2; /* phase 5 */\n                        data[dataOff+48] = tmp13p2 - z1p2;\n\n                        /* Odd part */\n                        tmp10p2 = tmp4p2 + tmp5p2; /* phase 2 */\n                        tmp11p2 = tmp5p2 + tmp6p2;\n                        tmp12p2 = tmp6p2 + tmp7p2;\n\n                        /* The rotator is modified from fig 4-8 to avoid extra negations. */\n                        var z5p2 = (tmp10p2 - tmp12p2) * 0.382683433; /* c6 */\n                        var z2p2 = 0.541196100 * tmp10p2 + z5p2; /* c2-c6 */\n                        var z4p2 = 1.306562965 * tmp12p2 + z5p2; /* c2+c6 */\n                        var z3p2 = tmp11p2 * 0.707106781; /* c4 */\n\n                        var z11p2 = tmp7p2 + z3p2;  /* phase 5 */\n                        var z13p2 = tmp7p2 - z3p2;\n\n                        data[dataOff+40] = z13p2 + z2p2; /* phase 6 */\n                        data[dataOff+24] = z13p2 - z2p2;\n                        data[dataOff+ 8] = z11p2 + z4p2;\n                        data[dataOff+56] = z11p2 - z4p2;\n\n                        dataOff++; /* advance pointer to next column */\n                    }\n\n                    // Quantize/descale the coefficients\n                    var fDCTQuant;\n                    for (i=0; i<I64; ++i)\n                    {\n                        // Apply the quantization and scaling factor & Round to nearest integer\n                        fDCTQuant = data[i]*fdtbl[i];\n                        outputfDCTQuant[i] = (fDCTQuant > 0.0) ? ((fDCTQuant + 0.5)|0) : ((fDCTQuant - 0.5)|0);\n                        //outputfDCTQuant[i] = fround(fDCTQuant);\n\n                    }\n                    return outputfDCTQuant;\n                }\n\n                function writeAPP0()\n                {\n                    writeWord(0xFFE0); // marker\n                    writeWord(16); // length\n                    writeByte(0x4A); // J\n                    writeByte(0x46); // F\n                    writeByte(0x49); // I\n                    writeByte(0x46); // F\n                    writeByte(0); // = \"JFIF\",'\\0'\n                    writeByte(1); // versionhi\n                    writeByte(1); // versionlo\n                    writeByte(0); // xyunits\n                    writeWord(1); // xdensity\n                    writeWord(1); // ydensity\n                    writeByte(0); // thumbnwidth\n                    writeByte(0); // thumbnheight\n                }\n\n                function writeSOF0(width, height)\n                {\n                    writeWord(0xFFC0); // marker\n                    writeWord(17);   // length, truecolor YUV JPG\n                    writeByte(8);    // precision\n                    writeWord(height);\n                    writeWord(width);\n                    writeByte(3);    // nrofcomponents\n                    writeByte(1);    // IdY\n                    writeByte(0x11); // HVY\n                    writeByte(0);    // QTY\n                    writeByte(2);    // IdU\n                    writeByte(0x11); // HVU\n                    writeByte(1);    // QTU\n                    writeByte(3);    // IdV\n                    writeByte(0x11); // HVV\n                    writeByte(1);    // QTV\n                }\n\n                function writeDQT()\n                {\n                    writeWord(0xFFDB); // marker\n                    writeWord(132);    // length\n                    writeByte(0);\n                    for (var i=0; i<64; i++) {\n                        writeByte(YTable[i]);\n                    }\n                    writeByte(1);\n                    for (var j=0; j<64; j++) {\n                        writeByte(UVTable[j]);\n                    }\n                }\n\n                function writeDHT()\n                {\n                    writeWord(0xFFC4); // marker\n                    writeWord(0x01A2); // length\n\n                    writeByte(0); // HTYDCinfo\n                    for (var i=0; i<16; i++) {\n                        writeByte(std_dc_luminance_nrcodes[i+1]);\n                    }\n                    for (var j=0; j<=11; j++) {\n                        writeByte(std_dc_luminance_values[j]);\n                    }\n\n                    writeByte(0x10); // HTYACinfo\n                    for (var k=0; k<16; k++) {\n                        writeByte(std_ac_luminance_nrcodes[k+1]);\n                    }\n                    for (var l=0; l<=161; l++) {\n                        writeByte(std_ac_luminance_values[l]);\n                    }\n\n                    writeByte(1); // HTUDCinfo\n                    for (var m=0; m<16; m++) {\n                        writeByte(std_dc_chrominance_nrcodes[m+1]);\n                    }\n                    for (var n=0; n<=11; n++) {\n                        writeByte(std_dc_chrominance_values[n]);\n                    }\n\n                    writeByte(0x11); // HTUACinfo\n                    for (var o=0; o<16; o++) {\n                        writeByte(std_ac_chrominance_nrcodes[o+1]);\n                    }\n                    for (var p=0; p<=161; p++) {\n                        writeByte(std_ac_chrominance_values[p]);\n                    }\n                }\n\n                function writeSOS()\n                {\n                    writeWord(0xFFDA); // marker\n                    writeWord(12); // length\n                    writeByte(3); // nrofcomponents\n                    writeByte(1); // IdY\n                    writeByte(0); // HTY\n                    writeByte(2); // IdU\n                    writeByte(0x11); // HTU\n                    writeByte(3); // IdV\n                    writeByte(0x11); // HTV\n                    writeByte(0); // Ss\n                    writeByte(0x3f); // Se\n                    writeByte(0); // Bf\n                }\n\n                function processDU(CDU, fdtbl, DC, HTDC, HTAC){\n                    var EOB = HTAC[0x00];\n                    var M16zeroes = HTAC[0xF0];\n                    var pos;\n                    var I16 = 16;\n                    var I63 = 63;\n                    var I64 = 64;\n                    var DU_DCT = fDCTQuant(CDU, fdtbl);\n                    //ZigZag reorder\n                    for (var j=0;j<I64;++j) {\n                        DU[ZigZag[j]]=DU_DCT[j];\n                    }\n                    var Diff = DU[0] - DC; DC = DU[0];\n                    //Encode DC\n                    if (Diff==0) {\n                        writeBits(HTDC[0]); // Diff might be 0\n                    } else {\n                        pos = 32767+Diff;\n                        writeBits(HTDC[category[pos]]);\n                        writeBits(bitcode[pos]);\n                    }\n                    //Encode ACs\n                    var end0pos = 63; // was const... which is crazy\n                    for (; (end0pos>0)&&(DU[end0pos]==0); end0pos--) {}\n                    //end0pos = first element in reverse order !=0\n                    if ( end0pos == 0) {\n                        writeBits(EOB);\n                        return DC;\n                    }\n                    var i = 1;\n                    var lng;\n                    while ( i <= end0pos ) {\n                        var startpos = i;\n                        for (; (DU[i]==0) && (i<=end0pos); ++i) {}\n                        var nrzeroes = i-startpos;\n                        if ( nrzeroes >= I16 ) {\n                            lng = nrzeroes>>4;\n                            for (var nrmarker=1; nrmarker <= lng; ++nrmarker)\n                                writeBits(M16zeroes);\n                            nrzeroes = nrzeroes&0xF;\n                        }\n                        pos = 32767+DU[i];\n                        writeBits(HTAC[(nrzeroes<<4)+category[pos]]);\n                        writeBits(bitcode[pos]);\n                        i++;\n                    }\n                    if ( end0pos != I63 ) {\n                        writeBits(EOB);\n                    }\n                    return DC;\n                }\n\n                function initCharLookupTable(){\n                    var sfcc = String.fromCharCode;\n                    for(var i=0; i < 256; i++){ ///// ACHTUNG // 255\n                        clt[i] = sfcc(i);\n                    }\n                }\n\n                this.encode = function(image,quality) // image data object\n                {\n                    // var time_start = new Date().getTime();\n\n                    if(quality) setQuality(quality);\n\n                    // Initialize bit writer\n                    byteout = new Array();\n                    bytenew=0;\n                    bytepos=7;\n\n                    // Add JPEG headers\n                    writeWord(0xFFD8); // SOI\n                    writeAPP0();\n                    writeDQT();\n                    writeSOF0(image.width,image.height);\n                    writeDHT();\n                    writeSOS();\n\n\n                    // Encode 8x8 macroblocks\n                    var DCY=0;\n                    var DCU=0;\n                    var DCV=0;\n\n                    bytenew=0;\n                    bytepos=7;\n\n\n                    this.encode.displayName = \"_encode_\";\n\n                    var imageData = image.data;\n                    var width = image.width;\n                    var height = image.height;\n\n                    var quadWidth = width*4;\n                    var tripleWidth = width*3;\n\n                    var x, y = 0;\n                    var r, g, b;\n                    var start,p, col,row,pos;\n                    while(y < height){\n                        x = 0;\n                        while(x < quadWidth){\n                        start = quadWidth * y + x;\n                        p = start;\n                        col = -1;\n                        row = 0;\n\n                        for(pos=0; pos < 64; pos++){\n                            row = pos >> 3;// /8\n                            col = ( pos & 7 ) * 4; // %8\n                            p = start + ( row * quadWidth ) + col;\n\n                            if(y+row >= height){ // padding bottom\n                                p-= (quadWidth*(y+1+row-height));\n                            }\n\n                            if(x+col >= quadWidth){ // padding right\n                                p-= ((x+col) - quadWidth +4)\n                            }\n\n                            r = imageData[ p++ ];\n                            g = imageData[ p++ ];\n                            b = imageData[ p++ ];\n\n\n                            /* // calculate YUV values dynamically\n                            YDU[pos]=((( 0.29900)*r+( 0.58700)*g+( 0.11400)*b))-128; //-0x80\n                            UDU[pos]=(((-0.16874)*r+(-0.33126)*g+( 0.50000)*b));\n                            VDU[pos]=((( 0.50000)*r+(-0.41869)*g+(-0.08131)*b));\n                            */\n\n                            // use lookup table (slightly faster)\n                            YDU[pos] = ((RGB_YUV_TABLE[r]             + RGB_YUV_TABLE[(g +  256)>>0] + RGB_YUV_TABLE[(b +  512)>>0]) >> 16)-128;\n                            UDU[pos] = ((RGB_YUV_TABLE[(r +  768)>>0] + RGB_YUV_TABLE[(g + 1024)>>0] + RGB_YUV_TABLE[(b + 1280)>>0]) >> 16)-128;\n                            VDU[pos] = ((RGB_YUV_TABLE[(r + 1280)>>0] + RGB_YUV_TABLE[(g + 1536)>>0] + RGB_YUV_TABLE[(b + 1792)>>0]) >> 16)-128;\n\n                        }\n\n                        DCY = processDU(YDU, fdtbl_Y, DCY, YDC_HT, YAC_HT);\n                        DCU = processDU(UDU, fdtbl_UV, DCU, UVDC_HT, UVAC_HT);\n                        DCV = processDU(VDU, fdtbl_UV, DCV, UVDC_HT, UVAC_HT);\n                        x+=32;\n                        }\n                        y+=8;\n                    }\n\n\n                    ////////////////////////////////////////////////////////////////\n\n                    // Do the bit alignment of the EOI marker\n                    if ( bytepos >= 0 ) {\n                        var fillbits = [];\n                        fillbits[1] = bytepos+1;\n                        fillbits[0] = (1<<(bytepos+1))-1;\n                        writeBits(fillbits);\n                    }\n\n                    writeWord(0xFFD9); //EOI\n\n                    var jpegDataUri = 'data:image/jpeg;base64,' + btoa(byteout.join(''));\n\n                    byteout = [];\n\n                    // benchmarking\n                    // var duration = new Date().getTime() - time_start;\n                    // console.log('Encoding time: '+ currentQuality + 'ms');\n                    //\n\n                    return jpegDataUri\n            }\n\n            function setQuality(quality){\n                if (quality <= 0) {\n                    quality = 1;\n                }\n                if (quality > 100) {\n                    quality = 100;\n                }\n\n                if(currentQuality == quality) return // don't recalc if unchanged\n\n                var sf = 0;\n                if (quality < 50) {\n                    sf = Math.floor(5000 / quality);\n                } else {\n                    sf = Math.floor(200 - quality*2);\n                }\n\n                initQuantTables(sf);\n                currentQuality = quality;\n                // console.log('Quality set to: '+quality +'%');\n            }\n\n            function init(){\n                // var time_start = new Date().getTime();\n                if(!quality) quality = 50;\n                // Create tables\n                initCharLookupTable()\n                initHuffmanTbl();\n                initCategoryNumber();\n                initRGBYUVTable();\n\n                setQuality(quality);\n                // var duration = new Date().getTime() - time_start;\n                // console.log('Initialization '+ duration + 'ms');\n            }\n\n            init();\n\n        }\n\n        JPEGEncoder.encode = function( data, quality ) {\n            var encoder = new JPEGEncoder( quality );\n\n            return encoder.encode( data );\n        }\n\n        return JPEGEncoder;\n    });\n    /**\n     * @fileOverview Fix android canvas.toDataUrl bug.\n     */\n    define('runtime/html5/androidpatch',[\n        'runtime/html5/util',\n        'runtime/html5/jpegencoder',\n        'base'\n    ], function( Util, encoder, Base ) {\n        var origin = Util.canvasToDataUrl,\n            supportJpeg;\n\n        Util.canvasToDataUrl = function( canvas, type, quality ) {\n            var ctx, w, h, fragement, parts;\n\n            // android\n            if ( !Base.os.android ) {\n                return origin.apply( null, arguments );\n            }\n\n            // canvasjpeg\n            // JPEG 255, 216\n            if ( type === 'image/jpeg' && typeof supportJpeg === 'undefined' ) {\n                fragement = origin.apply( null, arguments );\n\n                parts = fragement.split(',');\n\n                if ( ~parts[ 0 ].indexOf('base64') ) {\n                    fragement = atob( parts[ 1 ] );\n                } else {\n                    fragement = decodeURIComponent( parts[ 1 ] );\n                }\n\n                fragement = fragement.substring( 0, 2 );\n\n                supportJpeg = fragement.charCodeAt( 0 ) === 255 &&\n                        fragement.charCodeAt( 1 ) === 216;\n            }\n\n            // android\n            if ( type === 'image/jpeg' && !supportJpeg ) {\n                w = canvas.width;\n                h = canvas.height;\n                ctx = canvas.getContext('2d');\n\n                return encoder.encode( ctx.getImageData( 0, 0, w, h ), quality );\n            }\n\n            return origin.apply( null, arguments );\n        };\n    });\n    /**\n     * @fileOverview Image\n     */\n    define('runtime/html5/image',[\n        'base',\n        'runtime/html5/runtime',\n        'runtime/html5/util'\n    ], function( Base, Html5Runtime, Util ) {\n\n        var BLANK = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D';\n\n        return Html5Runtime.register( 'Image', {\n\n            // flag: \n            modified: false,\n\n            init: function() {\n                var me = this,\n                    img = new Image();\n\n                img.onload = function() {\n\n                    me._info = {\n                        type: me.type,\n                        width: this.width,\n                        height: this.height\n                    };\n\n                    // meta\n                    if ( !me._metas && 'image/jpeg' === me.type ) {\n                        Util.parseMeta( me._blob, function( error, ret ) {\n                            me._metas = ret;\n                            me.owner.trigger('load');\n                        });\n                    } else {\n                        me.owner.trigger('load');\n                    }\n                };\n\n                img.onerror = function() {\n                    me.owner.trigger('error');\n                };\n\n                me._img = img;\n            },\n\n            loadFromBlob: function( blob ) {\n                var me = this,\n                    img = me._img;\n\n                me._blob = blob;\n                me.type = blob.type;\n                img.src = Util.createObjectURL( blob.getSource() );\n                me.owner.once( 'load', function() {\n                    Util.revokeObjectURL( img.src );\n                });\n            },\n\n            resize: function( width, height ) {\n                var canvas = this._canvas ||\n                        (this._canvas = document.createElement('canvas'));\n\n                this._resize( this._img, canvas, width, height );\n                this._blob = null;    // \n                this.modified = true;\n                this.owner.trigger( 'complete', 'resize' );\n            },\n\n            crop: function( x, y, w, h, s ) {\n                var cvs = this._canvas ||\n                        (this._canvas = document.createElement('canvas')),\n                    opts = this.options,\n                    img = this._img,\n                    iw = img.naturalWidth,\n                    ih = img.naturalHeight,\n                    orientation = this.getOrientation();\n\n                s = s || 1;\n\n                // todo  orientation \n                // values that require 90 degree rotation\n                // if ( ~[ 5, 6, 7, 8 ].indexOf( orientation ) ) {\n\n                //     switch ( orientation ) {\n                //         case 6:\n                //             tmp = x;\n                //             x = y;\n                //             y = iw * s - tmp - w;\n                //             console.log(ih * s, tmp, w)\n                //             break;\n                //     }\n\n                //     (w ^= h, h ^= w, w ^= h);\n                // }\n\n                cvs.width = w;\n                cvs.height = h;\n\n                opts.preserveHeaders || this._rotate2Orientaion( cvs, orientation );\n                this._renderImageToCanvas( cvs, img, -x, -y, iw * s, ih * s );\n\n                this._blob = null;    // \n                this.modified = true;\n                this.owner.trigger( 'complete', 'crop' );\n            },\n\n            getAsBlob: function( type ) {\n                var blob = this._blob,\n                    opts = this.options,\n                    canvas;\n\n                type = type || this.type;\n\n                // blob\n                if ( this.modified || this.type !== type ) {\n                    canvas = this._canvas;\n\n                    if ( type === 'image/jpeg' ) {\n\n                        blob = Util.canvasToDataUrl( canvas, type, opts.quality );\n\n                        if ( opts.preserveHeaders && this._metas &&\n                                this._metas.imageHead ) {\n\n                            blob = Util.dataURL2ArrayBuffer( blob );\n                            blob = Util.updateImageHead( blob,\n                                    this._metas.imageHead );\n                            blob = Util.arrayBufferToBlob( blob, type );\n                            return blob;\n                        }\n                    } else {\n                        blob = Util.canvasToDataUrl( canvas, type );\n                    }\n\n                    blob = Util.dataURL2Blob( blob );\n                }\n\n                return blob;\n            },\n\n            getAsDataUrl: function( type ) {\n                var opts = this.options;\n\n                type = type || this.type;\n\n                if ( type === 'image/jpeg' ) {\n                    return Util.canvasToDataUrl( this._canvas, type, opts.quality );\n                } else {\n                    return this._canvas.toDataURL( type );\n                }\n            },\n\n            getOrientation: function() {\n                return this._metas && this._metas.exif &&\n                        this._metas.exif.get('Orientation') || 1;\n            },\n\n            info: function( val ) {\n\n                // setter\n                if ( val ) {\n                    this._info = val;\n                    return this;\n                }\n\n                // getter\n                return this._info;\n            },\n\n            meta: function( val ) {\n\n                // setter\n                if ( val ) {\n                    this._meta = val;\n                    return this;\n                }\n\n                // getter\n                return this._meta;\n            },\n\n            destroy: function() {\n                var canvas = this._canvas;\n                this._img.onload = null;\n\n                if ( canvas ) {\n                    canvas.getContext('2d')\n                            .clearRect( 0, 0, canvas.width, canvas.height );\n                    canvas.width = canvas.height = 0;\n                    this._canvas = null;\n                }\n\n                // image\n                this._img.src = BLANK;\n                this._img = this._blob = null;\n            },\n\n            _resize: function( img, cvs, width, height ) {\n                var opts = this.options,\n                    naturalWidth = img.width,\n                    naturalHeight = img.height,\n                    orientation = this.getOrientation(),\n                    scale, w, h, x, y;\n\n                // values that require 90 degree rotation\n                if ( ~[ 5, 6, 7, 8 ].indexOf( orientation ) ) {\n\n                    // width, height\n                    width ^= height;\n                    height ^= width;\n                    width ^= height;\n                }\n\n                scale = Math[ opts.crop ? 'max' : 'min' ]( width / naturalWidth,\n                        height / naturalHeight );\n\n                // \n                opts.allowMagnify || (scale = Math.min( 1, scale ));\n\n                w = naturalWidth * scale;\n                h = naturalHeight * scale;\n\n                if ( opts.crop ) {\n                    cvs.width = width;\n                    cvs.height = height;\n                } else {\n                    cvs.width = w;\n                    cvs.height = h;\n                }\n\n                x = (cvs.width - w) / 2;\n                y = (cvs.height - h) / 2;\n\n                opts.preserveHeaders || this._rotate2Orientaion( cvs, orientation );\n\n                this._renderImageToCanvas( cvs, img, x, y, w, h );\n            },\n\n            _rotate2Orientaion: function( canvas, orientation ) {\n                var width = canvas.width,\n                    height = canvas.height,\n                    ctx = canvas.getContext('2d');\n\n                switch ( orientation ) {\n                    case 5:\n                    case 6:\n                    case 7:\n                    case 8:\n                        canvas.width = height;\n                        canvas.height = width;\n                        break;\n                }\n\n                switch ( orientation ) {\n                    case 2:    // horizontal flip\n                        ctx.translate( width, 0 );\n                        ctx.scale( -1, 1 );\n                        break;\n\n                    case 3:    // 180 rotate left\n                        ctx.translate( width, height );\n                        ctx.rotate( Math.PI );\n                        break;\n\n                    case 4:    // vertical flip\n                        ctx.translate( 0, height );\n                        ctx.scale( 1, -1 );\n                        break;\n\n                    case 5:    // vertical flip + 90 rotate right\n                        ctx.rotate( 0.5 * Math.PI );\n                        ctx.scale( 1, -1 );\n                        break;\n\n                    case 6:    // 90 rotate right\n                        ctx.rotate( 0.5 * Math.PI );\n                        ctx.translate( 0, -height );\n                        break;\n\n                    case 7:    // horizontal flip + 90 rotate right\n                        ctx.rotate( 0.5 * Math.PI );\n                        ctx.translate( width, -height );\n                        ctx.scale( -1, 1 );\n                        break;\n\n                    case 8:    // 90 rotate left\n                        ctx.rotate( -0.5 * Math.PI );\n                        ctx.translate( -width, 0 );\n                        break;\n                }\n            },\n\n            // https://github.com/stomita/ios-imagefile-megapixel/\n            // blob/master/src/megapix-image.js\n            _renderImageToCanvas: (function() {\n\n                // ios, \n                if ( !Base.os.ios ) {\n                    return function( canvas ) {\n                        var args = Base.slice( arguments, 1 ),\n                            ctx = canvas.getContext('2d');\n\n                        ctx.drawImage.apply( ctx, args );\n                    };\n                }\n\n                /**\n                 * Detecting vertical squash in loaded image.\n                 * Fixes a bug which squash image vertically while drawing into\n                 * canvas for some images.\n                 */\n                function detectVerticalSquash( img, iw, ih ) {\n                    var canvas = document.createElement('canvas'),\n                        ctx = canvas.getContext('2d'),\n                        sy = 0,\n                        ey = ih,\n                        py = ih,\n                        data, alpha, ratio;\n\n\n                    canvas.width = 1;\n                    canvas.height = ih;\n                    ctx.drawImage( img, 0, 0 );\n                    data = ctx.getImageData( 0, 0, 1, ih ).data;\n\n                    // search image edge pixel position in case\n                    // it is squashed vertically.\n                    while ( py > sy ) {\n                        alpha = data[ (py - 1) * 4 + 3 ];\n\n                        if ( alpha === 0 ) {\n                            ey = py;\n                        } else {\n                            sy = py;\n                        }\n\n                        py = (ey + sy) >> 1;\n                    }\n\n                    ratio = (py / ih);\n                    return (ratio === 0) ? 1 : ratio;\n                }\n\n                // fix ie7 bug\n                // http://stackoverflow.com/questions/11929099/\n                // html5-canvas-drawimage-ratio-bug-ios\n                if ( Base.os.ios >= 7 ) {\n                    return function( canvas, img, x, y, w, h ) {\n                        var iw = img.naturalWidth,\n                            ih = img.naturalHeight,\n                            vertSquashRatio = detectVerticalSquash( img, iw, ih );\n\n                        return canvas.getContext('2d').drawImage( img, 0, 0,\n                                iw * vertSquashRatio, ih * vertSquashRatio,\n                                x, y, w, h );\n                    };\n                }\n\n                /**\n                 * Detect subsampling in loaded image.\n                 * In iOS, larger images than 2M pixels may be\n                 * subsampled in rendering.\n                 */\n                function detectSubsampling( img ) {\n                    var iw = img.naturalWidth,\n                        ih = img.naturalHeight,\n                        canvas, ctx;\n\n                    // subsampling may happen overmegapixel image\n                    if ( iw * ih > 1024 * 1024 ) {\n                        canvas = document.createElement('canvas');\n                        canvas.width = canvas.height = 1;\n                        ctx = canvas.getContext('2d');\n                        ctx.drawImage( img, -iw + 1, 0 );\n\n                        // subsampled image becomes half smaller in rendering size.\n                        // check alpha channel value to confirm image is covering\n                        // edge pixel or not. if alpha value is 0\n                        // image is not covering, hence subsampled.\n                        return ctx.getImageData( 0, 0, 1, 1 ).data[ 3 ] === 0;\n                    } else {\n                        return false;\n                    }\n                }\n\n\n                return function( canvas, img, x, y, width, height ) {\n                    var iw = img.naturalWidth,\n                        ih = img.naturalHeight,\n                        ctx = canvas.getContext('2d'),\n                        subsampled = detectSubsampling( img ),\n                        doSquash = this.type === 'image/jpeg',\n                        d = 1024,\n                        sy = 0,\n                        dy = 0,\n                        tmpCanvas, tmpCtx, vertSquashRatio, dw, dh, sx, dx;\n\n                    if ( subsampled ) {\n                        iw /= 2;\n                        ih /= 2;\n                    }\n\n                    ctx.save();\n                    tmpCanvas = document.createElement('canvas');\n                    tmpCanvas.width = tmpCanvas.height = d;\n\n                    tmpCtx = tmpCanvas.getContext('2d');\n                    vertSquashRatio = doSquash ?\n                            detectVerticalSquash( img, iw, ih ) : 1;\n\n                    dw = Math.ceil( d * width / iw );\n                    dh = Math.ceil( d * height / ih / vertSquashRatio );\n\n                    while ( sy < ih ) {\n                        sx = 0;\n                        dx = 0;\n                        while ( sx < iw ) {\n                            tmpCtx.clearRect( 0, 0, d, d );\n                            tmpCtx.drawImage( img, -sx, -sy );\n                            ctx.drawImage( tmpCanvas, 0, 0, d, d,\n                                    x + dx, y + dy, dw, dh );\n                            sx += d;\n                            dx += dw;\n                        }\n                        sy += d;\n                        dy += dh;\n                    }\n                    ctx.restore();\n                    tmpCanvas = tmpCtx = null;\n                };\n            })()\n        });\n    });\n    /**\n     * @fileOverview Transport\n     * @todo chunked\n     * \n     * chunked\n     */\n    define('runtime/html5/transport',[\n        'base',\n        'runtime/html5/runtime'\n    ], function( Base, Html5Runtime ) {\n\n        var noop = Base.noop,\n            $ = Base.$;\n\n        return Html5Runtime.register( 'Transport', {\n            init: function() {\n                this._status = 0;\n                this._response = null;\n            },\n\n            send: function() {\n                var owner = this.owner,\n                    opts = this.options,\n                    xhr = this._initAjax(),\n                    blob = owner._blob,\n                    server = opts.server,\n                    formData, binary, fr;\n\n                if ( opts.sendAsBinary ) {\n                    server += (/\\?/.test( server ) ? '&' : '?') +\n                            $.param( owner._formData );\n\n                    binary = blob.getSource();\n                } else {\n                    formData = new FormData();\n                    $.each( owner._formData, function( k, v ) {\n                        formData.append( k, v );\n                    });\n\n                    formData.append( opts.fileVal, blob.getSource(),\n                            opts.filename || owner._formData.name || '' );\n                }\n\n                if ( opts.withCredentials && 'withCredentials' in xhr ) {\n                    xhr.open( opts.method, server, true );\n                    xhr.withCredentials = true;\n                } else {\n                    xhr.open( opts.method, server );\n                }\n\n                this._setRequestHeader( xhr, opts.headers );\n\n                if ( binary ) {\n                    //  content-type \n                    xhr.overrideMimeType &&\n                            xhr.overrideMimeType('application/octet-stream');\n\n                    // androidblob\n                    // bug\n                    // https://code.google.com/p/android/issues/detail?id=39882\n                    // fileReaderarraybuffer\n                    if ( Base.os.android ) {\n                        fr = new FileReader();\n\n                        fr.onload = function() {\n                            xhr.send( this.result );\n                            fr = fr.onload = null;\n                        };\n\n                        fr.readAsArrayBuffer( binary );\n                    } else {\n                        xhr.send( binary );\n                    }\n                } else {\n                    xhr.send( formData );\n                }\n            },\n\n            getResponse: function() {\n                return this._response;\n            },\n\n            getResponseAsJson: function() {\n                return this._parseJson( this._response );\n            },\n\n            getStatus: function() {\n                return this._status;\n            },\n\n            abort: function() {\n                var xhr = this._xhr;\n\n                if ( xhr ) {\n                    xhr.upload.onprogress = noop;\n                    xhr.onreadystatechange = noop;\n                    xhr.abort();\n\n                    this._xhr = xhr = null;\n                }\n            },\n\n            destroy: function() {\n                this.abort();\n            },\n\n            _initAjax: function() {\n                var me = this,\n                    xhr = new XMLHttpRequest(),\n                    opts = this.options;\n\n                if ( opts.withCredentials && !('withCredentials' in xhr) &&\n                        typeof XDomainRequest !== 'undefined' ) {\n                    xhr = new XDomainRequest();\n                }\n\n                xhr.upload.onprogress = function( e ) {\n                    var percentage = 0;\n\n                    if ( e.lengthComputable ) {\n                        percentage = e.loaded / e.total;\n                    }\n\n                    return me.trigger( 'progress', percentage );\n                };\n\n                xhr.onreadystatechange = function() {\n\n                    if ( xhr.readyState !== 4 ) {\n                        return;\n                    }\n\n                    xhr.upload.onprogress = noop;\n                    xhr.onreadystatechange = noop;\n                    me._xhr = null;\n                    me._status = xhr.status;\n\n                    if ( xhr.status >= 200 && xhr.status < 300 ) {\n                        me._response = xhr.responseText;\n                        return me.trigger('load');\n                    } else if ( xhr.status >= 500 && xhr.status < 600 ) {\n                        me._response = xhr.responseText;\n                        return me.trigger( 'error', 'server' );\n                    }\n\n\n                    return me.trigger( 'error', me._status ? 'http' : 'abort' );\n                };\n\n                me._xhr = xhr;\n                return xhr;\n            },\n\n            _setRequestHeader: function( xhr, headers ) {\n                $.each( headers, function( key, val ) {\n                    xhr.setRequestHeader( key, val );\n                });\n            },\n\n            _parseJson: function( str ) {\n                var json;\n\n                try {\n                    json = JSON.parse( str );\n                } catch ( ex ) {\n                    json = {};\n                }\n\n                return json;\n            }\n        });\n    });\n    /**\n     * @fileOverview  Transport flash\n     */\n    define('runtime/html5/md5',[\n        'runtime/html5/runtime'\n    ], function( FlashRuntime ) {\n\n        /*\n         * Fastest md5 implementation around (JKM md5)\n         * Credits: Joseph Myers\n         *\n         * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n         * @see http://jsperf.com/md5-shootout/7\n         */\n\n        /* this function is much faster,\n          so if possible we use it. Some IEs\n          are the only ones I know of that\n          need the idiotic second function,\n          generated by an if clause.  */\n        var add32 = function (a, b) {\n            return (a + b) & 0xFFFFFFFF;\n        },\n\n        cmn = function (q, a, b, x, s, t) {\n            a = add32(add32(a, q), add32(x, t));\n            return add32((a << s) | (a >>> (32 - s)), b);\n        },\n\n        ff = function (a, b, c, d, x, s, t) {\n            return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n        },\n\n        gg = function (a, b, c, d, x, s, t) {\n            return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n        },\n\n        hh = function (a, b, c, d, x, s, t) {\n            return cmn(b ^ c ^ d, a, b, x, s, t);\n        },\n\n        ii = function (a, b, c, d, x, s, t) {\n            return cmn(c ^ (b | (~d)), a, b, x, s, t);\n        },\n\n        md5cycle = function (x, k) {\n            var a = x[0],\n                b = x[1],\n                c = x[2],\n                d = x[3];\n\n            a = ff(a, b, c, d, k[0], 7, -680876936);\n            d = ff(d, a, b, c, k[1], 12, -389564586);\n            c = ff(c, d, a, b, k[2], 17, 606105819);\n            b = ff(b, c, d, a, k[3], 22, -1044525330);\n            a = ff(a, b, c, d, k[4], 7, -176418897);\n            d = ff(d, a, b, c, k[5], 12, 1200080426);\n            c = ff(c, d, a, b, k[6], 17, -1473231341);\n            b = ff(b, c, d, a, k[7], 22, -45705983);\n            a = ff(a, b, c, d, k[8], 7, 1770035416);\n            d = ff(d, a, b, c, k[9], 12, -1958414417);\n            c = ff(c, d, a, b, k[10], 17, -42063);\n            b = ff(b, c, d, a, k[11], 22, -1990404162);\n            a = ff(a, b, c, d, k[12], 7, 1804603682);\n            d = ff(d, a, b, c, k[13], 12, -40341101);\n            c = ff(c, d, a, b, k[14], 17, -1502002290);\n            b = ff(b, c, d, a, k[15], 22, 1236535329);\n\n            a = gg(a, b, c, d, k[1], 5, -165796510);\n            d = gg(d, a, b, c, k[6], 9, -1069501632);\n            c = gg(c, d, a, b, k[11], 14, 643717713);\n            b = gg(b, c, d, a, k[0], 20, -373897302);\n            a = gg(a, b, c, d, k[5], 5, -701558691);\n            d = gg(d, a, b, c, k[10], 9, 38016083);\n            c = gg(c, d, a, b, k[15], 14, -660478335);\n            b = gg(b, c, d, a, k[4], 20, -405537848);\n            a = gg(a, b, c, d, k[9], 5, 568446438);\n            d = gg(d, a, b, c, k[14], 9, -1019803690);\n            c = gg(c, d, a, b, k[3], 14, -187363961);\n            b = gg(b, c, d, a, k[8], 20, 1163531501);\n            a = gg(a, b, c, d, k[13], 5, -1444681467);\n            d = gg(d, a, b, c, k[2], 9, -51403784);\n            c = gg(c, d, a, b, k[7], 14, 1735328473);\n            b = gg(b, c, d, a, k[12], 20, -1926607734);\n\n            a = hh(a, b, c, d, k[5], 4, -378558);\n            d = hh(d, a, b, c, k[8], 11, -2022574463);\n            c = hh(c, d, a, b, k[11], 16, 1839030562);\n            b = hh(b, c, d, a, k[14], 23, -35309556);\n            a = hh(a, b, c, d, k[1], 4, -1530992060);\n            d = hh(d, a, b, c, k[4], 11, 1272893353);\n            c = hh(c, d, a, b, k[7], 16, -155497632);\n            b = hh(b, c, d, a, k[10], 23, -1094730640);\n            a = hh(a, b, c, d, k[13], 4, 681279174);\n            d = hh(d, a, b, c, k[0], 11, -358537222);\n            c = hh(c, d, a, b, k[3], 16, -722521979);\n            b = hh(b, c, d, a, k[6], 23, 76029189);\n            a = hh(a, b, c, d, k[9], 4, -640364487);\n            d = hh(d, a, b, c, k[12], 11, -421815835);\n            c = hh(c, d, a, b, k[15], 16, 530742520);\n            b = hh(b, c, d, a, k[2], 23, -995338651);\n\n            a = ii(a, b, c, d, k[0], 6, -198630844);\n            d = ii(d, a, b, c, k[7], 10, 1126891415);\n            c = ii(c, d, a, b, k[14], 15, -1416354905);\n            b = ii(b, c, d, a, k[5], 21, -57434055);\n            a = ii(a, b, c, d, k[12], 6, 1700485571);\n            d = ii(d, a, b, c, k[3], 10, -1894986606);\n            c = ii(c, d, a, b, k[10], 15, -1051523);\n            b = ii(b, c, d, a, k[1], 21, -2054922799);\n            a = ii(a, b, c, d, k[8], 6, 1873313359);\n            d = ii(d, a, b, c, k[15], 10, -30611744);\n            c = ii(c, d, a, b, k[6], 15, -1560198380);\n            b = ii(b, c, d, a, k[13], 21, 1309151649);\n            a = ii(a, b, c, d, k[4], 6, -145523070);\n            d = ii(d, a, b, c, k[11], 10, -1120210379);\n            c = ii(c, d, a, b, k[2], 15, 718787259);\n            b = ii(b, c, d, a, k[9], 21, -343485551);\n\n            x[0] = add32(a, x[0]);\n            x[1] = add32(b, x[1]);\n            x[2] = add32(c, x[2]);\n            x[3] = add32(d, x[3]);\n        },\n\n        /* there needs to be support for Unicode here,\n           * unless we pretend that we can redefine the MD-5\n           * algorithm for multi-byte characters (perhaps\n           * by adding every four 16-bit characters and\n           * shortening the sum to 32 bits). Otherwise\n           * I suggest performing MD-5 as if every character\n           * was two bytes--e.g., 0040 0025 = @%--but then\n           * how will an ordinary MD-5 sum be matched?\n           * There is no way to standardize text to something\n           * like UTF-8 before transformation; speed cost is\n           * utterly prohibitive. The JavaScript standard\n           * itself needs to look at this: it should start\n           * providing access to strings as preformed UTF-8\n           * 8-bit unsigned value arrays.\n           */\n        md5blk = function (s) {\n            var md5blks = [],\n                i; /* Andy King said do it this way. */\n\n            for (i = 0; i < 64; i += 4) {\n                md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n            }\n            return md5blks;\n        },\n\n        md5blk_array = function (a) {\n            var md5blks = [],\n                i; /* Andy King said do it this way. */\n\n            for (i = 0; i < 64; i += 4) {\n                md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n            }\n            return md5blks;\n        },\n\n        md51 = function (s) {\n            var n = s.length,\n                state = [1732584193, -271733879, -1732584194, 271733878],\n                i,\n                length,\n                tail,\n                tmp,\n                lo,\n                hi;\n\n            for (i = 64; i <= n; i += 64) {\n                md5cycle(state, md5blk(s.substring(i - 64, i)));\n            }\n            s = s.substring(i - 64);\n            length = s.length;\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n            for (i = 0; i < length; i += 1) {\n                tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n            }\n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n            if (i > 55) {\n                md5cycle(state, tail);\n                for (i = 0; i < 16; i += 1) {\n                    tail[i] = 0;\n                }\n            }\n\n            // Beware that the final length might not fit in 32 bits so we take care of that\n            tmp = n * 8;\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n            lo = parseInt(tmp[2], 16);\n            hi = parseInt(tmp[1], 16) || 0;\n\n            tail[14] = lo;\n            tail[15] = hi;\n\n            md5cycle(state, tail);\n            return state;\n        },\n\n        md51_array = function (a) {\n            var n = a.length,\n                state = [1732584193, -271733879, -1732584194, 271733878],\n                i,\n                length,\n                tail,\n                tmp,\n                lo,\n                hi;\n\n            for (i = 64; i <= n; i += 64) {\n                md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n            }\n\n            // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n            // containing the last element of the parent array if the sub array specified starts\n            // beyond the length of the parent array - weird.\n            // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n            a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n            length = a.length;\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n            for (i = 0; i < length; i += 1) {\n                tail[i >> 2] |= a[i] << ((i % 4) << 3);\n            }\n\n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n            if (i > 55) {\n                md5cycle(state, tail);\n                for (i = 0; i < 16; i += 1) {\n                    tail[i] = 0;\n                }\n            }\n\n            // Beware that the final length might not fit in 32 bits so we take care of that\n            tmp = n * 8;\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n            lo = parseInt(tmp[2], 16);\n            hi = parseInt(tmp[1], 16) || 0;\n\n            tail[14] = lo;\n            tail[15] = hi;\n\n            md5cycle(state, tail);\n\n            return state;\n        },\n\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'],\n\n        rhex = function (n) {\n            var s = '',\n                j;\n            for (j = 0; j < 4; j += 1) {\n                s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n            }\n            return s;\n        },\n\n        hex = function (x) {\n            var i;\n            for (i = 0; i < x.length; i += 1) {\n                x[i] = rhex(x[i]);\n            }\n            return x.join('');\n        },\n\n        md5 = function (s) {\n            return hex(md51(s));\n        },\n\n\n\n        ////////////////////////////////////////////////////////////////////////////\n\n        /**\n         * SparkMD5 OOP implementation.\n         *\n         * Use this class to perform an incremental md5, otherwise use the\n         * static methods instead.\n         */\n        SparkMD5 = function () {\n            // call reset to init the instance\n            this.reset();\n        };\n\n\n        // In some cases the fast add32 function cannot be used..\n        if (md5('hello') !== '5d41402abc4b2a76b9719d911017c592') {\n            add32 = function (x, y) {\n                var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                    msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n                return (msw << 16) | (lsw & 0xFFFF);\n            };\n        }\n\n\n        /**\n         * Appends a string.\n         * A conversion will be applied if an utf8 string is detected.\n         *\n         * @param {String} str The string to be appended\n         *\n         * @return {SparkMD5} The instance itself\n         */\n        SparkMD5.prototype.append = function (str) {\n            // converts the string to utf8 bytes if necessary\n            if (/[\\u0080-\\uFFFF]/.test(str)) {\n                str = unescape(encodeURIComponent(str));\n            }\n\n            // then append as binary\n            this.appendBinary(str);\n\n            return this;\n        };\n\n        /**\n         * Appends a binary string.\n         *\n         * @param {String} contents The binary string to be appended\n         *\n         * @return {SparkMD5} The instance itself\n         */\n        SparkMD5.prototype.appendBinary = function (contents) {\n            this._buff += contents;\n            this._length += contents.length;\n\n            var length = this._buff.length,\n                i;\n\n            for (i = 64; i <= length; i += 64) {\n                md5cycle(this._state, md5blk(this._buff.substring(i - 64, i)));\n            }\n\n            this._buff = this._buff.substr(i - 64);\n\n            return this;\n        };\n\n        /**\n         * Finishes the incremental computation, reseting the internal state and\n         * returning the result.\n         * Use the raw parameter to obtain the raw result instead of the hex one.\n         *\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\n         *\n         * @return {String|Array} The result\n         */\n        SparkMD5.prototype.end = function (raw) {\n            var buff = this._buff,\n                length = buff.length,\n                i,\n                tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n                ret;\n\n            for (i = 0; i < length; i += 1) {\n                tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n            }\n\n            this._finish(tail, length);\n            ret = raw ? this._state : hex(this._state);\n\n            this.reset();\n\n            return ret;\n        };\n\n        /**\n         * Finish the final calculation based on the tail.\n         *\n         * @param {Array}  tail   The tail (will be modified)\n         * @param {Number} length The length of the remaining buffer\n         */\n        SparkMD5.prototype._finish = function (tail, length) {\n            var i = length,\n                tmp,\n                lo,\n                hi;\n\n            tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n            if (i > 55) {\n                md5cycle(this._state, tail);\n                for (i = 0; i < 16; i += 1) {\n                    tail[i] = 0;\n                }\n            }\n\n            // Do the final computation based on the tail and length\n            // Beware that the final length may not fit in 32 bits so we take care of that\n            tmp = this._length * 8;\n            tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n            lo = parseInt(tmp[2], 16);\n            hi = parseInt(tmp[1], 16) || 0;\n\n            tail[14] = lo;\n            tail[15] = hi;\n            md5cycle(this._state, tail);\n        };\n\n        /**\n         * Resets the internal state of the computation.\n         *\n         * @return {SparkMD5} The instance itself\n         */\n        SparkMD5.prototype.reset = function () {\n            this._buff = \"\";\n            this._length = 0;\n            this._state = [1732584193, -271733879, -1732584194, 271733878];\n\n            return this;\n        };\n\n        /**\n         * Releases memory used by the incremental buffer and other aditional\n         * resources. If you plan to use the instance again, use reset instead.\n         */\n        SparkMD5.prototype.destroy = function () {\n            delete this._state;\n            delete this._buff;\n            delete this._length;\n        };\n\n\n        /**\n         * Performs the md5 hash on a string.\n         * A conversion will be applied if utf8 string is detected.\n         *\n         * @param {String}  str The string\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\n         *\n         * @return {String|Array} The result\n         */\n        SparkMD5.hash = function (str, raw) {\n            // converts the string to utf8 bytes if necessary\n            if (/[\\u0080-\\uFFFF]/.test(str)) {\n                str = unescape(encodeURIComponent(str));\n            }\n\n            var hash = md51(str);\n\n            return raw ? hash : hex(hash);\n        };\n\n        /**\n         * Performs the md5 hash on a binary string.\n         *\n         * @param {String}  content The binary string\n         * @param {Boolean} raw     True to get the raw result, false to get the hex result\n         *\n         * @return {String|Array} The result\n         */\n        SparkMD5.hashBinary = function (content, raw) {\n            var hash = md51(content);\n\n            return raw ? hash : hex(hash);\n        };\n\n        /**\n         * SparkMD5 OOP implementation for array buffers.\n         *\n         * Use this class to perform an incremental md5 ONLY for array buffers.\n         */\n        SparkMD5.ArrayBuffer = function () {\n            // call reset to init the instance\n            this.reset();\n        };\n\n        ////////////////////////////////////////////////////////////////////////////\n\n        /**\n         * Appends an array buffer.\n         *\n         * @param {ArrayBuffer} arr The array to be appended\n         *\n         * @return {SparkMD5.ArrayBuffer} The instance itself\n         */\n        SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n            // TODO: we could avoid the concatenation here but the algorithm would be more complex\n            //       if you find yourself needing extra performance, please make a PR.\n            var buff = this._concatArrayBuffer(this._buff, arr),\n                length = buff.length,\n                i;\n\n            this._length += arr.byteLength;\n\n            for (i = 64; i <= length; i += 64) {\n                md5cycle(this._state, md5blk_array(buff.subarray(i - 64, i)));\n            }\n\n            // Avoids IE10 weirdness (documented above)\n            this._buff = (i - 64) < length ? buff.subarray(i - 64) : new Uint8Array(0);\n\n            return this;\n        };\n\n        /**\n         * Finishes the incremental computation, reseting the internal state and\n         * returning the result.\n         * Use the raw parameter to obtain the raw result instead of the hex one.\n         *\n         * @param {Boolean} raw True to get the raw result, false to get the hex result\n         *\n         * @return {String|Array} The result\n         */\n        SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n            var buff = this._buff,\n                length = buff.length,\n                tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n                i,\n                ret;\n\n            for (i = 0; i < length; i += 1) {\n                tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n            }\n\n            this._finish(tail, length);\n            ret = raw ? this._state : hex(this._state);\n\n            this.reset();\n\n            return ret;\n        };\n\n        SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n        /**\n         * Resets the internal state of the computation.\n         *\n         * @return {SparkMD5.ArrayBuffer} The instance itself\n         */\n        SparkMD5.ArrayBuffer.prototype.reset = function () {\n            this._buff = new Uint8Array(0);\n            this._length = 0;\n            this._state = [1732584193, -271733879, -1732584194, 271733878];\n\n            return this;\n        };\n\n        /**\n         * Releases memory used by the incremental buffer and other aditional\n         * resources. If you plan to use the instance again, use reset instead.\n         */\n        SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n        /**\n         * Concats two array buffers, returning a new one.\n         *\n         * @param  {ArrayBuffer} first  The first array buffer\n         * @param  {ArrayBuffer} second The second array buffer\n         *\n         * @return {ArrayBuffer} The new array buffer\n         */\n        SparkMD5.ArrayBuffer.prototype._concatArrayBuffer = function (first, second) {\n            var firstLength = first.length,\n                result = new Uint8Array(firstLength + second.byteLength);\n\n            result.set(first);\n            result.set(new Uint8Array(second), firstLength);\n\n            return result;\n        };\n\n        /**\n         * Performs the md5 hash on an array buffer.\n         *\n         * @param {ArrayBuffer} arr The array buffer\n         * @param {Boolean}     raw True to get the raw result, false to get the hex result\n         *\n         * @return {String|Array} The result\n         */\n        SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n            var hash = md51_array(new Uint8Array(arr));\n\n            return raw ? hash : hex(hash);\n        };\n\n        return FlashRuntime.register( 'Md5', {\n            init: function() {\n                // do nothing.\n            },\n\n            loadFromBlob: function( file ) {\n                var blob = file.getSource(),\n                    chunkSize = 2 * 1024 * 1024,\n                    chunks = Math.ceil( blob.size / chunkSize ),\n                    chunk = 0,\n                    owner = this.owner,\n                    spark = new SparkMD5.ArrayBuffer(),\n                    me = this,\n                    blobSlice = blob.mozSlice || blob.webkitSlice || blob.slice,\n                    loadNext, fr;\n\n                fr = new FileReader();\n\n                loadNext = function() {\n                    var start, end;\n\n                    start = chunk * chunkSize;\n                    end = Math.min( start + chunkSize, blob.size );\n\n                    fr.onload = function( e ) {\n                        spark.append( e.target.result );\n                        owner.trigger( 'progress', {\n                            total: file.size,\n                            loaded: end\n                        });\n                    };\n\n                    fr.onloadend = function() {\n                        fr.onloadend = fr.onload = null;\n\n                        if ( ++chunk < chunks ) {\n                            setTimeout( loadNext, 1 );\n                        } else {\n                            setTimeout(function(){\n                                owner.trigger('load');\n                                me.result = spark.end();\n                                loadNext = file = blob = spark = null;\n                                owner.trigger('complete');\n                            }, 50 );\n                        }\n                    };\n\n                    fr.readAsArrayBuffer( blobSlice.call( blob, start, end ) );\n                };\n\n                loadNext();\n            },\n\n            getResult: function() {\n                return this.result;\n            }\n        });\n    });\n    /**\n     * @fileOverview FlashRuntime\n     */\n    define('runtime/flash/runtime',[\n        'base',\n        'runtime/runtime',\n        'runtime/compbase'\n    ], function( Base, Runtime, CompBase ) {\n\n        var $ = Base.$,\n            type = 'flash',\n            components = {};\n\n\n        function getFlashVersion() {\n            var version;\n\n            try {\n                version = navigator.plugins[ 'Shockwave Flash' ];\n                version = version.description;\n            } catch ( ex ) {\n                try {\n                    version = new ActiveXObject('ShockwaveFlash.ShockwaveFlash')\n                            .GetVariable('$version');\n                } catch ( ex2 ) {\n                    version = '0.0';\n                }\n            }\n            version = version.match( /\\d+/g );\n            return parseFloat( version[ 0 ] + '.' + version[ 1 ], 10 );\n        }\n\n        function FlashRuntime() {\n            var pool = {},\n                clients = {},\n                destroy = this.destroy,\n                me = this,\n                jsreciver = Base.guid('webuploader_');\n\n            Runtime.apply( me, arguments );\n            me.type = type;\n\n\n            // RuntimeClient\n            me.exec = function( comp, fn/*, args...*/ ) {\n                var client = this,\n                    uid = client.uid,\n                    args = Base.slice( arguments, 2 ),\n                    instance;\n\n                clients[ uid ] = client;\n\n                if ( components[ comp ] ) {\n                    if ( !pool[ uid ] ) {\n                        pool[ uid ] = new components[ comp ]( client, me );\n                    }\n\n                    instance = pool[ uid ];\n\n                    if ( instance[ fn ] ) {\n                        return instance[ fn ].apply( instance, args );\n                    }\n                }\n\n                return me.flashExec.apply( client, arguments );\n            };\n\n            function handler( evt, obj ) {\n                var type = evt.type || evt,\n                    parts, uid;\n\n                parts = type.split('::');\n                uid = parts[ 0 ];\n                type = parts[ 1 ];\n\n                // console.log.apply( console, arguments );\n\n                if ( type === 'Ready' && uid === me.uid ) {\n                    me.trigger('ready');\n                } else if ( clients[ uid ] ) {\n                    clients[ uid ].trigger( type.toLowerCase(), evt, obj );\n                }\n\n                // Base.log( evt, obj );\n            }\n\n            // flash\n            window[ jsreciver ] = function() {\n                var args = arguments;\n\n                // \n                setTimeout(function() {\n                    handler.apply( null, args );\n                }, 1 );\n            };\n\n            this.jsreciver = jsreciver;\n\n            this.destroy = function() {\n                // @todo \n                return destroy && destroy.apply( this, arguments );\n            };\n\n            this.flashExec = function( comp, fn ) {\n                var flash = me.getFlash(),\n                    args = Base.slice( arguments, 2 );\n\n                return flash.exec( this.uid, comp, fn, args );\n            };\n\n            // @todo\n        }\n\n        Base.inherits( Runtime, {\n            constructor: FlashRuntime,\n\n            init: function() {\n                var container = this.getContainer(),\n                    opts = this.options,\n                    html;\n\n                // if not the minimal height, shims are not initialized\n                // in older browsers (e.g FF3.6, IE6,7,8, Safari 4.0,5.0, etc)\n                container.css({\n                    position: 'absolute',\n                    top: '-8px',\n                    left: '-8px',\n                    width: '9px',\n                    height: '9px',\n                    overflow: 'hidden'\n                });\n\n                // insert flash object\n                html = '<object id=\"' + this.uid + '\" type=\"application/' +\n                        'x-shockwave-flash\" data=\"' +  opts.swf + '\" ';\n\n                if ( Base.browser.ie ) {\n                    html += 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" ';\n                }\n\n                html += 'width=\"100%\" height=\"100%\" style=\"outline:0\">'  +\n                    '<param name=\"movie\" value=\"' + opts.swf + '\" />' +\n                    '<param name=\"flashvars\" value=\"uid=' + this.uid +\n                    '&jsreciver=' + this.jsreciver + '\" />' +\n                    '<param name=\"wmode\" value=\"transparent\" />' +\n                    '<param name=\"allowscriptaccess\" value=\"always\" />' +\n                '</object>';\n\n                container.html( html );\n            },\n\n            getFlash: function() {\n                if ( this._flash ) {\n                    return this._flash;\n                }\n\n                this._flash = $( '#' + this.uid ).get( 0 );\n                return this._flash;\n            }\n\n        });\n\n        FlashRuntime.register = function( name, component ) {\n            component = components[ name ] = Base.inherits( CompBase, $.extend({\n\n                // @todo fix this later\n                flashExec: function() {\n                    var owner = this.owner,\n                        runtime = this.getRuntime();\n\n                    return runtime.flashExec.apply( owner, arguments );\n                }\n            }, component ) );\n\n            return component;\n        };\n\n        if ( getFlashVersion() >= 11.4 ) {\n            Runtime.addRuntime( type, FlashRuntime );\n        }\n\n        return FlashRuntime;\n    });\n    /**\n     * @fileOverview FilePicker\n     */\n    define('runtime/flash/filepicker',[\n        'base',\n        'runtime/flash/runtime'\n    ], function( Base, FlashRuntime ) {\n        var $ = Base.$;\n\n        return FlashRuntime.register( 'FilePicker', {\n            init: function( opts ) {\n                var copy = $.extend({}, opts ),\n                    len, i;\n\n                // Flashtitleflashbug.\n                len = copy.accept && copy.accept.length;\n                for (  i = 0; i < len; i++ ) {\n                    if ( !copy.accept[ i ].title ) {\n                        copy.accept[ i ].title = 'Files';\n                    }\n                }\n\n                delete copy.button;\n                delete copy.id;\n                delete copy.container;\n\n                this.flashExec( 'FilePicker', 'init', copy );\n            },\n\n            destroy: function() {\n                this.flashExec( 'FilePicker', 'destroy' );\n            }\n        });\n    });\n    /**\n     * @fileOverview \n     */\n    define('runtime/flash/image',[\n        'runtime/flash/runtime'\n    ], function( FlashRuntime ) {\n\n        return FlashRuntime.register( 'Image', {\n            // init: function( options ) {\n            //     var owner = this.owner;\n\n            //     this.flashExec( 'Image', 'init', options );\n            //     owner.on( 'load', function() {\n            //         debugger;\n            //     });\n            // },\n\n            loadFromBlob: function( blob ) {\n                var owner = this.owner;\n\n                owner.info() && this.flashExec( 'Image', 'info', owner.info() );\n                owner.meta() && this.flashExec( 'Image', 'meta', owner.meta() );\n\n                this.flashExec( 'Image', 'loadFromBlob', blob.uid );\n            }\n        });\n    });\n    /**\n     * @fileOverview  Transport flash\n     */\n    define('runtime/flash/transport',[\n        'base',\n        'runtime/flash/runtime',\n        'runtime/client'\n    ], function( Base, FlashRuntime, RuntimeClient ) {\n        var $ = Base.$;\n\n        return FlashRuntime.register( 'Transport', {\n            init: function() {\n                this._status = 0;\n                this._response = null;\n                this._responseJson = null;\n            },\n\n            send: function() {\n                var owner = this.owner,\n                    opts = this.options,\n                    xhr = this._initAjax(),\n                    blob = owner._blob,\n                    server = opts.server,\n                    binary;\n\n                xhr.connectRuntime( blob.ruid );\n\n                if ( opts.sendAsBinary ) {\n                    server += (/\\?/.test( server ) ? '&' : '?') +\n                            $.param( owner._formData );\n\n                    binary = blob.uid;\n                } else {\n                    $.each( owner._formData, function( k, v ) {\n                        xhr.exec( 'append', k, v );\n                    });\n\n                    xhr.exec( 'appendBlob', opts.fileVal, blob.uid,\n                            opts.filename || owner._formData.name || '' );\n                }\n\n                this._setRequestHeader( xhr, opts.headers );\n                xhr.exec( 'send', {\n                    method: opts.method,\n                    url: server,\n                    forceURLStream: opts.forceURLStream,\n                    mimeType: 'application/octet-stream',\n                }, binary );\n            },\n\n            getStatus: function() {\n                return this._status;\n            },\n\n            getResponse: function() {\n                return this._response || '';\n            },\n\n            getResponseAsJson: function() {\n                return this._responseJson;\n            },\n\n            abort: function() {\n                var xhr = this._xhr;\n\n                if ( xhr ) {\n                    xhr.exec('abort');\n                    xhr.destroy();\n                    this._xhr = xhr = null;\n                }\n            },\n\n            destroy: function() {\n                this.abort();\n            },\n\n            _initAjax: function() {\n                var me = this,\n                    xhr = new RuntimeClient('XMLHttpRequest');\n\n                xhr.on( 'uploadprogress progress', function( e ) {\n                    var percent = e.loaded / e.total;\n                    percent = Math.min( 1, Math.max( 0, percent ) );\n                    return me.trigger( 'progress', percent );\n                });\n\n                xhr.on( 'load', function() {\n                    var status = xhr.exec('getStatus'),\n                        readBody = false,\n                        err = '',\n                        p;\n\n                    xhr.off();\n                    me._xhr = null;\n\n                    if ( status >= 200 && status < 300 ) {\n                        readBody = true;\n                    } else if ( status >= 500 && status < 600 ) {\n                        readBody = true;\n                        err = 'server';\n                    } else {\n                        err = 'http';\n                    }\n\n                    if ( readBody ) {\n                        me._response = xhr.exec('getResponse');\n                        me._response = decodeURIComponent( me._response );\n\n                        // flash  bug,  js \n                        // try {\n                        //     me._responseJson = xhr.exec('getResponseAsJson');\n                        // } catch ( error ) {\n\n                        p = window.JSON && window.JSON.parse || function( s ) {\n                            try {\n                                return new Function('return ' + s).call();\n                            } catch ( err ) {\n                                return {};\n                            }\n                        };\n                        me._responseJson  = me._response ? p(me._response) : {};\n\n                        // }\n                    }\n\n                    xhr.destroy();\n                    xhr = null;\n\n                    return err ? me.trigger( 'error', err ) : me.trigger('load');\n                });\n\n                xhr.on( 'error', function() {\n                    xhr.off();\n                    me._xhr = null;\n                    me.trigger( 'error', 'http' );\n                });\n\n                me._xhr = xhr;\n                return xhr;\n            },\n\n            _setRequestHeader: function( xhr, headers ) {\n                $.each( headers, function( key, val ) {\n                    xhr.exec( 'setRequestHeader', key, val );\n                });\n            }\n        });\n    });\n    /**\n     * @fileOverview Blob Html\n     */\n    define('runtime/flash/blob',[\n        'runtime/flash/runtime',\n        'lib/blob'\n    ], function( FlashRuntime, Blob ) {\n\n        return FlashRuntime.register( 'Blob', {\n            slice: function( start, end ) {\n                var blob = this.flashExec( 'Blob', 'slice', start, end );\n\n                return new Blob( blob.uid, blob );\n            }\n        });\n    });\n    /**\n     * @fileOverview  Md5 flash\n     */\n    define('runtime/flash/md5',[\n        'runtime/flash/runtime'\n    ], function( FlashRuntime ) {\n\n        return FlashRuntime.register( 'Md5', {\n            init: function() {\n                // do nothing.\n            },\n\n            loadFromBlob: function( blob ) {\n                return this.flashExec( 'Md5', 'loadFromBlob', blob.uid );\n            }\n        });\n    });\n    /**\n     * @fileOverview \n     */\n    define('preset/all',[\n        'base',\n\n        // widgets\n        'widgets/filednd',\n        'widgets/filepaste',\n        'widgets/filepicker',\n        'widgets/image',\n        'widgets/queue',\n        'widgets/runtime',\n        'widgets/upload',\n        'widgets/validator',\n        'widgets/md5',\n\n        // runtimes\n        // html5\n        'runtime/html5/blob',\n        'runtime/html5/dnd',\n        'runtime/html5/filepaste',\n        'runtime/html5/filepicker',\n        'runtime/html5/imagemeta/exif',\n        'runtime/html5/androidpatch',\n        'runtime/html5/image',\n        'runtime/html5/transport',\n        'runtime/html5/md5',\n\n        // flash\n        'runtime/flash/filepicker',\n        'runtime/flash/image',\n        'runtime/flash/transport',\n        'runtime/flash/blob',\n        'runtime/flash/md5'\n    ], function( Base ) {\n        return Base;\n    });\n    /**\n     * @fileOverview  webuploader \n     *\n     *  log \n     *\n     *  options.disableWidgets \n     *\n     * \n     * WebUploader.create({\n     *     ...\n     *\n     *     disableWidgets: 'log',\n     *\n     *     ...\n     * })\n     */\n    define('widgets/log',[\n        'base',\n        'uploader',\n        'widgets/widget'\n    ], function( Base, Uploader ) {\n        var $ = Base.$,\n            logUrl = ' http://static.tieba.baidu.com/tb/pms/img/st.gif??',\n            product = (location.hostname || location.host || 'protected').toLowerCase(),\n\n            //  baidu \n            enable = product && /baidu/i.exec(product),\n            base;\n\n        if (!enable) {\n            return;\n        }\n\n        base = {\n            dv: 3,\n            master: 'webuploader',\n            online: /test/.exec(product) ? 0 : 1,\n            module: '',\n            product: product,\n            type: 0\n        };\n\n        function send(data) {\n            var obj = $.extend({}, base, data),\n                url = logUrl.replace(/^(.*)\\?/, '$1' + $.param( obj )),\n                image = new Image();\n\n            image.src = url;\n        }\n\n        return Uploader.register({\n            name: 'log',\n\n            init: function() {\n                var owner = this.owner,\n                    count = 0,\n                    size = 0;\n\n                owner\n                    .on('error', function(code) {\n                        send({\n                            type: 2,\n                            c_error_code: code\n                        });\n                    })\n                    .on('uploadError', function(file, reason) {\n                        send({\n                            type: 2,\n                            c_error_code: 'UPLOAD_ERROR',\n                            c_reason: '' + reason\n                        });\n                    })\n                    .on('uploadComplete', function(file) {\n                        count++;\n                        size += file.size;\n                    }).\n                    on('uploadFinished', function() {\n                        send({\n                            c_count: count,\n                            c_size: size\n                        });\n                        count = size = 0;\n                    });\n\n                send({\n                    c_usage: 1\n                });\n            }\n        });\n    });\n    /**\n     * @fileOverview Uploader\n     */\n    define('webuploader',[\n        'preset/all',\n        'widgets/log'\n    ], function( preset ) {\n        return preset;\n    });\n    return require('webuploader');\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/plugin/webuploader/webuploader.js\n// module id = 86\n// module chunks = 4 6 7 12 16 30 34","/**\n * str\n */\n\nvar trim = function (str) {\n    return str.replace(/(^[ \\t\\n\\r]+)|([ \\t\\n\\r]+$)/g, '');\n};\n\nmodule.exports = trim;\n\n\n// WEBPACK FOOTER //\n// ./src/js/utils/trim.js","var aCity = {\n    11: \"\",\n    12: \"\",\n    13: \"\",\n    14: \"\",\n    15: \"\",\n    21: \"\",\n    22: \"\",\n    23: \"\",\n    31: \"\",\n    32: \"\",\n    33: \"\",\n    34: \"\",\n    35: \"\",\n    36: \"\",\n    37: \"\",\n    41: \"\",\n    42: \"\",\n    43: \"\",\n    44: \"\",\n    45: \"\",\n    46: \"\",\n    50: \"\",\n    51: \"\",\n    52: \"\",\n    53: \"\",\n    54: \"\",\n    61: \"\",\n    62: \"\",\n    63: \"\",\n    64: \"\",\n    65: \"\",\n    71: \"\",\n    81: \"\",\n    82: \"\",\n    91: \"\"\n};\nmodule.exports = function(sId) {\n    var iSum = 0;\n    var sBirthday = \"\";\n    if (!/^\\d{17}(\\d|x)$/i.test(sId)) return {\n        success: false,\n        msg: \"\"\n    };\n    sId = sId.replace(/x$/i, \"a\");\n    if (aCity[parseInt(sId.substr(0, 2))] == null) return {\n        success: false,\n        msg: \"\"\n    };\n    sBirthday = sId.substr(6, 4) + \"-\" + Number(sId.substr(10, 2)) + \"-\" + Number(sId.substr(12, 2));\n    var d = new Date(sBirthday.replace(/-/g, \"/\"));\n    if (sBirthday != (d.getFullYear() + \"-\" + (d.getMonth() + 1) + \"-\" + d.getDate())) return {\n        success: false,\n        msg: \"\"\n    };\n    for (var i = 17; i >= 0; i--) iSum += (Math.pow(2, i) % 11) * parseInt(sId.charAt(17 - i), 11);\n    if (iSum % 11 != 1) return {\n        success: false,\n        msg: \"\"\n    };\n    // aCity[parseInt(sId.substr(0,2))]+\",\"+sBirthday+\",\"+(sId.substr(16,1)%2?\"\":\"\");\n    return {\n        success: true\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/masterApply/checkIdCard/index.js","var byteLen = require('utils/byteLen');\r\nvar moduleTrim = require('utils/trim');\r\nvar regExp = require('../regExp');\r\nvar fn_checkId = require('../checkIdCard'); \r\nvar errorMsg = require(\"module/i18n\").masterApply;\r\n\r\nmodule.exports = {\r\n\tcheckName:function (node){\r\n\t\tvar val = $(node).val();\r\n\t\tif( byteLen(val)<2 || byteLen(val)>20 ) return {\r\n\t\t\tsuccess:false,\r\n\t\t\tmsg:errorMsg.nameLength\r\n\t\t};\r\n\t\tif( !regExp.checkName.test(val) ) return {\r\n\t\t\tsuccess:false,\r\n\t\t\tmsg:errorMsg.nameType\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tsuccess:true\r\n\t\t}\r\n\t},\r\n\tcheckIdCard:function (node){\r\n\t\tvar val = $(node).val();\r\n\t\tif( moduleTrim(val) === \"\") return false;\r\n\t\treturn fn_checkId(val);\r\n\t},\r\n\tcheckSummary:function (node){\r\n\t\tvar val = $(node).val();\r\n\t\tif( val.length < 2||val.length > 100 ) return {\r\n\t\t\tsuccess:false,\r\n\t\t\tmsg:errorMsg.summary\r\n\t\t};\r\n\t\treturn {\r\n\t\t\tsuccess:true\r\n\t\t};\r\n\t},\r\n\tcheckupload:function (){\r\n\t\tvar upload = $('[data-node=uploader]');\r\n\t\tvar pass = 0;\r\n\t\tupload.each(function (){\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar webPick = $this.find('.webuploader-pick');\r\n\t\t\tif( webPick.find('img').attr('src') === undefined ){\r\n\t\t\t\t$this.parent().addClass('dr-form-error');\r\n\t\t\t\t$this.parent().find('.error-txt').html(errorMsg.noUpload);\r\n\t\t\t\tpass++;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn pass>0?false:true;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/masterApply/validate/index.js","module.exports = {\n\t\t// \n\t\tcheckName:/^[\\u4E00-\\u9FA5A-Za-z]+$/\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/masterApply/regExp/index.js","var fetch = require(\"io/fetch\");\nvar url = require('io/url');\nvar $form = $('[data-node=form]');\n// var $categoryLi = $form.find('[data-node=categoryLi]');\nvar $categoryForm = $form.find('[data-node=categoryForm]');\nvar $categoryActive = $form.find('[data-node=categoryActive]');\nvar $categoryTxt = $form.find('[data-node=categoryTxt]');\nvar $categoryList = $form.find('[data-node=categoryList]');\nvar $categoryTip = $form.find('[data-node=categoryTip]');\nvar $document = $(document);\n\nvar listData;\n\nvar getChooseData = function(callback) {\n    callback = callback || function() {};\n    var $categoryList = $form.find('[data-node=categoryList]');\n    $categoryList.children().remove();\n    fetch.get(url.get('getMasterTypeList')).done(function(data) {\n        listData = data.data.expertCategories;\n        $(listData).each(function() {\n            $categoryList.append('<a href=\"javascript:;\" data-id=\"' + this.id + '\">' + this.name + '</a>')\n        });\n        callback();\n    }).fail(function() {\n        alert(\" \");\n    });\n};\n\nvar init = function() {\n    $categoryActive.on('click', function() {\n        if (!listData) {\n            getChooseData();\n        }\n        $categoryActive.addClass('active');\n        $categoryList.css('display', 'block');\n    });\n    $categoryList.on('click', 'a', function(event) {\n        $categoryActive.removeClass('active');\n        $categoryList.css('display', 'none');\n        $categoryTxt.attr('data-id', $(event.target).attr('data-id')).html(event.target.innerHTML);\n        $categoryTip.html('');\n    });\n    //\n    $document.on('click', function(event) {\n        if (!$categoryForm.is(event.target) && $categoryForm.has(event.target).length === 0) {\n            $categoryList.css('display', 'none');\n            $categoryActive.removeClass('active');\n        }\n    });\n}\n\nmodule.exports = {\n    init: init,\n    getChooseData: getChooseData\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/masterApply/chooseCategory/index.js","var webUploader = require('plugin/webuploader/webuploader');\nvar errorMsg = require(\"module/i18n\").upload;\nvar $rt;\nvar init = function() {\n    // var uploaderNodeAttr = $('[data-node=uploader]');\n    var uploader = webUploader.create({\n        auto: true,\n        swf: $_CONFIG.imgpath + '/images/swf/Uploader.swf',\n        server: '/ajax/crop/crop_img',\n        fileVal: 'avatar_file',\n        threads: 1,\n        duplicate: true,\n        fileSingleSizeLimit: 4 * 1024 * 1024,\n        fileSizeLimit: 50 * 1024 * 1024,\n        pick: {\n            id: '[data-node=uploader]',\n            innerHTML: '<em data-node=\"icon\" class=\"iconn-50\"></em>'\n        },\n        accept: {\n            title: 'Images',\n            extensions: 'jpg,jpeg,png',\n            mimeTypes: 'image/*'\n        },\n        thumb: {\n            width: '100%',\n            height: '100%',\n            // type`image/jpeg`\n            quality: 70,\n            // false.\n            allowMagnify: false,\n            // \n            crop: false,\n            // \n            // \n            type: 'image/jpeg'\n        },\n        compress: {\n            // type`image/jpeg`\n            quality: 90,\n            // false.\n            allowMagnify: false,\n            // \n            crop: false,\n            // meta\n            preserveHeaders: true,\n            // \n            // \n            noCompressIfLarger: false,\n            // \n            compressSize: 0\n        }\n    });\n    uploader.onFileQueued = function(file) {\n        var html = '<li id=\"' + file.id + '\">' + '<div class=\"bar-upload-pic\"><span data-node=\"progress\"></span></div>' + '</li>';\n        $rt.prev().html(html);\n    };\n\n    var uploadError = function(msg) {\n        $rt.parents('[data-node=uli]').addClass('dr-form-error');\n        $rt.parent().eq(0).nextAll('[class=error-txt]').html(msg);\n    }\n\n    uploader.on('uploadSuccess', function(file, response) {\n        if (response.code === 200 && response.success) {\n            $rt.parents('[data-node=uli]').removeClass('dr-form-error');\n            $rt.prev().html('<img data-node=\"uploaderImg\" src=\"' + response.data[0] + '\" alt=\"\"><a href=\"javascript:;\" class=\"modify-mask\"><span class=\"mask-txt\" data-node=\"change\" data-ruid=\"' + file.source.ruid + '\"> </span></a>');\n            $rt.css({\n                'height': '20px',\n                'top': '60px'\n            });\n        } else {\n            $rt.prev().html('<em data-node=\"icon\" class=\"iconn-50\"></em>');\n            uploadError(errorMsg.uploadFaild);\n        }\n    });\n\n    uploader.on('beforeFileQueued', function(file) {\n        $rt = $('#rt_' + file.source.ruid);\n    });\n\n    uploader.on('error', function() {\n        uploadError(errorMsg.uploadError_Master);\n    });\n\n    uploader.on('uploadProgress', function(file, percentage) {\n        $('#' + file.id).find('[data-node=\"progress\"]').css('width', percentage * 100 + '%');\n    });\n    uploader.on('uploadError', function() {\n        $rt.prev().html('<em data-node=\"icon\" class=\"iconn-50\"></em>');\n        uploadError(errorMsg.uploadFaild);\n    });\n    callback();\n};\n\nvar check = function() {\n    var uli = $('[data-node=uli]');\n    return uli.hasClass('dr-form-error') ? false : true;\n};\n\nvar callback = function(fn) {\n    var fun = fn || function() {};\n    fun();\n};\n\nmodule.exports = {\n    init: init,\n    check: check,\n    callback: callback\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/masterApply/photoUpload/index.js","var byteLen = require('utils/byteLen');\r\n\r\nvar chooseCategory = require('../chooseCategory');\r\nvar upload = require('../photoUpload');\r\n\r\nvar $form = $('[data-node=form]');\r\nvar $categoryList = $form.find('[data-node=categoryList]');\r\nvar $categoryTxt = $form.find('[data-node=categoryTxt]');\r\n\r\nvar $liName = $form.find('[data-node=liName]');\r\nvar $inputName = $liName.find('[data-node=inputName]');\r\nvar $markerName = $liName.find('[data-node=markerName]');\r\n\r\nvar $liId = $form.find('[data-node=liId]');\r\nvar $inputId = $liId.find('[data-node=inputId]');\r\nvar $markerId = $liId.find('[data-node=markerId]');\r\n\r\nvar $liSummary = $form.find('[data-node=liSummary]');\r\nvar $inputSummary = $liSummary.find('[data-node=inputSummary]');\r\nvar $numSummary = $liSummary.find('[data-node=numSummary]');\r\n\r\nif ($_CONFIG.applyFlag === 1) {\r\n    var backfillData = $_CONFIG.expertInfo;\r\n    // backfillData = {\r\n    //        \"auditFailReason\": \"123\",\r\n    //        \"auditOperator\": \"admin\",\r\n    //        \"auditStatus\": 1,//dataauditStatus=1\r\n    //        \"auditTime\": 1469419814000,\r\n    //        \"category\": {\r\n    //            \"id\": 36,\r\n    //            \"name\": \"\"\r\n    //        },\r\n    //        \"createTime\": 1469080394000,\r\n    //        \"expertType\": \"normal\",\r\n    //        \"idCardNo\": \"131155188602486244\",\r\n    //        \"idcardBackImageUrl\": \"https://i-pre.meixincdn.com/v1/img/T1At_TBT_T1RXrhCrK.jpg\",\r\n    //        \"idcardFrontImageUrl\": \"https://i-pre.meixincdn.com/v1/img/T1YzxTBgLT1RXrhCrK.jpg\",\r\n    //        \"idcardPersonImageUrl\": \"https://i-pre.meixincdn.com/v1/img/T1ZzxTBTdT1RXrhCrK.jpg\",\r\n    //        \"introduction\": \"dawdwadwadawdw\",\r\n    //        \"isExpert\": true,\r\n    //        \"realName\": \"\",\r\n    //        \"userId\": 767\r\n    //    }\r\n    chooseCategory.getChooseData(function() {\r\n        var listOptions = $categoryList.children('a');\r\n        $(listOptions).each(function() {\r\n            if (backfillData.category.id == $(this).attr('data-id')) {\r\n                return $categoryTxt.attr('data-id', $(this).attr('data-id')).html($(this).html());\r\n            }\r\n        });\r\n    });\r\n    $inputName.val(backfillData.realName);\r\n    $markerName.removeClass('hide');\r\n    $inputId.val(backfillData.idCardNo);\r\n    $markerId.removeClass('hide');\r\n    $inputSummary.val(backfillData.introduction);\r\n    $numSummary.html(byteLen($inputSummary.val()));\r\n    var imgs = [backfillData.idcardFrontImageUrl, backfillData.idcardBackImageUrl, backfillData.idcardPersonImageUrl];\r\n    var time = 0;\r\n    upload.callback(function() {\r\n        var t = setInterval(function() {\r\n            time++;\r\n            var $pick = $form.find('.webuploader-pick');\r\n            if ($pick.length === 3) {\r\n                clearInterval(t);\r\n                var $uploader = $form.find('[data-node=uploader]');\r\n                $uploader.each(function(i) {\r\n                    var ruid = $(this.childNodes[1]).attr('id').substring(3);\r\n                    $(this.childNodes[0]).html('<img data-node=\"uploaderImg\" src=\"' + imgs[i] + '\" alt=\"\"><a href=\"javascript:;\" class=\"modify-mask\"><span class=\"mask-txt\" data-node=\"change\" data-ruid=\"' + ruid + '\"> </span></a>');\r\n                });\r\n            } else if (time === 50) {\r\n                clearInterval(t);\r\n            }\r\n        }, 100);\r\n    });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/masterApply/dataBackfill/index.js"],"sourceRoot":""}