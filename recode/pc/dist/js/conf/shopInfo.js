webpackJsonp([23],{"0":function(t,exports,n){(function($,t){"use strict";var e=n(214),a=n(103).shareto,i=n(215),o=n(21),s=n(24),c=n(89),r=n(216),d=n(218),l=n(220),u=n(221),p=n(40);p.setPageData("shopDetail");var f=$('[data-node="shopTop"]'),h=$("[data-node=detail-menu]"),m=f.find('[data-action="love"]'),g=m.find('[data-node="loveNum"]'),x=f.find('[data-action="collect"]'),b=x.find('[data-node="collectNum"]'),w=h.find("[data-node=searchBtn]"),k=h.find("[data-node=searchInput]"),y=$('[data-node="goodsBox"]'),I=y.find('[data-action="moreGoods"]'),q=~~g.text();l.init(),e('[data-node="shopTop"]','[data-action="love"]',{"onPraise":function(){q++,g.text(q)},"onUnPraise":function(){q--,g.text(q)},"onPraised":function(){m.addClass("active"),g.text(q)}}),i({"selector":'[data-action="collect"]',"parent":'[data-node="shopTop"]'},function(t){t?b.text(~~b.text()+1).prev().addClass("active"):b.text(~~b.text()-1).prev().removeClass("active")});var B=null,_=$('[data-node="shareBtnBox"]'),T={},C="",j="";$('[data-node="shopTop"]').on("mouseenter",'[data-action="shareto"]',function(){C=$(this).data("surl"),$.isEmptyObject(T)&&(T={"url":$(this).data("surl"),"title":$(this).data("stitle"),"pic":""===$(this).data("spic")?t.imgpath+"/images/public/logo.png":$(this).data("spic")},j=$(this).data("stitle")),_.css({"top":$(this).offset().top+30,"left":$(this).offset().left-~~$('[data-node="shareBtnBox"]').width()/2+~~$(this).width()/2}).show(),BP.send({"event_id":"B000P019","shop_id":t.shopId})}).on("mouseleave",'[data-action="shareto"]',function(){B=setTimeout(function(){_.hide()},100)}),_.on("mouseenter",function(){clearTimeout(B)}).on("mouseleave",function(){$(this).hide()});var P=function(n){BP.send({"event_id":"B000P016","shop_id":t.shopId,"channel_id":n||""})},z=f.find("img").attr("src"),R=function(t){return"https://i-pre.meixincdn.com/v1/img/T1gyVTBmLT1R4cSCrK.png"!=t&&"https://i6.meixincdn.com/v1/img/T1YFxTByJT1R4cSCrK.png"!=t&&"https://i-pre.meixincdn.com/v1/img/T1TaVTB7LT1R4cSCrK.png"!=t},S=function(t){var n=/\w+\.(jpg|gif|bmp|png)$/;return!!R(t)&&n.test(t)};_.on("click",'[data-shareto="weixin"]',function(){T.url=t.weixin_share,T.title=j,a.weixin(T),P("out-weixin")}).on("click",'[data-shareto="qq"]',function(){T.url=C,T.title=j,T.summary="我发现了前所未有的好店，不如，你也来逛逛？",T.pic=S(z)?z:t.imgpath+"/images/public/logo.jpg",a.qq(T),P("out-QQ")}).on("click",'[data-shareto="sina"]',function(){T.url=C,T.title=j+",这是我费尽千辛万苦找到的超级好店。",T.pic=S(z)?z:t.imgpath+"/images/public/logo.jpg",a.wb(T),v,P("out-xlwb")}).on("click",'[data-shareto="qzone"]',function(){T.url=C,T.title=j,T.summary="这是我费尽千辛万苦找到的超级好店。",T.pic=S(z)?z:t.imgpath+"/images/public/logo.jpg",a.qz(T),P("out-Qqzone")});var N=2,D=t.shopId;I.on("click",function(){var n=$(this).html(),e=this,a="",i={};"1"==t.isSearch?(a=t.mall_domain+s.get("searchGetMore"),i={"shop_id":~~t.shopId,"pageNum":N,"word":t.word}):(a=s.get("moreGoods"),i={"shopId":~~t.shopId,"tabId":~~t.type,"pageNum":N,"pagesize":20}),$(e).hasClass("disabled")||($(e).addClass("disabled").html('<span><img src="'+t.imgpath+'/images/public/loading.gif">正在加载...</span>'),o.get(a,{"data":i}).done(function(a){var i=a.data.itemList;a.data.count;0==i.length?$(e).html("<span>没有可加载内容</span>"):$(e).removeClass("disabled").html(n),"2"==t.type?r(i,D):d(i,D),N++}))});var G=function(){var n=k.val();""!=c(n)&&(location.href=t.meidian_domain+"shop/search?shopid="+t.shopId+"&shopword="+encodeURIComponent(n))};w.on("click",G),$(document).keydown(function(t){"13"==t.which&&G()}),u.init()}).call(exports,n(2),n(3))},"34":function(t,exports){!function(){function n(t,n){return(/string|function/.test(typeof n)?r:c)(t,n)}function e(t,n){return"string"!=typeof t&&(n=typeof t,"number"===n?t+="":t="function"===n?e(t.call(t)):""),t}function a(t){return p[t]}function i(t){return e(t).replace(/&(?![\w#]+;)|[<>"']/g,a)}function o(t,n){if(f(t))for(var e=0,a=t.length;a>e;e++)n.call(t,t[e],e,t);else for(e in t)n.call(t,t[e],e)}function s(t,n){var e=/(\/)[^\/]+\1\.\.\1/,a=("./"+t).replace(/[^\/]+$/,""),i=a+n;for(i=i.replace(/\/\.\//g,"/");i.match(e);)i=i.replace(e,"/");return i}function c(t,e){var a=n.get(t)||d({"filename":t,"name":"Render Error","message":"Template not found"});return e?a(e):a}function r(t,n){if("string"==typeof n){var e=n;n=function(){return new u(e)}}var a=l[t]=function(e){try{return new n(e,t)+""}catch(t){return d(t)()}};return a.prototype=n.prototype=h,a.toString=function(){return n+""},a}function d(t){var n="{Template Error}",e=t.stack||"";if(e)e=e.split("\n").slice(0,2).join("\n");else for(var a in t)e+="<"+a+">\n"+t[a]+"\n\n";return function(){return"object"==typeof console&&console.error(n+"\n\n"+e),n}}var l=n.cache={},u=this.String,p={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},f=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},h=n.utils={"$helpers":{},"$include":function(t,n,e){return t=s(e,t),c(t,n)},"$string":e,"$escape":i,"$each":o},m=n.helpers=h.$helpers;n.get=function(t){return l[t.replace(/^\.\//,"")]},n.helper=function(t,n){m[t]=n},t.exports=n}()},"36":function(t,exports,n){(function($){"use strict";var e=n(37),a=function(){},i=function(t,n){t=t||"",n=n||{};var i={"fixed":!0,"modal":!0,"autofocus":!1,"content":'<p class="del-pop-p">'+t+"</p>","className":"pop-box","okCls":"pc-btn pc-btnh35 circle-pop-btn","ok":a};$.extend(!0,i,n);var o=e(i),s=o._$("header"),c=o._$("title");return n.title||c.css("borderBottom","none"),s.show(),o.show(),o};t.exports=i}).call(exports,n(2))},"44":function(t,exports,n){(function($){"use strict";var n,e,a,i=function(){n.off().on("click",function(){n.hide(),e.hide()}),e.off().on("click",function(){n.hide(),e.hide()})},o=function(t,o){var s={"duration":2e3,"callback":function(){}};$.extend(s,o||{}),clearTimeout(a),n=$('[data-action="publicMask"]'),e=$('[data-action="publicTips"]'),n.length>0?(n.show(),e.show().text(t)):($("body").append('<div data-action="publicMask" class="ordi-toast"></div><div class="ordi-toast-txt" data-action="publicTips">'+t+"</div>"),n=$('[data-action="publicMask"]'),e=$('[data-action="publicTips"]'),i()),e.css("margin",-e[0].offsetHeight/2+"px 0 0 "+-e.width()/2+"px"),a=setTimeout(function(){n.hide(),e.hide(),s.callback()},s.duration)};t.exports={"init":o,"events":i}}).call(exports,n(2))},"89":function(t,exports){"use strict";var n=function(t){return t.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")};t.exports=n},"103":function(t,exports,n){(function($){"use strict";var e=n(21),a=n(24),i=n(104),o=n(23),s={"qq":"http://connect.qq.com/widget/shareqq/index.html","wb":"http://v.t.sina.com.cn/share/share.php","qz":"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey"},c={"url":"https://group.gomeplus.com/","title":"国美APP边玩边分享，购物不孤单","pic":"../../images/public/logo.png","summary":"国美APP边玩边分享，购物不孤单"},r=function(t){window.open(t)},d=!1,l=function(){var t='<p data-node="shareBtnBox" class="share-down" style="z-index:21;"><span class="share-box"><span class="icon icon-up-arrow"></span><span class="icon-box"><em data-shareto="weixin" class="iconn-30"></em><em data-shareto="qq" class="iconn-32"></em><em data-shareto="sina" class="iconn-31"></em><em data-shareto="qzone" class="iconn-33"></em></span></span></p>';$("body").append(t),d=!0},u=function(t){!d&&l(),$("[data-node=shareBtnBox]").css({"left":t.x,"top":t.y}).show()},p=!1,f=function(){var t='<div class="share-weixin"><div class="wx-mask"></div><div class="wx-main"><div class="wx-code"><span></span><img data-node="shareWeixinCode" alt="分享到微信" /></div><p>打开微信扫一扫，即可分享</p><a href="javascript:;" title="点击关闭" class="wx-close">×</a></div></div>';$("body").append(t),p=!0},h=function(t,n){var e=[],a={"title":t.title,"url":t.url,"summary":t.summary,"site":t.site};for(var i in a)e.push(i+"="+encodeURIComponent(a[i]||""));return n?e.push("pics="+t.pic):e.push("pic="+t.pic),e.join("&")},m={"weixin":function(t){var n=i(t.url);!p&&f(),$("[data-node=shareWeixinCode]")[0].src=n,$(".share-weixin").show(),$(".wx-close").on("click",function(){$(".share-weixin").hide()})},"qq":function(t){var n=s.qq+"?"+h(t,!0);r(n)},"wb":function(t){var n=s.wb+"?"+h(t);r(n)},"qz":function(t){var n=s.qz+"?"+h(t,!0);r(n)}},v=function(t){var n="0"!==t.isRebate;e.get(a.get("shareGetGoodsKid"),{"validate":n,"data":{"skuId":t.skuId,"itemId":t.itemId,"parentKid":t.parentKid},"async":!1}).done(function(n){if(n.success===!0){var e=n.data.kid,a=t.shareInfo,i=a.url,o=i.indexOf("?");o>0&&(i=i.substring(0,o)),a.url=i+"?onlineUserId="+a.onlineUserId+"&kId="+e,m[t.shareto](a)}else m[t.shareto](t.shareInfo)}).fail(function(){n?o()&&m[t.shareto](t.shareInfo):m[t.shareto](t.shareInfo)})},g=function(t){var n={"title":t.title||c.title,"url":t.url||c.url,"pic":t.pic||c.pic,"summary":t.summary||"","desc":t.desc||""};!!m[t.type]&&m[t.type](n)},x=function(t,n,e){var a=null,i=null;i="string"==typeof t?$(t):t,n=n||"[data-action=shareto]",i.on("mouseenter",n,function(){var t=$(this).data("surl"),n=$(this).data("stitle"),e=$(this).data("spic");a={"url":t,"title":n,"pic":e};var i=$(this).width(),o=$(this).height(),s=$(this).offset().left/1+i/2-80+"px",c=$(this).offset().top/1+(o-1)+"px";return u({"x":s,"y":c}),!1}),i.on("mouseleave",n,function(){return $("[data-node=shareBtnBox]").hide(),!1}),$("body").on("click","[data-shareto]",function(t){t.preventDefault();var n=$(this).data("shareto");a.type=n,e=e||function(){},e.call(null,a),g(a)}),$("body").on("mouseenter","[data-node=shareBtnBox]",function(){$(this).show()}),$("body").on("mouseleave","[data-node=shareBtnBox]",function(){$(this).hide()})};t.exports={"share":g,"shareto":m,"shareItem":x,"shareWithKid":v}}).call(exports,n(2))},"104":function(t,exports,n){(function(n){"use strict";var e=function(t){return n.group_domain+"ajax/qrcode/urlcode?url="+encodeURIComponent(t)};t.exports=e}).call(exports,n(3))},"214":function(t,exports,n){(function($,e){"use strict";var a=n(21),i=n(24),o=n(36),s=n(45),c=n(100),r=n(23),d=n(22),l=(r(),0),u=function(){},p=function(t,n,e){t.data("praise",n),t.data("count",e)},f={"normal":{"add":function(t,n,e){t.addClass("active"),e||(e="取消点赞"),t.find("span").text(e)},"reduce":function(t,n,e){t.removeClass("active"),e||(e="点赞"),t.find("span").text(e)}}},h=function(t){return f[t]},m=function(t,n,f){var m=$(t),v=f.onPraise||u,g=f.onUnPraise||u,x=f.onPraised||u,b=f.mode||"normal";m.on("click",n,function(){function t(){var t=k;a.post(i.get("praise"),t).done(function(t){var a=h(b);if(s(c.comment.enableEditor).pub({"pid":"enable"}),t&&200===t.code&&t.success)1===f?(p(n,0,++w),a.add(n,t,w),v.call(n,t,w)):0===f&&(p(n,1,--w),a.reduce(n,t,w),g.call(n,t,w));else if(t&&422===t.code);else if(t&&403===t.code)o("抱歉！该话题审核未通过",{"ok":function(){window.location.href=e.group_domain+"index/error?code=topic"}});else if(409===t.code)x.call(n,t,w),l||o(t.message);else{var i=t.message;0===u&&404===t.code?o(i,{"ok":function(){window.location.reload()}}):o(i)}l&&window.location.reload()}).fail(function(){}).always(function(){})}var n=$(this),u=n.data("type"),f=n.data("praise"),m=n.data("id"),w=n.data("count"),k={"data":{"groupId":e.groupid,"id":m,"type":u,"isPraise":f}};return r()?(l=0,t()):(l=1,d(t)),!1})};t.exports=m}).call(exports,n(2),n(3))},"215":function(t,exports,n){(function($,e){"use strict";var a,i=n(21),o=n(24),s=n(44),c=n(23),r=n(22),d=!1,l=function(t,n){var l=$(t.parent?t.parent:t.selector),u=t.parent?t.selector:void 0;l.on("click",u,function(){function t(t){i.post(a,f).done(function(n){200===n.code?(u?$(l).addClass("active").attr("data-collect","collect"):$(l).removeClass("active").attr("data-collect",""),t||p.call(l,u)):s.init(n.message)}).fail(function(){c()&&s.init("店铺收藏失败")}).always(function(){d=!1,t&&window.location.reload()})}var l=this,u=!0,p=n||function(){},f={"data":{"shopId":e.shopId}};return d||(d=!0,""===$(l).attr("data-collect")?(a=o.get("shopCollect"),u=!0):(a=o.get("unShopCollect"),u=!1)),c()?t():r(function(){t(1)}),!1})};t.exports=l}).call(exports,n(2),n(3))},"216":function(t,exports,n){(function($,e){"use strict";var a=n(217),i=function(t,n){var i=$('[data-node="goodsBox"]'),o=i.find(".more-comments"),s=i.find('[data-action="moreGoods"]'),c="",r=e.product_item_gome;for(var d in t){var l=i.find("[data-node="+d+"]"),u=i.find("[data-tip=dateTitle]");if(0==l.length){if(u.length>=7)return void s.html("<span>没有可加载内容</span>");o.before('<h2 class="title">'+t[d].title+'</h2><ul class="clearfix" data-node="'+d+'" data-tip="dateTitle"></ul>'),l=i.find("[data-node="+d+"]")}c=a({"data":t[d].data,"shopId":n,"hostName":r}),l.append(c)}};t.exports=i}).call(exports,n(2),n(3))},"217":function(t,exports,n){var e=n(34);t.exports=e("src/js/page/shopInfo/newGoods/goods",function(t,n){"use strict";var e=this,a=(e.$helpers,e.$each),i=t.data,o=(t.group,t.$index,e.$escape),s=t.hostName,c=t.shopId,r="";return a(i,function(t,n){r+=' <li> <a target="_blank" href="',r+=o(s),r+=o(t.id),r+="-",r+=o(t.skuId),r+=".html?mid=",r+=o(c),r+='"> ',t.isRebate&&t.isDiscount?r+=' <em class="icon-fan">返</em> ':(r+=" ",t.isRebate&&(r+=' <em class="icon-fan">返</em> '),r+=" <!-- ",t.isDiscount&&(r+=' <em class="icon-fan icon-jiang">降</em> '),r+=" --> "),r+=' <div class="mg-negative"> <a href="',r+=o(s),r+=o(t.id),r+="-",r+=o(t.skuId),r+=".html?mid=",r+=o(c),r+='" target="_blank" title="',r+=o(t.title),r+='"> <img src=',r+=o(t.img),r+=' alt="',r+=o(t.title),r+='" onerror="imgError(this)"> </a> <div class="btn-box"> <a href="',r+=o(s),r+=o(t.id),r+="-",r+=o(t.skuId),r+=".html?mid=",r+=o(c),r+='" target="_blank" class="pc-btn pc-btnh40">立即购买</a> <a href="',r+=o(s),r+=o(t.id),r+="-",r+=o(t.skuId),r+=".html?mid=",r+=o(c),r+='" target="_blank" class="pc-btn pc-btnh40 pc-bj-fc8753">加入购物车</a> </div> <div class="text">￥<span>',r+=o(t.price),r+='</span> <p title="',r+=o(t.title),r+='"> <a target="_blank" href="',r+=o(s),r+=o(t.id),r+="-",r+=o(t.skuId),r+=".html?mid=",r+=o(c),r+='">',r+=o(t.title),r+="</a> </p> </div> </div> </li> "}),r+=" ",new String(r)})},"218":function(t,exports,n){(function($,e){"use strict";var a=n(219),i=function(t,n){var i=$('[data-node="goodsBox"]'),o=i.find("ul"),s="",c=e.product_item_gome;s=a({"data":t,"shopId":n,"hostName":c}),o.append(s)};t.exports=i}).call(exports,n(2),n(3))},"219":function(t,exports,n){var e=n(34);t.exports=e("src/js/widget/shopInfo/shopInfo",function(t,n){"use strict";var e=this,a=(e.$helpers,e.$each),i=t.data,o=(t.$value,t.$index,e.$escape),s=t.hostName,c=t.shopId,r="";return r+=" ",a(i,function(t,n){r+=" <li> ",i[n].isRebate&&i[n].isDiscount?r+=' <em class="icon-fan">返</em> ':(r+=" ",i[n].isRebate&&(r+=' <em class="icon-fan">返</em> '),r+=" <!-- ",i[n].isDiscount&&(r+=' <em class="icon-fan icon-jiang">降</em> '),r+=" --> "),r+=' <div class="mg-negative"> <a href="',r+=o(s),r+=o(i[n].id),r+="-",r+=o(i[n].skuId),r+=".html?mid=",r+=o(c),r+='" target="_blank" title="',r+=o(i[n].title),r+='"> <img src=',r+=o(i[n].img),r+=' alt="',r+=o(i[n].title),r+='" onerror="imgError(this)"> </a> <div class="btn-box"> <a href="',r+=o(s),r+=o(i[n].id),r+="-",r+=o(i[n].skuId),r+=".html?mid=",r+=o(c),r+='" target="_blank" class="pc-btn pc-btnh40">立即购买</a> <a href="',r+=o(s),r+=o(i[n].id),r+="-",r+=o(i[n].skuId),r+=".html?mid=",r+=o(c),r+='" target="_blank" class="pc-btn pc-btnh40 pc-bj-fc8753">加入购物车</a> </div> <div class="text">￥<span>',r+=o(i[n].price),r+='</span> <p title="',r+=o(i[n].title),r+='"> <a target="_blank" href="',r+=o(s),r+=o(i[n].id),r+="-",r+=o(i[n].skuId),r+=".html?mid=",r+=o(c),r+='">',r+=o(i[n].title),r+="</a> </p> </div> </div> </li> "}),r+=" ",new String(r)})},"220":function(t,exports,n){(function($){"use strict";var e=n(23),a=n(22),i=function(){$('[data-action="shortcutBanner"]').on("click","a",function(t){var n=$(this);e()||(t.preventDefault(),a(function(){window.location.href=n.attr("href")}))})};t.exports={"init":i}}).call(exports,n(2))},"221":function(t,exports,n){(function($){"use strict";var n=$("[data-node=fixMenu]"),e=$("[data-node=detail-menu]"),a=$("[data-node=detail-menu] a"),i=$("[data-node=searchBox]"),o="fixed-menu",s="active",c=e.offset().top,r=$(window).scrollTop(),d=function(){r>=c?(n.addClass(o),i.hide()):(n.removeClass(o),i.show())},l=function(t){var n=$(t),e=a.index(n);a.removeClass(s).eq(e).addClass(s)},u=function(){d(),$(window).on("scroll",function(){r=$(window).scrollTop(),d()}),e.on("click","a",function(){l(this)})};t.exports={"init":u}}).call(exports,n(2))}});
//# sourceMappingURL=shopInfo.js.map