{"version":3,"sources":["webpack:///redpacket.js","webpack:///./src/js/page/redpacket/index.js","webpack:///./~/_tmodjs-loader@1.0.1@tmodjs-loader/runtime.js?5041**********","webpack:///./src/js/page/redpacket/prizesList.tpl"],"names":["webpackJsonp","0","module","exports","__webpack_require__","$","fetch","url","prizesList","$total","$prizesList","getTotal","get","done","data","success","text","total_amount","timer","fail","getPrizesList","html","prizes","listScroll","fn","clearTimeout","setTimeout","listTimer","listHTML","listHeight","height","listWrapHeight","offset","top","speed","scroll","css","init","call","34","a","b","test","h","g","c","l","d","replace","e","m","length","f","match","i","filename","name","message","k","j","prototype","n","toString","stack","split","slice","join","console","error","cache","this","String","<",">","\"","'","&","Array","isArray","utils","$helpers","$include","$string","$escape","$each","o","helpers","helper","208","template","$data","$filename","$utils","value","$index","$out"],"mappings":"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","file":"redpacket.js","sourcesContent":["webpackJsonp([17],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {'use strict';\n\t\n\t/**\n\t * 抢红包活动\n\t * @author QiaoLi\n\t */\n\t\n\tvar fetch = __webpack_require__(21);\n\tvar url = __webpack_require__(24);\n\tvar prizesList = __webpack_require__(208);\n\t\n\tvar $total = $('[data-node=total]');\n\tvar $prizesList = $('[data-node=prizesList]');\n\t\n\t//获取中奖总金额\n\tvar getTotal = function getTotal() {\n\t    fetch.get(url.get('getTotalAmount')).done(function (data) {\n\t        if (data.success === true) {\n\t            $total.text(data.data.total_amount);\n\t            timer(getTotal);\n\t        } else {\n\t            timer(getTotal);\n\t        }\n\t    }).fail(function () {\n\t        timer(getTotal);\n\t    });\n\t};\n\t\n\t//获取单次中奖金额大于20元的记录\n\tvar getPrizesList = function getPrizesList() {\n\t    fetch.get(url.get('getPrizesList')).done(function (data) {\n\t        if (data.success === true) {\n\t            $prizesList.html(prizesList({\n\t                prizes: data.data\n\t            }));\n\t            listScroll();\n\t            timer(getPrizesList);\n\t        } else {\n\t            timer(getPrizesList);\n\t        }\n\t    }).fail(function () {\n\t        timer(getPrizesList);\n\t    });\n\t};\n\t\n\tvar timer = function timer(fn) {\n\t    fn.timer = null;\n\t    clearTimeout(fn.timer);\n\t    fn.timer = setTimeout(fn, 180000);\n\t};\n\t\n\tvar listTimer = null;\n\tvar listScroll = function listScroll() {\n\t    var listHTML = $prizesList.html();\n\t    var listHeight = $prizesList.height();\n\t    var listWrapHeight = 141;\n\t    var offset = 1;\n\t    var top = 0;\n\t    var speed = 30;\n\t\n\t    if (listHeight > listWrapHeight) {\n\t        listHTML += listHTML;\n\t        $prizesList.html(listHTML);\n\t\n\t        var scroll = function scroll() {\n\t            top = top - offset;\n\t            if (top <= -listHeight) {\n\t                top = 0;\n\t            }\n\t            $prizesList.css('top', top);\n\t            clearTimeout(listTimer);\n\t            listTimer = setTimeout(scroll, speed);\n\t        };\n\t        scroll();\n\t    }\n\t};\n\t\n\tvar init = function init() {\n\t    timer(getTotal);\n\t    timer(getPrizesList);\n\t    listScroll();\n\t};\n\tinit();\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 34:\n/***/ (function(module, exports) {\n\n\t/*TMODJS:{}*/\r\n\t!function () {\r\n\t\tfunction a(a, b) {\r\n\t\t\treturn (/string|function/.test(typeof b) ? h : g)(a, b)\r\n\t\t}\r\n\t\r\n\t\tfunction b(a, c) {\r\n\t\t\treturn \"string\" != typeof a && (c = typeof a, \"number\" === c ? a += \"\" : a = \"function\" === c ? b(a.call(a)) : \"\"), a\r\n\t\t}\r\n\t\r\n\t\tfunction c(a) {\r\n\t\t\treturn l[a]\r\n\t\t}\r\n\t\r\n\t\tfunction d(a) {\r\n\t\t\treturn b(a).replace(/&(?![\\w#]+;)|[<>\"']/g, c)\r\n\t\t}\r\n\t\r\n\t\tfunction e(a, b) {\r\n\t\t\tif (m(a))for (var c = 0, d = a.length; d > c; c++)b.call(a, a[c], c, a); else for (c in a)b.call(a, a[c], c)\r\n\t\t}\r\n\t\r\n\t\tfunction f(a, b) {\r\n\t\t\tvar c = /(\\/)[^\\/]+\\1\\.\\.\\1/, d = (\"./\" + a).replace(/[^\\/]+$/, \"\"), e = d + b;\r\n\t\t\tfor (e = e.replace(/\\/\\.\\//g, \"/\"); e.match(c);)e = e.replace(c, \"/\");\r\n\t\t\treturn e\r\n\t\t}\r\n\t\r\n\t\tfunction g(b, c) {\r\n\t\t\tvar d = a.get(b) || i({filename: b, name: \"Render Error\", message: \"Template not found\"});\r\n\t\t\treturn c ? d(c) : d\r\n\t\t}\r\n\t\r\n\t\tfunction h(a, b) {\r\n\t\t\tif (\"string\" == typeof b) {\r\n\t\t\t\tvar c = b;\r\n\t\t\t\tb = function () {\r\n\t\t\t\t\treturn new k(c)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar d = j[a] = function (c) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn new b(c, a) + \"\"\r\n\t\t\t\t} catch (d) {\r\n\t\t\t\t\treturn i(d)()\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn d.prototype = b.prototype = n, d.toString = function () {\r\n\t\t\t\treturn b + \"\"\r\n\t\t\t}, d\r\n\t\t}\r\n\t\r\n\t\tfunction i(a) {\r\n\t\t\tvar b = \"{Template Error}\", c = a.stack || \"\";\r\n\t\t\tif (c)c = c.split(\"\\n\").slice(0, 2).join(\"\\n\"); else for (var d in a)c += \"<\" + d + \">\\n\" + a[d] + \"\\n\\n\";\r\n\t\t\treturn function () {\r\n\t\t\t\treturn \"object\" == typeof console && console.error(b + \"\\n\\n\" + c), b\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tvar j = a.cache = {}, k = this.String, l = {\r\n\t\t\t\"<\": \"&#60;\",\r\n\t\t\t\">\": \"&#62;\",\r\n\t\t\t'\"': \"&#34;\",\r\n\t\t\t\"'\": \"&#39;\",\r\n\t\t\t\"&\": \"&#38;\"\r\n\t\t}, m = Array.isArray || function (a) {\r\n\t\t\t\treturn \"[object Array]\" === {}.toString.call(a)\r\n\t\t\t}, n = a.utils = {\r\n\t\t\t$helpers: {}, $include: function (a, b, c) {\r\n\t\t\t\treturn a = f(c, a), g(a, b)\r\n\t\t\t}, $string: b, $escape: d, $each: e\r\n\t\t}, o = a.helpers = n.$helpers;\r\n\t\ta.get = function (a) {\r\n\t\t\treturn j[a.replace(/^\\.\\//, \"\")]\r\n\t\t}, a.helper = function (a, b) {\r\n\t\t\to[a] = b\r\n\t\t}, module.exports = a\r\n\t}();\n\n/***/ }),\n\n/***/ 208:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar template=__webpack_require__(34);\n\tmodule.exports=template('src/js/page/redpacket/prizesList',function($data,$filename\n\t/*``*/) {\n\t'use strict';var $utils=this,$helpers=$utils.$helpers,$each=$utils.$each,prizes=$data.prizes,value=$data.value,$index=$data.$index,$escape=$utils.$escape,$out='';$each(prizes,function(value,$index){\n\t$out+=' <li>';\n\t$out+=$escape(value.message);\n\t$out+='</li> ';\n\t});\n\treturn new String($out);\n\t});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// redpacket.js","/**\n * 抢红包活动\n * @author QiaoLi\n */\n\nvar fetch = require('io/fetch');\nvar url = require('io/url');\nvar prizesList = require('./prizesList.tpl');\n\nvar $total = $('[data-node=total]');\nvar $prizesList = $('[data-node=prizesList]');\n\n//获取中奖总金额\nvar getTotal = function() {\n    fetch.get(url.get('getTotalAmount')).done(function(data) {\n        if (data.success === true) {\n            $total.text(data.data.total_amount);\n            timer(getTotal);\n        } else {\n            timer(getTotal);\n        }\n    }).fail(function() {\n        timer(getTotal);\n    });\n};\n\n//获取单次中奖金额大于20元的记录\nvar getPrizesList = function() {\n    fetch.get(url.get('getPrizesList')).done(function(data) {\n        if (data.success === true) {\n            $prizesList.html(prizesList({\n                prizes: data.data\n            }));\n            listScroll();\n            timer(getPrizesList);\n        } else {\n            timer(getPrizesList);\n        }\n    }).fail(function() {\n        timer(getPrizesList);\n    });\n};\n\nvar timer = function(fn) {\n    fn.timer = null;\n    clearTimeout(fn.timer);\n    fn.timer = setTimeout(fn, 180000);\n};\n\nvar listTimer = null;\nvar listScroll = function() {\n    var listHTML = $prizesList.html();\n    var listHeight = $prizesList.height();\n    var listWrapHeight = 141;\n    var offset = 1;\n    var top = 0;\n    var speed = 30;\n\n    if (listHeight > listWrapHeight) {\n        listHTML += listHTML;\n        $prizesList.html(listHTML);\n\n        var scroll = function() {\n            top = top - offset;\n            if (top <= -listHeight) {\n                top = 0;\n            }\n            $prizesList.css('top', top);\n            clearTimeout(listTimer);\n            listTimer = setTimeout(scroll, speed);\n        }\n        scroll();\n    }\n};\n\nvar init = function() {\n    timer(getTotal);\n    timer(getPrizesList);\n    listScroll();\n\n};\ninit();\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/redpacket/index.js","/*TMODJS:{}*/\r\n!function () {\r\n\tfunction a(a, b) {\r\n\t\treturn (/string|function/.test(typeof b) ? h : g)(a, b)\r\n\t}\r\n\r\n\tfunction b(a, c) {\r\n\t\treturn \"string\" != typeof a && (c = typeof a, \"number\" === c ? a += \"\" : a = \"function\" === c ? b(a.call(a)) : \"\"), a\r\n\t}\r\n\r\n\tfunction c(a) {\r\n\t\treturn l[a]\r\n\t}\r\n\r\n\tfunction d(a) {\r\n\t\treturn b(a).replace(/&(?![\\w#]+;)|[<>\"']/g, c)\r\n\t}\r\n\r\n\tfunction e(a, b) {\r\n\t\tif (m(a))for (var c = 0, d = a.length; d > c; c++)b.call(a, a[c], c, a); else for (c in a)b.call(a, a[c], c)\r\n\t}\r\n\r\n\tfunction f(a, b) {\r\n\t\tvar c = /(\\/)[^\\/]+\\1\\.\\.\\1/, d = (\"./\" + a).replace(/[^\\/]+$/, \"\"), e = d + b;\r\n\t\tfor (e = e.replace(/\\/\\.\\//g, \"/\"); e.match(c);)e = e.replace(c, \"/\");\r\n\t\treturn e\r\n\t}\r\n\r\n\tfunction g(b, c) {\r\n\t\tvar d = a.get(b) || i({filename: b, name: \"Render Error\", message: \"Template not found\"});\r\n\t\treturn c ? d(c) : d\r\n\t}\r\n\r\n\tfunction h(a, b) {\r\n\t\tif (\"string\" == typeof b) {\r\n\t\t\tvar c = b;\r\n\t\t\tb = function () {\r\n\t\t\t\treturn new k(c)\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar d = j[a] = function (c) {\r\n\t\t\ttry {\r\n\t\t\t\treturn new b(c, a) + \"\"\r\n\t\t\t} catch (d) {\r\n\t\t\t\treturn i(d)()\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn d.prototype = b.prototype = n, d.toString = function () {\r\n\t\t\treturn b + \"\"\r\n\t\t}, d\r\n\t}\r\n\r\n\tfunction i(a) {\r\n\t\tvar b = \"{Template Error}\", c = a.stack || \"\";\r\n\t\tif (c)c = c.split(\"\\n\").slice(0, 2).join(\"\\n\"); else for (var d in a)c += \"<\" + d + \">\\n\" + a[d] + \"\\n\\n\";\r\n\t\treturn function () {\r\n\t\t\treturn \"object\" == typeof console && console.error(b + \"\\n\\n\" + c), b\r\n\t\t}\r\n\t}\r\n\r\n\tvar j = a.cache = {}, k = this.String, l = {\r\n\t\t\"<\": \"&#60;\",\r\n\t\t\">\": \"&#62;\",\r\n\t\t'\"': \"&#34;\",\r\n\t\t\"'\": \"&#39;\",\r\n\t\t\"&\": \"&#38;\"\r\n\t}, m = Array.isArray || function (a) {\r\n\t\t\treturn \"[object Array]\" === {}.toString.call(a)\r\n\t\t}, n = a.utils = {\r\n\t\t$helpers: {}, $include: function (a, b, c) {\r\n\t\t\treturn a = f(c, a), g(a, b)\r\n\t\t}, $string: b, $escape: d, $each: e\r\n\t}, o = a.helpers = n.$helpers;\r\n\ta.get = function (a) {\r\n\t\treturn j[a.replace(/^\\.\\//, \"\")]\r\n\t}, a.helper = function (a, b) {\r\n\t\to[a] = b\r\n\t}, module.exports = a\r\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_tmodjs-loader@1.0.1@tmodjs-loader/runtime.js\n// module id = 34\n// module chunks = 0 2 3 4 5 6 8 10 14 16 17 21 22 23 27 28 30 31 33 35 36 39 44 45 46","var template=require('tmodjs-loader/runtime');\nmodule.exports=template('src/js/page/redpacket/prizesList',function($data,$filename\n/*``*/) {\n'use strict';var $utils=this,$helpers=$utils.$helpers,$each=$utils.$each,prizes=$data.prizes,value=$data.value,$index=$data.$index,$escape=$utils.$escape,$out='';$each(prizes,function(value,$index){\n$out+=' <li>';\n$out+=$escape(value.message);\n$out+='</li> ';\n});\nreturn new String($out);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/page/redpacket/prizesList.tpl\n// module id = 208\n// module chunks = 17"],"sourceRoot":""}