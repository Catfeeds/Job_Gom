{"version":3,"sources":["webpack:///uploader.js","webpack:///./src/js/page/uploader/index.js","webpack:///./~/_tmodjs-loader@1.0.1@tmodjs-loader/runtime.js?5041***********************","webpack:///./src/js/page/uploader/flexible.js","webpack:///./src/js/page/uploader/flexible_css.js","webpack:///./src/js/page/uploader/cubeList.js","webpack:///./src/js/page/uploader/upload.js","webpack:///./src/js/page/uploader/upbutton.tpl","webpack:///./src/js/page/uploader/list.tpl","webpack:///./src/js/page/uploader/toast.tpl","webpack:///./src/js/page/uploader/alert.tpl","webpack:///./src/js/page/uploader/status.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","$","window","TimeStatus","StatusOnoff","upNumber","parseInt","maxNum","limitNumber","flexible","cubeList","upload","status","$listCube","init","page","initNum","getPCStatus","setInterval","call","34","a","b","test","h","g","c","l","d","replace","e","m","length","f","match","get","i","filename","name","message","k","j","prototype","n","toString","stack","split","slice","join","console","error","cache","this","String","<",">","\"","'","&","Array","isArray","utils","$helpers","$include","$string","$escape","$each","o","helpers","helper","338","win","lib","refreshRem","width","docEl","getBoundingClientRect","rem","style","fontSize","tid","doc","document","documentElement","metaEl","querySelector","flexibleEl","dpr","scale","warn","getAttribute","parseFloat","content","initialDpr","maximumDpr","toFixed","isIPhone","navigator","appVersion","devicePixelRatio","setAttribute","createElement","firstElementChild","appendChild","wrap","write","innerHTML","addEventListener","clearTimeout","setTimeout","persisted","readyState","body","rem2px","val","px2rem","height","scrollHeight","clientHeight","339","getElementsByTagName","styleSheet","disabled","cssText","innerText","340","scrollWidth","clientWidth","addList","$touchInput","$touchBtn","341","fetch","urls","tplBtn","tplList","tplToast","tplAlert","maxSize","list","addNewList","totalUpNumber","toastOnoff","alertOnoff","elements","$upIcon","$mainTopic","$mainList","$mainTouchBtn","$mainPrompt","$mainPhotoNumber","$boxMain","$wrapDown","html","touchBtn","_this","on","change","hide","append","touchBtnMore","captureComplete","toastMask","off","$mainBtn","dataArray","_this2","attr","$mainToast","data","css","transition","opacity","removeAttr","addToList","imageBase64Array","listNumber","showList","$mainWrap","before","BooleanClicked","display","showFail","simulateAlert","string","$alert","show","element","files","unique","log","every","file","index","array","type","pop","reader","FileReader","readAsDataURL","onabort","onerror","onload","ev","result","compressImage","createObjectURL","blob","webkitURL","imgSrc","imgType","image","Image","canvas","context","getContext","src","drawImage","imageBase64","toDataURL","pushImageData","push","Max_H","Jud_H","uploadQueueFetchEmitter","uploadFetch","post","cachekey","pageId","groupkey","qrcodeId","num","done","success","$cubeMask","fail","uploadQueueFetch","options","url","getQueryString","Promise","resolve","reject","callback","reduce","promise","item","then","onprogress","event","sort","re","reg","RegExp","r","location","search","substr","unescape","342","template","343","$data","$filename","$utils","$out","344","v","$index","345","346","res","qrcode","qrcodetime","clearInterval","code"],"mappings":"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","file":"uploader.js","sourcesContent":["webpackJsonp([46],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {'use strict';\n\t\n\t/*\n\t//判断设备分辨率\n\tfunction DprLayout (){\n\t\tvar dpr, rem, scale;\n\t\tvar docEl = document.documentElement;\n\t\tdpr = window.devicePixelRatio || 1;\n\t\trem = docEl.clientWidth * dpr / 10;\n\t\tscale = 1 / dpr;\n\t\tdocEl.setAttribute('data-dpr', dpr);\n\t\twindow.rem2px = function(v) {\n\t\t    v = parseFloat(v);\n\t\t    return v * rem;\n\t\t};\n\t\twindow.px2rem = function(v) {\n\t\t    v = parseFloat(v);\n\t\t    return v / rem;\n\t\t};\n\t\twindow.dpr = dpr;\n\t\twindow.rem = rem;\n\t}\n\t*/\n\t\n\t/*\n\tvar bordT = $('img').outerWidth() - $('img').innerWidth();\n\tvar paddT = $('img').innerWidth() - $('img').width();\n\tvar margT = $('img').outerWidth(true) - $('img').outerWidth();\n\t*/\n\twindow.TimeStatus = 0;\n\twindow.StatusOnoff = false;\n\twindow.upNumber = parseInt(maxNum);\n\twindow.limitNumber = parseInt(maxNum) - window.upNumber;\n\t\n\tvar flexible = __webpack_require__(338);\n\tvar flexibleCss = __webpack_require__(339);\n\tvar cubeList = __webpack_require__(340);\n\tvar upload = __webpack_require__(341);\n\tvar status = __webpack_require__(346);\n\t\n\tvar $boxTopic = $('.box-topic');\n\tvar $boxMain = $('.box-main');\n\tvar $listCube = $('.main-list-cube') || null;\n\tvar $touchInput = $('.touch-input-icon') || null;\n\tvar $touchBtn = $('.touch-btn-icon') || null;\n\t\n\tflexible.init(window, window['lib'] || (window['lib'] = {}));\n\tflexible.page();\n\t// $boxMain.height((document.body.scrollHeight||document.body.clientHeight) - $boxTopic.height() - ($boxMain.innerHeight() - $boxMain.height()));\n\t\n\t// cubeList.addList($touchInput, $touchBtn);\n\tif ($listCube) cubeList.init($listCube);\n\t\n\tupload.init.initNum();\n\t\n\tstatus.init.getPCStatus();\n\twindow.TimeStatus = setInterval(function () {\n\t\tstatus.init.getPCStatus();\n\t\t// status.init.getMaxNums();\n\t}, 2000);\n\t\n\t// $(window).onload(function(){\n\t// \t$.getscript(\"http://10.69.5.162:8080/target/target-script-min.js#anonymous\")\n\t// });\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 34:\n/***/ (function(module, exports) {\n\n\t/*TMODJS:{}*/\r\n\t!function () {\r\n\t\tfunction a(a, b) {\r\n\t\t\treturn (/string|function/.test(typeof b) ? h : g)(a, b)\r\n\t\t}\r\n\t\r\n\t\tfunction b(a, c) {\r\n\t\t\treturn \"string\" != typeof a && (c = typeof a, \"number\" === c ? a += \"\" : a = \"function\" === c ? b(a.call(a)) : \"\"), a\r\n\t\t}\r\n\t\r\n\t\tfunction c(a) {\r\n\t\t\treturn l[a]\r\n\t\t}\r\n\t\r\n\t\tfunction d(a) {\r\n\t\t\treturn b(a).replace(/&(?![\\w#]+;)|[<>\"']/g, c)\r\n\t\t}\r\n\t\r\n\t\tfunction e(a, b) {\r\n\t\t\tif (m(a))for (var c = 0, d = a.length; d > c; c++)b.call(a, a[c], c, a); else for (c in a)b.call(a, a[c], c)\r\n\t\t}\r\n\t\r\n\t\tfunction f(a, b) {\r\n\t\t\tvar c = /(\\/)[^\\/]+\\1\\.\\.\\1/, d = (\"./\" + a).replace(/[^\\/]+$/, \"\"), e = d + b;\r\n\t\t\tfor (e = e.replace(/\\/\\.\\//g, \"/\"); e.match(c);)e = e.replace(c, \"/\");\r\n\t\t\treturn e\r\n\t\t}\r\n\t\r\n\t\tfunction g(b, c) {\r\n\t\t\tvar d = a.get(b) || i({filename: b, name: \"Render Error\", message: \"Template not found\"});\r\n\t\t\treturn c ? d(c) : d\r\n\t\t}\r\n\t\r\n\t\tfunction h(a, b) {\r\n\t\t\tif (\"string\" == typeof b) {\r\n\t\t\t\tvar c = b;\r\n\t\t\t\tb = function () {\r\n\t\t\t\t\treturn new k(c)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar d = j[a] = function (c) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn new b(c, a) + \"\"\r\n\t\t\t\t} catch (d) {\r\n\t\t\t\t\treturn i(d)()\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn d.prototype = b.prototype = n, d.toString = function () {\r\n\t\t\t\treturn b + \"\"\r\n\t\t\t}, d\r\n\t\t}\r\n\t\r\n\t\tfunction i(a) {\r\n\t\t\tvar b = \"{Template Error}\", c = a.stack || \"\";\r\n\t\t\tif (c)c = c.split(\"\\n\").slice(0, 2).join(\"\\n\"); else for (var d in a)c += \"<\" + d + \">\\n\" + a[d] + \"\\n\\n\";\r\n\t\t\treturn function () {\r\n\t\t\t\treturn \"object\" == typeof console && console.error(b + \"\\n\\n\" + c), b\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\tvar j = a.cache = {}, k = this.String, l = {\r\n\t\t\t\"<\": \"&#60;\",\r\n\t\t\t\">\": \"&#62;\",\r\n\t\t\t'\"': \"&#34;\",\r\n\t\t\t\"'\": \"&#39;\",\r\n\t\t\t\"&\": \"&#38;\"\r\n\t\t}, m = Array.isArray || function (a) {\r\n\t\t\t\treturn \"[object Array]\" === {}.toString.call(a)\r\n\t\t\t}, n = a.utils = {\r\n\t\t\t$helpers: {}, $include: function (a, b, c) {\r\n\t\t\t\treturn a = f(c, a), g(a, b)\r\n\t\t\t}, $string: b, $escape: d, $each: e\r\n\t\t}, o = a.helpers = n.$helpers;\r\n\t\ta.get = function (a) {\r\n\t\t\treturn j[a.replace(/^\\.\\//, \"\")]\r\n\t\t}, a.helper = function (a, b) {\r\n\t\t\to[a] = b\r\n\t\t}, module.exports = a\r\n\t}();\n\n/***/ }),\n\n/***/ 338:\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar init = function init(win, lib) {\n\t\tvar doc = win.document;\n\t\tvar docEl = doc.documentElement;\n\t\tvar metaEl = doc.querySelector('meta[name=\"viewport\"]');\n\t\tvar flexibleEl = doc.querySelector('meta[name=\"flexible\"]');\n\t\tvar dpr = 0;\n\t\tvar scale = 0;\n\t\tvar tid;\n\t\tvar flexible = lib.flexible || (lib.flexible = {});\n\t\n\t\tif (metaEl) {\n\t\t\tconsole.warn('将根据已有的meta标签来设置缩放比例');\n\t\t\tvar match = metaEl.getAttribute('content').match(/initial\\-scale=([\\d\\.]+)/);\n\t\t\tif (match) {\n\t\t\t\tscale = parseFloat(match[1]);\n\t\t\t\tdpr = parseInt(1 / scale);\n\t\t\t}\n\t\t} else if (flexibleEl) {\n\t\t\tvar content = flexibleEl.getAttribute('content');\n\t\t\tif (content) {\n\t\t\t\tvar initialDpr = content.match(/initial\\-dpr=([\\d\\.]+)/);\n\t\t\t\tvar maximumDpr = content.match(/maximum\\-dpr=([\\d\\.]+)/);\n\t\t\t\tif (initialDpr) {\n\t\t\t\t\tdpr = parseFloat(initialDpr[1]);\n\t\t\t\t\tscale = parseFloat((1 / dpr).toFixed(2));\n\t\t\t\t}\n\t\t\t\tif (maximumDpr) {\n\t\t\t\t\tdpr = parseFloat(maximumDpr[1]);\n\t\t\t\t\tscale = parseFloat((1 / dpr).toFixed(2));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\tif (!dpr && !scale) {\n\t\t\tvar isAndroid = win.navigator.appVersion.match(/android/gi);\n\t\t\tvar isIPhone = win.navigator.appVersion.match(/iphone/gi);\n\t\t\tvar devicePixelRatio = win.devicePixelRatio;\n\t\t\tif (isIPhone) {\n\t\t\t\t// iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案\n\t\t\t\tif (devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {\n\t\t\t\t\tdpr = 3;\n\t\t\t\t} else if (devicePixelRatio >= 2 && (!dpr || dpr >= 2)) {\n\t\t\t\t\tdpr = 2;\n\t\t\t\t} else {\n\t\t\t\t\tdpr = 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// 其他设备下，仍旧使用1倍的方案\n\t\t\t\tdpr = 1;\n\t\t\t}\n\t\t\tscale = 1 / dpr;\n\t\t}\n\t\n\t\tdocEl.setAttribute('data-dpr', dpr);\n\t\tif (!metaEl) {\n\t\t\tmetaEl = doc.createElement('meta');\n\t\t\tmetaEl.setAttribute('name', 'viewport');\n\t\t\tmetaEl.setAttribute('content', 'initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n\t\t\tif (docEl.firstElementChild) {\n\t\t\t\tdocEl.firstElementChild.appendChild(metaEl);\n\t\t\t} else {\n\t\t\t\tvar wrap = doc.createElement('div');\n\t\t\t\twrap.appendChild(metaEl);\n\t\t\t\tdoc.write(wrap.innerHTML);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction refreshRem() {\n\t\t\tvar width = docEl.getBoundingClientRect().width;\n\t\t\t// if (width / dpr > 540) {\n\t\t\t//     width = 540 * dpr;\n\t\t\t// }\n\t\t\tvar rem = width / 18.75;\n\t\t\tdocEl.style.fontSize = rem + 'px';\n\t\t\tflexible.rem = win.rem = rem;\n\t\t}\n\t\n\t\twin.addEventListener('resize', function () {\n\t\t\tclearTimeout(tid);\n\t\t\ttid = setTimeout(refreshRem, 300);\n\t\t}, false);\n\t\twin.addEventListener('pageshow', function (e) {\n\t\t\tif (e.persisted) {\n\t\t\t\tclearTimeout(tid);\n\t\t\t\ttid = setTimeout(refreshRem, 300);\n\t\t\t}\n\t\t}, false);\n\t\n\t\tif (doc.readyState === 'complete') {\n\t\t\tdoc.body.style.fontSize = 14 * dpr + 'px';\n\t\t} else {\n\t\t\tdoc.addEventListener('DOMContentLoaded', function (e) {\n\t\t\t\tdoc.body.style.fontSize = 14 * dpr + 'px';\n\t\t\t}, false);\n\t\t}\n\t\n\t\trefreshRem();\n\t\n\t\tflexible.dpr = win.dpr = dpr;\n\t\tflexible.refreshRem = refreshRem;\n\t\tflexible.rem2px = function (d) {\n\t\t\tvar val = parseFloat(d) * this.rem;\n\t\t\tif (typeof d === 'string' && d.match(/rem$/)) {\n\t\t\t\tval += 'px';\n\t\t\t}\n\t\t\treturn val;\n\t\t};\n\t\tflexible.px2rem = function (d) {\n\t\t\tvar val = parseFloat(d) / this.rem;\n\t\t\tif (typeof d === 'string' && d.match(/px$/)) {\n\t\t\t\tval += 'rem';\n\t\t\t}\n\t\t\treturn val;\n\t\t};\n\t};\n\t\n\tvar page = function page() {\n\t\tdocument.body.style.height = (document.body.scrollHeight || document.body.clientHeight) + 'px';\n\t};\n\t\n\tmodule.exports = {\n\t\tinit: init,\n\t\tpage: page\n\t};\n\n/***/ }),\n\n/***/ 339:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\t!function () {\n\t  var a = \"@charset \\\"utf-8\\\";html{color:#000;background:#fff;overflow-y:scroll;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}html *{outline:0;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}html,body{font-family:sans-serif}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,hr,button,article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{margin:0;padding:0}input,select,textarea{font-size:100%}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}abbr,acronym{border:0;font-variant:normal}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:500}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:500}q:before,q:after{content:''}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a:hover{text-decoration:underline}ins,a{text-decoration:none}\",\n\t      b = document.createElement(\"style\");if (document.getElementsByTagName(\"head\")[0].appendChild(b), b.styleSheet) b.styleSheet.disabled || (b.styleSheet.cssText = a);else try {\n\t    b.innerHTML = a;\n\t  } catch (c) {\n\t    b.innerText = a;\n\t  }\n\t}();\n\n/***/ }),\n\n/***/ 340:\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar init = function init($listCube) {\n\t\t// $listCube.width((document.body.scrollWidth/3||document.body.clientWidth/3) - 2 );\n\t\t// $listCube.height($listCube.width());\n\t\n\t\t$listCube.height((document.body.scrollWidth / 3 || document.body.clientWidth / 3) - 2);\n\t};\n\t\n\tvar addList = function addList($touchInput, $touchBtn) {\n\t\t$touchInput.width((document.body.scrollWidth / 3 || document.body.clientWidth / 3) - 2);\n\t\t$touchInput.height($touchInput.width());\n\t\t$touchBtn.width((document.body.scrollWidth / 3 || document.body.clientWidth / 3) - 2);\n\t\t$touchBtn.height($touchBtn.width());\n\t};\n\t\n\tmodule.exports = {\n\t\tinit: init,\n\t\taddList: addList\n\t};\n\n/***/ }),\n\n/***/ 341:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {'use strict';\n\t\n\tvar fetch = __webpack_require__(21);\n\tvar urls = __webpack_require__(24);\n\tvar cubeList = __webpack_require__(340);\n\tvar tplBtn = __webpack_require__(342);\n\tvar tplList = __webpack_require__(343);\n\tvar tplToast = __webpack_require__(344);\n\tvar tplAlert = __webpack_require__(345);\n\t\n\tvar maxSize = 1024 * 1024; // 1MB\n\tvar init = {\n\t\tlist: [],\n\t\taddNewList: [],\n\t\ttotalUpNumber: 0,\n\t\ttoastOnoff: false,\n\t\talertOnoff: false,\n\t\telements: {\n\t\t\t$upIcon: $('#up_icon'),\n\t\t\t$mainTopic: $('.main-topic'),\n\t\t\t$mainList: $('.main-list'),\n\t\t\t$mainTouchBtn: $('.main-touch-btn'),\n\t\t\t$mainPrompt: $('.main-prompt'),\n\t\t\t$mainPhotoNumber: $('.main-photo-number'),\n\t\t\t$boxMain: $('.box-main'),\n\t\t\t$wrapDown: $('.wrap-down')\n\t\t},\n\t\tinitNum: function initNum() {\n\t\t\tthis.elements.$mainPhotoNumber.html(upNumber - this.list.length);\n\t\t\tthis.touchBtn();\n\t\t},\n\t\ttouchBtn: function touchBtn() {\n\t\t\tvar _this = this;\n\t\t\tthis.elements.$upIcon.on(\"touchstart\", function () {\n\t\t\t\t// if (upNumber == 0) _this.toastMask();\n\t\t\t\tswitch (_this.list.length) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\t_this.elements.$upIcon.change(function () {\n\t\t\t\t\t\t\tif (upNumber != 0) {\n\t\t\t\t\t\t\t\twindow.StatusOnoff = true;\n\t\t\t\t\t\t\t\t_this.addNewList.length = 0;\n\t\t\t\t\t\t\t\t_this.elements.$wrapDown.hide();\n\t\t\t\t\t\t\t\t_this.elements.$mainList.append(tplBtn());\n\t\t\t\t\t\t\t\t_this.touchBtnMore();\n\t\t\t\t\t\t\t\t_this.captureComplete(this);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t_this.elements.$upIcon.val('');\n\t\t\t\t\t\t\t\t_this.toastMask(['\\u60A8\\u9009\\u62E9\\u7684\\u56FE\\u7247\\u6570\\u91CF\\u8D85\\u8FC7' + upNumber + '\\u5F20', \"超出部分将不会上传\"]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t_this.toastMask(['\\u60A8\\u9009\\u62E9\\u7684\\u56FE\\u7247\\u6570\\u91CF\\u8D85\\u8FC7' + upNumber + '\\u5F20', \"超出部分将不会上传\"]);\n\t\t\t\t}\n\t\t\t\t_this.elements.$upIcon.off(\"touchstart\");\n\t\t\t});\n\t\t},\n\t\ttouchBtnMore: function touchBtnMore() {\n\t\t\tvar _this = this;\n\t\t\tthis.elements.$mainBtn = $('#up_icon_more');\n\t\t\tthis.elements.$mainBtn.on(\"touchstart\", function () {\n\t\t\t\t// if (upNumber == 0) _this.toastMask();\n\t\t\t\t_this.elements.$mainBtn.change(function () {\n\t\t\t\t\tif (upNumber != 0) {\n\t\t\t\t\t\twindow.StatusOnoff = true;\n\t\t\t\t\t\t_this.addNewList.length = 0;\n\t\t\t\t\t\t_this.captureComplete(this);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.elements.$mainBtn.val('');\n\t\t\t\t\t\t_this.toastMask(['\\u60A8\\u9009\\u62E9\\u7684\\u56FE\\u7247\\u6570\\u91CF\\u8D85\\u8FC7' + upNumber + '\\u5F20', \"超出部分将不会上传\"]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t_this.elements.$mainBtn.off(\"touchstart\");\n\t\t\t});\n\t\t},\n\t\ttoastMask: function toastMask(dataArray) {\n\t\t\tvar _this2 = this;\n\t\n\t\t\tthis.elements.$upIcon = $('#up_icon');\n\t\t\tthis.elements.$upIcon.attr(\"disabled\", true);\n\t\t\tthis.elements.$mainToast = $('.main-toast');\n\t\t\tthis.elements.$mainToast.html(tplToast({\n\t\t\t\tdata: dataArray\n\t\t\t}));\n\t\t\tthis.elements.$mainToast.css({\n\t\t\t\t\"transition\": \"opacity 1s linear 3s\",\n\t\t\t\t\"opacity\": \"0\"\n\t\t\t});\n\t\t\tsetTimeout(function () {\n\t\t\t\t_this2.elements.$mainToast.removeAttr(\"style\");\n\t\t\t\t_this2.elements.$mainToast.html('');\n\t\t\t\t_this2.elements.$upIcon.attr(\"disabled\", false);\n\t\t\t}, 4000);\n\t\t},\n\t\taddToList: function addToList(imageBase64Array, listNumber, limitNumber) {\n\t\t\tvar _this = this;\n\t\t\tif (upNumber != 0) {\n\t\t\t\tthis.showList(true);\n\t\t\t\t_this.elements.$mainWrap = $('#up_icon_wrap');\n\t\t\t\tthis.elements.$mainWrap.before(tplList({\n\t\t\t\t\tdata: imageBase64Array\n\t\t\t\t}));\n\t\n\t\t\t\t// =============添加的按钮去除===============\n\t\t\t\tif (listNumber >= upNumber) {\n\t\t\t\t\t_this.elements.$mainWrap.hide();\n\t\t\t\t}\n\t\t\t\tthis.elements.$mainPhotoNumber.html(upNumber - this.list.length);\n\t\t\t\tvar $touchInput = $('.touch-input-icon') || null,\n\t\t\t\t    $touchBtn = $('.touch-btn-icon') || null;\n\t\t\t\tcubeList.addList($touchInput, $touchBtn);\n\t\t\t} else {\n\t\t\t\t_this.toastMask(['\\u60A8\\u9009\\u62E9\\u7684\\u56FE\\u7247\\u6570\\u91CF\\u8D85\\u8FC7' + upNumber + '\\u5F20', \"超出部分将不会上传\"]);\n\t\t\t}\n\t\t},\n\t\tshowList: function showList(BooleanClicked) {\n\t\t\tif (BooleanClicked) {\n\t\t\t\tthis.elements.$mainTopic.css({\n\t\t\t\t\t\"display\": \"block\"\n\t\t\t\t});\n\t\t\t\tthis.elements.$mainTouchBtn.css({\n\t\t\t\t\t\"display\": \"none\"\n\t\t\t\t});\n\t\t\t\tthis.elements.$mainList.css({\n\t\t\t\t\t\"display\": \"flex\"\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tshowFail: function showFail() {},\n\t\tsimulateAlert: function simulateAlert(string) {\n\t\t\tvar _this = this;\n\t\t\tif (!this.alertOnoff) {\n\t\t\t\t$(\"body\").append(tplAlert({\n\t\t\t\t\tdata: string\n\t\t\t\t}));\n\t\t\t\t_this.elements.$alert = $('.alert-box');\n\t\t\t\t_this.elements.$alert.on(\"touchstart\", function () {\n\t\t\t\t\t$(this).hide();\n\t\t\t\t});\n\t\t\t\tthis.alertOnoff = !this.alertOnoff;\n\t\t\t} else {\n\t\t\t\t_this.elements.$alert.show();\n\t\t\t}\n\t\t},\n\t\tcaptureComplete: function captureComplete(element) {\n\t\t\tvar _this = this;\n\t\t\tvar files = Array.prototype.slice.call(element.files, 0);\n\t\t\tfiles = this.unique(this.unique(this.unique(files)));\n\t\t\tconsole.log(this.list.length + files.length);\n\t\t\tconsole.log(window.upNumber);\n\t\t\tthis.totalUpNumber = this.list.length + files.length > upNumber ? upNumber : this.list.length + files.length;\n\t\t\tfiles.every(function (file, index, array) {\n\t\t\t\tif (!/^image/i.test(file.type)) {\n\t\t\t\t\t_this.elements.$upIcon.val('');\n\t\t\t\t\tfiles.pop();\n\t\t\t\t\tarray.pop();\n\t\t\t\t\t// _this.simulateAlert(\"请选择图片文件\");\n\t\t\t\t\t_this.toastMask([\"请选择图片文件\"]);\n\t\t\t\t\t// return false;\n\t\t\t\t}\n\t\n\t\t\t\t// this.showSharePage();\n\t\t\t\t// 预览图片功能\n\t\t\t\tvar reader = new FileReader();\n\t\t\t\treader.readAsDataURL(file);\n\t\t\t\treader.onabort = function (file) {\n\t\t\t\t\t_this.showFail();\n\t\t\t\t};\n\t\t\t\treader.onerror = function (file) {\n\t\t\t\t\t_this.showFail();\n\t\t\t\t};\n\t\t\t\treader.onload = function (ev) {\n\t\t\t\t\tif (file.type == \"image/gif\") {\n\t\t\t\t\t\tif (this.result.length < maxSize) {\n\t\t\t\t\t\t\t_this.compressImage(this.result, file.type);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this.elements.$upIcon.val('');\n\t\t\t\t\t\t\tfiles.pop();\n\t\t\t\t\t\t\tarray.pop();\n\t\t\t\t\t\t\t_this.toastMask([\"上传图片请小于1MB\"]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.compressImage(this.result, file.type);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\n\t\t\t\treturn true;\n\t\t\t\t// 第二种上传的方案\n\t\t\t\t// var newimgdata = this.createObjectURL(file);\n\t\t\t\t// this.compressImage(newimgdata);\n\t\t\t});\n\t\t},\n\t\tcreateObjectURL: function createObjectURL(blob) {\n\t\t\treturn window[window.webkitURL ? 'webkitURL' : 'URL']['createObjectURL'](blob);\n\t\t},\n\t\tcompressImage: function compressImage(imgSrc, imgType) {\n\t\t\tvar _this = this;\n\t\t\tvar image = new Image();\n\t\t\tvar canvas = document.createElement(\"canvas\");\n\t\t\tvar context = canvas.getContext(\"2d\");\n\t\t\timage.src = imgSrc;\n\t\t\timage.onload = function () {\n\t\t\t\tif (imgType != \"image/gif\" && /^image/i.test(imgType)) {\n\t\t\t\t\tvar width = image.width;\n\t\t\t\t\tvar height = image.height;\n\t\t\t\t\tvar result = width / height;\n\t\t\t\t\tif (result >= 1) {\n\t\t\t\t\t\tcanvas.height = height > 800 ? 800 : height;\n\t\t\t\t\t\tcanvas.width = canvas.height;\n\t\t\t\t\t\tcontext.drawImage(image, (width - height) / 2, 0, height, height, 0, 0, canvas.height, canvas.height);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcanvas.width = width > 800 ? 800 : width;\n\t\t\t\t\t\tcanvas.height = canvas.width;\n\t\t\t\t\t\tcontext.drawImage(image, 0, (height - width) / 2, width, width, 0, 0, canvas.width, canvas.width);\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// var imageType = imgSrc.match(/^data:image\\/(jpeg|png);base64,/)[1];\n\t\t\t\t\t// var imageBase64 = canvas.toDataURL(\"image/\" + imageType);\n\t\n\t\t\t\t\tvar imageBase64 = canvas.toDataURL(\"image/jpeg\");\n\t\t\t\t\t_this.pushImageData(imageBase64);\n\t\t\t\t} else if (imgType == \"image/gif\" && /^image/i.test(imgType)) {\n\t\t\t\t\tvar imageBase64 = imgSrc;\n\t\t\t\t\t_this.pushImageData(imageBase64);\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tpushImageData: function pushImageData(imageBase64) {\n\t\t\tvar _this = this;\n\t\t\t_this.list.push(imageBase64);\n\t\t\t_this.addNewList.push(imageBase64);\n\t\t\tif (_this.list.length <= upNumber) {\n\t\t\t\t_this.addToList(imageBase64, _this.list.length, _this.totalUpNumber);\n\t\n\t\t\t\t// _this.uploadFetch(imageBase64);\n\t\t\t\tif (_this.list.length === _this.totalUpNumber) {\n\t\t\t\t\tvar Max_H = parseInt(document.body.style.height);\n\t\t\t\t\tvar Jud_H = parseInt($(document).height());\n\t\t\t\t\t_this.elements.$boxMain[0].style.height = Jud_H > Max_H ? 'auto' : '80vh';\n\t\t\t\t\t_this.elements.$wrapDown.show();\n\t\t\t\t\t_this.uploadQueueFetchEmitter(_this.addNewList, function () {\n\t\t\t\t\t\twindow.StatusOnoff = !window.StatusOnoff;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t_this.list.length = upNumber;\n\t\n\t\t\t\tif (_this.totalUpNumber >= upNumber && _this.list.length == upNumber && !_this.toastOnoff) {\n\t\t\t\t\t// _this.toastOnoff = !_this.toastOnoff;\n\t\t\t\t\t_this.toastMask(['\\u60A8\\u9009\\u62E9\\u7684\\u56FE\\u7247\\u6570\\u91CF\\u8D85\\u8FC7' + upNumber + '\\u5F20', \"超出部分将不会上传\"]);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tuploadFetch: function uploadFetch(imageBase64) {\n\t\t\tvar _this = this;\n\t\n\t\t\tfetch.post(urls.get('h5TopicUpload'), {\n\t\t\t\tdata: {\n\t\t\t\t\tcachekey: pageId,\n\t\t\t\t\tgroupkey: qrcodeId,\n\t\t\t\t\tnum: _this.totalUpNumber,\n\t\t\t\t\tcontent: imageBase64\n\t\t\t\t}\n\t\t\t\t// xhr: () => {\n\t\t\t\t// \tvar xhr = $.ajaxSettings.xhr();\n\t\t\t\t// if(this.onprogress && xhr.upload) {\n\t\t\t\t//   xhr.upload.addEventListener(\"progress\" , this.onprogress, false);\n\t\t\t\t//   return xhr;\n\t\t\t\t// }\n\t\t\t\t// }\n\t\t\t}).done(function (data) {\n\t\t\t\tif (data.success === true) {\n\t\t\t\t\t_this.elements.$cubeMask = $('.cube-mask');\n\t\t\t\t\t_this.elements.$cubeMask.hide();\n\t\t\t\t}\n\t\t\t}).fail(function (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t},\n\t\tuploadQueueFetch: function uploadQueueFetch(imageBase64) {\n\t\t\tvar _this = this;\n\t\t\tvar options = {\n\t\t\t\turl: urls.get('h5TopicUpload'),\n\t\t\t\tcachekey: _this.getQueryString('pageId'),\n\t\t\t\tgroupkey: _this.getQueryString('qrcodeId')\n\t\t\t\t// var def = $.Deferred();\n\t\t\t\t// fetch.post(uploadUrl + urls, {\n\t\t\t\t//        data: {\n\t\t\t\t//            num: _this.totalUpNumber,\n\t\t\t\t//            content: imageBase64,\n\t\t\t\t//            cachekey: pageId,\n\t\t\t\t//            groupkey: qrcodeId\n\t\t\t\t//        },\n\t\t\t\t//    }).done(function(data) {\n\t\t\t\t//      if (data.success == true) {\n\t\t\t\t//     \t\t  def.resolve(data);\n\t\t\t\t//          _this.elements.$cubeMask = $('.cube-mask');\n\t\t\t\t//          _this.elements.$cubeMask.hide();\n\t\t\t\t//      }\n\t\t\t\t//    }).fail(function(error) {\n\t\t\t\t//    \tconsole.error(error);\n\t\t\t\t//    })\n\t\t\t};return new Promise(function (resolve, reject) {\n\t\t\t\tfetch.post(options.url, {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcachekey: options.cachekey,\n\t\t\t\t\t\tgroupkey: options.groupkey,\n\t\t\t\t\t\tnum: _this.totalUpNumber,\n\t\t\t\t\t\tcontent: imageBase64\n\t\t\t\t\t}\n\t\t\t\t\t// xhr: () => {\n\t\t\t\t\t// \tvar xhr = $.ajaxSettings.xhr();\n\t\t\t\t\t// if(this.onprogress && xhr.upload) {\n\t\t\t\t\t//   xhr.upload.addEventListener(\"progress\" , this.onprogress, false);\n\t\t\t\t\t//   return xhr;\n\t\t\t\t\t// }\n\t\t\t\t\t// }\n\t\t\t\t}).done(function (data) {\n\t\t\t\t\tif (data.success == true) {\n\t\t\t\t\t\t_this.elements.$cubeMask = $('.cube-mask');\n\t\t\t\t\t\t_this.elements.$cubeMask.hide();\n\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t}, 250);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(data);\n\t\t\t\t\t}\n\t\t\t\t}).fail(function (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tuploadQueueFetchEmitter: function uploadQueueFetchEmitter(imageBase64Array, callback) {\n\t\t\tvar _this = this;\n\t\t\t// var def = $.Deferred();\n\t\t\t// var temp = imageBase64Array.reduce(function(promise, item) {\n\t\t\t// \treturn promise.then(function() {return _this.uploadQueueFetch(item)})\n\t\t\t// }, def.resolve())\n\t\n\t\t\tvar temp = imageBase64Array.reduce(function (promise, item) {\n\t\t\t\treturn promise.then(function () {\n\t\t\t\t\t_this.uploadQueueFetch(item);\n\t\t\t\t});\n\t\t\t}, Promise.resolve('init'));\n\t\n\t\t\tcallback && callback();\n\t\t},\n\t\tonprogress: function onprogress(event) {\n\t\t\t// console.log(event)\n\t\t},\n\t\tunique: function unique(array) {\n\t\t\tarray.sort();\n\t\t\tvar re = [array[0]];\n\t\t\tfor (var i = 1; i < array.length; i++) {\n\t\t\t\tif (array[i] !== re[re.length - 1]) {\n\t\t\t\t\tre.push(array[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn re;\n\t\t},\n\t\tgetQueryString: function getQueryString(name) {\n\t\t\tvar reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');\n\t\t\tvar r = window.location.search.substr(1).match(reg);\n\t\t\tif (r != null) {\n\t\t\t\treturn unescape(r[2]);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n\t\n\tmodule.exports = {\n\t\tinit: init\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))\n\n/***/ }),\n\n/***/ 342:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar template=__webpack_require__(34);\n\tmodule.exports=template('src/js/page/uploader/upbutton','<li class=\"main-list-cube\" id=\"up_icon_wrap\"> <i class=\"cube-up-pic\"> <input class=\"touch-up-pic\" type=\"file\" multiple accept=\"image/jpg,image/jpeg,image/png,image/gif,image/JPEG\" id=\"up_icon_more\"> </li> ');\n\n/***/ }),\n\n/***/ 343:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar template=__webpack_require__(34);\n\tmodule.exports=template('src/js/page/uploader/list',function($data,$filename\n\t/*``*/) {\n\t'use strict';var $utils=this,$helpers=$utils.$helpers,$escape=$utils.$escape,data=$data.data,$out='';$out+=' <li class=\"main-list-cube\"> <img class=\"cube-pic\" src=\"';\n\t$out+=$escape(data);\n\t$out+='\"> <div class=\"cube-mask\"> <p>上传中</p> <div class=\"cube-progress\"> <i class=\"cube-progrss-item\"></i> </div> </div> </li>   ';\n\treturn new String($out);\n\t});\n\n/***/ }),\n\n/***/ 344:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar template=__webpack_require__(34);\n\tmodule.exports=template('src/js/page/uploader/toast',function($data,$filename\n\t/*``*/) {\n\t'use strict';var $utils=this,$helpers=$utils.$helpers,$each=$utils.$each,data=$data.data,v=$data.v,$index=$data.$index,$escape=$utils.$escape,$out='';$out+=' <div class=\"toast-article\"> ';\n\t$each(data,function(v,$index){\n\t$out+=' <p> ';\n\t$out+=$escape(v);\n\t$out+=' </p> ';\n\t});\n\t$out+=' </div> ';\n\treturn new String($out);\n\t});\n\n/***/ }),\n\n/***/ 345:\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar template=__webpack_require__(34);\n\tmodule.exports=template('src/js/page/uploader/alert',function($data,$filename\n\t/*``*/) {\n\t'use strict';var $utils=this,$helpers=$utils.$helpers,$escape=$utils.$escape,data=$data.data,$out='';$out+='<div class=\"alert-box\"> <div class=\"alert-message\"> <p class=\"alert-data\"> ';\n\t$out+=$escape(data);\n\t$out+=' </p> </div> </div> ';\n\treturn new String($out);\n\t});\n\n/***/ }),\n\n/***/ 346:\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {'use strict';\n\t\n\tvar fetch = __webpack_require__(21);\n\tvar url = __webpack_require__(24);\n\tvar upload = __webpack_require__(341);\n\tvar tplToast = __webpack_require__(344);\n\t\n\tvar $upIcon = $('#up_icon');\n\tvar $mainToast = $('.main-toast');\n\t\n\tvar init = {\n\t\tgetPCStatus: function getPCStatus() {\n\t\t\tfetch.get(url.get('h5QruploadStatus'), {\n\t\t\t\tdata: {\n\t\t\t\t\tpageId: pageId || window.pageId,\n\t\t\t\t\tqrcodeId: qrcodeId || window.qrcodeId\n\t\t\t\t}\n\t\t\t}).done(function (res) {\n\t\t\t\tif (res.success) {\n\t\t\t\t\tif (res.data.page == \"1\" && res.data.qrcode == \"1\") {\n\t\t\t\t\t\tif (!res.data.qrcodetime && !window.StatusOnoff) {\n\t\t\t\t\t\t\tclearInterval(window.TimeStatus);\n\t\t\t\t\t\t\t$upIcon.attr(\"disabled\", true);\n\t\t\t\t\t\t\t$('#up_icon_more').attr(\"disabled\", true);\n\t\t\t\t\t\t\t$mainToast.append(tplToast({ data: [\"二维码已失效请重新扫描\"] }));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (res.data.page == \"2\" || res.data.qrcode == \"2\" || res.code == \"500\") {\n\t\t\t\t\t\tclearInterval(window.TimeStatus);\n\t\t\t\t\t\t$upIcon.attr(\"disabled\", true);\n\t\t\t\t\t\t$('#up_icon_more').attr(\"disabled\", true);\n\t\t\t\t\t\t$mainToast.append(tplToast({ data: [\"二维码已失效，请重新扫描后上传\"] }));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclearInterval(window.TimeStatus);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).fail(function (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t}\n\t};\n\t\n\tmodule.exports = {\n\t\tinit: init\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// uploader.js","/*\n//判断设备分辨率\nfunction DprLayout (){\n\tvar dpr, rem, scale;\n\tvar docEl = document.documentElement;\n\tdpr = window.devicePixelRatio || 1;\n\trem = docEl.clientWidth * dpr / 10;\n\tscale = 1 / dpr;\n\tdocEl.setAttribute('data-dpr', dpr);\n\twindow.rem2px = function(v) {\n\t    v = parseFloat(v);\n\t    return v * rem;\n\t};\n\twindow.px2rem = function(v) {\n\t    v = parseFloat(v);\n\t    return v / rem;\n\t};\n\twindow.dpr = dpr;\n\twindow.rem = rem;\n}\n*/\n\n/*\nvar bordT = $('img').outerWidth() - $('img').innerWidth();\nvar paddT = $('img').innerWidth() - $('img').width();\nvar margT = $('img').outerWidth(true) - $('img').outerWidth();\n*/\nwindow.TimeStatus = 0;\nwindow.StatusOnoff = false;\nwindow.upNumber = parseInt(maxNum);\nwindow.limitNumber = parseInt(maxNum) - window.upNumber;\n\nvar flexible = require('./flexible');\nvar flexibleCss = require('./flexible_css');\nvar cubeList = require('./cubeList');\nvar upload = require('./upload');\nvar status = require('./status');\n\nvar $boxTopic = $('.box-topic');\nvar $boxMain = $('.box-main');\nvar $listCube = $('.main-list-cube')||null;\nvar $touchInput = $('.touch-input-icon')||null;\nvar $touchBtn = $('.touch-btn-icon')||null;\n\nflexible.init(window, window['lib'] || (window['lib'] = {}));\nflexible.page();\n// $boxMain.height((document.body.scrollHeight||document.body.clientHeight) - $boxTopic.height() - ($boxMain.innerHeight() - $boxMain.height()));\n\n// cubeList.addList($touchInput, $touchBtn);\nif($listCube)cubeList.init($listCube);\n\nupload.init.initNum();\n\nstatus.init.getPCStatus();\nwindow.TimeStatus = setInterval( function(){\n\tstatus.init.getPCStatus();\n\t// status.init.getMaxNums();\n}, 2000);\n\n// $(window).onload(function(){\n// \t$.getscript(\"http://10.69.5.162:8080/target/target-script-min.js#anonymous\")\n// });\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uploader/index.js","/*TMODJS:{}*/\r\n!function () {\r\n\tfunction a(a, b) {\r\n\t\treturn (/string|function/.test(typeof b) ? h : g)(a, b)\r\n\t}\r\n\r\n\tfunction b(a, c) {\r\n\t\treturn \"string\" != typeof a && (c = typeof a, \"number\" === c ? a += \"\" : a = \"function\" === c ? b(a.call(a)) : \"\"), a\r\n\t}\r\n\r\n\tfunction c(a) {\r\n\t\treturn l[a]\r\n\t}\r\n\r\n\tfunction d(a) {\r\n\t\treturn b(a).replace(/&(?![\\w#]+;)|[<>\"']/g, c)\r\n\t}\r\n\r\n\tfunction e(a, b) {\r\n\t\tif (m(a))for (var c = 0, d = a.length; d > c; c++)b.call(a, a[c], c, a); else for (c in a)b.call(a, a[c], c)\r\n\t}\r\n\r\n\tfunction f(a, b) {\r\n\t\tvar c = /(\\/)[^\\/]+\\1\\.\\.\\1/, d = (\"./\" + a).replace(/[^\\/]+$/, \"\"), e = d + b;\r\n\t\tfor (e = e.replace(/\\/\\.\\//g, \"/\"); e.match(c);)e = e.replace(c, \"/\");\r\n\t\treturn e\r\n\t}\r\n\r\n\tfunction g(b, c) {\r\n\t\tvar d = a.get(b) || i({filename: b, name: \"Render Error\", message: \"Template not found\"});\r\n\t\treturn c ? d(c) : d\r\n\t}\r\n\r\n\tfunction h(a, b) {\r\n\t\tif (\"string\" == typeof b) {\r\n\t\t\tvar c = b;\r\n\t\t\tb = function () {\r\n\t\t\t\treturn new k(c)\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar d = j[a] = function (c) {\r\n\t\t\ttry {\r\n\t\t\t\treturn new b(c, a) + \"\"\r\n\t\t\t} catch (d) {\r\n\t\t\t\treturn i(d)()\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn d.prototype = b.prototype = n, d.toString = function () {\r\n\t\t\treturn b + \"\"\r\n\t\t}, d\r\n\t}\r\n\r\n\tfunction i(a) {\r\n\t\tvar b = \"{Template Error}\", c = a.stack || \"\";\r\n\t\tif (c)c = c.split(\"\\n\").slice(0, 2).join(\"\\n\"); else for (var d in a)c += \"<\" + d + \">\\n\" + a[d] + \"\\n\\n\";\r\n\t\treturn function () {\r\n\t\t\treturn \"object\" == typeof console && console.error(b + \"\\n\\n\" + c), b\r\n\t\t}\r\n\t}\r\n\r\n\tvar j = a.cache = {}, k = this.String, l = {\r\n\t\t\"<\": \"&#60;\",\r\n\t\t\">\": \"&#62;\",\r\n\t\t'\"': \"&#34;\",\r\n\t\t\"'\": \"&#39;\",\r\n\t\t\"&\": \"&#38;\"\r\n\t}, m = Array.isArray || function (a) {\r\n\t\t\treturn \"[object Array]\" === {}.toString.call(a)\r\n\t\t}, n = a.utils = {\r\n\t\t$helpers: {}, $include: function (a, b, c) {\r\n\t\t\treturn a = f(c, a), g(a, b)\r\n\t\t}, $string: b, $escape: d, $each: e\r\n\t}, o = a.helpers = n.$helpers;\r\n\ta.get = function (a) {\r\n\t\treturn j[a.replace(/^\\.\\//, \"\")]\r\n\t}, a.helper = function (a, b) {\r\n\t\to[a] = b\r\n\t}, module.exports = a\r\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_tmodjs-loader@1.0.1@tmodjs-loader/runtime.js\n// module id = 34\n// module chunks = 0 2 3 4 5 6 8 10 14 16 17 21 22 23 27 28 30 31 33 35 36 39 44 45 46","var init = function(win, lib) {\n\tvar doc = win.document;\n\tvar docEl = doc.documentElement;\n\tvar metaEl = doc.querySelector('meta[name=\"viewport\"]');\n\tvar flexibleEl = doc.querySelector('meta[name=\"flexible\"]');\n\tvar dpr = 0;\n\tvar scale = 0;\n\tvar tid;\n\tvar flexible = lib.flexible || (lib.flexible = {});\n\n\tif (metaEl) {\n\t\tconsole.warn('将根据已有的meta标签来设置缩放比例');\n\t\tvar match = metaEl.getAttribute('content').match(/initial\\-scale=([\\d\\.]+)/);\n\t\tif (match) {\n\t\t\tscale = parseFloat(match[1]);\n\t\t\tdpr = parseInt(1 / scale);\n\t\t}\n\t} else if (flexibleEl) {\n\t\tvar content = flexibleEl.getAttribute('content');\n\t\tif (content) {\n\t\t\tvar initialDpr = content.match(/initial\\-dpr=([\\d\\.]+)/);\n\t\t\tvar maximumDpr = content.match(/maximum\\-dpr=([\\d\\.]+)/);\n\t\t\tif (initialDpr) {\n\t\t\t\tdpr = parseFloat(initialDpr[1]);\n\t\t\t\tscale = parseFloat((1 / dpr).toFixed(2));\n\t\t\t}\n\t\t\tif (maximumDpr) {\n\t\t\t\tdpr = parseFloat(maximumDpr[1]);\n\t\t\t\tscale = parseFloat((1 / dpr).toFixed(2));\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!dpr && !scale) {\n\t\tvar isAndroid = win.navigator.appVersion.match(/android/gi);\n\t\tvar isIPhone = win.navigator.appVersion.match(/iphone/gi);\n\t\tvar devicePixelRatio = win.devicePixelRatio;\n\t\tif (isIPhone) {\n\t\t\t// iOS下，对于2和3的屏，用2倍的方案，其余的用1倍方案\n\t\t\tif (devicePixelRatio >= 3 && (!dpr || dpr >= 3)) {\n\t\t\t\tdpr = 3;\n\t\t\t} else if (devicePixelRatio >= 2 && (!dpr || dpr >= 2)){\n\t\t\t\tdpr = 2;\n\t\t\t} else {\n\t\t\t\tdpr = 1;\n\t\t\t}\n\t\t} else {\n\t\t\t// 其他设备下，仍旧使用1倍的方案\n\t\t\tdpr = 1;\n\t\t}\n\t\tscale = 1 / dpr;\n\t}\n\n\tdocEl.setAttribute('data-dpr', dpr);\n\tif (!metaEl) {\n\t\tmetaEl = doc.createElement('meta');\n\t\tmetaEl.setAttribute('name', 'viewport');\n\t\tmetaEl.setAttribute('content', 'initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');\n\t\tif (docEl.firstElementChild) {\n\t\t\tdocEl.firstElementChild.appendChild(metaEl);\n\t\t} else {\n\t\t\tvar wrap = doc.createElement('div');\n\t\t\twrap.appendChild(metaEl);\n\t\t\tdoc.write(wrap.innerHTML);\n\t\t}\n\t}\n\n\tfunction refreshRem(){\n\t\tvar width = docEl.getBoundingClientRect().width;\n\t\t// if (width / dpr > 540) {\n\t\t//     width = 540 * dpr;\n\t\t// }\n\t\tvar rem = width / 18.75;\n\t\tdocEl.style.fontSize = rem + 'px';\n\t\tflexible.rem = win.rem = rem;\n\t}\n\n\twin.addEventListener('resize', function() {\n\t\tclearTimeout(tid);\n\t\ttid = setTimeout(refreshRem, 300);\n\t}, false);\n\twin.addEventListener('pageshow', function(e) {\n\t\tif (e.persisted) {\n\t\t\tclearTimeout(tid);\n\t\t\ttid = setTimeout(refreshRem, 300);\n\t\t}\n\t}, false);\n\n\tif (doc.readyState === 'complete') {\n\t\tdoc.body.style.fontSize = 14 * dpr + 'px';\n\t} else {\n\t\tdoc.addEventListener('DOMContentLoaded', function(e) {\n\t\t\tdoc.body.style.fontSize = 14 * dpr + 'px';\n\t\t}, false);\n\t}\n\n\n\trefreshRem();\n\n\tflexible.dpr = win.dpr = dpr;\n\tflexible.refreshRem = refreshRem;\n\tflexible.rem2px = function(d) {\n\t\tvar val = parseFloat(d) * this.rem;\n\t\tif (typeof d === 'string' && d.match(/rem$/)) {\n\t\t\tval += 'px';\n\t\t}\n\t\treturn val;\n\t}\n\tflexible.px2rem = function(d) {\n\t\tvar val = parseFloat(d) / this.rem;\n\t\tif (typeof d === 'string' && d.match(/px$/)) {\n\t\t\tval += 'rem';\n\t\t}\n\t\treturn val;\n\t}\n\n}\n\nvar page = function(){\n\tdocument.body.style.height=(document.body.scrollHeight||document.body.clientHeight)+'px';\n}\n\nmodule.exports = {\n\tinit: init,\n\tpage: page\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uploader/flexible.js","!function(){var a=\"@charset \\\"utf-8\\\";html{color:#000;background:#fff;overflow-y:scroll;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}html *{outline:0;-webkit-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}html,body{font-family:sans-serif}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td,hr,button,article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{margin:0;padding:0}input,select,textarea{font-size:100%}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}abbr,acronym{border:0;font-variant:normal}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:500}ol,ul{list-style:none}caption,th{text-align:left}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:500}q:before,q:after{content:''}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a:hover{text-decoration:underline}ins,a{text-decoration:none}\",b=document.createElement(\"style\");if(document.getElementsByTagName(\"head\")[0].appendChild(b),b.styleSheet)b.styleSheet.disabled||(b.styleSheet.cssText=a);else try{b.innerHTML=a}catch(c){b.innerText=a}}();\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uploader/flexible_css.js","\nvar init = function($listCube) {\n\t// $listCube.width((document.body.scrollWidth/3||document.body.clientWidth/3) - 2 );\n\t// $listCube.height($listCube.width());\n\n\t$listCube.height((document.body.scrollWidth/3||document.body.clientWidth/3) - 2 );\n}\n\nvar addList = function($touchInput, $touchBtn) {\n\t$touchInput.width((document.body.scrollWidth/3||document.body.clientWidth/3) - 2);\n\t$touchInput.height($touchInput.width());\n\t$touchBtn.width((document.body.scrollWidth/3||document.body.clientWidth/3) - 2);\n\t$touchBtn.height($touchBtn.width());\n}\n\nmodule.exports = {\n\tinit: init,\n\taddList: addList\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uploader/cubeList.js","var fetch = require('io/fetch');\nvar urls = require('io/url');\nvar cubeList = require('./cubeList');\nvar tplBtn = require('./upbutton.tpl');\nvar tplList = require('./list.tpl');\nvar tplToast = require('./toast.tpl');\nvar tplAlert = require('./alert.tpl');\n\nconst maxSize = 1024 * 1024; // 1MB\nvar init = {\n\tlist: [],\n\taddNewList: [],\n\ttotalUpNumber: 0,\n\ttoastOnoff: false,\n\talertOnoff: false,\n\telements: {\n\t\t$upIcon: $('#up_icon'),\n\t\t$mainTopic: $('.main-topic'),\n\t\t$mainList: $('.main-list'),\n\t\t$mainTouchBtn: $('.main-touch-btn'),\n\t\t$mainPrompt: $('.main-prompt'),\n\t\t$mainPhotoNumber: $('.main-photo-number'),\n\t\t$boxMain: $('.box-main'),\n\t\t$wrapDown: $('.wrap-down')\n\t},\n\tinitNum() {\n\t\tthis.elements.$mainPhotoNumber.html(upNumber - this.list.length);\n\t\tthis.touchBtn();\n\t},\n\ttouchBtn() {\n\t\tvar _this = this;\n\t\tthis.elements.$upIcon.on(\"touchstart\", () => {\n\t\t\t// if (upNumber == 0) _this.toastMask();\n\t\t\tswitch (_this.list.length) {\n\t\t\t\tcase 0:\n\t\t\t\t\t_this.elements.$upIcon.change(function() {\n\t\t\t\t\t\tif (upNumber != 0) {\n\t\t\t\t\t\t\twindow.StatusOnoff = true;\n\t\t\t\t\t\t\t_this.addNewList.length = 0;\n\t\t\t\t\t\t\t_this.elements.$wrapDown.hide();\n\t\t\t\t\t\t\t_this.elements.$mainList.append(tplBtn());\n\t\t\t\t\t\t\t_this.touchBtnMore();\n\t\t\t\t\t\t\t_this.captureComplete(this);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this.elements.$upIcon.val('');\n\t\t\t\t\t\t\t_this.toastMask([`您选择的图片数量超过${upNumber}张`, \"超出部分将不会上传\"]);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t_this.toastMask([`您选择的图片数量超过${upNumber}张`, \"超出部分将不会上传\"]);\n\t\t\t}\n\t\t\t_this.elements.$upIcon.off(\"touchstart\");\n\t\t});\n\t},\n\ttouchBtnMore() {\n\t\tvar _this = this;\n\t\tthis.elements.$mainBtn = $('#up_icon_more');\n\t\tthis.elements.$mainBtn.on(\"touchstart\", () => {\n\t\t\t// if (upNumber == 0) _this.toastMask();\n\t\t\t_this.elements.$mainBtn.change(function() {\n\t\t\t\tif (upNumber != 0) {\n\t\t\t\t\twindow.StatusOnoff = true;\n\t\t\t\t\t_this.addNewList.length = 0;\n\t\t\t\t\t_this.captureComplete(this);\n\t\t\t\t} else {\n\t\t\t\t\t_this.elements.$mainBtn.val('');\n\t\t\t\t\t_this.toastMask([`您选择的图片数量超过${upNumber}张`, \"超出部分将不会上传\"]);\n\t\t\t\t}\n\t\t\t})\n\t\t\t_this.elements.$mainBtn.off(\"touchstart\");\n\t\t});\n\t},\n\ttoastMask(dataArray) {\n\t\tthis.elements.$upIcon = $('#up_icon');\n\t\tthis.elements.$upIcon.attr(\"disabled\", true);\n\t\tthis.elements.$mainToast = $('.main-toast');\n\t\tthis.elements.$mainToast.html(tplToast({\n\t\t\tdata: dataArray\n\t\t}));\n\t\tthis.elements.$mainToast.css({\n\t\t\t\"transition\": \"opacity 1s linear 3s\",\n\t\t\t\"opacity\": \"0\"\n\t\t});\n\t\tsetTimeout(() => {\n\t\t\tthis.elements.$mainToast.removeAttr(\"style\");\n\t\t\tthis.elements.$mainToast.html('');\n\t\t\tthis.elements.$upIcon.attr(\"disabled\", false);\n\t\t}, 4000);\n\t},\n\taddToList(imageBase64Array, listNumber, limitNumber) {\n\t\tvar _this = this;\n\t\tif (upNumber != 0) {\n\t\t\tthis.showList(true);\n\t\t\t_this.elements.$mainWrap = $('#up_icon_wrap');\n\t\t\tthis.elements.$mainWrap.before(tplList({\n\t\t\t\tdata: imageBase64Array\n\t\t\t}));\n\n\t\t\t// =============添加的按钮去除===============\n\t\t\tif (listNumber >= upNumber) {\n\t\t\t\t_this.elements.$mainWrap.hide();\n\t\t\t}\n\t\t\tthis.elements.$mainPhotoNumber.html(upNumber - this.list.length);\n\t\t\tlet $touchInput = $('.touch-input-icon') || null,\n\t\t\t\t$touchBtn = $('.touch-btn-icon') || null;\n\t\t\tcubeList.addList($touchInput, $touchBtn);\n\t\t} else {\n\t\t\t_this.toastMask([`您选择的图片数量超过${upNumber}张`, \"超出部分将不会上传\"]);\n\t\t}\n\t},\n\tshowList(BooleanClicked) {\n\t\tif (BooleanClicked) {\n\t\t\tthis.elements.$mainTopic.css({\n\t\t\t\t\"display\": \"block\"\n\t\t\t});\n\t\t\tthis.elements.$mainTouchBtn.css({\n\t\t\t\t\"display\": \"none\"\n\t\t\t});\n\t\t\tthis.elements.$mainList.css({\n\t\t\t\t\"display\": \"flex\"\n\t\t\t});\n\t\t}\n\t},\n\tshowFail() {\n\n\t},\n\tsimulateAlert(string) {\n\t\tvar _this = this;\n\t\tif (!this.alertOnoff) {\n\t\t\t$(\"body\").append(tplAlert({\n\t\t\t\tdata: string\n\t\t\t}));\n\t\t\t_this.elements.$alert = $('.alert-box');\n\t\t\t_this.elements.$alert.on(\"touchstart\", function() {\n\t\t\t\t$(this).hide();\n\t\t\t});\n\t\t\tthis.alertOnoff = !this.alertOnoff;\n\t\t} else {\n\t\t\t_this.elements.$alert.show();\n\t\t}\n\t},\n\tcaptureComplete(element) {\n\t\tvar _this = this;\n\t\tvar files = Array.prototype.slice.call(element.files, 0);\n\t\tfiles = this.unique(this.unique(this.unique(files)));\n\t\tconsole.log(this.list.length + files.length);\n\t\tconsole.log(window.upNumber);\n\t\tthis.totalUpNumber = (this.list.length + files.length) > upNumber ? upNumber : (this.list.length + files.length);\n\t\tfiles.every((file, index, array) => {\n\t\t\tif (!/^image/i.test(file.type)) {\n\t\t\t\t_this.elements.$upIcon.val('');\n\t\t\t\tfiles.pop();\n\t\t\t\tarray.pop();\n\t\t\t\t// _this.simulateAlert(\"请选择图片文件\");\n\t\t\t\t_this.toastMask([\"请选择图片文件\"]);\n\t\t\t\t// return false;\n\t\t\t}\n\n\t\t\t// this.showSharePage();\n\t\t\t// 预览图片功能\n\t\t\tvar reader = new FileReader();\n\t\t\treader.readAsDataURL(file);\n\t\t\treader.onabort = function(file) {\n\t\t\t\t_this.showFail();\n\t\t\t}\n\t\t\treader.onerror = function(file) {\n\t\t\t\t_this.showFail();\n\t\t\t}\n\t\t\treader.onload = function(ev) {\n\t\t\t\tif (file.type == \"image/gif\") {\n\t\t\t\t\tif (this.result.length < maxSize) {\n\t\t\t\t\t\t_this.compressImage(this.result, file.type);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.elements.$upIcon.val('');\n\t\t\t\t\t\tfiles.pop();\n\t\t\t\t\t\tarray.pop();\n\t\t\t\t\t\t_this.toastMask([\"上传图片请小于1MB\"]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_this.compressImage(this.result, file.type);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t\t// 第二种上传的方案\n\t\t\t// var newimgdata = this.createObjectURL(file);\n\t\t\t// this.compressImage(newimgdata);\n\t\t})\n\t},\n\tcreateObjectURL(blob) {\n\t\treturn window[window.webkitURL ? 'webkitURL' : 'URL']['createObjectURL'](blob);\n\t},\n\tcompressImage(imgSrc, imgType) {\n\t\tvar _this = this;\n\t\tvar image = new Image();\n\t\tvar canvas = document.createElement(\"canvas\");\n\t\tvar context = canvas.getContext(\"2d\");\n\t\timage.src = imgSrc;\n\t\timage.onload = function() {\n\t\t\tif (imgType != \"image/gif\" && /^image/i.test(imgType)) {\n\t\t\t\tvar width = image.width;\n\t\t\t\tvar height = image.height;\n\t\t\t\tvar result = width / height;\n\t\t\t\tif (result >= 1) {\n\t\t\t\t\tcanvas.height = height > 800 ? 800 : height;\n\t\t\t\t\tcanvas.width = canvas.height;\n\t\t\t\t\tcontext.drawImage(image, (width - height) / 2, 0, height, height, 0, 0, canvas.height, canvas.height);\n\t\t\t\t} else {\n\t\t\t\t\tcanvas.width = width > 800 ? 800 : width;\n\t\t\t\t\tcanvas.height = canvas.width;\n\t\t\t\t\tcontext.drawImage(image, 0, (height - width) / 2, width, width, 0, 0, canvas.width, canvas.width);\n\t\t\t\t}\n\n\t\t\t\t// var imageType = imgSrc.match(/^data:image\\/(jpeg|png);base64,/)[1];\n\t\t\t\t// var imageBase64 = canvas.toDataURL(\"image/\" + imageType);\n\n\t\t\t\tvar imageBase64 = canvas.toDataURL(\"image/jpeg\");\n\t\t\t\t_this.pushImageData(imageBase64);\n\t\t\t} else if (imgType == \"image/gif\" && /^image/i.test(imgType)) {\n\t\t\t\tvar imageBase64 = imgSrc;\n\t\t\t\t_this.pushImageData(imageBase64);\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\tpushImageData(imageBase64) {\n\t\tvar _this = this;\n\t\t_this.list.push(imageBase64);\n\t\t_this.addNewList.push(imageBase64);\n\t\tif (_this.list.length <= upNumber) {\n\t\t\t_this.addToList(imageBase64, _this.list.length, _this.totalUpNumber);\n\n\t\t\t// _this.uploadFetch(imageBase64);\n\t\t\tif (_this.list.length === _this.totalUpNumber) {\n\t\t\t\tvar Max_H = parseInt(document.body.style.height);\n\t\t\t\tvar Jud_H = parseInt($(document).height());\n\t\t\t\t_this.elements.$boxMain[0].style.height = Jud_H > Max_H ? `auto`: '80vh';\n\t\t\t\t_this.elements.$wrapDown.show();\n\t\t\t\t_this.uploadQueueFetchEmitter(_this.addNewList, () => {window.StatusOnoff = !window.StatusOnoff;});\n\t\t\t}\n\t\t} else {\n\t\t\t_this.list.length = upNumber;\n\n\t\t\tif (_this.totalUpNumber >= upNumber && _this.list.length == upNumber && !_this.toastOnoff) {\n\t\t\t\t// _this.toastOnoff = !_this.toastOnoff;\n\t\t\t\t_this.toastMask([`您选择的图片数量超过${upNumber}张`, \"超出部分将不会上传\"]);\n\t\t\t}\n\t\t}\n\t},\n\tuploadFetch(imageBase64) {\n\t\tvar _this = this;\n\n\t\tfetch.post(urls.get('h5TopicUpload'), {\n\t\t\tdata: {\n\t\t\t\tcachekey: pageId,\n\t\t\t\tgroupkey: qrcodeId,\n\t\t\t\tnum: _this.totalUpNumber,\n\t\t\t\tcontent: imageBase64\n\t\t\t},\n\t\t\t// xhr: () => {\n\t\t\t// \tvar xhr = $.ajaxSettings.xhr();\n\t\t\t// if(this.onprogress && xhr.upload) {\n\t\t\t//   xhr.upload.addEventListener(\"progress\" , this.onprogress, false);\n\t\t\t//   return xhr;\n\t\t\t// }\n\t\t\t// }\n\t\t}).done(function(data) {\n\t\t\tif (data.success === true) {\n\t\t\t\t_this.elements.$cubeMask = $('.cube-mask');\n\t\t\t\t_this.elements.$cubeMask.hide();\n\t\t\t}\n\t\t}).fail(function(error) {\n\t\t\tconsole.error(error);\n\t\t})\n\t},\n\tuploadQueueFetch(imageBase64) {\n\t\tvar _this = this;\n\t\tvar options = {\n\t\t\t\turl: urls.get('h5TopicUpload'),\n\t\t\t\tcachekey: _this.getQueryString('pageId'),\n\t\t\t\tgroupkey: _this.getQueryString('qrcodeId')\n\t\t\t}\n\t\t\t// var def = $.Deferred();\n\t\t\t// fetch.post(uploadUrl + urls, {\n\t\t\t//        data: {\n\t\t\t//            num: _this.totalUpNumber,\n\t\t\t//            content: imageBase64,\n\t\t\t//            cachekey: pageId,\n\t\t\t//            groupkey: qrcodeId\n\t\t\t//        },\n\t\t\t//    }).done(function(data) {\n\t\t\t//      if (data.success == true) {\n\t\t\t//     \t\t  def.resolve(data);\n\t\t\t//          _this.elements.$cubeMask = $('.cube-mask');\n\t\t\t//          _this.elements.$cubeMask.hide();\n\t\t\t//      }\n\t\t\t//    }).fail(function(error) {\n\t\t\t//    \tconsole.error(error);\n\t\t\t//    })\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tfetch.post(options.url, {\n\t\t\t\tdata: {\n\t\t\t\t\tcachekey: options.cachekey,\n\t\t\t\t\tgroupkey: options.groupkey,\n\t\t\t\t\tnum: _this.totalUpNumber,\n\t\t\t\t\tcontent: imageBase64\n\t\t\t\t},\n\t\t\t\t// xhr: () => {\n\t\t\t\t// \tvar xhr = $.ajaxSettings.xhr();\n\t\t\t\t// if(this.onprogress && xhr.upload) {\n\t\t\t\t//   xhr.upload.addEventListener(\"progress\" , this.onprogress, false);\n\t\t\t\t//   return xhr;\n\t\t\t\t// }\n\t\t\t\t// }\n\t\t\t}).done(function(data) {\n\t\t\t\tif (data.success == true) {\n\t\t\t\t\t_this.elements.$cubeMask = $('.cube-mask');\n\t\t\t\t\t_this.elements.$cubeMask.hide();\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t}, 250);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t}\n\t\t\t}).fail(function(error) {\n\t\t\t\tconsole.error(error);\n\t\t\t})\n\t\t})\n\t},\n\tuploadQueueFetchEmitter(imageBase64Array, callback) {\n\t\tvar _this = this;\n\t\t// var def = $.Deferred();\n\t\t// var temp = imageBase64Array.reduce(function(promise, item) {\n\t\t// \treturn promise.then(function() {return _this.uploadQueueFetch(item)})\n\t\t// }, def.resolve())\n\n\t\tvar temp = imageBase64Array.reduce(function(promise, item) {\n\t\t\treturn promise.then(function() {\n\t\t\t\t_this.uploadQueueFetch(item)\n\t\t\t})\n\t\t}, Promise.resolve('init'))\n\n\t\tcallback && callback();\n\t},\n\tonprogress(event) {\n\t\t// console.log(event)\n\t},\n\tunique(array) {\n\t\tarray.sort();\n\t\tvar re = [array[0]];\n\t\tfor (var i = 1; i < array.length; i++) {\n\t\t\tif (array[i] !== re[re.length - 1]) {\n\t\t\t\tre.push(array[i]);\n\t\t\t}\n\t\t}\n\t\treturn re;\n\t},\n\tgetQueryString(name) {\n\t\tvar reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');\n\t\tvar r = window.location.search.substr(1).match(reg);\n\t\tif (r != null) {\n\t\t\treturn unescape(r[2]);\n\t\t}\n\t\treturn null;\n\t}\n}\n\nmodule.exports = {\n\tinit: init\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uploader/upload.js","var template=require('tmodjs-loader/runtime');\nmodule.exports=template('src/js/page/uploader/upbutton','<li class=\"main-list-cube\" id=\"up_icon_wrap\"> <i class=\"cube-up-pic\"> <input class=\"touch-up-pic\" type=\"file\" multiple accept=\"image/jpg,image/jpeg,image/png,image/gif,image/JPEG\" id=\"up_icon_more\"> </li> ');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/page/uploader/upbutton.tpl\n// module id = 342\n// module chunks = 46","var template=require('tmodjs-loader/runtime');\nmodule.exports=template('src/js/page/uploader/list',function($data,$filename\n/*``*/) {\n'use strict';var $utils=this,$helpers=$utils.$helpers,$escape=$utils.$escape,data=$data.data,$out='';$out+=' <li class=\"main-list-cube\"> <img class=\"cube-pic\" src=\"';\n$out+=$escape(data);\n$out+='\"> <div class=\"cube-mask\"> <p>上传中</p> <div class=\"cube-progress\"> <i class=\"cube-progrss-item\"></i> </div> </div> </li>   ';\nreturn new String($out);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/page/uploader/list.tpl\n// module id = 343\n// module chunks = 46","var template=require('tmodjs-loader/runtime');\nmodule.exports=template('src/js/page/uploader/toast',function($data,$filename\n/*``*/) {\n'use strict';var $utils=this,$helpers=$utils.$helpers,$each=$utils.$each,data=$data.data,v=$data.v,$index=$data.$index,$escape=$utils.$escape,$out='';$out+=' <div class=\"toast-article\"> ';\n$each(data,function(v,$index){\n$out+=' <p> ';\n$out+=$escape(v);\n$out+=' </p> ';\n});\n$out+=' </div> ';\nreturn new String($out);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/page/uploader/toast.tpl\n// module id = 344\n// module chunks = 46","var template=require('tmodjs-loader/runtime');\nmodule.exports=template('src/js/page/uploader/alert',function($data,$filename\n/*``*/) {\n'use strict';var $utils=this,$helpers=$utils.$helpers,$escape=$utils.$escape,data=$data.data,$out='';$out+='<div class=\"alert-box\"> <div class=\"alert-message\"> <p class=\"alert-data\"> ';\n$out+=$escape(data);\n$out+=' </p> </div> </div> ';\nreturn new String($out);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/page/uploader/alert.tpl\n// module id = 345\n// module chunks = 46","var fetch = require('io/fetch');\nvar url = require('io/url');\nvar upload = require('./upload');\nvar tplToast = require('./toast.tpl');\n\nvar $upIcon = $('#up_icon');\nvar $mainToast = $('.main-toast');\n\nvar init = {\n\tgetPCStatus() {\n\t\tfetch.get(url.get('h5QruploadStatus'), {\n\t\t\tdata: {\n\t            pageId: pageId || window.pageId,\n\t            qrcodeId: qrcodeId || window.qrcodeId\n\t        }\n\t    }).done(function(res) {\n\t    \tif(res.success){\n\t    \t\tif(res.data.page == \"1\" && res.data.qrcode == \"1\") {\n\t\t  \t\t\tif(!res.data.qrcodetime && !window.StatusOnoff){\n\t\t  \t\t\t\tclearInterval(window.TimeStatus);\n\t\t  \t\t\t\t$upIcon.attr(\"disabled\",true);\n\t\t  \t\t\t\t$('#up_icon_more').attr(\"disabled\",true);\n\t\t\t\t\t\t$mainToast.append(tplToast(\n\t\t\t\t\t\t\t{ data : [\"二维码已失效请重新扫描\"] }\n\t\t\t\t\t\t));\n\t\t  \t\t\t}\n\t\t  \t\t} else if (res.data.page == \"2\" || res.data.qrcode == \"2\" || res.code == \"500\") {\n\t\t\t\t\tclearInterval(window.TimeStatus);\n\t\t\t\t\t$upIcon.attr(\"disabled\",true);\n\t  \t\t\t\t$('#up_icon_more').attr(\"disabled\",true);\n\t\t\t\t\t$mainToast.append(tplToast(\n\t\t\t\t\t\t{ data : [\"二维码已失效，请重新扫描后上传\"] }\n\t\t\t\t\t));\n\t\t  \t\t} else {\n\t\t  \t\t\tclearInterval(window.TimeStatus);\n\t\t  \t\t}\n\t    \t}\n\t    }).fail(function(error) {\n\t    \tconsole.error(error);\n\t    })\n\t}\n}\n\n\nmodule.exports = {\n\tinit : init\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/page/uploader/status.js"],"sourceRoot":""}