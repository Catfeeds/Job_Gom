webpackJsonp([5],{"/ntT":function(t,e,n){"use strict";(function(t){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zrlr"),o=a(i),r=n("wxAW"),s=a(r),u=n("kl2M"),l=a(u),c=n("w87c"),d=function(){function e(){(0,o.default)(this,e),this.container=t("[data-node=chat-list]"),this.$box=t("[data-node=chat-wrap]"),this.$editorBar=t("[data-node=editor-bar]"),this.$noChat=t('[data-node="no-chat"]'),this.hasNoChat=!!this.$noChat.length,this.cache=[],this.render(),this.maxList=100}return(0,s.default)(e,[{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=this.adaptationData(t),this.cache.push(t)}},{key:"removeNoChat",value:function(){this.hasNoChat&&(this.$noChat.remove(),this.hasNoChat=!1)}},{key:"render",value:function(){var t=this,e="",n=this.cache.splice(0);if(n.length){this.removeNoChat(),n.map(function(n,a){e+=t.renderItem(n)}),this.container.append(e);var a=this.container.find("li");a.length>this.maxList&&a.slice(0,a.length-this.maxList).remove();var i=this.$box.height()-this.$editorBar.height(),o=this.container.height();o>i&&this.$box.scrollTop(o-i)}clearTimeout(this.timer),this.timer=setTimeout(function(){t.render()},30)}},{key:"adaptationData",value:function(t){var e=t.content.content,n=(0,l.default)(e);return{userId:t.content.sender.user_id,avatar:t.content.sender.avatar,name:t.content.sender.nickname,content:n}}},{key:"renderItem",value:function(t){return'\n\t\t\t<li class="'+(t.userId==c.page.userId?"live-self":"")+'">\n\t\t\t\t<div class="live-user-head"><img src="'+t.avatar+'"></div>\n\t\t\t\t<div class="live-user-msg">\n\t\t\t\t\t<strong>'+t.name+"：</strong>\n\t\t\t\t\t<span>"+t.content+"</span>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t"}}]),e}(),f=void 0;e.default=function(){return f||(f=new d),f}}).call(e,n("Dg8Y"))},"0B8D":function(t,e,n){"use strict";function a(){var t=window.localStorage;if(!t)return!0;try{return t.setItem("test","1"),t.removeItem("test"),!1}catch(t){return!0}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},"1E00":function(t,e,n){"use strict";(function(t){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zrlr"),o=a(i),r=n("wxAW"),s=a(r),u=n("9Y5R"),l=a(u),c=n("lq7/"),d=a(c),f=function(){function e(t){(0,o.default)(this,e),this.parameter=t,this._init(t)}return(0,s.default)(e,[{key:"_init",value:function(e){var n=t('[data-node="shareMask"]');n.on("click","em",function(){n.hide()}),t(e.selector+"").on("click",function(){d.default?n.show():(0,l.default)("请使用浏览器自带分享功能",{delay:2500,position:{left:"center",top:"51%"}})})}}]),e}();e.default=f}).call(e,n("Dg8Y"))},"1TQy":function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t){if((0,u.default)())return!1;var e=t.tid,n=Math.floor(+new Date/1e3),a={},i=localStorage.getItem("gm_m_v_record_log");"string"==typeof i&&(a=JSON.parse(i)),a[e]=n,localStorage.setItem("gm_m_v_record_log",(0,r.default)(a))}Object.defineProperty(e,"__esModule",{value:!0});var o=n("mvHQ"),r=a(o),s=n("0B8D"),u=a(s);e.default=i},"23CD":function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var i=n("sg5g"),o=a(i),r=n("dTI5"),s=a(r),u=n("1E00"),l=a(u),c=n("9Y5R"),d=a(c);new o.default({afterDoSuccess:function(t){var e=t.res,n=t.$el,a=null;n.length&&(a=n.find('[data-node="count"]'),n.addClass("active"),n.data("status",1),a.text(this.formatNumber(e.data.total/1))),(0,d.default)("订阅成功",{position:{left:"center",top:"51%"}})},afterUndoSuccess:function(t){var e=t.res,n=t.$el,a=null;n.length&&(a=n.find('[data-node="count"]'),n.removeClass("active"),n.data("status",0),a.text(this.formatNumber(e.data.total/1))),(0,d.default)("已取消订阅",{position:{left:"center",top:"51%"}})}}),new s.default({delegate:"body",selector:"[data-action=collect]",afterDoSuccess:function(t){var e=t.res,n=t.$el,a=null;n.length&&(a=n.find('[data-node="count"]'),n.addClass("active"),n.data("status",1),a.text(this.formatNumber(e.data.total/1))),(0,d.default)("收藏成功",{position:{left:"center",top:"51%"}})},afterUndoSuccess:function(t){var e=t.res,n=t.$el,a=null;n.length&&(a=n.find('[data-node="count"]'),n.removeClass("active"),n.data("status",0),a.text(this.formatNumber(e.data.total/1))),(0,d.default)("已取消收藏",{position:{left:"center",top:"51%"}})}}),new l.default({selector:"[data-share=share]"})},"3o3C":function(t,e,n){"use strict";(function(e){var a=n("w87c"),i=function(t,n){var i={url:a.page.domain+"api"+t,type:n.type,dataType:"json",timeout:3e4};return e.extend(!0,i,n),e.ajax(i)},o={};["get","post"].forEach(function(t){o[t]=function(e,n){return n=n||{},n.type=t.toUpperCase(),i(e,n)}}),t.exports=o}).call(e,n("Dg8Y"))},"4ajQ":function(t,e,n){var a=n("Wdy1");a(a.S+a.F*!n("qs+f"),"Object",{defineProperty:n("GCs6").f})},"9Y5R":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),n("G3eO");var a,i,o,r=function(){},s={delay:2e3,class:"pub-toast",position:{left:"center",top:"center"},onShow:r,onHide:r},u=function(e,n){if(!e)throw Error("msg is required!");var r=t.extend({},s,n||{}),u=function(){clearTimeout(a),a=null,i.hide()};i?a&&u():i=t("<div>").css({position:"fixed"}).appendTo(document.body),i.removeClass(o).addClass(r.class).html(e).show();var l=i.width(),c=i.height(),d=window.innerWidth,f=window.innerHeight,h=r.position,v=h.left,p=h.top;"center"===v&&(v=(d-l)/2+"px"),"center"===p&&(p=(f-c)/2+"px"),i.css({left:v,top:p}),function(){o=r.class,r.onShow(i),a=setTimeout(function(){u(),r.onHide(i)},r.delay)}()};e.default=u}).call(e,n("Dg8Y"))},AFOY:function(t,e,n){n("CZee");var a=n("iANj").Object;t.exports=function(t,e){return a.create(t,e)}},BzqH:function(t,e,n){n("nclR"),t.exports=n("iANj").Object.setPrototypeOf},C4MV:function(t,e,n){t.exports={default:n("rKx+"),__esModule:!0}},CZee:function(t,e,n){var a=n("Wdy1");a(a.S,"Object",{create:n("NZ8V")})},Eif7:function(t,e,n){n("JyN8"),t.exports=n("iANj").Object.assign},G3eO:function(t,e){},JyN8:function(t,e,n){var a=n("Wdy1");a(a.S+a.F,"Object",{assign:n("xVc6")})},NMac:function(t,e,n){var a=n("8ANE"),i=n("FKWp"),o=function(t,e){if(i(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("3fMt")(Function.call,n("rjjF").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:o}},OvRC:function(t,e,n){t.exports={default:n("AFOY"),__esModule:!0}},PKL7:function(t,e){},Pf15:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n("kiBT"),o=a(i),r=n("OvRC"),s=a(r),u=n("pFYg"),l=a(u);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,l.default)(e)));t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},U6gM:function(t,e,n){"use strict";(function(t){function n(){t('[data-node="header"]').find('[data-action="back"]').on("click",function(){return history.length<1?location.href="/user/index.html":history.back(),!1})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n}).call(e,n("Dg8Y"))},W3xz:function(t,e,n){"use strict";function a(t){var e=parseInt(t);return e<1e4?e:e>=1e4&&e<1e8?parseFloat((e/1e4).toFixed(1))+"万":e>=1e8&&e<Number.MAX_VALUE?parseFloat((e/1e8).toFixed(1))+"亿":"无限"}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},XJKw:function(t,e){},Zbun:function(t,e,n){var a=n("iANj"),i=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},Zrlr:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},dTI5:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("woOf"),o=a(i),r=n("Zx67"),s=a(r),u=n("Zrlr"),l=a(u),c=n("wxAW"),d=a(c),f=n("zwoO"),h=a(f),v=n("Pf15"),p=a(v),g=n("9Y5R"),_=a(g),m=n("iXF+"),y=a(m),b=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,e);var n={api:"/collectSet.json",selector:"[data-action=collect]",action:"collect"};return(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,(0,o.default)(n,t)))}return(0,p.default)(e,t),(0,d.default)(e,[{key:"_defaultDoSuccess",value:function(t){var e=t.res,n=t.$el,a=null;n.length&&(a=n.find('[data-node="count"]'),n.addClass("active"),n.data("status",1),a.text(this.formatNumber(e.data.total/1))),(0,_.default)("收藏成功")}},{key:"_defaultUndoSuccess",value:function(t){var e=t.res,n=t.$el,a=null;n.length&&(a=n.find('[data-node="count"]'),n.removeClass("active"),n.data("status",0),a.text(this.formatNumber(e.data.total/1))),(0,_.default)("已取消收藏")}}]),e}(y.default);e.default=b},elFd:function(t,e,n){"use strict";function a(t){var e=t.tid;o.default.post("/historyPost.json",{data:{video_id:e},success:function(t){},error:function(){}})}Object.defineProperty(e,"__esModule",{value:!0});var i=n("3o3C"),o=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=a},h1Dc:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a=n("woOf"),i=function(t){return t&&t.__esModule?t:{default:t}}(a);n("PKL7");var o=function(e){var n=e.nodeName;return"BODY"===n||"HTML"===n?window.pageYOffset:t(e).scrollTop()},r=function(){var t,e=document.createElement("fakeelement"),n={WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"},a=n.transition;for(t in n)if(void 0!==e.style[t]){a=n[t];break}return a},s=function(e,n){n=this.options=n||{},this.container=e,this.scrollContainer=t(n.scrollContainer||document.body),this.pullStartY=0,this.pullMoveY=0,this.diff=0,this.noMore=!1,this.state="pending",this.offset=n.offset||60;var a=this._text_={pending:"下拉加载更多",pulling:"放开刷新",releasing:"放开刷新",refreshing:"正在加载..."};(0,i.default)(this._text_,n.text||{}),this.refreshLayer=t(n.refreshLayer||'<div class="ptr layer"><em class="icon-34"></em> '+a.pending+"</div>"),this._eventName=r(),this.init()};s.prototype={constructor:s,init:function(){var e=this,n=this.container,a=function(n){return t.proxy(n,e)};n.prepend(this.refreshLayer),n.addClass("ptr"),n.on("touchstart",a(this._onTouchStart)),n.on("touchmove",a(this._onTouchMove)),n.on("touchend",a(this._onTouchEnd))},_onTouchStart:function(t){if("refreshing"!==this.state){var e=t.targetTouches[0];this.pullStartY=e.screenY,this.state="pending"}},_onTouchMove:function(t){if("refreshing"!==this.state){var e=t.targetTouches[0],n=this.pullMoveY=e.screenY;"pending"===this.state&&this._update("pulling");var a=n-this.pullStartY,i=o(this.scrollContainer.get(0));if(a>0&&i<=0){t.preventDefault();var r=Math.pow(a,.85),s=this.offset;this.transform("translate3d(0,"+r+"px,0)"),"pulling"===this.state&&r>s&&this._update("releasing"),"releasing"===this.state&&r<s&&this._update("pulling")}else this._update("pending")}},_onTouchEnd:function(t){"refreshing"!==this.state&&"pending"!==this.state&&(this.container.addClass("transitioning"),"releasing"===this.state?(this._update("refreshing"),this.container.addClass("refreshing"),this.container.trigger("refreshing"),this.transform("")):this._reset(),this.pullStartY=this.pullMoveY=0,this.diff=0)},_update:function(t){var e=this.refreshLayer,n=this._text_;this.state=t,this.noMore?e.html("没有更多了"):"pulling"===t?e.html('<em class="icon-34"></em> '+n.pending):"releasing"===t?e.html('<em class="icon-35"></em> '+n.releasing):"refreshing"===t&&e.html(""+n.refreshing)},_reset:function(){var t=this;this.transform("translate3d(0,0,0)"),this.pullStartY=this.pullMoveY=0,this.diff=0;var e=this.container,n=function(){e.removeClass("transitioning refreshing"),t._update("pending")};e.one(this._eventName,n)},transform:function(t){var e=this.container[0].style;e.webkitTransform=e.transform=t},loadDone:function(){this._reset()},on:function(t,e){this.container.on(t,e)},noMoreData:function(){this.noMore=!0,this.refreshLayer.html("没有更多了")}},e.default=s}).call(e,n("Dg8Y"))},i2M5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("w87c"),i=function(){a.loginFlag||(location.href=a.page.loginUrl)};e.default=i},"iXF+":function(t,e,n){"use strict";(function(t){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("mvHQ"),o=a(i),r=n("Zx67"),s=a(r),u=n("Zrlr"),l=a(u),c=n("wxAW"),d=a(c),f=n("zwoO"),h=a(f),v=n("Pf15"),p=a(v),g=n("9Y5R"),_=a(g),m=n("3o3C"),y=a(m),b=n("njmC"),x=a(b),C=n("W3xz"),w=a(C),k=n("0B8D"),M=a(k),S=n("i2M5"),O=a(S),$=n("w87c"),T=function(){},j=function(t){(0,_.default)(t.res.message)},D={},N=function(e){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,n);var e=(0,h.default)(this,(n.__proto__||(0,s.default)(n)).call(this));return e.api=t.api,e.selector=t.selector,e.action=t.action,e.delegate=t.delegate||"body",e.beforeRequest=t.beforeRequest||T,e.afterRequest=t.afterRequest||T,e.afterDoSuccess=t.afterDoSuccess||null,e.afterUndoSuccess=t.afterUndoSuccess||null,e.afterDoFail=t.afterDoFail||j,e.afterUndoFail=t.afterUndoFail||j,e.formatNumber=w.default,e.localStorageKey="gmv_m_action",e._bindEvent(),e._init(),e._checkBeforeLogin(),e}return(0,p.default)(n,e),(0,d.default)(n,[{key:"_defaultDoSuccess",value:function(){}},{key:"_defaultUndoSuccess",value:function(){}},{key:"_bindEvent",value:function(){var t=this;this.on("doSuccess",function(e){"function"==typeof t.afterDoSuccess?t.afterDoSuccess(e):t._defaultDoSuccess(e)}),this.on("doFail",function(e){t.afterDoFail(e)}),this.on("undoSuccess",function(e){"function"==typeof t.afterUndoSuccess?t.afterUndoSuccess(e):t._defaultUndoSuccess(e)}),this.on("undoFail",function(e){t.afterUndoFail(e)})}},{key:"_init",value:function(){function e(e){var i=t(this),r=i.data(a+"id"),s=i.data("status");switch(s){case"true":s=1;break;case"false":s=0;break;default:s^=0}var u=a+r;return 1!=D[u]&&($.loginFlag?(D[u]=1,n.request(n.getReqData({id:r,status:s})),!1):((0,M.default)()||localStorage.setItem(n.localStorageKey,(0,o.default)({action:a,id:r,status:s})),(0,O.default)(),!1))}var n=this,a=this.action;t(this.delegate).on("click",this.selector,e)}},{key:"_checkBeforeLogin",value:function(){if((0,M.default)())return!1;var t=this,e=localStorage.getItem(this.localStorageKey),n=null,a=null;$.loginFlag&&e&&(a=JSON.parse(e),a.action==this.action&&(n={id:a.id,status:a.status},t.request(t.getReqData(n)))),localStorage.removeItem(this.localStorageKey)}},{key:"getReqData",value:function(t){var e=1^t.status;return{id:t.id,actionType:e,formData:{id:t.id,type:e}}}},{key:"request",value:function(e){var n=this,a=n.action,i=e.id,r=e.actionType;if(!1===n.beforeRequest(e))return!1;y.default.post(this.api,{data:e.formData,success:function(e){var s="[data-"+n.action+'id="'+i+'"]',u=t(s),l=e.code,c={id:i,res:e,$el:u,$delegate:t(n.delegate)},d=["undoSuccess","doSuccess"],f=["undoFail","doFail"];if(200001==l)return(0,M.default)()||localStorage.setItem(n.localStorageKey,(0,o.default)({action:a,id:i,status:1^r})),location.href=$.page.loginUrl,!1;200==l||400008==l?n.emit(d[r],c):n.emit(f[r],c)},error:function(){(0,_.default)("网络请求失败，请稍后重试")},complete:function(){delete D[a+i],n.afterRequest(e)}})}}]),n}(x.default);e.default=N}).call(e,n("Dg8Y"))},keE9:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var i=n("w87c"),o=n("9Y5R"),r=a(o),s=n("w3G2"),u=a(s),l=n("1TQy"),c=a(l),d=n("elFd"),f=a(d),h=n("/ntT"),v=a(h),p=n("uGIp"),g=a(p),_=i.page.topicId,m=new MeixinPlayer,y=(0,v.default)();(0,g.default)({host_id:i.page.userId,nikeName:i.page.nickName,avatar:i.page.avatar,videoId:i.page.videoId,topicId:_}).init(m),m.init(i.page.videoId,"video-player",{type:"live",env:i.page.env||"pre",danmakuStatus:1}),i.loginFlag?((0,u.default)(_,m),(0,f.default)({tid:_})):(0,c.default)({tid:_});var b=function(){var t={user_id:"",nickname:""};0!=i.page.userId&&(t.user_id=i.page.userId,t.nickname=i.page.nickName),m.setUserInfo(t)};m.on("needUserInfo",b),m.on("messageReceived",function(t,e){e.isSensitive||y.getData(e)}),m.on("userLoginedByOther",function(){(0,r.default)("你的账号已在其他终端登录！",{position:{left:"center",top:"52%"}}),i.page.userInfo=0})},kiBT:function(t,e,n){t.exports={default:n("BzqH"),__esModule:!0}},kl2M:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t,e){return t?t.replace(e||/[&<">'](?:(amp|lt|ldquo|rdquo|quot|gt|#39|nbsp|#\d+);)?/g,function(t,e){return e?t:{"<":"&lt;","&":"&amp;",'"':"&quot;","“":"&ldquo;","”":"&rdquo;",">":"&gt;","'":"&#39;"}[t]}):""};e.default=a},koNT:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zrlr"),o=a(i),r=n("wxAW"),s=a(r),u=function(){function t(){(0,o.default)(this,t),this.isOnline=window.navigator.onLine,this._init()}return(0,s.default)(t,[{key:"_init",value:function(){var t=this;window.addEventListener("online",function(){t.isOnline=!0}),window.addEventListener("offline",function(){t.isOnline=!1})}}]),t}(),l=void 0;e.default=function(){return l||(l=new u),l}},"lq7/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},mvHQ:function(t,e,n){t.exports={default:n("Zbun"),__esModule:!0}},nclR:function(t,e,n){var a=n("Wdy1");a(a.S,"Object",{setPrototypeOf:n("NMac").set})},njmC:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zrlr"),o=a(i),r=n("wxAW"),s=a(r),u=function(){function t(){(0,o.default)(this,t),this.cache={}}return(0,s.default)(t,[{key:"on",value:function(t,e){(this.cache[t]||(this.cache[t]=[])).push(e)}},{key:"once",value:function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}this.on(t,n)}},{key:"off",value:function(t){this.cache[t]=null}},{key:"emit",value:function(t){var e=this,n=[].concat(Array.prototype.slice.call(arguments));n.shift();var a=this.cache[t];a&&a.length>0&&a.forEach(function(t){t.apply(e,n)})}}]),t}();e.default=u},qNjk:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}n("XJKw"),n("1+C1");var i=(n("w87c"),n("keE9")),o=(a(i),n("U6gM")),r=a(o),s=n("wm1u"),u=a(s),l=n("23CD"),c=(a(l),n("snL0")),d=a(c);(0,r.default)(),(0,u.default)(),(0,d.default)()},"rKx+":function(t,e,n){n("4ajQ");var a=n("iANj").Object;t.exports=function(t,e,n){return a.defineProperty(t,e,n)}},sg5g:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("woOf"),o=a(i),r=n("Zx67"),s=a(r),u=n("Zrlr"),l=a(u),c=n("wxAW"),d=a(c),f=n("zwoO"),h=a(f),v=n("Pf15"),p=a(v),g=n("9Y5R"),_=a(g),m=n("iXF+"),y=a(m),b=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,e);var n={api:"/publisherSet.json",selector:"[data-action=subscribe]",action:"subscribe"};return(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,(0,o.default)(n,t)))}return(0,p.default)(e,t),(0,d.default)(e,[{key:"_defaultDoSuccess",value:function(t){var e=t.res,n=t.$el,a=null;n.length&&(a=n.find('[data-node="count"]'),n.addClass("active"),n.data("status",1),a.text(this.formatNumber(e.data.total/1))),(0,_.default)("订阅成功")}},{key:"_defaultUndoSuccess",value:function(t){var e=t.res,n=t.$el,a=null;n.length&&(a=n.find('[data-node="count"]'),n.removeClass("active"),n.data("status",0),a.text(this.formatNumber(e.data.total/1))),(0,_.default)("已取消订阅")}}]),e}(y.default);e.default=b},snL0:function(t,e,n){"use strict";(function(t){function a(t){return t&&t.__esModule?t:{default:t}}function i(){d.on("refreshing",function(){s.default.get("/product.json?id="+$CONFIG.topicId).done(function(t){if(t&&200===t.code){var e=t.data.list,n=e.length;if(console.log(e),n>0){var a=o(e);h.empty().html(a),f.addClass("hide")}else h.empty().addClass("hide"),f.removeClass("hide")}}).always(function(){d.loadDone()})})}function o(t){for(var e="",n=0;n<t.length;n++){var a=t[n];console.log(a.type);var i="",o="";3==a.type?(i=a.mUrl,o='<div class="goods-btn quan"><span>去抢券</span></div>'):(i=a.url,o='<div class="goods-btn"><span>去购买</span></div>'),e+="\n            <li>\n              <a  data-code=product-"+[n+1]+' class="goods-detail" href="'+i+'" >\n                  <img src="'+a.image+'">\n                  <div class="goods-msg">\n                      <div class="goods-title">'+a.name+"</div>\n                      "+o+"\n                  </div>\n              </a>\n          </li>\n        "}return e}Object.defineProperty(e,"__esModule",{value:!0});var r=n("3o3C"),s=a(r),u=n("h1Dc"),l=a(u),c=t("[data-content=goods]"),d=new l.default(c,{scrollContainer:"#liveContent"}),f=t("[data-node=no-data]"),h=t("[data-node=goodslist]");$CONFIG.topicId="1647",e.default=i}).call(e,n("Dg8Y"))},uGIp:function(t,e,n){"use strict";(function(t){function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n("Zx67"),o=a(i),r=n("Zrlr"),s=a(r),u=n("wxAW"),l=a(u),c=n("zwoO"),d=a(c),f=n("Pf15"),h=a(f),v=n("3o3C"),p=(a(v),n("njmC")),g=a(p),_=n("9Y5R"),m=a(_),y=n("w87c"),b=n("i2M5"),x=a(b),C=n("koNT"),w=a(C),k=(0,w.default)(),M=function(e){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.default)(this,n);var a=(0,d.default)(this,(n.__proto__||(0,o.default)(n)).call(this));return a.opts=e,a.$live=t(".live-detail"),a.$video=t("#video-player"),a.$editorBar=t('[data-node="editor-bar"]'),a.$mask=t('[data-node="mask"]'),a.$editorForm=t('[data-node="editor-form"]'),a.$eTxts=t('[data-node="editor-txts"]'),a.$eCount=a.$editorForm.find('[data-node="editor-count"]'),a.$curCount=a.$eCount.find("em"),a.$eSubmit=a.$editorForm.find('[data-node="editor-submit"]'),a.maxCount=40,a.disabled=!1,a.player=null,a}return(0,h.default)(n,e),(0,l.default)(n,[{key:"init",value:function(t){var e=this,n=this,a=navigator.userAgent.toLowerCase();this.player=t,this.$curCount.text("0"),this.$eCount.find("span").text(this.maxCount),this.$mask.on("click",function(){n.$eTxts.blur()}),this.$editorBar.on("click",function(){y.loginFlag?e.showEditorForm():(0,x.default)()}),this.$eTxts.on({focus:function(t){var e=n.$eTxts[0].offsetHeight;n.$mask.removeClass("hide"),/android/.test(a)&&n.$live.css("margin-top",-100),setTimeout(function(){/iphone|ipad|ipod/.test(a)&&window.scrollTo(0,window.pageYOffset+e)},300)},blur:function(t){n.$mask.addClass("hide"),/android/.test(a)&&n.$live.css("margin-top",0),""==n.$eTxts.val()&&(n.$eTxts.val(""),n.$editorForm.addClass("hide"))}}),this.$eTxts[0].addEventListener("input",function(t){var e=t.target.value,a=n.checkTextLength(e);n.$curCount.text(a),n.changeTextNumStatus(a)}),this.$eSubmit.on("click",function(){var t=n.$eTxts.val();return k.isOnline?!n.disabled&&(""!==t&&(""===t.trim()?((0,m.default)("发送内容不能为空",{position:{left:"center",top:"51%"}}),!1):void n.send(t))):((0,m.default)("网络连接失败",{position:{left:"center",top:"51%"}}),!1)})}},{key:"showEditorForm",value:function(){this.$editorForm.removeClass("hide"),this.$eTxts.focus()}},{key:"checkTextLength",value:function(t){for(var e=0,n=0,a=t.length,i=0;i<a;i++)n=t.charCodeAt(i),e+=n>=0&&n<128?.5:1;return Math.ceil(e)}},{key:"changeTextNumStatus",value:function(t){var e=this.$eSubmit;this.$curCount;t>0?t>this.maxCount?(this.$curCount.addClass("waring"),e.removeClass("active"),this.disabled=!0):(this.$curCount.removeClass("waring"),e.addClass("active"),this.disabled=!1):(e.removeClass("active"),this.disabled=!1)}},{key:"addEmoticons",value:function(t){}},{key:"adaptationData",value:function(t){}},{key:"send",value:function(t){var e={id:y.page.userId,name:y.page.nickName};this.player.sendDanmaku(this.buildData(t,e)),this.$editorForm.addClass("hide"),this.$eTxts.val(""),this.$curCount.text("0"),this.changeTextNumStatus(0)}},{key:"sendSuccess",value:function(){this.$editorForm.addClass("hide"),this.$eTxts.val(""),this.$curCount.text("0"),this.changeTextNumStatus(0)}},{key:"buildData",value:function(t,e){var n=this.opts,a=e.id,i="#ffffff",o="#49abd1";return n.host_id===a&&(i=o="#e90034"),{content:t,room_id:n.videoId,style:{fontSize:"22px",color:i},sender:{user_id:a,nickname:e.name,avatar:n.avatar,style:{fontSize:"22px",color:o}},receiver:{user_id:"",nickname:"",style:{fontSize:"22px",color:"#ffffff"}}}}}]),n}(g.default),S=void 0;e.default=function(t){return S||(S=new M(t)),S}}).call(e,n("Dg8Y"))},w3G2:function(t,e,n){"use strict";function a(t,e){e=parseInt(e),r.default.post("/historyUpdate.json",{data:{video_id:t,duration:e},success:function(t){},error:function(){}})}function i(t,e){e.on("playPause",function(){var n=e.currentTime();a(t,n)}),e.on("playStop",function(){var n=e.currentTime();a(t,n)}),window.onbeforeunload=function(){var n=e.currentTime();a(t,n)}}Object.defineProperty(e,"__esModule",{value:!0});var o=n("3o3C"),r=function(t){return t&&t.__esModule?t:{default:t}}(o);e.default=i},wm1u:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=t('[data-node="editor-form"]'),n=!1;t("[data-node=tab]").on("click","li",function(){var a=t(this),i=a.attr("data-tab");if(!a.hasClass("active")){a.siblings().removeClass("active"),a.addClass("active");t("[data-content="+i+"]").removeClass("hide").siblings().addClass("hide")}"chat"===i?n?e.removeClass("hide"):e.addClass("hide"):e.hasClass("hide")?(e.addClass("hide"),n=!1):(e.addClass("hide"),n=!0)})}}).call(e,n("Dg8Y"))},woOf:function(t,e,n){t.exports={default:n("Eif7"),__esModule:!0}},wxAW:function(t,e,n){"use strict";e.__esModule=!0;var a=n("C4MV"),i=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,i.default)(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}()},xVc6:function(t,e,n){"use strict";var a=n("pEGt"),i=n("THEY"),o=n("bSeU"),r=n("wXdB"),s=n("wiaE"),u=Object.assign;t.exports=!u||n("zyKz")(function(){var t={},e={},n=Symbol(),a="abcdefghijklmnopqrst";return t[n]=7,a.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=a})?function(t,e){for(var n=r(t),u=arguments.length,l=1,c=i.f,d=o.f;u>l;)for(var f,h=s(arguments[l++]),v=c?a(h).concat(c(h)):a(h),p=v.length,g=0;p>g;)d.call(h,f=v[g++])&&(n[f]=h[f]);return n}:u},zwoO:function(t,e,n){"use strict";e.__esModule=!0;var a=n("pFYg"),i=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}}},["qNjk"]);