webpackJsonp([15],{"0eSz":function(t,e,i){"use strict";(function(t){function e(t){return t&&t.__esModule?t:{default:t}}i("IMgN"),i("bMM1"),i("fJTB"),i("HY96");var n=i("2roW"),o=e(n),r=i("oovt"),s=e(r),l=new s.default({data:{topic_id:1},el:"#wrap"}),c=new o.default(document.querySelector("#wrap"),function(t){l.fetchComments(1).done(function(e){if(!e)return void t.throwException();if(l.data.noMore)t.noData();else{if(l.data.error)return void t.throwException();t.unLock()}})},{loadingHtml:'<div class="infinite-scroll"><span>加载中...</span></div>',noDataHtml:'<div class="infinite-scroll"><span>没有更多评论了</span></div>',exceptionHtml:'<div class="infinite-scroll clickHandler"><span>评论加载异常，点击重试</span></a></div>'});c.container.addEventListener("click",function(e){t(e.target).hasClass("clickHandler")&&c.solveException()})}).call(e,i("7t+N"))},"2roW":function(t,e,i){!function(e,i){t.exports=i()}(0,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e){!function(){var e=function(t){var e,i;(t=t||document.querySelector(t))&&t.addEventListener("touchstart",function(n){e=n.touches[0].pageY,i=t.scrollTop,i<=0&&(t.scrollTop=1),i+t.offsetHeight>=t.scrollHeight&&(t.scrollTop=t.scrollHeight-t.offsetHeight-1)},!1)};"undefined"!=typeof window&&void 0===t?window.ScrollFix=e:t.exports=e}()},function(t,e,i){!function(e,i){t.exports=i()}(0,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){if(n(this,t),!e||e===window)return null;if(!(e instanceof HTMLElement))throw new Error("parameter 1 must be a HTMLElement instance!");this.win=e;var i=e.querySelector(".localScrollFix-fixDom");i?this.fixDom=i:this.createFixDom(),this.isArrived=!1,this.update()}return o(t,[{key:"createFixDom",value:function(){this.win.insertAdjacentHTML("beforeend",'<div class="localScrollFix-fixDom" style="margin: 0; padding: 0"></div>'),this.fixDom=this.win.querySelector(".localScrollFix-fixDom")}},{key:"removeFixDom",value:function(){this.win.removeChild(this.fixDom),this.fixDom=null}},{key:"arrived",value:function(){this.isArrived=!0,this.removeFixDom()}},{key:"update",value:function(){if(!this.isArrived){var t=this.computerFixDomPaddingTop();t>=0?this.fixDom.style.paddingTop=t+3+"px":this.arrived()}}},{key:"computerFixDomPaddingTop",value:function(){var t=this.fixDom,e=this.win,i=t.getBoundingClientRect().top,n=e.getBoundingClientRect().bottom,o=window.getComputedStyle(e,null),r=o.paddingBottom,s=o.borderBottomWidth;return n-parseFloat(r)-parseFloat(s)-i}}]),t}();e.default=r,window.LocalScrollFix=r}])})},function(t,e,i){"use strict";var n=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])}return i};e.a=n},function(t,e,i){"use strict";e.a=function(t,e,i){var n,o,r,s,l=0;i||(i={});var c=function(){l=!1===i.leading?0:Date.now(),n=null,s=t.apply(o,r),n||(o=r=null)},a=function(){var a=Date.now();l||!1!==i.leading||(l=a);var u=e-(a-l);return o=this,r=arguments,u<=0||u>e?(n&&(clearTimeout(n),n=null),l=a,s=t.apply(o,r),n||(o=r=null)):n||!1===i.trailing||(n=setTimeout(c,u)),s};return a.cancel=function(){clearTimeout(n),l=0,n=o=r=null},a}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){throw new Error("2 arguments required, but only "+t+" present.")}function r(){return/iphone/i.test(window.navigator.userAgent)}function s(t){return'<div style="text-align: center;font-size: 14px;line-height: 50px;">'+t+"</div>"}Object.defineProperty(e,"__esModule",{value:!0});var l=i(3),c=i(2),a=i(1),u=i.n(a),h=i(0),f=i.n(h),d=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o(0),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o(1),s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n(this,t),!(e instanceof HTMLElement))throw new Error("parameter 1 must be a HTMLElement instance!");if("function"!=typeof r)throw new Error("parameter 2 must be a function!");this.container=e,this.loadMoreFn=r,this._options=i.i(c.a)({},t.defaults,s),this.isLock=this._options.isInitLock,this.hasMore=!0,this.win=this._options.window,this.windowHeight=window.innerHeight,this.createBottomDom(),this.fixLocalScroll(),this.scrollListener=this.scrollListener.bind(this),this.resizeListener=this.resizeListener.bind(this),this.scrollListenerWrapThrottle=i.i(l.a)(this.scrollListener,50),this.resizeListenerWrapThrottle=i.i(l.a)(this.resizeListener,50),this.attachScrollListener()}return d(t,[{key:"fixLocalScroll",value:function(){this.win!==window&&r()?(this._options.useLocalScrollFix&&(this.localScrollFix=new u.a(this.win)),this._options.useScrollFix&&new f.a(this.win)):(this._options.useLocalScrollFix=!1,this._options.useScrollFix=!1)}},{key:"createBottomDom",value:function(){this.container.insertAdjacentHTML("beforeend",'<div class="scrollload-bottom">'+this._options.loadingHtml+"</div>"),this.bottomDom=this.container.querySelector(".scrollload-bottom")}},{key:"showNoDataDom",value:function(){this.bottomDom.innerHTML=this._options.noDataHtml}},{key:"showLoadingDom",value:function(){this.bottomDom.innerHTML=this._options.loadingHtml}},{key:"showExceptionDom",value:function(){this.bottomDom.innerHTML=this._options.exceptionHtml}},{key:"scrollListener",value:function(){this.isLock||this.isBottom()&&(this.isLock=!0,this.loadMoreFn.call(this,this))}},{key:"isBottom",value:function(){var t=this.win,e=this.bottomDom,i=this.windowHeight,n=e.getBoundingClientRect().top,o=void 0;if(t===window)o=i;else{var r=t.getBoundingClientRect(),s=r.height,l=r.top;o=s,n-=l}return n-o<=this._options.threshold}},{key:"resizeListener",value:function(){this.win===window&&(this.windowHeight=window.innerHeight),this.scrollListener()}},{key:"attachScrollListener",value:function(){this.win.addEventListener("scroll",this.scrollListenerWrapThrottle),this.win.addEventListener("resize",this.resizeListenerWrapThrottle),this.scrollListener()}},{key:"detachScrollListener",value:function(){this.win.removeEventListener("scroll",this.scrollListenerWrapThrottle),this.win.removeEventListener("resize",this.resizeListenerWrapThrottle)}},{key:"lock",value:function(){this.isLock=!0}},{key:"unLock",value:function(){this.isLock=!1,this.hasMore&&this.scrollListener(),this._options.useLocalScrollFix&&this.localScrollFix.update()}},{key:"noData",value:function(){this.lock(),this.hasMore=!1,this.showNoDataDom(),this._options.useLocalScrollFix&&!this.localScrollFix.isArrived&&this.localScrollFix.arrived(),this.detachScrollListener()}},{key:"refreshData",value:function(){this.container.querySelector(".scrollload-bottom")?this.showLoadingDom():this.createBottomDom(),this.isLock=!1,this.hasMore=!0,this._options.useLocalScrollFix&&(this.localScrollFix=new u.a(this.win)),this.attachScrollListener()}},{key:"throwException",value:function(){this.showExceptionDom()}},{key:"solveException",value:function(){this.hasMore?(this.showLoadingDom(),this.unLock()):this.showNoDataDom()}},{key:"setOptions",value:function(t){i.i(c.a)(this._options,t)}},{key:"getOptions",value:function(){return this._options}}],[{key:"setGlobalOptions",value:function(e){i.i(c.a)(t.defaults,e)}}]),t}();p.defaults={isInitLock:!1,threshold:10,window:window,useLocalScrollFix:!1,useScrollFix:!1,loadingHtml:s("加载中..."),noDataHtml:s("没有更多数据了"),exceptionHtml:s("出现异常")},e.default=p,window.Scrollload=p}])})},HY96:function(t,e,i){"use strict";i("QtMn")},IMgN:function(t,e){},QtMn:function(t,e){},bMM1:function(t,e){},fJTB:function(t,e){},oovt:function(t,e,i){"use strict"}},["0eSz"]);