webpackJsonp([5],{"9Y5R":function(t,e,a){"use strict";(function(t){function n(e,a,n){var u=function(){},c=!0,s={msg:"",x:null,y:null,delay:2e3,cb:u};if("string"==typeof e?(s.msg=e,s.delay="number"==typeof a?a||2e3:2e3,s.cb="function"==typeof n?n:u):t.extend(s,e),null!==s.x&&null!==s.y&&(c=!1),""===s.msg.trim())return!1;o?(i&&(clearTimeout(i),i=null,o.hide()),o.html(s.msg).show()):(o=t("<div/>").html(s.msg).addClass("pub-toast"),t("body").append(o));var l=o.outerWidth(),r=o.outerHeight(),f={position:"absolute",left:s.x,top:s.y},d={position:"fixed",left:"50%",top:"50%",marginLeft:-l/2,marginTop:-r/2},h=c?d:f;o.css(h),clearTimeout(i),i=setTimeout(function(){o.hide().html(""),s.cb(),i=null},s.delay)}Object.defineProperty(e,"__esModule",{value:!0}),a("G3eO");var o=null,i=null;e.default=n}).call(e,a("7t+N"))},Eif7:function(t,e,a){a("JyN8"),t.exports=a("iANj").Object.assign},G3eO:function(t,e){},HY96:function(t,e,a){"use strict";a("QtMn")},JyN8:function(t,e,a){var n=a("Wdy1");n(n.S+n.F,"Object",{assign:a("xVc6")})},O7yE:function(t,e,a){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a("Zrlr"),i=n(o),u=a("wxAW"),c=n(u),s=a("ioS7"),l=function(){function e(a){var n=this;(0,i.default)(this,e),this.options=a||{},this.minHeight=this.options.minHeight||window.screen.height/2;t("body").append('<div class="back-top" title="返回顶部" style="display: block;opacity: 0;" id="back-top"><em class="icon-19"></em></div>'),t("#back-top").on("click",function(){n.scrollToTop(500)}),setTimeout(function(){t("#back-top").css({opacity:1})},0);var o=(0,s.throttle)(this.controlButton.bind(this),100);t(window).on("scroll",o),t(window).on("load",o)}return(0,c.default)(e,[{key:"controlButton",value:function(){t(window).scrollTop()>this.minHeight?t("#back-top").show():t("#back-top").hide()}},{key:"scrollToTop",value:function(t){var e=window.pageYOffset,a=Math.PI/Math.floor(t/15),n=e/2,o=0,i=void 0,u=setInterval(function(){0!=window.pageYOffset?(o+=1,i=n-n*Math.cos(o*a),window.scrollTo(0,e-i)):clearInterval(u)},15)}}]),e}();e.default=l}).call(e,a("7t+N"))},QtMn:function(t,e){},W3xz:function(t,e,a){"use strict";function n(t){var e=parseInt(t);return e<1e4?e:e>=1e4&&e<1e8?parseFloat((e/1e4).toFixed(1))+"万":e>=1e8&&e<Number.MAX_VALUE?parseFloat((e/1e8).toFixed(1))+"亿":"无限"}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},gbOH:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a("woOf"),i=n(o),u=a("Zx67"),c=n(u),s=a("Zrlr"),l=n(s),r=a("wxAW"),f=n(r),d=a("zwoO"),h=n(d),v=a("Pf15"),p=n(v),y=a("9Y5R"),m=(n(y),a("sit2")),g=n(m),b=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,e);var a={api:"/v1/subscribe/set",selector:"[data-action=subscribe]",action:"subscribe"};return(0,h.default)(this,(e.__proto__||(0,c.default)(e)).call(this,(0,i.default)(a,t)))}return(0,p.default)(e,t),(0,f.default)(e,[{key:"getReqData",value:function(t){var e=1^t.status;return{id:t.id,actionType:e,formData:{publish_id:t.id,type:e}}}},{key:"_defaultDoSuccess",value:function(t){var e=t.res,a=t.$el,n=null;a.length&&(n=a.find('[data-node="count"]'),a.addClass("active"),a.data("status",1),n.text(this.formatNumber(e.data.total/1)))}},{key:"_defaultUndoSuccess",value:function(t){var e=t.res,a=t.$el,n=null;a.length&&(n=a.find('[data-node="count"]'),a.removeClass("active"),a.data("status",0),n.text(this.formatNumber(e.data.total/1)))}}]),e}(g.default);e.default=b},ioS7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.debounce=function(t,e,a){var n=void 0;return function(){function o(){n=null,a||t.apply(i,u)}var i=this,u=arguments,c=a&&!n;clearTimeout(n),n=setTimeout(o,e),c&&t.apply(i,u)}},e.throttle=function(t,e){var a=void 0,n=void 0,o=0;return function(){function i(){o=Date.now(),a=null,t.apply(u,c)}n=Date.now()-o,a&&clearTimeout(a);var u=this,c=arguments;n>e?i():a=setTimeout(i,e-n)}}},njmC:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a("Zrlr"),i=n(o),u=a("wxAW"),c=n(u),s=function(){function t(){(0,i.default)(this,t),this.cache={}}return(0,c.default)(t,[{key:"on",value:function(t,e){(this.cache[t]||(this.cache[t]=[])).push(e)}},{key:"once",value:function(t,e){function a(){this.off(t,a),e.apply(this,arguments)}this.on(t,a)}},{key:"off",value:function(t){this.cache[t]=null}},{key:"emit",value:function(t){var e=this,a=[].concat(Array.prototype.slice.call(arguments));a.shift();var n=this.cache[t];n&&n.length>0&&n.forEach(function(t){t.apply(e,a)})}}]),t}();e.default=s},pF4e:function(t,e,a){"use strict";(function(t){function e(t){return t&&t.__esModule?t:{default:t}}a("qS1O"),a("bXnB"),a("HY96");var n=a("O7yE"),o=e(n),i=a("gbOH"),u=e(i),c=a("W3xz"),s=e(c);new o.default,new u.default({afterDoSuccess:function(t){var e=t.$el,a=t.res.data.total;e.data("status",1),e.addClass("active"),e.parent().find('[data-node="count"]').text((0,s.default)(a))},afterUndoSuccess:function(t){var e=t.$el,a=t.res.data.total;e.removeClass("active"),e.data("status",0),e.parent().find('[data-node="count"]').text((0,s.default)(a))}}),t('[data-action="subscribe"]').on("mouseenter",function(){t(this).attr("class").indexOf("active")>0?t(this).addClass("acAdd").removeClass("c"):t(this).addClass("c").removeClass("acAdd")}).on("click",function(){t(this).removeClass("c acAdd")})}).call(e,a("7t+N"))},qS1O:function(t,e){},sit2:function(t,e,a){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a("mvHQ"),i=n(o),u=a("Zx67"),c=n(u),s=a("Zrlr"),l=n(s),r=a("wxAW"),f=n(r),d=a("zwoO"),h=n(d),v=a("Pf15"),p=n(v),y=a("9Y5R"),m=n(y),g=a("3o3C"),b=n(g),_=a("njmC"),S=n(_),k=a("W3xz"),w=n(k),O=a("pH+Z"),x=a("w87c"),D="?"+x.apiParams.inParams,F=function(){},M=function(t){(0,m.default)(t.res.message)},T={},j=function(e){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,a);var e=(0,h.default)(this,(a.__proto__||(0,c.default)(a)).call(this));return e.api=t.api+D,e.selector=t.selector,e.action=t.action,e.delegate=t.delegate||"body",e.beforeRequest=t.beforeRequest||F,e.afterRequest=t.afterRequest||F,e.afterDoSuccess=t.afterDoSuccess||null,e.afterUndoSuccess=t.afterUndoSuccess||null,e.afterDoFail=t.afterDoFail||M,e.afterUndoFail=t.afterUndoFail||M,e.formatNumber=w.default,e.localStorageKey="gmv_pc_action",e._bindEvent(),e._init(),e._checkBeforeLogin(),e}return(0,p.default)(a,e),(0,f.default)(a,[{key:"_defaultDoSuccess",value:function(){}},{key:"_defaultUndoSuccess",value:function(){}},{key:"_bindEvent",value:function(){var t=this;this.on("doSuccess",function(e){"function"==typeof t.afterDoSuccess?t.afterDoSuccess(e):t._defaultDoSuccess(e)}),this.on("doFail",function(e){t.afterDoFail(e)}),this.on("undoSuccess",function(e){"function"==typeof t.afterUndoSuccess?t.afterUndoSuccess(e):t._defaultUndoSuccess(e)}),this.on("undoFail",function(e){t.afterUndoFail(e)})}},{key:"_init",value:function(){function e(e){var o=t(this),u=o.data(n+"id"),c=o.data("status");switch(c){case"true":c=1;break;case"false":c=0;break;default:c^=0}var s=n+u;return 1!=T[s]&&(x.loginFlag?(T[s]=1,a.request(a.getReqData({id:u,status:c})),!1):(localStorage.setItem(a.localStorageKey,(0,i.default)({action:n,id:u,status:c})),(0,O.login)(),!1))}var a=this,n=this.action;t(this.delegate).on("click",this.selector,e)}},{key:"_checkBeforeLogin",value:function(){var t=this,e=localStorage.getItem(this.localStorageKey),a=null,n=null;x.loginFlag&&e&&(n=JSON.parse(e),n.action==this.action&&(a={id:n.id,status:n.status},t.request(t.getReqData(a)))),localStorage.removeItem(this.localStorageKey)}},{key:"getReqData",value:function(t){var e=1^t.status;return{id:t.id,actionType:e,formData:{id:t.id,type:e}}}},{key:"request",value:function(e){var a=this,n=a.action,o=e.id,u=e.actionType;if(!1===a.beforeRequest(e))return!1;b.default.post(this.api,{domain:"domain-user",data:e.formData,success:function(e){var c="[data-"+a.action+'id="'+o+'"]',s=t(c),l=e.code,r={id:o,res:e,$el:s,$delegate:t(a.delegate)},f=["undoSuccess","doSuccess"],d=["undoFail","doFail"],h=[200,400008];if(200001==l)return localStorage.setItem(a.localStorageKey,(0,i.default)({action:n,id:o,status:1^u})),location.href=x.page.loginUrl,!1;-1!=h.indexOf(l)?a.emit(f[u],r):a.emit(d[u],r)},error:function(){(0,m.default)("网络请求失败，请稍后重试")},complete:function(){delete T[n+o],a.afterRequest(e)}})}}]),a}(S.default);e.default=j}).call(e,a("7t+N"))},woOf:function(t,e,a){t.exports={default:a("Eif7"),__esModule:!0}},xVc6:function(t,e,a){"use strict";var n=a("pEGt"),o=a("THEY"),i=a("bSeU"),u=a("wXdB"),c=a("wiaE"),s=Object.assign;t.exports=!s||a("zyKz")(function(){var t={},e={},a=Symbol(),n="abcdefghijklmnopqrst";return t[a]=7,n.split("").forEach(function(t){e[t]=t}),7!=s({},t)[a]||Object.keys(s({},e)).join("")!=n})?function(t,e){for(var a=u(t),s=arguments.length,l=1,r=o.f,f=i.f;s>l;)for(var d,h=c(arguments[l++]),v=r?n(h).concat(r(h)):n(h),p=v.length,y=0;p>y;)f.call(h,d=v[y++])&&(a[d]=h[d]);return a}:s}},["pF4e"]);