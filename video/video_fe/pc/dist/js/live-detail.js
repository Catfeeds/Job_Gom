webpackJsonp([0],{"+SHZ":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zrlr"),o=n(i),r=a("wxAW"),s=n(r),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,o.default)(this,e),!t.videoId)throw new Error("videoId is required");this.videoId=t.videoId,this.videoContainer=t.videoContainer||"mxplayer",this.autoplay=t.autoplay,this.danmaku=t.danmaku,this.env=t.env||"dev",this.type=t.type||"live",this.danmakuStatus=t.danmakuStatus,this.initPlayer()}return(0,s.default)(e,[{key:"initPlayer",value:function(){(this.player=new MeixinPlayer).init(this.videoId,this.videoContainer,{autoplay:this.autoplay,danmaku:this.danmaku,env:this.env,type:this.type,danmakuStatus:this.danmakuStatus})}},{key:"on",value:function(e,t){this.player.on(e,t)}},{key:"send",value:function(e){this.player.sendDanmaku(e)}}]),e}();t.default=l},"+dNZ":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=n(i),r=a("Zx67"),s=n(r),l=a("Zrlr"),u=n(l),d=a("wxAW"),c=n(d),p=a("zwoO"),f=n(p),h=a("Pf15"),m=n(h),v=a("9Y5R"),y=(n(v),a("sit2")),g=n(y),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(this,t);var a={api:"/v1/praise/set",selector:"[data-action=like]",action:"like"};return(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,(0,o.default)(a,e)))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"getReqData",value:function(e){var t=1^e.status;return{id:e.id,actionType:t,formData:{video_id:e.id,type:t}}}},{key:"_defaultDoSuccess",value:function(e){var t=e.res,a=e.$el,n=null;a.length&&(n=a.find('[data-node="count"]'),a.addClass("active"),a.data("status",1),n.text(this.formatNumber(t.data.total/1)))}},{key:"_defaultUndoSuccess",value:function(e){var t=e.res,a=e.$el,n=null;a.length&&(n=a.find('[data-node="count"]'),a.removeClass("active"),a.data("status",0),n.text(this.formatNumber(t.data.total/1)))}}]),t}(g.default);t.default=_},"0Yat":function(e,t){},"2TA9":function(e,t,a){"use strict";var n=a("h/5q"),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=function(e,t){var a="";e=1e3*("string"==typeof e?parseInt(e):e);var n,o=new Date(e).getTime(),r=(new Date).getTime(),s=r-o,l=t||30;return s<6e4?a="刚刚发布":s>=6e4&s<36e5?(n=Math.floor(s/6e4),a=n+"分钟前"):s>=36e5&s<864e5?(n=Math.floor(s/36e5),a=n+"小时前"):s>=864e5&s<864e5*l?(n=Math.floor(s/864e5),a=n+"天前"):a=(0,i.default)(e,"yyyy-MM-dd"),a};e.exports=o},"2roW":function(e,t,a){!function(t,a){e.exports=a()}(0,function(){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){!function(){var t=function(e){var t,a;(e=e||document.querySelector(e))&&e.addEventListener("touchstart",function(n){t=n.touches[0].pageY,a=e.scrollTop,a<=0&&(e.scrollTop=1),a+e.offsetHeight>=e.scrollHeight&&(e.scrollTop=e.scrollHeight-e.offsetHeight-1)},!1)};"undefined"!=typeof window&&void 0===e?window.ScrollFix=t:e.exports=t}()},function(e,t,a){!function(t,a){e.exports=a()}(0,function(){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function(){function e(t){if(n(this,e),!t||t===window)return null;if(!(t instanceof HTMLElement))throw new Error("parameter 1 must be a HTMLElement instance!");this.win=t;var a=t.querySelector(".localScrollFix-fixDom");a?this.fixDom=a:this.createFixDom(),this.isArrived=!1,this.update()}return i(e,[{key:"createFixDom",value:function(){this.win.insertAdjacentHTML("beforeend",'<div class="localScrollFix-fixDom" style="margin: 0; padding: 0"></div>'),this.fixDom=this.win.querySelector(".localScrollFix-fixDom")}},{key:"removeFixDom",value:function(){this.win.removeChild(this.fixDom),this.fixDom=null}},{key:"arrived",value:function(){this.isArrived=!0,this.removeFixDom()}},{key:"update",value:function(){if(!this.isArrived){var e=this.computerFixDomPaddingTop();e>=0?this.fixDom.style.paddingTop=e+3+"px":this.arrived()}}},{key:"computerFixDomPaddingTop",value:function(){var e=this.fixDom,t=this.win,a=e.getBoundingClientRect().top,n=t.getBoundingClientRect().bottom,i=window.getComputedStyle(t,null),o=i.paddingBottom,r=i.borderBottomWidth;return n-parseFloat(o)-parseFloat(r)-a}}]),e}();t.default=o,window.LocalScrollFix=o}])})},function(e,t,a){"use strict";var n=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])}return a};t.a=n},function(e,t,a){"use strict";t.a=function(e,t,a){var n,i,o,r,s=0;a||(a={});var l=function(){s=!1===a.leading?0:Date.now(),n=null,r=e.apply(i,o),n||(i=o=null)},u=function(){var u=Date.now();s||!1!==a.leading||(s=u);var d=t-(u-s);return i=this,o=arguments,d<=0||d>t?(n&&(clearTimeout(n),n=null),s=u,r=e.apply(i,o),n||(i=o=null)):n||!1===a.trailing||(n=setTimeout(l,d)),r};return u.cancel=function(){clearTimeout(n),s=0,n=i=o=null},u}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){throw new Error("2 arguments required, but only "+e+" present.")}function o(){return/iphone/i.test(window.navigator.userAgent)}function r(e){return'<div style="text-align: center;font-size: 14px;line-height: 50px;">'+e+"</div>"}Object.defineProperty(t,"__esModule",{value:!0});var s=a(3),l=a(2),u=a(1),d=a.n(u),c=a(0),p=a.n(c),f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i(0),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i(1),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n(this,e),!(t instanceof HTMLElement))throw new Error("parameter 1 must be a HTMLElement instance!");if("function"!=typeof o)throw new Error("parameter 2 must be a function!");this.container=t,this.loadMoreFn=o,this._options=a.i(l.a)({},e.defaults,r),this.isLock=this._options.isInitLock,this.hasMore=!0,this.win=this._options.window,this.windowHeight=window.innerHeight,this.createBottomDom(),this.fixLocalScroll(),this.scrollListener=this.scrollListener.bind(this),this.resizeListener=this.resizeListener.bind(this),this.scrollListenerWrapThrottle=a.i(s.a)(this.scrollListener,50),this.resizeListenerWrapThrottle=a.i(s.a)(this.resizeListener,50),this.attachScrollListener()}return f(e,[{key:"fixLocalScroll",value:function(){this.win!==window&&o()?(this._options.useLocalScrollFix&&(this.localScrollFix=new d.a(this.win)),this._options.useScrollFix&&new p.a(this.win)):(this._options.useLocalScrollFix=!1,this._options.useScrollFix=!1)}},{key:"createBottomDom",value:function(){this.container.insertAdjacentHTML("beforeend",'<div class="scrollload-bottom">'+this._options.loadingHtml+"</div>"),this.bottomDom=this.container.querySelector(".scrollload-bottom")}},{key:"showNoDataDom",value:function(){this.bottomDom.innerHTML=this._options.noDataHtml}},{key:"showLoadingDom",value:function(){this.bottomDom.innerHTML=this._options.loadingHtml}},{key:"showExceptionDom",value:function(){this.bottomDom.innerHTML=this._options.exceptionHtml}},{key:"scrollListener",value:function(){this.isLock||this.isBottom()&&(this.isLock=!0,this.loadMoreFn.call(this,this))}},{key:"isBottom",value:function(){var e=this.win,t=this.bottomDom,a=this.windowHeight,n=t.getBoundingClientRect().top,i=void 0;if(e===window)i=a;else{var o=e.getBoundingClientRect(),r=o.height,s=o.top;i=r,n-=s}return n-i<=this._options.threshold}},{key:"resizeListener",value:function(){this.win===window&&(this.windowHeight=window.innerHeight),this.scrollListener()}},{key:"attachScrollListener",value:function(){this.win.addEventListener("scroll",this.scrollListenerWrapThrottle),this.win.addEventListener("resize",this.resizeListenerWrapThrottle),this.scrollListener()}},{key:"detachScrollListener",value:function(){this.win.removeEventListener("scroll",this.scrollListenerWrapThrottle),this.win.removeEventListener("resize",this.resizeListenerWrapThrottle)}},{key:"lock",value:function(){this.isLock=!0}},{key:"unLock",value:function(){this.isLock=!1,this.hasMore&&this.scrollListener(),this._options.useLocalScrollFix&&this.localScrollFix.update()}},{key:"noData",value:function(){this.lock(),this.hasMore=!1,this.showNoDataDom(),this._options.useLocalScrollFix&&!this.localScrollFix.isArrived&&this.localScrollFix.arrived(),this.detachScrollListener()}},{key:"refreshData",value:function(){this.container.querySelector(".scrollload-bottom")?this.showLoadingDom():this.createBottomDom(),this.isLock=!1,this.hasMore=!0,this._options.useLocalScrollFix&&(this.localScrollFix=new d.a(this.win)),this.attachScrollListener()}},{key:"throwException",value:function(){this.showExceptionDom()}},{key:"solveException",value:function(){this.hasMore?(this.showLoadingDom(),this.unLock()):this.showNoDataDom()}},{key:"setOptions",value:function(e){a.i(l.a)(this._options,e)}},{key:"getOptions",value:function(){return this._options}}],[{key:"setGlobalOptions",value:function(t){a.i(l.a)(e.defaults,t)}}]),e}();h.defaults={isInitLock:!1,threshold:10,window:window,useLocalScrollFix:!1,useScrollFix:!1,loadingHtml:r("加载中..."),noDataHtml:r("没有更多数据了"),exceptionHtml:r("出现异常")},t.default=h,window.Scrollload=h}])})},"3qKK":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["(┬＿┬)","(￣へ￣)","╮(￣▽￣)╭","ʅ(´◔౪◔)ʃ","( ^ω^)","(｀・ω・´)","Σ( ￣□￣||)","(ﾟДﾟ≡ﾟдﾟ)!?","(⊙ˍ⊙)","(　ﾟ 3ﾟ)","(￣(●●)￣)","(:3[▓▓▓▓▓▓]","(•̀ᴗ•́)و ̑̑ ","( >﹏<。)","( =•ω•= )m","( ╯-_-)╯┴—┴","←◡←","(ง •̀_•́)ง","(=ﾟωﾟ)=","((٩(//̀Д/́/)۶))"]},"5xRM":function(e,t,a){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=a("Zrlr"),r=n(o),s=a("wxAW"),l=n(s),u=a("nXqg"),d=n(u),c=a("kl2M"),p=n(c),f=function(){function t(){(0,r.default)(this,t),this.container=e("[data-node=msgList]"),this.$box=this.container.parent("div")}return(0,l.default)(t,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this.adaptationData(e);var t=this.renderItem(e);this.container.append(t);var a=this.$box.height(),n=this.container.height();n>a&&this.$box.scrollTop(n-a)}},{key:"adaptationData",value:function(e){var t=e.content.content,a=/\[([^\[]+)\]/g,n=(0,p.default)(t);return n=n.replace(a,function(e){return void 0===d.default[e]?e:'<img src="'+d.default[e]+'" alt="'+e+'" />'}),{name:e.content.sender.nickname,content:n}}},{key:"renderItem",value:function(e){return'<li>\n\t\t\t<a href="javascript:;">'+e.name+"：</a>\n\t\t\t<span>"+e.content+"</span>\n\t\t</li>"}}]),t}();t.default=function(){return i||(i=new f),i}}).call(t,a("7t+N"))},"8qq7":function(e,t,a){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,o=a("Zx67"),r=n(o),s=a("Zrlr"),l=n(s),u=a("wxAW"),d=n(u),c=a("zwoO"),p=n(c),f=a("Pf15"),h=n(f),m=a("3o3C"),v=(n(m),a("njmC")),y=n(v),g=a("9Y5R"),_=n(g),k=a("9nPD"),w=n(k),b=a("nXqg"),x=n(b),S=a("w87c"),E=a("pH+Z"),M=function(t){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.default)(this,a);var n=(0,p.default)(this,(a.__proto__||(0,r.default)(a)).call(this));return n.$playerbox=e("[data-node=playerbox]"),n.$danmubox=n.$playerbox.find("[data-node=danmubox]"),n.$danmuform=n.$playerbox.find("[data-node=danmuform]"),n.$toggle=n.$playerbox.find("[data-node=toggle]"),n.$player=e("#mxplayer"),n.$input=e("[data-node=danmuContent]"),n.$submit=e("[data-action=submit]"),n.$textnum=e("[data-node=textnum]"),n.$curnum=n.$textnum.find("span").eq(0),n.textnum=0,n.maxnum=40,n.opts=t,n.disabled=!1,n}return(0,h.default)(a,t),(0,d.default)(a,[{key:"destroy",value:function(){this.disabled=!0,this.$danmuform.remove(),this.$danmubox.remove(),this.$toggle.remove(),this.$player.width("1200px"),this.$player.height("562px")}},{key:"init",value:function(e){var t=this;if(this.disabled)return!1;var a=this.$input,n=(0,w.default)(),i=!1;n.on("selected",function(e){t.addEmoticons(e)}),this.on("send",function(t){e.send(t)}),a.on({keyup:function(e){return 13===e.which&&t.send(e.currentTarget.value),!1},compositionstart:function(){i=!0},compositionend:function(){i=!1,a.trigger("input")},input:function(){i||t.checkTextLength()}}),this.$submit.on("click",function(){t.send(a.val())}),this.inited()}},{key:"inited",value:function(){this.$input.prop("readonly",!1);var e=window.localStorage.getItem("beforeMsg");null!==e&&0!=$CONFIG.userId&&this.$input.val(e).trigger("input"),window.localStorage.removeItem("beforeMsg")}},{key:"checkTextLength",value:function(){function e(e){for(var t="",n=0,i=0,o=e.length,r=0;r<o;r++){if((i=e.charCodeAt(r))>=0&&i<128){if(s+n>=a)break;n+=.5}else{if(Math.ceil(s+n)>=a)break;n+=1}t+=e[r]}return{str:t,len:n}}var t=this.$input.val().trim(),a=this.maxnum,n=/\[[^\[]+\]/g,i=t.split(n)||[],o=t.match(n)||[],r="",s=0;i.forEach(function(t){var n=o.shift(),i=e(t);s+=i.len,r+=i.str,n&&s<=a-1&&(void 0!==x.default[n]?(s+=1,r+=n):(i=e(n),s+=i.len,r+=i.str))});var l=Math.ceil(s);l>=a&&this.$input.val(r),this.textnum=l,this.changeTextNumStatus()}},{key:"changeTextNumStatus",value:function(){this.textnum>0?this.$curnum.css("color","#FFF"):this.$curnum.css("color",""),this.$curnum.text(this.textnum)}},{key:"addEmoticons",value:function(e){var t=this.maxnum,a="emoji"===e.type?1:function(e){for(var t=(e.length,0),a=0,n=0;n<t;n++)a=e.charCodeAt(n),t+=a>=0&&a<128?.5:1;return Math.ceil(t)}(e.name);if(parseInt(this.textnum)+a>t)return!1;!function(e,t){if(e.focus(),document.selection)document.selection.createRange().text=t;else if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd){var a=e.selectionStart,n=e.selectionEnd,i=a,o=e.value;e.value=o.substring(0,a)+t+o.substring(n,o.length),i+=t.length,e.selectionStart=e.selectionEnd=i}else e.value+=t}(this.$input[0],e.name),this.$input.trigger("input")}},{key:"adaptationData",value:function(e){var t=e.trim(),a=/\[[^\[]+\]/g,n=t.split(a)||[],i=t.match(a)||[],o=[];return n.forEach(function(e){var t=i.shift();""!==e&&o.push({font:e}),void 0!==t&&(void 0!==x.default[t]?o.push({image:t}):o.push({font:t}))}),o}},{key:"saveMsgBeforLogin",value:function(e){""!==e.trim()&&window.localStorage.setItem("beforeMsg",e)}},{key:"send",value:function(t){if(S.loginFlag){if(!e.trim(t)){var a=this.$submit.offset();return void(0,_.default)({msg:"发送内容不能为空哦",x:a.left-100,y:a.top+50})}var n={id:S.page.userId,name:S.page.nickName};this.emit("send",this.buildData(t,n)),this.$input.val(""),this.textnum=0,this.changeTextNumStatus()}else this.saveMsgBeforLogin(t),(0,E.login)()}},{key:"buildData",value:function(e,t){var a=this.opts,n=t.id,i="#ffffff",o="#49abd1";return a.host_id===n&&(i=o="#e90034"),{content:e,room_id:a.videoId,style:{fontSize:"22px",color:i},sender:{user_id:n,nickname:t.name,style:{fontSize:"22px",color:o}},receiver:{user_id:"",nickname:"",style:{fontSize:"22px",color:"#ffffff"}}}}}]),a}(y.default);t.default=function(e){return i||(i=new M(e)),i}}).call(t,a("7t+N"))},"9Y5R":function(e,t,a){"use strict";(function(e){function n(t,a,n){var r=function(){},s=!0,l={msg:"",x:null,y:null,delay:2e3,cb:r};if("string"==typeof t?(l.msg=t,l.delay="number"==typeof a?a||2e3:2e3,l.cb="function"==typeof n?n:r):e.extend(l,t),null!==l.x&&null!==l.y&&(s=!1),""===l.msg.trim())return!1;i?(o&&(clearTimeout(o),o=null,i.hide()),i.html(l.msg).show()):(i=e("<div/>").html(l.msg).addClass("pub-toast"),e("body").append(i));var u=i.outerWidth(),d=i.outerHeight(),c={position:"absolute",left:l.x,top:l.y},p={position:"fixed",left:"50%",top:"50%",marginLeft:-u/2,marginTop:-d/2},f=s?p:c;i.css(f),clearTimeout(o),o=setTimeout(function(){i.hide().html(""),l.cb(),o=null},l.delay)}Object.defineProperty(t,"__esModule",{value:!0}),a("G3eO");var i=null,o=null;t.default=n}).call(t,a("7t+N"))},"9nPD":function(e,t,a){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zx67"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),u=n(l),d=a("zwoO"),c=n(d),p=a("Pf15"),f=n(p),h=a("njmC"),m=n(h),v=a("nXqg"),y=n(v),g=a("3qKK"),_=n(g),k=function(t){function a(){(0,s.default)(this,a);var t=(0,c.default)(this,(a.__proto__||(0,o.default)(a)).call(this));return t.data={emoji:y.default,yantext:_.default},t.$pop=null,t.curType=null,t.$danmuForm=e("[data-node=danmuform]"),t.$emoticons=t.$danmuForm.find("[data-node=danmuemoticons]"),t.$input=t.$danmuForm.find("[data-node=danmuContent]"),t.initPop(),t}return(0,f.default)(a,t),(0,u.default)(a,[{key:"initPop",value:function(){var t=this;this.$emoticons.on("click","a",function(){var a=e(this).data("type");return t.$pop||t.createPopDom(),t.togglePop(a),t.emit("emojiClick",null),!1})}},{key:"createPopDom",value:function(){this.$pop=e("<div/>").hide(),this.$danmuForm.append(this.$pop),this.bindEvent()}},{key:"togglePop",value:function(e){if(this.curType===e)return this.hidePop(),!1;this.curType=e;var t={emoji:"open-emoji",yantext:"open-emoji emoji-text"},a='<em class="icon-san"></em>'+this["_getHTML_"+e]();this.$pop.hide().removeClass().addClass(t[e]).html(a).show()}},{key:"bindEvent",value:function(t){var a=this,n=this.$pop;n.on("click","a",function(){var t=e(this).data("t"),n=e(this).data("info"),i={emoji:a.data[t][n],yantext:n},o={type:t,name:n,src:i[t]};return a.emit("selected",o),a.hidePop(),a.$input.focus(),!1}),n.on("click",function(){return!1}),e(document).on("click",function(){a.hidePop()})}},{key:"hidePop",value:function(){this.$pop.hide(),this.curType=null}},{key:"_getHTML_emoji",value:function(){var e=this.data.emoji,t="";for(var a in e)t+='<a data-t="emoji" data-info="'+a+'" title="'+a+'" href="javascript:;"><img alt="'+a+'" src="'+e[a]+'"/></a>';return t}},{key:"_getHTML_yantext",value:function(){var e="";return this.data.yantext.forEach(function(t){e+='<a data-t="yantext" data-info="'+t+'" href="javascript:;">'+t+"</a>"}),e}}]),a}(m.default),w=void 0;t.default=function(){return w||(w=new k),w}}).call(t,a("7t+N"))},"9y4i":function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zrlr"),o=n(i),r=a("wxAW"),s=n(r);a("GM03");var l=function(){function e(t){(0,o.default)(this,e);var a={},n={id:"",titleHtml:'<div class="share-title">分享到：</div>',targets:{qq:a,wx:a,wb:a,qz:a},copyUrl:null},i=document.querySelector("meta[name=description]"),r=i?i.content:"";if(this.page={title:document.title,description:r,url:window.location.href},this.config={qq:{name:"QQ",icon:"icon-39",action:"shareTo_qq"},wx:{name:"微信",icon:"icon-38",action:"shareTo_wx"},wb:{name:"新浪微博",icon:"icon-40",action:"shareTo_wb"},qz:{name:"QQ空间",icon:"icon-41",action:"shareTo_qz"}},void 0!==t){var s=document.getElementById(t.id);if(s){for(var l in t)n[l]=t[l];this.titleHtml=n.titleHtml,this.$dom=s,this.targets={};for(var u in n.targets)void 0!==this.config[u]&&(this.targets[u]=n.targets[u]);this.copyUrl=n.copyUrl,this._default()}}}return(0,s.default)(e,[{key:"_default",value:function(){var e=this.titleHtml;for(var t in this.targets)e+='<a href="javascript:;" title="'+this.config[t].name+'" class="'+t+'"><em class="'+this.config[t].icon+'"></em></a>';null!==this.copyUrl&&(e+=this._getShowMoreHTML(this.copyUrl));var a=this.$dom.className;this.$dom.className=a+" Pub-Share",this.$dom.innerHTML=e,this._bindEvent()}},{key:"_bindEvent",value:function(){var e=this;this.$dom.addEventListener("click",function(t){var a=t.target.parentNode,n=a.className.trim();"A"===a.tagName.toUpperCase()&&e["shareTo_"+n](e.targets[n])}),this.$dom.addEventListener("click",function(e){function t(e){clearTimeout(n.timer),n.innerHTML=e,n.style.cssText="display:block;top:"+(a.offsetTop-4)+"px",n.timer=setTimeout(function(){n.style.cssText="display:none",n.timer=null},1500)}var a=e.target,n=e.currentTarget.querySelector(".shareCopyTips"),i=a.parentNode.querySelector("input");"BUTTON"===a.tagName.toUpperCase()&&(i.focus(),i.setSelectionRange(0,i.value.length),document.execCommand("copy",!0)?(i.blur(),t("复制成功")):t("右键或Ctrl/Command+C复制"))})}},{key:"_getShowMoreHTML",value:function(e){var t='\n\t\t\t<div class="smore">\n\t\t\t\t<span><em class="icon-12"></em></span>\n\t\t\t\t<div class="smorebox">\n\t\t\t\t\t<em class="uparrow">▲</em>\n\t\t\t\t\t<ul class="copyurl">',a=!0;for(var n in e)a=!1,t+='<li>\n\t\t\t\t\t\t<input readonly="true" class="input" type="text" value="'+e[n]+'">\n\t\t\t\t\t\t<button class="copybtn">复制'+n+"地址</button>\n\t\t\t\t\t</li>";return a&&(t+='<li class="label">&nbsp;没有数据!</li>'),t+='\t</ul>\n\t\t\t\t\t<div class="shareCopyTips">复制成功</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'}},{key:"_getConfig",value:function(e){var t={title:this.page.title,url:this.page.url,site:"",desc:this.page.description,summary:this.page.description,pics:""};for(var a in e)t[a]=e[a];return t}},{key:"_getUrlEncodeStrByType",value:function(e,t){for(var a,n="",i=e.length,o={},r=0;r<i;r++)a=e[r],o[a]="pic"===a?t.pics:void 0===t[a]?"":t[a];for(var s in o)n+="title"===s||"desc"===s||"summary"===s?"&"+s+"="+encodeURIComponent(o[s]):"&"+s+"="+o[s];return n.substr(1)}},{key:"shareTo_qq",value:function(e){var t=this._getConfig(e),a=["title","url","site","desc","summary","pics"],n=this._getUrlEncodeStrByType(a,t),i="http://connect.qq.com/widget/shareqq/index.html?"+n;window.open(i)}},{key:"shareTo_wx",value:function(e){var t=this._getConfig(e),a=$CONFIG["domain-user"]+"/v1/qrcode/index?url="+t.url;!function(){var e=document.createElement("div"),t='<div class="wx-main"><div class="wx-code"><img src="'+a+'" alt="分享到微信" /></div><p>打开微信扫一扫，即可分享</p><a href="javascript:;" title="点击关闭" class="wx-close icon-13"></a></div>';e.className="shareWeixinPop",e.innerHTML=t,document.body.appendChild(e),e.onclick=function(t){"A"===t.target.tagName.toUpperCase()&&(document.body.removeChild(e),e.onclick=null,e=null)}}()}},{key:"shareTo_wb",value:function(e){var t=this._getConfig(e),a=["title","url","site","desc","summary","pic"],n=this._getUrlEncodeStrByType(a,t),i="http://service.weibo.com/share/share.php?"+n;window.open(i)}},{key:"shareTo_qz",value:function(e){var t=this._getConfig(e),a=["title","url","site","desc","summary","pics"],n=this._getUrlEncodeStrByType(a,t),i="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?"+n;window.open(i)}}]),e}();t.default=l},EL7C:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("GY9F"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){var t=/\[([^\[]+)\]/g;return e=e.replace(t,function(e){return void 0===i.default[e]?e:'<img src="'+i.default[e]+'" alt="'+e+'" />'})}},Eif7:function(e,t,a){a("JyN8"),e.exports=a("iANj").Object.assign},FD4M:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=n(i),r=a("Zx67"),s=n(r),l=a("Zrlr"),u=n(l),d=a("wxAW"),c=n(d),p=a("zwoO"),f=n(p),h=a("Pf15"),m=n(h),v=a("9Y5R"),y=n(v),g=a("sit2"),_=n(g),k=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(this,t);var a={api:"/v1/collect/set",selector:"[data-action=collect]",action:"collect"};return(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,(0,o.default)(a,e)))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"getReqData",value:function(e){var t=1^e.status;return{id:e.id,actionType:t,formData:{video_id:e.id,type:t}}}},{key:"_defaultDoSuccess",value:function(e){var t=e.res,a=e.$el,n=null;a.length&&(n=a.find('[data-node="count"]'),a.addClass("active"),a.data("status",1),n.text(this.formatNumber(t.data.total/1))),(0,y.default)("收藏成功")}},{key:"_defaultUndoSuccess",value:function(e){var t=e.res,a=e.$el,n=null;a.length&&(n=a.find('[data-node="count"]'),a.removeClass("active"),a.data("status",0),n.text(this.formatNumber(t.data.total/1)))}}]),t}(_.default);t.default=k},G3eO:function(e,t){},GM03:function(e,t){},GY9F:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=$CONFIG.jspath,i={"[呲牙]":"/ciya.png","[大笑]":"/daxiao.png","[微笑]":"/weixiao.png","[亲亲]":"/qinqin.png","[色]":"/se.png","[流泪]":"/liulei.png","[害羞]":"/haixiu.png","[冷汗]":"/lenghan.png","[抓狂]":"/zhuakuang.png","[鼓掌]":"/guzhang.png","[大哭]":"/daku.png","[尴尬]":"/ganga.png","[生气]":"/shengqi.png","[调皮]":"/tiaopi.png","[惊讶]":"/jingya.png","[难过]":"/nanguo.png","[睡觉]":"/shuijiao.png","[不屑]":"/buxie.png","[发呆]":"/fadai.png","[装酷]":"/zhuangku.png","[晕]":"/yun.png","[困]":"/kun.png","[咒骂]":"/zhouma.png","[白眼]":"/baiyan.png","[快哭了]":"/kuaikule.png","[鄙视]":"/bishi.png","[饿]":"/e.png","[抠鼻]":"/koubi.png","[石化]":"/shihua.png","[泪眼]":"/leiyan.png","[撇嘴]":"/piezui.png","[疑问]":"/yiwen.png"};for(var o in i)i[o]=n+"/m/vpc/dist/imgs/emoji"+i[o];t.default=i},HY96:function(e,t,a){"use strict";a("QtMn")},JyN8:function(e,t,a){var n=a("Wdy1");n(n.S+n.F,"Object",{assign:a("xVc6")})},O7yE:function(e,t,a){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zrlr"),o=n(i),r=a("wxAW"),s=n(r),l=a("ioS7"),u=function(){function t(a){var n=this;(0,o.default)(this,t),this.options=a||{},this.minHeight=this.options.minHeight||window.screen.height/2;e("body").append('<div class="back-top" title="返回顶部" style="display: block;opacity: 0;" id="back-top"><em class="icon-19"></em></div>'),e("#back-top").on("click",function(){n.scrollToTop(500)}),setTimeout(function(){e("#back-top").css({opacity:1})},0);var i=(0,l.throttle)(this.controlButton.bind(this),100);e(window).on("scroll",i),e(window).on("load",i)}return(0,s.default)(t,[{key:"controlButton",value:function(){e(window).scrollTop()>this.minHeight?e("#back-top").show():e("#back-top").hide()}},{key:"scrollToTop",value:function(e){var t=window.pageYOffset,a=Math.PI/Math.floor(e/15),n=t/2,i=0,o=void 0,r=setInterval(function(){0!=window.pageYOffset?(i+=1,o=n-n*Math.cos(i*a),window.scrollTo(0,t-o)):clearInterval(r)},15)}}]),t}();t.default=u}).call(t,a("7t+N"))},QtMn:function(e,t){},SiUz:function(e,t,a){"use strict";(function(t){function a(){this.destroyed=!1,this.__popup=t("<div />").css({display:"none",position:"absolute",outline:0}).attr("tabindex","-1").html(this.innerHTML).appendTo("body"),this.__backdrop=this.__mask=t("<div />").css({opacity:.7,background:"#000"}),this.node=this.__popup[0],this.backdrop=this.__backdrop[0],n++}/*!
 * PopupJS
 * Date: 2014-11-09
 * https://github.com/aui/popupjs
 * (c) 2009-2014 TangBin, http://www.planeArt.cn
 *
 * This is licensed under the GNU LGPL, version 2.1 or later.
 * For details, see: http://www.gnu.org/licenses/lgpl-2.1.html
 */
var n=0,i=!("minWidth"in t("html")[0].style),o=!i;t.extend(a.prototype,{node:null,backdrop:null,fixed:!1,destroyed:!0,open:!1,returnValue:"",autofocus:!0,align:"bottom left",innerHTML:"",className:"ui-popup",show:function(e){if(this.destroyed)return this;var n=this.__popup,r=this.__backdrop;if(this.__activeElement=this.__getActive(),this.open=!0,this.follow=e||this.follow,!this.__ready){if(n.addClass(this.className).attr("role",this.modal?"alertdialog":"dialog").css("position",this.fixed?"fixed":"absolute"),i||t(window).on("resize",t.proxy(this.reset,this)),this.modal){var s={position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden",userSelect:"none",zIndex:this.zIndex||a.zIndex};n.addClass(this.className+"-modal"),o||t.extend(s,{position:"absolute",width:t(window).width()+"px",height:t(document).height()+"px"}),r.css(s).attr({tabindex:"0"}).on("focus",t.proxy(this.focus,this)),this.__mask=r.clone(!0).attr("style","").insertAfter(n),r.addClass(this.className+"-backdrop").insertBefore(n),this.__ready=!0}n.html()||n.html(this.innerHTML)}return n.addClass(this.className+"-show").show(),r.show(),this.reset().focus(),this.__dispatchEvent("show"),this},showModal:function(){return this.modal=!0,this.show.apply(this,arguments)},close:function(e){return!this.destroyed&&this.open&&(void 0!==e&&(this.returnValue=e),this.__popup.hide().removeClass(this.className+"-show"),this.__backdrop.hide(),this.open=!1,this.blur(),this.__dispatchEvent("close")),this},remove:function(){if(this.destroyed)return this;this.__dispatchEvent("beforeremove"),a.current===this&&(a.current=null),this.__popup.remove(),this.__backdrop.remove(),this.__mask.remove(),i||t(window).off("resize",this.reset),this.__dispatchEvent("remove");for(var e in this)delete this[e];return this},reset:function(){var e=this.follow;return e?this.__follow(e):this.__center(),this.__dispatchEvent("reset"),this},focus:function(){var e=this.node,n=this.__popup,i=a.current,o=this.zIndex=a.zIndex++;if(i&&i!==this&&i.blur(!1),!t.contains(e,this.__getActive())){var r=n.find("[autofocus]")[0];!this._autofocus&&r?this._autofocus=!0:r=e,this.__focus(r)}return n.css("zIndex",o),a.current=this,n.addClass(this.className+"-focus"),this.__dispatchEvent("focus"),this},blur:function(){var e=this.__activeElement;return!1!==arguments[0]&&this.__focus(e),this._autofocus=!1,this.__popup.removeClass(this.className+"-focus"),this.__dispatchEvent("blur"),this},addEventListener:function(e,t){return this.__getEventListener(e).push(t),this},removeEventListener:function(e,t){for(var a=this.__getEventListener(e),n=0;n<a.length;n++)t===a[n]&&a.splice(n--,1);return this},__getEventListener:function(e){var t=this.__listener;return t||(t=this.__listener={}),t[e]||(t[e]=[]),t[e]},__dispatchEvent:function(e){var t=this.__getEventListener(e);this["on"+e]&&this["on"+e]();for(var a=0;a<t.length;a++)t[a].call(this)},__focus:function(e){try{this.autofocus&&!/^iframe$/i.test(e.nodeName)&&e.focus()}catch(e){}},__getActive:function(){try{var e=document.activeElement,t=e.contentDocument;return t&&t.activeElement||e}catch(e){}},__center:function(){var e=this.__popup,a=t(window),n=t(document),i=this.fixed,o=i?0:n.scrollLeft(),r=i?0:n.scrollTop(),s=a.width(),l=a.height(),u=e.width(),d=e.height(),c=(s-u)/2+o,p=382*(l-d)/1e3+r,f=e[0].style;f.left=Math.max(parseInt(c),o)+"px",f.top=Math.max(parseInt(p),r)+"px"},__follow:function(e){var a=e.parentNode&&t(e),n=this.__popup;if(this.__followSkin&&n.removeClass(this.__followSkin),a){var i=a.offset();if(i.left*i.top<0)return this.__center()}var o=this,r=this.fixed,s=t(window),l=t(document),u=s.width(),d=s.height(),c=l.scrollLeft(),p=l.scrollTop(),f=n.width(),h=n.height(),m=a?a.outerWidth():0,v=a?a.outerHeight():0,y=this.__offset(e),g=y.left,_=y.top,k=r?g-c:g,w=r?_-p:_,b=r?0:c,x=r?0:p,S=b+u-f,E=x+d-h,M={},C=this.align.split(" "),I=this.className+"-",O={top:"bottom",bottom:"top",left:"right",right:"left"},D={top:"top",bottom:"top",left:"left",right:"left"},N=[{top:w-h,bottom:w+v,left:k-f,right:k+m},{top:w,bottom:w-h+v,left:k,right:k-f+m}],T={left:k+m/2-f/2,top:w+v/2-h/2},L={left:[b,S],top:[x,E]};t.each(C,function(e,t){N[e][t]>L[D[t]][1]&&(t=C[e]=O[t]),N[e][t]<L[D[t]][0]&&(C[e]=O[t])}),C[1]||(D[C[1]]="left"===D[C[0]]?"top":"left",N[1][C[1]]=T[D[C[1]]]),I+=C.join("-")+" "+this.className+"-follow",o.__followSkin=I,a&&n.addClass(I),M[D[C[0]]]=parseInt(N[0][C[0]]),M[D[C[1]]]=parseInt(N[1][C[1]]),n.css(M)},__offset:function(e){var a=e.parentNode,n=a?t(e).offset():{left:e.pageX,top:e.pageY};e=a?e:e.target;var i=e.ownerDocument,o=i.defaultView||i.parentWindow;if(o==window)return n;var r=o.frameElement,s=t(i),l=s.scrollLeft(),u=s.scrollTop(),d=t(r).offset(),c=d.left,p=d.top;return{left:n.left+c-l,top:n.top+p-u}}}),a.zIndex=1024,a.current=null,e.exports=a}).call(t,a("7t+N"))},TfZd:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=a("pFYg"),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=a("SiUz"),r=a("UOsB"),s=0,l=new Date-0,u=!("minWidth"in e("html")[0].style),d="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),c=!u&&!d,p=function t(a,n,i){var o=a=a||{};"string"!=typeof a&&1!==a.nodeType||(a={content:a,fixed:!d}),a=e.extend(!0,{},t.defaults,a),a.original=o;var r=a.id=a.id||l+s,u=t.get(r);return u?u.focus():(c||(a.fixed=!1),a.quickClose&&(a.modal=!0,a.backdropOpacity=0),e.isArray(a.button)||(a.button=[]),void 0!==n&&(a.ok=n),a.ok&&a.button.push({id:"ok",value:a.okValue,callback:a.ok,cls:a.okCls,autofocus:!0}),void 0!==i&&(a.cancel=i),a.cancel&&a.button.push({id:"cancel",value:a.cancelValue,callback:a.cancel,cls:a.cancelCls,display:a.cancelDisplay}),t.list[r]=new t.create(a))},f=function(){};f.prototype=o.prototype;var h=p.prototype=new f;p.create=function(t){var a=this;e.extend(this,new o);var n=e(this.node).html(t.innerHTML),i=e(this.backdrop);return this.options=t,this._popup=n,e.each(t,function(e,t){"function"==typeof a[e]?a[e](t):a[e]=t}),t.zIndex&&(o.zIndex=t.zIndex),n.attr({"aria-labelledby":this._$("title").attr("id","title:"+this.id).attr("id"),"aria-describedby":this._$("content").attr("id","content:"+this.id).attr("id")}),this._$("close").css("display",!1===this.cancel?"none":"").attr("title",this.cancelValue).on("click",function(e){a._trigger("cancel"),e.preventDefault()}),this._$("dialog").addClass(this.skin),this._$("body").css("padding",this.padding),t.quickClose&&i.on("onmousedown"in document?"mousedown":"click",function(){return a._trigger("cancel"),!1}),this.addEventListener("show",function(){i.css({opacity:0,background:t.backdropBackground}).animate({opacity:t.backdropOpacity},150)}),this._esc=function(e){var t=e.target,n=t.nodeName,i=/^input|textarea$/i,r=o.current===a,s=e.keyCode;!r||i.test(n)&&"button"!==t.type||27===s&&a._trigger("cancel")},e(document).on("keydown",this._esc),this.addEventListener("remove",function(){e(document).off("keydown",this._esc),delete p.list[this.id]}),s++,p.oncreate(this),this},p.create.prototype=h,e.extend(h,{content:function(t){var a=this._$("content");return"object"===(void 0===t?"undefined":(0,i.default)(t))?(t=e(t),a.empty("").append(t.show()),this.addEventListener("beforeremove",function(){e("body").append(t.hide())})):a.html(t),this.reset()},title:function(e){return this._$("title").text(e),this._$("header")[e?"show":"hide"](),this},width:function(e){return this._$("content").css("width",e),this.reset()},height:function(e){return this._$("content").css("height",e),this.reset()},button:function(t){t=t||[];var a=this,n="",i=0;return this.callbacks={},"string"==typeof t?(n=t,i++):e.each(t,function(t,o){var r=o.id=o.id||o.value,s="",l=o.cls||"";a.callbacks[r]=o.callback,!1===o.display?s=' style="display:none"':i++,n+='<a href="javascript:;" i-id="'+r+'"'+s+(o.disabled?" disabled":"")+' class="'+l+'">'+o.value+"</a>",a._$("button").addClass(a.options.btnWrapCls).on("click","[i-id="+r+"]",function(t){e(this).attr("disabled")||a._trigger(r),t.preventDefault()})}),this._$("button").html(n),this._$("footer")[i?"show":"hide"](),this},statusbar:function(e){return this._$("statusbar").html(e)[e?"show":"hide"](),this},_$:function(e){return this._popup.find("[i="+e+"]")},_trigger:function(e){var t=this.callbacks[e];return"function"!=typeof t||!1!==t.call(this)?this.close().remove():this}}),p.oncreate=e.noop,p.getCurrent=function(){return o.current},p.get=function(e){return void 0===e?p.list:p.list[e]},p.list={},p.defaults=r,t.default=p}).call(t,a("7t+N"))},UOsB:function(e,t,a){"use strict";e.exports={backdropBackground:"#000",backdropOpacity:.7,content:'<span class="ui-dialog-loading">Loading..</span>',title:"",statusbar:"",button:null,ok:null,cancel:null,okValue:"确定",cancelValue:"取消",cancelDisplay:!0,width:"",height:"",padding:"",skin:"",quickClose:!1,cssUri:"../css/ui-dialog.css",innerHTML:'<div i="dialog" class="ui-dialog"><div class="ui-dialog-arrow-a"></div><div class="ui-dialog-arrow-b"></div><table class="ui-dialog-grid"><tr><td i="header" class="ui-dialog-header"><button i="close" class="ui-dialog-close icon icon-close" title="关闭">&#215;</button><div i="title" class="ui-dialog-title"></div></td></tr><tr><td i="body" class="ui-dialog-body"><div i="content" class="ui-dialog-content"></div></td></tr><tr><td i="footer" class="ui-dialog-footer"><div i="statusbar" class="ui-dialog-statusbar"></div><div i="button" class="ui-dialog-button"></div></td></tr></table></div>'}},W3xz:function(e,t,a){"use strict";function n(e){var t=parseInt(e);return t<1e4?t:t>=1e4&&t<1e8?parseFloat((t/1e4).toFixed(1))+"万":t>=1e8&&t<Number.MAX_VALUE?parseFloat((t/1e8).toFixed(1))+"亿":"无限"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},WHri:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zx67"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),u=n(l),d=a("zwoO"),c=n(d),p=a("Pf15"),f=n(p),h=a("U7vG"),m=n(h),v=a("pH+Z"),y=a("w87c"),g=a("GY9F"),_=n(g),k=a("3o3C"),w=n(k),b=a("9Y5R"),x=n(b),S=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.gotoLogin=function(){(0,v.login)()},a.onChange=function(e){var t=e.target.value;a.props.onChange(t),a.changeTextareaHeight()},a.$el=null,a.maxHeight=134,a.minHeight=0,a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.refs.textarea;e&&(this.$el=e,this.props.getRef(e),this.minHeight=e.clientHeight+2)}},{key:"changeTextareaHeight",value:function(){var e=this.$el,t=this.minHeight,a=this.maxHeight,n=0;if(t<a){e.style.height=t+"px";var i=e.scrollHeight;i>t&&(n=i+2>a?a:i,e.style.height=n+"px")}var o=e.scrollHeight+2>a?"scroll":"hidden";e.style.overflowY=o}},{key:"render",value:function(){return y.loginFlag?m.default.createElement("textarea",{ref:"textarea",onChange:this.onChange,className:"form-area",placeholder:this.props.placeholder,value:this.props.value}):m.default.createElement("div",{className:"form-area",onClick:this.gotoLogin},"我来说两句，请先",m.default.createElement("span",null,"登录"))}}]),t}(h.Component),E=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a._hideEmoji=function(){a.setState({show:!1})},a.wrapClick=function(e){e.nativeEvent.stopImmediatePropagation()},a.toggleEmoji=function(e){if(!y.loginFlag)return!1;a.setState({show:!a.state.show})},a.onSelect=function(e){var t=e.target.alt;a.props.onClick(t),a.setState({show:!a.state.show})},a.state={show:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this._hideEmoji,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this._hideEmoji,!1)}},{key:"render",value:function(){var e=[];for(var t in _.default)e.push(m.default.createElement("a",{key:t,href:"javascript:;"},m.default.createElement("img",{onClick:this.onSelect,title:t,alt:t,src:_.default[t]})));return m.default.createElement("div",{className:"fl",onClick:this.wrapClick},m.default.createElement("em",{onClick:this.toggleEmoji,className:y.loginFlag?"icon-45":"icon-45 disabled"}),m.default.createElement("div",{className:this.state.show?"emoji fadeInDown":"emoji"},e))}}]),t}(h.Component),M=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.selectEmoji=function(e){var t=a.textarea;if(t.focus(),document.selection){document.selection.createRange().text=e}else if("number"==typeof t.selectionStart&&"number"==typeof t.selectionEnd){var n=t.selectionStart,i=t.selectionEnd,o=n,r=t.value;t.value=r.substring(0,n)+e+r.substring(i,r.length),o+=e.length,t.selectionStart=t.selectionEnd=o}else t.value+=e;var s=a.state.textLen+e.length;a.setState({textVal:t.value,textLen:s},function(){a.refs.TextArea.changeTextareaHeight()})},a.onChange=function(e){var t=e.length;a.setState({textVal:e,textLen:t})},a.checkTextLength=function(){var e=a.state.textVal.trim(),t=/\[[^\[]+\]/g,n=e.split(t)||[],i=e.match(t)||[],o="",r=0;n.forEach(function(e){var t=i.shift();r+=e.length,o+=e,t&&(void 0!==_.default[t]?(r+=1,o+=t):(r+=t.length,o+=t))}),a.setState({textLen:r})},a.getRef=function(e){a.textarea=e},a.onSubmit=function(){if(!y.loginFlag)return(0,v.login)(),!1;if(a.submitting)return!1;var e=a,t=a.state.textVal.trim(),n=a.state.textLen;if(""===t)return(0,x.default)("评论不能为空"),!1;if(n>300)return(0,x.default)("最多输入300个字哦"),!1;var i=a.props.param.formData,o=a.props.param.fetchUrl+"?"+y.apiParams.inParams;i.content=a.state.textVal.trim(),a.setState({submitText:"发送中…"}),a.submitting=!0,w.default.post(o,{domain:"domain-user",data:i,success:function(t){return e.setState({submitText:"发送"}),-1!=["原评论已被作者删除","原回复已被作者删除"].indexOf(t.message)?(a.props.param.returnMsg.delete="delete",e.props.replyMsgError(t,a.props.param.returnMsg),!1):200!=t.code?((0,x.default)(t.message),!1):((0,x.default)("发送成功！"),t.data.to_user_nickname=e.props.param.to_user_nickname,t.data.reply_type=i.reply_type,t.data.submitTime=+new Date,void e.setState({textVal:"",textLen:0},function(){e.textarea.removeAttribute("style"),e.props.replyMsg(t.data)}))},error:function(t){e.setState({submitText:"发送"}),(0,x.default)("网络异常，请稍后再试")},complete:function(){e.submitting=!1}})},a.textarea=null,a.submitting=!1,a.state={param:a.props.param,textVal:"",textLen:0,submitText:"发送"},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.state.param.to_user_nickname,t=e?"回复 "+e+"：":"我来说两句...";return m.default.createElement("div",{className:"发送"===this.state.submitText?"comment-form":"comment-form send"},m.default.createElement("div",{className:"textarea-box"},m.default.createElement(S,{placeholder:t,ref:"TextArea",getRef:this.getRef,onChange:this.onChange,value:this.state.textVal})),m.default.createElement("div",{className:"form-btn clearfix"},m.default.createElement(E,{onClick:this.selectEmoji}),m.default.createElement("div",{className:"fr"},m.default.createElement("a",{href:"javascript:;",onClick:this.onSubmit,className:y.loginFlag?"btn":"btn disabled"},this.state.submitText)),m.default.createElement("div",{className:"fr"},m.default.createElement("span",{className:this.state.textLen>300?"red":""},this.state.textLen),m.default.createElement("span",{className:"gray"},"/300"))))}}]),t}(h.Component);t.default=M},XJKw:function(e,t){},ZhOs:function(e,t,a){a("rZAI"),e.exports=a("iANj").Object.keys},fJTB:function(e,t){},fZjL:function(e,t,a){e.exports={default:a("ZhOs"),__esModule:!0}},gbOH:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("woOf"),o=n(i),r=a("Zx67"),s=n(r),l=a("Zrlr"),u=n(l),d=a("wxAW"),c=n(d),p=a("zwoO"),f=n(p),h=a("Pf15"),m=n(h),v=a("9Y5R"),y=(n(v),a("sit2")),g=n(y),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(this,t);var a={api:"/v1/subscribe/set",selector:"[data-action=subscribe]",action:"subscribe"};return(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,(0,o.default)(a,e)))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"getReqData",value:function(e){var t=1^e.status;return{id:e.id,actionType:t,formData:{publish_id:e.id,type:t}}}},{key:"_defaultDoSuccess",value:function(e){var t=e.res,a=e.$el,n=null;a.length&&(n=a.find('[data-node="count"]'),a.addClass("active"),a.data("status",1),n.text(this.formatNumber(t.data.total/1)))}},{key:"_defaultUndoSuccess",value:function(e){var t=e.res,a=e.$el,n=null;a.length&&(n=a.find('[data-node="count"]'),a.removeClass("active"),a.data("status",0),n.text(this.formatNumber(t.data.total/1)))}}]),t}(g.default);t.default=_},"h/5q":function(e,t,a){"use strict";function n(e,t){var a=new Date(e),n={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},ioS7:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.debounce=function(e,t,a){var n=void 0;return function(){function i(){n=null,a||e.apply(o,r)}var o=this,r=arguments,s=a&&!n;clearTimeout(n),n=setTimeout(i,t),s&&e.apply(o,r)}},t.throttle=function(e,t){var a=void 0,n=void 0,i=0;return function(){function o(){i=Date.now(),a=null,e.apply(r,s)}n=Date.now()-i,a&&clearTimeout(a);var r=this,s=arguments;n>t?o():a=setTimeout(o,t-n)}}},jRyO:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e}function o(e){return e.offsetParent?e.offsetTop+o(e.offsetParent):e.offsetTop}Object.defineProperty(t,"__esModule",{value:!0});var r=a("fZjL"),s=n(r),l=a("Zx67"),u=n(l),d=a("Zrlr"),c=n(d),p=a("wxAW"),f=n(p),h=a("zwoO"),m=n(h),v=a("Pf15"),y=n(v),g=a("U7vG"),_=n(g),k=a("O27J"),w=n(k),b=a("seMl"),x=n(b),S=a("mhwC"),E=n(S),M=a("3o3C"),C=n(M),I=a("w87c"),O=a("w87c"),D=a("pH+Z"),N=a("9Y5R"),T=n(N),L=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.state={data:a.props.init.data,curPage:0,addMoreBtn:a.props.init.addMoreBtn,newMsg:{},loadState:"load",cursor:a.props.init.cursor,replayOpen:{id:null,isOpen:!1}},a.handleAddMore=a.handleAddMore.bind(a),a.curUserId=$CONFIG.userId,a.topicId=a.props.init.topicId,a}return(0,y.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.newMsg;if("list"==this.props.init.type&&0!=(0,s.default)(e).length)this.state.data.push(e),this.setState({data:this.state.data});else{for(var t=this.props.init.data,a=0;a<t.length;a++){t[a].replyState={open:!1,list:[],isFetched:!1,replyCursor:"",replyCurPage:0,replyAddMoreBtn:!1,replyLoadState:"load"}}this.setState({data:t})}}},{key:"componentWillReceiveProps",value:function(e){if("list"==e.init.type&&0!=(0,s.default)(e.newMsg).length){var t=this.state.data;t.unshift(e.newMsg),this.setState({data:t})}}},{key:"fetchData",value:function(){var e=this,t=O.loginFlag?I.apiParams.inParams:I.apiParams.outParams;C.default.get("/v1/comment/list?"+t,{domain:"domain-user",data:{topic_id:this.props.init.topicId,page_num:10,cursor:e.state.cursor},success:function(t){if(200==t.code){for(var a=t.data.list,n=0;n<a.length;n++)a[n].replyState={open:!1,list:[],isFetched:!1,replyCursor:"",replyCurPage:0,replyAddMoreBtn:!1,replyLoadState:"load"};var i=!1,o=e.state.curPage+1,r="",s=Math.ceil(parseInt(t.data.total)/10);10==a.length&&o<s&&(i=!0),r=s>1&&o==s?"noData":"load",e.setState({data:e.state.data.concat(a),cursor:t.data.cursor,addMoreBtn:i,curPage:o,loadState:r})}else e.setState({addMoreBtn:e.state.addMoreBtn,loadState:"error"})},error:function(){e.setState({addMoreBtn:e.state.addMoreBtn,loadState:"error"})}})}},{key:"itemHtml",value:function(){var e=this,t=this.state.data;if(t.length>0)return t.map(function(t,a){var n={type:0,keyType:e.props.init.type,index:a,reply_type:0,topicId:e.topicId,curUserId:e.curUserId,replyState:{open:void 0!=t.replyState&&t.replyState.open,list:void 0==t.replyState?[]:t.replyState.list,isFetched:void 0!=t.replyState&&t.replyState.isFetched,replyCursor:void 0==t.replyState?"":t.replyState.replyCursor,replyCurPage:void 0==t.replyState?0:t.replyState.replyCurPage,replyAddMoreBtn:void 0!=t.replyState&&t.replyState.replyAddMoreBtn,replyLoadState:void 0==t.replyState?"load":t.replyState.replyLoadState},comment_id:t.comment_id,content:t.content,create_time:t.create_time,has_praise:t.has_praise,has_report:t.has_report,praise_count:t.praise_count,reply_count:t.reply_count,user:{avatar:t.user.avatar,nickname:t.user.nickname,user_id:t.user.user_id},user_id:t.user_id,fromUser:{nickname:"",user_id:"",comment_id:""}};return _.default.createElement(x.default,{value:n,key:a,UserId:e.curUserId,handleReply:e.handleReply.bind(e),handleDelete:e.handleDelete.bind(e),handleReport:e.handleReport.bind(e),handleLike:e.handleLike.bind(e),totalNum:e.totalNum.bind(e),commentDelete:e.commentDelete.bind(e),changeReplyNum:e.changeReplyNum.bind(e),replyErrorDo:e.replyErrorDo.bind(e)})})}},{key:"handleAddMore",value:function(){this.setState({loadState:"loading"}),this.fetchData()}},{key:"totalNum",value:function(e,t){var a=this.state.data[e];a.reply_count="add"==t?parseInt(a.reply_count)+1:parseInt(a.reply_count)-1,this.setState({data:this.state.data})}},{key:"commentDelete",value:function(e,t,a){w.default.render(_.default.createElement(E.default,{onOk:this.deleteOnOk.bind(this),fetch:{type:a,keyValue:"delete",id:e,index:t},param:{title:"原评论已被作者删除"}}),document.getElementById("CommentDialog"))}},{key:"changeReplyNum",value:function(e,t){var a=this.state.data[e].replyState;a.open=!0,a.list=a.list.concat(t.data),a.isFetched=!0,a.replyCursor=t.cursor,a.replyCurPage=t.curPage,a.replyAddMoreBtn=t.addMoreBtn,a.replyLoadState=t.loadState,this.setState({data:this.state.data})}},{key:"replyErrorDo",value:function(e,t,a,n){}},{key:"replyFetch",value:function(e,t,a){var n=this,i="add"==e?n.state.replyCursor:"",o=O.loginFlag?I.apiParams.inParams:I.apiParams.outParams;C.default.get("/v1/reply/list?"+o,{domain:"domain-user",data:{comment_id:t,page_size:10,cursor:i},success:function(i){var o=n.state.data[a];if(200==i.code){var r=i.data.list,s=Math.ceil(parseInt(i.data.total)/10),l=o.replyCurPage;return o.replyState={open:!0,list:"add"==e?o.replyState.list.concat(r):r,isFetched:!0,replyCursor:i.data.cursor,replyCurPage:1,replyAddMoreBtn:10==r.length&&1<s,replyLoadState:s>1&&l==s?"noData":"load"},o.reply_count=i.data.total,void n.setState({data:n.state.data})}500003==i.code&&"原评论已被作者删除"==i.message?n.commentDelete(t,a,n.props.init.type):(0,T.default)(i.message)},error:function(e){(0,T.default)("网络异常，请稍后再试")}})}},{key:"handleReply",value:function(e,t,a){var n=this.state.data[t].replyState,r=i(),s=o(document.getElementById(a+e)),l=document.documentElement.clientHeight,u=(document.body.offsetHeight,parseInt(r)+parseInt(l)-parseInt(s));if(n.open||n.isFetched)!n.open&&n.isFetched?n.open=!0:(n.open=!1,n.list=[],n.isFetched=!1,n.replyCursor="",n.replyCurPage=0,n.replyAddMoreBtn=!1,n.replyLoadState="load",this.setState({data:this.state.data}));else if(this.replyFetch("",e,t),u<160){var d=0,c=setInterval(function(){d+=20,document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop=r+d:document.body&&(document.body.scrollTop=r+d)},30);setTimeout(function(){clearInterval(c)},160)}}},{key:"deleteOnOk",value:function(e){if("list"==e.type)return this.state.data.splice(e.index,1),this.props.totalNum(e.type,"delete",e.index),void this.setState({data:this.state.data});this.props.totalNum(e.type,"delete",e.index)}},{key:"onOk",value:function(e){var t=this;e.keyValue||C.default.get(e.url+"?"+I.apiParams.inParams,{domain:"domain-user",data:e.data,success:function(a){if(200==a.code)"has_report"==e.event?(t.state.data[e.index].has_report=1,t.setState({data:t.state.data}),(0,T.default)("举报成功")):"deleteTopic"==e.event&&(t.props.totalNum(e.type,"delete",e.index),"list"==e.type&&(t.state.data.splice(e.index,1),t.setState({data:t.state.data})),(0,T.default)("删除成功"));else if("deleteTopic"==e.event)(0,T.default)("删除失败");else{if("原评论已被作者删除"==a.message)return void w.default.render(_.default.createElement(E.default,{onOk:t.deleteOnOk.bind(t),fetch:{type:t.props.init.type,keyValue:"delete",id:e.data.comment_id,index:e.index},param:{title:"原评论已被作者删除"}}),document.getElementById("CommentDialog"));(0,T.default)("举报失败")}},error:function(){(0,T.default)("网络异常，请稍后再试")}})}},{key:"handleDelete",value:function(e,t,a){w.default.render(_.default.createElement(E.default,{onOk:this.onOk.bind(this),fetch:{type:a,event:"deleteTopic",index:t,url:"/v1/comment/delete",keyValue:"",data:{comment_id:parseInt(e)}},param:{title:"确定要删除该条评论吗"}}),document.getElementById("CommentDialog"))}},{key:"handleReport",value:function(e,t){if(O.loginFlag){var a=this.state.data[t];1==a.has_report?(0,T.default)("您已举报过该评论"):w.default.render(_.default.createElement(E.default,{onOk:this.onOk.bind(this),fetch:{event:"has_report",index:t,url:"/v1/report/add",data:{type:0,type_id:a.comment_id},toUser:{nickname:a.user.nickname,user_id:a.user.user_id}},param:{title:"确定要举报该评论吗"}}),document.getElementById("CommentDialog"))}else(0,D.login)()}},{key:"handleLike",value:function(e,t,a){var n=this.state.data[t];if(O.loginFlag){var i=0==n.has_praise?"/v1/praise/add":"/v1/praise/cancel",o=this;C.default.post(i+"?"+I.apiParams.inParams,{domain:"domain-user",data:{topic_id:parseInt(this.props.init.topicId),type:0,type_id:n.comment_id},success:function(i){if(200==i.code)0==n.has_praise?(n.has_praise=1,n.praise_count=parseInt(n.praise_count)+1):(n.has_praise=0,n.praise_count=parseInt(n.praise_count)-1),o.setState({data:o.state.data});else{if(-1!=["原评论已被作者删除","原回复已被作者删除"].indexOf(i.message))return void w.default.render(_.default.createElement(E.default,{onOk:o.deleteOnOk.bind(o),fetch:{type:a,keyValue:"delete",id:e,index:t},param:{title:"原评论已被作者删除"}}),document.getElementById("CommentDialog"));(0,T.default)("点赞失败")}},error:function(){(0,T.default)("网络异常，请稍后再试")}})}else 0==n.has_praise?(n.has_praise=1,n.praise_count=parseInt(n.praise_count)+1):(n.has_praise=0,n.praise_count=parseInt(n.praise_count)-1),this.setState({data:this.state.data})}},{key:"addMoreBtnHtml",value:function(){if("list"==this.props.init.type&&this.state.addMoreBtn)switch(this.state.loadState){case"load":return _.default.createElement("a",{onClick:this.handleAddMore,href:"javascript:;",className:"more"},"查看更多");case"loading":return _.default.createElement("a",{href:"javascript:;",className:"more disabled"},_.default.createElement("em",{className:"icon-49"}),"正在加载…");case"error":return _.default.createElement("a",{onClick:this.handleAddMore,href:"javascript:;",className:"more"},"加载错误，点击重新加载")}else if("list"==this.props.init.type&&!this.state.addMoreBtn&&this.state.curPage>0)return _.default.createElement("a",{href:"javascript:;",className:"more disabled"},"没有更多了")}},{key:"render",value:function(){return _.default.createElement("div",{className:"comment-list"},_.default.createElement("div",{className:"hot-title"},"hotList"==this.props.init.type?"热门评论":"最新评论"),this.itemHtml(),this.addMoreBtnHtml())}}]),t}(_.default.Component);t.default=L},k2uk:function(e,t,a){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zrlr"),o=n(i);a("0Yat");var r=a("+SHZ"),s=n(r),l=a("5xRM"),u=n(l),d=a("8qq7"),c=n(d),p=a("r2+A"),f=n(p),h=a("TfZd"),m=n(h),v=a("nXqg"),y=n(v),g=(a("pH+Z"),function t(){function a(){var e={user_id:"",nickname:""};0!=$CONFIG.userId&&(e.user_id=$CONFIG.userId,e.nickname=$CONFIG.nickName),l.player.setUserInfo(e)}var n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,o.default)(this,t),!i.videoId||!i.topicId)throw new Error("videoId and topicId is required");var r=f.default.getInstance(),l=new s.default(i),d=(0,c.default)(i),p=null;e("#mxplayer");this.showDanmakuInited=!1,p=(0,u.default)(i),l.on("showDanmaku",function(t,a){if(n.showDanmakuInited)return!1;if(n.showDanmakuInited=!0,e("[data-node=playerloading]").remove(),!a.showDanmaku)return d.destroy(),!1;d.init(l);var i=e("[data-node=playerbox]"),o=i.find("[data-node=danmubox]"),r=i.find("[data-node=danmuform]"),s=e("#mxplayer"),u="open";i.on("click","[data-node=toggle]",function(t){var a=e(this);if("open"===u)o.hide(),r.addClass("long"),s.width("1200px"),a.removeClass("icon-21").addClass("icon-20"),a.removeClass("closed").addClass("opened"),u="close";else{o.show(),r.removeClass("long"),s.width("900px"),a.removeClass("icon-20").addClass("icon-21"),a.removeClass("opened").addClass("closed"),u="open";var n=e("[data-node=msgList]"),i=n.parent("div"),l=i.height(),d=n.height();d>l&&i.scrollTop(d-l)}})}),l.on("playerInited",function(){l.player.setDanmakuBrow(y.default)}),r.push(i.topicId),l.on("needUserInfo",a);var h=[];l.on("messageReceived",function(e,t){t.isSensitive||(null===p?h.push(t):h.length?(h.push(t),h.forEach(function(e){p.render(e)}),h=[]):p.render(t))}),l.on("userLoginedByOther",function(){(0,m.default)({fixed:!0,modal:!0,autofocus:!1,content:"你的账号已在其他终端登录，是否重新登录！",ok:a,onshow:function(){}}).show()})});t.default=g}).call(t,a("7t+N"))},kl2M:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|ldquo|rdquo|quot|gt|#39|nbsp|#\d+);)?/g,function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;","“":"&ldquo;","”":"&rdquo;",">":"&gt;","'":"&#39;"}[e]}):""};t.default=n},mhwC:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zx67"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),u=n(l),d=a("zwoO"),c=n(d),p=a("Pf15"),f=n(p),h=a("U7vG"),m=n(h),v=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.onOk=a.onOk.bind(a),a.onCacel=a.onCacel.bind(a),a.state={show:!0,hideTag:""},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){console.log("render"),"delete"==this.props.fetch.keyValue&&this.setState({hideTag:"hide"})}},{key:"componentWillReceiveProps",value:function(e){"delete"==e.fetch.keyValue?this.setState({show:!0,hideTag:"hide"}):this.setState({show:!0,hideTag:""})}},{key:"onOk",value:function(){this.setState({show:!1}),this.props.onOk(this.props.fetch)}},{key:"onCacel",value:function(){this.setState({show:!1})}},{key:"render",value:function(){return this.state.show?m.default.createElement("div",null,m.default.createElement("div",{className:"dialog-bg show"}),m.default.createElement("div",{className:"dialog-new show"},m.default.createElement("div",{className:"title"},this.props.param.title),m.default.createElement("div",{className:"btn-box"},m.default.createElement("a",{onClick:this.onOk,href:"javascript:;",className:"btn sure"},"确定"),m.default.createElement("a",{onClick:this.onCacel,href:"javascript:;",className:"btn "+this.state.hideTag},"取消")))):null}}]),t}(m.default.Component);t.default=v},nXqg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=$CONFIG.jspath,i={"[呲牙]":"/ciya.png","[大笑]":"/daxiao.png","[微笑]":"/weixiao.png","[亲亲]":"/qinqin.png","[色]":"/se.png","[流泪]":"/liulei.png","[害羞]":"/haixiu.png","[冷汗]":"/lenghan.png","[抓狂]":"/zhuakuang.png","[鼓掌]":"/guzhang.png","[大哭]":"/daku.png","[尴尬]":"/ganga.png","[生气]":"/shengqi.png","[调皮]":"/tiaopi.png","[惊讶]":"/jingya.png","[难过]":"/nanguo.png","[睡觉]":"/shuijiao.png","[不屑]":"/buxie.png","[发呆]":"/fadai.png","[装酷]":"/zhuangku.png","[晕]":"/yun.png","[困]":"/kun.png","[咒骂]":"/zhouma.png","[白眼]":"/baiyan.png","[快哭了]":"/kuaikule.png","[鄙视]":"/bishi.png","[饿]":"/e.png","[抠鼻]":"/koubi.png","[石化]":"/shihua.png","[泪眼]":"/leiyan.png","[撇嘴]":"/piezui.png","[疑问]":"/yiwen.png"};for(var o in i)i[o]=n+"/m/vpc/dist/imgs/emoji"+i[o];t.default=i},njmC:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zrlr"),o=n(i),r=a("wxAW"),s=n(r),l=function(){function e(){(0,o.default)(this,e),this.cache={}}return(0,s.default)(e,[{key:"on",value:function(e,t){(this.cache[e]||(this.cache[e]=[])).push(t)}},{key:"once",value:function(e,t){function a(){this.off(e,a),t.apply(this,arguments)}this.on(e,a)}},{key:"off",value:function(e){this.cache[e]=null}},{key:"emit",value:function(e){var t=this,a=[].concat(Array.prototype.slice.call(arguments));a.shift();var n=this.cache[e];n&&n.length>0&&n.forEach(function(e){e.apply(t,a)})}}]),e}();t.default=l},oovt:function(e,t,a){"use strict"},opxg:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zx67"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),u=n(l),d=a("zwoO"),c=n(d),p=a("Pf15"),f=n(p),h=a("U7vG"),m=n(h),v=a("O27J"),y=(n(v),a("jRyO")),g=n(y),_=a("WHri"),k=n(_),w=a("w87c"),b=a("3o3C"),x=n(b),S=a("w87c"),E=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={newMsg:{},list:[],hotList:[],total:0,addMoreBtn:"",cursor:"",hotNum:0,initLoading:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"replyMsg",value:function(e){var t={comment_id:e.comment_id,content:e.content,create_time:new Date,has_praise:0,has_report:0,praise_count:0,reply_count:0,user:{avatar:e.user.avatar,nickname:e.user.nickname,user_id:e.user.user_id},replyState:{open:!1,list:[],isFetched:!1,replyCursor:"",replyCurPage:0,replyAddMoreBtn:!1,replyLoadState:"load"}};this.setState({newMsg:t,total:parseInt(this.state.total)+1})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){}},{key:"fetchData",value:function(){var e=this,t=(e.state.cursor,S.loginFlag?w.apiParams.inParams:w.apiParams.outParams);e.props.topicId&&x.default.get("/v1/comment/integration_list?"+t,{domain:"domain-user",data:{topic_id:e.props.topicId},success:function(t){200==t.code?e.setState({list:t.data.list,hotList:t.data.hot_list,total:t.data.total,addMoreBtn:Math.ceil(parseInt(t.data.total)/10)>1,cursor:t.data.cursor,hotNum:t.data.hot_list.length,initLoading:!0}):e.setState({initLoading:!0})},error:function(){e.setState({initLoading:!0})}})}},{key:"totalNum",value:function(e,t,a){if("list"==e)this.setState({total:"delete"==t?parseInt(this.state.total)-1:parseInt(this.state.total)+1,newMsg:""});else{var n=this.state.hotList;n.splice(a,1),this.setState({hotNum:"delete"==t?parseInt(this.state.hotNum)-1:parseInt(this.state.hotNum)+1,hotList:n,newMsg:""})}}},{key:"render",value:function(){var e=$CONFIG.topicId,t=null,a=null,n=null;return this.state.initLoading||(n=m.default.createElement("div",null,m.default.createElement("a",{href:"javascript:;",className:"more disabled"},m.default.createElement("em",{className:"icon-49"}),"正在加载…"))),this.state.initLoading&&0==this.state.total&&0==this.state.hotNum&&(n=m.default.createElement("div",{className:"no-comment"},"还没有评论，快来抢沙发~")),0!=this.state.total&&(t=m.default.createElement(g.default,{newMsg:this.state.newMsg,init:{addMoreBtn:this.state.addMoreBtn,data:this.state.list,type:"list",topicId:e,cursor:this.state.cursor,hotNum:this.state.hotNum,total:this.state.total},totalNum:this.totalNum.bind(this)})),this.state.hotNum>0&&(a=m.default.createElement(g.default,{init:{data:this.state.hotList,type:"hotList",topicId:e,hotNum:this.state.hotNum,total:this.state.total},totalNum:this.totalNum.bind(this)})),m.default.createElement("div",{className:"new-comment"},m.default.createElement("div",{className:"comment-title"},"评论",m.default.createElement("span",null,"（",this.state.total,"条评论）")),m.default.createElement(k.default,{param:{fetchUrl:"/v1/comment/post",formData:{topic_id:e,content:""}},replyMsg:this.replyMsg.bind(this)}),a,t,n,m.default.createElement("div",{id:"CommentDialog"}))}}]),t}(m.default.Component);t.default=E},qNjk:function(e,t,a){"use strict";(function(e){function t(e){return e&&e.__esModule?e:{default:e}}a("XJKw"),a("fJTB"),a("bXnB"),a("HY96");var n=a("9y4i"),i=t(n),o=a("2roW"),r=(t(o),a("oovt")),s=(t(r),a("k2uk")),l=t(s),u=a("w87c"),d=a("O7yE"),c=t(d),p=a("+dNZ"),f=t(p),h=a("FD4M"),m=t(h),v=a("gbOH"),y=t(v),g=a("opxg"),_=t(g),k=a("U7vG"),w=t(k),b=a("O27J"),x=t(b);""!=u.page.videoId&&(e("[data-node=playerbox]").removeClass("hide"),new l.default({env:u.env,videoId:u.page.videoId,topicId:u.page.topicId,danmaku:1,danmakuStatus:1,type:"live",autoplay:1}));var S={title:u.page.title,desc:u.page.shareDesc,summary:u.page.shareDesc,pics:u.page.imageUrl},E=u.page.mshare;new i.default({id:"sharebox",targets:{qq:S,wx:{url:E},wb:S,qz:S}}),x.default.render(w.default.createElement(_.default,{topicId:u.page.topicId}),document.querySelector("[data-id=commentComponent]")),new c.default,new f.default({delegate:".message"}),new m.default({delegate:".message"}),new y.default({delegate:".message"})}).call(t,a("7t+N"))},rZAI:function(e,t,a){var n=a("wXdB"),i=a("pEGt");a("30vf")("keys",function(){return function(e){return i(n(e))}})},revJ:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zx67"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),u=n(l),d=a("zwoO"),c=n(d),p=a("Pf15"),f=n(p),h=a("U7vG"),m=n(h),v=a("O27J"),y=n(v),g=a("seMl"),_=n(g),k=a("WHri"),w=n(k),b=a("w87c"),x=a("3o3C"),S=n(x),E=a("w87c"),M=a("pH+Z"),C=a("9Y5R"),I=n(C),O=a("mhwC"),D=n(O),N=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={show:a.props.replyState.open,reply_count:a.props.reply_count,data:a.props.replyState.list,inputShow:{id:null,isOpen:!1},cursor:a.props.replyState.replyCursor,loadState:a.props.replyState.replyLoadState,curPage:a.props.replyState.replyCurPage,addMoreBtn:a.props.replyState.replyAddMoreBtn},a.handleAddMore=a.handleAddMore.bind(a),a.USER={userId:$CONFIG.userId,nickName:$CONFIG.nickName,avatar:$CONFIG.avatar},a.index=a.props.indexKey,a.COMMENID=a.props.comment_id,a.TOPICID=a.props.topic_id,a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.replyState;this.setState({show:e.open,reply_count:this.props.reply_count,data:e.list,inputShow:{id:null,isOpen:!1},cursor:e.replyCursor,loadState:e.replyLoadState,curPage:e.replyCurPage,addMoreBtn:e.replyAddMoreBtn})}},{key:"fetchData",value:function(e){var t=this,a=t.state.cursor,n=E.loginFlag?b.apiParams.inParams:b.apiParams.outParams;S.default.get("/v1/reply/list?"+n,{domain:"domain-user",data:{comment_id:this.COMMENID,page_size:10,cursor:a},success:function(e){if(200==e.code){var a=e.data.list,n=t.state.curPage+1,i=Math.ceil(parseInt(e.data.total)/10),o=(t.state.data.concat(a),10==a.length&&n<i),r=i>1&&n==i?"":"load",s={data:a,cursor:e.data.cursor,addMoreBtn:o,curPage:n,loadState:r,show:!0};return void t.props.changeReplyNum(t.index,s)}if(500003==e.code&&"原评论已被作者删除"==e.message)return void t.props.commentDelete(t.COMMENID,t.index,t.props.type);t.setState({addMoreBtn:t.state.addMoreBtn,loadState:"error"})},error:function(e){(0,I.default)("网络异常，请稍后再试"),t.props.replyErrorDo(t.COMMENID,!1,t.index,[])}})}},{key:"handleAddMore",value:function(){this.fetchData("add")}},{key:"componentWillReceiveProps",value:function(e){this.state.inputShow.id&&y.default.render(m.default.createElement("div",null),document.getElementById(this.props.type+this.state.inputShow.id)),1==e.replyState.open?this.setState({show:e.replyState.open,reply_count:e.reply_count,data:e.replyState.list,inputShow:{id:"",isOpen:!1},cursor:e.replyState.replyCursor,loadState:e.replyState.replyLoadState,curPage:e.replyState.replyCurPage,addMoreBtn:e.replyState.replyAddMoreBtn}):this.setState({show:!1})}},{key:"itemHtml",value:function(){var e=this,t=this.state.data;if(t&&t.length>0)return t.map(function(t,a){var n=e.state.inputShow,i=!(t.reply_id!=n.id||!n.isOpen);t.index=a;var o={type:1,keyType:e.props.type,replayOpen:i,index:a,reply_type:t.reply_type,comment_id:t.reply_id,content:t.content,create_time:t.create_time,has_praise:t.has_praise,has_report:t.has_report,praise_count:t.praise_count,reply_count:t.reply_count,user:{avatar:t.from_user.avatar,nickname:t.from_user.nickname,user_id:t.from_user.user_id},user_id:t.user_id,fromUser:{nickname:t.to_user.nickname,user_id:t.to_user.user_id,comment_id:t.to_user.to_reply_id}};return m.default.createElement(_.default,{value:o,key:a,UserId:e.USER.userId,handleReply:e.handleReply.bind(e),handleDelete:e.handleDelete.bind(e),handleReport:e.handleReport.bind(e),handleLike:e.handleLike.bind(e)})})}},{key:"handleReply",value:function(e,t){var a=this.state.inputShow.id,n=null,i=this.state.data[t],o=m.default.createElement(w.default,{param:{fetchUrl:"/v1/reply/add",formData:{topic_id:this.TOPICID,content:"",comment_id:this.COMMENID,to_reply_id:i.reply_id,to_user_id:i.from_user.user_id,reply_type:1},to_user_nickname:i.from_user.nickname,returnMsg:{index:t,id:e,delete:""}},replyMsg:this.replyMsg.bind(this),replyMsgError:this.replyMsgError.bind(this)});a!=e?(y.default.render(o,document.getElementById(this.props.type+e)),this.state.inputShow.id&&y.default.render(m.default.createElement("div",null),document.getElementById(this.props.type+this.state.inputShow.id)),n=!0):a==e&&(this.state.inputShow.isOpen?(y.default.render(m.default.createElement("div",null),document.getElementById(this.props.type+e)),n=!1):(y.default.render(o,document.getElementById(this.props.type+e)),n=!0)),this.setState({inputShow:{id:e,isOpen:n}})}},{key:"deleteOnOk",value:function(e){this.props.totalNum(this.index,"delete"),this.state.inputShow.id==e.id&&y.default.render(m.default.createElement("div",null),document.getElementById(e.type+e.id)),this.state.data.splice(e.index,1),this.setState({data:this.state.data,inputShow:{id:null,isOpen:!1}})}},{key:"onOk",value:function(e){var t=this;e.keyValue||S.default.get(e.url+"?"+b.apiParams.inParams,{domain:"domain-user",data:e.data,success:function(a){return 200!=a.code?"deleteTopic"==e.event?void(0,I.default)("系统异常，请稍后再试"):"原评论已被作者删除"==a.message?void t.props.commentDelete(t.COMMENID,t.index,t.props.type):"原回复已被作者删除"==a.message?void y.default.render(m.default.createElement(D.default,{onOk:t.deleteOnOk.bind(t),fetch:{type:e.data.type,keyValue:"delete",id:e.data.type_id,index:e.index},param:{title:"原回复已被作者删除"}}),document.getElementById("CommentDialog")):void(0,I.default)(a.message):"has_report"==e.event?(t.state.data[e.index].has_report=1,t.setState({data:t.state.data}),void(0,I.default)("举报成功")):"deleteTopic"==e.event?(t.props.totalNum(t.index,"delete"),t.state.inputShow.id&&y.default.render(m.default.createElement("div",null),document.getElementById(e.type+t.state.inputShow.id)),t.state.data.splice(e.index,1),t.setState({data:t.state.data,inputShow:{id:null,isOpen:!1}}),void(0,I.default)("删除成功")):void 0},error:function(){(0,I.default)("网络异常，请稍后再试")}})}},{key:"handleDelete",value:function(e,t,a){y.default.render(m.default.createElement(D.default,{onOk:this.onOk.bind(this),fetch:{type:a,keyValue:"",event:"deleteTopic",index:t,url:"/v1/reply/delete",data:{reply_id:parseInt(e)}},param:{title:"确定要删除该条评论吗"}}),document.getElementById("CommentDialog"))}},{key:"handleReport",value:function(e,t){if(E.loginFlag){var a=this.state.data[t];1==a.has_report?(0,I.default)("您已举报过该评论"):y.default.render(m.default.createElement(D.default,{onOk:this.onOk.bind(this),fetch:{event:"has_report",index:t,url:"/v1/report/add",data:{type:1,type_id:e},toUser:{nickname:a.from_user.nickname,user_id:a.from_user.user_id}},param:{title:"确定要举报该评论吗"}}),document.getElementById("CommentDialog"))}else(0,M.login)()}},{key:"handleLike",value:function(e,t,a){var n=this.state.data[t];if(E.loginFlag){var i=0==n.has_praise?"/v1/praise/add":"/v1/praise/cancel",o=this;S.default.post(i+"?"+b.apiParams.inParams,{domain:"domain-user",data:{topic_id:parseInt(this.TOPICID),type:1,type_id:e},success:function(i){return 200==i.code?(0==n.has_praise?(n.has_praise=1,n.praise_count=parseInt(n.praise_count)+1):(n.has_praise=0,n.praise_count=parseInt(n.praise_count)-1),void o.setState({data:o.state.data})):"原评论已被作者删除"==i.message?void o.props.commentDelete(o.COMMENID,o.index,o.props.type):"原回复已被作者删除"==i.message?void y.default.render(m.default.createElement(D.default,{onOk:o.deleteOnOk.bind(o),fetch:{type:a,keyValue:"delete",id:e,index:t},param:{title:"原回复已被作者删除"}}),document.getElementById("CommentDialog")):void(0,I.default)(i.message)},error:function(){(0,I.default)("网络异常，请稍后再试")}})}else 0==n.has_praise?(n.has_praise=1,n.praise_count=parseInt(n.praise_count)+1):(n.has_praise=0,n.praise_count=parseInt(n.praise_count)-1),this.setState({data:this.state.data})}},{key:"replyMsgError",value:function(e,t){"原评论已被作者删除"==e.message?this.props.commentDelete(this.COMMENID,this.index,this.props.type):y.default.render(m.default.createElement(D.default,{onOk:this.deleteOnOk.bind(this),fetch:{type:"list",keyValue:"delete",id:t.id,index:t.index,deleteType:deleteType},param:{title:e.message}}),document.getElementById("CommentDialog"))}},{key:"replyMsg",value:function(e,t){var a={reply_type:e.reply_type,reply_id:e.reply_id,content:e.content,create_time:e.create_time,has_praise:0,has_report:0,praise_count:0,reply_count:0,from_user:{avatar:this.USER.avatar,nickname:this.USER.nickName,user_id:this.USER.userId},user_id:this.USER.userId,to_user:{nickname:e.to_user_nickname,user_id:e.to_user_id,comment_id:e.to_reply_id}};this.state.data.unshift(a),this.props.totalNum(this.index,"add"),this.state.inputShow.id&&y.default.render(m.default.createElement("div",null),document.getElementById(this.props.type+this.state.inputShow.id)),this.setState({data:this.state.data,inputShow:{id:null,isOpen:!1}})}},{key:"addMoreBtnHtml",value:function(){if(this.state.addMoreBtn)switch(this.state.loadState){case"load":return m.default.createElement("a",{onClick:this.handleAddMore,href:"javascript:;",className:"more"},"查看更多");case"loading":return m.default.createElement("a",{href:"javascript:;",className:"more disabled"},m.default.createElement("em",{className:"icon-49"}),"正在加载…");case"error":return m.default.createElement("a",{onClick:this.handleAddMore,href:"javascript:;",className:"more"},"加载错误，点击重新加载")}}},{key:"render",value:function(){return this.state.show?m.default.createElement("div",{className:"text-comment"},m.default.createElement(w.default,{param:{fetchUrl:"/v1/reply/add",formData:this.props.formData,to_user_nickname:"",returnMsg:{index:this.props.indexKey,id:this.props.comment_id,delete:""}},replyMsg:this.replyMsg.bind(this),replyMsgError:this.replyMsgError.bind(this)}),this.itemHtml(),this.addMoreBtnHtml()):m.default.createElement("div",null)}}]),t}(m.default.Component);t.default=N},seMl:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("Zx67"),o=n(i),r=a("Zrlr"),s=n(r),l=a("wxAW"),u=n(l),d=a("zwoO"),c=n(d),p=a("Pf15"),f=n(p),h=a("U7vG"),m=n(h),v=a("EL7C"),y=n(v),g=a("2TA9"),_=n(g),k=a("revJ"),w=n(k),b=a("W3xz"),x=n(b),S=function(e){function t(e){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.state={replayOpen:!1,tagShow:"hide",replyShow:"hide",id:a.props.value.comment_id},a.hideId=null,a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){1==e.value.type?this.setState({replayOpen:e.value.replayOpen}):this.setState({replayOpen:e.value.replyState.open})}},{key:"handleReply",value:function(e,t,a){this.props.handleReply(e,t,a)}},{key:"handleDelete",value:function(e,t,a){this.props.handleDelete(e,t,a)}},{key:"handleReport",value:function(e,t,a){this.props.handleReport(e,t,a)}},{key:"handleLike",value:function(e,t,a){this.props.handleLike(e,t,a)}},{key:"render",value:function(){var e=this,t=this.props.value;if(this.props.UserId==t.user.user_id)var a=m.default.createElement("p",{id:"target"+t.comment_id,className:"hover ",onClick:function(){e.handleDelete(t.comment_id,t.index,t.keyType)}},m.default.createElement("em",{className:"icon-52"}),m.default.createElement("span",null,"删除"));else var a=m.default.createElement("p",{id:"target"+t.comment_id,className:"hover ",onClick:function(){e.handleReport(t.comment_id,t.index,t.keyType)}},m.default.createElement("em",{className:"icon-51"}),m.default.createElement("span",null,1==t.has_report?"已举报":"举报"));var n="";return 0==t.type&&(n=m.default.createElement(w.default,{key:t.comment_id,indexKey:t.index,comment_id:t.comment_id,topic_id:t.topicId,userId:t.curUserId,reply_count:t.reply_count,type:t.keyType,formData:{topic_id:t.topicId,content:"",comment_id:t.comment_id,to_reply_id:0,to_user_id:t.user.user_id,reply_type:0},replyState:t.replyState,totalNum:this.props.totalNum.bind(this),commentDelete:this.props.commentDelete.bind(this),changeReplyNum:this.props.changeReplyNum.bind(this),replyErrorDo:this.props.replyErrorDo.bind(this)})),m.default.createElement("div",{className:"list-item"},m.default.createElement("div",{className:"list-img"},m.default.createElement("img",{src:t.user.avatar})),m.default.createElement("div",{className:"list-text"},m.default.createElement("div",{className:"text-hover"},m.default.createElement("div",{className:"text-name"},m.default.createElement("span",null,t.user.nickname),m.default.createElement("span",{className:"gray"},(0,_.default)(t.create_time,"yy-MM-dd hh:mm:ss"))),m.default.createElement("div",{className:"text-con"},m.default.createElement("span",{className:"blue"},1==t.reply_type?"回复"+t.fromUser.nickname+": ":null),m.default.createElement("span",{dangerouslySetInnerHTML:{__html:(0,y.default)(t.content)}})),m.default.createElement("div",{className:"text-edit"},m.default.createElement("p",{onClick:function(){e.handleLike(t.comment_id,t.index,t.keyType)}},m.default.createElement("em",{className:1==t.has_praise?"icon-15":"icon-14"}),m.default.createElement("span",null,"("+(0,x.default)(t.praise_count)+")")),m.default.createElement("p",{"data-id":t.comment_id,onClick:function(){e.handleReply(t.comment_id,t.index,t.keyType)}},m.default.createElement("em",{className:"icon-50"}),m.default.createElement("span",null,this.state.replayOpen?"收起回复":"回复",0==t.type?"("+t.reply_count+")":null)),a)),m.default.createElement("div",{className:"",id:t.keyType+t.comment_id},n)))}}]),t}(m.default.Component);t.default=S},sit2:function(e,t,a){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=n(i),r=a("Zx67"),s=n(r),l=a("Zrlr"),u=n(l),d=a("wxAW"),c=n(d),p=a("zwoO"),f=n(p),h=a("Pf15"),m=n(h),v=a("9Y5R"),y=n(v),g=a("3o3C"),_=n(g),k=a("njmC"),w=n(k),b=a("W3xz"),x=n(b),S=a("pH+Z"),E=a("w87c"),M="?"+E.apiParams.inParams,C=function(){},I=function(e){(0,y.default)(e.res.message)},O={},D=function(t){function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.default)(this,a);var t=(0,f.default)(this,(a.__proto__||(0,s.default)(a)).call(this));return t.api=e.api+M,t.selector=e.selector,t.action=e.action,t.delegate=e.delegate||"body",t.beforeRequest=e.beforeRequest||C,t.afterRequest=e.afterRequest||C,t.afterDoSuccess=e.afterDoSuccess||null,t.afterUndoSuccess=e.afterUndoSuccess||null,t.afterDoFail=e.afterDoFail||I,t.afterUndoFail=e.afterUndoFail||I,t.formatNumber=x.default,t.localStorageKey="gmv_pc_action",t._bindEvent(),t._init(),t._checkBeforeLogin(),t}return(0,m.default)(a,t),(0,c.default)(a,[{key:"_defaultDoSuccess",value:function(){}},{key:"_defaultUndoSuccess",value:function(){}},{key:"_bindEvent",value:function(){var e=this;this.on("doSuccess",function(t){"function"==typeof e.afterDoSuccess?e.afterDoSuccess(t):e._defaultDoSuccess(t)}),this.on("doFail",function(t){e.afterDoFail(t)}),this.on("undoSuccess",function(t){"function"==typeof e.afterUndoSuccess?e.afterUndoSuccess(t):e._defaultUndoSuccess(t)}),this.on("undoFail",function(t){e.afterUndoFail(t)})}},{key:"_init",value:function(){function t(t){var i=e(this),r=i.data(n+"id"),s=i.data("status");switch(s){case"true":s=1;break;case"false":s=0;break;default:s^=0}var l=n+r;return 1!=O[l]&&(E.loginFlag?(O[l]=1,a.request(a.getReqData({id:r,status:s})),!1):(localStorage.setItem(a.localStorageKey,(0,o.default)({action:n,id:r,status:s})),(0,S.login)(),!1))}var a=this,n=this.action;e(this.delegate).on("click",this.selector,t)}},{key:"_checkBeforeLogin",value:function(){var e=this,t=localStorage.getItem(this.localStorageKey),a=null,n=null;E.loginFlag&&t&&(n=JSON.parse(t),n.action==this.action&&(a={id:n.id,status:n.status},e.request(e.getReqData(a)))),localStorage.removeItem(this.localStorageKey)}},{key:"getReqData",value:function(e){var t=1^e.status;return{id:e.id,actionType:t,formData:{id:e.id,type:t}}}},{key:"request",value:function(t){var a=this,n=a.action,i=t.id,r=t.actionType;if(!1===a.beforeRequest(t))return!1;_.default.post(this.api,{domain:"domain-user",data:t.formData,success:function(t){var s="[data-"+a.action+'id="'+i+'"]',l=e(s),u=t.code,d={id:i,res:t,$el:l,$delegate:e(a.delegate)},c=["undoSuccess","doSuccess"],p=["undoFail","doFail"],f=[200,400008];if(200001==u)return localStorage.setItem(a.localStorageKey,(0,o.default)({action:n,id:i,status:1^r})),location.href=E.page.loginUrl,!1;-1!=f.indexOf(u)?a.emit(c[r],d):a.emit(p[r],d)},error:function(){(0,y.default)("网络请求失败，请稍后重试")},complete:function(){delete O[n+i],a.afterRequest(t)}})}}]),a}(w.default);t.default=D}).call(t,a("7t+N"))},woOf:function(e,t,a){e.exports={default:a("Eif7"),__esModule:!0}},xVc6:function(e,t,a){"use strict";var n=a("pEGt"),i=a("THEY"),o=a("bSeU"),r=a("wXdB"),s=a("wiaE"),l=Object.assign;e.exports=!l||a("zyKz")(function(){var e={},t={},a=Symbol(),n="abcdefghijklmnopqrst";return e[a]=7,n.split("").forEach(function(e){t[e]=e}),7!=l({},e)[a]||Object.keys(l({},t)).join("")!=n})?function(e,t){for(var a=r(e),l=arguments.length,u=1,d=i.f,c=o.f;l>u;)for(var p,f=s(arguments[u++]),h=d?n(f).concat(d(f)):n(f),m=h.length,v=0;m>v;)c.call(f,p=h[v++])&&(a[p]=f[p]);return a}:l}},["qNjk"]);