{"version":3,"file":null,"sources":["../../src/js/src/utils/common.js","../../src/js/src/utils/event.js","../../src/js/src/utils/xajax.js","../../src/js/src/state.js","../../src/js/src/inject.js","../../src/js/src/urltest.js","../../src/js/src/log.js","../../src/js/src/modal.js","../../src/js/src/index.js"],"sourcesContent":["\r\nexport const jsonToQuery = function (a) {\r\n    const add = function (s, k, v) {\r\n        v = typeof v === 'function' ? v() : v === null ? '' : v === undefined ? '' : v;\r\n        s[s.length] = encodeURIComponent(k) + '=' + encodeURIComponent(v);\r\n    };\r\n    const buildParams = function (prefix, obj, s) {\r\n        let i;\r\n        let len;\r\n        let key;\r\n\r\n        if (Object.prototype.toString.call(obj) === '[object Array]') {\r\n            for (i = 0, len = obj.length; i < len; i++) {\r\n                buildParams(prefix + '[' + (typeof obj[i] === 'object' ? i : '') + ']', obj[i], s);\r\n            }\r\n        } else if (obj && obj.toString() === '[object Object]') {\r\n            for (key in obj) {\r\n                if (obj.hasOwnProperty(key)) {\r\n                    if (prefix) {\r\n                        buildParams(prefix + '[' + key + ']', obj[key], s, add);\r\n                    } else {\r\n                        buildParams(key, obj[key], s, add);\r\n                    }\r\n                }\r\n            }\r\n        } else if (prefix) {\r\n            add(s, prefix, obj);\r\n        } else {\r\n            for (key in obj) {\r\n                add(s, key, obj[key]);\r\n            }\r\n        }\r\n        return s;\r\n    };\r\n    return buildParams('', a, []).join('&').replace(/%20/g, '+');\r\n};\r\n\r\nexport const JSONParse = function () {\r\n    if (window.JSON) {\r\n        return JSON.parse;\r\n    } else {\r\n        return function (jsonstr) {\r\n            return (new Function(\"return\" + jsonstr))();\r\n        };\r\n    }\r\n}();","export const isMobile = function() {\r\n    try {\r\n        document.createEvent(\"TouchEvent\");\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n}();\r\n\r\nexport const bindEvent = (element, event, cb, capture) => {\r\n    !element.addEventListener && (event = 'on' + event);\r\n    (element.addEventListener || element.attachEvent).call(element, event, cb, capture);\r\n    return cb;\r\n};\r\n\r\nexport const bindClickEvent = (element, cb, stop, capture) => {\r\n    let eventType = isMobile ? 'touchstart' : 'click';\r\n    if (stop) {\r\n        return bindEvent(element, eventType, function(event) {\r\n            cb.apply(this, arguments);\r\n            if (event.preventDefault) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            } else {\r\n                event.returnValue = false;\r\n            }\r\n        }, capture);\r\n    } else {\r\n        return bindEvent(element, eventType, cb, capture);\r\n    }\r\n};\r\n","import {\r\n    jsonToQuery,\r\n    JSONParse\r\n} from './common.js';\r\n\r\nconst win = typeof window !== 'undefined' ? window : self;\r\n// Get XMLHttpRequest object\r\nlet xdr;\r\nlet getXHR = win.XMLHttpRequest ? function() {\r\n    return new win.XMLHttpRequest();\r\n} : function() {\r\n    return new win.ActiveXObject('Microsoft.XMLHTTP');\r\n};\r\nlet mimeTypes = {\r\n    text: '*/*',\r\n    xml: 'text/xml',\r\n    json: 'application/json',\r\n    post: 'application/x-www-form-urlencoded',\r\n    document: 'text/html'\r\n};\r\n\r\nlet xhr2 = (getXHR().responseType === '');\r\n\r\nfunction XAjax(url, data, options) {\r\n    let headers = {\r\n        Accept: '*/*',\r\n        'Cache-Control': ''\r\n    };\r\n    if (options.headers && (Object.prototype.toString.call(options.headers).includes('Object'))) {\r\n        Object.assign(headers, options.headers);\r\n    }\r\n    this.callback = options.callback;\r\n    let method = (options.method && options.method.toLowerCase()) || 'get';\r\n    this.url = url;\r\n    if (data) {\r\n        if (method === 'get') {\r\n            this.url = url + '?' + jsonToQuery(data);\r\n        } else {\r\n            // Prepare data\r\n            // default datatype\r\n            let dataType = options.dataType || 'post';\r\n            if ('ArrayBuffer' in win && data instanceof ArrayBuffer) {\r\n                dataType = 'arraybuffer';\r\n            } else if ('Blob' in win && data instanceof Blob) {\r\n                dataType = 'blob';\r\n            } else if ('Document' in win && data instanceof Document) {\r\n                dataType = 'document';\r\n            } else if ('FormData' in win && data instanceof FormData) {\r\n                dataType = 'formdata';\r\n            }\r\n            if (!('Content-Type' in headers)) {\r\n                if (dataType in mimeTypes) {\r\n                    if (mimeTypes[dataType]) {\r\n                        headers['Content-Type'] = mimeTypes[dataType];\r\n                    }\r\n                }\r\n            }\r\n            switch (dataType) {\r\n                case 'json':\r\n                    data = JSON.stringify(data);\r\n                    break;\r\n                case 'post':\r\n                    data = jsonToQuery(data);\r\n            }\r\n            this.data = data;\r\n        }\r\n    } else {\r\n        this.data = {};\r\n    }\r\n\r\n\r\n    this.errHandler = options.errHandler || function(msg) {\r\n        console.log(`error: ${msg}`);\r\n    };\r\n    // Prepare URL\r\n\r\n    this.options = {\r\n        _async: true,\r\n        timeout: 30000,\r\n        attempts: 2\r\n    };\r\n    this.attempts = 0;\r\n    this.aborted = false;\r\n    // timeout id\r\n    this.timeoutid = null;\r\n    // Guess if we're dealing with a cross-origin request\r\n    let i = url.match(/\\/\\/(.+?)\\//);\r\n    this.crossOrigin = i && (i[1] ? i[1] !== location.host : false);\r\n    if (!this.crossOrigin && !('X-Requested-With' in headers)) { // (that header breaks in legacy browsers with CORS)\r\n        headers['X-Requested-With'] = 'XMLHttpRequest';\r\n    }\r\n    this.headers = headers;\r\n    this.method = method;\r\n}\r\n\r\nXAjax.prototype.abort = function() {\r\n    if (!this.aborted) {\r\n        if (this.xhr && this.xhr.readyState !== 4) { // https://stackoverflow.com/questions/7287706/ie-9-javascript-error-c00c023f\r\n            this.xhr.abort();\r\n        }\r\n        this.aborted = true;\r\n    }\r\n};\r\n\r\nXAjax.prototype.handleResponse = function(xhr = this.xhr) {\r\n    clearTimeout(this.timeoutid);\r\n    // Verify if the request has not been previously aborted\r\n    if (this.aborted) {\r\n        return;\r\n    }\r\n    // Handle response\r\n    try {\r\n        // Process response\r\n        if (xhr.responseType === 'json') {\r\n            if ('response' in xhr && xhr.response === null) {\r\n                throw 'The request response is empty';\r\n            }\r\n            this.response = xhr.response;\r\n        } else {\r\n            this.response = JSONParse(xhr.responseText);\r\n        }\r\n        // Late status code verification to allow passing data when, per example, a 409 is returned\r\n        // --- https://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\r\n        if ('status' in xhr && !/^2|1223/.test(xhr.status)) {\r\n            throw xhr.status + ' (' + xhr.statusText + ')';\r\n        }\r\n        // Fulfilled\r\n        this.callback(this.response);\r\n    } catch (e) {\r\n        // Rejected\r\n        this.handleError(e);\r\n    }\r\n};\r\n\r\nXAjax.prototype.handleTimeout = function() {\r\n    if (!this.aborted) {\r\n        if (!this.options.attempts || ++this.attempts !== this.options.attempts) {\r\n            this.xhr.abort();\r\n            this.send();\r\n        } else {\r\n            this.handleError({\r\n                message: 'Timeout (' + this.url + ')'\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nXAjax.prototype.handleError = function(e) {\r\n    console.log(e);\r\n    let message = e && e.message;\r\n    if (!this.aborted) {\r\n        message = typeof message === 'string' ? message : 'Connection aborted';\r\n        this.abort();\r\n        this.errHandler(message);\r\n    }\r\n};\r\n\r\nXAjax.prototype.send = function({\r\n    method = this.method,\r\n    url = this.url,\r\n    options = this.options,\r\n    headers = this.headers\r\n} = {}) {\r\n    // Get XHR object\r\n    let xhr = getXHR();\r\n    if (this.crossOrigin && win.XDomainRequest) {\r\n        xhr = new XDomainRequest(); // CORS with IE8/9\r\n        xdr = true;\r\n    }\r\n    // Open connection\r\n    if (xdr) {\r\n        xhr.open(method, url);\r\n    } else {\r\n        xhr.open(method, url, options._async);\r\n    }\r\n    this.xhr = xhr;\r\n\r\n\r\n\r\n    // Set headers\r\n    if (!xdr) {\r\n        for (var i in headers) {\r\n            if (headers[i]) {\r\n                xhr.setRequestHeader(i, headers[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // Plug response handler\r\n    if (xhr2 || xdr) {\r\n        xhr.onload = () => {\r\n            this.handleResponse.apply(this);\r\n        };\r\n        xhr.onerror = () => {\r\n            this.handleError.apply(this);\r\n        };\r\n        // http://cypressnorth.com/programming/internet-explorer-aborting-ajax-requests-fixed/\r\n        if (xdr) {\r\n            xhr.onprogress = function() {};\r\n        }\r\n    } else {\r\n        xhr.onreadystatechange = () => {\r\n            if (xhr.readyState === 4) {\r\n                this.handleResponse.apply(this);\r\n            }\r\n        };\r\n    }\r\n    // Plug timeout\r\n    if (options._async) {\r\n        if ('timeout' in xhr) {\r\n            xhr.timeout = options.timeout;\r\n            xhr.ontimeout = () => {\r\n                this.handleTimeout.apply(this);\r\n            };\r\n        } else {\r\n            this.timeoutid = setTimeout(() => {\r\n                this.handleTimeout.apply(this);\r\n            }, options.timeout);\r\n        }\r\n        // http://cypressnorth.com/programming/internet-explorer-aborting-ajax-requests-fixed/\r\n    } else if (xdr) {\r\n        xhr.ontimeout = function() {};\r\n    }\r\n\r\n    // Send request\r\n    if (xdr) {\r\n        // https://developer.mozilla.org/en-US/docs/Web/API/XDomainRequest\r\n        setTimeout(function() {\r\n            xhr.send(this.method !== 'get' ? this.data : null);\r\n        }, 0);\r\n    } else {\r\n        xhr.send(this.method !== 'get' ? this.data : null);\r\n    }\r\n};\r\n\r\nexport default XAjax;","export const __proto__ = Object.create(null);\r\n__proto__.applyCallback = function applyCallback(key, func, type) {\r\n\r\n    const property = Object.getOwnPropertyDescriptor(this, key)\r\n    if (property && property.configurable === false) {\r\n        return;\r\n    }\r\n    \r\n    const getter = property && property.get;\r\n    let _value;\r\n\tgetter ? (_value = getter.call(this)) : (_value = (property && property.value));\r\n\r\n    const setter = property && property.set\r\n    const newProperty = {\r\n        enumerable: true,\r\n        configurable: true,\r\n    };\r\n    if (type === 'get') {\r\n        getter ? (newProperty.get = () => {\r\n            let oldval = getter.call(this);\r\n            let val = func.call(this, _value, oldval)\r\n            if (val != null) {\r\n            \treturn val;\r\n            } else {\r\n            \treturn _value;\r\n            }\r\n        }) : (newProperty.get = () => {\r\n        \tlet val = func.call(this)\r\n            if (val != null) {\r\n            \treturn val;\r\n            } else {\r\n            \treturn _value;\r\n            }\r\n        });\r\n        if (!setter) {\r\n        \tnewProperty.set = (val) => {\r\n        \t\t_value = val;\r\n        \t}\r\n        }\r\n    } else if (type === 'set') {\r\n        setter ? (newProperty.set = (val) => {\r\n            setter.call(this, val);\r\n            func.call(this, val);\r\n        }) : (newProperty.set = (val) => {\r\n            let oldval = _value;\r\n            _value = val;\r\n        \tfunc.call(this, val, oldval);\r\n        });\r\n        if (!getter) {\r\n        \tnewProperty.get = () => {\r\n        \t\treturn _value;\r\n        \t}\r\n        }\r\n    }\r\n    Object.defineProperty(this, key, newProperty);\r\n}\r\n\r\nexport const arrayproto = [];\r\nObject.assign(arrayproto, __proto__);\r\n\r\nexport const state = {\r\n    __proto__,\r\n    // 0 -> mock, 1-> forward\r\n    fetch: 1,\r\n    injected: false,\r\n    socketid: null,\r\n    mockList: {__proto__: arrayproto, length: 0, dirty: false},\r\n    urlList: {__proto__: arrayproto, length: 0},\r\n    logList: {__proto__: arrayproto, length: 0},\r\n    modal: {\r\n        __proto__,\r\n        show: false,\r\n        // 0 -> edit/add mock json ,1 -> view obj\r\n        type: 0,\r\n        title: '',\r\n        data: ''\r\n    }\r\n}\r\n","import {\r\n    bindEvent,\r\n    XAjax\r\n} from './utils';\r\nimport {\r\n    state\r\n} from './state.js';\r\n\r\n\r\nconst editMockBtn = document.getElementById('editDataBtn');\r\nconst addMockBtn = document.getElementById('addDataBtn');\r\nconst delMockBtn = document.getElementById('delDataBtn');\r\n\r\nconst injectBtn = document.getElementById('injectBtn');\r\nconst dataSelect = document.getElementById('dataSelect');\r\n\r\nlet datalist = document.querySelectorAll('#dataSelect option');\r\n\r\nstate.mockList.push(...Array.prototype.map.call(datalist, x => x.innerText));\r\nstate.mockList.current = 0;\r\n\r\nconst projectInput = document.getElementById('project');\r\nconst fetchInput = document.getElementById('fetchurl');\r\nconst mockFetch = document.getElementById('mockfetch');\r\nconst reportInput = document.getElementById('reporturl');\r\nconst mockReport = document.getElementById('mockreport');\r\n\r\n\r\nstate.applyCallback('fetch', function(isforward) {\r\n    if (isforward) {\r\n        dataSelect.setAttribute('disabled', true);\r\n        editMockBtn.setAttribute('disabled', true);\r\n        addMockBtn.setAttribute('disabled', true);\r\n        delMockBtn.setAttribute('disabled', true);\r\n    } else {\r\n        dataSelect.removeAttribute('disabled');\r\n        editMockBtn.removeAttribute('disabled');\r\n        addMockBtn.removeAttribute('disabled');\r\n        delMockBtn.removeAttribute('disabled');\r\n    }\r\n}, 'set');\r\nstate.fetch = 1;\r\n\r\nstate.mockList.applyCallback('length', function(val) {\r\n    this.dirty = true;\r\n}, 'set');\r\n\r\nstate.mockList.applyCallback('dirty', function(val) {\r\n    if(val) {\r\n        setTimeout(() => {\r\n            // render options\r\n            dataSelect.innerHTML = ''; \r\n            for(let v of this) {\r\n                if (v) {\r\n                    let node = document.createElement('option');\r\n                    node.value = v;\r\n                    node.innerText = v;\r\n                    dataSelect.appendChild(node);\r\n                }\r\n            }\r\n            this.dirty = false;\r\n            dataSelect.selectedIndex = state.mockList.current || 0;\r\n        }, 10);\r\n    }\r\n}, 'set');\r\n\r\nexport function exeInject(notify = true) {\r\n    let data = {\r\n        project: projectInput.value,\r\n        orginApi: JSON.stringify({\r\n            fetch: fetchInput.value,\r\n            report: reportInput.value\r\n        }),\r\n        mockApi: JSON.stringify({\r\n            fetch: mockFetch.value,\r\n            report: mockReport.value\r\n        }),\r\n        socketid: state.socketid\r\n    };\r\n    let getJson = new XAjax('/api/inject', data, {\r\n        method: 'post',\r\n        callback(result) {\r\n            if (result.code === 200) {\r\n                state.injected = true;\r\n                notify && alert('注入成功');\r\n            } else {\r\n                alert('注入失败，请查看控制台打印的结果');\r\n            }\r\n\r\n            console.log(result);\r\n        }\r\n    });\r\n    getJson.send();\r\n}\r\n\r\nfunction setMock(filename) {\r\n    let getJson = new XAjax('/api/task/setmock', {\r\n        filename\r\n    }, {\r\n        callback(result) {\r\n            if (result.code !== 200) {\r\n                alert('mock数据设置失败，请查看控制台打印的结果');\r\n                console.log(result);\r\n            }\r\n        }\r\n    });\r\n    getJson.send();\r\n}\r\n\r\nbindEvent(editMockBtn, 'click', (event) => {\r\n    state.modal.type = 0;\r\n    state.modal.title = dataSelect.value;\r\n    state.modal.show = true;\r\n});\r\n\r\nbindEvent(addMockBtn, 'click', (event) => {\r\n    state.modal.type = 0;\r\n    state.modal.show = true;\r\n    state.modal.title = '';\r\n    // state.mockList.current = state.mockList.length;\r\n    // state.mockList.push('');\r\n});\r\n\r\nbindEvent(injectBtn, 'click', (event) => {\r\n    exeInject();\r\n    if (dataSelect.getAttribute('disabled') == null) {\r\n        setMock(dataSelect.value);\r\n    }\r\n    if (event.preventDefault) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n    } else {\r\n        event.returnValue = false;\r\n    }\r\n});\r\n\r\n\r\nbindEvent(dataSelect, 'change', (event) => {\r\n    state.mockList.current = dataSelect.selectedIndex;\r\n});\r\n\r\nbindEvent(mockFetch, 'change', (event) => {\r\n    state.fetch = (mockFetch.value.includes('forward') ? 1 : 0);\r\n});\r\n","import { bindEvent, XAjax } from './utils';\r\nimport { state } from './state.js'\r\n\r\nconst urlList = document.getElementById(\"urllist\");\r\nlet urls = document.querySelectorAll('#urllist li');\r\nstate.urlList.push(...Array.prototype.map.call(urls, x => ({text: x.innerText.trim(), node:x})));\r\nconst urlInput = document.getElementById(\"customurl\");\r\nconst addBtn = document.getElementById(\"addBtn\");\r\nconst gotoBtn = document.getElementById(\"gotoBtn\");\r\n\r\nexport const host = gotoBtn.dataset.host;\r\n\r\nstate.urlList.applyCallback('length', function(val, oldval) {\r\n    if (val) {\r\n        this.dirty = true;\r\n    }\r\n}, 'set');\r\n// console.log(state.urlList);\r\nstate.urlList.applyCallback('dirty', function(val) {\r\n    if(val) {\r\n        // only add or remove\r\n        setTimeout(() => {\r\n            // render options\r\n            for(let v of this) {\r\n                if (!v.node) {\r\n                    let node = document.createElement('li');\r\n                    node.innerHTML = `<img src=\"/static/img/copy.svg\"><a href=\"javascript:void(0);\">${v.text}</a>`;\r\n                    urlList.appendChild(node);\r\n                    v.node = node;\r\n                }\r\n                if (!v.converted) {\r\n                    bindEvent(v.node, 'click', (e) => {\r\n                        let url = buildUrl(v.text);\r\n                        let tagname;\r\n                        if((tagname = e.target.tagName.toLowerCase()) === 'a') {\r\n                            state.logList.push({text: `You have click the link to : ${url}`});\r\n                            window.open(url);\r\n                        } else if (tagname === 'img') {\r\n                            window.prompt(\"Copy to clipboard: Ctrl+C, Enter\", url);\r\n                        }\r\n\r\n                    });\r\n                    v.converted = true;\r\n                }\r\n            }\r\n            this.dirty = false;\r\n        }, 10);\r\n    }\r\n}, 'set');\r\n\r\nstate.urlList.dirty = true;\r\n\r\nbindEvent(urlList, 'click', (event) => {\r\n    if (!state.injected) {\r\n        alert('请先注入脚本');\r\n        if (event.preventDefault) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        } else {\r\n            event.returnValue = false;\r\n        }\r\n    }\r\n}, true);\r\n\r\nbindEvent(addBtn, 'click', (event) => {\r\n    let url = urlInput.value;\r\n    if (state.urlList.find(x => x.text === url)) {\r\n        alert('列表中已存在');\r\n    } else {\r\n        let getJson = new XAjax('/api/test/addurl', {url}, {\r\n            callback(result) {\r\n                if(result.code === 200) {\r\n                    state.urlList.push({text: url});\r\n                } else {\r\n                    alert('添加失败');\r\n                }\r\n            }\r\n        });\r\n        getJson.send();\r\n    }\r\n});\r\n\r\n\r\nbindEvent(gotoBtn, 'click', (event) => {\r\n\tif (state.injected) {\r\n\t\tlet url;\r\n\t    if (url = urlInput.value) {\r\n\t    \twindow.open(buildUrl(url));\r\n\t    }\r\n\t} else {\r\n        alert('请先注入脚本');\r\n        if (event.preventDefault) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n        } else {\r\n            event.returnValue = false;\r\n        }\r\n\t}\r\n});\r\n\r\nfunction buildUrl(url) {\r\n    let fwdurl = `http://${host}/api/page/html?url=${encodeURIComponent(url)}&id=${state.socketid}`;\r\n    return fwdurl;\r\n}\r\n","import {\r\n\tstate\r\n} from './state.js';\r\nimport {\r\n\tbindEvent\r\n} from './utils';\r\nimport { host } from './urltest.js';\r\nimport { exeInject } from './inject';\r\nconst logUl = document.querySelector('.logbox ul');\r\nconst clearBtn = document.querySelector('.logbox .clear');\r\nstate.logList.applyCallback('length', function(val, oldval) {\r\n\tif (val) {\r\n\t\tclearBtn.style.display = \"inline-block\"\r\n\t\tthis.dirty = true;\r\n\t} else {\r\n\t\tfor (let i = 0; i < oldval; i++) {\r\n\t\t\tdelete this[i];\r\n\t\t}\r\n\t\tlogUl.innerHTML = '';\r\n\t\tclearBtn.style.display = 'none';\r\n\t}\r\n}, 'set');\r\nstate.logList.applyCallback('dirty', function(val) {\r\n\tif (val) {\r\n\t\t// only add or remove\r\n\t\tsetTimeout(() => {\r\n\t\t\t// render options\r\n\t\t\tfor (let v of this) {\r\n\t\t\t\tif (!v.node) {\r\n\t\t\t\t\tlet node = document.createElement('li');\r\n\t\t\t\t\tnode.value = v.text;\r\n\t\t\t\t\tnode.innerText = v.text;\r\n\t\t\t\t\tif (v.data) {\r\n\t\t\t\t\t\tlet a = document.createElement('a');\r\n\t\t\t\t\t\ta.innerText = 'more';\r\n\t\t\t\t\t\tbindEvent(a, 'click', () => {\r\n\t\t\t\t\t\t\tstate.modal.type = 1;\r\n\t\t\t\t\t\t\tstate.modal.data = JSON.stringify(v.data, null, 4);\r\n\t\t\t\t\t\t\tstate.modal.show = true;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tnode.appendChild(a);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlogUl.appendChild(node);\r\n\t\t\t\t\tv.node = node;\r\n\t\t\t\t} else {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.dirty = false;\r\n\t\t}, 10);\r\n\t}\r\n}, 'set');\r\nbindEvent(clearBtn, 'click', function() {\r\n\tstate.logList.length = 0;\r\n})\r\nconst socket = io(`http://${host}`);\r\nsocket.on('connect', function() {\r\n\tstate.socketid = this.io.engine.id;\r\n\tstate.logList.push({ text: `ready to log from : http://${host} , your socket client id: ${state.socketid}` });\r\n\t// 页面加载后即注入\r\n\texeInject(false);\r\n});\r\nsocket.on('log', function(data) {\r\n\tlet { UBA, UBAid, spend } = data;\r\n\tlet text;\r\n\tif ((UBA != null) && (UBAid != null)) {\r\n\t\ttext = `log received: UBA:${UBA} , UBAid:${UBAid} , spend: ${spend}ms`;\r\n\t} else {\r\n\t\ttext = spend ? `log received, but no UBA and UBA id found, spend: ${spend}ms` : `log received, but no UBA and UBA id found`;\r\n\t}\r\n\tstate.logList.push({ text, data });\r\n});\r\nsocket.on('page', function(data) {\r\n\tlet { url, mobile } = data;\r\n\tlet text = `page test, url:${url}, platform:${mobile ? 'H5' : 'PC'}`;\r\n\tstate.logList.push({ text, data });\r\n});\r\nsocket.on('script', function(url) {\r\n\tlet text = `script has been injected to page, url:${url}`;\r\n\tstate.logList.push({ text });\r\n});\r\nsocket.on('api', function(data) {\r\n\tlet { span, json, url } = data;\r\n\tjson = JSON.parse(json || '') || {};\r\n\tlet text = `page received sdk data: total: ${json && (json = json.data) && json.total}, spend: ${span}ms , url: ${url}`;\r\n\tstate.logList.push({ text, data: json });\r\n\tconsole.log(json);\r\n});\r\n","import {\r\n    bindEvent,\r\n    XAjax\r\n} from './utils';\r\nimport {\r\n    state,\r\n    __proto__\r\n} from './state.js'\r\n\r\nconst modalBox = document.querySelector('.modal#dataModal');\r\nconst textarea = document.querySelector('.modal#dataModal textarea#jsonData');\r\nconst modalTitle = document.querySelector('.modal#dataModal .modal-title');\r\nconst nameInput = document.querySelector('.modal#dataModal .form-filename input');\r\nconst nameLengthSpan = document.querySelector('.modal#dataModal .form-filename span');\r\nconst nameEditBtn = document.querySelector('.modal#dataModal .form-filename .btn');\r\n\r\nconst modalFooter = document.querySelector('.modal#dataModal .modal-footer');\r\n\r\nconst applyBtn = document.querySelector('.modal#dataModal #apply');\r\nconst cancelBtn = document.querySelector('.modal#dataModal #cancel');\r\nconst closeBtn = document.querySelector('.modal#dataModal .close');\r\n\r\nstate.modal.applyCallback('show', function(val) {\r\n    if (val) {\r\n        modalBox.classList.remove(\"fade\");\r\n        modalBox.style.display = \"block\";\r\n        if(this.type === 0 && this.title) {\r\n            modalTitle.style.display = \"inline-block\";\r\n            nameEditBtn.style.display = \"inline-block\";\r\n            modalFooter.style.display = \"block\";\r\n            if (this.title) {\r\n                fetchJsonData(state.modal.title);\r\n            }\r\n        } else if (this.type === 1) {\r\n            modalTitle.style.display = \"none\";\r\n            nameEditBtn.style.display = \"none\";\r\n            modalFooter.style.display = \"none\";\r\n        }\r\n    } else {\r\n        modalBox.classList.add(\"fade\");\r\n        modalBox.style.display = \"none\";\r\n    }\r\n}, 'set');\r\n\r\nstate.modal.applyCallback('title', function(val) {\r\n    modalTitle.innerText = `修改数据 - ${val}`;\r\n    if(val === '') {;\r\n        filenameState.editting = true;\r\n    }\r\n}, 'set');\r\n\r\nstate.modal.applyCallback('data', function(val) {\r\n    textarea.value = val;\r\n}, 'set');\r\n\r\n\r\nexport const filenameState = {\r\n    __proto__,\r\n    editting: false,\r\n    length: 0\r\n}\r\n\r\nfilenameState.applyCallback('length', function(val) {\r\n    nameLengthSpan.innerText = `${val}/20`;\r\n}, 'set');\r\n\r\nfilenameState.applyCallback('editting', function(val) {\r\n    if (val) {\r\n        nameInput.style.display = \"inline-block\";\r\n        nameLengthSpan.style.display = \"inline-block\";\r\n        nameInput.value = state.modal.title;\r\n        filenameState.length = state.modal.title.length;\r\n        // 防止与alert冲突\r\n        setTimeout(() => {nameInput.focus()}, 100);\r\n    } else {\r\n        nameInput.style.display = \"none\";\r\n        nameLengthSpan.style.display = \"none\";\r\n    }\r\n}, 'set');\r\n\r\n\r\n\r\nfunction fetchJsonData(filename) {\r\n    let getJson = new XAjax('/api/task/mock', {\r\n        filename,\r\n        tag: 1\r\n    }, {\r\n        callback(result) {\r\n            state.modal.data = JSON.stringify(result, null, 4);\r\n        }\r\n    });\r\n    getJson.send();\r\n}\r\n\r\nfunction saveJsonData({callback, close} = {callback: null, close: true}) {\r\n    let filename = state.modal.title;\r\n\r\n    if (filename === '') {\r\n        alert('文件名不能为空');\r\n        state.modal.title = '';\r\n        return;\r\n    }\r\n    let getJson = new XAjax('/api/task/savemock', {\r\n        filename,\r\n        mockdata: textarea.value\r\n    }, {\r\n        method: 'post',\r\n        callback(result) {\r\n            if (result.code === 200) {\r\n                \r\n                if(close) {\r\n                    state.modal.show = false;\r\n                }\r\n                if (callback) {\r\n                    callback();\r\n                } else {\r\n                    alert('保存成功');\r\n                }\r\n                // location.reload(true);\r\n            } else {\r\n                alert('保存失败');\r\n                console.log(result);\r\n            }\r\n        }\r\n    });\r\n    getJson.send();\r\n}\r\n\r\nbindEvent(nameInput, 'blur', (event) => {\r\n    let newname = nameInput.value;\r\n    if (newname === '') {\r\n        alert('必须有文件名');\r\n        return false;\r\n    }\r\n    let oldname;\r\n\r\n    if (newname !== (oldname = state.modal.title)) {\r\n        if (oldname) {\r\n            // rename\r\n            let option = {\r\n                callback: (result) => {\r\n                    if (result.code === 200) {\r\n                        state.modal.title = newname;\r\n                        state.mockList[state.mockList.current] = newname;\r\n                        state.mockList.dirty = true;\r\n                        filenameState.editting = false;\r\n                    } else {\r\n                        alert('保存失败');\r\n                        console.log(result);\r\n                    }\r\n                },\r\n                method: 'post'\r\n            };\r\n            let postName = new XAjax('/api/task/renamemock', {\r\n                oldname,\r\n                newname\r\n            }, option);\r\n            postName.send();\r\n        } else {\r\n            // 新建文件\r\n            if (state.mockList.includes(newname)) {\r\n                alert('已存在相同文件名');\r\n            } else {\r\n                state.modal.title = newname;\r\n                saveJsonData({close: false, callback:() => {\r\n                    state.mockList.push(newname);\r\n                    state.mockList.current = state.mockList.length - 1;\r\n                    filenameState.editting = false;\r\n                }});\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\nbindEvent(nameInput, 'input', (event) => {\r\n    filenameState.length = nameInput.value.length;\r\n});\r\n\r\nbindEvent(nameEditBtn, 'click', (event) => {\r\n    filenameState.editting = true;\r\n});\r\n\r\nbindEvent(applyBtn, 'click', (event) => {\r\n    saveJsonData();\r\n});\r\n\r\nbindEvent(cancelBtn, 'click', (event) => {\r\n    state.modal.show = false;\r\n});\r\n\r\nbindEvent(closeBtn, 'click', (event) => {\r\n    state.modal.show = false;\r\n});\r\n","// import './polyfills';\r\nimport './inject.js';\r\nimport './urltest.js';\r\nimport './log.js';\r\nimport './modal.js';"],"names":["_a"],"mappings":"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"}