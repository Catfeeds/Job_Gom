webpackJsonp([27],{0:function(t,n,a){(function($,t){var n=a(210),e=a(211),i=a(121).shareto,o=a(137),s=a(2),c=a(28),d=a(212),r=a(214),l=a(154),u=a(54);u.setPageData("shopDetail");var p=$('[data-node="shopTop"]'),h=p.find('[data-action="love"]'),f=h.find('[data-node="loveNum"]'),m=p.find('[data-action="collect"]'),v=m.find('[data-node="collectNum"]'),g=($('[data-node="couponBox"]'),$('[data-node="shareBtnBox"]'),$('[data-node="goodsBox"]')),x=(g.find("ul"),g.find('[data-action="moreGoods"]')),w=~~f.text();r.init(),n('[data-node="shopTop"]','[data-action="love"]',{onPraise:function(t){w++,f.text(w)},onUnPraise:function(t){w--,f.text(w)},onPraised:function(t){h.find("em").addClass("active"),f.text(w)}}),o({selector:'[data-action="collect"]',parent:'[data-node="shopTop"]'},function(t){t?v.text(~~v.text()+1).prev().addClass("active"):v.text(~~v.text()-1).prev().removeClass("active")}),e.init(),l.init();var b=null,B=$('[data-node="shareBtnBox"]'),I={},y="",k="";$('[data-node="shopTop"]').on("mouseenter",'[data-action="shareto"]',function(){y=$(this).data("surl"),$.isEmptyObject(I)&&(I={url:$(this).data("surl"),title:$(this).data("stitle"),pic:""===$(this).data("spic")?t.imgpath+"/images/public/logo.png":$(this).data("spic")},k=$(this).data("stitle")),B.css({top:$(this).offset().top+30,left:$(this).offset().left-~~$('[data-node="shareBtnBox"]').width()/2+~~$(this).width()/2}).show(),BP.send({event_id:"B000P019",shop_id:$GLOBAL_CONFIG.shopId})}).on("mouseleave",'[data-action="shareto"]',function(){b=setTimeout(function(){B.hide()},100)}),B.on("mouseenter",function(){clearTimeout(b)}).on("mouseleave",function(){$(this).hide()});var q=function(t){BP.send({event_id:"B000P016",shop_id:$GLOBAL_CONFIG.shopId,channel_id:t||""})},C=p.find("img").attr("src"),T=function(t){return"https://i-pre.meixincdn.com/v1/img/T1gyVTBmLT1R4cSCrK.png"!=t&&"https://i6.meixincdn.com/v1/img/T1YFxTByJT1R4cSCrK.png"!=t&&"https://i-pre.meixincdn.com/v1/img/T1TaVTB7LT1R4cSCrK.png"!=t},L=function(t){var n=/\w+\.(jpg|gif|bmp|png)$/;return!!T(t)&&n.test(t)};B.on("click",'[data-shareto="weixin"]',function(){I.url=$GLOBAL_CONFIG.weixin_share,I.title=k,i.weixin(I),q("out-weixin")}).on("click",'[data-shareto="qq"]',function(){I.url=y,I.title=k,I.summary="我发现了前所未有的好店，不如，你也来逛逛？",I.pic=L(C)?C:t.imgpath+"/images/public/logo.jpg",i.qq(I),q("out-QQ")}).on("click",'[data-shareto="sina"]',function(){I.url=y,I.title=k+",这是我费尽千辛万苦找到的超级好店。",I.pic=L(C)?C:t.imgpath+"/images/public/logo.jpg",i.sina(I),q("out-xlwb")}).on("click",'[data-shareto="qzone"]',function(){I.url=y,I.title=k,I.summary="这是我费尽千辛万苦找到的超级好店。",I.pic=L(C)?C:t.imgpath+"/images/public/logo.jpg",i.qzone(I),q("out-Qqzone")});var _=2,G=$GLOBAL_CONFIG.shopId;x.on("click",function(){var n=$(this).html(),a=this;$(a).hasClass("disabled")||($(a).addClass("disabled").html('<span><img src="'+t.imgpath+'/images/public/loading.gif">正在加载...</span>'),s.get(c.get("moreGoods"),{data:{shop_id:~~$GLOBAL_CONFIG.shopId,type:~~$GLOBAL_CONFIG.type,pageNum:_,numPerPage:15}}).done(function(t){var e=t.data.itemList;e.length<15?$(a).html("<span>没有可加载内容</span>"):0==e.length?$(a).html("<span>没有可加载内容</span>"):$(a).removeClass("disabled").html(n),d(e,G),_++}))})}).call(n,a(1),a(4))},84:function(t,n,a){(function($){var n,a,e,i=function(){n.off().on("click",function(){n.hide(),a.hide()}),a.off().on("click",function(){n.hide(),a.hide()})},o=function(t,o){var s={duration:2e3,callback:function(){}};$.extend(s,o||{}),clearTimeout(e),n=$('[data-action="publicMask"]'),a=$('[data-action="publicTips"]'),n.length>0?(n.show(),a.show().text(t)):($("body").append('<div data-action="publicMask" class="ordi-toast"></div><div class="ordi-toast-txt" data-action="publicTips">'+t+"</div>"),n=$('[data-action="publicMask"]'),a=$('[data-action="publicTips"]'),i()),a.css("margin",-a[0].offsetHeight/2+"px 0 0 "+-a.width()/2+"px"),e=setTimeout(function(){n.hide(),a.hide(),s.callback()},s.duration)};t.exports={init:o,events:i}}).call(n,a(1))},121:function(t,n,a){(function($){var n=a(2),e=a(28),i=a(122),o=a(42),s={qq:"http://connect.qq.com/widget/shareqq/index.html",sina:"http://v.t.sina.com.cn/share/share.php",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey"},c={url:"http://www.gomeplus.com",title:"国美+APP边玩边分享，购物不孤单",pic:"http://www.gomeplus.com/images/logo.png",summary:"国美+APP边玩边分享，购物不孤单"},d=function(t){window.open(t)},r=!1,l=function(){var t='<p data-node="shareBtnBox" class="share-down" style="z-index:21;"><span class="share-box"><span class="icon icon-up-arrow"></span><span class="icon-box"><em data-shareto="weixin" class="icon icon-weixin">&#xe937;</em><em data-shareto="qq" class="icon icon-qq">&#xe900;</em><em data-shareto="sina" class="icon icon-sina">&#xe935;</em><em data-shareto="qzone" class="icon icon-kongjian">&#xe902;</em></span></span></p>';$("body").append(t),r=!0},u=function(t){!r&&l(),$("[data-node=shareBtnBox]").css({left:t.x,top:t.y}).show()},p=!1,h=function(){var t='<div class="share-weixin"><div class="wx-mask"></div><div class="wx-main"><div class="wx-code"><span></span><img data-node="shareWeixinCode" alt="分享到微信" /></div><p>打开微信扫一扫，即可分享</p><a href="javascript:;" title="点击关闭" class="wx-close">×</a></div></div>';$("body").append(t),p=!0},f=function(t,n){var a=[],e={title:t.title,url:t.url,summary:t.summary,desc:t.desc,site:t.site};n?e.pics=t.pic:e.pic=t.pic;for(var i in e)a.push(i+"="+encodeURIComponent(e[i]||""));return a.join("&")},m={weixin:function(t){var n=i(t.url);!p&&h(),$("[data-node=shareWeixinCode]")[0].src=n,$(".share-weixin").show(),$(".wx-close").on("click",function(){$(".share-weixin").hide()})},qq:function(t){var n=s.qq+"?"+f(t,!0);d(n)},sina:function(t){var n=s.sina+"?"+f(t);d(n)},qzone:function(t){var n=s.qzone+"?"+f(t,!0);d(n)}},v=function(t){var a="0"!==t.isRebate;n.get(e.get("shareGetGoodsKid"),{validate:a,data:{skuId:t.skuId,itemId:t.itemId,parentKid:t.parentKid},async:!1}).done(function(n){if(n.success===!0){var a=n.data.kid,e=t.shareInfo,i=e.url,o=i.indexOf("?");o>0&&(i=i.substring(0,o)),e.url=i+"?onlineUserId="+e.onlineUserId+"&kId="+a,m[t.shareto](e)}else m[t.shareto](t.shareInfo)}).fail(function(n){a?o()&&m[t.shareto](t.shareInfo):m[t.shareto](t.shareInfo)})},g=function(t){var n={title:t.title||c.title,url:t.url||c.url,pic:t.pic||c.pic,summary:t.summary||"",desc:t.desc||""};!!m[t.type]&&m[t.type](n)},x=function(t,n,a){var e=null;$item="string"==typeof t?$(t):t,n=n||"[data-action=shareto]",$item.on("mouseenter",n,function(t){var n=$(this).data("surl"),a=$(this).data("stitle"),i=$(this).data("spic");e={url:n,title:a,pic:i};var o=$(this).width(),s=$(this).height(),c=$(this).offset().left/1+o/2-80+"px",d=$(this).offset().top/1+(s-1)+"px";return u({x:c,y:d}),!1}),$item.on("mouseleave",n,function(t){return $("[data-node=shareBtnBox]").hide(),!1}),$("body").on("click","[data-shareto]",function(t){t.preventDefault(),shareType=$(this).data("shareto"),e.type=shareType,a=a||function(){},a.call(null,e),g(e)}),$("body").on("mouseenter","[data-node=shareBtnBox]",function(){$(this).show()}),$("body").on("mouseleave","[data-node=shareBtnBox]",function(){$(this).hide()})};t.exports={share:g,shareto:m,shareItem:x,shareWithKid:v}}).call(n,a(1))},122:function(t,n,a){(function(n){var a=function(t){return n.wap_url+"q.php?t="+encodeURIComponent(t)};t.exports=a}).call(n,a(4))},137:function(t,n,a){(function($){var n=a(2),e=a(28),i=a(84),o=a(42),s=!1,c=function(t,a){var c=$(t.parent?t.parent:t.selector),d=t.parent?t.selector:void 0;c.on("click",d,function(){function t(t){n.post(collectUrl,t).done(function(t){200===t.code?(d?$(c).addClass("active").attr("data-collect","collect"):$(c).removeClass("active").attr("data-collect",""),r.call(c,d)):i.init(t.message)}).fail(function(t,n){o()&&i.init("店铺收藏失败")}).always(function(){s=!1})}var c=this,d=!0,r=a||function(){},l={validate:!0,data:{shopId:$GLOBAL_CONFIG.shopId}};return s||(s=!0,""===$(c).attr("data-collect")?(collectUrl=e.get("shopCollect"),d=!0):(collectUrl=e.get("unShopCollect"),d=!1)),t(l),!1})};t.exports=c}).call(n,a(1))},154:function(t,n,a){(function($){var n=a(42),e=a(3),i=function(){$('[data-action="shortcutBanner"]').on("click","a",function(t){var a=$(this);n()||(t.preventDefault(),e({onLogin:function(){window.location.href=a.attr("href")}}))})};t.exports={init:i}}).call(n,a(1))},210:function(t,n,a){(function($,n){var e=a(2),i=a(28),o=a(36),s=a(43),c=a(68),d=a(42),r=d(),l=function(){},u=function(t,n,a){t.data("praise",n),t.data("count",a)},p={normal:{add:function(t,n,a){t.find("em").addClass("active"),a||(a="取消点赞"),t.find("span").text(a)},reduce:function(t,n,a){t.find("em").removeClass("active"),a||(a="点赞"),t.find("span").text(a)}}},h=function(t){return p[t]},f=function(t,a,d){var p=$(t),f=d.onPraise||l,m=d.onUnPraise||l,v=d.onPraised||l,g=d.mode||"normal";p.on("click",a,function(){function t(t){e.post(i.get("praise"),t).done(function(t,e,i){var d=h(g);if(s(c.comment.enableEditor).pub({pid:"enable"}),t&&200===t.code&&t.success)1===p?(u(a,0,++w),d.add(a,t,w),f.call(a,t,w)):0===p&&(u(a,1,--w),d.reduce(a,t,w),m.call(a,t,w));else if(t&&422===t.code);else if(t&&403===t.code)o("抱歉！该话题审核未通过",{ok:function(){window.location.href=n.group_domain+"index/error?code=topic"}});else{var x=t.message;if(409===t.code)return v.call(a,t,w),r&&o(x),!1;0===l&&404===t.code?o(x,{ok:function(){window.location.reload()}}):o(x)}}).fail(function(t,n,a){}).always(function(){a.data("firing",0)})}var a=$(this),d=a.data("firing");if(1!==d){a.data("firing",1);var l=a.data("type"),p=a.data("praise"),x=a.data("id"),w=a.data("count"),b={validate:!0,data:{id:x,type:l,isPraise:p},onLogin:t,refresh:!0};return t(b),!1}})};t.exports=f}).call(n,a(1),a(4))},211:function(t,n,a){(function($){var n=a(84),e=a(28),i=a(2),o=function(){var t;$(document).on("click",'[data-action="getRed"]',function(){t=$(this).attr("data-redid");var a=function(){i.post(e.get("getTicket"),{validate:!0,data:{batchSn:t,userId:$GLOBAL_CONFIG.userId},onLogin:a}).done(function(t){t&&t.success&&200===t.code?n.init("领取成功"):n.init(t.message)}).fail(function(){})};return a(),!1})};t.exports={init:o}}).call(n,a(1))},212:function(t,n,a){(function($,n){var e=a(213),i=function(t,a){var i=$('[data-node="goodsBox"]'),o=i.find("ul"),s="",c=n.mall_domain;s=e({data:t,shopId:a,hostName:c}),o.append(s)};t.exports=i}).call(n,a(1),a(4))},213:function(t,n,a){var e=a(26);t.exports=e("src/js/widget/shopInfo/shopInfo",function(t,n){"use strict";var a=this,e=(a.$helpers,a.$each),i=t.data,o=(t.$value,t.$index,a.$escape),s=t.hostName,c=t.shopId,d="";return d+=" ",e(i,function(t,n){d+=" <li> ",i[n].isRebate&&i[n].isDiscount?d+=' <em class="icon-fan">返</em> ':(d+=" ",i[n].isRebate&&(d+=' <em class="icon-fan">返</em> '),d+=" ",i[n].isDiscount&&(d+=' <em class="icon-fan icon-jiang">降</em> '),d+=" "),d+=' <div class="mg-negative"> <a href="',d+=o(s),d+="product/",d+=o(c),d+="-",d+=o(i[n].id),d+='.html" target="_blank"> <img src=',d+=o(i[n].img),d+=' alt="',d+=o(i[n].title),d+='"> </a> <div class="btn-box"> <a href="',d+=o(s),d+="product/",d+=o(c),d+="-",d+=o(i[n].id),d+='.html" target="_blank" class="pc-btn pc-btnh40">立即购买</a> <a href="',d+=o(s),d+="product/",d+=o(c),d+="-",d+=o(i[n].id),d+='.html" target="_blank" class="pc-btn pc-btnh40 pc-bj-fc8753">加入购物车</a> </div> <div class="text">￥<span>',d+=o(i[n].price),d+='</span> <p title="',d+=o(i[n].title),d+='">',d+=o(i[n].title),d+="</p> </div> </div> </li> "}),d+=" ",new String(d)})},214:function(t,n,a){(function($){var n,a=$('[data-action="shopSelector"]'),e=$('[data-node="shopSelectList"]'),i=function(){a.on("mouseenter",function(){a.addClass("hover"),e.show()}),a.on("mouseleave",function(){n=setTimeout(function(){a.removeClass("hover"),e.hide()},200)}),e.on("mouseenter",function(){clearTimeout(n)}),e.on("mouseleave",function(){a.removeClass("hover"),e.hide()})};t.exports={init:i}}).call(n,a(1))}});