webpackJsonp([9],{0:function(t,e,n){(function($){var t=n(128);n(41),$("input").placeholder(),t();var e=n(54);e.setPageData("forgetPwd")}).call(e,n(1))},47:function(t,e){var n=function(t){return t.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")};t.exports=n},48:function(t,e){var n={checkVal:function(t,e){return e.test(t)},isMobileNum:function(t){return/^1[34578][0-9]{9}$/.test(t)},isEmail:function(t){return/w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/.test(t)},isCertificate:function(t){return/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/.test(t)},isCID:function(t){return/^(\d{16}|\d{19})$/.test(t)},isCWord:function(t,e,n){var e=!isNaN(e)&&e>0?e:1,n=!isNaN(n)&&n>0?n:"",a=new RegExp("^[\\u4e00-\\u9fa5]{"+e+","+n+"}$");a.test(t);return a.test(t)},isArray:function(t){return Array.isArray(t)||t instanceof Array},passwordReg:function(t){var e=/^((?=.*?\d)(?=.*?[A-Za-z])|(?=.*?\d)(?=.*?[<>《》！\*\(\^\)\$%~!@#\…&%￥—\+=、。，\"\,\:\;；,\.‘’“”：'"\·`【】])|(?=.*?[A-Za-z])(?=.*?[<>《》！\*\(\^\)\$%~!@#\…&%￥—\+=、。，；‘’“”：'"\·`,\.【】]))[\dA-Za-z<>《》！\*\(\^\)\$%~!@#\…&%￥—\+=、。，；‘’“”：'"\·`,\.【】]{6,21}$/;return e.test(t)},checkSpace:function(t){var e=/\s+/;return e.test(t)},checkRefCode:function(t){var e=/^[0-9a-zA-Z]{8}$/;return e.test(t)},checkNickName:function(t){var e=/^([\u4e00-\u9fa5]|[0-9a-zA-Z_-])+$/;return e.test(t)},isMsgCode:function(t){var e=/^\d{6}$/;return e.test(t)}};t.exports=n},62:function(t,e){var n=function(){},a=function(t,e){this.onChange=e.onChange||n,this.onFinish=e.onFinish||n,this.count=t||60,this.start()};a.prototype.start=function(){var t=this;setTimeout(function(){t.onChange(t.count),t.count--,t.count<=0?t.onFinish():t.start()},1e3)},t.exports=a},63:function(t,e){function n(t,e){return t.length>e?t.substr(0,e):t}t.exports=n},84:function(t,e,n){(function($){var e,n,a,o=function(){e.off().on("click",function(){e.hide(),n.hide()}),n.off().on("click",function(){e.hide(),n.hide()})},i=function(t,i){var r={duration:2e3,callback:function(){}};$.extend(r,i||{}),clearTimeout(a),e=$('[data-action="publicMask"]'),n=$('[data-action="publicTips"]'),e.length>0?(e.show(),n.show().text(t)):($("body").append('<div data-action="publicMask" class="ordi-toast"></div><div class="ordi-toast-txt" data-action="publicTips">'+t+"</div>"),e=$('[data-action="publicMask"]'),n=$('[data-action="publicTips"]'),o()),n.css("margin",-n[0].offsetHeight/2+"px 0 0 "+-n.width()/2+"px"),a=setTimeout(function(){e.hide(),n.hide(),r.callback()},r.duration)};t.exports={init:i,events:o}}).call(e,n(1))},128:function(t,e,n){(function($,e){function a(){C.placeholder(),g.placeholder(),g.on({blur:N,focus:z,keyup:S}),p.on("click",D),C.on({focus:F,blur:Z,keyup:B}),v.on("click",P)}var o=(n(47),n(62)),i=n(2),r=n(28),s=n(84).init,c=n(35),d=n(63),u=n(48);n(41);var l,f=$('[data-node="forgetPwdStepTwo"]'),p=f.find('[data-action="sendMsgBtn"]'),v=f.find('[data-action="nextStep"]'),h=f.find('[data-node="errorCode"]'),C=f.find('[data-node="msgCode"]'),x=f.find('[data-node="errorBorderCode"]'),g=f.find('[data-node="tel"]'),m=f.find('[data-node="errorTel"]'),b=f.find('[data-node="errorBorderTel"]'),k=f.find("[data-node=publicErrBox]"),w=f.find("[data-node=publicErr]"),A="lg-form-error",y="code-disabled",T="none",E=1,M=e.passport_domain,N=function(){var t=g.val(),e=u.isMobileNum(t),n=!0;return t?e?(b.removeClass(A),m.text("")):(b.addClass(A),m.text(c.tel.err),n=!1):(b.addClass(A),m.text(c.tel.ept),n=!1),n},S=function(){var t=(g.val()+"").length;t>11&&g.val(d(g.val()+"",11))},z=function(){b.removeClass(A),m.text(""),k.addClass(T),w.text("")},Z=function(){var t=C.val(),e=1;return t?/^\d{6}$/.test(t)?e=1:(x.addClass(A),h.text(c.msgCode.tipErr),e=0):(x.addClass(A),h.text(c.msgCode.tipEpt),e=0),e},B=function(){var t=(C.val()+"").length;t>6&&C.val(d(C.val()+"",6))},F=function(){x.removeClass(A),h.text(""),k.addClass(T),w.text("")},D=function(){var t=N();if(!E||!t)return!1;l=g.val();var e={mobileOrEmail:l};i.post(r.get("sendMsgCodeV2"),{data:e}).then(function(t){if(t.success){if(t.data.isStoreUser)return s("您是门店会员，将为您跳转至门店重置密码页",{callback:function(){location.href=M+"/shop/index"}}),!1;k.addClass(T),w.text(""),x.removeClass(A),h.text(c.msgCode.tipSend).css("color","#f95353"),new o(60,{onChange:function(t){E=0,p.text(t+c.msgCode.btnAfterSend).addClass(y)},onFinish:function(){E=1,p.text(c.msgCode.btnDefault).removeClass(y)}})}else k.removeClass(T),w.text(t.message)})},P=function(){var t=C.val(),e=g.val(),n=N(),a=Z();if(!n||!a)return!1;var o={verifycode:t,mobileOrEmail:e};i.post(r.get("checkCode"),{data:o}).then(function(t){t.success?(x.removeClass(A),h.text(""),location.href=M+"/forgetpwd/step2"):(k.removeClass(T),w.text(t.message))})};t.exports=a}).call(e,n(1),n(4))}});