webpackJsonp([38],{0:function(a,t,e){e(258).init(),e(259)(),e(261).init(),e(263).init();var n=e(54);n.setPageData("uc_orders")},53:function(a,t,e){(function($){var t=e(22),n=function(){},i=function(a,e){var i={fixed:!0,modal:!0,content:'<p class="del-pop-p">'+a+"</p>",className:"pop-box",okCls:"pc-btn pc-btnh35 circle-pop-btn",ok:n,cancel:n,btnWrapCls:"two-buttons"};$.extend(!0,i,e);var o=t(i);return o.show(),o};a.exports=i}).call(t,e(1))},84:function(a,t,e){(function($){var t,e,n,i=function(){t.off().on("click",function(){t.hide(),e.hide()}),e.off().on("click",function(){t.hide(),e.hide()})},o=function(a,o){var d={duration:2e3,callback:function(){}};$.extend(d,o||{}),clearTimeout(n),t=$('[data-action="publicMask"]'),e=$('[data-action="publicTips"]'),t.length>0?(t.show(),e.show().text(a)):($("body").append('<div data-action="publicMask" class="ordi-toast"></div><div class="ordi-toast-txt" data-action="publicTips">'+a+"</div>"),t=$('[data-action="publicMask"]'),e=$('[data-action="publicTips"]'),i()),e.css("margin",-e[0].offsetHeight/2+"px 0 0 "+-e.width()/2+"px"),n=setTimeout(function(){t.hide(),e.hide(),d.callback()},d.duration)};a.exports={init:o,events:i}}).call(t,e(1))},251:function(a,t,e){(function(t){var n=(e(53),e(36)),i=function(){var a=t.imgpath;n("",{okCls:"hide",content:'<div class="sm-download"><img src="'+a+'/images/public/ma1.jpg"><p>描二维码，下载国美+APP联系商家</p></div>'})};a.exports=i}).call(t,e(4))},253:function(a,t,e){(function($){var t=function(a){var t="string"==typeof a.msg?a.msg:"",e=a.x||0,n=a.y||0,i=a.delay||2e3,o=0,d=0,r=$('<div class="small-mask" style="position:absolute;z-index:999;">'+t+"</div>");return""!==t&&($("body").append(r),o=parseFloat(r.outerWidth()),d=parseFloat(r.outerHeight()),r.css({left:e-o,top:n-d-10,right:"auto"}),void(r.timer=setTimeout(function(){r.stop().animate({opacity:0},200,function(){clearTimeout(r.timer),r.remove()})},i)))};a.exports=t}).call(t,e(1))},254:function(a,t,e){var n=e(2),i=e(28),o=e(53),d=e(36),r=e(84).init,s={cancelOrder:"确认要取消订单吗？",cancelFail:"订单取消失败!网络可能出问题了~",canceled:"系统已取消订单"},c=function(a){var t=a.isPayed?"payedCancelOrder":"unPayCancelOrder";o(s.cancelOrder,{title:"操作",width:500,className:"pop-box",btnWrapCls:"text-center",okCls:"two-button two-button-red",cancelCls:"two-button",ok:function(){n.get(i.get(t),{data:{id:a.id}}).done(function(t){var e=t.data,n=e.status,i=e.statusDesc;return t.success===!0?void a.okFn(i):void(n==-1||n==-6?a.okFn(i):1!=n||0!=n?(r(s.canceled),setTimeout(function(){location.reload()},2e3)):r(t.message))}).fail(function(a){d(s.cancelFail)})}})};a.exports=c},256:function(a,t,e){var n=e(2),i=e(28),o=e(53),d=e(84).init,r={confirmReceipt:"确认已收到货了吗？",confirmFail:"确认收货失败!网络可能出问题了~",delayReceipt:"确认延长7天收货时间吗？",delayFail:"延迟收货失败！网络可能出问题了~",confirmed:"已经确认收货"},s=function(a){o(r.confirmReceipt,{title:"确认收货",width:500,className:"pop-box",btnWrapCls:"text-center",okCls:"two-button two-button-red",cancelCls:"two-button",ok:function(){n.post(i.get("confirmReceipt"),{data:{orderId:a.id}}).done(function(t){var e=t.data,n=e.status,i="交易成功";return t.success===!0?void a.okFn(i):void(3==n?(d(r.confirmed),a.okFn(i)):d(t.message))}).fail(function(a){d(r.confirmFail)})}})},c=function(a){o(r.delayReceipt,{title:"延迟收货",width:500,className:"pop-box",btnWrapCls:"text-center",okCls:"two-button two-button-red",cancelCls:"two-button",ok:function(){n.post(i.get("delayReceipt"),{data:{orderId:a.id}}).done(function(t){t.data.status;t.success===!0?a.okFn():(d(t.message),setTimeout(function(){location.reload()},2e3))}).fail(function(a){d(r.delayFail)})}})};a.exports={confirmReceipt:s,delayReceipt:c}},258:function(a,t,e){(function($){var t=(e(53),e(253),e(254)),n="[data-action=unPayCancel]",i="[data-action=payedCancel]",o="[data-node=orderStauts]",d=$("[data-node=orderStateNav]"),r=(d.data("status"),$("[data-node=orderList]")),s=function(){r.on("click",n,function(){var a=$(this),e=$("[data-node=dfkNum]"),n=e.data("count"),i=a.data("id");return!(n<1)&&void t({isPayed:!1,id:i,okFn:function(a){location.reload()}})})},c=function(){r.on("click",i,function(){var a=$(this),e=$("[data-node=dfhNum]"),n=e.data("count"),i=a.data("id");return!(n<1)&&void t({isPayed:!0,id:i,okFn:function(t){a.addClass("order-blank-btn-disabled"),a.attr("data-action","cancelling"),a.parents("table").find(o).text(t)}})})},l=function(){s(),c()};a.exports={init:l}}).call(t,e(1))},259:function(a,t,e){(function($,t){var n=e(2),i=e(28),o=e(36),d=e(260),r="loadMoreOrder",s={loadFail:"加载失败"},c=1,l=parseInt($("[data-node=orderStateNav]").data("status")),u=15,p=$("[data-node=orderList]"),f=$("[data-node=pageMore]"),m=$("[data-node=pageLoading]"),h=$("[data-node=pageNothing]"),b=t,v=function(){f.on("click",function(){function a(a){a?(f.hide(),m.show()):(m.hide(),f.show())}var t=c+1;a(!0),n.get(i.get(r),{data:{page:t,status:l,pageSize:u}}).done(function(e){function n(){f.hide(),m.hide(),h.show()}var i={};if(e.success===!0){if(i.list=e.data.orders,i.domain=b,!i.list.length)return n(),!1;var r=d(i);p.append(r),c=t,i.list.length<u?n():a(!1)}else o(s.loadFail),a(!1)}).fail(function(t){o(s.loadFail),a(!1)})})};a.exports=v}).call(t,e(1),e(4))},260:function(a,t,e){var n=e(26);a.exports=n("src/js/page/uc_orders/loadMore/orderList",function(a,t){"use strict";var e=this,n=(e.$helpers,e.$each),i=a.list,o=(a.v,a.$index,e.$escape),d=(a.vv,a.i,a.domain),r=(a.attr,"");return n(i,function(a,t){r+=' <table class="order-prod-info"> <tr> <td colspan="7" class="order-base-nav"> <ul class="clearfix"> <li class="time">',r+=o(a.orderTime),r+='</li> <li class="order-number">订单号： ',0==a.status?(r+=' <a href="javascript:;" class="color-default">',r+=o(a.mergerId),r+="</a> "):(r+=' <a href="javascript:;" class="color-default">',r+=o(a.id),r+="</a> "),r+=" </li> ",0==a.status&&(r+=' <li class="color-default"><em class="icon icon-platform">&#xe9df;</em> <a href="javascript:;">国美+购物平台</a> </li> '),r+=' </ul> </td> </tr> <tr> <td colspan="4" class="order-l clearfix"> ',n(a.orderItems,function(t,e){r+=' <div class="order-l-list ',e+1==a.orderItems.length&&(r+="bor-none"),r+=' clearfix"> <a target="_blank" href="',r+=o(d.mall_domain),r+="item/",r+=o(a.orderItems[0].mshop.id),r+="-",r+=o(t.sku.item.id),r+=".html?skuid=",r+=o(t.sku.id),r+='"> <img src="',r+=o(t.sku.image),r+='" onerror="imgError(this);" class="order-img"> </a> <div class="parameter"> <a target="_blank" href="',r+=o(d.mall_domain),r+="item/",r+=o(a.orderItems[0].mshop.id),r+="-",r+=o(t.sku.item.id),r+=".html?skuid=",r+=o(t.sku.id),r+='">',r+=o(t.sku.item.shortName),r+="</a> <p>",n(t.sku.attributes,function(a,e){r+=o(a.name),r+="：",r+=o(a.value),e<t.sku.attributes.length-1&&(r+="&emsp;")}),r+='</p> </div> <span class="s-price">￥',r+=o(t.sku.price),r+='</span> <span class="count-num">',r+=o(t.quantity),r+='</span> <div class="connect-shop more" data-node="connect-firm" data-rechange=\'{"orderid":',r+=o(a.id),r+=',"skuid":',r+=o(t.sku.id),r+=',"goodsid":',r+=o(t.sku.item.id),r+=' }\'> <a href="javascript:;" data-action="ContactMerchant">联系商家</a> ',t.returnGoodsForSevenDays&&(r+=' <a href="',r+=o(d.i_domain),r+="order/showDataInfo?orderid=",r+=o(a.id),r+="&skuid=",r+=o(t.sku.id),r+="&optype=1&goodid=",r+=o(t.sku.item.id),r+='" >退货</a> '),r+=" ",t.changeGoodsForFifteenDays&&(r+=' <a href="',r+=o(d.i_domain),r+="order/showDataInfo?orderid=",r+=o(a.id),r+="&skuid=",r+=o(t.sku.id),r+="&optype=2&goodid=",r+=o(t.sku.item.id),r+='" >换货</a> '),r+=" </div> </div> "}),r+=' </td> <td class="t-price"><span class="price">￥',r+=o(a.paymentAmount),r+='</span> <p class="fare">（含运费：￥',r+=o(a.shippingCost),r+='）</p> </td> <td class="trading-status"> <span>',r+=o(a.statusDesc),r+="</span> ",0==a.status?(r+=' <a target="_blank" href="',r+=o(d.i_domain),r+="order/detail?id=",r+=o(a.mergerId),r+='&type=1">查看详情</a> '):(r+=' <a target="_blank" href="',r+=o(d.i_domain),r+="order/detail?id=",r+=o(a.id),r+='">查看详情</a> '),r+="  ",a.hasLogistics&&(r+=' <a target="_blank" href="',r+=o(d.i_domain),r+="order/orderLogistics?orderId=",r+=o(a.id),r+="&statu=",r+=o(a.status),r+='" >查看物流</a> '),r+=' </td> <td class="order-operate"> ',0==a.status?(r+=' <a target="_blank" href="',r+=o(d.order_domain),r+="order/payDetail?mergerId=",r+=o(a.mergerId),r+='" class="order-blank-btn order-pay-btn marb14">立即支付</a> <a href="javascript:;" data-action="unPayCancel" class="order-blank-btn" data-id="',r+=o(a.mergerId),r+='">取消订单</a> '):1==a.status?(r+=' <a class="order-blank-btn" data-action="payedCancel" href="javascript:;" data-id="',r+=o(a.id),r+='" >取消订单</a> '):a.status==-1?r+=' <a class="order-blank-btn order-blank-btn-disabled" data-action="cancelling" href="javascript:;">取消订单</a> ':2==a.status?(r+=' <a href="javascript:;" data-action="confirmReceipt" class="order-blank-btn marb14" data-id="',r+=o(a.id),r+='" >确认收货</a> ',1==a.allowDelayConfirm&&(r+=' <a href="javascript:;" data-action="delayReceipt" class="order-blank-btn" data-id="',r+=o(a.id),r+='">延迟收货</a> '),r+=" "):3==a.status&&0==a.hasComment?(r+=' <a target="_blank" href="',r+=o(d.i_domain),r+="order/showCommentInfo?orderid=",r+=o(a.id),r+='" class="order-blank-btn">立即评价</a> '):a.status==-12?r+=" ":a.status==-5&&(r+=" "),r+=" </td> </tr> </table> "}),new String(r)})},261:function(a,t,e){(function($,t){var n=(e(2),e(28),e(53),e(36),e(84).init),i=(e(253),e(256)),o=e(262),d="[data-action=confirmReceipt]",r="[data-action=delayReceipt]",s="[data-node=orderStauts]",c=$("[data-node=orderStateNav]"),l=c.data("status"),u=$("[data-node=orderList]"),p=t,f=9,m=function(a){var t=a.find("[data-node=connect-firm]");$.each(t,function(a,t){var e=$(t),n=e.data("rechange"),i="";n.i_domain=p.i_domain,i=o(n),e.append($(i))})},h=function(){u.on("click",d,function(){var a=$(this),t=$("[data-node=dshNum]"),e=t.data("count"),n=$("[data-node=dpjNum]"),o=n.data("count"),d=0,r=0,c=a.data("id");return!(e<1)&&void i.confirmReceipt({id:c,okFn:function(i){var u=a.parents("table");l?location.reload():(m(u),u.find(s).text(i),a.parent().html('<a href="'+p.i_domain+"order/showCommentInfo?orderid="+c+'" class="order-blank-btn">立即评价</a>'),r=e-1,d=o+1,t.data("count",r),n.data("count",d),r<=f&&t.text(r||""),d>f?n.text(f+"+"):n.text(d))}})})},b=function(){u.on("click",r,function(){var a="order-blank-btn-disabled",t=$(this),e=t.data("id"),o=t.hasClass(a);return!o&&void i.delayReceipt({id:e,okFn:function(){n("操作成功"),t.remove()}})})},v=function(){h(),b()};a.exports={init:v}}).call(t,e(1),e(4))},262:function(a,t,e){var n=e(26);a.exports=n("src/js/page/uc_orders/confirmReceipt/returnChange",function(a,t){"use strict";var e=this,n=(e.$helpers,e.$escape),i=a.i_domain,o=a.orderid,d=a.skuid,r=a.goodsid,s="";return s+='<a href="',s+=n(i),s+="order/showDataInfo?orderid=",s+=n(o),s+="&skuid=",s+=n(d),s+="&optype=1&goodid=",s+=n(r),s+='" >退货</a> <a href="',s+=n(i),s+="order/showDataInfo?orderid=",s+=n(o),s+="&skuid=",s+=n(d),s+="&optype=2&goodid=",s+=n(r),s+='" >换货</a>',new String(s)})},263:function(a,t,e){(function($){var t=e(251),n=function(){var a=$("[data-node=orderList]"),e="[data-action=ContactMerchant]";a.on("click",e,function(){t()})};a.exports={init:n}}).call(t,e(1))}});