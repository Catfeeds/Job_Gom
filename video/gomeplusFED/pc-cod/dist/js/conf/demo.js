webpackJsonp([7],{0:function(n,e,t){(function(n,$){var e=(t(2),t(43)),a=(t(28),t(49),t(71),t(44),t(116),t(118),t(36),t(53),t(121));a.shareItem("[data-action=shareList]");var i=(t(123),function(n){});e("mailArrived").sub(i),e("mailArrived").pub({title:"value from publish uu "}),$("[data-trigger=spinner]").spinner({delay:200,min:1,max:3,beforeChange:function(){return!1},rangemin:function(){},rangemax:function(){},changed:function(n,e,t){}})}).call(e,t(1),t(1))},44:function(n,e,t){(function(e,$){var a=t(45),i=t(22),o=t(43),r=t(2),s=t(28),d=t(46),c=t(47),l=(t(48),t(49)),u=(t(41),t(50)),h=t(36);t(52);var p,f,m,v,g,x,y,b,w,C,k=function(){p=this._$("content"),f=p.find("[data-node=name]"),m=p.find("[data-node=nameTip]"),v=p.find("[data-node=idCard]"),g=p.find("[data-node=idCardTip]"),x=p.find("[data-node=addr]"),y=p.find("[data-node=addrTip]"),b=p.find("[data-node=phone]"),b.attr("maxlength",12),w=p.find("[data-node=phoneTip]"),$setDefault=p.find("[data-node=setDefault]"),$areaList=p.find("[data-node=areaList]"),$province=p.find("[data-node=province]"),$city=p.find("[data-node=city]"),$borough=p.find("[data-node=borough]"),C=p.find("[data-node=areaTip]")},I=function(){f.placeholder(),x.placeholder(),b.placeholder()},N=function(n,e,t){var a=d(n),i=!0;return(a>e||a<t)&&(i=!1),i},D=function(){var n=c(f.val());f.val(n);var e=!0;return N(n,20,2)?m.hide():(e=!1,m.show()),e},M=function(){if("1"!=e.isCross)return!0;var n=c(v.val());v.val(n);var t=!0;return/^\d{17}[\dxX]$/.test(n)?g.hide():(t=!1,g.show()),t},S=function(){var n=c(x.val());x.val(n);var e=!0;return N(n,60,5)?y.hide():(e=!1,y.show()),e},Y=function(){var n=c(b.val()),e=/^0([0-9]{3,4}-)?[0-9]{10,12}$/,t=/^1[34578][0-9]{9}$/,a=e.test(n)||t.test(n);return a?w.hide():w.show(),a},T=function(){var n=u.getData(),e=!0;return n.provinceId&&n.boroughId&&n.cityId?C.hide():(e=!1,C.show()),e},A=function(){var n=!0;return D()||(n=!1),M()||(n=!1),S()||(n=!1),Y()||(n=!1),T()||(n=!1),n},F=function(n,e){var t=c(n.val()),a=d(t);a>e&&n.val(l(t,e))},q=function(){var n=$setDefault.data("checked"),t=v.val()||"",a=18===t.length,i={userName:f.val(),idCard:t.toUpperCase(),address:x.val(),mobile:b.val(),isDefault:n?1:0,isCross:!!parseInt(e.isCross),hasIdCardVal:a},o=u.getData();return o.areaId&&(i.areaId=o.areaId,i.areaName=o.areaName),o.provinceId&&(i.provinceId=o.provinceId,i.provinceName=o.provinceName),o.cityId&&(i.cityId=o.cityId,i.cityName=o.cityName),o.boroughId&&(i.boroughId=o.boroughId,i.boroughName=o.boroughName),i},H=function(){var n=p.find("[data-node=province]"),e=p.find("[data-node=city]"),t=p.find("[data-node=borough]"),a=p.find("[data-node=area]");u.init([n,e,t,a],["选择省","选择市","选择区县","选择街道"],{},[{content:'<span class="menu-add" data-node="checked">选择省</span>',btn:'<span class="down-arrow"><em class="icon icon-down"></em></span>'},{content:'<span class="menu-add" data-node="checked">选择市</span>',btn:'<span class="down-arrow"><em class="icon icon-down"></em></span>'},{content:'<span class="menu-add" data-node="checked">选择区县</span>',btn:'<span class="down-arrow"><em class="icon icon-down"></em></span>'},{content:'<span class="menu-add" style="margin-right:0" data-node="checked">选择街道</span>',btn:'<span class="down-arrow"><em class="icon icon-down"></em></span>'}])},P=function(){f.on("blur",function(n){D()}),f.on("textchange",function(n){var e=$(this),t=e.data("name");e.val()!=t&&""!==t&&v.val("").prop("readonly",!1),F(f,20)}),v.on("blur",function(n){M()}),v.on("contextmenu",function(n){return!1}),v.on("keydown",function(n){var e=n.keyCode;return e>=48&&e<=57||e>=96&&e<=105||88==e||8==e||46==e||e>=37&&e<=40}),v.on("textchange",function(){var n=$(this).val(),e="";/^\d{1,18}$|^\d{17}[xX]$/.test(n)||(e=$.trim(n.substr(0,n.length-1)),$(this).val(e))}),x.on("blur",function(n){S()}),x.on("textchange",function(n){F(x,60)}),b.on("blur",function(){Y()}),$setDefault.on("click",function(){var n=$(this),e=n.find("span"),t="menu-radio-checked";return e.hasClass(t)?(n.data("checked",0),e.removeClass(t)):(n.data("checked",1),e.addClass(t)),!1}),$province.on("click","a",function(){T()}),$city.on("click","a",function(){T()}),$borough.on("click","a",function(){T()})},j=function(){f.off(),v.off(),x.off(),b.off(),$setDefault.off(),u.destroy()},z={name:"",phone:"",addr:"",province:"",city:"",borough:"",area:"",setDefault:!0,isCross:!1},V=function(n,t){var d=n.name,c=s.get("addAddress"),l="addr.add",u=n.addressId;u&&(c=s.get("editAddress"),l="addr.edit");var p=a(n||z);t=t||{};var f=!1,m={title:"编辑收货地址",modal:!0,fixed:!0,content:p,className:"pop-box",okValue:"确定",okCls:"pc-btn pc-btnh35 circle-pop-btn",ok:function(){var n=this;if(A()){if(f)return!1;f=!0;var t=q();"0"===e.isCross&&d!=t.userName&&t.idCard&&(t.idCard=""),u&&(t.addressId=u),void 0===t.areaId&&(t.areaId="110114001",t.areaName="全部区域"),r.post(c,{data:t}).done(function(e){var a=$("[data-node=userCardTips]"),i=e.code,r=e.data||{};if(200===i){r.addressId&&(t.addressId=r.addressId),o(l).pub(t);var s=$("[data-node=curAddr]"),d=s.closest("tr");if(s.length){var c=d.find("[data-node=addrInfos]").data("addr").idCard,u=!!$.trim(c);a.length&&u&&(a.remove(),d.find("[data-action=editAddr]").closest("td").removeClass("hide-text"))}n.close(),n.remove()}else h(e.message)}).fail(function(){}).always(function(){f=!1})}return!1},onshow:function(){k.call(this),H.call(this),I(),P()},onclose:function(){j(),f=!1}};$.extend(!0,m,t);var v=i(m);return v.show(),v};n.exports=V}).call(e,t(4),t(1))},45:function(n,e,t){var a=t(26);n.exports=a("src/js/module/popup/deliveryAddr/content",function(n,e){"use strict";var t=this,a=(t.$helpers,t.$escape),i=n.name,o=n.isCross,r=n.idCard,s=n.hasIdCardVal,d=n.provinceId,c=n.province,l=n.cityId,u=n.city,h=n.boroughId,p=n.borough,f=n.areaId,m=n.area,v=n.addr,g=n.phone,x=n.isDefault,y="";return y+='<div class="edit-add-box"> <dl class="receiver clearfix"> <dt>收货人:</dt> <dd> <input type="text" data-node="name" data-name="',y+=a(i),y+='" placeholder="请输入姓名" value="',y+=a(i),y+='"> </dd> </dl> <p class="warn-txt" data-node="nameTip">收货人姓名为2-20个字符</p> ',o&&(y+=' <dl class="receiver clearfix"> <dt>身份证号:</dt> <dd> <input type="text" data-node="idCard" data-idcard="',y+=a(r),y+='" ',s&&(y+='readonly="true"'),y+=' placeholder="请输入身份证号" value="',y+=a(r),y+='"> </dd> </dl> <p class="warn-txt" data-node="idCardTip">请填写与收货人姓名对应的身份证号码</p> '),y+=' <dl class="area clearfix"> <dt>所在地区:</dt> <dd data-node="areaList"> <div data-node="province" data-provinceId=',y+=a(d),y+=">",y+=a(c),y+='</div> <div data-node="city" data-cityId=',y+=a(l),y+=">",y+=a(u),y+='</div> <div data-node="borough" data-boroughId=',y+=a(h),y+=">",y+=a(p),y+='</div> <div data-node="area" data-areaId=',y+=a(f),y+=">",y+=a(m),y+='</div> </dd> </dl> <p class="warn-txt" data-node="areaTip">请补充地址</p> <dl class="detail-add clearfix"> <dt>详细地址:</dt> <dd> <input type="text" data-node="addr" placeholder="请如实填写详细地址" value="',y+=a(v),y+='"> </dd> </dl> <p class="warn-txt" data-node="addrTip">限制为5-60个字符</p> <dl class="phone clearfix"> <dt>电话/手机:</dt> <dd> <input type="text" data-node="phone" placeholder="请输入电话/手机号" value="',y+=a(g),y+='"> </dd> </dl> <p class="warn-txt" data-node="phoneTip">请输入手机号/电话号码</p> <div class="set-default-add"> <label data-node="setDefault" data-checked="',y+=x===!0?"true":"false",y+='"> <span class="menu-radio ',y+=x===!0?"menu-radio-checked":"''",y+='"></span>设置为默认地址 </label> </div> </div> ',new String(y)})},46:function(n,e){var t=function(n){return null==n?0:("string"!=typeof n&&(n+=""),n.replace(/[^\x00-\xff]/g,"01").length)};n.exports=t},47:function(n,e){var t=function(n){return n.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")};n.exports=t},48:function(n,e){var t={checkVal:function(n,e){return e.test(n)},isMobileNum:function(n){return/^1[34578][0-9]{9}$/.test(n)},isEmail:function(n){return/w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/.test(n)},isCertificate:function(n){return/^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/.test(n)},isCID:function(n){return/^(\d{16}|\d{19})$/.test(n)},isCWord:function(n,e,t){var e=!isNaN(e)&&e>0?e:1,t=!isNaN(t)&&t>0?t:"",a=new RegExp("^[\\u4e00-\\u9fa5]{"+e+","+t+"}$");a.test(n);return a.test(n)},isArray:function(n){return Array.isArray(n)||n instanceof Array},passwordReg:function(n){var e=/^((?=.*?\d)(?=.*?[A-Za-z])|(?=.*?\d)(?=.*?[<>《》！\*\(\^\)\$%~!@#\…&%￥—\+=、。，\"\,\:\;；,\.‘’“”：'"\·`【】])|(?=.*?[A-Za-z])(?=.*?[<>《》！\*\(\^\)\$%~!@#\…&%￥—\+=、。，；‘’“”：'"\·`,\.【】]))[\dA-Za-z<>《》！\*\(\^\)\$%~!@#\…&%￥—\+=、。，；‘’“”：'"\·`,\.【】]{6,21}$/;return e.test(n)},checkSpace:function(n){var e=/\s+/;return e.test(n)},checkRefCode:function(n){var e=/^[0-9a-zA-Z]{8}$/;return e.test(n)},checkNickName:function(n){var e=/^([\u4e00-\u9fa5]|[0-9a-zA-Z_-])+$/;return e.test(n)},isMsgCode:function(n){var e=/^\d{6}$/;return e.test(n)}};n.exports=t},49:function(n,e,t){function a(n){return n>=55296&&n<=56319}function i(n){return n>=56320&&n<=57343}function o(n,e){if("string"!=typeof n)throw new Error("Input must be string");for(var t,o,s=n.length,d=0,c=0;c<s;c+=1){if(t=n.charCodeAt(c),o=n[c],a(t)&&i(n.charCodeAt(c+1))&&(c+=1,o+=n[c]),d+=r(o),d===e)return n.slice(0,c+1);if(d>e)return n.slice(0,c-o.length+1)}return n}var r=t(46);n.exports=o},50:function(n,e,t){(function($){t(51);var e,a=t(2),i=t(28),o={},r=(t(43),function(n,t,r,s){function d(n,e){if(window.localStorage){var t=JSON.parse(localStorage.getItem("address"+n)),o=null===t||!t.hasOwnProperty("time")||t.time<+new Date;o?a.get(i.get("getAddress")+n,{}).done(function(t){if(200===t.code){e.call(null,t.data);var a={data:t.data,time:+new Date+6048e5};localStorage.removeItem("address"+n),localStorage.setItem("address"+n,JSON.stringify(a))}}).fail(function(n,e){}):e.call(null,t.data)}else a.get(i.get("getAddress")+n,{}).done(function(n){200===n.code&&e.call(null,n.data)}).fail(function(n,e){})}function c(e,a){var i=e;a||(i++,n[e].find("div").children().eq(0).text(o[u[e][1]]));for(var r=i,s=n.length;r<s;r++)void 0!==o[u[r][0]]&&(delete o[u[r][0]],delete o[u[r][1]]),n[r].find("div").children().eq(0).text(l?t:t[r]),r!=i&&n[r].find("ul").html("")}var n=n,l=!1,u=[["provinceId","provinceName"],["cityId","cityName"],["boroughId","boroughName"],["areaId","areaName"]],h={},p=!(s instanceof Array),r=$.extend({},h,r);e=n,"string"==typeof t&&(l=!0);for(var f=0;f<e.length;f++){var m=l?t:t[f];m!==e[f].text()&&(o[u[f][0]]=e[f].attr("data-"+[u[f][0]]),o[u[f][1]]=e[f].text());var v=f-1>=0?e[f-1].attr("data-"+[u[f-1][0]]):0;!function(a){var i=r;i.please=l?t:t[a],i.onChanged=function(i){var r=i.value,s=!1;void 0===r?s=!0:(o[u[a][0]]=i.value,o[u[a][1]]=i.text,a+1<=e.length-1&&d(~~r,function(e){n[a+1].setList({data:e.nodes,please:l?t:t[a+1],textName:"name",valueName:"id"})})),c(a,s)},n[a].selects(p?s:s[a],i),""!==v&&d(v,function(n){e[a].setList({data:n.nodes,please:l?t:t[a],textName:"name",valueName:"id",checked:e[0].find("div").children().eq(0).text()})})}(f)}}),s=function(){for(var n=0,t=e.length;n<t;n++)e[n].off()},d=function(){return o};n.exports={init:r,destroy:s,getData:d}}).call(e,t(1))},51:function(n,e,t){(function($){$.fn.extend({selects:function(n,e){var t=this,a={content:'<span class="span1">'+$(t).text()+"</span>",btn:'<span class="span2"></span>'},i=$.trim($(t).text()),o={data:[],checked:i,please:"请选择",textName:"text",valueName:"value",selectdCls:"active",checkText:!0,checkedCls:"active",disable:"disable",onChanged:function(){}},n=$.extend({},a,n),e=$.extend({},o,e),r=$("<div></div>").appendTo($(t).empty()).height($(t).height());$content=$(n.content).text(""===i?e.please:i).appendTo(r).attr("data-node","checked"),$btn=$(n.btn).appendTo(r),value=null;for(var s,d,c,l='<ul data-node="selectList"><li><a href="javascript:;">'+e.please+"</a></li>",u=e.parent?$(e.parent):this,h=e.parent?this.selector:void 0,p=0,f=e.data.length;p<f;p++)value=void 0!==e.data[p][e.valueName]?e.data[p][e.valueName]:p,l+='<li class="'+(e.data[p].checked===value?e.checkedCls:"")+'"><a href="javascript:;" data-value="'+value+'" data-index="'+p+'">'+e.data[p][e.textName]+"</a></li>";return l+="</ul>",c=$(l).appendTo($(t)),u.on("click",h,function(n){n.stopPropagation(),$('ul[data-node="selectList"]').hide(),0===e.data.length&&"running"!==$(this).attr("data-refresh")||$(this).hasClass(e.disable)||($(this).addClass(e.selectdCls),0!==$(this).find("ul li").length&&$(this).find("ul").show())}),u.on("click",'ul[data-node="selectList"] a',function(n){return n.stopPropagation(),s=$(this).parents("ul").parent().find('[data-node="checked"]'),s.text()!==$(this).text()&&(d={text:$(this).text()!==e.please?$(this).text():"",value:$(this).attr("data-value"),index:$(this).attr("data-index")},e.checkText&&s.text($(this).text()),void 0!==e.checkedCls&&$(this).parent().addClass(e.checkedCls).siblings().removeClass(e.checkedCls),e.onChanged.call(this,d)),$(this).parents("ul").hide(),!1}),$(document).on("click",function(){t.find("ul").hide()}),this},setList:function(n){$(this).attr("data-refresh","running");var e=this,t={data:[],textName:"text",checked:"",valueName:"value",please:"请选择",checkedCls:"active"},n=$.extend({},t,n),a='<li><a href="javascript:;">'+n.please+"</a></li>";if(0!==n.data.length)for(var i=0,o=n.data.length;i<o;i++)value=void 0!==n.data[i][n.valueName]?n.data[i][n.valueName]:i,a+='<li class="'+(n.checked===n.data[i][n.textName]?n.checkedCls:"")+'"><a href="javascript:;" data-value="'+value+'">'+n.data[i][n.textName]+"</a></li>";return $(e).find('[data-node="selectList"]').html(a),this}})}).call(e,t(1))},52:function(n,e,t){(function($){var n=document.createElement("input"),e="oninput"in n&&(!("documentMode"in document)||document.documentMode>9),t=function(n){return"INPUT"===n.nodeName&&("text"===n.type||"password"===n.type)},a=null,i=null,o=null,r={get:function(){return o.get.call(this)},set:function(n){i=n,o.set.call(this,n)}},s=function(n){a=n,i=n.value,o=Object.getOwnPropertyDescriptor(n.constructor.prototype,"value"),Object.defineProperty(a,"value",r),a.attachEvent("onpropertychange",c)},d=function(){a&&(delete a.value,a.detachEvent("onpropertychange",c),a=null,i=null,o=null)},c=function(n){if("value"===n.propertyName){var e=n.srcElement.value;e!==i&&(i=e,$(a).trigger("textchange"))}};e?$(document).on("input",function(n){"TEXTAREA"!==n.target.nodeName&&$(n.target).trigger("textchange")}):$(document).on("focusin",function(n){t(n.target)&&(d(),s(n.target))}).on("focusout",function(){d()}).on("selectionchange keyup keydown",function(){a&&a.value!==i&&(i=a.value,$(a).trigger("textchange"))})}).call(e,t(1))},53:function(n,e,t){(function($){var e=t(22),a=function(){},i=function(n,t){var i={fixed:!0,modal:!0,content:'<p class="del-pop-p">'+n+"</p>",className:"pop-box",okCls:"pc-btn pc-btnh35 circle-pop-btn",ok:a,cancel:a,btnWrapCls:"two-buttons"};$.extend(!0,i,t);var o=e(i);return o.show(),o};n.exports=i}).call(e,t(1))},71:function(n,e,t){(function($){"use strict";var e,t,a=function(n,e){return this.$el=n,this.options=$.extend({},a.rules.defaults,a.rules[e.rule]||{},e),this.min=Number(this.options.min)||0,this.max=Number(this.options.max)||0,this.$el.on({"focus.spinner":$.proxy(function(n){n.preventDefault(),this.oldValue=this.value()},this),"change.spinner":$.proxy(function(n){n.preventDefault(),this.value(this.$el.val())},this),"keydown.spinner":$.proxy(function(n){var e={38:"up",40:"down"}[n.which];e&&(n.preventDefault(),this.spin(e))},this)}),this.oldValue=this.value(),this.value(this.$el.val()),this};a.rules={defaults:{min:null,max:null,step:1,precision:0},currency:{min:0,max:null,step:.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}},a.prototype={spin:function(n){if(!this.$el.prop("disabled")&&!this.$el.siblings("[data-spin="+n+"]").hasClass("disabled")){this.oldValue=this.value();var e=$.isFunction(this.options.step)?this.options.step.call(this,n):this.options.step,t="up"===n?1:-1,a=this.options.beforeChange||function(){};a.call(this,this.oldValue,n)!==!1&&this.value(this.oldValue+Number(e)*t)}},value:function(n){if(null===n||void 0===n)return this.numeric(this.$el.val());n=this.numeric(n);var a=this.validate(n);0!==a&&(a===-1?(n=this.min,this.$el.trigger("rangemin.spinner")):(n=this.max,this.$el.trigger("rangemax.spinner"))),this.$el.val(n.toFixed(this.options.precision)),this.oldValue!==this.value()&&(this.$el.trigger("changing.spinner",[this.value(),this.oldValue]),clearTimeout(e),e=setTimeout($.proxy(function(){this.$el.trigger("changed.spinner",[this.value(),this.oldValue])},this),t.delay))},numeric:function(n){return n=this.options.precision>0?parseFloat(n,10):parseInt(n,10),isFinite(n)?n:n||this.options.min||0},validate:function(n){return null!==this.options.min&&n<this.min?-1:null!==this.options.max&&n>this.max?1:0},setMin:function(n){var e=this.min=this.numeric(n);this.options.min=e},setMax:function(n){var e=this.max=this.numeric(n);this.options.max=e}},t=function(n,e){this.$el=$(n),this.$spinning=this.$el.find('[data-spin="spinner"]'),0===this.$spinning.length&&(this.$spinning=this.$el.find(':input[type="text"]')),e=$.extend({},e,this.$spinning.data()),this.spinning=new a(this.$spinning,e),this.$el.on("click.spinner",'[data-spin="up"], [data-spin="down"]',$.proxy(this,"spin")),e.delay&&this.delay(e.delay),e.changed&&this.changed(e.changed),e.changing&&this.changing(e.changing),e.rangemin&&this.rangemin(e.rangemin),e.rangemax&&this.rangemax(e.rangemax)},t.delay=500,t.prototype={constructor:t,spin:function(n){var e=$(n.currentTarget).data("spin");switch(n.type){case"click":n.preventDefault(),this.spinning.spin(e)}},delay:function(n){var e=Number(n);e>=0&&(this.constructor.delay=e+100)},value:function(){return this.spinning.value()},changed:function(n){this.bindHandler("changed.spinner",n)},changing:function(n){this.bindHandler("changing.spinner",n)},rangemax:function(n){this.bindHandler("rangemax.spinner",n)},rangemin:function(n){this.bindHandler("rangemin.spinner",n)},bindHandler:function(n,e){$.isFunction(e)?this.$spinning.on(n,e):this.$spinning.off(n)},beginSpin:function(n){this.spinInterval=setInterval($.proxy(this.spinning,"spin",n),100)}};var i=$.fn.spinner;$.fn.spinner=function(n,e){return this.each(function(){var a=$.data(this,"spinner");a||(a=new t(this,n),$.data(this,"spinner",a)),"delay"===n||"changed"===n||"changing"===n?a[n](e):"step"===n&&e?a.spinning.step=e:"spin"===n&&e&&a.spinning.spin(e)})},$.fn.spinner.Constructor=t,$.fn.spinner.noConflict=function(){return $.fn.spinner=i,this},n.exports=$.fn.spinner}).call(e,t(1))},116:function(n,e,t){(function($){var e=t(117),a=t(22),i=function(n,t){var i=e(n||{});t=t||{};var o={title:"选择图片",modal:!0,fixed:!0,content:i,className:"pop-box",okValue:"插入图片",okCls:"pc-btn pc-btnh35 circle-pop-btn",cancalValue:"取消",btnWrapCls:"insert-cancel"};return $.extend(!0,o,t),a(o)};n.exports={create:i}}).call(e,t(1))},117:function(n,e,t){var a=t(26);n.exports=a("src/js/module/popup/upload/content",function(n,e){"use strict";var t=this,a=(t.$helpers,t.$escape),i=n.maxlength,o="";return o+='<div data-node="uploadBox"> <div class="pics-list-wrap clearfix"> <ul class="pics-list clearfix" data-node="uploadList"> <li data-defaultAddFile=\'picker\'></li> </ul> </div> <div class="num-pics">您可以添加 <span class="link-hover-red" data-node="addNum">',o+=a(i),o+='</span><span class="deep-gray">/',o+=a(i),o+=" </span>张图片</div> </div>",new String(o)})},118:function(n,e,t){(function(e,$){var a=t(22),i=t(2),o=t(28),r=t(43),s=t(68),d=t(119),c=t(36);t(49),t(46);t(120)();var l,u="active",h={},p='<div data-node="loading" class="loading"><img src="'+e.imgpath+'/images/public/loading.gif"></div>',f='<p data-node="reload" class="failed-txt">数据获取失败，点击<a data-node="btn_reload" href="javascript:;" style="color:#f95353">重新加载</a>！</p>',m=function(){return i.get(o.get("selectGroup"))},v=function(n){var e=$(this),t=e.data("id");return l&&l.removeClass(u),e.addClass(u),l=e,h={id:t,name:l.data("name")},!1},g=function(n){var e=this._$("content");e[n?"off":"on"]("click","dl",v)},x=function(n){n=n||{};var e={title:"选择圈子",modal:!0,fixed:!0,content:p,className:"pop-box",okValue:"确定",okCls:"pc-btn pc-btnh35 circle-pop-btn",btnWrapCls:"insert-cancel",ok:function(){return h.id?void r(s.postTopic.selectCircle).pub(h):(c("请选择一个圈子"),!1)},cancel:function(){g.call(this,!0)},onshow:function(){var n,e=this;$("[data-action=selectGroup]").attr("data-groupid")&&(n=$("[data-action=selectGroup]").attr("data-groupid")),m().done(function(t){function a(n,e){for(var t=[],a=0,i=0;i<n.length;i++){for(var o=0;o<e.length;o++){if(e[o].id==n[i].id){a=1;break}a=0}if(!(t.length<12))return t;0==a&&t.push(n[i])}return t}if(t&&200===t.code){var i=t.data||{},o=i.myRelatedGroups||{},r=o.imaster||[],s=o.imember||[],c=i.recommendGroups||{},u=c.peas||[],h=r.concat(s),p=a(u,h),i={created:r,joined:s,recommend:p},m=d(i);e.content(m),n&&$("[data-id="+n+"]")&&($("[data-id="+n+"]").addClass("active"),l=$("[data-id="+n+"]")),g.call(e)}else e.content(f),$("[data-node=btn_reload]").on("click",function(){x()})}).fail(function(){e.content(f)}).always(function(){})},onclose:function(){g.call(this,!0)}};$.extend(!0,e,n);var t=a(e);return t.show(),t};r(s.postTopic.selectCircle).sub(function(n){}),n.exports=x}).call(e,t(4),t(1))},119:function(n,e,t){var a=t(26);n.exports=a("src/js/module/popup/circle/content",function(n,e){"use strict";var t=this,a=t.$helpers,i=t.$escape,o=n.created,r=t.$each,s=(n.group,n.$index,n.joined),d=n.recommend,c="";return c+='<div data-node="loading" style="display:none" class="loading"><img src="',c+=i(a.randomShowPic("loading")),c+='" alt=""></div> <p data-node="reload" style="display:none" class="failed-txt">数据获取失败，点击重新加载！</p> <ul class="chosed-circle-box"> ',o.length>0&&(c+=' <li class="clearfix"> <h4>我创建的圈子</h4> ',r(o,function(n,e){c+=' <dl data-id="',c+=i(n.id),c+='" data-name="',c+=i(n.name),c+='"> <dt> ',n.icon&&n.icon.length>0?(c+=' <img src="',c+=i(n.icon),c+='" title="',c+=i(n.name),c+='"> '):(c+=' <img src="',c+=i(a.randomShowPic("face")),c+='" title="',c+=i(n.name),c+='"> '),c+=' </dt> <dd><a href="javascript:;">',c+=i(n.name),c+="</a></dd> </dl> "}),c+=" </li> "),c+=" ",s.length>0&&(c+=' <li class="clearfix"> <h4>我加入的圈子</h4> ',r(s,function(n,e){c+=' <dl data-id="',c+=i(n.id),c+='" data-name="',c+=i(n.name),c+='"> <dt> ',n.icon&&n.icon.length>0?(c+=' <img src="',c+=i(n.icon),c+='" title="',c+=i(n.name),c+='"> '):(c+=' <img src="',c+=i(a.randomShowPic("face")),c+='" title="',c+=i(n.name),c+='"> '),c+=' </dt> <dd><a href="javascript:;">',c+=i(n.name),c+="</a></dd> </dl> "}),c+=" </li> "),c+=" ",d.length>0&&(c+=' <li class="clearfix"> <h4>推荐圈子</h4> ',r(d,function(n,e){c+=' <dl data-id="',c+=i(n.id),c+='" data-name="',c+=i(n.name),c+='"> <dt> ',n.icon&&n.icon.length>0?(c+=' <img src="',c+=i(n.icon),c+='" title="',c+=i(n.name),c+='"> '):(c+=' <img src="',c+=i(a.randomShowPic("face")),c+='" title="',c+=i(n.name),c+='"> '),c+=' </dt> <dd><a href="javascript:;">',c+=i(n.name),c+="</a></dd> </dl> "}),c+=" </li> "),c+=" </ul> ",new String(c)})},120:function(n,e,t){(function(e){var a=t(26),i=function(n){return"face"==n?e.imgpath+"/images/public/circle-default.png":"loading"==n?e.imgpath+"/images/public/loading.gif":void 0};n.exports=function(){a.helper("randomShowPic",i)}}).call(e,t(4))},121:function(n,e,t){(function($){var e=t(2),a=t(28),i=t(122),o=t(42),r={qq:"http://connect.qq.com/widget/shareqq/index.html",sina:"http://v.t.sina.com.cn/share/share.php",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey"},s={url:"http://www.gomeplus.com",title:"国美+APP边玩边分享，购物不孤单",pic:"http://www.gomeplus.com/images/logo.png",summary:"国美+APP边玩边分享，购物不孤单"},d=function(n){window.open(n)},c=!1,l=function(){var n='<p data-node="shareBtnBox" class="share-down" style="z-index:21;"><span class="share-box"><span class="icon icon-up-arrow"></span><span class="icon-box"><em data-shareto="weixin" class="icon icon-weixin">&#xe937;</em><em data-shareto="qq" class="icon icon-qq">&#xe900;</em><em data-shareto="sina" class="icon icon-sina">&#xe935;</em><em data-shareto="qzone" class="icon icon-kongjian">&#xe902;</em></span></span></p>';$("body").append(n),c=!0},u=function(n){!c&&l(),$("[data-node=shareBtnBox]").css({left:n.x,top:n.y}).show()},h=!1,p=function(){var n='<div class="share-weixin"><div class="wx-mask"></div><div class="wx-main"><div class="wx-code"><span></span><img data-node="shareWeixinCode" alt="分享到微信" /></div><p>打开微信扫一扫，即可分享</p><a href="javascript:;" title="点击关闭" class="wx-close">×</a></div></div>';$("body").append(n),h=!0},f=function(n,e){var t=[],a={title:n.title,url:n.url,summary:n.summary,desc:n.desc,site:n.site};e?a.pics=n.pic:a.pic=n.pic;for(var i in a)t.push(i+"="+encodeURIComponent(a[i]||""));return t.join("&")},m={weixin:function(n){var e=i(n.url);!h&&p(),$("[data-node=shareWeixinCode]")[0].src=e,$(".share-weixin").show(),$(".wx-close").on("click",function(){$(".share-weixin").hide()})},qq:function(n){var e=r.qq+"?"+f(n,!0);d(e)},sina:function(n){var e=r.sina+"?"+f(n);d(e)},qzone:function(n){var e=r.qzone+"?"+f(n,!0);d(e)}},v=function(n){var t="0"!==n.isRebate;e.get(a.get("shareGetGoodsKid"),{validate:t,data:{skuId:n.skuId,itemId:n.itemId,parentKid:n.parentKid},async:!1}).done(function(e){if(e.success===!0){var t=e.data.kid,a=n.shareInfo,i=a.url,o=i.indexOf("?");o>0&&(i=i.substring(0,o)),a.url=i+"?onlineUserId="+a.onlineUserId+"&kId="+t,m[n.shareto](a)}else m[n.shareto](n.shareInfo)}).fail(function(e){t?o()&&m[n.shareto](n.shareInfo):m[n.shareto](n.shareInfo)})},g=function(n){var e={title:n.title||s.title,url:n.url||s.url,pic:n.pic||s.pic,summary:n.summary||"",desc:n.desc||""};!!m[n.type]&&m[n.type](e)},x=function(n,e,t){var a=null;$item="string"==typeof n?$(n):n,e=e||"[data-action=shareto]",$item.on("mouseenter",e,function(n){var e=$(this).data("surl"),t=$(this).data("stitle"),i=$(this).data("spic");a={url:e,title:t,pic:i};var o=$(this).width(),r=$(this).height(),s=$(this).offset().left/1+o/2-80+"px",d=$(this).offset().top/1+(r-1)+"px";return u({x:s,y:d}),!1}),$item.on("mouseleave",e,function(n){return $("[data-node=shareBtnBox]").hide(),!1}),$("body").on("click","[data-shareto]",function(n){n.preventDefault(),shareType=$(this).data("shareto"),a.type=shareType,t=t||function(){},t.call(null,a),g(a)}),$("body").on("mouseenter","[data-node=shareBtnBox]",function(){$(this).show()}),$("body").on("mouseleave","[data-node=shareBtnBox]",function(){$(this).hide()})};n.exports={share:g,shareto:m,shareItem:x,shareWithKid:v}}).call(e,t(1))},122:function(n,e,t){(function(e){var t=function(n){return e.wap_url+"q.php?t="+encodeURIComponent(n)};n.exports=t}).call(e,t(4))},123:function(n,e){function t(n,e){for(var t=[],a=0,i=n.length;a<i;a++)t.push(n[a].substr(0,e));return t}function a(n){return function(e,t,a){var i=a[n].indexOf(t.charAt(0).toUpperCase()+t.substr(1).toLowerCase());~i&&(e.month=i)}}function i(n,e){for(n=String(n),e=e||2;n.length<e;)n="0"+n;return n}var o={},r=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,s=/\d\d?/,d=/\d{3}/,c=/\d{4}/,l=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,u=function(){},h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=["January","February","March","April","May","June","July","August","September","October","November","December"],f=t(p,3),m=t(h,3);o.i18n={dayNamesShort:m,dayNames:h,monthNamesShort:f,monthNames:p,amPm:["am","pm"],DoFn:function(n){return n+["th","st","nd","rd"][n%10>3?0:(n-n%10!==10)*n%10]}};var v={D:function(n){return n.getDate()},DD:function(n){return i(n.getDate())},Do:function(n,e){return e.DoFn(n.getDate())},d:function(n){return n.getDay()},dd:function(n){return i(n.getDay())},ddd:function(n,e){return e.dayNamesShort[n.getDay()]},dddd:function(n,e){return e.dayNames[n.getDay()]},M:function(n){return n.getMonth()+1},MM:function(n){return i(n.getMonth()+1)},MMM:function(n,e){return e.monthNamesShort[n.getMonth()]},MMMM:function(n,e){return e.monthNames[n.getMonth()]},YY:function(n){return String(n.getFullYear()).substr(2)},YYYY:function(n){return n.getFullYear()},h:function(n){return n.getHours()%12||12},hh:function(n){return i(n.getHours()%12||12)},H:function(n){return n.getHours()},HH:function(n){return i(n.getHours())},m:function(n){return n.getMinutes()},mm:function(n){return i(n.getMinutes())},s:function(n){return n.getSeconds()},ss:function(n){return i(n.getSeconds())},S:function(n){return Math.round(n.getMilliseconds()/100)},SS:function(n){return i(Math.round(n.getMilliseconds()/10),2)},SSS:function(n){return i(n.getMilliseconds(),3)},a:function(n,e){return n.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(n,e){return n.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(n){var e=n.getTimezoneOffset();return(e>0?"-":"+")+i(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)}},g={D:[s,function(n,e){n.day=e}],M:[s,function(n,e){n.month=e-1}],YY:[s,function(n,e){var t=new Date,a=+(""+t.getFullYear()).substr(0,2);n.year=""+(e>68?a-1:a)+e}],h:[s,function(n,e){n.hour=e}],m:[s,function(n,e){n.minute=e}],s:[s,function(n,e){n.second=e}],YYYY:[c,function(n,e){n.year=e}],S:[/\d/,function(n,e){n.millisecond=100*e}],SS:[/\d{2}/,function(n,e){n.millisecond=10*e}],SSS:[d,function(n,e){n.millisecond=e}],d:[s,u],ddd:[l,u],MMM:[l,a("monthNamesShort")],MMMM:[l,a("monthNames")],a:[l,function(n,e,t){var a=e.toLowerCase();a===t.amPm[0]?n.isPm=!1:a===t.amPm[1]&&(n.isPm=!0)}],ZZ:[/[\+\-]\d\d:?\d\d/,function(n,e){var t,a=(e+"").match(/([\+\-]|\d\d)/gi);a&&(t=+(60*a[1])+parseInt(a[2],10),n.timezoneOffset="+"===a[0]?t:-t)}]};g.dd=g.d,g.dddd=g.ddd,g.Do=g.DD=g.D,g.mm=g.m,g.hh=g.H=g.HH=g.h,g.MM=g.M,g.ss=g.s,g.A=g.a,o.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},o.format=function(n,e,t){var a=t||o.i18n;if("number"==typeof n&&(n=new Date(n)),"[object Date]"!==Object.prototype.toString.call(n)||isNaN(n.getTime()))throw new Error("Invalid Date in fecha.format");return e=o.masks[e]||e||o.masks.default,e.replace(r,function(e){return e in v?v[e](n,a):e.slice(1,e.length-1)})},o.parse=function(n,e,t){var a=t||o.i18n;if("string"!=typeof e)throw new Error("Invalid format in fecha.parse");if(e=o.masks[e]||e,n.length>1e3)return!1;var i=!0,s={};if(e.replace(r,function(e){if(g[e]){var t=g[e],o=n.search(t[0]);~o?n.replace(t[0],function(e){return t[1](s,e,a),n=n.substr(o+e.length),e}):i=!1}return g[e]?"":e.slice(1,e.length-1)}),!i)return!1;var d=new Date;s.isPm===!0&&null!=s.hour&&12!==+s.hour?s.hour=+s.hour+12:s.isPm===!1&&12===+s.hour&&(s.hour=0);var c;return null!=s.timezoneOffset?(s.minute=+(s.minute||0)-+s.timezoneOffset,c=new Date(Date.UTC(s.year||d.getFullYear(),s.month||0,s.day||1,s.hour||0,s.minute||0,s.second||0,s.millisecond||0))):c=new Date(s.year||d.getFullYear(),s.month||0,s.day||1,s.hour||0,s.minute||0,s.second||0,s.millisecond||0),c},n.exports=o}});