webpackJsonp([14],{0:function(n,e,t){t(158).init(),t(159).init();var o=t(54);o.setPageData("login")},158:function(n,e,t){(function($){var e,o,a=t(2),i=t(28),d=t(35),c=t(36),r=$("[data-node=userForm]"),s=r.find("[data-action=qrCodeBtn]"),f=r.find("[data-action=accLoginBtn]"),u=r.find("[data-node=qrCodeBox]"),l=u.find("[data-node=qrCodeImg]"),p=u.find("[data-node=qrCodeFailBox]"),h=u.find("[data-node=qrCodeTip]"),v=u.find("[data-action=refQrCode]"),C=r.find("[data-node=qrCodeSucBox]"),g=C.find("[data-action=backToQrCode]"),m=d.qrCodeTip,k=3e3,w="",x=function(n){0===n?(u.hide(),p.hide(),C.hide()):1===n?(u.show(),p.hide(),C.hide()):2===n?(u.show(),p.show(),C.hide()):3===n&&(u.hide(),p.hide(),C.show())},y=function(n,e){h.text(n),v.text(e)},B=function(){return x(1),l.attr("src",""),a.get(i.get("getQrCode")).done(function(n){n.success?(w=n.data.ssid,l.attr("src",n.data.genQrcode)):(x(2),y(m.failGetTip,m.failGetBtn))}).fail(function(){x(2),y(m.failGetTip,m.failGetBtn)})},b=function(){a.post(i.get("abolishQrCode"),{data:{ssid:w}}).done(function(n){})},G=function(){a.get(i.get("getSsidStatus"),{data:{ssid:w},timeout:k}).done(function(n){var t=n.data.ssidStatus;e=t,0===t||(1===t||3===t?(x(2),y(m.loseEffTip,m.loseEffBtn),_()):2===t?x(3):4===t?(_(),location.href=n.data.headerUrl):c("port change!"))}).fail(function(n,e,t){_()})},T=function(){l.attr("src",""),_(),x(0),1!==e&3!==e&&b()},q=function(){B().then(function(){L(k)})},L=function(n){_(),o=setInterval(G,n)},_=function(){o&&clearInterval(o)},D=function(){s.on("click",q),v.on("click",q),g.on("click",q),f.on("click",T)};n.exports={init:D}}).call(e,t(1))},159:function(n,e,t){(function($){var e=t(2),o=t(28),a=t(39),i=$("[data-node=userForm]"),d=i.find($("[data-node=userNum]")),c=i.find($("[data-node=userPwd]")),r=i.find($("[data-node=error]")),s=i.find($("[data-node=userLogin]")),f=$("[data-node=identifyplace]"),u=$("[data-node=change-code]"),l=$("[data-node=code]"),p=i.find("[data-node=emptyUser]"),h=i.find("[data-node=emptyPwd]"),v=!0;t(41),d.placeholder(),c.placeholder();var C=function(){if(""===d.val())return r.removeClass("none").find("span").text("请输入账号"),y(d),!1;if(""===c.val())return r.removeClass("none").find("span").text("请输入密码"),y(c),!1;var n=l.val();if(!f.hasClass("none")&&""==n)return void l.css("border","1px solid #f95353");var t={login_name:d.val(),password:a(c.val()),verifyCode:n,csrf_token:$GLOBAL_CONFIG.csrf_token};return 0!=v&&(v=!1,s.find("span").text("登录中..."),void e.post(o.get("loginData"),{data:t,headers:{"Content-Type-Ctag":$.cookie("content_ctag")||""}}).done(function(n){if(s.find("span").text("登录"),n.success){var e=n.data;if(0==e.user.isMobileActivated)return window.location.href="/login/bindphonepage",!1;if(e.isNeedReset)return window.location.href="/regist/indexnickname",!1;window.location.href=$GLOBAL_CONFIG.redirect}else r.removeClass("none").find("span").text(n.message)}).always(function(){v=!0}))},g=function(){$(document).keydown(function(n){n&&13==n.keyCode&&(n.preventDefault(),C())}),s.on("click",function(n){n.preventDefault(),C()}),d.on("focus",function(){w($(this))}),d.on("keyup",function(){k(d)}),d.on("blur",function(){x($(this))}),c.on("focus",function(){w($(this))}),c.on("blur",function(){x($(this))}),c.on("keyup",function(){k(c)}),l.on("focus",function(){l.css("border","1px solid #e5e5e5")}),u.on("click",function(){f.find(".code-img").attr("src","/ajax/login/captcha?t="+(new Date).getTime()),l.val("")}),p.on("click",function(){m(d)}),h.on("click",function(){m(c)})},m=function(n){n.val(""),n.parent().find("em").addClass("none")},k=function(n){""!==n.val()?n.parent().find("em").removeClass("none"):n.parent().find("em").addClass("none")},w=function(n){n.parent().removeClass("land-error-it").addClass("land-focus"),r.addClass("none")},x=function(n){n.parent().removeClass("land-focus")},y=function(n){n.parent().addClass("land-error-it")};n.exports={init:g}}).call(e,t(1))}});