webpackJsonp([0],[function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var a=n(2),o=i(a),s=n(3),r=i(s),d=n(4),c=i(d),l=n(5),u=i(l),f=n(6),p=i(f),v=n(7),h=i(v);n(8);var m=n(11),g=i(m),_=n(20),y=i(_),x=n(26),w=i(x),b=n(66),C=i(b),k=n(72),M=i(k),T=n(97),S=i(T),I=n(106),L=i(I),D=n(155),O=i(D),E=n(163),P=i(E),N=n(166),j=i(N),A=n(201),$=i(A);o["default"].use(r["default"]),o["default"].use(c["default"]),o["default"].use(u["default"]),o["default"].http.options.root=h["default"][p["default"]];var U=new r["default"]({saveScrollPosition:!0,linkActiveClass:"active"});o["default"].http.interceptors.push(function(t,e){y["default"].loading(g["default"],!0),e(function(t){t.data=JSON.parse(t.body),y["default"].loading(g["default"],!1),t.data.result||y["default"].alert(g["default"],{show:!0,msg:t.data.message,type:"danger"})})}),U.map({"/login":{name:"Login",component:C["default"]},"/im":{name:"Im",component:M["default"]},"/dashboard":{component:S["default"],subRoutes:{"/account-manage":{name:"AccountManage",component:L["default"]},"/chat-record":{name:"ChatRecord",component:O["default"]},"/password":{name:"Password",component:P["default"]},"/common-msg":{name:"CommonMsg",component:j["default"]},"/config":{name:"Configuration",component:$["default"]}}}}),U.redirect({"*":"/dashboard"}),U.start(w["default"],"#app")},,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]="production"},function(t,e){t.exports={localdev:"http://10.69.205.26:9090/mock/5742c66eb094235129ee29b5",localtest:"http://10.125.2.10:8093/venus-crm-rest",development:"http://10.69.201.13:8080/venus-crm-rest",test:"http://10.125.2.43:6080/venus-crm-rest","pre-production":"http://10.125.2.10:8093/venus-crm-rest",production:"http://crm.intra.gomeplus.com:8080/venus-crm-rest"}},function(t,e,n){"use strict";n(9),n(10)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var a=n(2),o=i(a);o["default"].filter("ISODate",{read:function(t){return new Date(t).toLocaleDateString()},write:function(t){return new Date(t).valueOf()}}),o["default"].filter("length",function(t){if(t){var e=t;return e.length}return 0})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=n(2),s=i(o),r={0:"超级管理员",1:"客服经理",2:"客服"};s["default"].filter("userType",function(t){return r[t]});var d={0:"在线",1:"忙碌",2:"离线"};s["default"].filter("userStatus",function(t,e){return d[t]}),s["default"].filter("Date",function(t,e){var n="undefined"==typeof t?"undefined":a(t);return"string"===n?t:"number"==n?new Date(t).Format(e):void 0}),Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},s["default"].filter("faceShow",function(t){var e=/\[(.*?)\]/gi;t+="";var n=t.split(e),i="";return n.forEach(function(t){i+="YY"===t||"鄙视"===t||"大哭"===t||"大笑"===t||"得意"===t||"得意"===t||"得意"===t||"恶心"===t||"愤怒"===t||"尴尬"===t||"惊恐"===t||"迷茫"===t||"可怜"===t||"抠鼻"===t||"困"===t||"流泪"===t||"努力"===t||"亲"===t||"色"===t||"伤心"===t||"石化"===t||"睡觉"===t||"微笑"===t||"疑问"===t||"阴险"===t||"晕"===t||"抓狂"===t?"<img class='face' style='width:24px;' src='/dist/img/faces/"+t+".png'/>":t}),i})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),o=i(a),s=n(12),r=i(s),d=n(13),c=i(d),l=n(20),u=i(l),f=n(23),p=i(f);o["default"].use(r["default"]),e["default"]=new r["default"].Store({state:c["default"],mutations:p["default"],actions:u["default"],strict:!0})},,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(14),o=i(a),s=n(18),r=i(s),d=n(19),c=i(d),l={};o["default"].mixin(l,r["default"]),o["default"].mixin(l,c["default"]),e["default"]=l},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),o=i(a),s=n(16),r=i(s),d=n(17),c=i(d),l={};l.mixin=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},l.mixin(l,o),l.mixin(l,r),l.mixin(l,c),e["default"]=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.setCookie=function(t,e,n){var i=new Date,n=n?n:2;i.setTime(i.getTime()+60*n*1e3);var a="expires="+i.toUTCString();document.cookie=t+"="+e+"; "+a};e.getCookie=function(t){var e="; "+document.cookie,n=e.split("; "+t+"=");if(2==n.length)return n.pop().split(";").shift()},e.delCookie=function(t){n(t,"",-1)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.checkIsAdmin=function(t){return 0===t||1===t}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(e.readBlob=function(t,e){var n=new FileReader;n.onload=function(t){var n=new Uint8Array(t.target.result);e(n)},n.readAsArrayBuffer(t)},new AudioContext),i=n.createBufferSource(),a=function(t){var e=n;i.disconnect(0),i=null,i=n.createBufferSource();var a=e.createBuffer(1,t.length,8e3);if(a.copyToChannel)a.copyToChannel(t,0,0);else{var o=a.getChannelData(0);o.set(t)}i.buffer=a,i.connect(e.destination),i.start(0)};e.playAmrArray=function(t){var e=AMR.decode(t);e&&a(e)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={loading:!1,alertConfig:{show:!1,msg:"",type:"info",delay:2500},confirmConfig:{show:!1,title:"弹出对话框",msg:"提示信息",apply:"func",cancle:"func"}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(14),o=i(a);e["default"]={user_info:function(){try{return!!JSON.parse(decodeURIComponent(o["default"].getCookie("user_info")))&&JSON.parse(decodeURIComponent(o["default"].getCookie("user_info")))}catch(t){return!1}}()}},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),s=a(o),r=n(21),d=i(r),c=n(22),l=i(c),u={};s["default"].mixin(u,d),s["default"].mixin(u,l),e["default"]=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.loading=function(t,e){t.dispatch("LOADING",e)},e.alert=function(t,e){t.dispatch("ALERT",e),e.delay!==!1&&setTimeout(function(){t.dispatch("HIDEALERT")},e.delay||2500)},e.confirm=function(t,e){t.dispatch("CONFIRM",e)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.setUserInfo=function(t,e){t.dispatch("SETUSERINFO",e)}},function(t,e,n){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),s=a(o),r=n(24),d=i(r),c=n(25),l=i(c),u={};s["default"].mixin(u,d),s["default"].mixin(u,l),e["default"]=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.LOADING=function(t,e){t.loading=e},e.ALERT=function(t,e){t.alertConfig.show=e.show,t.alertConfig.msg=e.msg||"提示信息",t.alertConfig.type=e.type||"info",t.alertConfig.delay=e.delay||2500},e.HIDEALERT=function(t,e){t.alertConfig.show=!1},e.CONFIRM=function(t,e){t.confirmConfig.show=e.show,t.confirmConfig.title=e.title||"弹窗",t.confirmConfig.msg=e.msg||"\b",t.confirmConfig.apply=e.apply||function(){},t.confirmConfig.cancle=e.cancle||function(){}},e.HIDECONFIRM=function(t){t.confirmConfig.show=!1}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SETUSERINFO=function(t,e){t.user_info=e}},function(t,e,n){var i,a;i=n(27),a=n(65),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(28),r=i(s),d=n(35),c=i(d),l=n(40),u=i(l);n(45);e["default"]={name:"App",store:o["default"],vuex:{getters:{user_info:function(){return o["default"].state.user_info}}},ready:function(){this.user_info||this.$route.router.go("/login")},components:{"m-loading":r["default"],"m-alert":c["default"],"m-confirm":u["default"]}}},function(t,e,n){var i,a;n(29),i=n(33),a=n(34),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(30);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,".loading_con[_v-2b71a6fc]{position:fixed;width:100%;height:100%;top:0;left:0;background-color:transparent;z-index:9999}.loading_con .loading[_v-2b71a6fc]{width:300px;height:120px;font-size:0;text-align:center;top:50%;left:50%;position:absolute;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.loading_con .loading span[_v-2b71a6fc]{display:inline-block;vertical-align:top;width:8px;height:80px;background-color:#fff;margin:0 4px;box-shadow:0 0 15px rgba(0,0,0,.4);border-radius:2px}.loading_con .loading span[_v-2b71a6fc]:nth-child(1){animation:loading 1.2s ease-in-out 0s infinite;-webkit-animation:loading 1.2s ease-in-out 0s infinite;-moz-animation:loading 1.2s ease-in-out 0s infinite;-ms-animation:loading 1.2s ease-in-out 0s infinite}.loading_con .loading span[_v-2b71a6fc]:nth-child(2){animation:loading 1.2s ease-in-out -1.1s infinite;-webkit-animation:loading 1.2s ease-in-out -1.1s infinite;-moz-animation:loading 1.2s ease-in-out -1.1s infinite;-ms-animation:loading 1.2s ease-in-out -1.1s infinite}.loading_con .loading span[_v-2b71a6fc]:nth-child(3){animation:loading 1.2s ease-in-out -1s infinite;-webkit-animation:loading 1.2s ease-in-out -1s infinite;-moz-animation:loading 1.2s ease-in-out -1s infinite;-ms-animation:loading 1.2s ease-in-out -1s infinite}.loading_con .loading span[_v-2b71a6fc]:nth-child(4){animation:loading 1.2s ease-in-out -.9s infinite;-webkit-animation:loading 1.2s ease-in-out -.9s infinite;-moz-animation:loading 1.2s ease-in-out -.9s infinite;-ms-animation:loading 1.2s ease-in-out -.9s infinite}.loading_con .loading span[_v-2b71a6fc]:nth-child(5){animation:loading 1.2s ease-in-out -.8s infinite;-webkit-animation:loading 1.2s ease-in-out -.8s infinite;-moz-animation:loading 1.2s ease-in-out -.8s infinite;-ms-animation:loading 1.2s ease-in-out -.8s infinite}.loading_con .loading span[_v-2b71a6fc]:nth-child(6){animation:loading 1.2s ease-in-out -.7s infinite;-webkit-animation:loading 1.2s ease-in-out -.7s infinite;-moz-animation:loading 1.2s ease-in-out -.7s infinite;-ms-animation:loading 1.2s ease-in-out -.7s infinite}@-webkit-keyframes loading{0%,40%,to{transform:scaleY(.4);-webkit-transform:scaleY(.4)}20%{transform:scaleY(1);-webkit-transform:scaleY(1)}}@keyframes loading{0%,40%,to{transform:scaleY(.4);-webkit-transform:scaleY(.4)}20%{transform:scaleY(1);-webkit-transform:scaleY(1)}}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(i[o]=!0)}for(a=0;a<e.length;a++){var s=e[a];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],a=u[i.id];if(a){a.refs++;for(var o=0;o<a.parts.length;o++)a.parts[o](i.parts[o]);for(;o<i.parts.length;o++)a.parts.push(d(i.parts[o],e))}else{for(var s=[],o=0;o<i.parts.length;o++)s.push(d(i.parts[o],e));u[i.id]={id:i.id,refs:1,parts:s}}}}function a(t){for(var e=[],n={},i=0;i<t.length;i++){var a=t[i],o=a[0],s=a[1],r=a[2],d=a[3],c={css:s,media:r,sourceMap:d};n[o]?n[o].parts.push(c):e.push(n[o]={id:o,parts:[c]})}return e}function o(t,e){var n=v(),i=g[g.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),g.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function s(t){t.parentNode.removeChild(t);var e=g.indexOf(t);e>=0&&g.splice(e,1)}function r(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function d(t,e){var n,i,a;if(e.singleton){var o=m++;n=h||(h=r(e)),i=c.bind(null,n,o,!1),a=c.bind(null,n,o,!0)}else n=r(e),i=l.bind(null,n),a=function(){s(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else a()}}function c(t,e,n,i){var a=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=_(e,a);else{var o=document.createTextNode(a),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function l(t,e){var n=e.css,i=e.media,a=e.sourceMap;if(i&&t.setAttribute("media",i),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var u={},f=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},p=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=f(function(){return document.head||document.getElementsByTagName("head")[0]}),h=null,m=0,g=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=p()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=a(t);return i(n,e),function(t){for(var o=[],s=0;s<n.length;s++){var r=n[s],d=u[r.id];d.refs--,o.push(d)}if(t){var c=a(t);i(c,e)}for(var s=0;s<o.length;s++){var d=o[s];if(0===d.refs){for(var l=0;l<d.parts.length;l++)d.parts[l]();delete u[d.id]}}}};var _=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),o=(i(a),n(11)),s=i(o);e["default"]={name:"Loading",data:function(){return{}},vuex:{getters:{loading:function(){return s["default"].state.loading}}}}},function(t,e){t.exports=' <div class="loading_con transition" v-show=loading _v-2b71a6fc=""> <div class=loading _v-2b71a6fc=""> <span _v-2b71a6fc=""></span> <span _v-2b71a6fc=""></span> <span _v-2b71a6fc=""></span> <span _v-2b71a6fc=""></span> <span _v-2b71a6fc=""></span> <span _v-2b71a6fc=""></span> </div> </div> '},function(t,e,n){var i,a;n(36),i=n(38),a=n(39),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(37);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,".alert[_v-da092dc8]{padding:15px 35px;border:1px solid transparent;border-radius:4px;position:fixed;left:50%;top:100px;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);z-index:999999;box-shadow:1px 1px 10px rgba(0,0,0,.4);background-color:rgba(0,0,0,.6)}.alert .alert_msg[_v-da092dc8]{margin-top:0;color:#fff;font-size:16px;display:inline-block;vertical-align:middle}.alert .alert_tip[_v-da092dc8]{display:inline-block;vertical-align:middle;font-size:34px;line-height:34px;margin-right:10px}.alert .alert_tip.success[_v-da092dc8]{color:#52d368}.alert .alert_tip.info[_v-da092dc8]{color:#1c7df8}.alert .alert_tip.warning[_v-da092dc8]{color:#ffd769}.alert .alert_tip.danger[_v-da092dc8]{color:#ef5858}",""])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=i(a);e["default"]={name:"Alert",vuex:{getters:{alertConfig:function(){return o["default"].state.alertConfig}}}}},function(t,e){t.exports=' <div class="alert transition" transition=fade v-show=alertConfig.show _v-da092dc8=""> <div class=alert_msg _v-da092dc8="">{{alertConfig.msg}}</div> </div> '},function(t,e,n){var i,a;n(41),i=n(43),a=n(44),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(42);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,".confirm[_v-4dcb4a80]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4)}.pop-box[_v-4dcb4a80]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}",""])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(20),r=i(s);e["default"]={name:"Confirm",vuex:{getters:{confirmConfig:function(){return o["default"].state.confirmConfig}}},methods:{apply:function(){this.confirmConfig.apply&&this.confirmConfig.apply()},cancel:function(){this.confirmConfig.cancle&&this.confirmConfig.cancle()},hide:function(){r["default"].confirm(o["default"],{show:!1})}}}},function(t,e){t.exports=' <div class="confirm transition" transition=fade v-show=confirmConfig.show _v-4dcb4a80=""> <div class=pop-box _v-4dcb4a80=""> <div class=ui-dialog-title _v-4dcb4a80="">{{confirmConfig.title}}</div> <div class=ui-dialog-body _v-4dcb4a80=""> <p class=confirm-txt _v-4dcb4a80="">{{confirmConfig.msg}}</p> </div> <div class="ui-dialog-footer clearfix" _v-4dcb4a80=""> <div class=ui-dialog-button _v-4dcb4a80=""> <a href=javascript:void(0) @click=cancel(),hide() class=btn _v-4dcb4a80="">取消</a> <a href=javascript:void(0) @click=apply(),hide() class="btn btn-blue mgl19" _v-4dcb4a80="">确认</a> </div> </div> </div> </div> '},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(46),o=i(a),s=n(57),r=i(s),d=n(62),c=i(d);e["default"]={Seletct:o["default"],Radio:c["default"],Checkbox:r["default"]}},function(t,e,n){var i,a;n(47),i=n(49),a=n(56),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(48);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,".v-select-con[_v-201bda3c]{position:relative}.v-select-con .selected[_v-201bda3c]{cursor:pointer}.v-select-con .v-select[_v-201bda3c]{position:absolute;top:0;left:0}",""])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),o=i(a),s=n(50),r=(i(s),n(55)),d=i(r),c=o["default"].extend({name:"v-select",data:function(){return{showOption:!1,text:""}},props:["change","defaultValue"],ready:function(){var t=this;this.$broadcast("currentSelectedTxt",this.defaultValue),(0,d["default"])(document).on("click",function(e){var n=(0,d["default"])(".search-list");n.is(e.target)||0!==n.has(e.target).length||(t.showOption=!1)})},methods:{test:function(){}},events:{hideOption:function(){this.showOption=!1},change:function(t){this.change&&this.change(t),this.defaultValue=t,this.$broadcast("currentSelectedTxt",this.defaultValue)},sendCurrendSelectedTxt:function(t){this.text=t}}});o["default"].component("v-select",c),e["default"]=c},function(t,e,n){var i,a;n(51),i=n(53),a=n(54),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(52);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,".v-option{cursor:pointer}",""])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),o=i(a),s=o["default"].extend({name:"v-options",created:function(){},methods:{hideOption:function(){this.$dispatch("hideOption")},change:function(t){this.$dispatch("change",t.target.getAttribute("value"))}},events:{currentSelectedTxt:function(t){t==this.$el.getAttribute("value")&&this.$dispatch("sendCurrendSelectedTxt",this.$el.innerHTML)}}});o["default"].component("v-option",s),e["default"]=s},function(t,e){t.exports=" <a href=javascript:; class=v-option @click=hideOption(),change($event)> <slot>option</slot> </a> "},,function(t,e){t.exports=' <div class="search-list v-select-con" _v-201bda3c=""> <span class=selected @click="showOption = !showOption" _v-201bda3c="">{{text}} <em class=icon-down _v-201bda3c=""></em></span> <div class="list-s v-select" v-show=showOption _v-201bda3c=""> <slot _v-201bda3c="">select</slot> </div> </div> '},function(t,e,n){var i,a;n(58),i=n(60),a=n(61),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(59);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,"",""])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),o=i(a),s=o["default"].extend({name:"Checkbox",props:["value","checked","change"],methods:{choose:function(){this.checked=!this.checked,this.change&&this.change(this.checked)}}});o["default"].component("v-checkbox",s),e["default"]=s},function(t,e){t.exports=" <em :class=\"{'icon-check active':checked,'icon-check':!checked}\" @click=choose _v-639786fc=\"\"></em> "},function(t,e,n){var i,a;i=n(63),a=n(64),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),o=i(a),s=o["default"].extend({name:"Radio",props:["value","checked","change"],methods:{choose:function(){this.checked=!this.checked,this.change&&this.change(this.value)}}});o["default"].component("v-radio",s),e["default"]=s},function(t,e){t.exports=" <span :class=\"{'raido':!checked,'raido active':checked}\" @click=choose></span> "},function(t,e){t.exports=" <div> <router-view keep-alive></router-view> <m-loading></m-loading> <m-alert></m-alert> <m-confirm></m-confirm> </div> "},function(t,e,n){var i,a;i=n(67),a=n(71),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(68),o=i(a),s=n(11),r=i(s),d=n(20),c=i(d),l=n(14),u=i(l),f=n(55),p=i(f);e["default"]={name:"login",data:function(){return{account:"",password:"",erroMsg:""}},vues:{actions:c["default"]},methods:{login:function(){var t=this;this.checkInput()&&(this.erroMsg="",this.$http({url:"operator/login",method:"post",body:{account:this.account,password:this.password}}).then(function(e){var n=e.data;return n.result?(c["default"].setUserInfo(r["default"],n.data),u["default"].setCookie("user_info",encodeURIComponent((0,o["default"])(n.data)),480),void t.$route.router.go("/dashboard")):void(t.erroMsg=n.message)}))},checkInput:function(){return""===this.account?(this.erroMsg="用户名不能为空",!1):""!==this.password||(this.erroMsg="密码不能为空",!1)},resetErrMsg:function(){this.erroMsg=""},loginFocus:function(){(0,p["default"])('input[type="password"]').focus()}}}},function(t,e,n){t.exports={"default":n(69),__esModule:!0}},function(t,e,n){var i=n(70),a=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=' <div class="wrap-box clearfix"> <div class="password login"> <div class=img><img src=/dist/img/ui/login-logo.png></div> <input type=text placeholder=用户名戳这里 v-model=account @focus=resetErrMsg() @keyup.enter=loginFocus()> <input type=password placeholder=接下来是密码 v-model=password @focus=resetErrMsg() @keyup.enter=login()> <div class=error-box> <p class=error v-show="erroMsg | length">{{erroMsg}}</p> </div> <div class=btn-password><a href=javascript:void(0) class="btn btn-big btn-block btn-blue" @click=login()>登 录</a></div> </div> </div> '},function(t,e,n){var i,a;n(73),i=n(75),a=n(96),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(74);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,"",""])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(68),o=i(a),s=n(55),r=i(s),d=n(76),c=i(d),l=n(81),u=i(l),f=n(86),p=i(f),v=n(91),h=i(v),m=n(20),g=i(m),_=n(11),y=i(_),x=n(14),w=i(x);e["default"]={name:"Index",data:function(){return{connect_num:0,wait_num:0,transmit_mode:!0,currentList:[],recentContactList:[],news_array:[],timer:null,hasNewUnreadMsg:!1,face:["YY","鄙视","大哭","大笑","得意","恶心","愤怒","尴尬","惊恐","迷茫","可怜","抠鼻","困","流泪","努力","亲","色","伤心","石化","睡觉","微笑","疑问","阴险","晕","抓狂"],status:{bConnected:!1,conditionStatus:!1,conditionHtml:"在线",conditionType:1,tabStatus:!0,loadStatus:!1,loadingStatus:!1,noMore:!1,messageEmpty:!1,faceStatus:!1,sendMod:!1,sendType:!0,fileType:1,timeLoadhistory:0,conditionStyle:"",current:!1,webscoketStatus:!0},imgInfo:{name:"",binaryString:""},inputPool:"",uid:0,pageIndex:1,sessionIdR:0,num:0,consultation_number:0,pollingTime:4,welcomeCopy:"您好，欢迎您的访问！",endCopy:"您好，非常感谢您的咨询，祝你生活愉快，再见~~",timeoutCopy:"您好！由于您超过4分钟未发言我们将结束本次咨询。欢迎您再次咨询~~"}},components:{"m-header":c["default"],"m-contacts":u["default"],"m-common_msg":p["default"],"m-record":h["default"]},vuex:{getters:{user_info:function(){return y["default"].state.user_info}},actions:g["default"]},ready:function(){var t=this,e=this;e.$http({url:"dictionary/getConfig",method:"get"}).then(function(n){var i=n.data.data;i.configuration.forEach(function(t){2==t.type?e.pollingTime=parseInt(t.val):3==t.type?e.welcomeCopy=t.val:5==t.type?e.endCopy=t.val:9==t.type&&(e.timeoutCopy=t.val)}),e.connect(),e.newsTimingCleanup(),e.getRecentContactList(),document.onkeydown=function(t){var t=event||window.event||arguments.callee.caller.arguments[0];t&&8==t.keyCode&&e.cleanImage(),e.imgInfo={}},window.onbeforeunload=function(){var t="";return t=e.currentList.length>0?"当前还有"+e.wait_num+"位用户等待咨询，是否离开":""},window.addEventListener("offline",function(){e.status.webscoketStatus=!1,e.conditionStatusControl("customeroffline"),clearTimeout(e.currentListTiming)}),window.addEventListener("online",function(){e.connect(),e.status.webscoketStatus=!0}),(0,r["default"])(document).on("click",function(e){var n=(0,r["default"])(".header-select"),i=(0,r["default"])(".face_button"),a=(0,r["default"])(".face_box");n.is(e.target)||0!==n.has(e.target).length||(t.status.conditionStatus=!1),i.is(e.target)||0!==i.has(e.target).length||0!==a.has(e.target).length||a.is(e.target)||(t.status.faceStatus=!1)})})},route:{},events:{"common-msg":function(t){this.inputPool=t}},methods:{getRecentContactList:function(){var t=this;t.$http({url:"customer/getRecentContact",method:"get",params:{operator_id:t.user_info.operator_id}}).then(function(e){t.recentContactList=e.data.data.list})},send:function(t){var e=this,n=e.ws;try{n.send((0,o["default"])(t)),(0,r["default"])(".img_content").hide()}catch(i){g["default"].alert(y["default"],{show:!0,msg:i,type:"info",delay:2500})}},websocketinit:function(){var t=this;t.ws=new WebSocket(this.user_info.imhubPath+"?imid="+this.user_info.operator_id);var e=t.ws;e.onopen=function(){t.offlineCurrentListTimingCtro(),t.currentListTimingCleanup(),t.bConnected=!0,t.conditionStatusControl("customeronline"),t.status.webscoketStatus=!0},e.onmessage=function(e){t.message(e.data),t.status.webscoketStatus=!0},e.onclose=function(){t.bConnected=!1,g["default"].alert(y["default"],{show:!0,msg:"链接服务器失败",type:"info",delay:2500}),t.conditionStatusControl("customeroffline"),t.status.webscoketStatus=!1,clearTimeout(t.currentListTiming)},e.onerror=function(){g["default"].alert(y["default"],{show:!0,msg:"链接服务器失败",type:"info",delay:2500}),t.conditionStatusControl("customeroffline"),t.status.webscoketStatus=!1,clearTimeout(t.currentListTiming)}},connect:function(){this.websocketinit()},reconnect:function(){this.bConnected||this.websocketinit()},init_callback:function(t,e,n){t.result||0==t.code?e(t):n(t)},message:function(t){var e=this;switch("string"==typeof t&&(t=JSON.parse(t)),t.type){case"newmsg":e.init_callback(t,function(){e.newMsg(t)},function(){});break;case"systemMsg":e.init_callback(t,function(){e.newMsg(t)},function(){});break;case"init":e.init_callback(t,function(){},function(){e.reconnect(e.url)});break;case"sendmsg":e.init_callback(t,function(){},function(){});break;case"useroffline":e.getRecentContactList();break;case"deleteuser":e.init_callback(t,function(){e.recentContactListDeleteChild(t)},function(){});break;case"customeronline":e.init_callback(t,function(){e.conditionStatusControl(t.type)},function(){});break;case"customerbusy":e.init_callback(t,function(){e.conditionStatusControl(t.type)},function(){});break;case"customeroffline":e.init_callback(t,function(){e.conditionStatusControl(t.type)},function(){});break;case"waitingNumber":e.wait_num=t.data.number;break;case"messageCallBack":e.messageStatusChange(t)}},conditionStatusHtml:function(t,e){var n=this,i=(new Date).valueOf(),a="";if(3==e&&n.consultation_number>0)return g["default"].alert(y["default"],{show:!0,msg:"您当前还有咨询处理，请完成后再离线",type:"info",delay:2500}),void(n.status.conditionStatus=!1);switch(e){case 1:a="customeronline",n.status.webscoketStatus||n.connect();break;case 2:a="customerbusy";break;case 3:a="customeroffline";break;default:g["default"].alert(y["default"],{show:!0,msg:"修改状态提交异常",type:"info",delay:2500})}n.send({type:a,data:{kid:n.user_info.operator_id},date:i,callback:a})},toggleConditionStatus:function(){var t=this;t.status.conditionStatus=!t.status.conditionStatus},conditionStatusControl:function(t){var e=this,n=1;switch(e.status.conditionStatus=!1,t){case"customeronline":e.status.conditionHtml="在线",e.status.conditionStyle="",n=1;break;case"customerbusy":e.status.conditionHtml="忙碌",e.status.conditionStyle="red",n=2;break;case"customeroffline":e.status.conditionHtml="离线",e.status.conditionStyle="gray",n=3;break;default:g["default"].alert(y["default"],{show:!0,msg:"修改状态返回异常",type:"info",delay:2500})}e.status.conditionType=n},close:function(){var t=this;return t.currentList.length>0?(g["default"].alert(y["default"],{
show:!0,msg:"您当前还有咨询处理，请完成后再离线",type:"info",delay:2500}),!1):void window.close()},newMsg:function(t){var e=this,n=e.currentList,i=(new Date).valueOf(),a=n.length,o=0,s={customerId:t.data.uid,imgPath:t.data.sessionIcon,nickname:t.data.sessionName,recentVisitRecord:"text"==t.data.sessionContent.type?t.data.sessionContent.content:"",recentVisitTime:t.data.sessionTime,sessionId:t.data.sessionId,cleanup:(new Date).valueOf(),show:!0,num:1,news:[]},d={type:"sendmsg",data:{personnelType:0,kid:e.user_info.operator_id,uid:t.data.uid,rewire:!1,loading:!0,sessionTime:i,sessionId:i,sessionName:e.user_info.nick_name,sessionIcon:e.user_info.icon,sessionContent:{content:e.welcomeCopy,type:"text"}}};e.hasNewUnreadMsg=!0,e.uid!==t.data.uid&&null==e.timer&&(e.timer=setInterval(function(){document.title="美信客服平台"==document.title?"您有一条新信息":"美信客服平台"},1e3));var c=(0,r["default"])(".msg_music");c.get(0).play(),a>0?(n.forEach(function(n){n.customerId!==t.data.uid?o++:n.customerId==t.data.uid&&(n.cleanup=(new Date).valueOf(),n.num||(n.num=0),"newmsg"==t.type&&("number"==typeof n.num&&(n.num+=1),n.num>99&&(n.num="...")),n.customerId!==e.uid?n.show=!0:(n.show=!1,n.num=0,clearInterval(e.timer),e.timer=null))}),o==a?(n.push(s),e.send(d),e.consultation_number+=1,o=0,e.setContactsListValue(t.data,!1,!0,!0),e.setContactsListValue(d.data,!1,!0,!0)):e.setContactsListValue(t.data,!1,!0,!0)):(n.push(s),e.send(d),e.consultation_number+=1,e.setContactsListValue(t.data,!1,!0,!0),e.setContactsListValue(d.data,!1,!0,!0))},sendFace:function(t){this.inputPool+="["+t+"]",this.status.faceStatus=!1},sendMsg:function(t){var e=this,n=e.status.fileType;if(!e.status.current)return g["default"].alert(y["default"],{show:!0,msg:"请选择当前联系人",type:"info",delay:5e3}),!1;if(13==t.keyCode||"send btn btn-blue"==t.target.className){if(!e.status.webscoketStatus)return g["default"].alert(y["default"],{show:!0,msg:"您已经处于离线状态，无法发送消息，请上线后再次尝试。",type:"info",delay:5e3}),!1}else if(t.ctrlKey&&13==t.keyCode&&!e.status.webscoketStatus)return g["default"].alert(y["default"],{show:!0,msg:"您已经处于离线状态，无法发送消息，请上线后再次尝试。",type:"info",delay:5e3}),!1;"input_content"==t.target.className&&e.status.loadStatus?(e.status.fileType=1,e.status.sendType?13==t.keyCode&&(e.senMsgC(n),t.preventDefault()):t.ctrlKey&&13==t.keyCode&&(e.senMsgC(n),t.preventDefault())):"send btn btn-blue"==t.target.className&&e.status.loadStatus&&(e.senMsgC(n),t.preventDefault())},senMsgC:function(t){var e=this;1==t?""!==e.inputPool.trim()?(e.sendMsgReq(),this.inputPool=""):e.checkMessageEmpty():2==t&&(e.sendImage(t),this.inputPool="")},sendMsgReq:function(t){var e=this,n=(new Date).valueOf(),i=t||{type:"sendmsg",data:{personnelType:0,kid:e.user_info.operator_id,uid:e.uid,sessionTime:n,sessionId:n,sessionName:e.user_info.nick_name,rewire:!1,loading:!0,sessionContent:{content:e.inputPool,type:"text"}},callback:"sendMsg"};e.send(i),e.setContactsListValue(i.data,!1,!0)},messageStatusChange:function(t){var e=this,n=t.data;e.currentList.forEach(function(t){n.uid==t.customerId&&t.news.forEach(function(t){n.sessionId==t.sessionId&&(n.messageStatus?(t.rewire=!1,t.loading=!1,t.sessionId=n.messageId):(t.rewire=!0,t.loading=!1))})})},checkMessageEmpty:function(){var t=this;t.status.messageEmpty=!0,setTimeout(function(){t.status.messageEmpty=!1},1500)},sendMsgScrollTop:function(){var t=document.getElementsByClassName("chat-scroll")[0];t.scrollTop=t.scrollHeight},uploadImg:function(t){var e=t.target.files[0],n=new FileReader,i=(new FileReader,this);n.readAsDataURL(e),i.imgInfo.name=e.name,n.onload=function(t){var e=t.target.result;i.imgInfo.binaryString=e,i.status.fileType=2;var n=(0,r["default"])(".img_content");n.append('<img style="width:70px" src="'+e+'">'),n.show(200),i.textareaFocus()}},textareaFocus:function(){(0,r["default"])("textarea").focus()},cleanImage:function(){var t=this;(0,r["default"])(".img_content").html("").hide(),t.imgInfo.binaryString="",t.status.fileType=1,(0,r["default"])(".photo")[0].value=""},sendImage:function(){var t=this,e=(0,r["default"])(".photo"),n=((0,r["default"])(".img_content"),e[0].files[0]),i=new FormData;i.append("file",n),this.$http({url:t.user_info.uploadPicturesUrl,method:"post",body:i,processData:!1,contentType:!1}).then(function(e){if(!e.data.result)return g["default"].alert(y["default"],{show:!0,msg:e.data.message,type:"info",delay:2500}),void t.cleanImage();t.cleanImage();var n=(new Date).valueOf(),i={type:"sendmsg",data:{personnelType:0,kid:t.user_info.operator_id,uid:t.uid,sessionTime:n,sessionId:n,sessionName:t.user_info.nick_name,sessionContent:{content:e.data.data.imgUrl,type:"img",height:e.data.data.height,width:e.data.data.width,uploadTime:e.data.data.uploadTime},callback:"sendMsg"}};t.sendMsgReq(i)},function(e){t.cleanImage()})},offlineCurrentListTimingCtro:function(){var t=this;t.currentList.forEach(function(t){var e=(new Date).valueOf();t.cleanup=e})},currentListTimingCleanup:function(){var t=this;this.currentListTiming=setTimeout(function(){t.currentListTimingCleanupCtro(),t.currentListTimingCleanup()},1e4)},currentListTimingCleanupCtro:function(){var t=this;t.currentList;t.currentList.forEach(function(e){var n=(new Date).valueOf();if((n-e.cleanup)/1e3>60*t.pollingTime){t.userOffline(e,n),t.status.current=!1;t.recentContactList.length}})},userOffline:function(t,e){var n=this,i=n.timeoutCopy,a=i.replace("{m}",n.pollingTime),o={type:"sendmsg",data:{personnelType:0,kid:n.user_info.operator_id,uid:t.customerId,rewire:!1,loading:!1,sessionTime:e,sessionId:e,sessionName:n.user_info.nick_name,sessionIcon:n.user_info.icon,sessionContent:{content:a||"您好！由于您超过"+n.pollingTime+"分钟未发言我们将结束本次咨询。欢迎您再次咨询~~",type:"text"}}};n.send({type:"useroffline",data:{uids:[t.customerId],kid:n.user_info.operator_id,date:e},callback:"useroffline"}),n.send(o),n.setContactsListValue(o.data,!1,!0),n.currentList.$remove(t),n.consultation_number-=1,(0,r["default"])(".new:visible").length<=1&&(document.title="美信客服平台",clearInterval(n.timer),n.timer=null)},newsTimingCleanup:function(){var t=this;setTimeout(function(){t.newsTimingCleanupCtro(),t.newsTimingCleanup()},8e3)},newsTimingCleanupCtro:function(){var t=this;t.currentList.forEach(function(t){t.news.forEach(function(t){if(t.loading){var e=(new Date).valueOf();(e-t.sessionId)/1e3>30&&(t.loading=!1,t.rewire=!0)}})})},resend:function(t){var e=this;t.rewire=!1,t.loading=!0;var n={type:"sendmsg",data:t};e.send(n)},contactPlay:function(t){var e=t.currentTarget,n=(0,r["default"])(e).find("video"),i=(0,r["default"])(e).find(".icon-play");(0,r["default"])("video").stop(),i.show(),n.length>0&&(n[0].play(),n[0].addEventListener("ended",function(){i.show()}),i.hide());var a=(0,r["default"])(e).find(".im-audio");a.removeClass("im-audio-new");var o=(0,r["default"])(e).find(".audio-con").attr("href");o&&fetch(o).then(function(t){return t.blob()}).then(function(t){w["default"].readBlob(t,function(t){w["default"].playAmrArray(t)})})},recentContactListDelete:function(){var t=this;t.send({type:"deleteuser",data:{uids:[t.uid],kid:t.user_info.operator_id},callback:"deleteuser"})},recentContactListDeleteChild:function(t){var e=this,n=e.uid,i=e.currentList;e.recentContactList;i.forEach(function(t){if(t.customerId==n){var a=(new Date).valueOf(),o={type:"sendmsg",data:{personnelType:0,kid:e.user_info.operator_id,uid:t.customerId,sessionTime:a,sessionId:0,sessionName:e.user_info.nick_name,sessionIcon:e.user_info.icon,sessionContent:{content:e.endCopy,type:"text"}}};e.send({type:"useroffline",data:{uids:[t.customerId],kid:e.user_info.operator_id,date:a},callback:"useroffline"}),e.send(o),e.setContactsListValue(o.data,!1,!0),i.$remove(t),e.consultation_number-=1,e.news_array=[],e.uid=0}}),i.length<=0&&(e.status.current=!1,e.uid=0),e.recentContactList||0==e.loadStatus},loadStatusControl:function(t,e,n,i){var a=this,o=i.currentTarget,s=o.dataset.load?o.dataset.load:"";a.uid!==e&&(a.uid=e,a.pageIndex=1),(0,r["default"])(".contacts_his").removeClass("active"),(0,r["default"])(".contacts_cur").removeClass("active"),1==n?((0,r["default"])(".contacts_his").eq(t).addClass("active"),a.status.current=!1,"true"==s&&(o.dataset.load="false",a.$http({url:"message/getOperatorMessageList",method:"get",params:{customerId:e,sessionId:0,pageSize:20}}).then(function(t){if(t.data.result!==!0)return void g["default"].alert(y["default"],{show:!0,msg:t.data.message,type:"info",delay:2500});"string"==typeof t&&(t=JSON.parse(t));var e=t.data.data,n=t.data.data.total;0==n&&g["default"].alert(y["default"],{show:!0,msg:"没有更多聊天记录",type:"info",delay:1500}),a.setContactsListValue(e,!0),a.sessionIdC()},function(t){a.sessionIdC()}))):0==n&&((0,r["default"])(".contacts_cur").eq(t).addClass("active"),a.status.current=!0,a.currentList.forEach(function(t){t.customerId==e&&(t.show=!1,t.num=0,t.news||(t.news=[]))}),(0,r["default"])(".new:visible").length<=1&&(document.title="美信客服平台",clearInterval(a.timer),a.timer=null)),a.status.loadingStatus||(a.status.loadStatus=!0),a.setContactsListValue()},tabAndload:function(){this.status.tabStatus=!0,this.status.loadStatus=!1},setContactsListValue:function(t,e,n,i){var a="",o=this;o.status.current||i?o.currentList.forEach(function(n){if(t&&t.uid==n.customerId){if(n.news||(n.news=[]),e)0==t.sessionList.length&&g["default"].alert(y["default"],{show:!0,msg:"没有更多聊天记录",type:"info",delay:1500}),t.sessionList.forEach(function(t){n.news.unshift(t)});else{n.cleanup=(new Date).valueOf(),n.news.push(t);var i=t.sessionContent.type;"text"==i?n.recentVisitRecord=t.sessionContent.content:"img"==i?n.recentVisitRecord="[图片]":"video"==i?n.recentVisitRecord="[视频]":"audio"==i?n.recentVisitRecord="[音频]":n.recentVisitRecord="",setTimeout(function(){o.sendMsgScrollTop()},1)}a=n}else o.uid==n.customerId&&(n.news||(n.news=[]),a=n)}):o.recentContactList.forEach(function(n){t&&t.uid==n.customerId?(n.news||(n.news=[]),e?(0==t.sessionList.length&&g["default"].alert(y["default"],{show:!0,msg:"没有更多聊天记录",type:"info",delay:2500}),t.sessionList.forEach(function(t){n.news.unshift(t)})):n.news.push(t),a=n):o.uid==n.customerId&&(n.news||(n.news=[]),a=n)}),n&&"undefined"!=n||(o.news_array=a.news)},sessionIdC:function(){var t=this,e=t.news_array,n=e.length;n>0?t.sessionIdR=e[0].sessionId:t.sessionIdR=0},mousewheel:function(t){var e=this,n=document.getElementsByClassName("chat-scroll")[0],i=n.scrollTop;if(t.wheelDelta>40&&i<=0&&e.uid){if(e.status.loadingStatus||(new Date).valueOf()-e.status.timeLoadhistory<1e3)return;e.sessionIdC(),e.status.timeLoadhistory=(new Date).valueOf(),e.status.loadingStatus=!0,e.status.loadStatus=!1,e.status.noMore=!1,setTimeout(function(){e.$http({url:"message/getOperatorMessageList",method:"get",params:{customerId:e.uid,sessionId:e.sessionIdR,pageSize:20}}).then(function(t){if(t.data.result!==!0)return g["default"].alert(y["default"],{show:!0,msg:t.data.message,type:"info",delay:2500}),e.status.loadingStatus=!1,void(e.status.loadStatus=!0);"string"==typeof t&&(t=JSON.parse(t));var n=t.data.data,i=t.data.data.total;0==i&&g["default"].alert(y["default"],{show:!0,msg:"没有更多聊天记录",type:"info",delay:1500}),e.setContactsListValue(n,!0),e.status.loadingStatus=!1,e.status.loadStatus=!0,e.pageIndex+=1,e.sessionIdC()},function(t){e.status.loadingStatus=!1,e.status.loadStatus=!0,e.sessionIdC()})},1500)}},sendTypeChange:function(t){var e=this,n=t.target.className;n.indexOf("enter")>-1&&n.indexOf("c_enter")<=-1?e.status.sendType=!0:n.indexOf("c_enter")>-1&&(e.status.sendType=!1),e.status.sendMod=!1},commonMsgAdd:function(t,e){var n=this;n.inputPool+=e}}}},function(t,e,n){var i,a;n(77),i=n(79),a=n(80),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(78);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,"",""])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"header"}},function(t,e){t.exports=' <div _v-f964926c=""> <slot _v-f964926c=""></slot> </div> '},function(t,e,n){var i,a;n(82),i=n(84),a=n(85),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(83);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,"",""])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"contacts"}},function(t,e){t.exports=' <div class=im-left _v-094b2760=""> <slot _v-094b2760=""></slot> </div> '},function(t,e,n){var i,a;n(87),i=n(89),a=n(90),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(88);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,".icon-po[_v-3d40062c]{position:relative;top:5px;margin:0 5px}.icon-down[_v-3d40062c]{-webkit-transition:all .2s ease;transition:all .2s ease}.icon-close[_v-3d40062c]{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}",""])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),o=i(a),s=n(2),r=i(s),d=n(20),c=i(d),l=n(11),u=i(l);e["default"]={name:"common_msg",vuex:{getters:{},actions:c["default"]},data:function(){return{treeData:[],key_word:""}},ready:function(){this.commonMsgF()},methods:{fetchTree:function(t,e){var n=this,i=t.id,a=t.type;this.$http({url:"commonLanguage/getItemTree",method:"get",params:{id:i,type:a,searchval:n.key_word}}).then(function(n){return n.data.result!==!0?void c["default"].alert(u["default"],{show:!0,msg:n.data.message,type:"info",delay:2500}):(r["default"].set(t,"children",n.data.data.children),void(e&&e()))})},toggle:function(t,e){var n=(t.id,t.type),i=event.currentTarget,a=i.dataset.show;switch("show"==a&&this.fetchTree(t,function(){i.dataset.show="hide"}),n){case 1:(0,o["default"])(i).nextAll().slideToggle(),(0,o["default"])(i).find("em").toggleClass("icon-close");break;case 2:(0,o["default"])(i).nextAll().slideToggle(),(0,o["default"])(i).find("em").toggleClass("icon-jian");break;case 3:(0,o["default"])(i).nextAll().slideToggle(),(0,o["default"])(i).find("em").toggleClass("icon-jian");break;default:c["default"].alert(u["default"],{show:!0,msg:"修改状态提交异常",type:"info",delay:2500})}},commonMsgAdd:function(t,e){var n=this;e.trim()&&n.$dispatch("common-msg",e)},commonMsgF:function(t){var e=this,n={id:0,type:0,searchval:e.key_word};this.$http({url:"commonLanguage/getItemTree",method:"get",params:n}).then(function(t){return t.data.result!==!0?void c["default"].alert(u["default"],{show:!0,msg:t.data.message,type:"info",delay:2500}):void(e.treeData=t.data.data.children)})},clearSearch:function(){this.key_word="";var t=this;this.$http({url:"commonLanguage/getItemTree",method:"get",params:{id:0,type:0,searchval:this.key_word}}).then(function(e){return e.data.result!==!0?void c["default"].alert(u["default"],{show:!0,msg:e.data.message,type:"info",delay:2500}):void(t.treeData=e.data.data.children)})},bindResize:function(t,e,n,i){function a(t){var e=0;t.clientY-d<=n&&t.clientY-d>=i?e=t.clientY-d:t.clientY-d>n?e=n:t.clientY-d<i&&(e=i),c.height=e+"px",l.height=n-e+"px"}function s(){t.releaseCapture?(t.releaseCapture(),t.onmousemove=t.onmouseup=null):(0,o["default"])(document).unbind("mousemove",a).unbind("mouseup",s)}var r,d,c=t.style,l=e.style;r=d=0,(0,o["default"])(t).mousedown(function(e){r=e.clientX-t.offsetWidth,d=e.clientY-t.offsetHeight,t.setCapture?(t.setCapture(),t.onmousemove=function(t){a(t||event)},t.onmouseup=s):(0,o["default"])(document).bind("mousemove",a).bind("mouseup",s),e.preventDefault()})},noUseTip:function(){c["default"].alert(u["default"],{show:!0,msg:"该功能正在建设中，敬请期待"})}}}},function(t,e){t.exports=' <div class=im-right style="height: 600px" _v-3d40062c=""> <div id=drag_area style="position: relative;height: 47px" _v-3d40062c=""> <div class=link-a style="margin-bottom: 8px" _v-3d40062c=""> <a href=javascript:; @click=noUseTip() _v-3d40062c="">客户信息</a> <a href=javascript:; @click=noUseTip() _v-3d40062c="">圈子推荐</a> <a href=javascript:; @click=noUseTip() _v-3d40062c="">话题推荐</a> </div> <div class=icon-dian style="position: absolute;bottom:0;left: 0;width: 100%;cursor: s-resize" _v-3d40062c=""></div> </div> <div id=behind style="overflow: hidden" _v-3d40062c=""> <div class=left-tab _v-3d40062c=""> <a href=javascript:; class=active _v-3d40062c="">常用语<em class=icon-tab _v-3d40062c=""></em></a> <a href=javascript:; @click=noUseTip() _v-3d40062c="">用户订单<em class=icon-tab _v-3d40062c=""></em></a> <a href=javascript:; @click=noUseTip() _v-3d40062c="">跟进管理<em class=icon-tab _v-3d40062c=""></em></a> </div> <div class=right-search _v-3d40062c=""> <input @keyup.enter=commonMsgF($event) class=common v-model=key_word type=text placeholder=搜索常用语 _v-3d40062c=""> <em @click=clearSearch() class=icon-clear _v-3d40062c=""></em> <a href=javascript:void(0) @click=commonMsgF($event) class=btn-search _v-3d40062c=""></a> </div> <div class=im-phrase-list _v-3d40062c=""> <div class=phrase-list _v-3d40062c=""> <div class=list-bg v-for="one in treeData" _v-3d40062c=""> <div class="list-title first_level" v-if="one.type == 1" data-show=show @click=toggle(one,$event) _v-3d40062c="">{{one.title}}<em class="icon-down icon-close" _v-3d40062c=""></em></div> <li style="margin-left: 10px;cursor: pointer" v-if="one.type == 4" @dblclick=commonMsgAdd($event,one.desc) _v-3d40062c=""><span _v-3d40062c="">{{one.title}}</span></li> <div v-for="two in one.children" _v-3d40062c=""> <li v-if="two.type == 2" class=second_level data-show=show style="cursor: pointer" @click=toggle(two,$event) _v-3d40062c=""><em class="icon-jia icon-po" _v-3d40062c=""></em><span _v-3d40062c="">{{two.title}}</span></li> <li v-if="two.type == 4" style="margin-left: 10px" class=multiline-overflow @dblclick=commonMsgAdd($event,two.desc) _v-3d40062c=""><span _v-3d40062c="">{{two.title}}</span></li> <div v-if=two.children v-for="three in two.children" _v-3d40062c=""> <div v-if="three.type == 4" @dblclick=commonMsgAdd($event,three.desc) style="margin-left: 34px;cursor: pointer" data-type={{three.type}} _v-3d40062c="">{{three.title | json}}</div> <div v-if="three.type == 3" style="margin-left: 18px;cursor: pointer" class="third_level multiline-overflow" data-show=show @click=toggle(three,$event) _v-3d40062c=""><em class="icon-jia icon-po" data-type={{three.type}} _v-3d40062c=""></em><span _v-3d40062c="">{{three.title}}</span></div> <div v-if=three.children v-for="four in three.children" _v-3d40062c=""> <div v-if="four.type == 4" style="margin-left: 54px;cursor: pointer" @dblclick=commonMsgAdd($event,four.desc) _v-3d40062c="">{{four.title}}</div> </div> </div> </div> </div> </div> </div> </div> </div> '},function(t,e,n){var i,a;n(92),i=n(94),a=n(95),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(93);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,"",""])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"record"}},function(t,e){t.exports=' <div class=im-chat _v-393cbe8e=""> <slot _v-393cbe8e=""></slot> </div> '},function(t,e){t.exports=' <div class=im _v-6d23d9a5=""> <m-header _v-6d23d9a5=""> <div class=header _v-6d23d9a5=""> <div class=wrap-box _v-6d23d9a5=""> <div class=fl _v-6d23d9a5="">{{user_info.nick_name}} <div class=header-select _v-6d23d9a5=""> <div @click=toggleConditionStatus() _v-6d23d9a5=""> <span :class=status.conditionStyle _v-6d23d9a5=""></span>{{status.conditionHtml}}<em class=san _v-6d23d9a5=""></em> </div> <div class=select-s v-show=status.conditionStatus _v-6d23d9a5=""> <a href=javascript:void(0) @click=conditionStatusHtml($event,1) :class="{\'active\' : conditionType == 1}" _v-6d23d9a5=""><span _v-6d23d9a5=""></span>在线</a> <a href=javascript:void(0) @click=conditionStatusHtml($event,2) :class="{\'active\' : conditionType == 2}" _v-6d23d9a5=""><span class=red _v-6d23d9a5=""></span>忙碌</a> <a href=javascript:void(0) @click=conditionStatusHtml($event,3) :class="{\'active\' : conditionType == 3}" _v-6d23d9a5=""><span class=gray _v-6d23d9a5=""></span>离线</a> </div> </div> 当前处理咨询人数：<span class=text _v-6d23d9a5="">{{consultation_number}}</span>当前等待咨询人数：<span class=text _v-6d23d9a5="">{{wait_num}}</span><a href=javascript:void(0) @click=close() class=btn-header _v-6d23d9a5="">退出</a> </div> <div class=fr _v-6d23d9a5=""> <img src=/dist/img/ui/logo.png _v-6d23d9a5=""> </div> </div> </div> </m-header> <div class="wrap-box clearfix" _v-6d23d9a5=""> <m-contacts _v-6d23d9a5=""> <div class=left-tab _v-6d23d9a5=""> <a href=javascript:void(0) @click=tabAndload() :class="{ \'active\': status.tabStatus}" _v-6d23d9a5="">当前联系人<em class=icon-tab _v-6d23d9a5=""></em></a> <a href=javascript:void(0) @click="this.status.tabStatus = false" :class="{ \'active\': !status.tabStatus}" _v-6d23d9a5="">历史联系人<em class=icon-tab _v-6d23d9a5=""></em></a> </div> <div class=list_cur v-show=status.tabStatus _v-6d23d9a5=""> <div class=tab-list v-for="item in currentList" _v-6d23d9a5=""> <ul _v-6d23d9a5=""> <li class="contacts_li contacts_cur" @click=loadStatusControl($index,item.customerId,0,$event) _v-6d23d9a5=""><img :src=item.imgPath _v-6d23d9a5=""> <p _v-6d23d9a5=""><span class=f14 _v-6d23d9a5="">{{item.nickname}}</span><span class=fr _v-6d23d9a5="">{{item.recentVisitTime}}</span></p> <p class=gray _v-6d23d9a5="">{{item.recentVisitRecord}}</p><span v-show=item.show class=new _v-6d23d9a5="">{{item.num}}</span> </li> </ul> </div> </div> <div class=list_hicurrentListst v-show=!status.tabStatus _v-6d23d9a5=""> <div class=tab-list v-for="item in recentContactList" _v-6d23d9a5=""> <ul _v-6d23d9a5=""> <li class="contacts_li contacts_his" data-load=true @click=loadStatusControl($index,item.customerId,1,$event) _v-6d23d9a5=""><img :src=item.imgPath _v-6d23d9a5=""> <p _v-6d23d9a5=""><span class=f14 _v-6d23d9a5="">{{item.nickname}}</span><span class=fr _v-6d23d9a5="">{{item.recentVisitTime}}</span></p> <p class=gray _v-6d23d9a5="">{{item.recentVisitRecord}}</p> </li> </ul> </div> </div> </m-contacts> <m-record _v-6d23d9a5=""> <div class=chatrecord _v-6d23d9a5=""> <div class=right-chat style="height: 430px" _v-6d23d9a5=""> <div class=chat-scroll @mousewheel=mousewheel($event) _v-6d23d9a5=""> <div v-show=status.loadStatus style="text-align: center;margin-top: 5px" _v-6d23d9a5="">上拉加载加载历史信息</div> <div v-show=status.loadingStatus style="text-align: center;margin-top: 5px" _v-6d23d9a5="">正在加载中...</div> <div v-show=status.noMore style="text-align: center ;margin-top: 5px" _v-6d23d9a5="">没有更多</div> <div v-for="item in news_array" track-by=$index _v-6d23d9a5=""> <dl class=clearfix v-if="item.personnelType == 1" _v-6d23d9a5=""> <dt _v-6d23d9a5=""><img :src=item.sessionIcon _v-6d23d9a5=""></dt> <dd _v-6d23d9a5=""> <p class=gray _v-6d23d9a5="">{{item.sessionName}} {{item.sessionTime | Date \'hh:mm:ss\'}}</p> <div class=text @click=contactPlay($event) _v-6d23d9a5=""><em class=icon-san _v-6d23d9a5=""></em> <p v-if="item.sessionContent.type.trim() == \'text\'" _v-6d23d9a5="">{{{item.sessionContent.content | faceShow}}}</p> <p v-if="item.sessionContent.type.trim() == \'img\'" _v-6d23d9a5=""><img :src=item.sessionContent.content _v-6d23d9a5=""></p> <div v-if="item.sessionContent.type.trim() == \'video\'" class=im-video _v-6d23d9a5=""> <video id=crm width=130 height=190 _v-6d23d9a5=""> <source :src=item.sessionContent.content type=video/ogg _v-6d23d9a5="">您的浏览器不支持 video 标签。 </video><em class=icon-play _v-6d23d9a5=""></em> </div> <div v-if="item.sessionContent.type.trim() == \'audio\'" :style="{\'width\':item.sessionContent.playtime/1000+\'px\',\'max-width\':\'250px\'}" class="im-audio im-audio-new" _v-6d23d9a5=""> <div class=fl _v-6d23d9a5="">{{item.sessionContent.imgHeight}}s\'</div> <div class=fr _v-6d23d9a5=""></div> <a class=audio-con :href=item.sessionContent.content style=display:none _v-6d23d9a5="">audio</a> </div> </div> </dd> </dl> <dl v-else="" class="clearfix right" _v-6d23d9a5=""> <dt _v-6d23d9a5=""><img :src=user_info.icon _v-6d23d9a5=""></dt> <dd _v-6d23d9a5=""> <p class=gray _v-6d23d9a5="">{{item.sessionName}} {{item.sessionTime | Date \'hh:mm:ss\'}}</p> <div class=text _v-6d23d9a5=""><em class=icon-san _v-6d23d9a5=""></em> <p v-if="item.sessionContent.type.trim() == \'text\'" _v-6d23d9a5="">{{{item.sessionContent.content | faceShow}}}</p> <a v-if=item.rewire @click=resend(item) class=resend _v-6d23d9a5=""><span _v-6d23d9a5="">!</span>重发</a> <a v-if=item.loading class=resend _v-6d23d9a5=""><img src=/dist/img/ui/loading.gif _v-6d23d9a5=""></a> <p v-if="item.sessionContent.type.trim() == \'img\'" _v-6d23d9a5=""><img :src=item.sessionContent.content _v-6d23d9a5=""></p> </div> </dd> </dl> </div> </div> </div> <div class=chat-send _v-6d23d9a5=""> <div class=send-title _v-6d23d9a5=""> <a @click="this.status.faceStatus = !this.status.faceStatus" class="icon icon-expression face_button" _v-6d23d9a5=""></a> <a style="position: relative" class="icon icon-img" _v-6d23d9a5=""> <input class=photo @change=uploadImg($event) style="opacity: 0;width: 26px;position: absolute;top:0;left: 0" type=file _v-6d23d9a5=""> </a> <a @click=recentContactListDelete() class="btn btn-gray" _v-6d23d9a5="">结束当前会话</a> <div class="expression-box clearfix face_box" v-show=status.faceStatus _v-6d23d9a5=""> <img class=face_img v-for="item in face" @click=sendFace(item) :src="\'/dist/img/faces/\' + item + \'.png\'" _v-6d23d9a5=""> </div> </div> <div class=send-text style="position: relative" _v-6d23d9a5=""> <textarea class=input_content style="position: relative;z-index: 50" row=4 v-model=inputPool @keydown=sendMsg($event) _v-6d23d9a5="">{{{inputPool}}}</textarea> <div class=img_content @click=textareaFocus() style="position: absolute;top:0;left:0;width: 526px;height: 60px;padding: 5px;z-index: 100;display: none;background-color: #f9f9f9" _v-6d23d9a5=""></div> <div class=send-btn _v-6d23d9a5=""> <div class=btn-send _v-6d23d9a5=""><a class="send btn btn-blue" @click=sendMsg($event) _v-6d23d9a5="">发送</a><span class=icon-down @click="this.status.sendMod = true" _v-6d23d9a5=""></span></div> <div class=btn-send-empty v-show=status.messageEmpty _v-6d23d9a5=""><em class=sanjiao _v-6d23d9a5=""></em><span _v-6d23d9a5="">!</span>发送内容不能为空！</div> <div class=btn-send-s v-show=status.sendMod _v-6d23d9a5=""> <a class=enter @click=sendTypeChange($event) :class=" {\'active\' : status.sendType}" _v-6d23d9a5="">Enter发送</a> <a class=c_enter @click=sendTypeChange($event) :class=" {\'active\' : !status.sendType}" _v-6d23d9a5="">ctrl+Enter发送</a> </div> </div> </div> </div> </div> </m-record> <m-common_msg _v-6d23d9a5=""></m-common_msg> </div> </div> <audio class=msg_music style="display: none" _v-6d23d9a5=""> <source src=/dist/img/tip.mp3 type=audio/mp3 _v-6d23d9a5="">您的浏览器不支持 audio 标签。 </audio> '},function(t,e,n){var i,a;i=n(98),a=n(105),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(99),o=i(a),s=n(102),r=i(s);e["default"]={name:"dashboard",data:function(){return{}},components:{"m-header":o["default"],"m-nav":r["default"]}}},function(t,e,n){var i,a;i=n(100),a=n(101),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(14),r=i(s);e["default"]={name:"header",data:function(){return{}},vuex:{getters:{user_info:function(){return o["default"].state.user_info}}},methods:{logout:function(){var t=this;this.$http({url:"operator/logout?operator_id="+this.user_info.operator_id,method:"get"}).then(function(e){var n=e.data;n.result&&(r["default"].delCookie("user_info"),t.$route.router.go("/login"))})}}}},function(t,e){t.exports=" <div class=header> <div class=wrap-box> <div class=fl>欢迎您：{{user_info.nick_name}}<a href=javascript:void(0); class=btn-header @click=logout()>注销</a></div> <div class=fr> <a href=javascript:void(0) v-link=\"{path: '/dashboard'}\"> <img src=/dist/img/ui/logo.png> </a> </div> </div> </div> "},function(t,e,n){var i,a;i=n(103),a=n(104),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(20),r=i(s);e["default"]={name:"nav",vuex:{getters:{user_info:function(){return o["default"].state.user_info}},actions:r["default"]},ready:function(){},methods:{enterIm:function(){window.open("#!/im","美信客服平台IM")}}}},function(t,e){t.exports=" <div class=wrap-left> <div class=menu> <a href=javascript:void(0) v-link=\"{name: 'AccountManage'}\" v-show=\"user_info.type == '0' || user_info.type == '1'\">账号管理</a> <a href=javascript:void(0) v-link=\"{name: 'CommonMsg'}\">常用语配置</a> <a href=javascript:void(0) v-link=\"{name: 'Password'}\" v-show=\"user_info.type == '0'\">修改密码</a> <a href=javascript:void(0) v-link=\"{name: 'ChatRecord'}\">查询聊天记录</a> <a href=javascript:void(0) v-link=\"{name: 'Configuration'}\">配置管理</a> <a href=javascript:void(0) target=_blank @click=enterIm()>进入IM</a> </div> </div> "},function(t,e){t.exports=' <m-header></m-header> <div class="wrap-box clearfix"> <m-nav></m-nav> <div class="wrap-right clearfix"> <div class=welcome v-show="$route.path === \'/dashboard\'">欢迎使用国美+客服平台</div> <router-view></router-view> </div> </div> '},function(t,e,n){var i,a;i=n(107),a=n(154),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(108),o=i(a),s=n(144),r=i(s),d=n(149),c=i(d),l=n(11),u=i(l),f=n(20),p=i(f),v=n(14),h=i(v);e["default"]={name:"accountManage",data:function(){var t=this;return{modalConfigNew:{show:!1,title:"新增账户",cancel_str:"放弃",apply_str:"保存",cancel_func:function(){t.showUserList=!1,t.currentNewUser={type:2}},apply_func:function(){return""===t.currentNewUser.loginName?void p["default"].alert(u["default"],{show:!0,msg:"登录名不能为空",type:"danger"}):""===t.currentNewUser.nickname?void p["default"].alert(u["default"],{show:!0,msg:"昵称不能为空",type:"danger"}):void t.$http({url:"operator/addOperator",method:"post",body:{login_name:t.currentNewUser.loginName,nick_name:t.currentNewUser.nickname,role:t.currentNewUser.type}}).then(function(e){return e.data.result?(p["default"].alert(u["default"],{show:!0,msg:"新增账户成功",type:"success"}),t.modalConfigNew.show=!1,t.currentNewUser={type:2},t.paginationConf.currentPage=1,void t.getUserList()):void p["default"].alert(u["default"],{show:!0,msg:e.data.message,type:"danger"})})}},modalConfigEdit:{show:!1,title:"修改账户",cancel_str:"放弃",apply_str:"保存",cancel_func:function(){t.showUserList=!1,t.currentEditUser={}},apply_func:function(){return""===t.currentEditUser.nickname?void p["default"].alert(u["default"],{show:!0,msg:"昵称不能为空",type:"danger"}):void t.$http({url:"operator/updateOperator",method:"post",body:{operatorId:t.currentEditUser.id,nickName:t.currentEditUser.nickname,role:t.currentEditUser.type}}).then(function(e){return e.data.result?(p["default"].alert(u["default"],{
show:!0,msg:"修改账户成功",type:"success"}),t.modalConfigEdit.show=!1,t.currentEditUser={},t.paginationConf.currentPage=1,void t.getUserList()):void p["default"].alert(u["default"],{show:!0,msg:e.data.message,type:"danger"})})}},currentEditUser:{},currentNewUser:{loginName:"",nickname:"",type:2},showUserList:!1,paginationConf:{currentPage:1,totalItems:0,itemsPerPage:10,pagesLength:5,onChange:function(){t.getUserList()}},userList:[]}},vuex:{getters:{user_info:function(){return u["default"].state.user_info}},actions:p["default"]},components:{"m-modal":r["default"],"m-pagination":c["default"]},ready:function(){return h["default"].checkIsAdmin(this.user_info.type)?void this.getUserList():(p["default"].alert(u["default"],{show:!0,msg:"无权限",type:"danger"}),void this.$route.router.go("/dashboard"))},methods:{getUserList:function(){var t=this;this.$http({url:"operator/getOperatorListByPage",method:"post",body:{pageSize:this.paginationConf.itemsPerPage,pageIndex:this.paginationConf.currentPage}}).then(function(e){var n=e.data;t.paginationConf.totalItems=n.data.total,t.userList=n.data.result})},addUser:function(){this.modalConfigNew.show=!0},editUser:function(t){this.modalConfigEdit.show=!0,this.currentEditUser=(0,o["default"])({},t)},toggleRoleList:function(){this.showUserList=!this.showUserList},changeUserRole:function(t,e){var n=null;"new"===t?n=this.currentNewUser:"edit"===t&&(n=this.currentEditUser),n.type=e},delUser:function(t){var e=this;p["default"].confirm(u["default"],{show:!0,title:"删除角色",msg:"是否删除帐户："+t.nickname,apply:function(){e.$http({url:"operator/deleteOperator",method:"post",body:{operator_id:t.id}}).then(function(t){return t.data.result?(p["default"].alert(u["default"],{show:!0,msg:"删除成功",type:"success"}),e.paginationConf.currentPage=1,void e.getUserList()):void p["default"].alert(u["default"],{show:!0,msg:t.data.message,type:"danger"})})}})}}}},function(t,e,n){t.exports={"default":n(109),__esModule:!0}},function(t,e,n){n(110),t.exports=n(70).Object.assign},function(t,e,n){var i=n(111);i(i.S+i.F,"Object",{assign:n(125)})},function(t,e,n){var i=n(112),a=n(70),o=n(113),s=n(115),r="prototype",d=function(t,e,n){var c,l,u,f=t&d.F,p=t&d.G,v=t&d.S,h=t&d.P,m=t&d.B,g=t&d.W,_=p?a:a[e]||(a[e]={}),y=_[r],x=p?i:v?i[e]:(i[e]||{})[r];p&&(n=e);for(c in n)l=!f&&x&&void 0!==x[c],l&&c in _||(u=l?x[c]:n[c],_[c]=p&&"function"!=typeof x[c]?n[c]:m&&l?o(u,i):g&&x[c]==u?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e[r]=t[r],e}(u):h&&"function"==typeof u?o(Function.call,u):u,h&&((_.virtual||(_.virtual={}))[c]=u,t&d.R&&y&&!y[c]&&s(y,c,u)))};d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,t.exports=d},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(114);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,a){return t.call(e,n,i,a)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(116),a=n(124);t.exports=n(120)?function(t,e,n){return i.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(117),a=n(119),o=n(123),s=Object.defineProperty;e.f=n(120)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),a)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(118);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(120)&&!n(121)(function(){return 7!=Object.defineProperty(n(122)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(121)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var i=n(118),a=n(112).document,o=i(a)&&i(a.createElement);t.exports=function(t){return o?a.createElement(t):{}}},function(t,e,n){var i=n(118);t.exports=function(t,e){if(!i(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!i(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var i=n(126),a=n(141),o=n(142),s=n(143),r=n(130),d=Object.assign;t.exports=!d||n(121)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=d({},t)[n]||Object.keys(d({},e)).join("")!=i})?function(t,e){for(var n=s(t),d=arguments.length,c=1,l=a.f,u=o.f;d>c;)for(var f,p=r(arguments[c++]),v=l?i(p).concat(l(p)):i(p),h=v.length,m=0;h>m;)u.call(p,f=v[m++])&&(n[f]=p[f]);return n}:d},function(t,e,n){var i=n(127),a=n(140);t.exports=Object.keys||function(t){return i(t,a)}},function(t,e,n){var i=n(128),a=n(129),o=n(133)(!1),s=n(137)("IE_PROTO");t.exports=function(t,e){var n,r=a(t),d=0,c=[];for(n in r)n!=s&&i(r,n)&&c.push(n);for(;e.length>d;)i(r,n=e[d++])&&(~o(c,n)||c.push(n));return c}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(130),a=n(132);t.exports=function(t){return i(a(t))}},function(t,e,n){var i=n(131);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(129),a=n(134),o=n(136);t.exports=function(t){return function(e,n,s){var r,d=i(e),c=a(d.length),l=o(s,c);if(t&&n!=n){for(;c>l;)if(r=d[l++],r!=r)return!0}else for(;c>l;l++)if((t||l in d)&&d[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var i=n(135),a=Math.min;t.exports=function(t){return t>0?a(i(t),9007199254740991):0}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(135),a=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?a(t+e,0):o(t,e)}},function(t,e,n){var i=n(138)("keys"),a=n(139);t.exports=function(t){return i[t]||(i[t]=a(t))}},function(t,e,n){var i=n(112),a="__core-js_shared__",o=i[a]||(i[a]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(132);t.exports=function(t){return Object(i(t))}},function(t,e,n){var i,a;n(145),i=n(147),a=n(148),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(146);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,".modal_con[_v-b2289188]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4)}.pop-box[_v-b2289188]{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}",""])},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={name:"modalCon",props:["modalConfig"],methods:{cancel:function(){this.modalConfig.cancel_func(),this.modalConfig.show=!1},apply:function(){this.modalConfig.apply_func()}}}},function(t,e){t.exports=' <div class="modal_con transition" v-show=modalConfig.show transition=fade _v-b2289188=""> <div class="pop-box {{modalConfig.fixcls || \'\'}}" _v-b2289188=""> <div class=ui-dialog-title _v-b2289188="">{{modalConfig.title}}</div> <div class=ui-dialog-body _v-b2289188=""> <slot _v-b2289188=""></slot> </div> <div class="ui-dialog-footer clearfix" _v-b2289188=""> <div class=ui-dialog-button _v-b2289188=""> <a href=javascript:void(0) @click=cancel() class=btn _v-b2289188="">{{modalConfig.cancel_str}}</a> <a href=javascript:void(0) @click=apply() class="btn btn-blue mgl19" _v-b2289188="">{{modalConfig.apply_str}}</a> </div> </div> </div> </div> '},function(t,e,n){var i,a;n(150),i=n(152),a=n(153),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(151);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,"",""])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),o=i(a);e["default"]={name:"Pagination",data:function(){return{pageList:[]}},created:function(){this.paginationConf.pagesLength=parseInt(this.paginationConf.pagesLength)?parseInt(this.paginationConf.pagesLength):9,this.paginationConf.pagesLength%2===0&&(this.paginationConf.pagesLength=this.paginationConf.pagesLength-1),this.paginationConf.perPageOptions||(this.paginationConf.perPageOptions=[10,15,20,30,50]),this.paginationConf.totalItems&&this.getPagination()},props:["paginationConf"],methods:{changeCurrentPage:function(t){this.paginationConf.currentPage=t},prevPage:function(){this.paginationConf.currentPage>1&&(this.paginationConf.currentPage-=1)},nextPage:function(){this.paginationConf.currentPage<this.paginationConf.numberOfPages&&(this.paginationConf.currentPage+=1)},getPagination:function(t,e){var n=this;if(n.paginationConf.currentPage=parseInt(n.paginationConf.currentPage)?parseInt(n.paginationConf.currentPage):1,n.paginationConf.totalItems=parseInt(n.paginationConf.totalItems)?parseInt(n.paginationConf.totalItems):0,n.paginationConf.itemsPerPage=parseInt(n.paginationConf.itemsPerPage)?parseInt(n.paginationConf.itemsPerPage):8,o["default"].set(n.paginationConf,"numberOfPages",Math.ceil(n.paginationConf.totalItems/n.paginationConf.itemsPerPage)),n.paginationConf.currentPage<1&&(n.paginationConf.currentPage=1),n.paginationConf.numberOfPages>0&&n.paginationConf.currentPage>n.paginationConf.numberOfPages&&(n.paginationConf.currentPage=n.paginationConf.numberOfPages),n.pageList=[],n.paginationConf.numberOfPages<=n.paginationConf.pagesLength)for(var i=1;i<=n.paginationConf.numberOfPages;i++)n.pageList.push(i);else{var a=(n.paginationConf.pagesLength+1)/2;if(n.paginationConf.currentPage<=a)for(var s=1;s<=n.paginationConf.pagesLength;s++)n.pageList.push(s);else if(n.paginationConf.currentPage>n.paginationConf.numberOfPages-a){for(var r=n.paginationConf.pagesLength-1;r>0;r--)n.pageList.push(n.paginationConf.numberOfPages-r);n.pageList.push(n.paginationConf.numberOfPages)}else{for(var d=Math.ceil(n.paginationConf.pagesLength/2);d>1;d--)n.pageList.push(n.paginationConf.currentPage-d+1);n.pageList.push(n.paginationConf.currentPage);for(var c=1;c<Math.ceil(n.paginationConf.pagesLength/2);c++)n.pageList.push(n.paginationConf.currentPage+c)}}}},watch:{paginationConf:{handler:function(t){this.getPagination()},deep:!0},"paginationConf.currentPage":{handler:function(t){this.paginationConf.onChange()}}}}},function(t,e){t.exports=' <div class=page v-show="paginationConf.totalItems > 0" _v-4a63e9ec=""> <a href=javascript:void(0); :class="{disabled: paginationConf.currentPage == 1}" class=cn @click=prevPage() _v-4a63e9ec=""><span _v-4a63e9ec="">上一页</span></a> <a href=javascript:void(0); v-for="item in pageList" track-by=$index :class="{active: item == paginationConf.currentPage}" @click=changeCurrentPage(item) _v-4a63e9ec=""><span _v-4a63e9ec="">{{item}}</span></a> <a href=javascript:void(0); :class="{disabled: paginationConf.currentPage == paginationConf.numberOfPages}" class=cn @click=nextPage() _v-4a63e9ec=""><span _v-4a63e9ec="">下一页</span></a> </div> '},function(t,e){t.exports=' <div class=btn-box><a href=javascript:void(0) class="btn btn-big btn-blue" @click=addUser()>添加账户</a></div> <table class=table> <tr> <th width=52>ID</th> <th>登录名</th> <th width=100>昵称</th> <th width=70>角色</th> <th width=135>创建时间</th> <th width=70>目前状态</th> <th width=140>操作</th> </tr> <tr v-for="item in userList"> <td>{{item.id}}</td> <td>{{item.loginName}}</td> <td>{{item.nickname}}</td> <td>{{item.type | userType}}</td> <td>{{item.createTimeStr}}</td> <td>{{item.state | userStatus}}</td> <td> <a href=javascript:void(0) class="btn btn-red" @click=editUser(item)>编辑</a> <a href=javascript:void(0) class="btn btn-gray" @click=delUser(item)>删除</a> </td> </tr> </table> <m-pagination :pagination-conf=paginationConf></m-pagination> <m-modal :modal-config=modalConfigNew> <div class=add-acount> <div class=input> <label>登录名</label> <input type=text placeholder=输入用户gomeplus邮箱名 class=login-name v-model=currentNewUser.loginName> </div> <div class=input> <label>昵称</label> <input type=text v-model=currentNewUser.nickname> </div> <div class="input clearfix"> <label>角色</label> <div class=character> <input type=text placeholder=请输入昵称 readonly=readonly @click=toggleRoleList() :value="currentNewUser.type | userType"><em class=line @click=toggleRoleList()></em><em class=icon-down @click=toggleRoleList()></em> <ul v-show=showUserList> <li @click="toggleRoleList(),changeUserRole(\'new\', 2)" value=2>客服</li> <li @click="toggleRoleList(),changeUserRole(\'new\', 1)" value=1>客服经理</li> </ul> </div> </div> </div> </m-modal> <m-modal :modal-config=modalConfigEdit> <div class=add-acount> <h3 class=add-acount-title>{{currentEditUser.loginName}}</h3> <div class=input> <label>昵称</label> <input type=text v-model=currentEditUser.nickname> </div> <div class="input clearfix"> <label>角色</label> <div class=character> <input type=text placeholder=请输入昵称 :value="currentEditUser.type | userType" readonly=readonly @click=toggleRoleList()><em class=line @click=toggleRoleList()></em><em class=icon-down @click=toggleRoleList()></em> <ul v-show=showUserList> <li @click="toggleRoleList(),changeUserRole(\'edit\', 2)" value=2>客服</li> <li @click="toggleRoleList(),changeUserRole(\'edit\', 1)" value=1>客服经理</li> </ul> </div> </div> </div> </m-modal> '},function(t,e,n){var i,a;n(156),i=n(158),a=n(162),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(157);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,".wrap-right .title .search-box .search-list .list-s[_v-288ef1dd]{display:block}.span-active[_v-288ef1dd]{background-color:rgba(55,134,199,.6)!important;color:#fff!important}.left-list ul li span[_v-288ef1dd]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:inline-block;vertical-align:middle}.left-list ul li span[_v-288ef1dd]:nth-child(3){max-width:60px}",""])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2),o=i(a),s=n(20),r=i(s),d=n(11),c=i(d),l=n(149),u=i(l),f=n(144),p=i(f),v=n(159),h=i(v),m=n(55),g=i(m),_=n(14),y=i(_),x=6048e5,w=(new Date).valueOf();e["default"]={name:"chatRecord",data:function(){return{exportType:"time",exportFileName:"",ExportStartTime:w-x,ExportEndTime:w,modalConfig:{fixcls:"check-chat",show:!1,title:"导出聊天记录",cancel_str:"取消",apply_str:"导出",cancel_func:function(){},apply_func:function(){}},exportsUserIds:[],searchText:"",paginationConf:{currentPage:1,itemsPerPage:50,pagesLength:5,totalItems:0,onChange:function(){}},searchType:1,searchList:[{type:1,txt:"客服人员"},{type:2,txt:"来访顾客"}],operatorMessage:[],operatorList:[],customerList:[],currentCustomerId:null,operatorId:null}},ready:function(){var t=this;this.paginationConf.onChange=function(){t.operatorMessage=[],t.getChatRecord()},this.modalConfig.apply_func=function(){t.modalConfig.show=!1,t.exportMsg(t.ExportStartTime,t.ExportEndTime)},this.getOperatorList()},components:{"m-pagination":u["default"],"m-modal":p["default"],"m-datetimepicker":h["default"]},methods:{getOperatorList:function(){var t=this;this.$http({url:"operator/getOperatorList",method:"get"}).then(function(e){t.operatorList=e.data.data.operatorList||[]})},getCustomerList:function(t,e){var n=this;(0,g["default"])(e.currentTarget).parents(".list-bg").find("ul>li").removeClass("span-active"),(0,g["default"])(e.currentTarget).addClass("span-active"),this.operatorMessage=[],this.operatorId=t.id,this.$http({url:"message/getMessageList",method:"get",params:{operatorId:t.id}}).then(function(t){n.customerList=t.data.data.customerList||[]})},getChatRecord:function(t,e){var n=this;e&&((0,g["default"])(e.target).parents(".left-list").find("ul>li").removeClass("span-active"),(0,g["default"])(e.target).parent().addClass("span-active"),this.paginationConf.currentPage=1),this.currentCustomerId=t?t.customerId:this.currentCustomerId,this.$http({url:"message/getOperatorMessageList",method:"get",params:{customerId:this.currentCustomerId,pageIndex:this.paginationConf.currentPage,pageSize:this.paginationConf.itemsPerPage,operatorId:this.operatorId}}).then(function(t){var i=t.data.data;n.paginationConf.totalItems=i.total||0,e&&setTimeout(function(){n.paginationConf.currentPage=n.paginationConf.numberOfPages},1),n.operatorMessage=i.sessionList||[]})},startShow:function(t,e){var n=new Date(this.ExportEndTime);e.setOptions({maxDate:n||!1})},endShow:function(t,e){var n=new Date(this.ExportStartTime);e.setOptions({minDate:n||!1})},search:function(t){var e=this,n=this.searchText.trim();this._search("message/searchMessageList",n,function(t){e.paginationConf.currentPage=1,e.paginationConf.totalItems=t.total||0,"1"==e.searchType&&(e.customerList=[],e.operatorMessage=[]),"2"==e.searchType&&(e.operatorMessage=[]),t.customerList?(e.operatorMessage=t.sessionList||[],e.customerList=t.customerList||[]):e.operatorList=t.operatorList||[]}),this.operatorId=null},_search:function(t,e,n){this.$http({url:t,method:"get",params:{customerKeyWord:e,searchType:this.searchType}}).then(function(t){n(t.data.data)})},chooseExportUser:function(t,e){var n=this,i=t.split(","),a={id:i[0],name:i[1]};e?this.exportsUserIds.push(a):this.exportsUserIds.forEach(function(t,e){t.id===a.id&&n.exportsUserIds.splice(e,1)})},openExportModal:function(t){if(this.exportsUserIds.length){var e=this.exportsUserIds.map(function(t){return t.name});this.exportFileName=e.join("与")+"的聊天记录.zip",this.modalConfig.show=!0}else r["default"].alert(c["default"],{show:!0,msg:"请选择导出的用户"})},exportMsg:function(t,e){var n,i,a=this.exportsUserIds.map(function(t){return t.id}).join(",");n="string"==typeof t?Date.parse(t):t,i="string"==typeof e?Date.parse(e):e;var s=this.operatorId;"time"==this.exportType?window.open(o["default"].http.options.root+"/message/exportPDFMessageList?customerId="+a+"&startTime="+n+"&endTime="+i+"&operatorId="+s):window.open(o["default"].http.options.root+"/message/exportPDFMessageList?customerId="+a+"&operatorId="+s)},toggleSearchType:function(t){this.searchType=t},chooseExportType:function(t){this.exportType=t},contactPlay:function(t){var e=t.currentTarget,n=(0,g["default"])(e).find("video"),i=(0,g["default"])(e).find(".icon-play");(0,g["default"])("video").stop(),i.show(),n.length>0&&(n[0].play(),n[0].addEventListener("ended",function(){i.show()}),i.hide());var a=(0,g["default"])(e).find(".im-audio");a.removeClass("im-audio-new");var o=(0,g["default"])(e).find(".audio-con").attr("href");o&&fetch(o).then(function(t){return t.blob()}).then(function(t){y["default"].readBlob(t,function(t){y["default"].playAmrArray(t)})})}}}},function(t,e,n){var i,a;i=n(160),a=n(161),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(55),o=i(a);e["default"]={name:"Datepacker",props:["model","onshow"],ready:function(){var t=this,e=new Date(this.model).toLocaleDateString();(0,o["default"])(this.$el).datetimepicker({lang:"ch",value:e,format:"Y/m/d",onShow:function(e){t.onshow&&t.onshow(e,this)},onChangeDateTime:function(e,n){t.model=n.val()},timepicker:!1})}}},function(t,e){t.exports=" <img src=/dist/img/ui/icon-date1.png> "},function(t,e){t.exports=' <div class=title :class="{\'other\': searchType == 1}" _v-288ef1dd=""> <h2 v-show="searchType == 1" _v-288ef1dd="">{{searchList[0].txt}}</h2> <h2 _v-288ef1dd="">{{searchList[1].txt}}</h2> <div class=search-box _v-288ef1dd=""> <v-select :change=toggleSearchType :default-value=searchType _v-288ef1dd=""> <v-option v-for="item in searchList" :value=item.type _v-288ef1dd="">{{item.txt}}</v-option> </v-select> <input @keyup.enter=search v-model=searchText type=text placeholder=输入关键词搜索 _v-288ef1dd=""> <a v-on:click=search href=javascript:; class=btn-search _v-288ef1dd=""></a> </div> </div> <div class=chatrecord :class="{\'other\': searchType == 1}" _v-288ef1dd=""> <div v-show="searchType == 1" class=phrase-list _v-288ef1dd=""> <div class=text-empty v-show="operatorList.length === 0" _v-288ef1dd="">无结果</div> <div class=list-bg _v-288ef1dd=""> <ul _v-288ef1dd=""> <li v-for="item in operatorList" v-on:click="getCustomerList(item, $event)" _v-288ef1dd=""> <span _v-288ef1dd="">{{item.nickname}}</span> </li> </ul> </div> </div> <div class=left-list _v-288ef1dd=""> <div class=text-empty v-show="customerList.length === 0" _v-288ef1dd="">空</div> <ul _v-288ef1dd=""> <li v-for="user in customerList" _v-288ef1dd=""> <v-checkbox :checked=false :value="user.customerId+\',\'+user.customerName" :change="chooseExportUser.bind(this, user.customerId+\',\'+user.customerName)" _v-288ef1dd=""></v-checkbox> <img v-bind:src=user.icon alt={{user.customerName}} _v-288ef1dd=""> <span v-on:click=getChatRecord(user,$event) _v-288ef1dd="">{{user.customerName}}</span> <span class=fr _v-288ef1dd="">{{user.recentVisitTime | Date \'yy-MM-dd hh:mm\'}}</span> </li> </ul> <div class=list-btn _v-288ef1dd=""> <a v-on:click=openExportModal href=javascript:void(0); class="btn btn-blue" _v-288ef1dd="">导出</a> </div> </div> <div class=right-chat _v-288ef1dd=""> <div class=text-empty v-show="operatorMessage.length === 0" _v-288ef1dd="">空</div> <div class=chat-scroll _v-288ef1dd=""> <div v-for="item in operatorMessage" _v-288ef1dd=""> <dl class=clearfix v-bind:class="{\'clearfix\':item.personnelType == 1,\'cleafix right\':item.personnelType != 1}" _v-288ef1dd=""> <dt _v-288ef1dd=""><img v-bind:src=item.sessionIcon _v-288ef1dd=""></dt> <dd _v-288ef1dd=""> <p class=gray _v-288ef1dd="">{{item.sessionName}} {{item.sessionTime}}</p> <div class=text @click=contactPlay($event) _v-288ef1dd=""> <em class=icon-san _v-288ef1dd=""></em> <p v-if="item.sessionContent.type.trim() == \'text\'" _v-288ef1dd="">{{{item.sessionContent.content | faceShow}}}</p> <p v-if="item.sessionContent.type.trim() == \'img\'" _v-288ef1dd=""><img style="max-width: 299px" :src=item.sessionContent.content _v-288ef1dd=""></p> <div v-if="item.sessionContent.type.trim() == \'video\'" class=im-video _v-288ef1dd=""> <video id=crm width=130 height=190 _v-288ef1dd=""> <source :src=item.sessionContent.content type=video/ogg _v-288ef1dd="">您的浏览器不支持 video 标签。 </video><em class=icon-play _v-288ef1dd=""></em> </div> <div v-if="item.sessionContent.type.trim() == \'audio\'" :style="{\'width\':item.sessionContent.playtime/1000+\'px\',\'max-width\':\'250px\'}" class="im-audio im-audio-new" _v-288ef1dd=""> <div class=fl _v-288ef1dd="">{{item.sessionContent.imgHeight}}s\'</div> <div class=fr _v-288ef1dd=""></div> <a class=audio-con :href=item.sessionContent.content style=display:none _v-288ef1dd="">audio</a> </div> </div> </dd> </dl> </div> </div> <m-pagination :pagination-conf=paginationConf _v-288ef1dd=""></m-pagination> </div> </div> <m-modal :modal-config=modalConfig _v-288ef1dd=""> <div class=export-chat-records _v-288ef1dd=""> <div class="chat-date clearfix" _v-288ef1dd=""> <label _v-288ef1dd="">时间</label> <div class=date-box _v-288ef1dd=""> <div class="all-records clearfix" _v-288ef1dd=""> <v-radio :value="\'all\'" :checked="exportType === \'all\' ? true : false" :change=chooseExportType _v-288ef1dd=""></v-radio> <label _v-288ef1dd="">全部聊天记录</label> </div> <div class=choose-date _v-288ef1dd=""> <v-radio :value="\'time\'" :checked="exportType === \'time\' ? true : false" :change=chooseExportType _v-288ef1dd=""></v-radio> <div class="date-nav clearfix" _v-288ef1dd=""> <a href=javascript:; _v-288ef1dd=""> <m-datetimepicker :model.sync=ExportStartTime :onshow=startShow _v-288ef1dd=""></m-datetimepicker><span class=date _v-288ef1dd="">{{ExportStartTime | ISODate}}</span> </a> <em class=line _v-288ef1dd=""></em> <a href=javascript:; _v-288ef1dd=""> <m-datetimepicker :model.sync=ExportEndTime :onshow=endShow _v-288ef1dd=""></m-datetimepicker><span class=date _v-288ef1dd="">{{ExportEndTime | ISODate}}</span> </a> </div> </div> </div> </div> <div class=input _v-288ef1dd=""> <label _v-288ef1dd="">文件名</label> <input type=text readonly="" v-model=exportFileName _v-288ef1dd=""> </div> </div> </m-modal> '},function(t,e,n){var i,a;i=n(164),a=n(165),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=i(a),s=n(20),r=i(s),d=n(14),c=i(d);e["default"]={name:"password",data:function(){return{oldPassword:"",newPassword:"",newPasswordAgain:"",errMsg:""}},vuex:{getters:{user_info:function(){return o["default"].state.user_info}},actions:r["default"]},ready:function(){c["default"].checkIsAdmin(this.user_info.type)||(r["default"].alert(o["default"],{show:!0,msg:"无权限",type:"danger"}),this.$route.router.go("/dashboard"))},methods:{resetErrMsg:function(){this.errMsg=""},checkInput:function(){var t=new RegExp(/(\w|\d){6,20}/g);return""===this.oldPassword?(this.errMsg="密码不能为空",!0):""===this.newPassword||""===this.newPasswordAgain?(this.errMsg="请输入新密码",!0):this.newPassword!==this.newPasswordAgain?(this.errMsg="两次密码不一致",!0):this.newPassword===this.oldPassword?(this.errMsg="新旧密码不能一致",!0):t.test(this.newPassword)?void 0:(this.errMsg="请输入6-20位只包含字母、数字或下划线的密码",!0)},submit:function(t){var e=this;this.checkInput()||this.$http({url:"operator/updateOperatorPwd",method:"post",body:{operator_id:this.user_info.operator_id,password:this.newPassword,oldpassword:this.oldPassword}}).then(function(t){var n=t.data;return n.result?(r["default"].alert(o["default"],{show:!0,msg:"密码修改成功，请重新登陆",type:"success"}),void e.$http({url:"operator/logout",method:"get"}).then(function(t){var n=t.data;n.result&&(c["default"].delCookie("user_info"),e.$route.router.go("/login"))})):void(e.errMsg=n.message)})}}}},function(t,e){t.exports=' <div class=password> <input type=password v-model=oldPassword placeholder=请输入原密码 @focus=resetErrMsg()> <input type=password v-model=newPassword placeholder=请输入新密码 @focus=resetErrMsg()> <input type=password v-model=newPasswordAgain placeholder=请再次输入新密码 @focus=resetErrMsg()> <div class=error-box> <p class=error v-show="errMsg | length">{{errMsg}}</p> </div> </div> <div class=btn-password><a href=javascript:void(0) class="btn btn-big btn-blue" @click=submit($event)>提交</a></div> '},function(t,e,n){var i,a;n(167),i=n(169),a=n(200),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){var i=n(168);"string"==typeof i&&(i=[[t.id,i,""]]);n(32)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(31)(),e.push([t.id,"",""])},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(170),o=i(a),s=n(199),r=n(20),d=i(r),c=n(11),l=i(c),u=n(55),f=i(u);e["default"]={data:function(){return{consts:{ADDCOMMONMSG:"MSG",ADDSUBCAT:"SUB",ADDCAT:"CAT",FIRSTLEVEL:1,SECONDLEVEL:2,THIRDLEVEL:3,MSGLEVEL:4,NO_SELECT_NODE:"请先选中节点",DELETE_CMSG:"删除常用语，是否继续?",DELETE_CAT:"删除分类将删除分类下的所有内容，是否继续?",DELETE_LASTNODE:"不可删除最后一条记录",SAVE_OR_CANCEL:"您更改了常用语设置,是否保存更改? ",NO_MOVE:"不可移动",NO_MOVEFIRST:"第一条记录不可向上移动",NO_MOVELAST:"最后一条记录不可向下移动",NO_ADDSUB:"不可以增加子分类",NO_ADDCAT:"不可以增加分类",NO_ADDCMSG:"不可增加常用语"},treeData:{},workData:{type:-1,id:-1,title:"",desc:"",recentOperator:"",creater:"",parentId:-1,isSelected:!1},tempData:{title:"",desc:""},treeConfig:{url:"commonLanguage/getItemTree",drag:!0},isTitleChange:!1,isDescChange:!1,interval:null,isTitleCount:0,classBtn:"btn",disabeBtn:"disable",currentItem:null,parentItem:null}},methods:{privateInitData:function(){this.workData={type:-1,id:-1,title:"",desc:"",recentOperator:"",creater:"",parentId:-1,isSelected:!1}},privateAutoFocus:function(){this.$els.title.focus()},privateClearInput:function(){document.querySelector("#title").value="",document.querySelector("#desc").value=""},privateCheckSelectNode:function(){return this.privateCheck(this.consts.NO_SELECT_NODE,{isTrue:this.workData.isSelected})},privateCheckLastNode:function(){return null!=this.currentItem&&this.currentItem.model.type===this.consts.FIRSTLEVEL&&1===this.currentItem.$parent.$children.length&&!this.privateCheck(this.consts.DELETE_LASTNODE,{isTrue:!1})},privateConfirm:function(t,e,n){d["default"].confirm(l["default"],{show:!0,msg:t,apply:function(){e&&e()}})},privateConfirmChange:function(t){var e=this,n=function(){e.saveMsg()};return this.privateConfirm(t,n),this},privateCheck:function(t,e){return!s.Validate.validate(e).errors()||(d["default"].alert(l["default"],{show:!0,msg:t}),!1)},refreshTree:function(){var t=this;this.$http({url:this.treeConfig.url,method:"get",params:{id:0,type:0}}).then(function(e){t.privateCheck(e.data.message,{isTrue:e.data.result})&&(t.treeData=e.data.data)})},refreshTreeById:function(t,e){this.parentItem.fetchParent({id:this.workData.id,pid:t,type:this.parentItem.model.type},e)},addCommonMsg:function(){var t=this;this.privateCheckSelectNode()&&!this.isMsg&&this.privateCheck(this.consts.NO_ADDCMSG,{isRealNode:this.workData.id})&&this.$broadcast("parent-msg",{id:this.workData.id,handleType:this.consts.ADDCOMMONMSG,type:this.workData.type},function(e,n,i){t.workData=e,t.workData.parentId=i.model.id,t.workData.isSelected=n.isActive,t.currentItem=n,t.parentItem=i,t.privateAutoFocus()})},addSubCat:function(){var t=this;this.privateCheckSelectNode()&&!this.isMsg&&this.privateCheck(this.consts.NO_ADDSUB,{isRealNode:this.workData.id,isNotThirdLevel:this.workData.type})&&this.$broadcast("parent-msg",{id:this.workData.id,type:this.workData.type,handleType:this.consts.ADDSUBCAT},function(e,n,i){t.workData=e,t.workData.parentId=i.model.id,t.workData.isSelected=n.isActive,t.currentItem=n,t.parentItem=i,t.privateAutoFocus()})},addCat:function(){var t=this;this.privateCheckSelectNode()&&!this.isMsg&&this.privateCheck(this.consts.NO_ADDCAT,{isRealNode:this.workData.id})&&this.$broadcast("parent-msg",{id:this.workData.id,type:this.workData.type,handleType:this.consts.ADDCAT},function(e,n,i){t.workData=e,t.workData.parentId=n.$parent.model.id,t.workData.isSelected=n.isActive,t.currentItem=n,t.parentItem=i.$parent,t.privateAutoFocus();
})},importTemplate:function(){(0,f["default"])("#file").click()},deleteNode:function(){var t=this,e="";if(this.privateCheckSelectNode()){if(this.privateCheckLastNode())return;e=this.workData.type==this.consts.MSGLEVEL?this.consts.DELETE_CMSG:this.consts.DELETE_CAT,this.workData.id<0?d["default"].confirm(l["default"],{show:!0,msg:e,apply:function(){t.cancelMsg()}}):d["default"].confirm(l["default"],{show:!0,msg:e,apply:function(){t.$http({url:"commonLanguage/deleteItem",body:{id:t.workData.id,type:t.workData.type,operator_id:l["default"].state.user_info.operator_id},method:"post"}).then(function(e){t.privateCheck(e.data.message,{isTrue:e.data.result})&&(t.refreshTreeById(t.workData.parentId),t.privateClearInput())})}})}},moveUp:function(){var t=this,e=this;if(this.privateCheckSelectNode()){if(this.workData.id<0)return d["default"].alert(l["default"],{show:!0,msg:this.consts.NO_MOVE}),!1;if(!this.privateCheck(this.consts.NO_MOVEFIRST,{isTrue:!(this.parentItem.$children.length>0&&this.parentItem.$children[0].model.id===this.workData.id)}))return;this.$http({url:"commonLanguage/sortItem",method:"post",body:{id:this.workData.id,direction:"upward",operator_id:l["default"].state.user_info.operator_id}}).then(function(n){if(t.privateCheck(n.data.message,{isTrue:n.data.result})){var i=t.workData.id,a=t.workData.type;t.refreshTreeById(t.workData.parentId,function(){var t=e.currentItem.findItem(e.currentItem,i,a);t.selectNode()})}})}},moveDown:function(){var t=this,e=this;if(this.privateCheckSelectNode()){if(this.workData.id<0)return d["default"].alert(l["default"],{show:!0,msg:this.consts.NO_MOVE}),!1;if(!this.privateCheck(this.consts.NO_MOVELAST,{isTrue:!(this.parentItem.$children.length>0&&this.parentItem.$children[this.parentItem.$children.length-1].model.id===this.workData.id)}))return;this.$http({url:"commonLanguage/sortItem",method:"post",body:{id:this.workData.id,direction:"down",operator_id:l["default"].state.user_info.operator_id}}).then(function(n){if(t.privateCheck(n.data.message,{isTrue:n.data.result})){var i=t.workData.id,a=t.workData.type;t.refreshTreeById(t.workData.parentId,function(){var t=e.currentItem.findItem(e.currentItem,i,a);t.selectNode()})}})}},cancelMsg:function(){var t=this;this.workData.id===-1?this.$broadcast("remove-msg",{id:this.workData.id,type:this.workData.type},function(){t.privateInitData()}):(document.querySelector("#title").value=this.workData.title||"",document.querySelector("#desc").value=this.workData.desc||"")},saveMsg:function(){var t=this;this.privateCheckSelectNode()&&!function(){var e=t;t.$http({url:"commonLanguage/addItem",method:"post",body:{id:t.workData.id,title:document.querySelector("#title").value.trim(),desc:document.querySelector("#desc").value.trim(),parentId:t.workData.parentId,operator_id:l["default"].state.user_info.operator_id,type:t.workData.type}}).then(function(n){t.privateCheck(n.data.message,{isTrue:n.data.result})&&t.refreshTreeById(t.workData.parentId,function(){e.privateClearInput(),e.privateInitData()})})}()},onBlurTitle:function(t){if(!(""==document.querySelector("#title").value.trim()&&""==document.querySelector("#desc").value.trim()||t.relatedTarget&&"cancelBtn"===t.relatedTarget.id)){var e=this.consts.SAVE_OR_CANCEL;if(this.workData.type===this.consts.MSGLEVEL){if(!(null!==t.relatedTarget&&"desc"==t.relatedTarget.id||this.workData.title.trim()==this.$title.value.trim()&&this.workData.desc.trim()==document.querySelector("#desc").value.trim()))return void this.privateConfirmChange(e).privateAutoFocus()}else if(this.privateCheckSelectNode()&&this.workData.title.trim()!=this.$title.value.trim())return void this.privateConfirmChange(e).privateAutoFocus()}},onBlurDesc:function(t){if(!t.relatedTarget||"cancelBtn"!==t.relatedTarget.id){var e=this.consts.SAVE_OR_CANCEL;return null!==t.relatedTarget&&"title"==t.relatedTarget.id||this.workData.desc.trim()==document.querySelector("#desc").value.trim()&&this.workData.title.trim()==this.$title.value.trim()?void 0:void this.privateConfirmChange(e).privateAutoFocus()}},onChangeFile:function(){var t=this,e=new FormData;e.append("formData",document.querySelector("#file").files[0]),e.append("operator_id",l["default"].state.user_info.operator_id),this.$http({url:"commonLanguage/importItem",method:"post",body:e}).then(function(e){t.privateCheck(e.data.message,{isTrue:e.data.result})&&t.refreshTree()})}},events:{"child-msg":function(t,e){this.tempData=t,this.workData=t,this.currentItem=e,this.parentItem=e.$parent,this.privateAutoFocus()},"drag-msg":function(t,e,n,i){var a=this;this.currentItem=i,this.parentItem=i.$parent;var o,s,r=this,d=e.type!=this.consts.MSGLEVEL;d?(o=-1,s=e.id):(o=e.id,s=e.parentId),this.$http({url:"commonLanguage/moveItem",method:"post",body:{old_position:{parentId:t.parentId,id:t.id,type:t.type},new_position:{parentId:s,id:o,type:e.type},operator_id:l["default"].state.user_info.operator_id}}).then(function(t){a.privateCheck(t.data.message,{isTrue:t.data.result})&&(d?r.refreshTreeById(e.id):r.refreshTreeById(e.parentId),n&&n.$destroy(!0),r.privateClearInput())})}},created:function(){},ready:function(){this.$title=this.$els.title,this.refreshTree()},computed:{isMsg:function(){return!(!this.workData.type||this.workData.type!==this.consts.MSGLEVEL)}},components:{"m-item":o["default"]}}},function(t,e,n){var i,a;i=n(171),a=n(198),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(68),o=i(a),s=n(172),r=i(s),d=n(195),c=i(d),l=n(2),u=i(l),f=n(20),p=i(f),v=n(11),h=i(v),m={root:null,pre:null,url:null,isDrag:!1};e["default"]={name:"item",replace:!0,props:{model:Object},data:function(){return{consts:{NEW_TITLE:"新增常用语标题",NEW_DESC:"新增常用语内容",ADDCOMMONMSG:"MSG",ADDSUBCAT:"SUB",ADDCAT:"CAT",MSGLEVEL:4,PLUSICON:"plusIcon",ITEMTEXT:"item"},open:!1,isParent:!1,count:0,addClass:"icon-jia",minusClass:"icon-jia icon-jian",isActive:!1,isDrag:!1}},created:function(){null==m.url&&this.$parent.treeConfig&&(m.url=this.$parent.treeConfig.url,m.isDrag=this.$parent.treeConfig.drag,m.root=this)},ready:function(){this.isDrag=m.isDrag},computed:{isFolder:function(){return this.model&&this.model.isParent},isRoot:function(){return 0===this.model.id},isRealNode:function(){return this.model.id>0}},events:{"parent-msg":function(t,e){var n,i=this,a=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=(0,c["default"])({},{id:{value:-1,writable:!0,enumerable:!0,configurable:!0},title:{value:i.consts.NEW_TITLE,writable:!0,enumerable:!0,configurable:!0},isParent:{value:e[1],writable:!0,enumerable:!0,configurable:!0},type:{value:e[2],writable:!0,enumerable:!0,configurable:!0}});e[3]&&(a.desc=i.consts.NEW_DESC),e[4]===i.consts.ADDCAT?e[0].$parent.model.children.push(a):e[0].model.children.push(a)},o=function(t,e){var n=[];t.handleType===i.consts.ADDCOMMONMSG?(n=[e,!1,i.consts.MSGLEVEL,i.consts.NEW_DESC,i.consts.ADDCOMMONMSG],a.apply(void 0,(0,r["default"])(n))):t.handleType===i.consts.ADDSUBCAT?(n=[e,!0,e.model.type+1,null,i.consts.ADDSUBCAT],a.apply(void 0,(0,r["default"])(n))):t.handleType===i.consts.ADDCAT&&(n=[e,!0,e.model.type,null,i.consts.ADDCAT],a.apply(void 0,(0,r["default"])(n)))};n=m.pre,n.model.children||u["default"].set(n.model,"children",[]),o(t,n),e&&(t.handleType===i.consts.ADDCAT?this.$nextTick(function(){var t=n.$parent.model.children.length-1,i=n.$parent.model.children,a=n.$parent.$children.length-1,o=n.$parent.$children;o[a].isActive=!0,m.pre.isActive=!1,e(i[t],o[a],m.pre),m.pre=o[a]}):(n.open=!0,this.$nextTick(function(){var t=n.model.children[n.model.children.length-1];n.$children[n.$children.length-1].isActive=!0;var i=n.$children[n.$children.length-1];m.pre.isActive=!1,e(t,i,i.$parent),m.pre=i})))},"refresh-msg":function(t,e){var n=m.pre,i=n.$parent;this.fetchTree({id:i.model.id,type:i.model.type},function(){e&&(e(i),i.open=!0)})},"remove-msg":function(t,e){var n=m.pre;n&&(n.$destroy(!0),e&&e())}},methods:{onDropNode:function(t){t.preventDefault();var e=JSON.parse(t.dataTransfer.getData("data"));e.id!==this.model.id&&(this.selectNode(),this.$dispatch("drag-msg",e,this.model,m.drag,this))},onDragStartNode:function(t){m.drag=this,t.dataTransfer.setData("data",(0,o["default"])(this.model))},findItem:function(t,e){var n,i=function a(t,e){return t.model.id===e?t:(t.$children&&t.$children.forEach(function(t){return t.model.id===e?void(n=t):void a(t,e)}),n)};return i(t,e)},fetchParent:function(t,e){m.root=this;var n=this.findItem(m.root,t.pid);n.toggle(null,e)},fetchTree:function(t,e){var n=this;this.$http({url:m.url,params:t,method:"get"}).then(function(t){return t.data.result?(u["default"].set(n.model,"children",[]),t.data.data.children.forEach(function(t){n.model.children.push(t)}),void(e&&e())):(p["default"].alert(h["default"],{show:!0,msg:t.data.message}),!1)})},resetSelected:function(t){null!=m.pre&&(m.pre.model.id!=t.model.id||m.pre.model.id===t.model.id&&m.pre.model.type!=t.model.type)&&(m.pre.isActive=!1)},selectNode:function(t){this.isParent=this.model.isParent,this.isActive=!0,this.resetSelected(this),this.model.isSelected=this.isActive,this.$dispatch("child-msg",this.model,this),m.pre=this},toggle:function(t,e){var n=this;t&&t.target.id===this.consts.PLUSICON&&(this.open=!this.open),this.isParent=this.model.isParent,this.isActive=!0,this.resetSelected(this);var i=this;i.model.isSelected=this.isActive,this.open&&this.model.id>0||0===this.model.id?this.fetchTree({id:this.model.id,type:this.model.type},function(){m.pre=i,i.$dispatch("child-msg",i.model,n),e&&n.$nextTick(function(){e()})}):this.$dispatch("child-msg",this.model,this)}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var a=n(173),o=i(a);e["default"]=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,o["default"])(t)}},function(t,e,n){t.exports={"default":n(174),__esModule:!0}},function(t,e,n){n(175),n(188),t.exports=n(70).Array.from},function(t,e,n){"use strict";var i=n(176)(!0);n(177)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var i=n(135),a=n(132);t.exports=function(t){return function(e,n){var o,s,r=String(a(e)),d=i(n),c=r.length;return d<0||d>=c?t?"":void 0:(o=r.charCodeAt(d),o<55296||o>56319||d+1===c||(s=r.charCodeAt(d+1))<56320||s>57343?t?r.charAt(d):o:t?r.slice(d,d+2):(o-55296<<10)+(s-56320)+65536)}}},function(t,e,n){"use strict";var i=n(178),a=n(111),o=n(179),s=n(115),r=n(128),d=n(180),c=n(181),l=n(185),u=n(187),f=n(186)("iterator"),p=!([].keys&&"next"in[].keys()),v="@@iterator",h="keys",m="values",g=function(){return this};t.exports=function(t,e,n,_,y,x,w){c(n,e,_);var b,C,k,M=function(t){if(!p&&t in L)return L[t];switch(t){case h:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",S=y==m,I=!1,L=t.prototype,D=L[f]||L[v]||y&&L[y],O=D||M(y),E=y?S?M("entries"):O:void 0,P="Array"==e?L.entries||D:D;if(P&&(k=u(P.call(new t)),k!==Object.prototype&&(l(k,T,!0),i||r(k,f)||s(k,f,g))),S&&D&&D.name!==m&&(I=!0,O=function(){return D.call(this)}),i&&!w||!p&&!I&&L[f]||s(L,f,O),d[e]=O,d[T]=g,y)if(b={values:S?O:M(m),keys:x?O:M(h),entries:E},w)for(C in b)C in L||o(L,C,b[C]);else a(a.P+a.F*(p||I),e,b);return b}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(115)},function(t,e){t.exports={}},function(t,e,n){"use strict";var i=n(182),a=n(124),o=n(185),s={};n(115)(s,n(186)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:a(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(117),a=n(183),o=n(140),s=n(137)("IE_PROTO"),r=function(){},d="prototype",c=function(){var t,e=n(122)("iframe"),i=o.length,a="<",s=">";for(e.style.display="none",n(184).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(a+"script"+s+"document.F=Object"+a+"/script"+s),t.close(),c=t.F;i--;)delete c[d][o[i]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(r[d]=i(t),n=new r,r[d]=null,n[s]=t):n=c(),void 0===e?n:a(n,e)}},function(t,e,n){var i=n(116),a=n(117),o=n(126);t.exports=n(120)?Object.defineProperties:function(t,e){a(t);for(var n,s=o(e),r=s.length,d=0;r>d;)i.f(t,n=s[d++],e[n]);return t}},function(t,e,n){t.exports=n(112).document&&document.documentElement},function(t,e,n){var i=n(116).f,a=n(128),o=n(186)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(138)("wks"),a=n(139),o=n(112).Symbol,s="function"==typeof o,r=t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:a)("Symbol."+t))};r.store=i},function(t,e,n){var i=n(128),a=n(143),o=n(137)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){"use strict";var i=n(113),a=n(111),o=n(143),s=n(189),r=n(190),d=n(134),c=n(191),l=n(192);a(a.S+a.F*!n(194)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,a,u,f=o(t),p="function"==typeof this?this:Array,v=arguments.length,h=v>1?arguments[1]:void 0,m=void 0!==h,g=0,_=l(f);if(m&&(h=i(h,v>2?arguments[2]:void 0,2)),void 0==_||p==Array&&r(_))for(e=d(f.length),n=new p(e);e>g;g++)c(n,g,m?h(f[g],g):f[g]);else for(u=_.call(f),n=new p;!(a=u.next()).done;g++)c(n,g,m?s(u,h,[a.value,g],!0):a.value);return n.length=g,n}})},function(t,e,n){var i=n(117);t.exports=function(t,e,n,a){try{return a?e(i(n)[0],n[1]):e(n)}catch(o){var s=t["return"];throw void 0!==s&&i(s.call(t)),o}}},function(t,e,n){var i=n(180),a=n(186)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[a]===t)}},function(t,e,n){"use strict";var i=n(116),a=n(124);t.exports=function(t,e,n){e in t?i.f(t,e,a(0,n)):t[e]=n}},function(t,e,n){var i=n(193),a=n(186)("iterator"),o=n(180);t.exports=n(70).getIteratorMethod=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(131),a=n(186)("toStringTag"),o="Arguments"==i(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=s(e=Object(t),a))?n:o?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var i=n(186)("iterator"),a=!1;try{var o=[7][i]();o["return"]=function(){a=!0},Array.from(o,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(r){}return n}},function(t,e,n){t.exports={"default":n(196),__esModule:!0}},function(t,e,n){n(197);var i=n(70).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){var i=n(111);i(i.S,"Object",{create:n(182)})},function(t,e){t.exports=' <li v-if=isRoot class=root> <ul> <item v-for="model in model.children" :model=model> </item> </ul> </li> <li v-else class=child> <div id=itemContent @click=selectNode @dragover.prevent @drop=onDropNode :class="{active : isActive}" @dragstart=onDragStartNode draggable="{{isDrag && isRealNode}}" title={{model.title}}> <em id=plusIcon @click=toggle :class="[isFolder ? (open ? minusClass : addClass) : \'\']"></em><span id=item>{{model.title}}</span> </div> <ul v-show=open v-if=isFolder> <item v-for="model in model.children" :model=model> </item> </ul> </li> '},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={types:{},result:[],validate:function(t){this.result=[];for(var e in t)if(t.hasOwnProperty(e)){var n=this.types[e];if(!n)throw{name:"ValidationError",message:"No handler to Validate type "+n};var i=n.validate(t[e]);i||this.result.push(n.instructions)}return this},errors:function(){return 0!==this.result.length}};n.types.isRealNode={validate:function(t){return!(t<0)},instructions:"isRealNode"},n.types.isNotThirdLevel={validate:function(t){return 3!==t},instructions:"isNotThirdLevel"},n.types.isTrue={validate:function(t){return t===!0},instructions:"isTrue"},e.Validate=n},function(t,e){t.exports=' <div id=app class="wrap-right clearfix"> <div class=phrase-list> <div class=list-bg> <m-item :model=treeData></m-item> </div> </div> <div class=phrase-form> <p>标题</p> <input type=text value="" id=title maxlength="{{isMsg ? 18 : 10}}" :value=workData.title @blur=onBlurTitle placeholder=输入分类名 v-el:title> <p>内容</p> <textarea id=desc maxlength=200 v-if="workData.desc && workData.desc.length > 0" @blur=onBlurDesc rows=3 :value=workData.desc v-el:desc></textarea> <textarea id=desc maxlength=200 v-else rows=3 disabled=disabled :value=workData.desc @blur=onBlurDesc v-el:desc></textarea> <p class=gray>创建人：{{workData.creater}}；最后操作人：{{workData.recentOperator}}</p> <p>操作</p> <div class=option> <a href=javascript:; @click=addCommonMsg :class="[classBtn, isMsg ? disabeBtn : \'\']">添加常用语</a> <a href=javascript:; @click=addCat :class="[classBtn, isMsg ? disabeBtn : \'\']">添加平级分类</a> <a href=javascript:; @click=addSubCat :class="[classBtn, isMsg ? disabeBtn : \'\']">添加子分类</a> <div class=btn-box> <a href=javascript:; @click=deleteNode class=btn>删除<em class=icon-cha></em></a> <a href=javascript:; @click=moveDown class=btn>下移<em class=icon-down></em></a> <a href=javascript:; @click=moveUp class=btn>上移<em class=icon-up></em></a> </div> </div> <div class=form-b> <div class=fl><input type=file id=file @change=onChangeFile style=display:none><a href=javascript:; @click=importTemplate class=btn>导入</a><a href=./template/expressionTemplate.xlsx class=btn>模板下载</a></div> <div class=fr><a href=javascript:; @click=cancelMsg id=cancelBtn class=btn>取消</a><a href=javascript:; @click=saveMsg class=btn>保存</a></div> </div> </div> </div> '},function(t,e,n){var i,a;i=n(202),a=n(203),t.exports=i||{},t.exports.__esModule&&(t.exports=t.exports["default"]),a&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=a)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t){return JSON.parse((0,d["default"])(t))}Object.defineProperty(e,"__esModule",{value:!0});var o=n(108),s=i(o),r=n(68),d=i(r),c=n(20),l=i(c),u=n(11),f=i(u),p=n(144),v=i(p),h={1:"range",2:"num",3:"txt",4:"txt",5:"txt",6:"txt",7:"txt",8:"txt",9:"txt",10:"txt",11:"txt",12:"txt",13:"txt",14:"txt",15:"txt"};e["default"]={name:"Configuration",data:function(){var t=this;return{txtMaxLen:20,config:[],oldConfig:[],modalConfigEdit:{show:!1,title:"配置管理",cancel_str:"取消 ",apply_str:"保存",cancel_func:function(){},apply_func:function(){t.saveConfig(t.currentEditConfig.typeTo,t.currentEditConfig.val),t.modalConfigEdit.show=!1}},currentEditConfig:{}}},vuex:{getters:{user_info:function(){return f["default"].state.user_info}}},ready:function(){this.getData()},components:{"m-modal":v["default"]},methods:{getData:function(){var t=this;this.$http({url:"dictionary/getConfig",method:"get"}).then(function(e){var n=e.data.data;t.config=n.configuration.map(function(t){return t.typeTo=t.type,t.type=h[t.type],t}),t.oldConfig=a(t.config)})},validTime:function(t,e,n){/^((0\d{1}|1|)\d{1}|2[0-3]):([0-5]\d{1})$/.test(t)||(0===n?this.config[e].val=["00:00",this.config[e].val[1]]:1===n&&(this.config[e].val=[this.config[e].val[0],"00:00"]),l["default"].alert(f["default"],{show:!0,msg:"不合法的时间表示"}))},validNum:function(t,e){/^[0-9]+$/.test(t)||(this.$set("config["+e+"]",a(this.oldConfig[e])),l["default"].alert(f["default"],{show:!0,msg:"不合法的数字表示"}))},validTxt:function(t,e){/^(\s|)$/.test(t)&&(this.$set("config["+e+"]",a(this.oldConfig[e])),l["default"].alert(f["default"],{show:!0,msg:"输入不能为空"}))},saveEdit:function(t,e){this.modalConfigEdit.show=!0,this.currentEditConfig=(0,s["default"])({},t)},saveConfig:function(t,e){var n=this;e instanceof Array&&(e=e.join("-")),this.$http({url:"dictionary/updateConfig",method:"post",body:{type:t,val:e,operator_id:this.user_info.operator_id}}).then(function(t){var e="修改失败";t.data.result&&(e="修改成功",n.oldConfig=a(n.config)),n.getData(),l["default"].alert(f["default"],{show:!0,msg:e})})}}}},function(t,e){t.exports=' <div> <table class=table> <tr> <th>序号</th> <th>配置项名称</th> <th width=150>配置项说明</th> <th width=180>配置值</th> <th>单位</th> <th>操作</th> </tr> <tr v-for="item in config"> <td>{{$index + 1}}</td> <td>{{item.title}}</td> <td>{{item.about}}</td> <td v-if="item.type === \'range\'">{{item.val.join(\'-\')}}</td> <td v-if="item.type === \'num\'">{{item.val}}</td> <td v-if="item.type === \'txt\'">{{item.val}}</td> <td>{{item.unit}}</td> <td><a href=javascript:void(0) class="btn btn-red" @click=saveEdit(item,$index)>编辑</a></td> </tr> </table> <m-modal :modal-config=modalConfigEdit> <div class=welcome-txt> <div class="input clearfix"> <label>配置名称：</label> <p>{{currentEditConfig.title}}</p> </div> <div class="input clearfix"> <label>配置说明：</label> <p>{{currentEditConfig.about}}</p> </div> <div class=input> <label>配置值：</label> <textarea v-if="currentEditConfig.type === \'txt\'" @blur="validTxt(currentEditConfig.val, $index)" v-model=currentEditConfig.val required type=text></textarea> <div v-if="currentEditConfig.type === \'range\'"> <input @blur="validTime(currentEditConfig.val[0], $index, 0)" v-model=currentEditConfig.val[0] required type=text class=time size=5> ~ <input @blur=validTime(currentEditConfig.val[1],$index,1) v-model=currentEditConfig.val[1] required type=text class=time size=5> </div> <div v-if="currentEditConfig.type === \'num\'"> <input @blur="validNum(currentEditConfig.val, $index)" v-model=currentEditConfig.val required type=text> </div> </div> </div> </m-modal> </div> '}]);