webpackJsonp([19],{"143":function(t,exports,n){"use strict";(function($,e){var o,a=n(2),i=n(5),c=n(8),s=n(9),r=n(15),d=!1,u=function(t,n){var u=$(t.parent?t.parent:t.selector),l=t.parent?t.selector:void 0;u.on("click",l,function(){function t(t){a.post(o,f).done(function(n){200===n.code?(l?$(u).addClass("active").attr("data-collect","collect"):$(u).removeClass("active").attr("data-collect",""),t||p.call(u,l)):c.init(n.message)}).fail(function(){s()&&c.init("店铺收藏失败")}).always(function(){d=!1,t&&window.location.reload()})}var u=this,l=!0,p=n||function(){},f={"data":{"shopId":e.shopId}};if(!d)return d=!0,""===$(u).attr("data-collect")?(o=i.get("shopCollect"),l=!0):(o=i.get("unShopCollect"),l=!1),s()?t():r(function(){t(1)}),!1})};t.exports=u}).call(exports,n(0),n(1))},"16":function(t,exports,n){"use strict";var e=function(t){return null==t?0:("string"!=typeof t&&(t+=""),t.replace(/[^\x00-\xff]/g,"01").length)};t.exports=e},"19":function(t,exports,n){"use strict";function e(t){return t>=55296&&t<=56319}function o(t){return t>=56320&&t<=57343}function a(t,n){if("string"!=typeof t)throw new Error("Input must be string");for(var a,c,s=t.length,r=0,d=0;d<s;d+=1){if(a=t.charCodeAt(d),c=t[d],e(a)&&o(t.charCodeAt(d+1))&&(d+=1,c+=t[d]),(r+=i(c))===n)return t.slice(0,d+1);if(r>n)return t.slice(0,d-c.length+1)}return t}var i=n(16);t.exports=a},"31":function(t,exports,n){"use strict";(function($){var e=n(2),o=n(5),a=n(32),i=n(9),c={"qq":"http://connect.qq.com/widget/shareqq/index.html","wb":"http://v.t.sina.com.cn/share/share.php","qz":"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey"},s={"url":"https://group.gomeplus.com/","title":"国美APP边玩边分享，购物不孤单","pic":"../../images/public/logo.png","summary":"国美APP边玩边分享，购物不孤单"},r=function(t){window.open(t)},d=!1,u=function(){$("body").append('<p data-node="shareBtnBox" class="share-down" style="z-index:21;"><span class="share-box"><span class="icon icon-up-arrow"></span><span class="icon-box"><em data-shareto="weixin" class="iconn-30"></em><em data-shareto="qq" class="iconn-32"></em><em data-shareto="sina" class="iconn-31"></em><em data-shareto="qzone" class="iconn-33"></em></span></span></p>'),d=!0},l=function(t){!d&&u(),$("[data-node=shareBtnBox]").css({"left":t.x,"top":t.y}).show()},p=!1,f=function(){$("body").append('<div class="share-weixin"><div class="wx-mask"></div><div class="wx-main"><div class="wx-code"><span></span><img data-node="shareWeixinCode" alt="分享到微信" /></div><p>打开微信扫一扫，即可分享</p><a href="javascript:;" title="点击关闭" class="wx-close">×</a></div></div>'),p=!0},h=function(t,n){var e=[],o={"url":t.url,"title":t.title,"summary":t.summary,"site":t.site};t.kid&&(o.url=t.url+"?kid="+t.kid);for(var a in o)e.push(a+"="+encodeURIComponent(o[a]||""));return n?e.push("pics="+t.pic):e.push("pic="+t.pic),e.join("&")},m={"weixin":function(t){var n=a(t.url);!p&&f(),$("[data-node=shareWeixinCode]")[0].src=n,$(".share-weixin").show(),$(".wx-close").on("click",function(){$(".share-weixin").hide()})},"qq":function(t){var n=c.qq+"?"+h(t,!0);r(n)},"wb":function(t){var n=c.wb+"?"+h(t);r(n)},"qz":function(t){var n=c.qz+"?"+h(t,!0);r(n)}},v=function(t){var n="0"!==t.isRebate;e.get(o.get("shareGetGoodsKid"),{"validate":n,"data":{"skuId":t.skuId,"itemId":t.itemId,"parentKid":t.parentKid},"async":!1}).done(function(n){if(!0===n.success){var e=n.data.kid,o=t.shareInfo,a=o.url,i=a.indexOf("?");i>0&&(a=a.substring(0,i)),o.url=a+"?onlineUserId="+o.onlineUserId+"&kId="+e,m[t.shareto](o)}else m[t.shareto](t.shareInfo)}).fail(function(){n?i()&&m[t.shareto](t.shareInfo):m[t.shareto](t.shareInfo)})},g=function(t){var n={"title":t.title||s.title,"url":t.url||s.url,"pic":t.pic||s.pic,"summary":t.summary||"","desc":t.desc||""};!!m[t.type]&&m[t.type](n)},x=function(t,n,e){var o=null,a=null;a="string"==typeof t?$(t):t,n=n||"[data-action=shareto]",a.on("mouseenter",n,function(){var t=$(this).data("surl"),n=$(this).data("stitle"),e=$(this).data("spic");o={"url":t,"title":n,"pic":e};var a=$(this).width(),i=$(this).height(),c=$(this).offset().left/1+a/2-80+"px",s=$(this).offset().top/1+(i-1)+"px";return l({"x":c,"y":s}),!1}),a.on("mouseleave",n,function(){return $("[data-node=shareBtnBox]").hide(),!1}),$("body").on("click","[data-shareto]",function(t){t.preventDefault();var n=$(this).data("shareto");o.type=n,e=e||function(){},e.call(null,o),g(o)}),$("body").on("mouseenter","[data-node=shareBtnBox]",function(){$(this).show()}),$("body").on("mouseleave","[data-node=shareBtnBox]",function(){$(this).hide()})};t.exports={"share":g,"shareto":m,"shareItem":x,"shareWithKid":v}}).call(exports,n(0))},"32":function(t,exports,n){"use strict";(function(n){var e=function(t){return n.group_domain+"ajax/qrcode/urlcode?url="+encodeURIComponent(t)};t.exports=e}).call(exports,n(1))},"346":function(t,exports,n){"use strict";n(347)},"347":function(t,exports,n){"use strict";(function($,e){var o=n(2),a=n(5),i=n(37),c=n(19),s=n(58),r=n(31).shareto,d=n(143);n(66);var u=$("[data-node=Form]"),l=u.find("[data-node=codeBtn]"),p=u.find("[data-node=codeImg]"),f=u.find("[data-node=codeInput]"),h=u.find("[data-node=codeVilid]"),m=u.find("[data-node=codeVilid] .red"),v=u.find("[data-node=submitBtn]"),g=$('[data-node="shopTop"]'),x=g.find('[data-action="love"]'),w=x.find('[data-node="loveNum"]'),y=g.find('[data-action="collect"]'),b=y.find('[data-node="collectNum"]'),k=!0;t.exports=$(function(){var t=~~w.text(),n=function(t){m.html(t),h.removeClass("hide")},u=function(){h.addClass("hide"),i(f.val()).length>4&&f.val(c(f.val(),4))},y=function(){if(0!=k){k=!1,setTimeout(function(){k=!0},3e3);var t=i(f.val());o.get(a.get("shopCodeCheck"),{"data":{"shopId":e.shopId,"code":t}},{"async":!1}).done(function(o){o.success?location.href=e.mall_domain+"shop/show?shopId="+e.shopId+"&code="+t:n(o.msg)}).fail(function(){alert("数据请求失败 请稍后尝试")})}},q=function(){h.addClass("hide"),o.get(a.get("getCodeOfBusiness"),{"async":!1}).done(function(t){t.success?p.attr("src","data:image/gif;base64,"+t.data):alert("数据请求失败 请稍后尝试")}).fail(function(){alert("数据请求失败 请稍后尝试")})};"9"==e.type&&q(),function(){s('[data-node="shopTop"]','[data-action="love"]',{"onPraise":function(){t++,w.text(t)},"onUnPraise":function(){t--,w.text(t)},"onPraised":function(){x.find("em").addClass("active"),w.text(t)}}),d({"selector":'[data-action="collect"]',"parent":'[data-node="shopTop"]'},function(t){t?b.text(1+~~b.text()).prev().addClass("active"):b.text(~~b.text()-1).prev().removeClass("active")});var n=null,o=$('[data-node="shareBtnBox"]'),a={},i="",c="";$('[data-node="shopTop"]').on("mouseenter",'[data-action="shareto"]',function(){i=$(this).data("surl"),$.isEmptyObject(a)&&(a={"url":$(this).data("surl"),"title":$(this).data("stitle"),"pic":""===$(this).data("spic")?e.imgpath+"/images/public/logo.png":$(this).data("spic")},c=$(this).data("stitle")),o.css({"top":$(this).offset().top+30,"left":$(this).offset().left-~~$('[data-node="shareBtnBox"]').width()/2+~~$(this).width()/2}).show(),BP.send({"event_id":"B000P019","shop_id":e.shopId})}).on("mouseleave",'[data-action="shareto"]',function(){n=setTimeout(function(){o.hide()},100)}),o.on("mouseenter",function(){clearTimeout(n)}).on("mouseleave",function(){$(this).hide()});var p=g.find("img").attr("src"),h=function(t){return"https://i-pre.meixincdn.com/v1/img/T1gyVTBmLT1R4cSCrK.png"!=t&&"https://i6.meixincdn.com/v1/img/T1YFxTByJT1R4cSCrK.png"!=t&&"https://i-pre.meixincdn.com/v1/img/T1TaVTB7LT1R4cSCrK.png"!=t},m=function(t){var n=/\w+\.(jpg|gif|bmp|png)$/;return!!h(t)&&n.test(t)};o.on("click",'[data-shareto="weixin"]',function(){a.url=e.weixin_share,a.title=c,r.weixin(a),window.analytic("out-weixin")}).on("click",'[data-shareto="qq"]',function(){a.url=i,a.title=c,a.summary="我发现了前所未有的好店，不如，你也来逛逛？",a.pic=m(p)?p:e.imgpath+"/images/public/logo.jpg",r.qq(a),window.analytic("out-QQ")}).on("click",'[data-shareto="sina"]',function(){a.url=i,a.title=c+",这是我费尽千辛万苦找到的超级好店。",a.pic=m(p)?p:e.imgpath+"/images/public/logo.jpg",r.sina(a),window.analytic("out-xlwb")}).on("click",'[data-shareto="qzone"]',function(){a.url=i,a.title=c,a.summary="这是我费尽千辛万苦找到的超级好店。",a.pic=m(p)?p:e.imgpath+"/images/public/logo.jpg",r.qzone(a),window.analytic("out-Qqzone")}),f.on("textchange",u),v.on("click",y),l.on("click",function(){f.val(""),q()})}()})}).call(exports,n(0),n(1))},"37":function(t,exports,n){"use strict";var e=function(t){return t.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")};t.exports=e},"4":function(t,exports,n){"use strict";(function($){var e=n(6),o=function(){},a=function(t,n){t=t||"",n=n||{};var a={"fixed":!0,"modal":!0,"autofocus":!1,"content":'<p class="del-pop-p">'+t+"</p>","className":"pop-box","okCls":"pc-btn pc-btnh35 circle-pop-btn","ok":o};$.extend(!0,a,n);var i=e(a),c=i._$("header"),s=i._$("title");return n.title||s.css("borderBottom","none"),c.show(),i.show(),i};t.exports=a}).call(exports,n(0))},"58":function(t,exports,n){"use strict";(function($,e){var o=n(2),a=n(5),i=n(4),c=n(7),s=n(14),r=n(9),d=n(15),u=(r(),0),l=function(){},p=function(t,n,e){t.data("praise",n),t.data("count",e)},f={"normal":{"add":function(t,n,e){t.addClass("active"),e||(e="取消点赞"),t.find("span").text(e)},"reduce":function(t,n,e){t.removeClass("active"),e||(e="点赞"),t.find("span").text(e)}}},h=function(t){return f[t]},m=function(t,n,f){var m=$(t),v=f.onPraise||l,g=f.onUnPraise||l,x=f.onPraised||l,w=f.mode||"normal";m.on("click",n,function(){function t(){var t=b;o.post(a.get("praise"),t).done(function(t){var o=h(w);if(c(s.comment.enableEditor).pub({"pid":"enable"}),t&&200===t.code&&t.success)1===f?(p(n,0,++y),o.add(n,t,y),v.call(n,t,y)):0===f&&(p(n,1,--y),o.reduce(n,t,y),g.call(n,t,y));else if(t&&422===t.code);else if(t&&403===t.code)i("抱歉！该话题审核未通过",{"ok":function(){window.location.href=e.group_domain+"index/error?code=topic"}});else if(409===t.code)x.call(n,t,y),u||i(t.message);else{var a=t.message;0===l&&404===t.code?i(a,{"ok":function(){window.location.reload()}}):i(a)}u&&window.location.reload()}).fail(function(){}).always(function(){})}var n=$(this),l=n.data("type"),f=n.data("praise"),m=n.data("id"),y=n.data("count"),b={"data":{"groupId":e.groupid,"id":m,"type":l,"isPraise":f}};return r()?(u=0,t()):(u=1,d(t)),!1})};t.exports=m}).call(exports,n(0),n(1))},"66":function(t,exports,n){"use strict";(function($){var t=document.createElement("input"),n="oninput"in t&&(!("documentMode"in document)||document.documentMode>9),e=function(t){return"INPUT"===t.nodeName&&("text"===t.type||"password"===t.type)},o=null,a=null,i=function(t){o=t,a=t.value,o.attachEvent("onpropertychange",s)},c=function(){o&&(o.detachEvent("onpropertychange",s),o=null,a=null)},s=function(t){if("value"===t.propertyName){var n=t.srcElement.value;n!==a&&(a=n,$(o).trigger("textchange"))}};n?$(document).on("input",function(t){"TEXTAREA"!==t.target.nodeName&&$(t.target).trigger("textchange")}):$(document).on("focusin",function(t){e(t.target)&&(c(),i(t.target))}).on("focusout",function(){c()}).on("selectionchange keyup keydown",function(){o&&o.value!==a&&(a=o.value,$(o).trigger("textchange"))})}).call(exports,n(0))},"8":function(t,exports,n){"use strict";(function($){var n,e,o,a=function(){n.off().on("click",function(){n.hide(),e.hide()}),e.off().on("click",function(){n.hide(),e.hide()})},i=function(t,i){var c={"duration":2e3,"callback":function(){}};$.extend(c,i||{}),clearTimeout(o),n=$('[data-action="publicMask"]'),e=$('[data-action="publicTips"]'),n.length>0?(n.show(),e.show().text(t)):($("body").append('<div data-action="publicMask" class="ordi-toast"></div><div class="ordi-toast-txt" data-action="publicTips">'+t+"</div>"),n=$('[data-action="publicMask"]'),e=$('[data-action="publicTips"]'),a()),e.css("margin",-e[0].offsetHeight/2+"px 0 0 "+-e.width()/2+"px"),o=setTimeout(function(){n.hide(),e.hide(),c.callback()},c.duration)};t.exports={"init":i,"events":a}}).call(exports,n(0))}},[346]);