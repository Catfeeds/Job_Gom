webpackJsonp([2],{"10":function(t,exports,e){"use strict";var i={"tel":{"ept":"请填写11位手机号","err":"手机号格式错误","errBack":"该手机号已被注册"},"msgCode":{"tipGet":"请获取短信验证码","tipEpt":"请输入短信验证码","tipErr":"验证码是6位数字,请重新输入","tipErrEdit":"验证码错误","tipWrong":"验证码有误,请重新输入","checkCodeWrong":"验证码输入错误,请重新输入","send":"验证码已发送，请注意查收","tipSend":"验证码已发送您的手机，10分钟内输入有效","tipDisabled":"验证码再次获取需间隔60s","tipLimitEdit":"获取验证码超限，请稍后再试","btnAfterSend":"秒后重新获取","btnDefault":"获取验证码"},"pwd":{"commonTip":"请输入6-20位英文字母,数字或符号"},"pwdV":{"ept":"请再次输入密码","err":"两次输入的密码不一致"},"nickName":{"eptName":"请输入昵称！","commonTip":"昵称只能输入2-20位字符、字母、数字、-、_","existName":"此昵称太受欢迎了，已经有人抢了~","sucSub":"资料修改成功！","errLine":"网络超时!","wrongName":"此昵称含有敏感词,请重新输入"},"birthTip":{"tip":"生日不能重复设置"},"refCode":{"err":"推荐码错误"},"imgCode":{"ept":"请输入验证码","err":"验证码输入错误，请重新输入"},"login":{"errCode":"请输入验证码","errNum":"请输入账号","errPwd":"请输入密码","agreement":"请同意协议并勾选"},"createCircle":{"typeEmpty":"请选择圈子分类","nameEmpty":"圈子名称不能为空","upperLimit":"抱歉，您创建的圈子已经达到上限，暂不能创建！"},"circle":{"login":"登录成功！","unJoin":"需要先加入该圈子才能发布话题","cannotJoin":"抱歉！该圈子不允许发布话题!","review":"加入圈子审核中，请耐心等待!","joinSuccess":"恭喜您已经加入圈子！","joinSuccessPublic":"恭喜您已经加入圈子，快来发布话题吧！","cannotJoinCircle":"抱歉！该圈子不允许任何人加入！","exit":"您已经退出该圈子！","dissolved":"抱歉！该圈子已被解散"},"qrCodeTip":{"loseEffTip":"二维码已失效","loseEffBtn":"点击刷新","failGetTip":"二维码生成失败","failGetBtn":"重新生成"},"masterApply":{"nameLength":"姓名要2-20个字符","nameType":"姓名仅限汉字和字母","isIdCard":"请填写18位有效身份证号","type":"请选择达人类别","summary":"请输入自我介绍，2-100个字符"},"upload":{"noUpload":"请上传图片","uploadError":"请上传小于2M的图片，支持格式jpg、jpeg、png、gif！","uploadFaild":"上传失败,请重新上传","uploadError_Master":"请上传小于2M的图片，支持格式jpg、jpeg、png、gif!","Q_EXCEED_NUM_LIMIT":"请上传小于2M的图片，支持格式jpg、jpeg、png、gif！","Q_EXCEED_SIZE_LIMIT":"总文件大小超出限制","Q_TYPE_DENIED":"文件类型错误","F_EXCEED_SIZE":"请上传jpg、png格式且小于2M的图片！","excess":"文件个数超出限制"},"errLine":{"tip":"网络错误,请稍后再试！"}};t.exports=i},"11":function(t,exports,e){"use strict";(function($){var i=e(6),n=function(){},a=function(t,e){var a={"fixed":!0,"modal":!0,"content":'<p class="del-pop-p">'+t+"</p>","className":"pop-box","okCls":"pc-btn pc-btnh35 circle-pop-btn","ok":n,"cancel":n,"btnWrapCls":"two-buttons"};$.extend(!0,a,e);var r=i(a);return r.show(),r};t.exports=a}).call(exports,e(0))},"12":function(t,exports,e){(function(i){var n,a,r;!function(o,s){var c={},l=function(t,e){var i,n,a;if("string"==typeof t)return h(t);for(i=[],n=t.length,a=0;a<n;a++)i.push(h(t[a]));return e.apply(null,i)},d=function(t,e,i){2===arguments.length&&(i=e,e=null),l(e||[],function(){u(t,i,arguments)})},u=function(t,e,n){var a,r={"exports":e};"function"==typeof e&&(n.length||(n=[l,r.exports,r,i]),void 0!==(a=e.apply(null,n))&&(r.exports=a)),c[t]=r.exports},h=function(t){var e=c[t]||o[t];if(!e)throw new Error("`"+t+"` is undefined");return e},p=function(t){var e,i,n,a,r,o;o=function(t){return t&&t.charAt(0).toUpperCase()+t.substr(1)};for(e in c)if(i=t,c.hasOwnProperty(e)){for(n=e.split("/"),r=o(n.pop());a=o(n.shift());)i[a]=i[a]||{},i=i[a];i[r]=c[e]}return t},f=function(t){return o.__dollar=t,p(s(o,d,l,i))};"object"==typeof t&&"object"==typeof t.exports?t.exports=f():(a=[e(0)],n=f,void 0!==(r="function"==typeof n?n.apply(exports,a):n)&&(t.exports=r))}(window,function(t,e,require,i){return e("dollar-third",[],function(){var $=t.__dollar||t.jQuery||t.Zepto||i;if(!$)throw new Error("jQuery or Zepto not found!");return $}),e("dollar",["dollar-third"],function(t){return t}),e("promise-third",["dollar"],function($){return{"Deferred":$.Deferred,"when":$.when,"isPromise":function(t){return t&&"function"==typeof t.then}}}),e("promise",["promise-third"],function(t){return t}),e("base",["dollar","promise"],function($,e){function i(t,e){return function(){return t.apply(e,arguments)}}function n(t){var e;return Object.create?Object.create(t):(e=function(){},e.prototype=t,new e)}var a=function(){},r=Function.call;return{"version":"0.1.5","$":$,"Deferred":e.Deferred,"isPromise":e.isPromise,"when":e.when,"browser":function(t){var e={},i=t.match(/WebKit\/([\d.]+)/),n=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),a=t.match(/MSIE\s([\d\.]+)/)||t.match(/(?:trident)(?:.*rv:([\w.]+))?/i),r=t.match(/Firefox\/([\d.]+)/),o=t.match(/Safari\/([\d.]+)/),s=t.match(/OPR\/([\d.]+)/);return i&&(e.webkit=parseFloat(i[1])),n&&(e.chrome=parseFloat(n[1])),a&&(e.ie=parseFloat(a[1])),r&&(e.firefox=parseFloat(r[1])),o&&(e.safari=parseFloat(o[1])),s&&(e.opera=parseFloat(s[1])),e}(navigator.userAgent),"os":function(t){var e={},i=t.match(/(?:Android);?[\s\/]+([\d.]+)?/),n=t.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return i&&(e.android=parseFloat(i[1])),n&&(e.ios=parseFloat(n[1].replace(/_/g,"."))),e}(navigator.userAgent),"inherits":function(t,e,i){var a;return"function"==typeof e?(a=e,e=null):a=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},$.extend(!0,a,t,i||{}),a.__super__=t.prototype,a.prototype=n(t.prototype),e&&$.extend(!0,a.prototype,e),a},"noop":a,"bindFn":i,"log":function(){return t.console?i(console.log,console):a}(),"nextTick":function(){return function(t){setTimeout(t,1)}}(),"slice":function(t){return function(){return r.apply(t,arguments)}}([].slice),"guid":function(){var t=0;return function(e){for(var i=(+new Date).toString(32),n=0;n<5;n++)i+=Math.floor(65535*Math.random()).toString(32);return(e||"wu_")+i+(t++).toString(32)}}(),"formatSize":function(t,e,i){var n;for(i=i||["B","K","M","G","TB"];(n=i.shift())&&t>1024;)t/=1024;return("B"===n?t:t.toFixed(e||2))+n}}}),e("mediator",["base"],function(t){function e(t,e,i,n){return $.grep(t,function(t){return t&&(!e||t.e===e)&&(!i||t.cb===i||t.cb._cb===i)&&(!n||t.ctx===n)})}function i(t,e,i){$.each((t||"").split(o),function(t,n){i(n,e)})}function n(t,e){for(var i,n=!1,a=-1,r=t.length;++a<r;)if(i=t[a],!1===i.cb.apply(i.ctx2,e)){n=!0;break}return!n}var a,$=t.$,r=[].slice,o=/\s+/;return a={"on":function(t,e,n){var a,r=this;return e?(a=this._events||(this._events=[]),i(t,e,function(t,e){var i={"e":t};i.cb=e,i.ctx=n,i.ctx2=n||r,i.id=a.length,a.push(i)}),this):this},"once":function(t,e,n){var a=this;return e?(i(t,e,function(t,e){var i=function(){return a.off(t,i),e.apply(n||a,arguments)};i._cb=e,a.on(t,i,n)}),a):a},"off":function(t,n,a){var r=this._events;return r?t||n||a?(i(t,n,function(t,i){$.each(e(r,t,i,a),function(){delete r[this.id]})}),this):(this._events=[],this):this},"trigger":function(t){var i,a,o;return this._events&&t?(i=r.call(arguments,1),a=e(this._events,t),o=e(this._events,"all"),n(a,i)&&n(o,arguments)):this}},$.extend({"installTo":function(t){return $.extend(t,a)}},a)}),e("uploader",["base","mediator"],function(t,e){function i(t){this.options=$.extend(!0,{},i.options,t),this._init(this.options)}var $=t.$;return i.options={},e.installTo(i.prototype),$.each({"upload":"start-upload","stop":"stop-upload","getFile":"get-file","getFiles":"get-files","addFile":"add-file","addFiles":"add-file","sort":"sort-files","removeFile":"remove-file","cancelFile":"cancel-file","skipFile":"skip-file","retry":"retry","isInProgress":"is-in-progress","makeThumb":"make-thumb","md5File":"md5-file","getDimension":"get-dimension","addButton":"add-btn","predictRuntimeType":"predict-runtime-type","refresh":"refresh","disable":"disable","enable":"enable","reset":"reset"},function(t,e){i.prototype[t]=function(){return this.request(e,arguments)}}),$.extend(i.prototype,{"state":"pending","_init":function(t){var e=this;e.request("init",t,function(){e.state="ready",e.trigger("ready")})},"option":function(t,e){var i=this.options;if(!(arguments.length>1))return t?i[t]:i;$.isPlainObject(e)&&$.isPlainObject(i[t])?$.extend(i[t],e):i[t]=e},"getStats":function(){var t=this.request("get-stats");return t?{"successNum":t.numOfSuccess,"progressNum":t.numOfProgress,"cancelNum":t.numOfCancel,"invalidNum":t.numOfInvalid,"uploadFailNum":t.numOfUploadFailed,"queueNum":t.numOfQueue,"interruptNum":t.numofInterrupt}:{}},"trigger":function(t){var i=[].slice.call(arguments,1),n=this.options,a="on"+t.substring(0,1).toUpperCase()+t.substring(1);return!(!1===e.trigger.apply(this,arguments)||$.isFunction(n[a])&&!1===n[a].apply(this,i)||$.isFunction(this[a])&&!1===this[a].apply(this,i)||!1===e.trigger.apply(e,[this,t].concat(i)))},"destroy":function(){this.request("destroy",arguments),this.off()},"request":t.noop}),t.create=i.create=function(t){return new i(t)},t.Uploader=i,i}),e("runtime/runtime",["base","mediator"],function(t,e){function i(e){this.options=$.extend({"container":document.body},e),this.uid=t.guid("rt_")}var $=t.$,n={},a=function(t){for(var e in t)if(t.hasOwnProperty(e))return e;return null};return $.extend(i.prototype,{"getContainer":function(){var t,e,i=this.options;return this._container?this._container:(t=$(i.container||document.body),e=$(document.createElement("div")),e.attr("id","rt_"+this.uid),e.css({"position":"absolute","top":"0px","left":"0px","width":"1px","height":"1px","overflow":"hidden"}),t.append(e),t.addClass("webuploader-container"),this._container=e,this._parent=t,e)},"init":t.noop,"exec":t.noop,"destroy":function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),i.orders="html5,flash",i.addRuntime=function(t,e){n[t]=e},i.hasRuntime=function(t){return!!(t?n[t]:a(n))},i.create=function(t,e){var r;if(e=e||i.orders,$.each(e.split(/\s*,\s*/g),function(){if(n[this])return r=this,!1}),!(r=r||a(n)))throw new Error("Runtime Error");return new n[r](t)},e.installTo(i.prototype),i}),e("runtime/client",["base","mediator","runtime/runtime"],function(t,e,i){function n(e,n){var r,o=t.Deferred();this.uid=t.guid("client_"),this.runtimeReady=function(t){return o.done(t)},this.connectRuntime=function(e,s){if(r)throw new Error("already connected!");return o.done(s),"string"==typeof e&&a.get(e)&&(r=a.get(e)),r=r||a.get(null,n),r?(t.$.extend(r.options,e),r.__promise.then(o.resolve),r.__client++):(r=i.create(e,e.runtimeOrder),r.__promise=o.promise(),r.once("ready",o.resolve),r.init(),a.add(r),r.__client=1),n&&(r.__standalone=n),r},this.getRuntime=function(){return r},this.disconnectRuntime=function(){r&&(r.__client--,r.__client<=0&&(a.remove(r),delete r.__promise,r.destroy()),r=null)},this.exec=function(){if(r){var i=t.slice(arguments);return e&&i.unshift(e),r.exec.apply(this,i)}},this.getRuid=function(){return r&&r.uid},this.destroy=function(t){return function(){t&&t.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var a;return a=function(){var t={};return{"add":function(e){t[e.uid]=e},"get":function(e,i){var n;if(e)return t[e];for(n in t)if(!i||!t[n].__standalone)return t[n];return null},"remove":function(e){delete t[e.uid]}}}(),e.installTo(n.prototype),n}),e("lib/dnd",["base","mediator","runtime/client"],function(t,e,i){function n(t){t=this.options=$.extend({},n.options,t),t.container=$(t.container),t.container.length&&i.call(this,"DragAndDrop")}var $=t.$;return n.options={"accept":null,"disableGlobalDnd":!1},t.inherits(i,{"constructor":n,"init":function(){var t=this;t.connectRuntime(t.options,function(){t.exec("init"),t.trigger("ready")})}}),e.installTo(n.prototype),n}),e("widgets/widget",["base","uploader"],function(t,e){function i(t){if(!t)return!1;var e=t.length,i=$.type(t);return!(1!==t.nodeType||!e)||("array"===i||"function"!==i&&"string"!==i&&(0===e||"number"==typeof e&&e>0&&e-1 in t))}function n(t){this.owner=t,this.options=t.options}var $=t.$,a=e.prototype._init,r=e.prototype.destroy,o={},s=[];return $.extend(n.prototype,{"init":t.noop,"invoke":function(t,e){var i=this.responseMap;return i&&t in i&&i[t]in this&&$.isFunction(this[i[t]])?this[i[t]].apply(this,e):o},"request":function(){return this.owner.request.apply(this.owner,arguments)}}),$.extend(e.prototype,{"_init":function(){var t=this,e=t._widgets=[],i=t.options.disableWidgets||"";return $.each(s,function(n,a){(!i||!~i.indexOf(a._name))&&e.push(new a(t))}),a.apply(t,arguments)},"request":function(e,n,a){var r,s,c,l,d=0,u=this._widgets,h=u&&u.length,p=[],f=[];for(n=i(n)?n:[n];d<h;d++)r=u[d],(s=r.invoke(e,n))!==o&&(t.isPromise(s)?f.push(s):p.push(s));return a||f.length?(c=t.when.apply(t,f),l=c.pipe?"pipe":"then",c[l](function(){var e=t.Deferred(),i=arguments;return 1===i.length&&(i=i[0]),setTimeout(function(){e.resolve(i)},1),e.promise()})[a?l:"done"](a||t.noop)):p[0]},"destroy":function(){r.apply(this,arguments),this._widgets=null}}),e.register=n.register=function(e,i){var a,r={"init":"init","destroy":"destroy","name":"anonymous"};return 1===arguments.length?(i=e,$.each(i,function(t){if("_"===t[0]||"name"===t)return void("name"===t&&(r.name=i.name));r[t.replace(/[A-Z]/g,"-$&").toLowerCase()]=t})):r=$.extend(r,e),i.responseMap=r,a=t.inherits(n,i),a._name=r.name,s.push(a),a},e.unRegister=n.unRegister=function(t){if(t&&"anonymous"!==t)for(var e=s.length;e--;)s[e]._name===t&&s.splice(e,1)},n}),e("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(t,e,i){var $=t.$;return e.options.dnd="",e.register({"name":"dnd","init":function(e){if(e.dnd&&"html5"===this.request("predict-runtime-type")){var n,a=this,r=t.Deferred(),o=$.extend({},{"disableGlobalDnd":e.disableGlobalDnd,"container":e.dnd,"accept":e.accept});return this.dnd=n=new i(o),n.once("ready",r.resolve),n.on("drop",function(t){a.request("add-file",[t])}),n.on("accept",function(t){return a.owner.trigger("dndAccept",t)}),n.init(),r.promise()}},"destroy":function(){this.dnd&&this.dnd.destroy()}})}),e("lib/filepaste",["base","mediator","runtime/client"],function(t,e,i){function n(t){t=this.options=$.extend({},t),t.container=$(t.container||document.body),i.call(this,"FilePaste")}var $=t.$;return t.inherits(i,{"constructor":n,"init":function(){var t=this;t.connectRuntime(t.options,function(){t.exec("init"),t.trigger("ready")})}}),e.installTo(n.prototype),n}),e("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(t,e,i){var $=t.$;return e.register({"name":"paste","init":function(e){if(e.paste&&"html5"===this.request("predict-runtime-type")){var n,a=this,r=t.Deferred(),o=$.extend({},{"container":e.paste,"accept":e.accept});return this.paste=n=new i(o),n.once("ready",r.resolve),n.on("paste",function(t){a.owner.request("add-file",[t])}),n.init(),r.promise()}},"destroy":function(){this.paste&&this.paste.destroy()}})}),e("lib/blob",["base","runtime/client"],function(t,e){function i(t,i){var n=this;n.source=i,n.ruid=t,this.size=i.size||0,!i.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+("jpg"===this.ext?"jpeg":this.ext):this.type=i.type||"application/octet-stream",e.call(n,"Blob"),this.uid=i.uid||this.uid,t&&n.connectRuntime(t)}return t.inherits(e,{"constructor":i,"slice":function(t,e){return this.exec("slice",t,e)},"getSource":function(){return this.source}}),i}),e("lib/file",["base","lib/blob"],function(t,e){function i(t,i){var r;this.name=i.name||"untitled"+n++,r=a.exec(i.name)?RegExp.$1.toLowerCase():"",!r&&i.type&&(r=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(i.type)?RegExp.$1.toLowerCase():"",this.name+="."+r),this.ext=r,this.lastModifiedDate=i.lastModifiedDate||(new Date).toLocaleString(),e.apply(this,arguments)}var n=1,a=/\.([^.]+)$/;return t.inherits(e,i)}),e("lib/filepicker",["base","runtime/client","lib/file"],function(e,i,n){function a(t){if(t=this.options=$.extend({},a.options,t),t.container=$(t.id),!t.container.length)throw new Error("按钮指定错误");t.innerHTML=t.innerHTML||t.label||t.container.html()||"",t.button=$(t.button||document.createElement("div")),t.button.html(t.innerHTML),t.container.html(t.button),i.call(this,"FilePicker",!0)}var $=e.$;return a.options={"button":null,"container":null,"label":null,"innerHTML":null,"multiple":!0,"accept":null,"name":"file"},e.inherits(i,{"constructor":a,"init":function(){var i=this,a=i.options,r=a.button;r.addClass("webuploader-pick"),i.on("all",function(t){var e;switch(t){case"mouseenter":r.addClass("webuploader-pick-hover");break;case"mouseleave":r.removeClass("webuploader-pick-hover");break;case"change":e=i.exec("getFiles"),i.trigger("select",$.map(e,function(t){return t=new n(i.getRuid(),t),t._refer=a.container,t}),a.container)}}),i.connectRuntime(a,function(){i.refresh(),i.exec("init",a),i.trigger("ready")}),this._resizeHandler=e.bindFn(this.refresh,this),$(t).on("resize",this._resizeHandler)},"refresh":function(){var t=this.getRuntime().getContainer(),e=this.options.button,i=e.outerWidth?e.outerWidth():e.width(),n=e.outerHeight?e.outerHeight():e.height(),a=e.offset();i&&n&&t.css({"bottom":"auto","right":"auto","width":i+"px","height":n+"px"}).offset(a)},"enable":function(){this.options.button.removeClass("webuploader-pick-disable"),this.refresh()},"disable":function(){var t=this.options.button;this.getRuntime().getContainer().css({"top":"-99999px"}),t.addClass("webuploader-pick-disable")},"destroy":function(){var e=this.options.button;$(t).off("resize",this._resizeHandler),e.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),a}),e("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(t,e,i){var $=t.$;return $.extend(e.options,{"pick":null,"accept":null}),e.register({"name":"picker","init":function(t){return this.pickers=[],t.pick&&this.addBtn(t.pick)},"refresh":function(){$.each(this.pickers,function(){this.refresh()})},"addBtn":function(e){var n=this,a=n.options,r=a.accept,o=[];if(e)return $.isPlainObject(e)||(e={"id":e}),$(e.id).each(function(){var s,c,l;l=t.Deferred(),s=$.extend({},e,{"accept":$.isPlainObject(r)?[r]:r,"swf":a.swf,"runtimeOrder":a.runtimeOrder,"id":this}),c=new i(s),c.once("ready",l.resolve),c.on("select",function(t){n.owner.request("add-file",[t])}),c.init(),n.pickers.push(c),o.push(l.promise())}),t.when.apply(t,o)},"disable":function(){$.each(this.pickers,function(){this.disable()})},"enable":function(){$.each(this.pickers,function(){this.enable()})},"destroy":function(){$.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),e("lib/image",["base","runtime/client","lib/blob"],function(t,e,i){function n(t){this.options=$.extend({},n.options,t),e.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var $=t.$;return n.options={"quality":90,"crop":!1,"preserveHeaders":!1,"allowMagnify":!1},t.inherits(e,{"constructor":n,"info":function(t){return t?(this._info=t,this):this._info},"meta":function(t){return t?(this._meta=t,this):this._meta},"loadFromBlob":function(t){var e=this,i=t.getRuid();this.connectRuntime(i,function(){e.exec("init",e.options),e.exec("loadFromBlob",t)})},"resize":function(){var e=t.slice(arguments);return this.exec.apply(this,["resize"].concat(e))},"crop":function(){var e=t.slice(arguments);return this.exec.apply(this,["crop"].concat(e))},"getAsDataUrl":function(t){return this.exec("getAsDataUrl",t)},"getAsBlob":function(t){var e=this.exec("getAsBlob",t);return new i(this.getRuid(),e)}}),n}),e("widgets/image",["base","uploader","lib/image","widgets/widget"],function(t,e,i){var n,$=t.$;return n=function(t){var e=0,i=[],n=function(){for(var t;i.length&&e<5242880;)t=i.shift(),e+=t[0],t[1]()};return function(t,a,r){i.push([a,r]),t.once("destroy",function(){e-=a,setTimeout(n,1)}),setTimeout(n,1)}}(),$.extend(e.options,{"thumb":{"width":110,"height":110,"quality":70,"allowMagnify":!0,"crop":!0,"preserveHeaders":!1,"type":"image/jpeg"},"compress":{"width":1600,"height":1600,"quality":90,"allowMagnify":!1,"crop":!1,"preserveHeaders":!0}}),e.register({"name":"image","makeThumb":function(t,e,a,r){var o,s,c=!1;if(t=this.request("get-file",t),!t.type.match(/^image/))return void e(!0);o=$.extend({},this.options.thumb),c=!$.isPlainObject(this.options.thumb),$.isPlainObject(a)&&(o=$.extend(o,a),a=null),a=a||o.width,r=r||o.height,s=new i(o),s.once("load",function(){t._info=t._info||s.info(),t._meta=t._meta||s.meta(),a<=1&&a>0&&(a=t._info.width*a),r<=1&&r>0&&(r=t._info.height*r),c?s.resize(t._info.width,t._info.height):s.resize(a,r)}),s.once("complete",function(){e(!1,s.getAsDataUrl(o.type)),s.destroy()}),s.once("error",function(t){e(t||!0),s.destroy()}),n(s,t.source.size,function(){t._info&&s.info(t._info),t._meta&&s.meta(t._meta),s.loadFromBlob(t.source)})},"beforeSendFile":function(e){var n,a,r=this.options.compress||this.options.resize,o=r&&r.compressSize||0,s=r&&r.noCompressIfLarger||!1;if(e=this.request("get-file",e),r&&~"image/jpeg,image/jpg".indexOf(e.type)&&!(e.size<o)&&!e._compressed)return r=$.extend({},r),a=t.Deferred(),n=new i(r),a.always(function(){n.destroy(),n=null}),n.once("error",a.reject),n.once("load",function(){var t=r.width,i=r.height;e._info=e._info||n.info(),e._meta=e._meta||n.meta(),t<=1&&t>0&&(t=e._info.width*t),i<=1&&i>0&&(i=e._info.height*i),n.resize(t,i)}),n.once("complete",function(){var t,i;try{t=n.getAsBlob(r.type),i=e.size,(!s||t.size<i)&&(e.source=t,e.size=t.size,e.trigger("resize",t.size,i)),e._compressed=!0,a.resolve()}catch(t){a.resolve()}}),e._info&&n.info(e._info),e._meta&&n.meta(e._meta),n.loadFromBlob(e.source),a.promise()}})}),e("file",["base","mediator"],function(t,e){function i(){return a+r++}function n(t){this.name=t.name||"Untitled",this.size=t.size||0,this.type=t.type||"application/octet-stream",this.lastModifiedDate=t.lastModifiedDate||1*new Date,this.id=i(),this.ext=o.exec(this.name)?RegExp.$1:"",this.statusText="",s[this.id]=n.Status.INITED,this.source=t,this.loaded=0,this.on("error",function(t){this.setStatus(n.Status.ERROR,t)})}var $=t.$,a="WU_FILE_",r=0,o=/\.([^.]+)$/,s={};return $.extend(n.prototype,{"setStatus":function(t,e){var i=s[this.id];void 0!==e&&(this.statusText=e),t!==i&&(s[this.id]=t,this.trigger("statuschange",t,i))},"getStatus":function(){return s[this.id]},"getSource":function(){return this.source},"destroy":function(){this.off(),delete s[this.id]}}),e.installTo(n.prototype),n.Status={"INITED":"inited","QUEUED":"queued","PROGRESS":"progress","ERROR":"error","COMPLETE":"complete","CANCELLED":"cancelled","INTERRUPT":"interrupt","INVALID":"invalid"},n}),e("queue",["base","mediator","file"],function(t,e,i){function n(){this.stats={"numOfQueue":0,"numOfSuccess":0,"numOfCancel":0,"numOfProgress":0,"numOfUploadFailed":0,"numOfInvalid":0,"numofDeleted":0,"numofInterrupt":0},this._queue=[],this._map={}}var $=t.$,a=i.Status;return $.extend(n.prototype,{"append":function(t){return this._queue.push(t),this._fileAdded(t),this},"prepend":function(t){return this._queue.unshift(t),this._fileAdded(t),this},"getFile":function(t){return"string"!=typeof t?t:this._map[t]},"fetch":function(t){var e,i,n=this._queue.length;for(t=t||a.QUEUED,e=0;e<n;e++)if(i=this._queue[e],t===i.getStatus())return i;return null},"sort":function(t){"function"==typeof t&&this._queue.sort(t)},"getFiles":function(){for(var t,e=[].slice.call(arguments,0),i=[],n=0,a=this._queue.length;n<a;n++)t=this._queue[n],e.length&&!~$.inArray(t.getStatus(),e)||i.push(t);return i},"removeFile":function(t){this._map[t.id]&&(delete this._map[t.id],t.destroy(),this.stats.numofDeleted++)},"_fileAdded":function(t){var e=this;this._map[t.id]||(this._map[t.id]=t,t.on("statuschange",function(t,i){e._onFileStatusChange(t,i)}))},"_onFileStatusChange":function(t,e){var i=this.stats;switch(e){case a.PROGRESS:i.numOfProgress--;break;case a.QUEUED:i.numOfQueue--;break;case a.ERROR:i.numOfUploadFailed--;break;case a.INVALID:i.numOfInvalid--;break;case a.INTERRUPT:i.numofInterrupt--}switch(t){case a.QUEUED:i.numOfQueue++;break;case a.PROGRESS:i.numOfProgress++;break;case a.ERROR:i.numOfUploadFailed++;break;case a.COMPLETE:i.numOfSuccess++;break;case a.CANCELLED:i.numOfCancel++;break;case a.INVALID:i.numOfInvalid++;break;case a.INTERRUPT:i.numofInterrupt++}}}),e.installTo(n.prototype),n}),e("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(t,e,i,n,a,r){var $=t.$,o=/\.\w+$/,s=n.Status;return e.register({"name":"queue","init":function(e){var n,a,o,s,c,l,d,u=this;if($.isPlainObject(e.accept)&&(e.accept=[e.accept]),e.accept){for(c=[],o=0,a=e.accept.length;o<a;o++)(s=e.accept[o].extensions)&&c.push(s);c.length&&(l="\\."+c.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),u.accept=new RegExp(l,"i")}if(u.queue=new i,u.stats=u.queue.stats,"html5"===this.request("predict-runtime-type"))return n=t.Deferred(),this.placeholder=d=new r("Placeholder"),d.connectRuntime({"runtimeOrder":"html5"},function(){u._ruid=d.getRuid(),n.resolve()}),n.promise()},"_wrapFile":function(t){if(!(t instanceof n)){if(!(t instanceof a)){if(!this._ruid)throw new Error("Can't add external files.");t=new a(this._ruid,t)}t=new n(t)}return t},"acceptFile":function(t){return!(!(!t||!t.size||this.accept&&null!==o.exec(t.name))||!this.accept.test(t.name))},"_addFile":function(t){var e=this;if(t=e._wrapFile(t),e.owner.trigger("beforeFileQueued",t))return e.acceptFile(t)?(e.queue.append(t),e.owner.trigger("fileQueued",t),t):void e.owner.trigger("error","Q_TYPE_DENIED",t)},"getFile":function(t){return this.queue.getFile(t)},"addFile":function(t){var e=this;t.length||(t=[t]),t=$.map(t,function(t){return e._addFile(t)}),e.owner.trigger("filesQueued",t),e.options.auto&&setTimeout(function(){e.request("start-upload")},20)},"getStats":function(){return this.stats},"removeFile":function(t,e){var i=this;t=t.id?t:i.queue.getFile(t),this.request("cancel-file",t),e&&this.queue.removeFile(t)},"getFiles":function(){return this.queue.getFiles.apply(this.queue,arguments)},"fetchFile":function(){return this.queue.fetch.apply(this.queue,arguments)},"retry":function(t,e){var i,n,a,r=this;if(t)return t=t.id?t:r.queue.getFile(t),t.setStatus(s.QUEUED),void(e||r.request("start-upload"));for(i=r.queue.getFiles(s.ERROR),n=0,a=i.length;n<a;n++)t=i[n],t.setStatus(s.QUEUED);r.request("start-upload")},"sortFiles":function(){return this.queue.sort.apply(this.queue,arguments)},"reset":function(){this.owner.trigger("reset"),this.queue=new i,this.stats=this.queue.stats},"destroy":function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),e("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(t,e){return t.support=function(){return e.hasRuntime.apply(e,arguments)},t.register({"name":"runtime","init":function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},"predictRuntimeType":function(){var t,i,n=this.options.runtimeOrder||e.orders,a=this.type;if(!a)for(n=n.split(/\s*,\s*/g),t=0,i=n.length;t<i;t++)if(e.hasRuntime(n[t])){this.type=a=n[t];break}return a}})}),e("lib/transport",["base","runtime/client","mediator"],function(t,e,i){function n(t){var i=this;t=i.options=$.extend(!0,{},n.options,t||{}),e.call(this,"Transport"),this._blob=null,this._formData=t.formData||{},this._headers=t.headers||{},this.on("progress",this._timeout),this.on("load error",function(){i.trigger("progress",1),clearTimeout(i._timer)})}var $=t.$;return n.options={"server":"","method":"POST","withCredentials":!1,"fileVal":"file","timeout":12e4,"formData":{},"headers":{},"sendAsBinary":!1},$.extend(n.prototype,{"appendBlob":function(t,e,i){var n=this,a=n.options;n.getRuid()&&n.disconnectRuntime(),n.connectRuntime(e.ruid,function(){n.exec("init")}),n._blob=e,a.fileVal=t||a.fileVal,a.filename=i||a.filename},"append":function(t,e){"object"==typeof t?$.extend(this._formData,t):this._formData[t]=e},"setRequestHeader":function(t,e){"object"==typeof t?$.extend(this._headers,t):this._headers[t]=e},"send":function(t){this.exec("send",t),this._timeout()},"abort":function(){return clearTimeout(this._timer),this.exec("abort")},"destroy":function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},"getResponse":function(){return this.exec("getResponse")},"getResponseAsJson":function(){return this.exec("getResponseAsJson")},"getStatus":function(){return this.exec("getStatus")},"_timeout":function(){var t=this,e=t.options.timeout;e&&(clearTimeout(t._timer),t._timer=setTimeout(function(){t.abort(),t.trigger("error","timeout")},e))}}),i.installTo(n.prototype),n}),e("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(t,e,i,n){function a(t,e){var i,n,a=[],r=t.source,o=r.size,s=e?Math.ceil(o/e):1,c=0,l=0;for(n={"file":t,"has":function(){return!!a.length},"shift":function(){return a.shift()},"unshift":function(t){a.unshift(t)}};l<s;)i=Math.min(e,o-c),a.push({"file":t,"start":c,"end":e?c+i:o,"total":o,"chunks":s,"chunk":l++,"cuted":n}),c+=i;return t.blocks=a.concat(),t.remaning=a.length,n}var $=t.$,r=t.isPromise,o=i.Status;$.extend(e.options,{"prepareNextFile":!1,"chunked":!1,"chunkSize":5242880,"chunkRetry":2,"threads":3,"formData":{}}),e.register({"name":"upload","init":function(){var e=this.owner,i=this;this.runing=!1,this.progress=!1,e.on("startUpload",function(){i.progress=!0}).on("uploadFinished",function(){i.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=t.bindFn(this._tick,this),e.on("uploadComplete",function(t){t.blocks&&$.each(t.blocks,function(t,e){e.transport&&(e.transport.abort(),e.transport.destroy()),delete e.transport}),delete t.blocks,delete t.remaning})},"reset":function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},"startUpload":function(e){var i=this;if($.each(i.request("get-files",o.INVALID),function(){i.request("remove-file",this)}),e)if(e=e.id?e:i.request("get-file",e),e.getStatus()===o.INTERRUPT)$.each(i.pool,function(t,i){i.file===e&&i.transport&&i.transport.send()}),e.setStatus(o.QUEUED);else{if(e.getStatus()===o.PROGRESS)return;e.setStatus(o.QUEUED)}else $.each(i.request("get-files",[o.INITED]),function(){this.setStatus(o.QUEUED)});if(!i.runing){i.runing=!0;var n=[];$.each(i.pool,function(t,e){var a=e.file;a.getStatus()===o.INTERRUPT&&(n.push(a),i._trigged=!1,e.transport&&e.transport.send())});for(var e;e=n.shift();)e.setStatus(o.PROGRESS);e||$.each(i.request("get-files",o.INTERRUPT),function(){this.setStatus(o.PROGRESS)}),i._trigged=!1,t.nextTick(i.__tick),i.owner.trigger("startUpload")}},"stopUpload":function(e,i){var n=this;if(!0===e&&(i=e,e=null),!1!==n.runing){if(e){if(e=e.id?e:n.request("get-file",e),e.getStatus()!==o.PROGRESS&&e.getStatus()!==o.QUEUED)return;return e.setStatus(o.INTERRUPT),$.each(n.pool,function(t,i){i.file===e&&(i.transport&&i.transport.abort(),n._putback(i),n._popBlock(i))}),t.nextTick(n.__tick)}n.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(o.INTERRUPT),i&&$.each(n.pool,function(t,e){e.transport&&e.transport.abort(),e.file.setStatus(o.INTERRUPT)}),n.owner.trigger("stopUpload")}},"cancelFile":function(t){t=t.id?t:this.request("get-file",t),t.blocks&&$.each(t.blocks,function(t,e){var i=e.transport;i&&(i.abort(),i.destroy(),delete e.transport)}),t.setStatus(o.CANCELLED),this.owner.trigger("fileDequeued",t)},"isInProgress":function(){return!!this.progress},"_getStats":function(){return this.request("get-stats")},"skipFile":function(t,e){t=t.id?t:this.request("get-file",t),t.setStatus(e||o.COMPLETE),t.skipped=!0,t.blocks&&$.each(t.blocks,function(t,e){var i=e.transport;i&&(i.abort(),i.destroy(),delete e.transport)}),this.owner.trigger("uploadSkip",t)},"_tick":function(){var e,i,n=this,a=n.options;if(n._promise)return n._promise.always(n.__tick);n.pool.length<a.threads&&(i=n._nextBlock())?(n._trigged=!1,e=function(e){n._promise=null,e&&e.file&&n._startSend(e),t.nextTick(n.__tick)},n._promise=r(i)?i.always(e):e(i)):n.remaning||n._getStats().numOfQueue||n._getStats().numofInterrupt||(n.runing=!1,n._trigged||t.nextTick(function(){n.owner.trigger("uploadFinished")}),n._trigged=!0)},"_putback":function(t){var e;t.cuted.unshift(t),~(e=this.stack.indexOf(t.cuted))||this.stack.unshift(t.cuted)},"_getStack":function(){for(var t,e=0;t=this.stack[e++];){if(t.has()&&t.file.getStatus()===o.PROGRESS)return t;(!t.has()||t.file.getStatus()!==o.PROGRESS&&t.file.getStatus()!==o.INTERRUPT)&&this.stack.splice(--e,1)}return null},"_nextBlock":function(){var t,e,i,n,o=this,s=o.options;return(t=this._getStack())?(s.prepareNextFile&&!o.pending.length&&o._prepareNextFile(),t.shift()):o.runing?(!o.pending.length&&o._getStats().numOfQueue&&o._prepareNextFile(),e=o.pending.shift(),i=function(e){return e?(t=a(e,s.chunked?s.chunkSize:0),o.stack.push(t),t.shift()):null},r(e)?(n=e.file,e=e[e.pipe?"pipe":"then"](i),e.file=n,e):i(e)):void 0},"_prepareNextFile":function(){var t,e=this,i=e.request("fetch-file"),n=e.pending;i&&(t=e.request("before-send-file",i,function(){return i.getStatus()===o.PROGRESS||i.getStatus()===o.INTERRUPT?i:e._finishFile(i)}),e.owner.trigger("uploadStart",i),i.setStatus(o.PROGRESS),t.file=i,t.done(function(){var e=$.inArray(t,n);~e&&n.splice(e,1,i)}),t.fail(function(t){i.setStatus(o.ERROR,t),e.owner.trigger("uploadError",i,t),e.owner.trigger("uploadComplete",i)}),n.push(t))},"_popBlock":function(t){var e=$.inArray(t,this.pool);this.pool.splice(e,1),t.file.remaning--,this.remaning--},"_startSend":function(e){var i,n=this,a=e.file;if(a.getStatus()!==o.PROGRESS)return void(a.getStatus()===o.INTERRUPT&&n._putback(e));n.pool.push(e),n.remaning++,e.blob=1===e.chunks?a.source:a.source.slice(e.start,e.end),i=n.request("before-send",e,function(){a.getStatus()===o.PROGRESS?n._doSend(e):(n._popBlock(e),t.nextTick(n.__tick))}),i.fail(function(){1===a.remaning?n._finishFile(a).always(function(){e.percentage=1,n._popBlock(e),n.owner.trigger("uploadComplete",a),t.nextTick(n.__tick)}):(e.percentage=1,n.updateFileProgress(a),n._popBlock(e),t.nextTick(n.__tick))})},"_doSend":function(e){var i,a,r=this,s=r.owner,c=r.options,l=e.file,d=new n(c),u=$.extend({},c.formData),h=$.extend({},c.headers);e.transport=d,d.on("destroy",function(){delete e.transport,r._popBlock(e),t.nextTick(r.__tick)}),d.on("progress",function(t){e.percentage=t,r.updateFileProgress(l)}),i=function(t){var i;return a=d.getResponseAsJson()||{},a._raw=d.getResponse(),i=function(e){t=e},s.trigger("uploadAccept",e,a,i)||(t=t||"server"),t},d.on("error",function(t,n){e.retried=e.retried||0,e.chunks>1&&~"http,abort".indexOf(t)&&e.retried<c.chunkRetry?(e.retried++,d.send()):(n||"server"!==t||(t=i(t)),l.setStatus(o.ERROR,t),s.trigger("uploadError",l,t),s.trigger("uploadComplete",l))}),d.on("load",function(){var t;if(t=i())return void d.trigger("error",t,!0);1===l.remaning?r._finishFile(l,a):d.destroy()}),u=$.extend(u,{"id":l.id,"name":l.name,"type":l.type,"lastModifiedDate":l.lastModifiedDate,"size":l.size}),e.chunks>1&&$.extend(u,{"chunks":e.chunks,"chunk":e.chunk}),s.trigger("uploadBeforeSend",e,u,h),d.appendBlob(c.fileVal,e.blob,l.name),d.append(u),d.setRequestHeader(h),d.send()},"_finishFile":function(t,e,i){var n=this.owner;return n.request("after-send-file",arguments,function(){t.setStatus(o.COMPLETE),n.trigger("uploadSuccess",t,e,i)}).fail(function(e){t.getStatus()===o.PROGRESS&&t.setStatus(o.ERROR,e),n.trigger("uploadError",t,e)}).always(function(){n.trigger("uploadComplete",t)})},"updateFileProgress":function(t){var e=0,i=0;t.blocks&&($.each(t.blocks,function(t,e){i+=(e.percentage||0)*(e.end-e.start)}),e=i/t.size,this.owner.trigger("uploadProgress",t,e||0))}})}),e("widgets/validator",["base","uploader","file","widgets/widget"],function(t,e,i){var n,$=t.$,a={};return n={"addValidator":function(t,e){a[t]=e},"removeValidator":function(t){delete a[t]}},e.register({"name":"validator","init":function(){var e=this;t.nextTick(function(){$.each(a,function(){this.call(e.owner)})})}}),n.addValidator("fileNumLimit",function(){var t=this,e=t.options,i=0,n=parseInt(e.fileNumLimit,10),a=!0;n&&(t.on("beforeFileQueued",function(t){return i>=n&&a&&(a=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",n,t),setTimeout(function(){a=!0},1)),!(i>=n)}),t.on("fileQueued",function(){i++}),t.on("fileDequeued",function(){i--}),t.on("reset",function(){i=0}))}),n.addValidator("fileSizeLimit",function(){var t=this,e=t.options,i=0,n=parseInt(e.fileSizeLimit,10),a=!0;n&&(t.on("beforeFileQueued",function(t){var e=i+t.size>n;return e&&a&&(a=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",n,t),setTimeout(function(){a=!0},1)),!e}),t.on("fileQueued",function(t){i+=t.size}),t.on("fileDequeued",function(t){i-=t.size}),t.on("reset",function(){i=0}))}),n.addValidator("fileSingleSizeLimit",function(){var t=this,e=t.options,n=e.fileSingleSizeLimit;n&&t.on("beforeFileQueued",function(t){if(t.size>n)return t.setStatus(i.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",n,t),!1})}),n.addValidator("duplicate",function(){function t(t){for(var e,i=0,n=0,a=t.length;n<a;n++)e=t.charCodeAt(n),i=e+(i<<6)+(i<<16)-i;return i}var e=this,i=e.options,n={};i.duplicate||(e.on("beforeFileQueued",function(e){var i=e.__hash||(e.__hash=t(e.name+e.size+e.lastModifiedDate));if(n[i])return this.trigger("error","F_DUPLICATE",e),!1}),e.on("fileQueued",function(t){var e=t.__hash;e&&(n[e]=!0)}),e.on("fileDequeued",function(t){var e=t.__hash;e&&delete n[e]}),e.on("reset",function(){n={}}))}),n}),e("lib/md5",["runtime/client","mediator"],function(t,e){function i(){t.call(this,"Md5")}return e.installTo(i.prototype),i.prototype.loadFromBlob=function(t){var e=this;e.getRuid()&&e.disconnectRuntime(),e.connectRuntime(t.ruid,function(){e.exec("init"),e.exec("loadFromBlob",t)})},i.prototype.getResult=function(){return this.exec("getResult")},i}),e("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(t,e,i,n){return e.register({"name":"md5","md5File":function(e,a,r){var o=new i,s=t.Deferred(),c=e instanceof n?e:this.request("get-file",e).source;return o.on("progress load",function(t){t=t||{},s.notify(t.total?t.loaded/t.total:1)}),o.on("complete",function(){s.resolve(o.getResult())}),o.on("error",function(t){s.reject(t)}),arguments.length>1&&(a=a||0,r=r||0,a<0&&(a=c.size+a),r<0&&(r=c.size+r),r=Math.min(r,c.size),c=c.slice(a,r)),o.loadFromBlob(c),s.promise()}})}),e("runtime/compbase",[],function(){function t(t,e){this.owner=t,this.options=t.options,this.getRuntime=function(){return e},this.getRuid=function(){return e.uid},this.trigger=function(){return t.trigger.apply(t,arguments)}}return t}),e("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(e,i,n){function a(){var t={},n=this,a=this.destroy;i.apply(n,arguments),n.type=r,n.exec=function(i,a){var r,s=this,c=s.uid,l=e.slice(arguments,2);if(o[i]&&(r=t[c]=t[c]||new o[i](s,n),r[a]))return r[a].apply(r,l)},n.destroy=function(){return a&&a.apply(this,arguments)}}var r="html5",o={};return e.inherits(i,{"constructor":a,"init":function(){var t=this;setTimeout(function(){t.trigger("ready")},1)}}),a.register=function(t,i){return o[t]=e.inherits(n,i)},t.Blob&&t.FileReader&&t.DataView&&i.addRuntime(r,a),a}),e("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(t,e){return t.register("Blob",{"slice":function(t,i){var n=this.owner.source;return n=(n.slice||n.webkitSlice||n.mozSlice).call(n,t,i),new e(this.getRuid(),n)}})}),e("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(t,e,i){var $=t.$,n="webuploader-dnd-";return e.register("DragAndDrop",{"init":function(){var e=this.elem=this.options.container;this.dragEnterHandler=t.bindFn(this._dragEnterHandler,this),this.dragOverHandler=t.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=t.bindFn(this._dragLeaveHandler,this),this.dropHandler=t.bindFn(this._dropHandler,this),this.dndOver=!1,e.on("dragenter",this.dragEnterHandler),e.on("dragover",this.dragOverHandler),e.on("dragleave",this.dragLeaveHandler),e.on("drop",this.dropHandler),this.options.disableGlobalDnd&&($(document).on("dragover",this.dragOverHandler),$(document).on("drop",this.dropHandler))},"_dragEnterHandler":function(t){var e,i=this,a=i._denied||!1;return t=t.originalEvent||t,i.dndOver||(i.dndOver=!0,e=t.dataTransfer.items,e&&e.length&&(i._denied=a=!i.trigger("accept",e)),i.elem.addClass(n+"over"),i.elem[a?"addClass":"removeClass"](n+"denied")),t.dataTransfer.dropEffect=a?"none":"copy",!1},"_dragOverHandler":function(t){var e=this.elem.parent().get(0);return!(e&&!$.contains(e,t.currentTarget))&&(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,t),!1)},"_dragLeaveHandler":function(){var t,e=this;return t=function(){e.dndOver=!1,e.elem.removeClass(n+"over "+n+"denied")},clearTimeout(e._leaveTimer),e._leaveTimer=setTimeout(t,100),!1},"_dropHandler":function(t){var e,a,r=this,o=r.getRuid(),s=r.elem.parent().get(0);if(s&&!$.contains(s,t.currentTarget))return!1;t=t.originalEvent||t,e=t.dataTransfer;try{a=e.getData("text/html")}catch(t){}return a?void 0:(r._getTansferFiles(e,function(t){r.trigger("drop",$.map(t,function(t){return new i(o,t)}))}),r.dndOver=!1,r.elem.removeClass(n+"over"),!1)},"_getTansferFiles":function(e,i){var n,a,r,o,s,c,l,d=[],u=[];for(n=e.items,a=e.files,l=!(!n||!n[0].webkitGetAsEntry),s=0,c=a.length;s<c;s++)r=a[s],o=n&&n[s],l&&o.webkitGetAsEntry().isDirectory?u.push(this._traverseDirectoryTree(o.webkitGetAsEntry(),d)):d.push(r);t.when.apply(t,u).done(function(){d.length&&i(d)})},"_traverseDirectoryTree":function(e,i){var n=t.Deferred(),a=this;return e.isFile?e.file(function(t){i.push(t),n.resolve()}):e.isDirectory&&e.createReader().readEntries(function(e){var r,o=e.length,s=[],c=[];for(r=0;r<o;r++)s.push(a._traverseDirectoryTree(e[r],c));t.when.apply(t,s).then(function(){i.push.apply(i,c),n.resolve()},n.reject)}),n.promise()},"destroy":function(){var t=this.elem;t&&(t.off("dragenter",this.dragEnterHandler),t.off("dragover",this.dragOverHandler),t.off("dragleave",this.dragLeaveHandler),t.off("drop",this.dropHandler),this.options.disableGlobalDnd&&($(document).off("dragover",this.dragOverHandler),$(document).off("drop",this.dropHandler)))}})}),e("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(t,e,i){return e.register("FilePaste",{"init":function(){var e,i,n,a,r=this.options,o=this.elem=r.container,s=".*";if(r.accept){for(e=[],i=0,n=r.accept.length;i<n;i++)(a=r.accept[i].mimeTypes)&&e.push(a);e.length&&(s=e.join(","),s=s.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=s=new RegExp(s,"i"),this.hander=t.bindFn(this._pasteHander,this),o.on("paste",this.hander)},"_pasteHander":function(t){var e,n,a,r,o,s=[],c=this.getRuid();for(t=t.originalEvent||t,e=t.clipboardData.items,r=0,o=e.length;r<o;r++)n=e[r],"file"===n.kind&&(a=n.getAsFile())&&s.push(new i(c,a));s.length&&(t.preventDefault(),t.stopPropagation(),this.trigger("paste",s))},"destroy":function(){this.elem.off("paste",this.hander)}})}),e("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(t,e){var $=t.$;return e.register("FilePicker",{"init":function(){var t,e,i,n,a=this.getRuntime().getContainer(),r=this,o=r.owner,s=r.options,c=this.label=$(document.createElement("label")),l=this.input=$(document.createElement("input"));if(l.attr("type","file"),l.attr("name","file"),l.addClass("webuploader-element-invisible"),c.on("click",function(){l.trigger("click")}),c.css({"opacity":0,"width":"100%","height":"100%","display":"block","cursor":"pointer","background":"#ffffff"}),s.multiple&&l.attr("multiple","multiple"),s.accept&&s.accept.length>0){for(t=[],e=0,i=s.accept.length;e<i;e++)t.push(s.accept[e].mimeTypes);l.attr("accept",t.join(","))}a.append(l),a.append(c),n=function(t){o.trigger(t.type)},l.on("change",function(t){var e,i=arguments.callee;r.files=t.target.files,e=this.cloneNode(!0),e.value=null,this.parentNode.replaceChild(e,this),l.off(),l=$(e).on("change",i).on("mouseenter mouseleave",n),o.trigger("change")}),c.on("mouseenter mouseleave",n)},"getFiles":function(){return this.files},"destroy":function(){this.input.off(),this.label.off()}})}),e("runtime/html5/util",["base"],function(e){var i=t.createObjectURL&&t||t.URL&&URL.revokeObjectURL&&URL||t.webkitURL,n=e.noop,a=n;return i&&(n=function(){return i.createObjectURL.apply(i,arguments)},a=function(){return i.revokeObjectURL.apply(i,arguments)}),{"createObjectURL":n,"revokeObjectURL":a,"dataURL2Blob":function(t){var e,i,n,a,r,o;for(o=t.split(","),e=~o[0].indexOf("base64")?atob(o[1]):decodeURIComponent(o[1]),n=new ArrayBuffer(e.length),i=new Uint8Array(n),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return r=o[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(n,r)},"dataURL2ArrayBuffer":function(t){var e,i,n,a;for(a=t.split(","),e=~a[0].indexOf("base64")?atob(a[1]):decodeURIComponent(a[1]),i=new Uint8Array(e.length),n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i.buffer},"arrayBufferToBlob":function(e,i){var n,a=t.BlobBuilder||t.WebKitBlobBuilder;return a?(n=new a,n.append(e),n.getBlob(i)):new Blob([e],i?{"type":i}:{})},"canvasToDataUrl":function(t,e,i){return t.toDataURL(e,i/100)},"parseMeta":function(t,e){e(!1,{})},"updateImageHead":function(t){return t}}}),e("runtime/html5/imagemeta",["runtime/html5/util"],function(t){var e;return e={"parsers":{"65505":[]},"maxMetaDataSize":262144,"parse":function(t,e){var i=this,n=new FileReader;n.onload=function(){e(!1,i._parse(this.result)),n=n.onload=n.onerror=null},n.onerror=function(t){e(t.message),n=n.onload=n.onerror=null},t=t.slice(0,i.maxMetaDataSize),n.readAsArrayBuffer(t.getSource())},"_parse":function(t,i){if(!(t.byteLength<6)){var n,a,r,o,s=new DataView(t),c=2,l=s.byteLength-4,d=c,u={};if(65496===s.getUint16(0)){for(;c<l&&((n=s.getUint16(c))>=65504&&n<=65519||65534===n)&&(a=s.getUint16(c+2)+2,!(c+a>s.byteLength));){if(r=e.parsers[n],!i&&r)for(o=0;o<r.length;o+=1)r[o].call(e,s,c,a,u);c+=a,d=c}d>6&&(t.slice?u.imageHead=t.slice(2,d):u.imageHead=new Uint8Array(t).subarray(2,d))}return u}},"updateImageHead":function(t,e){var i,n,a,r=this._parse(t,!0);return a=2,r.imageHead&&(a=2+r.imageHead.byteLength),n=t.slice?t.slice(a):new Uint8Array(t).subarray(a),i=new Uint8Array(e.byteLength+2+n.byteLength),i[0]=255,i[1]=216,i.set(new Uint8Array(e),2),i.set(new Uint8Array(n),e.byteLength+2),i.buffer}},t.parseMeta=function(){return e.parse.apply(e,arguments)},t.updateImageHead=function(){return e.updateImageHead.apply(e,arguments)},e}),e("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(t,e){var i={};return i.ExifMap=function(){return this},i.ExifMap.prototype.map={"Orientation":274},i.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},i.exifTagTypes={"1":{"getValue":function(t,e){return t.getUint8(e)},"size":1},"2":{"getValue":function(t,e){return String.fromCharCode(t.getUint8(e))},"size":1,"ascii":!0},"3":{"getValue":function(t,e,i){return t.getUint16(e,i)},"size":2},"4":{"getValue":function(t,e,i){return t.getUint32(e,i)},"size":4},"5":{"getValue":function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},"size":8},"9":{"getValue":function(t,e,i){return t.getInt32(e,i)},"size":4},"10":{"getValue":function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},"size":8}},i.exifTagTypes[7]=i.exifTagTypes[1],i.getExifValue=function(e,n,a,r,o,s){var c,l,d,u,h,p,f=i.exifTagTypes[r];if(!f)return void t.log("Invalid Exif data: Invalid tag type.");if(c=f.size*o,(l=c>4?n+e.getUint32(a+8,s):a+8)+c>e.byteLength)return void t.log("Invalid Exif data: Invalid data offset.");if(1===o)return f.getValue(e,l,s);for(d=[],u=0;u<o;u+=1)d[u]=f.getValue(e,l+u*f.size,s);if(f.ascii){for(h="",u=0;u<d.length&&"\0"!==(p=d[u]);u+=1)h+=p;return h}return d},i.parseExifTag=function(t,e,n,a,r){var o=t.getUint16(n,a);r.exif[o]=i.getExifValue(t,e,n,t.getUint16(n+2,a),t.getUint32(n+4,a),a)},i.parseExifTags=function(e,i,n,a,r){var o,s,c;if(n+6>e.byteLength)return void t.log("Invalid Exif data: Invalid directory offset.");if(o=e.getUint16(n,a),(s=n+2+12*o)+4>e.byteLength)return void t.log("Invalid Exif data: Invalid directory size.");for(c=0;c<o;c+=1)this.parseExifTag(e,i,n+2+12*c,a,r);return e.getUint32(s,a)},i.parseExifData=function(e,n,a,r){var o,s,c=n+10;if(1165519206===e.getUint32(n+4)){if(c+8>e.byteLength)return void t.log("Invalid Exif data: Invalid segment size.");if(0!==e.getUint16(n+8))return void t.log("Invalid Exif data: Missing byte alignment offset.");switch(e.getUint16(c)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void t.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==e.getUint16(c+2,o))return void t.log("Invalid Exif data: Missing TIFF marker.");s=e.getUint32(c+4,o),r.exif=new i.ExifMap,s=i.parseExifTags(e,c,c+s,o,r)}},e.parsers[65505].push(i.parseExifData),i}),e("runtime/html5/jpegencoder",[],function(require,exports,t){function e(t){function e(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],i=0;i<64;i++){var n=S((e[i]*t+50)/100);n<1?n=1:n>255&&(n=255),I[F[i]]=n}for(var a=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],r=0;r<64;r++){var o=S((a[r]*t+50)/100);o<1?o=1:o>255&&(o=255),k[F[r]]=o}for(var s=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],c=0,l=0;l<8;l++)for(var d=0;d<8;d++)T[c]=1/(I[F[c]]*s[l]*s[d]*8),C[c]=1/(k[F[c]]*s[l]*s[d]*8),c++}function i(t,e){for(var i=0,n=0,a=new Array,r=1;r<=16;r++){for(var o=1;o<=t[r];o++)a[e[n]]=[],a[e[n]][0]=i,a[e[n]][1]=r,n++,i++;i*=2}return a}function n(){b=i(N,O),y=i(Y,Q),x=i(M,X),w=i(W,G)}function a(){for(var t=1,e=2,i=1;i<=15;i++){for(var n=t;n<e;n++)P[32767+n]=i,E[32767+n]=[],E[32767+n][1]=i,E[32767+n][0]=n;for(var a=-(e-1);a<=-t;a++)P[32767+a]=i,E[32767+a]=[],E[32767+a][1]=i,E[32767+a][0]=e-1+a;t<<=1,e<<=1}}function r(){for(var t=0;t<256;t++)H[t]=19595*t,H[t+256>>0]=38470*t,H[t+512>>0]=7471*t+32768,H[t+768>>0]=-11059*t,H[t+1024>>0]=-21709*t,H[t+1280>>0]=32768*t+8421375,H[t+1536>>0]=-27439*t,H[t+1792>>0]=-5329*t}function o(t){for(var e=t[0],i=t[1]-1;i>=0;)e&1<<i&&(q|=1<<L),i--,--L<0&&(255==q?(s(255),s(0)):s(q),L=7,q=0)}function s(t){B.push(z[t])}function c(t){s(t>>8&255),s(255&t)}function l(t,e){var i,n,a,r,o,s,c,l,d,u=0;for(d=0;d<8;++d){i=t[u],n=t[u+1],a=t[u+2],r=t[u+3],o=t[u+4],s=t[u+5],c=t[u+6],l=t[u+7];var h=i+l,p=i-l,f=n+c,m=n-c,g=a+s,v=a-s,b=r+o,y=r-o,x=h+b,w=h-b,_=f+g,S=f-g;t[u]=x+_,t[u+4]=x-_;var I=.707106781*(S+w);t[u+2]=w+I,t[u+6]=w-I,x=y+v,_=v+m,S=m+p;var k=.382683433*(x-S),T=.5411961*x+k,C=1.306562965*S+k,E=.707106781*_,P=p+E,U=p-E;t[u+5]=U+T,t[u+3]=U-T,t[u+1]=P+C,t[u+7]=P-C,u+=8}for(u=0,d=0;d<8;++d){i=t[u],n=t[u+8],a=t[u+16],r=t[u+24],o=t[u+32],s=t[u+40],c=t[u+48],l=t[u+56];var B=i+l,q=i-l,L=n+c,A=n-c,j=a+s,D=a-s,z=r+o,H=r-o,F=B+z,N=B-z,O=L+j,M=L-j;t[u]=F+O,t[u+32]=F-O;var X=.707106781*(M+N);t[u+16]=N+X,t[u+48]=N-X,F=H+D,O=D+A,M=A+q;var Y=.382683433*(F-M),Q=.5411961*F+Y,W=1.306562965*M+Y,G=.707106781*O,V=q+G,K=q-G;t[u+40]=K+Q,t[u+24]=K-Q,t[u+8]=V+W,t[u+56]=V-W,u++}var J;for(d=0;d<64;++d)J=t[d]*e[d],R[d]=J>0?J+.5|0:J-.5|0;return R}function d(){c(65504),c(16),s(74),s(70),s(73),s(70),s(0),s(1),s(1),s(0),c(1),c(1),s(0),s(0)}function u(t,e){c(65472),c(17),s(8),c(e),c(t),s(3),s(1),s(17),s(0),s(2),s(17),s(1),s(3),s(17),s(1)}function h(){c(65499),c(132),s(0);for(var t=0;t<64;t++)s(I[t]);s(1);for(var e=0;e<64;e++)s(k[e])}function p(){c(65476),c(418),s(0);for(var t=0;t<16;t++)s(N[t+1]);for(var e=0;e<=11;e++)s(O[e]);s(16);for(var i=0;i<16;i++)s(M[i+1]);for(var n=0;n<=161;n++)s(X[n]);s(1);for(var a=0;a<16;a++)s(Y[a+1]);for(var r=0;r<=11;r++)s(Q[r]);s(17);for(var o=0;o<16;o++)s(W[o+1]);for(var l=0;l<=161;l++)s(G[l])}function f(){c(65498),c(12),s(3),s(1),s(0),s(2),s(17),s(3),s(17),s(0),s(63),s(0)}function m(t,e,i,n,a){for(var r,s=a[0],c=a[240],d=l(t,e),u=0;u<64;++u)U[F[u]]=d[u];var h=U[0]-i;i=U[0],0==h?o(n[0]):(r=32767+h,o(n[P[r]]),o(E[r]));for(var p=63;p>0&&0==U[p];p--);if(0==p)return o(s),i;for(var f,m=1;m<=p;){for(var g=m;0==U[m]&&m<=p;++m);var v=m-g;if(v>=16){f=v>>4;for(var b=1;b<=f;++b)o(c);v&=15}r=32767+U[m],o(a[(v<<4)+P[r]]),o(E[r]),m++}return 63!=p&&o(s),i}function g(){for(var t=String.fromCharCode,e=0;e<256;e++)z[e]=t(e)}function v(t){if(t<=0&&(t=1),t>100&&(t=100),_!=t){var i=0;i=t<50?Math.floor(5e3/t):Math.floor(200-2*t),e(i),_=t}}var b,y,x,w,_,S=(Math.round,Math.floor),I=new Array(64),k=new Array(64),T=new Array(64),C=new Array(64),E=new Array(65535),P=new Array(65535),R=new Array(64),U=new Array(64),B=[],q=0,L=7,A=new Array(64),j=new Array(64),D=new Array(64),z=new Array(256),H=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],X=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Y=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(t,e){e&&v(e),B=new Array,q=0,L=7,c(65496),d(),h(),u(t.width,t.height),p(),f();var i=0,n=0,a=0;q=0,L=7,this.encode.displayName="_encode_";for(var r,s,l,g,_,S,I,k,E,P=t.data,R=t.width,U=t.height,z=4*R,F=0;F<U;){for(r=0;r<z;){for(_=z*F+r,S=_,I=-1,k=0,E=0;E<64;E++)k=E>>3,I=4*(7&E),S=_+k*z+I,F+k>=U&&(S-=z*(F+1+k-U)),r+I>=z&&(S-=r+I-z+4),s=P[S++],l=P[S++],g=P[S++],A[E]=(H[s]+H[l+256>>0]+H[g+512>>0]>>16)-128,j[E]=(H[s+768>>0]+H[l+1024>>0]+H[g+1280>>0]>>16)-128,D[E]=(H[s+1280>>0]+H[l+1536>>0]+H[g+1792>>0]>>16)-128;i=m(A,T,i,b,x),n=m(j,C,n,y,w),a=m(D,C,a,y,w),r+=32}F+=8}if(L>=0){var N=[];N[1]=L+1,N[0]=(1<<L+1)-1,o(N)}c(65497);var O="data:image/jpeg;base64,"+btoa(B.join(""));return B=[],O},function(){t||(t=50),g(),n(),a(),r(),v(t)}()}return e.encode=function(t,i){return new e(i).encode(t)},e}),e("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(t,e,i){var n,a=t.canvasToDataUrl;t.canvasToDataUrl=function(t,r,o){var s,c,l,d,u;return i.os.android?("image/jpeg"===r&&void 0===n&&(d=a.apply(null,arguments),u=d.split(","),d=~u[0].indexOf("base64")?atob(u[1]):decodeURIComponent(u[1]),d=d.substring(0,2),n=255===d.charCodeAt(0)&&216===d.charCodeAt(1)),"image/jpeg"!==r||n?a.apply(null,arguments):(c=t.width,l=t.height,s=t.getContext("2d"),e.encode(s.getImageData(0,0,c,l),o))):a.apply(null,arguments)}}),e("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(t,e,i){return e.register("Image",{"modified":!1,"init":function(){var t=this,e=new Image;e.onload=function(){t._info={"type":t.type,"width":this.width,"height":this.height},t._metas||"image/jpeg"!==t.type?t.owner.trigger("load"):i.parseMeta(t._blob,function(e,i){t._metas=i,t.owner.trigger("load")})},e.onerror=function(){t.owner.trigger("error")},t._img=e},"loadFromBlob":function(t){var e=this,n=e._img;e._blob=t,e.type=t.type,n.src=i.createObjectURL(t.getSource()),e.owner.once("load",function(){i.revokeObjectURL(n.src)})},"resize":function(t,e){var i=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,i,t,e),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},"crop":function(t,e,i,n,a){var r=this._canvas||(this._canvas=document.createElement("canvas")),o=this.options,s=this._img,c=s.naturalWidth,l=s.naturalHeight,d=this.getOrientation();a=a||1,r.width=i,r.height=n,o.preserveHeaders||this._rotate2Orientaion(r,d),this._renderImageToCanvas(r,s,-t,-e,c*a,l*a),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},"getAsBlob":function(t){var e,n=this._blob,a=this.options;if(t=t||this.type,this.modified||this.type!==t){if(e=this._canvas,"image/jpeg"===t){if(n=i.canvasToDataUrl(e,t,a.quality),a.preserveHeaders&&this._metas&&this._metas.imageHead)return n=i.dataURL2ArrayBuffer(n),n=i.updateImageHead(n,this._metas.imageHead),n=i.arrayBufferToBlob(n,t)}else n=i.canvasToDataUrl(e,t);n=i.dataURL2Blob(n)}return n},"getAsDataUrl":function(t){var e=this.options;return t=t||this.type,"image/jpeg"===t?i.canvasToDataUrl(this._canvas,t,e.quality):this._canvas.toDataURL(t)},"getOrientation":function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},"info":function(t){return t?(this._info=t,this):this._info},"meta":function(t){return t?(this._meta=t,this):this._meta},"destroy":function(){var t=this._canvas;this._img.onload=null,t&&(t.getContext("2d").clearRect(0,0,t.width,t.height),t.width=t.height=0,this._canvas=null),this._img.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",this._img=this._blob=null},"_resize":function(t,e,i,n){var a,r,o,s,c,l=this.options,d=t.width,u=t.height,h=this.getOrientation();~[5,6,7,8].indexOf(h)&&(i^=n,n^=i,i^=n),a=Math[l.crop?"max":"min"](i/d,n/u),l.allowMagnify||(a=Math.min(1,a)),r=d*a,o=u*a,l.crop?(e.width=i,e.height=n):(e.width=r,e.height=o),s=(e.width-r)/2,c=(e.height-o)/2,l.preserveHeaders||this._rotate2Orientaion(e,h),this._renderImageToCanvas(e,t,s,c,r,o)},"_rotate2Orientaion":function(t,e){var i=t.width,n=t.height,a=t.getContext("2d");switch(e){case 5:case 6:case 7:case 8:t.width=n,t.height=i}switch(e){case 2:a.translate(i,0),a.scale(-1,1);break;case 3:a.translate(i,n),a.rotate(Math.PI);break;case 4:a.translate(0,n),a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI),a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI),a.translate(0,-n);break;case 7:a.rotate(.5*Math.PI),a.translate(i,-n),a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-i,0)}},"_renderImageToCanvas":function(){function e(t,e,i){var n,a,r,o=document.createElement("canvas"),s=o.getContext("2d"),c=0,l=i,d=i;for(o.width=1,o.height=i,s.drawImage(t,0,0),n=s.getImageData(0,0,1,i).data;d>c;)a=n[4*(d-1)+3],0===a?l=d:c=d,d=l+c>>1;return r=d/i,0===r?1:r}function i(t){var e,i,n=t.naturalWidth,a=t.naturalHeight;return n*a>1048576&&(e=document.createElement("canvas"),e.width=e.height=1,i=e.getContext("2d"),i.drawImage(t,1-n,0),0===i.getImageData(0,0,1,1).data[3])}return t.os.ios?t.os.ios>=7?function(t,i,n,a,r,o){var s=i.naturalWidth,c=i.naturalHeight,l=e(i,s,c);return t.getContext("2d").drawImage(i,0,0,s*l,c*l,n,a,r,o)}:function(t,n,a,r,o,s){var c,l,d,u,h,p,f,m=n.naturalWidth,g=n.naturalHeight,v=t.getContext("2d"),b=i(n),y="image/jpeg"===this.type,x=1024,w=0,_=0;for(b&&(m/=2,g/=2),v.save(),c=document.createElement("canvas"),c.width=c.height=x,l=c.getContext("2d"),d=y?e(n,m,g):1,u=Math.ceil(x*o/m),h=Math.ceil(x*s/g/d);w<g;){for(p=0,f=0;p<m;)l.clearRect(0,0,x,x),l.drawImage(n,-p,-w),v.drawImage(c,0,0,x,x,a+f,r+_,u,h),p+=x,f+=u;w+=x,_+=h}v.restore(),c=l=null}:function(e){var i=t.slice(arguments,1),n=e.getContext("2d");n.drawImage.apply(n,i)}}()})}),e("runtime/html5/transport",["base","runtime/html5/runtime"],function(t,e){var i=t.noop,$=t.$;return e.register("Transport",{"init":function(){this._status=0,this._response=null},"send":function(){var e,i,n,a=this.owner,r=this.options,o=this._initAjax(),s=a._blob,c=r.server;r.sendAsBinary?(c+=(/\?/.test(c)?"&":"?")+$.param(a._formData),i=s.getSource()):(e=new FormData,$.each(a._formData,function(t,i){e.append(t,i)}),e.append(r.fileVal,s.getSource(),r.filename||a._formData.name||"")),r.withCredentials&&"withCredentials"in o?(o.open(r.method,c,!0),o.withCredentials=!0):o.open(r.method,c),this._setRequestHeader(o,r.headers),i?(o.overrideMimeType&&o.overrideMimeType("application/octet-stream"),t.os.android?(n=new FileReader,n.onload=function(){o.send(this.result),n=n.onload=null},n.readAsArrayBuffer(i)):o.send(i)):o.send(e)},"getResponse":function(){return this._response},"getResponseAsJson":function(){return this._parseJson(this._response)},"getStatus":function(){return this._status},"abort":function(){var t=this._xhr;t&&(t.upload.onprogress=i,t.onreadystatechange=i,t.abort(),this._xhr=t=null)},"destroy":function(){this.abort()},"_initAjax":function(){var t=this,e=new XMLHttpRequest;return!this.options.withCredentials||"withCredentials"in e||"undefined"==typeof XDomainRequest||(e=new XDomainRequest),e.upload.onprogress=function(e){var i=0;return e.lengthComputable&&(i=e.loaded/e.total),t.trigger("progress",i)},e.onreadystatechange=function(){if(4===e.readyState)return e.upload.onprogress=i,e.onreadystatechange=i,t._xhr=null,t._status=e.status,e.status>=200&&e.status<300?(t._response=e.responseText,t.trigger("load")):e.status>=500&&e.status<600?(t._response=e.responseText,t.trigger("error","server")):t.trigger("error",t._status?"http":"abort")},t._xhr=e,e},"_setRequestHeader":function(t,e){$.each(e,function(e,i){t.setRequestHeader(e,i)})},"_parseJson":function(t){var e;try{e=JSON.parse(t)}catch(t){e={}}return e}})}),e("runtime/html5/md5",["runtime/html5/runtime"],function(t){var e=function(t,e){return t+e&4294967295},i=function(t,i,n,a,r,o){return i=e(e(i,t),e(a,o)),e(i<<r|i>>>32-r,n)},n=function(t,e,n,a,r,o,s){return i(e&n|~e&a,t,e,r,o,s)},a=function(t,e,n,a,r,o,s){return i(e&a|n&~a,t,e,r,o,s)},r=function(t,e,n,a,r,o,s){return i(e^n^a,t,e,r,o,s)},o=function(t,e,n,a,r,o,s){return i(n^(e|~a),t,e,r,o,s)},s=function(t,i){var s=t[0],c=t[1],l=t[2],d=t[3];s=n(s,c,l,d,i[0],7,-680876936),d=n(d,s,c,l,i[1],12,-389564586),l=n(l,d,s,c,i[2],17,606105819),c=n(c,l,d,s,i[3],22,-1044525330),s=n(s,c,l,d,i[4],7,-176418897),d=n(d,s,c,l,i[5],12,1200080426),l=n(l,d,s,c,i[6],17,-1473231341),c=n(c,l,d,s,i[7],22,-45705983),s=n(s,c,l,d,i[8],7,1770035416),d=n(d,s,c,l,i[9],12,-1958414417),l=n(l,d,s,c,i[10],17,-42063),c=n(c,l,d,s,i[11],22,-1990404162),s=n(s,c,l,d,i[12],7,1804603682),d=n(d,s,c,l,i[13],12,-40341101),l=n(l,d,s,c,i[14],17,-1502002290),c=n(c,l,d,s,i[15],22,1236535329),s=a(s,c,l,d,i[1],5,-165796510),d=a(d,s,c,l,i[6],9,-1069501632),l=a(l,d,s,c,i[11],14,643717713),c=a(c,l,d,s,i[0],20,-373897302),s=a(s,c,l,d,i[5],5,-701558691),d=a(d,s,c,l,i[10],9,38016083),l=a(l,d,s,c,i[15],14,-660478335),c=a(c,l,d,s,i[4],20,-405537848),s=a(s,c,l,d,i[9],5,568446438),d=a(d,s,c,l,i[14],9,-1019803690),l=a(l,d,s,c,i[3],14,-187363961),c=a(c,l,d,s,i[8],20,1163531501),s=a(s,c,l,d,i[13],5,-1444681467),d=a(d,s,c,l,i[2],9,-51403784),l=a(l,d,s,c,i[7],14,1735328473),c=a(c,l,d,s,i[12],20,-1926607734),s=r(s,c,l,d,i[5],4,-378558),d=r(d,s,c,l,i[8],11,-2022574463),l=r(l,d,s,c,i[11],16,1839030562),c=r(c,l,d,s,i[14],23,-35309556),s=r(s,c,l,d,i[1],4,-1530992060),d=r(d,s,c,l,i[4],11,1272893353),l=r(l,d,s,c,i[7],16,-155497632),c=r(c,l,d,s,i[10],23,-1094730640),s=r(s,c,l,d,i[13],4,681279174),d=r(d,s,c,l,i[0],11,-358537222),l=r(l,d,s,c,i[3],16,-722521979),c=r(c,l,d,s,i[6],23,76029189),s=r(s,c,l,d,i[9],4,-640364487),d=r(d,s,c,l,i[12],11,-421815835),l=r(l,d,s,c,i[15],16,530742520),c=r(c,l,d,s,i[2],23,-995338651),s=o(s,c,l,d,i[0],6,-198630844),d=o(d,s,c,l,i[7],10,1126891415),l=o(l,d,s,c,i[14],15,-1416354905),c=o(c,l,d,s,i[5],21,-57434055),s=o(s,c,l,d,i[12],6,1700485571),d=o(d,s,c,l,i[3],10,-1894986606),l=o(l,d,s,c,i[10],15,-1051523),c=o(c,l,d,s,i[1],21,-2054922799),s=o(s,c,l,d,i[8],6,1873313359),d=o(d,s,c,l,i[15],10,-30611744),l=o(l,d,s,c,i[6],15,-1560198380),c=o(c,l,d,s,i[13],21,1309151649),s=o(s,c,l,d,i[4],6,-145523070),d=o(d,s,c,l,i[11],10,-1120210379),l=o(l,d,s,c,i[2],15,718787259),c=o(c,l,d,s,i[9],21,-343485551),t[0]=e(s,t[0]),t[1]=e(c,t[1]),t[2]=e(l,t[2]),t[3]=e(d,t[3])},c=function(t){var e,i=[];for(e=0;e<64;e+=4)i[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return i},l=function(t){var e,i=[];for(e=0;e<64;e+=4)i[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return i},d=function(t){var e,i,n,a,r,o,l=t.length,d=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=l;e+=64)s(d,c(t.substring(e-64,e)));for(t=t.substring(e-64),i=t.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)n[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(n[e>>2]|=128<<(e%4<<3),e>55)for(s(d,n),e=0;e<16;e+=1)n[e]=0;return a=8*l,a=a.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(a[2],16),o=parseInt(a[1],16)||0,n[14]=r,n[15]=o,s(d,n),d},u=function(t){var e,i,n,a,r,o,c=t.length,d=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)s(d,l(t.subarray(e-64,e)));for(t=e-64<c?t.subarray(e-64):new Uint8Array(0),i=t.length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)n[e>>2]|=t[e]<<(e%4<<3);if(n[e>>2]|=128<<(e%4<<3),e>55)for(s(d,n),e=0;e<16;e+=1)n[e]=0;return a=8*c,a=a.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(a[2],16),o=parseInt(a[1],16)||0,n[14]=r,n[15]=o,s(d,n),d},h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p=function(t){var e,i="";for(e=0;e<4;e+=1)i+=h[t>>8*e+4&15]+h[t>>8*e&15];return i},f=function(t){var e;for(e=0;e<t.length;e+=1)t[e]=p(t[e]);return t.join("")},m=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==function(t){return f(d(t))}("hello")&&(e=function(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}),m.prototype.append=function(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),this.appendBinary(t),this},m.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,i=this._buff.length;for(e=64;e<=i;e+=64)s(this._state,c(this._buff.substring(e-64,e)));return this._buff=this._buff.substr(e-64),this},m.prototype.end=function(t){var e,i,n=this._buff,a=n.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<a;e+=1)r[e>>2]|=n.charCodeAt(e)<<(e%4<<3);return this._finish(r,a),i=t?this._state:f(this._state),this.reset(),i},m.prototype._finish=function(t,e){var i,n,a,r=e;if(t[r>>2]|=128<<(r%4<<3),r>55)for(s(this._state,t),r=0;r<16;r+=1)t[r]=0;i=8*this._length,i=i.toString(16).match(/(.*?)(.{0,8})$/),n=parseInt(i[2],16),a=parseInt(i[1],16)||0,t[14]=n,t[15]=a,s(this._state,t)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(t,e){/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t)));var i=d(t);return e?i:f(i)},m.hashBinary=function(t,e){var i=d(t);return e?i:f(i)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(t){var e,i=this._concatArrayBuffer(this._buff,t),n=i.length;for(this._length+=t.byteLength,e=64;e<=n;e+=64)s(this._state,l(i.subarray(e-64,e)));return this._buff=e-64<n?i.subarray(e-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(t){var e,i,n=this._buff,a=n.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<a;e+=1)r[e>>2]|=n[e]<<(e%4<<3);return this._finish(r,a),i=t?this._state:f(this._state),this.reset(),i},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(t,e){var i=t.length,n=new Uint8Array(i+e.byteLength);return n.set(t),n.set(new Uint8Array(e),i),n},m.ArrayBuffer.hash=function(t,e){var i=u(new Uint8Array(t));return e?i:f(i)},t.register("Md5",{"init":function(){},"loadFromBlob":function(t){var e,i,n=t.getSource(),a=Math.ceil(n.size/2097152),r=0,o=this.owner,s=new m.ArrayBuffer,c=this,l=n.mozSlice||n.webkitSlice||n.slice;i=new FileReader,(e=function(){var d,u;d=2097152*r,u=Math.min(d+2097152,n.size),i.onload=function(e){s.append(e.target.result),o.trigger("progress",{"total":t.size,"loaded":u})},i.onloadend=function(){i.onloadend=i.onload=null,++r<a?setTimeout(e,1):setTimeout(function(){o.trigger("load"),c.result=s.end(),e=t=n=s=null,o.trigger("complete")},50)},i.readAsArrayBuffer(l.call(n,d,u))})()},"getResult":function(){return this.result}})}),e("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(e,i,n){function a(){function n(t,e){var i,n,a=t.type||t;i=a.split("::"),n=i[0],a=i[1],"Ready"===a&&n===l.uid?l.trigger("ready"):s[n]&&s[n].trigger(a.toLowerCase(),t,e)}var a={},s={},c=this.destroy,l=this,d=e.guid("webuploader_");i.apply(l,arguments),l.type=r,l.exec=function(t,i){var n,r=this,c=r.uid,d=e.slice(arguments,2);return s[c]=r,o[t]&&(a[c]||(a[c]=new o[t](r,l)),n=a[c],n[i])?n[i].apply(n,d):l.flashExec.apply(r,arguments)},t[d]=function(){var t=arguments;setTimeout(function(){n.apply(null,t)},1)},this.jsreciver=d,this.destroy=function(){return c&&c.apply(this,arguments)},this.flashExec=function(t,i){var n=l.getFlash(),a=e.slice(arguments,2);return n.exec(this.uid,t,i,a)}}var $=e.$,r="flash",o={};return e.inherits(i,{"constructor":a,"init":function(){var t,i=this.getContainer(),n=this.options;i.css({"position":"absolute","top":"-8px","left":"-8px","width":"9px","height":"9px","overflow":"hidden"}),t='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+n.swf+'" ',e.browser.ie&&(t+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),t+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',i.html(t)},"getFlash":function(){return this._flash?this._flash:(this._flash=$("#"+this.uid).get(0),this._flash)}}),a.register=function(t,i){return i=o[t]=e.inherits(n,$.extend({"flashExec":function(){var t=this.owner;return this.getRuntime().flashExec.apply(t,arguments)}},i))},function(){var t;try{t=navigator.plugins["Shockwave Flash"],t=t.description}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){t="0.0"}}return t=t.match(/\d+/g),parseFloat(t[0]+"."+t[1],10)}()>=11.4&&i.addRuntime(r,a),a}),e("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(t,e){var $=t.$;return e.register("FilePicker",{"init":function(t){var e,i,n=$.extend({},t);for(e=n.accept&&n.accept.length,i=0;i<e;i++)n.accept[i].title||(n.accept[i].title="Files");delete n.button,delete n.id,delete n.container,this.flashExec("FilePicker","init",n)},"destroy":function(){this.flashExec("FilePicker","destroy")}})}),e("runtime/flash/image",["runtime/flash/runtime"],function(t){return t.register("Image",{"loadFromBlob":function(t){var e=this.owner;e.info()&&this.flashExec("Image","info",e.info()),e.meta()&&this.flashExec("Image","meta",e.meta()),this.flashExec("Image","loadFromBlob",t.uid)}})}),e("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(e,i,n){var $=e.$;return i.register("Transport",{"init":function(){this._status=0,this._response=null,this._responseJson=null},"send":function(){var t,e=this.owner,i=this.options,n=this._initAjax(),a=e._blob,r=i.server;n.connectRuntime(a.ruid),i.sendAsBinary?(r+=(/\?/.test(r)?"&":"?")+$.param(e._formData),t=a.uid):($.each(e._formData,function(t,e){n.exec("append",t,e)}),n.exec("appendBlob",i.fileVal,a.uid,i.filename||e._formData.name||"")),this._setRequestHeader(n,i.headers),n.exec("send",{"method":i.method,"url":r,"forceURLStream":i.forceURLStream,"mimeType":"application/octet-stream"},t)},"getStatus":function(){return this._status},"getResponse":function(){return this._response||""},"getResponseAsJson":function(){return this._responseJson},"abort":function(){var t=this._xhr;t&&(t.exec("abort"),t.destroy(),this._xhr=t=null)},"destroy":function(){this.abort()},"_initAjax":function(){var e=this,i=new n("XMLHttpRequest");return i.on("uploadprogress progress",function(t){var i=t.loaded/t.total;return i=Math.min(1,Math.max(0,i)),e.trigger("progress",i)}),i.on("load",function(){var n,a=i.exec("getStatus"),r=!1,o="";return i.off(),e._xhr=null,a>=200&&a<300?r=!0:a>=500&&a<600?(r=!0,o="server"):o="http",r&&(e._response=i.exec("getResponse"),e._response=decodeURIComponent(e._response),n=t.JSON&&t.JSON.parse||function(t){try{return new Function("return "+t).call()}catch(t){return{}}},e._responseJson=e._response?n(e._response):{}),i.destroy(),i=null,o?e.trigger("error",o):e.trigger("load")}),i.on("error",function(){i.off(),e._xhr=null,e.trigger("error","http")}),e._xhr=i,i},"_setRequestHeader":function(t,e){$.each(e,function(e,i){t.exec("setRequestHeader",e,i)})}})}),e("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(t,e){return t.register("Blob",{"slice":function(t,i){var n=this.flashExec("Blob","slice",t,i);return new e(n.uid,n)}})}),e("runtime/flash/md5",["runtime/flash/runtime"],function(t){return t.register("Md5",{"init":function(){},"loadFromBlob":function(t){return this.flashExec("Md5","loadFromBlob",t.uid)}})}),e("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(t){return t}),e("widgets/log",["base","uploader","widgets/widget"],function(t,e){function i(t){var e=$.extend({},n,t),i=a.replace(/^(.*)\?/,"$1"+$.param(e));(new Image).src=i}var n,$=t.$,a=" http://static.tieba.baidu.com/tb/pms/img/st.gif??",r=(location.hostname||location.host||"protected").toLowerCase(),o=r&&/baidu/i.exec(r);if(o)return n={"dv":3,"master":"webuploader","online":/test/.exec(r)?0:1,"module":"","product":r,"type":0},e.register({"name":"log","init":function(){var t=this.owner,e=0,n=0;t.on("error",function(t){i({"type":2,"c_error_code":t})}).on("uploadError",function(t,e){i({"type":2,"c_error_code":"UPLOAD_ERROR","c_reason":""+e})}).on("uploadComplete",function(t){e++,n+=t.size}).on("uploadFinished",function(){i({"c_count":e,"c_size":n}),e=n=0}),i({"c_usage":1})}})}),e("webuploader",["preset/all","widgets/log"],function(t){return t}),require("webuploader")})}).call(exports,e(0))},"13":function(t,exports,e){"use strict";(function($){var e=/^https?:/i,i=/^http/i,n=/\.(jpg|jpeg|png)$/,a=/(.+?)-[^\.]+\.(jp(e)?g|png|gif).*/,r=/(.+?\.(jp(e)?g|png|gif)).*/,o=function(t){return t.replace(e,"")},s=function(t){return a.test(t)?t.replace(a,"$1.$2"):t.replace(r,"$1")},c=function(t){return t.replace(n,function(t){return"-600!80"+t})},l=function(t){return-1!=t.indexOf("https")?"https:":"http:"},d=function(t){for(var e=t.find("img").not('[data-node="goodsPic"]'),n=e.length,a=0;a<n;a++){var r=$(e[a]),s=r.attr("_src"),c=r.attr("data-original");if(c)r.attr({"src":o(c),"_src":o(c),"proto":l(c)});else if(!i.test(s)){r.attr("proto");r.attr("_src",s)}}};t.exports={"imgReplace":o,"addShortCut":c,"imgProto":l,"changeSrc":d,"orignalImgReplace":s}}).call(exports,e(0))},"146":function(t,exports,e){var i=e(3);t.exports=i("src/js/page/topicDetails/comment/secondComList",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$escape),a=t.topicType,r=t.backTopicId,o=t.topicId,s=t.SenUserId,c=t.replyUserId,l=t.replyUserName,d=t.replayToPub,u=t.threeUserId,h=t.replyCommentId,p=t.beReplyUserName,f=i.$string,m=t.content,g=t.canDelete,v=t.parentCommentId,b=t.imId,y="";return y+='<div class="comments-s clearfix" data-topicType=',y+=n(a),y+=" data-htId=",y+=n(r),y+=" data-tid=",y+=n(o),y+=' data-hide="0"> <div class="fl"> <a href="',y+=n(s),y+='" target="_blank" data-replyUserId="',y+=n(c),y+='">',y+=n(l),y+="</a> ",d&&(y+=' ：<span>回复</span> <a href="',y+=n(u),y+='" target="_blank" data-replyCommentId ="',y+=n(h),y+='">',y+=n(p),y+="</a> "),y+=" <span data-replyCommentId=",y+=n(h),y+=">：",y+=f(m),y+='</span> </div> <div class="topic-second-comment"> ',g&&(y+=' <a href="javascript:;" class="hidden" data-delId="',y+=n(h),y+='" data-topicId="',y+=n(o),y+='" data-action="del-discuss" data-type="second">删除</a> <dfn class="hidden">&nbsp;|&nbsp;</dfn> '),y+=' <a href="javascript:;" class="fr" data-node="secondCom_Key" data-getTopicId=',y+=n(r),y+=" data-replayUser=",y+=n(l),y+=' data-publish="0" data-comId="',y+=n(v),y+='" data-replyCommentId="',y+=n(h),y+='" data-imId="',y+=n(b),y+='" data-replyUserId=',y+=n(c),y+=" >回复</a> </div> </div> ",new String(y)})},"168":function(t,exports,e){var i=e(3);t.exports=i("src/js/page/topicDetails/comment/commentList",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$escape),a=t.dlShowBorder,r=t.userSubmit,o=t.subReplyQuantity,s=t.backTopicId,c=t.UserId,l=t.isExpert,d=t.userPic,u=t.topicType,h=t.topicId,p=t.showReport,f=t.canDelete,m=t.username,g=t.isLike,v=t.userQuantity,b=t.times,y=i.$string,x=t.content,w=t.itemsPic,_=t.itemShopNameItem,S=t.itemPrice,I=t.rebate,k=t.pricetype,T=t.mall_domain,C=t.shopId,E=t.skuId,P=t.kid,R=t.itemShopId,U=t.imageStr,B=t.showSecComm,q=t.isFirstCom,L=i.$each,A=t.secondReply,j=(t.value,t.i,t.imId),D=t.showMall,z=t.groupId,H=t.replyCommentNum,F=t.currentPage,N=t.pageSize,O=t.userIsExpert,M=t.currUserImg,X="";return X+=' <dl class="',X+=n(a),X+=' " ',r&&(X+=' data-node="userSubmit"'),X+=' data-allNum="',X+=n(o),X+='" data-commId="',X+=n(s),X+='"> <dt> <a href="',X+=n(c),X+='" target="_blank"> ',l&&(X+=' <em class="icon-daren"></em>'),X+=' <img src="',X+=n(d),X+='" onerror="imgError(this, \'g\')"> </a> </dt> <dd data-ddList="',X+=n(s),X+='"> <div class="circle-comments-title clearfix" data-topicType=',X+=n(u),X+=" data-htId=",X+=n(s),X+=" data-tid=",X+=n(h),X+='> <p class="comments-replay" data-node="comReplay"> ',p&&(X+=' <a href="javascript:;" class="replay-report" data-action="topic-report" data-type="1">举报</a> <span class="line"></span> '),X+=" ",f&&(X+=' <a href="javascript:;" class="replay-report" data-delId="',X+=n(s),X+='" data-topicId="',X+=n(h),X+='" data-action="del-discuss" >删除</a> <span class="line"></span> '),X+=' <a href="javascript:;" data-node="secondCom_Key" data-comId="',X+=n(s),X+='" data-replayUser=',X+=n(m),X+=' data-publish="1" data-allNum="',X+=n(o),X+='">回复</a> </p> <a href="javascript:;" class="topic-parise ',g&&(X+=" actived "),X+='" data-aciton="discuss-like" data-id="',X+=n(s),X+='" title="',X+=g?"取消赞":"赞",X+='">',X+=n(v),X+='<span></span></a> <a href="',X+=n(c),X+='" target="_blank">',X+=n(m),X+="</a> <span>",X+=n(b),X+='</span> </div> <div class="first-comment"> <p class="clearfix">',X+=y(x),X+="</p> ","1"==u&&(X+=' <div class="reply-details merchant"> <div class="reply-picture"> <img src="',X+=n(w),X+='" onerror="imgError(this)"> </div> <div class="reply-contxt"> <p>',X+=n(_),X+='</p> <div class="price clearfix"> <p class="price-numb">￥<span>',X+=n(S),X+="</span></p> \x3c!-- ",I>0&&(X+=' <div class="fan fan-s"> <em class="icon-fan-s"></em> <span>最高返',X+=n(I),X+="国美币</span> </div> "),X+=" --\x3e ","RUSHBUYPRICE"===k&&(X+=' <div class="buy"> <em class="icon-rob"></em> </div> '),X+=" ","TUANPRICE"===k&&(X+=' <div class="buy"> <em class="icon-tuan"></em> </div> '),X+=' </div> </div> <a href="',X+=n(T),X+=n(C),X+=n(E),X+=".html",P&&(X+="?kid=",X+=n(P)),X+='" target="_blank" class="see-details pc-btn pc-btnw105 pc-btnh40" data-shopId=',X+=n(C),X+=" data-itemShopId=",X+=n(R),X+=' data-node="checkDetailMsg">查看详情</a> </div> '),X+=" ",X+=y(U),X+=' </div> <div class="comments-box ',X+=n(B),X+='"> ',q||(X+=" ",L(A,function(t,e){X+=' <div class="comments-s clearfix" data-topicType=',X+=n(u),X+=" data-htId=",X+=n(s),X+=" data-tid=",X+=n(h),X+=' data-hide="0"> <div class="fl"> <a href="',X+=n(t.SenUserId),X+='" target="_blank" data-replyUserId=',X+=n(t.replyUserId),X+=">",X+=n(t.replyUserName),X+="</a> ",t.replayToPub&&(X+=" ：<span>回复</span> "),X+=' <a href="',X+=n(t.threeUserId),X+='" target="_blank" data-replyCommentId =',X+=n(t.replyCommentId),X+=">",X+=n(t.beReplyUserName),X+=":</a> <span data-replyCommentId=",X+=n(t.replyCommentId),X+=">",X+=y(t.content),X+='</span> </div> <div class="topic-second-comment"> ',t.sCanDelete&&(X+=' <a href="javascript:;" class="hidden" data-topicId="',X+=n(h),X+='" data-delId="',X+=n(t.commentId),X+='" data-action="del-discuss" data-type="second">删除</a> <dfn class="hidden">&nbsp;|&nbsp;</dfn> '),X+=' <a href="javascript:;" data-getTopicId=',X+=n(s),X+=' data-node="secondCom_Key" data-replayUser=',X+=n(t.replyUserName),X+=' data-publish="0" data-comId="',X+=n(t.parentCommentId),X+='" data-replyCommentId =',X+=n(t.replyCommentId),X+=" data-replyUserId=",X+=n(t.replyUserId),X+=" data-imId=",X+=n(j),X+=">回复</a> </div> </div> "}),X+=" "),X+=' </div> </dd> </dl> <div data-node="comments-warp"> ',q||(X+=" ",D&&(X+=' <a href="javascript:;" class="comments-more" data-node="showMoreList" data-groupId=',X+=n(z),X+=" data-imId=",X+=n(j),X+=" data-topicType=",X+=n(u),X+=" data-htId=",X+=n(s),X+=" data-tid=",X+=n(h),X+=" data-tootlePages=",X+=n(H),X+=" data-currentPage= ",X+=n(F),X+=" data-pageSize=",X+=n(N),X+=">查看回复...</a> "),X+=" "),X+=' <a class="pack-up" style="display: none" data-node="hideComBox" data-parentTopicIdBtn=',X+=n(s),X+='>收起</a> <div class="text-field-box clearfix secondText margin-width" style="display: none" data-parentTopicId=',X+=n(s),X+='> <div class="topic-user-head"> ',O&&(X+=' <em class="icon-daren"></em>'),X+=' <img src="',X+=n(M),X+='" onerror="imgError(this, \'g\')"> </div> <div class="topic-publish-content"> <textarea placeholder="说点什么吧…" class="textarea-bx secondT"></textarea> <label class="textarea-tips hide" data-node="textareaTips"></label> <div class="publish-face-bx"> <p class="icon-face" data-node="smilies_Face"><em class="icon-emoji"></em> 表情</p> <a href="javascript:;" class="pc-btn pc-btnh30 pc-btnw105" data-node="a_secondComBtn" data-getTopicId=',X+=n(s),X+=">发布</a> </div> </div> </div> </div> ",new String(X)})},"169":function(t,exports,e){var i=e(3);t.exports=i("src/js/page/topicDetails/comment/addImageTpl",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$each),a=t.picsSrc,r=(t.value,t.i,i.$escape),o=t.length,s=t.picture,c="";return c+=' <div class="comments-imglist" > <ul class="clearfix comments-imglist" > ',n(a,function(t,e){c+=" <li data-imgSort=",c+=r(e),c+=' data-node="imgPics"><a href="javascript:;"><img src="',c+=r(t),c+='"></a></li> '}),c+=' </ul> <div class="imglist-big hide" data-node="imgBigPic"> <div class="big-title"> <a href="javascript:;" data-node="imgBigHind"><em class="icon-up"></em>收起</a> <a href="javascript:;" data-node="imgBigSrc" target="_blank"><em class="icon-view-img"></em>查看原图</a> </div> <div class="big-img" data-picLength="',c+=r(o),c+='"> <div class="img-hidden"> ',n(s,function(t,e){c+=' <div class="img-box" data-bigImg=',c+=r(e),c+=' data-node="hideBigPic"><img class="srcError" data-imgsrc = "',c+=r(t.url),c+='"></div> '}),c+=' </div> <em class="icon-left" data-node="imgBigPN" data-page="pre"></em> <em class="icon-right" data-node="imgBigPN" data-page="next"></em> </div> <div class="img-slide"> ',n(s,function(t,e){c+=' <a href="javascript:;" data-node="showImg" data-active="',c+=r(e),c+='" ></a> '}),c+=" </div> </div> </div> ",new String(c)})},"17":function(t,exports,e){"use strict";(function($){var i,n,a=e(18),r=e(20),o=e(21),s={},c=function(t){for(var e=t.length,i=Math.ceil(e/24),n=[],a=0;a<i;a++){n[a]=[];var r=24*(a+1);r=r>e?e:r;for(var o=24*a;o<r;o++){var c=t[o];n[a].push(c),s[c.name]=c.url}}return{"page":new Array(i),"list":n}},l=function(t,e){u(0),$("[data-node=faceBox]").css({"left":t+"px","top":e+"px"}).show()},d=function(){$("[data-node=faceBox]").hide()},u=function(t){t=t||0,$("[data-action=facePage] > li").eq(t).addClass("active").siblings("li").removeClass("active"),$("[data-node=faceList] > div").eq(t).removeClass("hide").siblings("div").addClass("hide")},h=function(t,e){$("body").on("click","[data-face]",function(a){a.preventDefault(),a.stopPropagation(),i=$(this).data("face"),n=$(this).attr("src"),t({"reg":i,"url":n}),!1!==e&&$("[data-node=faceBox]").hide()})},p=function(t){var e=c(a),i=o(e);$("body").append(i),t()},f=function(){$("body").on("click","[data-node=faceBox]",function(t){t.stopPropagation()}),$(document).on("click",function(){$("[data-node=faceBox]").hide()}),$("[data-node=faceBox]").on("mouseenter","[data-action=facePage] > li",function(){var t=$(this).index();u(t)})},m=function(t){var e=/(\[([\s\S]+?)\])/g;return $.isEmptyObject(s)&&c(a),t.replace(e,function(t,e,i){var n=s[i];if(n)return'<img width="22" height="22" src="'+n+'" />';var a=r[i];return a?'<img width="22" height="22" src="'+a.url+'" />':t})},g=function(){p(f)};t.exports={"init":g,"insert":h,"show":l,"hide":d,"parseEmoji":m}}).call(exports,e(0))},"170":function(t,exports,e){"use strict";(function(i,$){function n(t,e){w.post(_.get("getTopicList"),{"data":{"tid":t}}).then(function(t){e.call(null,t)},function(t){e.call(null,t)})}function a(t,e){var a=t,r=a.id;n(r,function(t){var n=t&&200===t.code&&t.data.length>0,o={"topicRT":W,"hotTopicUl":Q,"id":r,"showTab":n,"tabList":t.data,"topicDomain":i.group_domain+"topic/","nextTopName":a.topicName,"nextTopTime":a.lastReplyTime,"htqzxxmodule":a.htqzxxmodule,"htrmhtmodule":a.htrmhtmodule,"htxyymodule":a.htxyymodule},s=g(a),c=b(a),l=v(a),d=y(o),u='<div class="more-topic" ><div class="wrap-box ovflow-hid wrap-reletive " data-node="wrap-box" id-node='+r+'><div class="topic-lfet" data-left='+r+">"+s+c+l+"</div>"+d+"</div>";G.append(u),G.children().last().find(".source-rig-box img").lazyload({"effect":"fadeIn"}),e.call(null)})}function r(){if(V.length){var t=new MeixinPlayer,e=V.attr("video-id");t.init(e,"playVideo",J)}else{var n=i.video_arr,a=[n];if(!(n.length>U.length))return!1;a=n.slice(U.length);for(var r=0;r<a.length;r++){var o=a[r],s=o.base.id,t=new MeixinPlayer;t.init(s,"videoContainer_"+s+"_"+o.config.topicId,o.config),U.push(a[r]),B.push(t),t.on("playStart",function(){for(var e=0;e<B.length;e++)B[e]===t||B[e].stopVideo()},t)}}}function o(t){R.push(t),w.get(_.get("getNextTopic")+"?topicid="+t).then(function(e){if(1==e.success&&200==e.code){var n=$("[data-get-next-topic='"+t+"']");Z?(n.children("a").html(e.data.name).attr("href","/topic/"+e.data.id+".html").attr("target","_blank"),n.find(".f12").html(e.data.lastReplyTime),n.slideDown("slow")):Z=1;var r=i.headface,o=i.imgpath;r||(r=o+"/images/public/head-default.png");var s=!!i.isExpert,c=!!e.data.expertInfo.isExpert,l=8===e.data.extTopicType,d="",p="";c&&(d=e.data.expertInfo.category.name),l&&(p=e.data.mAccount.category.name);var f="",m="",g="";"0"==D?(m="登录",f="pc-bj-fc8753",g="readonly"):(m="发布",f="",g="");var v=e.data,b=v.id,y=e.data.name;$("body").attr("data-currentTopicId",t),$("body").attr("data-nextTopicId",b),C.push({"name":y,"id":b});var w=u(v.user.id),_=1==D&&i.userId!=v.user.id,S=parseInt(v.replyQuantity+v.subReplyQuantity);a({"jctjmodule":it(z),"htxqmodule":it(H),"htcyplmodule":it(F),"htpllbmodule":it(N),"htqzxxmodule":it(O),"htrmhtmodule":it(M),"htxyymodule":it(X),"ggjzgdmodule":Y,"UserId":w,"html":v.html,"isEssence":v.isEssence,"isUpper":v.isUpper,"style":"0"!=v.style,"topicName":v.name,"id":b,"imgPath":j,"facePicUrl":l?v.mAccount.imageUrl:v.user.facePicUrl,"nickName":l?v.mAccount.name:v.user.nickname,"iconExpert":d,"iconMeihao":p,"lastReplyTime":v.lastReplyTime,"allNum":S,"extImagesLst":v.ext.surl,"share_text":v.ext.share_text,"extSpic":v.ext.images_lst,"extStitle":v.name,"isLike":0==v.ext.praise.isLike?"":"active","isLikeName":0==v.ext.praise.isLike?"点赞":"取消点赞","userQuantity":v.ext.praise.userQuantity,"userCollection":0==v.userCollection.result?"":"active","userCollectionName":0==v.userCollection.result?"收藏":"取消收藏","userCollectionStatu":0==v.userCollection.result?0:1,"dataParise":0==v.ext.praise.isLike?"1":"0","mshopFlag":v.ext.mshop_flag,"mshopUrl":v.ext.mshop_url,"coverPic":v.coverPic,"is_del":v.user.is_del,"isExpert":s,"isMeihao":l,"userImage":r,"groupId":e.data.groupId,"isExpertSign":c,"isLoginStr":m,"isLoginClass":f,"readyOnly":g,"showReport":_,"isGroupOwn":h(v.group.createrId)},function(){nt(),$("body").attr("data-module",Number($("body").attr("data-module"))+1),0!=S&&x({"id":b,"currPage":1,"pageSize":10,"listSize":2}),P.push({"name":y,"id":b});var e=$("[data-topicrt='"+t+"']"),i=e.children(".topic-r-t").height()+e.children(".topic-position").height();$("[id-node='"+t+"']").css("min-height",i+"px")})}else if(0==e.success&&404==e.code)return!1})}function s(t){if(-1==k&&(E.push(I),k=0),P.length-1==k){var e=P[P.length-1].id,i=P[P.length-1].name;$("[id-node='"+e+"']").length>0&&t>$("[id-node='"+e+"']").offset().top&&(History.replaceState({},i,e+".html"),E.push({"name":i,"id":e}),0==A&&R[R.length-1]!=e&&(o(e),tt(e)),r(),k++,q=e)}if(P.length-1>k){var n=P[k].id,a=P[k].name;$("[id-node='"+n+"']").length>0&&t>$("[id-node='"+n+"']").offset().top&&(History.replaceState({},a,n+".html"),E.push({"name":a,"id":n}),k++,q=n)}}function c(t){var e="",i="",n="";k<1?(i=I.id,n=I.name,q=i):(e=E[k].id,i=E[k-1].id,n=E[k-1].name,q=e),e&&t<$("[id-node='"+e+"']").offset().top&&(History.replaceState({},n,i+".html"),E.length=k,k--)}function l(t){var e=E[E.length-1].id,i=$("[id-node='"+e+"']"),n=i.children(".topic-right "),a=n.children("[data-node='topic_xi']"),r=i.children(".topic-lfet"),o=i.height(),s=n.height(),c=a.height(),l=$(window).height(),d=r.height(),u=$("body").width()-$(".wrap-box").width();u=parseInt(u)/2;var h=t,p=parseInt(i.offset().top),f=p+320,m=parseInt(p)+o;if(d<=s)return!1;var g=null,v=null,b=null,y=0;l>c&&(y=l-c),c<=l?(g=f,v="0px",b="auto"):(g=f-l+c,v="auto",b="0px"),h>g&&h+l<=m+y?$(a).css({"position":"fixed","right":u+"px","top":v,"bottom":b}):h+l>m+y?$(a).css({"position":"absolute","right":"0px","top":"auto","bottom":"0px"}):h<g&&$(a).css({"position":"absolute","right":"0px","top":"320px","bottom":"auto"})}function d(t){var e=E[E.length-1].id,i=$("[data-conter-ul='"+e+"']"),n=$(i).children("ul"),a=i.offset().top,r=i.height(),o=n.height(),s=r+a-o;t>a&&t<s?n.css({"position":"fixed","top":"6px","left":et+"px","bottom":"auto"}):t>s?n.css({"position":"absolute","top":"auto","left":"0px","bottom":"0px"}):t<a&&n.css({"position":"absolute","top":"0","bottom":"auto","left":"0px"})}function u(t){return 1==D&&i.userId==t?i.i_domain+"member/profileHome":i.group_domain+"ta/"+t+".html"}function h(t){return 1==D&&i.userId==t}function p(){var t=$("[data-node='top']");t.off();var e=-1;t.on("click",function(){var t="",i=parseInt($(window).scrollTop());if($(this).attr("data-winScrollTop",i),e==i)E=[I],t=E[E.length-1],k=0,$("html, body").scrollTop(10),History.replaceState({},t.name,t.id+".html");else{t=E[E.length-1].id;var n=parseInt($("[id-node='"+t+"']").offset().top);$(window).scrollTop(n),e=n}$(this).attr("data-btnScroll",e)})}function f(){$("body").on("click",'[data-node="topic-tab"] a',function(){var t=$(this);if(t.siblings().length>0&&!t.hasClass("active")){var e=t.parents('[data-node="hot_topics"]').eq(0).find('[data-node="topic-tab-list"]'),i=parseInt(t.attr("data-index"),10);t.addClass("active").siblings().removeClass("active"),e.hide().eq(i).show()}})}var m=(e(7),e(59)),g=e(402),v=e(403),b=e(404),y=e(405);e(30),e(406),e(64)();var x=e(75),w=e(2),_=e(5),S=i.topicid,I={"name":i.topic_title,"id":S},k=0,T=0,C=[I],E=[I],P=[],R=[],U=[],B=[],q=I.id,L=I.id,A=i.no_next,j=i.imgpath,D=i.islogin,z=i.htfxan,H=i.htxq,F=i.htcypl,N=i.htpllb,O=i.htqzxx,M=i.htrmht,X=i.htxyy,Y=i.ggjzgd,Q=$("[data-node='hot_topics']").find("ul").html(),W=$(".topic-r-t").html(),G=$("[data-node='more-topic']"),V=$("#playVideo"),K={"sim":"dist","pro":"dist","pre":"pre","dev":"pre"},J={"env":K[i.environment]||"dist"},Z=0,tt=function(t){w.get(_.get("addVisitTopic"),{"data":{"topicid":t}})},et=parseInt($(".wrap-box.ovflow-hid").css("margin-left"),10)+20,it=function(t){return t},nt=function(){var t=$('[data-node="textareaTips"]');m()&&t.removeClass("hide")},at=function(){f(),r(),p(),History.Adapter.bind(window,"statechange",function(){}),nt(),0==A&&o(S),tt(S);var t=0,e=$(window).height(),i=0,n=0;$(window).on("scroll",function(){t=$(this).scrollTop(),e=$(window).height(),i=parseInt(t+e/3),l(t),d(t);var a=$("[id-node='"+q+"']").parent(),r=Math.abs(t-T);t-T>0?r>50&&s(i):r>50&&(c(i),"none"!==a.next().nextAll()&&a.next().nextAll().hide(),"none"===a.prev().css("display")&&(a.prev().show(),n=t+a.prev().height(),$(window).scrollTop(n))),r>50&&L!==q&&(t-T>0&&(n=t-a.prev().prev().height(),"none"!==a.prev().prevAll().css("display")&&a.prev().prevAll().hide(),"none"===a.next().css("display")&&a.next().show(),$(window).scrollTop(n)),L=q),T=t})};t.exports={"init":at,"topFixed":l}}).call(exports,e(1),e(0))},"18":function(t,exports,e){"use strict";(function(e){var i=e.imgpath+"/images/emoji/",n=[{"name":"微笑","url":"weixiao"},{"name":"色","url":"se"},{"name":"亲亲","url":"qinqin"},{"name":"得意","url":"deyi"},{"name":"流泪","url":"liulei"},{"name":"害羞","url":"haixiu"},{"name":"闭嘴","url":"bizui"},{"name":"鼓掌","url":"guzhang"},{"name":"大哭","url":"daku"},{"name":"尴尬","url":"ganga"},{"name":"生气","url":"shengqi"},{"name":"调皮","url":"tiaopi"},{"name":"呲牙","url":"ciya"},{"name":"惊讶","url":"jingya"},{"name":"委屈","url":"weiqu"},{"name":"吐血","url":"tuxue"},{"name":"冷汗","url":"lenghan"},{"name":"抓狂","url":"zhuakuang"},{"name":"难过","url":"nanguo"},{"name":"偷笑","url":"touxiao"},{"name":"白眼","url":"baiyan"},{"name":"不屑","url":"buxie"},{"name":"快哭了","url":"kuaikule"}],a=[{"name":"困","url":"kun"},{"name":"装酷","url":"zhuangku"},{"name":"大笑","url":"daxiao"},{"name":"偷瞄","url":"toumiao"},{"name":"奋斗","url":"fendou"},{"name":"咒骂","url":"zhouma"},{"name":"疑问","url":"yiwen"},{"name":"晕","url":"yun"},{"name":"捶打","url":"chuida"},{"name":"再见","url":"zaijian"},{"name":"抠鼻","url":"koubi"},{"name":"发呆","url":"fadai"},{"name":"坏笑","url":"huaixiao"},{"name":"哈欠","url":"haqian"},{"name":"鄙视","url":"bishi"},{"name":"睡觉","url":"shuijiao"},{"name":"饿","url":"e"},{"name":"阴险","url":"yinxian"},{"name":"难受","url":"nanshou"},{"name":"可怜","url":"kelian"},{"name":"撇嘴","url":"piezui"},{"name":"石化","url":"shihua"},{"name":"泪眼","url":"leiyan"}],r=[{"name":"嘘","url":"xu"},{"name":"哼哼","url":"hengheng"},{"name":"爱慕","url":"aimu"},{"name":"财迷","url":"caimi"},{"name":"耶","url":"ye"},{"name":"思考","url":"sikao"},{"name":"骷髅","url":"kulou"},{"name":"痛哭","url":"tongku"},{"name":"恭喜","url":"gongxi"},{"name":"捂脸","url":"wulian"},{"name":"嘿哈","url":"heiha"},{"name":"机智","url":"jizhi"},{"name":"皱眉","url":"zhoumei"},{"name":"安慰","url":"anwei"},{"name":"飞吻","url":"feiwen"},{"name":"奸笑","url":"jianxiao"},{"name":"猪头","url":"zhutou"},{"name":"玫瑰","url":"meigui"},{"name":"凋谢","url":"diaoxie"},{"name":"爱心","url":"aixin"},{"name":"心碎","url":"xinsui"},{"name":"蛋糕","url":"dangao"},{"name":"喝水","url":"heshui"}],o=[{"name":"西瓜","url":"xigua"},{"name":"咖啡","url":"kafei"},{"name":"啤酒","url":"pijiu"},{"name":"包包","url":"baobao"},{"name":"高跟鞋","url":"gaogenxie"},{"name":"帽子","url":"maozi"},{"name":"口红","url":"kouhong"},{"name":"裙子","url":"qunzi"},{"name":"T恤","url":"txu"},{"name":"裤子","url":"kuzi"},{"name":"眼镜","url":"yanjing"},{"name":"太阳镜","url":"taiyangjing"},{"name":"蜡烛","url":"lazhu"},{"name":"礼物","url":"liwu"},{"name":"红包","url":"hongbao"},{"name":"拥抱","url":"yongbao"},{"name":"太阳","url":"taiyang"},{"name":"月亮","url":"yueliang"},{"name":"便便","url":"bianbian"},{"name":"炸弹","url":"zhadan"},{"name":"菜刀","url":"caidao"},{"name":"握手","url":"woshou"},{"name":"胜利","url":"shengli"}],s=[{"name":"赞","url":"zan"},{"name":"OK","url":"ok"},{"name":"勾引","url":"gouyin"},{"name":"NO","url":"no"},{"name":"打脸","url":"dalian"},{"name":"抱拳","url":"baoquan"},{"name":"乒乓球","url":"pingpangqiu"},{"name":"足球","url":"zuqiu"},{"name":"篮球","url":"lanqiu"}];t.exports=function(t){for(var e=0,n=t.length;e<n;e++){var a=t[e];a.url=i+a.url+".png"}return t}(n.concat(a,r,o,s))}).call(exports,e(1))},"20":function(t,exports,e){"use strict";(function(e){var i=e.imgpath+"/images/emoji/",n=".png",a={"亲":{"name":"亲亲","url":i+"qinqin"+n},"愤怒":{"name":"生气","url":i+"shengqi"+n},"惊恐":{"name":"惊讶","url":i+"jingya"+n},"迷茫":{"name":"委屈","url":i+"weiqu"+n},"伤心":{"name":"难过","url":i+"nanguo"+n},"努力":{"name":"奋斗","url":i+"fendou"+n},"YY":{"name":" 坏笑","url":i+"huaixiao"+n},"恶心":{"name":"难受","url":i+"nanshou"+n}};t.exports=a}).call(exports,e(1))},"21":function(t,exports,e){var i=e(3);t.exports=i("src/js/module/popup/face/face",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$each),a=t.list,r=(t.v,t.i,t.face,t.$index,i.$escape),o=t.page,s="";return s+='<div data-node="faceBox" class="imoj-box" style="position: absolute;z-index: 9999;display:none"> <em class="sanjiao"></em> <div data-node="faceList" class="imoj-list"> ',n(a,function(t,e){s+=' <div class="imoj-content clearfix ',e&&(s+="hide"),s+='"> ',n(t,function(t,e){s+=' <a href="javascript:;"> <img width="22" height="22" data-face="[',s+=r(t.name),s+=']" src="',s+=r(t.url),s+='" alt="',s+=r(t.name),s+='" title="',s+=r(t.name),s+='"> </a> '}),s+=" </div> "}),s+=' </div> <ul data-action="facePage" class="pagination"> ',n(o,function(t,e){s+=" <li ",0==e&&(s+='class="active"'),s+=">",s+=r(e+1),s+="</li> "}),s+=" </ul> </div>",new String(s)})},"22":function(t,exports,e){"use strict";var i=function(t,e){return t?t.replace(e||/[&<">'](?:(amp|lt|ldquo|rdquo|quot|gt|#39|nbsp|#\d+);)?/g,function(t,e){return e?t:{"<":"&lt;","&":"&amp;",'"':"&quot;","“":"&ldquo;","”":"&rdquo;",">":"&gt;","'":"&#39;"}[t]}):""};t.exports=i},"23":function(t,exports,e){"use strict";(function(e){var i={"a":["target","href","title","class","data-node"],"div":["class","style","data-node","unselectable","onselectstart","data-type","data-skuid","data-rec-shoptag","data-identification"],"dl":["class","style","data-node"],"dt":["class","style"],"em":["class","style","data-node"],"h1":["data-node"],"h2":["data-node"],"h3":["data-node"],"h4":["data-node"],"h5":["data-node"],"h6":["data-node"],"img":["src","alt","title","width","height","id","_src","loadingclass","class","data-latex","data-node","data-index","data-type","data-node","data-original","onerror","proto","video-path","video-id","des","len","coverImage"],"p":["class","style","data-node"],"span":["class","style","data-node"],"ul":["class","style","data-node"],"ol":["class","style","data-node"],"li":["class","style","data-node"]},n={"imgLimitNUm":$GLOBAL_CONFIG.imgLimitNUm||20,"goodsLimitNUm":$GLOBAL_CONFIG.goodsLimitNUm||9,"videoLimitNUm":$GLOBAL_CONFIG.videoLimitNUm||1,"initialFrameWidth":788,"initialFrameHeight":400,"zIndex":9,"autoClearinitialContent":!0,"UEDITOR_HOME_URL":e.js_domain,"serverUrl":"","themePath":e.csspath+"/css/module/","whitList":i,"toolbars":[["bold","italic","underline","insertunorderedlist","insertorderedlist","justifyleft","justifycenter","justifyright"]],"iframeCssUrl":e.csspath+"/css/module/iframestyle.css?v="+$GLOBAL_CONFIG.versionData,"pasteplain":!0,"allowDivTransToP":!1,"imageScaleEnabled":!1,"elementPathEnabled":!1,"wordCount":!1,"catchRemoteImageEnable":!0,"enableContextMenu":!1,"imagePopup":!1,"enableAutoSave":!1};t.exports=n}).call(exports,e(1))},"26":function(t,exports,e){"use strict";(function($){var i=e(6),n=function(t){t=t||{};var e={"title":" ","modal":!0,"fixed":!0,"width":350,"content":'<p class="del-pop-p">您最多能添加9个商品哦！</p>',"className":"pop-box","okValue":"确定","okCls":"pc-btn pc-btnh35 circle-pop-btn","ok":function(){},"onshow":function(){$('[i="title"]').hide()}};return $.extend(!0,e,t),i(e)};t.exports={"create":n}}).call(exports,e(0))},"27":function(t,exports,e){var i=e(3);t.exports=i("src/js/module/popup/addGoods/content",function(t,e){"use strict";var i=this,n=(i.$helpers,t.useMeidian),a=i.$escape,r=t.imgSrc,o=t.returnList,s=i.$each,c=(t.$value,t.$index,t.changeNum),l=t.maxlength,d="";return d+=" ",n?(d+=' <div class="ui-dialog-title" data-node="title">添加商品</div> <ul data-node="tab-title-goods" class="tab-title-goods"> <li data-node = "coll" class="active">我的美店</li> <li data-node = "rec">好货推荐</li> </ul> <ul data-node = "tab-body-goods" class="tab-body-goods"> <li data-node="tab-coll"> <p class="no-saving-txt" style="display:none;" data-node="searchNormal">暂无商品</p> <div class="loading" data-node="searchLoading"><img src="',d+=a(r),d+='/images/public/loading.gif" alt=""></div> <p class="failed-txt" style="display:none;" data-node="searchFail">数据获取失败，点击重新加载！</p> <div style="display:',d+=a(0===o.length?"none":""),d+=';" data-node="searchResultBox"> <div class="merchant-list clearfix" > <div class="clearfix" data-node="searchResultList"></div> <div class="more-comments pop-more-com" data-action="moreItem" style="display:none;"> <span><img src="',d+=a(r),d+='/images/public/loading.gif">正在加载...</span> </div> </div> </div> </li> <li data-node="tab-rec" style="display: none;" isClick="0"> <p class="no-saving-txt" style="display:none;" data-node="searchNormal">暂无商品</p> <div class="loading" data-node="searchLoading"><img src="',d+=a(r),d+='/images/public/loading.gif" alt=""></div> <p class="failed-txt" style="display:none;" data-node="searchFail">数据获取失败，点击重新加载！</p> <div style="display:',d+=a(0===o.length?"none":""),d+=';" data-node="searchResultBox"> <div class="merchant-list clearfix" > <div class="clearfix" data-node="searchResultList"></div> <div class="more-comments pop-more-com" data-action="moreItem" style="display:none;"> <span><img src="',d+=a(r),d+='/images/public/loading.gif">正在加载...</span> </div> </div> </div> </li> </ul> <div class="chosed-merchants" data-node="changedBox" style="display:',d+=a(o.length>0?"":"none"),d+='"> <ul class="merchants-list clearfix" data-node="searchChangeList"> ',s(o,function(t,e){d+=' <li data-skuId="',d+=a(t.skuId),d+='" data-pid="',d+=a(t.PId),d+='"> <img src="',d+=a(t.img),d+='" alt="" onerror="imgError(this)"> <a href="javascript:;" data-action="delChanged"> <em class="icon-del-pic"></em> </a> </li> '}),d+=' </ul> </div> <div class="num-pics">您可以添加 <span class="link-hover-red" data-node="searchChangeNum">',d+=a(c),d+='</span>/<span class="deep-gray">',d+=a(l),d+="</span>个商品</div> "):(d+=' <div class="search-box" data-node="addTopBox"> <input type="text" placeholder="搜索商品" data-action="addSearchInput"> <em class="icon-search-sw" data-action="addSearchBtn"></em> </div> <div class="ui-dialog-title" data-node="title">我收藏的商品</div> <p class="no-saving-txt" style="display:none;" data-node="searchNormal">暂无收藏的商品，可以搜索查找！</p> <div class="loading" data-node="searchLoading"><img src="',d+=a(r),d+='/images/public/loading.gif" alt=""></div> <p class="failed-txt" style="display:none;" data-node="searchFail">数据获取失败，点击重新加载！</p> <div style="display:',d+=a(0===o.length?"none":""),d+=';" data-node="searchResultBox"> <div class="merchant-list clearfix" > <div class="clearfix" data-node="searchResultList"></div> <div class="more-comments pop-more-com" data-action="moreItem" style="display:none;"> <span><img src="',d+=a(r),d+='/images/public/loading.gif">正在加载...</span> </div> </div> <div class="chosed-merchants" data-node="changedBox" style="display:',d+=a(o.length>0?"":"none"),d+='"> <ul class="merchants-list clearfix" data-node="searchChangeList"> ',s(o,function(t,e){d+=' <li data-skuId="',d+=a(t.skuId),d+='" data-pid="',d+=a(t.PId),d+='"> <img src="',d+=a(t.img),d+='" alt="" onerror="imgError(this)"> <a href="javascript:;" data-action="delChanged"> <em class="icon-del-pic"></em> </a> </li> '}),d+=' </ul> </div> <div class="num-pics">您可以添加 <span class="link-hover-red" data-node="searchChangeNum">',d+=a(c),d+='</span>/<span class="deep-gray">',d+=a(l),d+="</span>个商品</div> </div> "),new String(d)})},"28":function(t,exports,e){var i=e(3);t.exports=i("src/js/module/popup/addGoods/itemContent",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$each),a=t.itemlist,r=(t.$value,t.$index,i.$escape),o=t.indexof,s=t.changedList,c=t.shopTag,l=i.$string,d="";return n(a,function(t,e){d+=' <dl class="merchant-item clearfix ',d+=r(-1!==o(s,t.skuId)?"chosed-mer-true":""),d+='" data-action="item" data-pId="',d+=r(t.pId),d+='" data-link="',d+=r(t.sUrl),d+='" data-skuId="',d+=r(t.skuId),d+='" ',c>0&&(d+=' data-rec-shoptag="1" data-identification=',d+=r(t.identification),d+=" "),d+=" > <dt><img src=",d+=r(t.mainImage),d+=' alt="11111" onerror="imgError(this)"></dt> <dd> <h4 node-data="itemTitle">',d+=l(t.name),d+='</h4> <span class="itemPrice"><em>￥</em><span node-data="itemPrice">',d+=r(null!==t.salePrice?t.salePrice:"暂无售价"),d+="</span></span> \x3c!-- ",t.rebateMoney>0&&(d+=' <div class="fan fan-s"> <em class="icon-fan-s"></em> <span>最高返',d+=r(t.rebateMoney),d+="国美币</span> </div> "),d+=" --\x3e </dd> </dl> "}),d+=" ",new String(d)})},"3":function(t,exports){!function(){function e(t,e){return(/string|function/.test(typeof e)?c:s)(t,e)}function i(t,e){return"string"!=typeof t&&(e=typeof t,"number"===e?t+="":t="function"===e?i(t.call(t)):""),t}function n(t){return h[t]}function a(t){return i(t).replace(/&(?![\w#]+;)|[<>"']/g,n)}function r(t,e){if(p(t))for(var i=0,n=t.length;n>i;i++)e.call(t,t[i],i,t);else for(i in t)e.call(t,t[i],i)}function o(t,e){var i=/(\/)[^\/]+\1\.\.\1/,n=("./"+t).replace(/[^\/]+$/,""),a=n+e;for(a=a.replace(/\/\.\//g,"/");a.match(i);)a=a.replace(i,"/");return a}function s(t,i){var n=e.get(t)||l({"filename":t,"name":"Render Error","message":"Template not found"});return i?n(i):n}function c(t,e){if("string"==typeof e){var i=e;e=function(){return new u(i)}}var n=d[t]=function(i){try{return new e(i,t)+""}catch(t){return l(t)()}};return n.prototype=e.prototype=f,n.toString=function(){return e+""},n}function l(t){var e="{Template Error}",i=t.stack||"";if(i)i=i.split("\n").slice(0,2).join("\n");else for(var n in t)i+="<"+n+">\n"+t[n]+"\n\n";return function(){return"object"==typeof console&&console.error(e+"\n\n"+i),e}}var d=e.cache={},u=this.String,h={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},p=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},f=e.utils={"$helpers":{},"$include":function(t,e,i){return t=o(i,t),s(t,e)},"$string":i,"$escape":a,"$each":r},m=e.helpers=f.$helpers;e.get=function(t){return d[t.replace(/^\.\//,"")]},e.helper=function(t,e){m[t]=e},t.exports=e}()},"30":function(t,exports,e){(function(t){!function($,t){var e,i=$(t);$.fn.lazyload=function(n){function a(){var t=0;r.each(function(){var e=$(this);if(!o.skip_invisible||e.is(":visible"))if($.abovethetop(this,o)||$.leftofbegin(this,o));else if($.belowthefold(this,o)||$.rightoffold(this,o)){if(++t>o.failure_limit)return!1}else e.trigger("appear")})}var r=this,o={"threshold":0,"failure_limit":0,"event":"scroll","effect":"show","container":t,"data_attribute":"original","skip_invisible":!0,"appear":null,"load":null};return n&&(void 0!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),void 0!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),$.extend(o,n)),e=void 0===o.container||o.container===t?i:$(o.container),0===o.event.indexOf("scroll")&&e.bind(o.event,function(){return a()}),this.each(function(){var t=this,e=$(t);t.loaded=!1,e.one("appear",function(){if(!this.loaded){if(o.appear){var i=r.length;o.appear.call(t,i,o)}$("<img />").bind("load",function(){e.attr("src",e.data(o.data_attribute))[o.effect](o.effect_speed),t.loaded=!0;var i=$.grep(r,function(t){return!t.loaded});if(r=$(i),o.load){var n=r.length;o.load.call(t,n,o)}}).attr("src",e.data(o.data_attribute))}}),0!==o.event.indexOf("scroll")&&e.bind(o.event,function(){t.loaded||e.trigger("appear")})}),i.bind("resize",function(){a()}),a(),this},$.belowthefold=function(n,a){return(void 0===a.container||a.container===t?i.height()+i.scrollTop():e.offset().top+e.height())<=$(n).offset().top-a.threshold},$.rightoffold=function(n,a){return(void 0===a.container||a.container===t?i.width()+i.scrollLeft():e.offset().left+e.width())<=$(n).offset().left-a.threshold},$.abovethetop=function(n,a){return(void 0===a.container||a.container===t?i.scrollTop():e.offset().top)>=$(n).offset().top+a.threshold+$(n).height()},$.leftofbegin=function(n,a){return(void 0===a.container||a.container===t?i.scrollLeft():e.offset().left)>=$(n).offset().left+a.threshold+$(n).width()},$.inviewport=function(t,e){return!($.rightofscreen(t,e)||$.leftofscreen(t,e)||$.belowthefold(t,e)||$.abovethetop(t,e))},$.extend($.expr[":"],{"below-the-fold":function(e){return $.belowthefold(e,{"threshold":0,"container":t})},"above-the-top":function(e){return!$.belowthefold(e,{"threshold":0,"container":t})},"right-of-screen":function(e){return $.rightoffold(e,{"threshold":0,"container":t})},"left-of-screen":function(e){return!$.rightoffold(e,{"threshold":0,"container":t})},"in-viewport":function(e){return!$.inviewport(e,{"threshold":0,"container":t})},"above-the-fold":function(e){return!$.belowthefold(e,{"threshold":0,"container":t})},"right-of-fold":function(e){return $.rightoffold(e,{"threshold":0,"container":t})},"left-of-fold":function(e){return!$.rightoffold(e,{"threshold":0,"container":t})}})}(t,window)}).call(exports,e(0))},"31":function(t,exports,e){"use strict";(function($){var i=e(2),n=e(5),a=e(32),r=e(9),o={"qq":"http://connect.qq.com/widget/shareqq/index.html","wb":"http://v.t.sina.com.cn/share/share.php","qz":"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey"},s={"url":"https://group.gomeplus.com/","title":"国美APP边玩边分享，购物不孤单","pic":"../../images/public/logo.png","summary":"国美APP边玩边分享，购物不孤单"},c=function(t){window.open(t)},l=!1,d=function(){$("body").append('<p data-node="shareBtnBox" class="share-down" style="z-index:21;"><span class="share-box"><span class="icon icon-up-arrow"></span><span class="icon-box"><em data-shareto="weixin" class="iconn-30"></em><em data-shareto="qq" class="iconn-32"></em><em data-shareto="sina" class="iconn-31"></em><em data-shareto="qzone" class="iconn-33"></em></span></span></p>'),l=!0},u=function(t){!l&&d(),$("[data-node=shareBtnBox]").css({"left":t.x,"top":t.y}).show()},h=!1,p=function(){$("body").append('<div class="share-weixin"><div class="wx-mask"></div><div class="wx-main"><div class="wx-code"><span></span><img data-node="shareWeixinCode" alt="分享到微信" /></div><p>打开微信扫一扫，即可分享</p><a href="javascript:;" title="点击关闭" class="wx-close">×</a></div></div>'),h=!0},f=function(t,e){var i=[],n={"url":t.url,"title":t.title,"summary":t.summary,"site":t.site};t.kid&&(n.url=t.url+"?kid="+t.kid);for(var a in n)i.push(a+"="+encodeURIComponent(n[a]||""));return e?i.push("pics="+t.pic):i.push("pic="+t.pic),i.join("&")},m={"weixin":function(t){var e=a(t.url);!h&&p(),$("[data-node=shareWeixinCode]")[0].src=e,$(".share-weixin").show(),$(".wx-close").on("click",function(){$(".share-weixin").hide()})},"qq":function(t){var e=o.qq+"?"+f(t,!0);c(e)},"wb":function(t){var e=o.wb+"?"+f(t);c(e)},"qz":function(t){var e=o.qz+"?"+f(t,!0);c(e)}},g=function(t){var e="0"!==t.isRebate;i.get(n.get("shareGetGoodsKid"),{"validate":e,"data":{"skuId":t.skuId,"itemId":t.itemId,"parentKid":t.parentKid},"async":!1}).done(function(e){if(!0===e.success){var i=e.data.kid,n=t.shareInfo,a=n.url,r=a.indexOf("?");r>0&&(a=a.substring(0,r)),n.url=a+"?onlineUserId="+n.onlineUserId+"&kId="+i,m[t.shareto](n)}else m[t.shareto](t.shareInfo)}).fail(function(){e?r()&&m[t.shareto](t.shareInfo):m[t.shareto](t.shareInfo)})},v=function(t){var e={"title":t.title||s.title,"url":t.url||s.url,"pic":t.pic||s.pic,"summary":t.summary||"","desc":t.desc||""};!!m[t.type]&&m[t.type](e)},b=function(t,e,i){var n=null,a=null;a="string"==typeof t?$(t):t,e=e||"[data-action=shareto]",a.on("mouseenter",e,function(){var t=$(this).data("surl"),e=$(this).data("stitle"),i=$(this).data("spic");n={"url":t,"title":e,"pic":i};var a=$(this).width(),r=$(this).height(),o=$(this).offset().left/1+a/2-80+"px",s=$(this).offset().top/1+(r-1)+"px";return u({"x":o,"y":s}),!1}),a.on("mouseleave",e,function(){return $("[data-node=shareBtnBox]").hide(),!1}),$("body").on("click","[data-shareto]",function(t){t.preventDefault();var e=$(this).data("shareto");n.type=e,i=i||function(){},i.call(null,n),v(n)}),$("body").on("mouseenter","[data-node=shareBtnBox]",function(){$(this).show()}),$("body").on("mouseleave","[data-node=shareBtnBox]",function(){$(this).hide()})};t.exports={"share":v,"shareto":m,"shareItem":b,"shareWithKid":g}}).call(exports,e(0))},"32":function(t,exports,e){"use strict";(function(e){var i=function(t){return e.group_domain+"ajax/qrcode/urlcode?url="+encodeURIComponent(t)};t.exports=i}).call(exports,e(1))},"39":function(t,exports,e){var i=e(3);t.exports=i("src/js/module/popup/addGoods/defaultItemContent",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$each),a=t.itemlist,r=(t.$value,t.$index,i.$escape),o=t.indexof,s=t.changedList,c="";return n(a,function(t,e){c+=' <dl class="merchant-item clearfix ',c+=r(-1!==o(s,t.skuId)?"chosed-mer-true":""),c+='" data-action="item" data-pId="',c+=r(t.pId),c+='" data-shopId="',c+=r(t.shopId),c+='" data-link="',c+=r(t.sUrl),c+='" data-skuId="',c+=r(t.skuId),c+='" > <dt><img src=',c+=r(t.mainImage),c+=' alt="" onerror="imgError(this,\'m\')"></dt> <dd> <h4 node-data="itemTitle">',c+=r(t.name),c+='</h4> <span class="itemPrice"><em>￥</em><span node-data="itemPrice">',c+=r(t.skuPrice),c+="</span></span> \x3c!-- ",t.rebate>0&&(c+=' <div class="fan fan-s"> <em class="icon-fan-s"></em> <span>最高返',c+=r(t.rebate),c+="国美币</span> </div> "),c+=" --\x3e </dd> </dl> "}),c+=" ",new String(c)})},"392":function(t,exports,e){"use strict";(function($){$("body").attr("data-module","1"),e(30);var t=e(393),i=e(69),n=e(399),a=e(400),r=e(401),o=e(170),s=e(407),c=e(408),l=e(409),d=e(410),u=e(413);e(25).setPageData("topicDetail");var h=e(415),p=e(417);t.init(),a.init(),r.init(),n.init(),o.init(),s.init(),u.init(),d.init(),h.init(),p.init(),c.init(),l.init(),$("body").on("click",'[data-node="circle"]',{"done":function(){t.getLoginState(),window.location.reload()}},i),$("img").lazyload({"effect":"fadeIn"})}).call(exports,e(0))},"393":function(t,exports,e){"use strict";(function($,i){e(30);var n=e(17),a=e(7),r=e(14),o=e(59),s=e(75),c=e(394),l=e(395),d=e(396),u=e(63),h=e(397),p=e(398),f=$("[data-node='loadlist']"),m=$("[data-node='comment_Msg']"),g=i.topicid,v=$("[data-node='more-topic']"),b='[data-node="textareaTips"]';f.css("display","none"),$("[data-node='loading']").css("display","none"),$("[data-node='noload']").css("display","none"),$("[data-node='imgUl']").addClass("hide");var y=function(){m.on("click",u.commentCheck),v.on("click","[data-node='a_Submit']",c),v.on("click","[data-node='secondCom_Key']",l.secondCom_Key),v.on("click","[data-node='hideComBox']",l.hideComBox),v.on("click","[data-node='a_secondComBtn']",l.a_secondComBtn),v.on("click",'[data-node="smilies_Face"]',h.showEmoji),v.on("click","[data-node='showMoreList']",d),o()&&(v.on("keydown","textarea",x),v.on("blur","textarea",w))},x=function(){$(this).parent(m).find(b).addClass("hide")},w=function(){var t=$(this),e=$.trim(t.val());t.val(e),e.length?t.parent(m).find(b).addClass("hide"):t.parent(m).find(b).removeClass("hide")},_=function(){u.getLoginState()&&n.insert(function(t){h.insertAtCursor(h.curretTextAreaObj(),t.reg)}),s({"id":g,"currPage":1,"pageSize":10,"listSize":2}),y(),p.lodingMore(),p.goComment(),n.init(),$("img").lazyload({"effect":"fadeIn"})};a(r.comment.enableEditor).sub(function(t){"enable"==t.pid&&u.getLoginState()}),t.exports={"init":_,"getLoginState":u.getLoginState}}).call(exports,e(0),e(1))},"394":function(t,exports,e){"use strict";(function($,i){function n(t){return 1==r&&i.userId==t?i.i_domain+"member/profileHome":i.group_domain+"ta/"+t+".html"}function a(t){function e(t){return parseInt(t)<10?"0"+t:t}var i=new Date(t),n=i.getFullYear(),a=i.getMonth()+1,r=i.getDate(),o=i.getHours(),s=i.getMinutes(),c=i.getSeconds();return n+"-"+e(a)+"-"+e(r)+" "+e(o)+":"+e(s)+":"+e(c)}var r=1,o=e(4),s=e(8),c=e(168),l=e(73),d=e(9),u=e(2),h=e(5),p=e(63),f=e(17),m=e(71),g=e(169),v=e(56),b=$("[data-node='comment_Msg']"),y=i.isExpert,x=i.product_item_gome,w=function(){if(!d())return p.popUnion(),!1;var t=$(this);if(t.hasClass("submiting"))return!1;var e=b.attr("data-headface"),w=t.parents().eq(1),_=w.children("textarea").val();if((_=_.trim())&&v(_,!0))return!1;for(var S=w.attr("data-tid"),I=w.find("[data-node='imgUl']").children("li"),k=[],T=0;T<I.length;T++){var C=$(I[T]).find("img").attr("src");C&&k.push(C)}var E=w.find("[data-node='addImgGoods']");if(_||k.length||E.hasClass("hasGoods")){t.addClass("submiting");var P=null,R="",U="",B="";if(E.hasClass("hasGoods")){var q=E.find("[data-node='goodsIn']");R=q.attr("data-shopId"),U=q.attr("data-itemId"),B=q.attr("data-skuId"),P=1}else P=0;var L={"reply_type":P,"topicid":S,"content":_,"pics":k,"shopid":R,"itemid":U,"groupId":i.groupid};B&&(L.skuid=B),u.post(h.get("commentFirstV2"),{"data":L}).then(function(d){if(d.success){var u=d.data,h=u.content;h=l(h),w.children("textarea").val("");var p=null;if(u.pics.length>0){var v={"picsSrc":u.pics,"picture":u.pictures,"length":u.pics.length};p=g(v)}var b="",_="",I="",k="",T="",C="",E="";if(u.item){var R=u.item;b=x,_=R.mainImage,I=R.name,k=null!==R.salePrice?R.salePrice:"暂无售价",T=R.id,C=u.id,E=u.skuId?"-"+u.skuId:""}var U=n(d.data.user.id),B=1==r&&i.userId!=d.data.user.id,q={"showSecComm":"hide","mall_domain":u.item&&u.item.itemId&&("PUSHBUYPRICE"===$.trim(u.item.pricetype)||"TUANPRICE"===$.trim(u.item.pricetype))?i.product_item_tuan_gome:b,"itemsPic":_,"itemShopNameItem":I,"itemPrice":k,"shopId":T,"itemShopId":C,"skuId":E,"imageStr":p,"UserId":U,"dlShowBorder":"clearfix bd-bottom","userIsExpert":y,"isExpert":u.expertInfo.isExpert,"userPic":u.user.facePicUrl,"username":u.user.nickname,"backTopicId":u.id,"content":f.parseEmoji(h),"topicType":P,"topicId":u.topicId,"currUserImg":e,"times":m(a(u.createTime)),"isFirstCom":!0,"userSubmit":!0,"showReport":B,"kid":u.kid,"canDelete":!0,"pricetype":u.item?$.trim(u.item.pricetype):"","itemId":u.item&&u.item.itemId?u.item.itemId:"","userQuantity":0};$("[data-node='hidDiv']").css("display","block");var L=c(q),A=$("[data-circlecom='"+S+"']");0===A.find("dl").length?A.append(L):A.find("dl").eq(0).before(L),$("[data-tid='"+S+"']").children('[data-node="addImgGoods"]').attr("data-imgnum",9).attr("data-goodstr","").removeClass("hasGoods"),$("[data-tid='"+S+"']").find("[data-node='imgUl']").attr("data-imgsrt","").addClass("hide").children(".imgClass").remove(),$("[data-tid='"+S+"']").find("[data-node='addGoods_btn']").removeClass("disabled"),$("[data-tid='"+S+"']").find("[data-node='addImg_btn']").removeClass("disabled"),$("[data-node='goodsIn']").remove();$("[id-node='"+S+"']");s.init("评论成功");var j=A.parents("[data-left]").eq(0).find('[data-node="topic-allNum"]'),D=parseInt(j.eq(0).text(),10);D++,j.text(D)}else 881001===d.code?o("评论内容不能超过200个汉字"):404===d.code||410===d.code?o("抱歉，该话题已被删除",{"ok":function(){window.location.href="/index/get_error?code=topic_404"}}):422===d.code?o("抱歉，服务器君正在打盹",{"ok":function(){window.location.href="/index/get_error?code=500"}}):403===d.code?o("抱歉，该话题审核不通过！",{"ok":function(){window.location.href="/index/get_error?code=topic"}}):o(d.message);t.removeClass("submiting")},function(){t.removeClass("submiting")})}else o("请输入评论内容！")};t.exports=w}).call(exports,e(0),e(1))},"395":function(t,exports,e){"use strict";(function($,i){function n(t){return 1==o&&i.userId==t?i.i_domain+"member/profileHome":i.group_domain+"ta/"+t+".html"}var a=e(59),r=e(75),o=1,s=e(4),c=e(73),l=e(9),d=e(2),u=e(5),h=e(63),p=e(146),f=e(56),m=function(){if(!l())return h.popUnion(),!1;var t=$(this);if(t.hasClass("submiting"))return!1;var e=t.parents().eq(2).attr("data-ispublish"),a="";"1"==e?e=!1:(e=!0,a=t.parents().eq(2).attr("data-replycommentid"));var o=t.attr("data-gettopicid"),m=$("[data-htid='"+o+"']").attr("data-tid"),g=t.parents().eq(1).children("textarea").val();g=g.trim();var v=o,b={"topic_reply_id":v,"topicid":m,"content":g,"topic_subreply_id":a,"group_id":i.groupid};if(g){if(f(g,!0))return!1;t.addClass("submiting");var y=$("[data-ddlist='"+o+"']"),x=y.parents("dl").eq(0),w=parseInt(x.attr("data-allNum"),10)||0,_=y.parents("[data-left]").eq(0).find('[data-node="topic-allNum"]'),S=parseInt(_.eq(0).text(),10);d.post(u.get("secondtopicV2"),{"data":b}).then(function(i){if(i.success){var a=i.data.content;a=c(a);var l="",d="",u=n(i.data.user.id),h="javascript:;";e&&(l=i.data.topicSubReplyUser.nickname,d=i.data.topicSubReplyUser.id,h=n(d));var f={"SenUserId":u,"threeUserId":h,"topicType":0,"backTopicId":o,"parentCommentId":o,"topicId":i.data.topicId,"replayToPub":e,"content":a,"replyUserName":i.data.user.nickname,"replyUserId":i.data.user.id,"beReplyUserName":l,"beReplyUserId":d,"replyCommentId":i.data.id,"canDelete":!0},g=p(f);y.find(".comments-box").removeClass("hide").append(g),$("[data-parentTopicIdBtn='"+o+"']").css("display","none"),$("[data-parentTopicId='"+o+"']").css("display","none"),$("[data-parentTopicId='"+o+"']").removeAttr("data-replayto"),$(".textarea-bx","[data-parentTopicId='"+o+"']").val(""),w++,x.attr("data-allNum",w),S++,_.text(S)}else 500===i.code||"请求参数为空"===i.message?s(i.message):(403===i.code&&(i.message="抱歉，该回复审核不通过！"),s(i.message,{"ok":function(){$("[data-node=circleCom]").empty(),r({"id":m,"currPage":1,"pageSize":10,"listSize":2,"reGet":!0})}}));t.removeClass("submiting")},function(){t.removeClass("submiting")})}else s("请输入评论内容！")},g=function(){if(!l())return h.popUnion(),!1;var t=$(this),e=t.attr("data-replyuserid"),i=t.attr("data-replycommentid"),n=t.attr("data-comid"),r=t.attr("data-replayUser"),o=t.attr("data-publish"),s=$("[data-parenttopicid='"+n+"']").css("display"),c=$("[data-parentTopicId='"+n+"']");if(c.removeAttr("data-replyuserid"),c.removeAttr("data-replayTo"),c.removeAttr("data-replycommentid"),c.removeAttr("data-isPublish"),c.attr("data-replyuserid",e),c.attr("data-replayTo",r),c.attr("data-isPublish",o),c.attr("data-replycommentid",i),c.children(".topic-publish-content").children("textarea").attr("placeholder","回复: "+r),a()&&c.children(".topic-publish-content").children("label").html("回复: "+r),"none"==s){$(".secondText").css("display","none"),$(".pack-up").css("display","none"),t.parents("dl").eq(0).next().show(),c.css("display","block"),$("[data-parentTopicIdBtn='"+n+"']").css("display","block");$(window).scrollTop()+$(window).height()+60<c.offset().top&&$("html,body").animate({"scrollTop":c.offset().top-$(window).height()+185},200),c.children(".topic-publish-content").children("textarea").focus(),c.find('[data-node="a_secondComBtn"]').attr("data-allNum",t.attr("data-allNum")),a()&&c.children(".topic-publish-content").children("label").removeClass("hide")}},v=function(){if(!l())return h.popUnion(),!1;var t=$(this).attr("data-parentTopicIdBtn");$("[data-parentTopicId='"+t+"']").css("display","none"),$("[data-parentTopicId='"+t+"']").children("textarea").attr("placeholder","说点什么吧"),$("[data-parentTopicIdBtn='"+t+"']").css("display","none"),$("[data-parentTopicId='"+t+"']").removeAttr("data-isPublish").removeAttr("data-replayTo"),$(".textarea-bx","[data-parentTopicId='"+t+"']").val("")};t.exports={"a_secondComBtn":m,"secondCom_Key":g,"hideComBox":v}}).call(exports,e(0),e(1))},"396":function(t,exports,e){"use strict";(function($,i){function n(t){return 1==l&&i.userId==t?i.i_domain+"member/profileHome":i.group_domain+"ta/"+t+".html"}var a=e(2),r=e(5),o=e(73),s=e(146),c=e(9),l=1==c()?1:0,d=function(){function t(t){var e=i.userId;return 1==l&&(e==t.creatorId||e==t.groupCreatorId||e==t.topicCreatorId)}var e=$(this).attr("data-htid"),c=$(this),d="?page=1&pagesize=70&topic_replyid="+e;if("查看回复..."===c.html())!function(i,c){a.get(r.get("getRelyListV2")+i).then(function(i){var a=i.data.topicSubReplys;if(a.length>2){var r="";$("[data-ddlist='"+e+"']").find(".comments-box").empty();for(var l=0;l<a.length;l++){var d=a[l],u=d.content;u=o(u);var h="",p="",f=!1,m=n(d.user.id),g="javascript:;";d.topicSubReplyUser&&(h=d.topicSubReplyUser.nickname,p=d.topicSubReplyUser.id,f=!0,g=n(p));var v={"SenUserId":m,"threeUserId":g,"topicType":0,"backTopicId":e,"parentCommentId":e,"topicId":d.topicId,"replayToPub":f,"content":u,"replyUserName":d.user.nickname,"replyUserId":d.user.id,"beReplyUserName":h,"beReplyUserId":p,"replyCommentId":d.id,"canDelete":t(d)};r+=s(v)}$("[data-ddlist='"+e+"']").find(".comments-box").append(r),r="",c.html("收起"),c.parent().prevAll("dl").eq(0).attr("data-showList",1)}else c.addClass("hide"),$("[data-ddlist='"+e+"']").parent().addClass("bd-bottom")})}(d,c);else{for(var u=$("[data-ddlist='"+e+"']").find(".comments-s"),h=2;h<u.length;h++)u.eq(h).remove();c.html("查看回复..."),c.parent().prevAll("dl").eq(0).attr("data-showList",0)}};t.exports=d}).call(exports,e(0),e(1))},"397":function(t,exports,e){"use strict";(function($){var i,n=e(9),a=e(17),r=e(63),o=[],s=function(t,e,i){if(t.setSelectionRange)t.setSelectionRange(e,i);else if(t.createTextRagen){var n=t.createTextRange();n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",i-e),n.select()}t.focus()},c=function(t,e){if(t.selectionStart>=0){var i=t.value,n=t.selectionStart;t.value=i.substring(0,n)+e+i.substring(t.selectionEnd),t.selectionStart=t.selectionEnd=n+e.length,t.focus()}else if(void 0!==document.selection&&void 0!==document.selection.createRange){t.focus(),$(t).siblings('[data-node="textareaTips"]').addClass("hide");var a=document.selection.createRange();a.text=e,a.select()}},l=function(){if(i?i.hide():(i=$('[data-node="picPopBox"]'),i.hide()),!n())return r.popUnion(),!1;var t=$(this),e=t.offset(),s=e.left-2,c=e.top+38;return o=t.closest(".topic-publish-content").children("textarea"),o.focus(),$('[data-node="faceBox"]').is(":hidden")?a.show(s,c):a.hide(),!1};t.exports={"showEmoji":l,"insertAtCursor":c,"selectText":s,"curretTextAreaObj":function(){return o.get(0)}}}).call(exports,e(0))},"398":function(t,exports,e){"use strict";(function($,i){var n=e(75),a=e(9),r=$("[data-node='more-topic']"),o=e(15),s=function(){r.on("click","[data-node='loadlist']",function(){for(var t=$(this).parent("[data-node='hidDiv']"),e=t.attr("data-comtopicid"),i=t.find("[data-node='userSubmit']"),a=$(this).attr("data-addmorepages"),r=$(this).attr("data-listsize"),o=parseInt(a)+1,s=0,c=i.length;s<c;s++){var l=$(i[s]);l.next("a").remove(),l.next("div").remove(),l.remove()}return n({"id":e,"currPage":o,"pageSize":r,"listSize":2,"nodelist":"nodelist"}),!1})},c=function(){$("body").on("click","[data-action='goComment']",function(){if(!a())return o(),!1;var t=$($(this).parents()[2]).attr("data-conter-ul");window.BP&&BP.send({"event_id":"G000P008","group_id":i.groupid,"topic_id":i.topicid,"circle_type":i.s_c,"channel_id":"in-pinglun"});var e=$("[data-left='"+t+"']").children("[data-node='commentBox']"),n=e.offset().top;$("[data-tid='"+t+"']").children("textarea").focus(),$("html,body").animate({"scrollTop":n},200)})};t.exports={"lodingMore":s,"goComment":c}}).call(exports,e(0),e(1))},"399":function(t,exports,e){"use strict";(function($){var i=e(58),n=$("[data-node='praiseClick']");n.children("em").hasClass("active")&&n.children("span").html("取消点赞");var a=function(){return i("body",'[data-node="praiseClick"]',{"mode":"normal"}),!1};t.exports={"init":a}}).call(exports,e(0))},"4":function(t,exports,e){"use strict";(function($){var i=e(6),n=function(){},a=function(t,e){t=t||"",e=e||{};var a={"fixed":!0,"modal":!0,"autofocus":!1,"content":'<p class="del-pop-p">'+t+"</p>","className":"pop-box","okCls":"pc-btn pc-btnh35 circle-pop-btn","ok":n};$.extend(!0,a,e);var r=i(a),o=r._$("header"),s=r._$("title");return e.title||s.css("borderBottom","none"),o.show(),r.show(),r};t.exports=a}).call(exports,e(0))},"400":function(t,exports,e){"use strict";(function($,i){var n=e(31).shareto,a=e(72),r=function(){var t=$("body"),e=i.imgpath+"/images/public/down-logo.png",r=function(t){var i=t.closest("ul");return{"url":i.data("surl"),"title":i.data("stitle"),"pic":i.data("spic")||e,"summary":i.data("content")||"这里有志趣相投的小伙伴，机智诙谐的猛料，还有你"}},o=function(t){return function(){var e=r($(this)),i=$(this).closest(".topic-conter").attr("data-conter-ul");return n[t](e),a({"page":"ht","shareTo":t,"shareId":i}),!1}};t.on("click","[data-node='wx']",function(){var t=$(this).closest(".topic-conter").attr("data-conter-ul");return n.weixin({"url":i.wap_circle_url+"/topic-"+t+".html"}),a({"page":"ht","shareTo":"wx","shareId":t}),!1}),t.on("click","[data-node='wb']",o("wb")),t.on("click","[data-node='qq']",o("qq")),t.on("click","[data-node='qzone']",o("qz"))};t.exports={"init":r}}).call(exports,e(0),e(1))},"401":function(t,exports,e){"use strict";(function(i,$){var n=e(2),a=e(5),r=e(4),o=e(7),s=e(14),c=e(15),l=e(9),d=0,u=function(){window.location.href=i.passport_domain+"login/index"},h=$("[data-node='collect']");h.children("em").parent().hasClass("active")&&h.children("span").html("取消收藏");var p=function(){$("body").on("click","[data-node='collect']",function(){function t(){var t=m;n.post(a.get("collectTopic"),t).done(function(t){o(s.comment.enableEditor).pub({"pid":"enable"}),t&&200===t.code&&t.success?1===f?(h.data("status",1),h.find("em").parent().addClass("active"),h.find("span").text("取消收藏")):2===f&&(h.data("status",0),h.find("em").parent().removeClass("active"),h.find("span").text("收藏")):t&&422===t.code?u():r(t.message),d&&window.location.reload()}).fail(function(){}).always(function(){})}var e=i;window.BP&&BP.send({"event_id":"G000P008","group_id":e.groupid,"topic_id":$($(this).parents()[2]).attr("data-conter-ul"),"circle_type":e.s_c,"channel_id":"in-shoucang"});var h=$(this),p=h.data("status"),f=0===p?1:2,m={"data":{"groupId":i.groupid,"topicId":$(h.parents()[2]).attr("data-conter-ul"),"type":f},"onLogin":t,"refresh":!0};return l()?(d=0,t()):(d=1,c(t)),!1})};t.exports={"init":p}}).call(exports,e(1),e(0))},"402":function(t,exports,e){var i=e(3);t.exports=i("src/js/page/topicDetails/topicAddMore/title",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$escape),a=t.id,r=t.htxqmodule,o=t.coverPic,s=t.isUpper,c=t.isEssence,l=t.style,d=i.$string,u=t.topicName,h=t.isMeihao,p=t.facePicUrl,f=t.nickName,m=t.iconMeihao,g=t.UserId,v=t.isExpertSign,b=t.iconExpert,y=t.lastReplyTime,x=t.allNum,w=t.userQuantity,_=t.extImagesLst,S=t.extSpic,I=t.extStitle,k=t.share_text,T=t.jctjmodule,C=t.dataParise,E=t.isLike,P=t.isLikeName,R=t.userCollectionStatu,U=t.userCollection,B=t.userCollectionName,q=t.mshopFlag,L=t.mshopUrl,A=t.html,j=t.isGroupOwn,D=t.showReport,z=t.is_del,H="";return H+='<div class="bjfff" data-node="tiles" data-title =',H+=n(a),H+=' modelid="',H+=n(r),H+='"> ',o&&(H+=' <div class="topic-cover"><img src=',H+=n(o),H+="></div> "),H+=' <div class="topic-title0"> <h1> ',s&&(H+='<em class="set-top" data-node="topic-top">置顶</em> '),H+=" ",c&&(H+='<em class="set-spark" data-node="topic-high">精品</em> '),H+=" ",l&&(H+='<em class="set-access">专访</em> '),H+=' <span data-node="topic-title">',H+=d(u),H+='</span> </h1> <p class="topic-source" data-node="likewrap"> ',h?(H+=' <span class="fl source-title" > <img onerror="imgError(this, \'h\')" src=',H+=n(p),H+=' alt="">',H+=n(f),H+=' </span > <span class="fl icon-meihao">',H+=n(m),H+="</span> "):(H+=' <a class="fl source-title" href="',H+=n(g),H+='" target="_blank"> <img onerror="imgError(this, \'h\')" src=',H+=n(p),H+=' alt="">',H+=n(f),H+=" </a> ",v&&(H+=' <span class="fl icon-expert">',H+=n(b),H+="</span> "),H+=" "),H+=' <span class="fl">',H+=n(y),H+='</span> <span class="fr"> <em class="icon-discuss"></em> <span class="topic-count" data-node="topic-allNum">',H+=n(x),H+='</span> </span> <span class="fr"> <em class="icon-like"></em> <span class="topic-count" data-node="topiclinke">',H+=n(w),H+='</span> </span>  </a> </p> </div> <div class="topic-conter" data-conter-ul =',H+=n(a),H+=' > <ul class="source-lef-list" data-node="ulFloat" data-surl="',H+=n(_),H+='" data-spic="',H+=n(S),H+='" data-stitle="',H+=n(I),H+='" data-content="',H+=n(k),H+='" > \x3c!--modelid="',H+=n(T),H+='"--\x3e <li modelid="',H+=n(T),H+='0001"><a href="javascript:void(0)" data-node="wx"><em class="icon-weixin"></em><span>微信</span></a></li> <li modelid="',H+=n(T),H+='0002"><a href="javascript:void(0)" data-node="wb"><em class="icon-weibo"></em><span>微博</span></a></li> <li modelid="',H+=n(T),H+='0003"><a href="javascript:void(0)" data-node="qq"><em class="icon-qq"></em><span>QQ</span></a></li> <li modelid="',H+=n(T),H+='0004"><a href="javascript:void(0)" data-node="qzone"><em class="icon-qzone"></em><span>QQ空间</span></a></li> <li modelid="',H+=n(T),H+='0005"> <a href="javascript:void(0)" data-id="',H+=n(a),H+='" data-node="praiseClick" data-type="1" data-praise="',H+=n(C),H+='" class="',H+=n(E),H+='"> <em class="icon-like-big ',H+=n(E),H+=' "></em><span>',H+=n(P),H+='</span></a></li> <li modelid="',H+=n(T),H+='0006"> <a href="javascript:void(0)" data-node="collect" data-status="',H+=n(R),H+='" class="',H+=n(U),H+='"> <em class="icon-collect-big ',H+=n(U),H+='" ></em><span>',H+=n(B),H+='</span></a></li> <li modelid="',H+=n(T),H+='0007"><a data-action="goComment" href="javascript:;"><em class="icon-discuss-big"></em><span>评论</span></a></li> ',1==q&&(H+=" <li><a href=",H+=n(L),H+=' target="_blank"><em class="icon-meidian-big"></em><span>美店</span></a></li> '),H+=' </ul> <div class="source-right-box"> ',H+=d(A),H+=' </div> </div> <div class="topic-operate"> ',j&&(H+=" ",H+=s?' <a data-node="userTopic-topHigh" href="javascript:;" title="取消置顶" data-ac="0" data-type="0">取消置顶</a> ':' <a data-node="userTopic-topHigh" href="javascript:;" title="置顶" data-ac="0" data-type="1">置顶</a> ',H+=' <em class="line"></em> ',H+=c?' <a data-node="userTopic-topHigh" href="javascript:;" title="取消加精" data-ac="1" data-type="0" >取消加精</a> ':' <a data-node="userTopic-topHigh" href="javascript:;" title="加精" data-ac="1" data-type="1" >加精</a> ',H+=' <em class="line"></em> '),H+=" ",D&&(H+=' <a data-action="topic-report" href="javascript:;" title="举报该话题">举报</a> '),H+=" ",z&&D&&(H+=' <em class="line"></em> '),H+=" ",z&&(H+=' <a data-node="userTopic-del" href="javascript:;" title="删除该话题">删除</a> '),H+=" </div> </div> ",new String(H)})},"403":function(t,exports,e){var i=e(3);t.exports=i("src/js/page/topicDetails/topicAddMore/comList",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$escape),a=t.id,r=t.htpllbmodule,o=t.ggjzgdmodule,s=t.imgPath,c="";return c+='<div class="bjfff" data-node ="hidDiv" data-ComTopicId=',c+=n(a),c+=' > <div class="circle-comments" data-node="circleCom" data-circleCom = "',c+=n(a),c+='" modelid="',c+=n(r),c+='"> </div> <div class="more-comments" data-node="loadlist" style="display: none;" modelid="',c+=n(o),c+='"> <a href="##" class="clearfix"> <span> <img src="',c+=n(s),c+='/images/circle/small-logo.png" >点击加载更多 <em class="icon icon-right"></em> </span> </a> </div> <div class="more-comments" data-node="loading" style="display: none;" > <a href="javascript:;" class="disabled clearfix"><span><img src="',c+=n(s),c+='/images/public/loading.gif">正在加载...</span></a> </div> <div class="more-comments" data-node="noload" style="display: none;" > <a href="javascript:;" class="disabled clearfix"> <span>没有可加载内容</span> </a> </div> </div>',new String(c)})},"404":function(t,exports,e){var i=e(3);t.exports=i("src/js/page/topicDetails/topicAddMore/commentBox",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$escape),a=t.htcyplmodule,r=t.isExpert,o=t.userImage,s=t.id,c=t.readyOnly,l=t.isLoginClass,d=t.isLoginStr,u=t.allNum,h="";return h+='<div data-node="commentBox" class="topic-review-box" modelid="',h+=n(a),h+='"> <h2 class="review-title">参与评论</h2> <div class="bjfff margin-btom20" data-node="comment_FirDiv"> <div class="text-field-box clearfix"> <div class="topic-user-head"> ',r&&(h+=' <em class="icon-daren"></em> '),h+=' <img src="',h+=n(o),h+='" onerror="imgError(this, \'g\')"> </div> <div class="topic-publish-content" data-node="comment_Msg" data-nickname="" data-tid="',h+=n(s),h+='" data-userid="0" data-headface="',h+=n(o),h+='"> <textarea class="textarea-bx" ',h+=n(c),h+=' placeholder="说点什么吧…" style="background: rgb(255, 255, 255);"></textarea> <label class="textarea-tips hide" data-node="textareaTips">说点什么吧…</label> <div data-node="addImgGoods" data-imgNum ="9"> <ul data-node="imgUl" class="clearfix hide"></ul> </div> <div class="publish-face-bx" data-publish="',h+=n(s),h+='"> <p class="icon-face cursor-pointer" data-node="smilies_Face"><em class="icon-emoji"></em>表情</p> <p class="icon-face cursor-pointer" data-node="addImg_btn"><em class="icon-picture"></em>图片</p> <p class="icon-face cursor-pointer" data-node="addGoods_btn"><em class="icon-goods"></em>商品</p> <a href="javascript:;" class="pc-btn pc-btnh30 pc-btnw105 ',h+=n(l),h+='" data-node="a_Submit">',h+=n(d),h+='</a> </div> </div> </div> </div> </div> <div class="comment-title" data-node="hidDiv"> <div class="bd-bottom" ><span class="red" data-node="topic-allNum">',h+=n(u),h+="</span><span>条评论</span></div> </div> ",new String(h)})},"405":function(t,exports,e){var i=e(3);t.exports=i("src/js/page/topicDetails/topicAddMore/topicRight",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$escape),a=t.id,r=t.htqzxxmodule,o=i.$string,s=t.topicRT,c=t.htrmhtmodule,l=t.showTab,d=t.hotTopicUl,u=i.$each,h=t.tabList,p=(t.value,t.index,t.topicDomain),f=t.htxyymodule,m="";return m+='<div class="topic-right topic-absolute" data-topicRT= ',m+=n(a),m+='> <div class="topic-r-t" modelid="',m+=n(r),m+='"> \x3c!--modelid="',m+=n(r),m+='"--\x3e ',m+=o(s),m+=' </div> <div class="topic-position" data-node="topic_xi"> <div class="topic-r-b" data-node="hot_topics"> \x3c!--modelid="',m+=n(c),m+='"--\x3e <div class="clearfix topic-right-tab" data-node="topic-tab"> <a href="javascript:;" class="',l&&(m+="active"),m+='" data-index="0">热门话题</a> ',l&&(m+=' <a href="javascript:;" data-index="1">话题推荐</a> '),m+=' </div> <ul data-node="topic-tab-list"> ',m+=o(d),m+=" </ul> ",l&&(m+=' <ul style="display:none;" data-node="topic-tab-list"> ',u(h,function(t,e){m+=' <li> <a target="_blank" title="',m+=n(t.name),m+='" href="',m+=n(p),m+=n(t.id),m+='.html"> ',t.picture&&(m+=' <img src="',m+=n(t.picture),m+='" alt="',m+=n(t.name),m+='" onerror="imgError(this, \'g\')"> '),m+=" <p>",m+=n(t.name),m+='</p> <div class="text-icon"> <dfn>',m+=n(t.pageviewText),m+="</dfn> </div> </a> </li> "}),m+=" </ul> "),m+=' </div> <div class="next-page" data-node="next-page" data-get-next-topic =',m+=n(a),m+=' style="display: none" modelid="',m+=n(f),m+='"> <p><span class="f12" data-node="times"></span>下一篇</p> <a></a> </div> </div> </div> ',new String(m)})},"406":function(t,exports,e){"use strict";(function(t){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(e,i){var n=e.History=e.History||{},a=t;if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={"bind":function(t,e,i){a(t).bind(e,i)},"trigger":function(t,e,i){a(t).trigger(e,i)},"extractEventData":function(t,e,i){return e&&e.originalEvent&&e.originalEvent[t]||i&&i[t]||void 0},"onDomLoad":function(t){a(t)}},void 0!==n.init&&n.init()}(window),function(t,i){var n=t.console||void 0,a=t.document,r=t.navigator,o=!1,s=t.setTimeout,c=t.clearTimeout,l=t.setInterval,d=t.clearInterval,u=t.JSON,h=t.alert,p=t.History=t.History||{},f=t.history;try{o=t.sessionStorage,o.setItem("TEST","1"),o.removeItem("TEST")}catch(t){o=!1}if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,void 0!==p.init)throw new Error("History.js Core has already been loaded...");p.init=function(t){return void 0!==p.Adapter&&(void 0!==p.initCore&&p.initCore(),void 0!==p.initHtml4&&p.initHtml4(),!0)},p.initCore=function(i){if(void 0!==p.initCore.initialized)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||a.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var t,e=p.intervalList;if(void 0!==e&&null!==e){for(t=0;t<e.length;t++)d(e[t]);p.intervalList=null}},p.debug=function(){p.options.debug&&p.log.apply(p,arguments)},p.log=function(){var t,i,r,o,s,c=!(void 0===n||void 0===n.log||void 0===n.log.apply),l=a.getElementById("log");for(c?(o=Array.prototype.slice.call(arguments),t=o.shift(),void 0!==n.debug?n.debug.apply(n,[t,o]):n.log.apply(n,[t,o])):t="\n"+arguments[0]+"\n",i=1,r=arguments.length;i<r;++i){if(s=arguments[i],"object"===(void 0===s?"undefined":e(s))&&void 0!==u)try{s=u.stringify(s)}catch(t){}t+="\n"+s+"\n"}return l?(l.value+=t+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):c||h(t),!0},p.getInternetExplorerMajorVersion=function(){return p.getInternetExplorerMajorVersion.cached=void 0!==p.getInternetExplorerMajorVersion.cached?p.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=a.createElement("div"),i=e.getElementsByTagName("i");(e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e")&&i[0];);return t>4&&t}()},p.isInternetExplorer=function(){return p.isInternetExplorer.cached=void 0!==p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion())},p.options.html4Mode?(n.log(1),p.emulated={"pushState":!0,"hashChange":!0}):p.emulated={"pushState":/trident\/7.0/i.test(r.userAgent),"hashChange":p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8},p.enabled=!p.emulated.pushState,p.bugs={"setHash":Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),"safariPoll":Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),"ieDoubleCheck":Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),"hashEscape":Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},p.cloneObject=function(t){var e,i;return t?(e=u.stringify(t),i=u.parse(e)):i={},i},p.getRootUrl=function(){var t=a.location.protocol+"//"+(a.location.hostname||a.location.host);return a.location.port&&(t+=":"+a.location.port),t+="/"},p.getBaseHref=function(){var t=a.getElementsByTagName("base"),e=null,i="";return 1===t.length&&(e=t[0],i=e.href.replace(/[^\/]+$/,"")),i=i.replace(/\/+$/,""),i&&(i+="/"),i},p.getBaseUrl=function(){return p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl()},p.getPageUrl=function(){var t=p.getState(!1,!1),e=(t||{}).url||p.getLocationHref();return e.replace(/\/+$/,"").replace(/[^\/]+$/,function(t,e,i){return/\./.test(t)?t:t+"/"})},p.getBasePageUrl=function(){return p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t,e,i){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/"},p.getFullUrl=function(t,e){var i=t,n=t.substring(0,1);return e=void 0===e||e,/[a-z]+\:\/\//.test(t)||(i="/"===n?p.getRootUrl()+t.replace(/^\/+/,""):"#"===n?p.getPageUrl().replace(/#.*/,"")+t:"?"===n?p.getPageUrl().replace(/[\?#].*/,"")+t:e?p.getBaseUrl()+t.replace(/^(\.\/)+/,""):p.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),i.replace(/\#$/,"")},p.getShortUrl=function(t){var e=t,i=p.getBaseUrl(),n=p.getRootUrl();return p.emulated.pushState&&(e=e.replace(i,"")),e=e.replace(n,"/"),p.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.getLocationHref=function(t){return t=t||a,t.URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash?t.location.href:-1==t.URL.indexOf("#")&&-1!=t.location.href.indexOf("#")?t.location.href:t.URL||t.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var i=p.getLastSavedState();return!i&&e&&(i=p.createStateObject()),t&&(i=p.cloneObject(i),i.url=i.cleanUrl||i.url),i},p.getIdByState=function(t){var e,i=p.extractId(t.url);if(!i)if(e=p.getStateString(t),void 0!==p.stateToId[e])i=p.stateToId[e];else if(void 0!==p.store.stateToId[e])i=p.store.stateToId[e];else{for(;;)if(i=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0===p.idToState[i]&&void 0===p.store.idToState[i])break;p.stateToId[e]=i,p.idToState[i]=t}return i},p.normalizeState=function(t){var i,n;return t&&"object"===(void 0===t?"undefined":e(t))||(t={}),void 0!==t.normalized?t:(t.data&&"object"===e(t.data)||(t.data={}),i={},i.normalized=!0,i.title=t.title||"",i.url=p.getFullUrl(t.url?t.url:p.getLocationHref()),i.hash=p.getShortUrl(i.url),i.data=p.cloneObject(t.data),i.id=p.getIdByState(i),i.cleanUrl=i.url.replace(/\??\&_suid.*/,""),i.url=i.cleanUrl,n=!p.isEmptyObject(i.data),(i.title||n)&&!0!==p.options.disableSuid&&(i.hash=p.getShortUrl(i.url).replace(/\??\&_suid.*/,""),/\?/.test(i.hash)||(i.hash+="?"),i.hash+="&_suid="+i.id),i.hashedUrl=p.getFullUrl(i.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(i)&&(i.url=i.hashedUrl),i)},p.createStateObject=function(t,e,i){var n={"data":t,"title":e,"url":i};return n=p.normalizeState(n)},p.getStateById=function(t){return t=String(t),p.idToState[t]||p.store.idToState[t]||void 0},p.getStateString=function(t){var e,i;return e=p.normalizeState(t),i={"data":e.data,"title":t.title,"url":t.url},u.stringify(i)},p.getStateId=function(t){var e;return e=p.normalizeState(t),e.id},p.getHashByState=function(t){var e;return e=p.normalizeState(t),e.hash},p.extractId=function(t){var e,i;return i=-1!=t.indexOf("#")?t.split("#")[0]:t,e=/(.*)\&_suid=([0-9]+)$/.exec(i),e?e[1]||t:t,(e?String(e[2]||""):"")||!1},p.isTraditionalAnchor=function(t){return!/[\/\?\.]/.test(t)},p.extractState=function(t,e){var i,n,a=null;return e=e||!1,i=p.extractId(t),i&&(a=p.getStateById(i)),a||(n=p.getFullUrl(t),i=p.getIdByUrl(n)||!1,i&&(a=p.getStateById(i)),a||!e||p.isTraditionalAnchor(t)||(a=p.createStateObject(null,null,n))),a},p.getIdByUrl=function(t){return p.urlToId[t]||p.store.urlToId[t]||void 0},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||void 0},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||void 0},p.hasUrlDuplicate=function(t){var e;return e=p.extractState(t.url),e&&e.id!==t.id},p.storeState=function(t){return p.urlToId[t.url]=t.id,p.storedStates.push(p.cloneObject(t)),t},p.isLastSavedState=function(t){var e,i,n,a=!1;return p.savedStates.length&&(e=t.id,i=p.getLastSavedState(),n=i.id,a=e===n),a},p.saveState=function(t){return!p.isLastSavedState(t)&&(p.savedStates.push(p.cloneObject(t)),!0)},p.getStateByIndex=function(t){return void 0===t?p.savedStates[p.savedStates.length-1]:t<0?p.savedStates[p.savedStates.length+t]:p.savedStates[t]},p.getCurrentIndex=function(){return p.savedStates.length<1?0:p.savedStates.length-1},p.getHash=function(t){var e=p.getLocationHref(t);return p.getHashByUrl(e)},p.unescapeHash=function(t){var e=p.normalizeHash(t);return e=decodeURIComponent(e)},p.normalizeHash=function(t){return t.replace(/[^#]*#/,"").replace(/#.*/,"")},p.setHash=function(t,e){var i,n;return!1!==e&&p.busy()?(p.pushQueue({"scope":p,"callback":p.setHash,"args":arguments,"queue":e}),!1):(p.busy(!0),i=p.extractState(t,!0),i&&!p.emulated.pushState?p.pushState(i.data,i.title,i.url,!1):p.getHash()!==t&&(p.bugs.setHash?(n=p.getPageUrl(),p.pushState(null,null,n+"#"+t,!1)):a.location.hash=t),p)},p.escapeHash=function(e){var i=p.normalizeHash(e);return i=t.encodeURIComponent(i),p.bugs.hashEscape||(i=i.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),i},p.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=p.unescapeHash(e)},p.setTitle=function(t){var e,i=t.title;i||(e=p.getStateByIndex(0))&&e.url===t.url&&(i=e.title||p.options.initialTitle);try{a.getElementsByTagName("title")[0].innerHTML=i.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(t){}return a.title=i,p},p.queues=[],p.busy=function(t){if(void 0!==t?p.busy.flag=t:void 0===p.busy.flag&&(p.busy.flag=!1),!p.busy.flag){c(p.busy.timeout);var e=function t(){var e,i,n;if(!p.busy.flag)for(e=p.queues.length-1;e>=0;--e)i=p.queues[e],0!==i.length&&(n=i.shift(),p.fireQueueItem(n),p.busy.timeout=s(t,p.options.busyDelay))};p.busy.timeout=s(e,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(t){return t.callback.apply(t.scope||p,t.args||[])},p.pushQueue=function(t){return p.queues[t.queue||0]=p.queues[t.queue||0]||[],p.queues[t.queue||0].push(t),p},p.queue=function(t,e){return"function"==typeof t&&(t={"callback":t}),void 0!==e&&(t.queue=e),p.busy()?p.pushQueue(t):p.fireQueueItem(t),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(c(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(t){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=s(function(){return p.doubleCheckClear(),p.stateChanged||t(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var e,i=p.extractState(p.getLocationHref());if(!p.isLastSavedState(i))return e=i,e||(e=p.createStateObject()),p.Adapter.trigger(t,"popstate"),p},p.back=function(t){return!1!==t&&p.busy()?(p.pushQueue({"scope":p,"callback":p.back,"args":arguments,"queue":t}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),f.go(-1),!0)},p.forward=function(t){return!1!==t&&p.busy()?(p.pushQueue({"scope":p,"callback":p.forward,"args":arguments,"queue":t}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),f.go(1),!0)},p.go=function(t,e){var i;if(t>0)for(i=1;i<=t;++i)p.forward(e);else{if(!(t<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(i=-1;i>=t;--i)p.back(e)}return p},p.emulated.pushState){var m=function(){};p.pushState=p.pushState||m,p.replaceState=p.replaceState||m}else p.onPopState=function(e,i){var n,a,r=!1,o=!1;return p.doubleCheckComplete(),(n=p.getHash())?(a=p.extractState(n||p.getLocationHref(),!0),a?p.replaceState(a.data,a.title,a.url,!1):(p.Adapter.trigger(t,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(r=p.Adapter.extractEventData("state",e,i)||!1,o=r?p.getStateById(r):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()),o||(o=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(o)?(p.busy(!1),!1):(p.storeState(o),p.saveState(o),p.setTitle(o),p.Adapter.trigger(t,"statechange"),p.busy(!1),!0))},p.Adapter.bind(t,"popstate",p.onPopState),p.pushState=function(e,i,n,a){if(p.getHashByUrl(n)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==a&&p.busy())return p.pushQueue({"scope":p,"callback":p.pushState,"args":arguments,"queue":a}),!1;p.busy(!0);var r=p.createStateObject(e,i,n);return p.isLastSavedState(r)?p.busy(!1):(p.storeState(r),p.expectedStateId=r.id,f.pushState(r.id,r.title,r.url),p.Adapter.trigger(t,"popstate")),!0},p.replaceState=function(e,i,n,a){if(p.getHashByUrl(n)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==a&&p.busy())return p.pushQueue({"scope":p,"callback":p.replaceState,"args":arguments,"queue":a}),!1;p.busy(!0);var r=p.createStateObject(e,i,n);return p.isLastSavedState(r)?p.busy(!1):(p.storeState(r),p.expectedStateId=r.id,f.replaceState(r.id,r.title,r.url),p.Adapter.trigger(t,"popstate")),!0};if(o){try{p.store=u.parse(o.getItem("History.store"))||{}}catch(t){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(t,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),o&&(p.onUnload=function(){var t,e,i;try{t=u.parse(o.getItem("History.store"))||{}}catch(e){t={}}t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in p.idToState)p.idToState.hasOwnProperty(e)&&(t.idToState[e]=p.idToState[e]);for(e in p.urlToId)p.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=p.urlToId[e]);for(e in p.stateToId)p.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=p.stateToId[e]);p.store=t,p.normalizeStore(),i=u.stringify(t);try{o.setItem("History.store",i)}catch(t){if(t.code!==DOMException.QUOTA_EXCEEDED_ERR)throw t;o.length&&(o.removeItem("History.store"),o.setItem("History.store",i))}},p.intervalList.push(l(p.onUnload,p.options.storeInterval)),p.Adapter.bind(t,"beforeunload",p.onUnload),p.Adapter.bind(t,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(l(p.safariStatePoll,p.options.safariPollInterval)),"Apple Computer, Inc."!==r.vendor&&"Mozilla"!==(r.appCodeName||"")||(p.Adapter.bind(t,"hashchange",function(){p.Adapter.trigger(t,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(t,"hashchange")})))},p.options&&p.options.delayInit||p.init()}(window)}).call(exports,e(0))},"407":function(t,exports,e){"use strict";(function($,i){var n=e(4),a=e(2),r=e(5),o=e(11),s=function(){$("body").on("click",'[data-node="userTopic-del"]',c)},c=function(){var t=$(this),e=$(t.parents().eq(2)).attr("data-left");o("",{"content":"<p class='del-pop-p' data-node='gettopId' data-topicH="+e+">确定要删除该话题吗？</p>","title":"提示","okCls":"two-button two-button-red","cancelCls":"two-button","ok":l,"btnWrapCls":"text-center"})},l=function(){var t=i.groupid,e={"id":$("[data-node='gettopId']").attr("data-topicH"),"groupId":t};a.post(r.get("topicDel"),{"data":e}).then(function(e){e.success?location.replace($GLOBAL_CONFIG.group_domain+"circle/"+t+".html"):n("删除失败！")})};t.exports={"init":s}}).call(exports,e(0),e(1))},"408":function(t,exports,e){"use strict";(function(i,$){var n=(e(4),e(2)),a=e(5),r=e(8),o=e(11),s=e(73),c=e(9),l=e(146),d=Number(c());t.exports={"affirm":function(t){var e=this;n.post(t.url,{"data":{"group_id":t.groupId,"topic_id":t.topicId,"del_id":t.id}}).then(function(i){if(i&&i.success&&200===i.code)if(t.type)e.EditDiscussNumber(t,1),t.node.parents("[data-htid]").eq(0).hide().attr("data-hide","1"),e.deleteSecondBack(t);else{var n=t.node.parents("dl").eq(0);e.deleteFristBack(t),e.EditDiscussNumber(t,(parseInt(n.attr("data-allnum"),10)||0)+1),n.hide(),"DL"!==n.next()[0].nodeName&&n.next().hide()}else r.init(i.message)},function(t){r.init(t.message)})},"deleteFristBack":function(t){},"deleteSecondBack":function(t){var e=this,i=t.node.parents("dl").eq(0),n=parseInt(i.attr("data-allNum"),10)||0;i.attr("data-showList");n--,i.attr("data-allNum",n),i.find("[data-hide='0']").length!==n&&e.getMoreSecondDiscuss(i.attr("data-commId"),i),2===n&&i.next().children("a").hide(),0===n&&(i.find(".comments-box ").hide(),"DL"!==i.next()[0].nodeName&&i.next().hide().children().hide())},"checkUser":function(t){var e=i.userId;return 1==d&&(e==t.creatorId||e==t.groupCreatorId||e==t.topicCreatorId)},"checkUserId":function(t){return 1==d&&i.userId==t?i.i_domain+"member/profileHome":i.group_domain+"ta/"+t+".html"},"getMoreSecondDiscuss":function(t,e){var i=this,r="?page=1&pagesize=70&topic_replyid="+t;n.get(a.get("getRelyListV2")+r).then(function(e){var n=e.data.topicSubReplys,a="";$("[data-ddlist='"+t+"']").find(".comments-box").empty();for(var r=0,o=n.length>2?2:n.length;r<o;r++){var c=n[r],d=c.content;d=s(d);var u="",h="",p=!1,f=i.checkUserId(c.user.id),m="javascript:;";c.topicSubReplyUser&&(u=c.topicSubReplyUser.nickname,h=c.topicSubReplyUser.id,p=!0,m=i.checkUserId(h));var g={"SenUserId":f,"threeUserId":m,"topicType":0,"backTopicId":t,"parentCommentId":t,"topicId":c.topicId,"replayToPub":p,"content":d,"replyUserName":c.user.nickname,"replyUserId":c.user.id,"beReplyUserName":u,"beReplyUserId":h,"replyCommentId":c.id,"canDelete":i.checkUser(c)};a+=l(g)}$("[data-ddlist='"+t+"']").find(".comments-box").append(a),a=""})},"EditDiscussNumber":function(t,e){var i=t.node.parents("[data-left]").eq(0).find('[data-node="topic-allNum"]'),n=parseInt(i.eq(0).text(),10);i.text(n-e)},"deletAlert":function(t){var e=this;o("",{"content":"<p class='del-pop-p'>确定要删除该评论吗？</p>","title":"提示","okCls":"two-button two-button-red","cancelCls":"two-button","ok":function(){e.affirm(t)},"btnWrapCls":"text-center"})},"deleteDiscuss":function(){var t=this;$("body").on("click",'[data-action="del-discuss"]',function(){var e=$(this),n="second"===e.attr("data-type"),r=n?a.get("deleteSecondDiscuss"):a.get("deleteDiscuss");t.deletAlert({"url":r,"groupId":i.groupid,"topicId":e.attr("data-topicId"),"id":e.attr("data-delId"),"node":e,"type":n})})},"init":function(){this.deleteDiscuss()}}}).call(exports,e(1),e(0))},"409":function(t,exports,e){"use strict";(function($){var i=e(2),n=e(5),a=e(8),r=e(9),o=e(15);t.exports={"parise":function(t){var e=this;t.node.addClass("parising"),i.post(n.get("praise"),{"data":{"id":t.id,"type":5,"isPraise":t.isPraise}}).then(function(i){if(i&&i.success&&200===i.code){var n=parseInt(t.node.text(),10);n=t.isPraise?n+1:n-1;var r=t.isPraise?"取消赞":"赞";t.isPraise?t.node.addClass("active")&&setTimeout(function(){t.node.addClass("actived").attr("title",r)},400):t.node.removeClass("actived").removeClass("active").attr("title",r),t.node.html(n+"<span></span>")}else i&&409===i.code?(a.init(i.message),t.node.addClass("actived").attr("title","取消赞")):881011===parseInt(i.code)?e.login(t):a.init(i.message);t.node.removeClass("parising")},function(e){t.node.removeClass("parising"),a.init(e.message)})},"login":function(t){var e=this;o(function(){e.parise(t)})},"bind":function(){var t=this;$("body").on("click",'[data-aciton="discuss-like"]',function(){var e=$(this);if(e.hasClass("parising"))return!1;var i={"id":e.attr("data-id"),"isPraise":Number(!e.hasClass("actived")),"node":e};r()?t.parise(i):t.login(i)})},"init":function(){this.bind()}}}).call(exports,e(0))},"410":function(t,exports,e){"use strict";(function($){var i=e(50),n=e(11),a=e(63),r=e(411),o=e(9),s=e(412),c=e(170).topFixed,l=e(7),d=e(14),u=e(53),h=$('[data-node="picPopBox"]'),p="",f=function(){$("body").on("click",'[data-node="addImg_btn"]',_).on("click","[data-node='addMoreImg']",g).on("click","[data-node='imgPics']",w).on("click",'[data-node="imgBigHind"]',x).on("click",'[data-node="hideBigPic"]',y).on("click",'[data-node="imgBigPN"]',b).on("click",'[data-node="deletImg"]',m).on("click",'[data-node="showImg"]',v).on("click",'[data-node="roteRo"]',r.init).on("click",'[data-node="addImg_btn"]',I).on("click",'[data-node="picPopBox"]',I).on("click",k)},m=function(){var t=$($(this).parents().eq(2)),e=t.children("a").children("img").attr("src"),i=t.parent(),a=i.parent(),r=parseInt(a.attr("data-imgnum"));n("确认删除该图片？",{"title":"提示","okCls":"two-button two-button-red","cancelCls":"two-button","btnWrapCls":"text-center","ok":function(){t.remove();var n=i.attr("data-imgsrt"),o=n.split(","),s=o;s.splice(e,1),i.attr("data-imgsrt",s),a.attr("data-imgnum",r+1),i.children("[data-node='addMoreImg']").removeClass("hide"),a.parent().find("[data-node='addImg_btn']").removeClass("disabled"),parseInt(r+1)>=9&&i.addClass("hide")}})},g=function(){var t=$($(this).parents().eq(1)).attr("data-imgNum");if(p=$($(this).parents().eq(2)).children(".publish-face-bx").attr("data-publish"),0==t)return!1;i(t,p)},v=function(){var t=$(this);if(t.hasClass("active"))return!1;var e=$(this).attr("data-active"),i=$(t.parents().eq(1)).children(".big-img").children(".img-hidden").children("[data-bigimg='"+e+"']");$(i).removeClass("hide").siblings().addClass("hide");var n=$(i).children("img");$(n).hasClass("srcError")&&($(n).removeClass("srcError"),$(n).attr("src",$(n).attr("data-imgsrc"))),t.addClass("active").siblings().removeClass("active");var a=$(t.parents().eq(1)).children(".big-title").children("[data-node='imgBigSrc']");$(a).attr("href",$(n).attr("data-imgsrc"))},b=function(){var t=$(this),e=$(t.parents().eq(1)).children(".img-slide").children(".active").attr("data-active");e=parseInt(e);var i=null,n=parseInt(t.parent().attr("data-piclength"))-1;i="pre"==t.attr("data-page")?0==e?n:e-1:e==n?0:e+1,$(t.parents().eq(1)).children(".img-slide").children("[data-active='"+i+"']").click()},y=function(){var t=$(this).parents().eq(2),e=$(this).parents().eq(3);$(t).addClass("hide"),$(e).children("ul").removeClass("hide"),c($(window).scrollTop())},x=function(){var t=$(this).parents().eq(1),e=$(this).parents().eq(2);$(t).addClass("hide"),$(e).children("ul").removeClass("hide"),c($(window).scrollTop())},w=function(){var t=$(this).parents().eq(1),e=$(this).parents().eq(0),i=$(t).children("[data-node='imgBigPic']");$(e).addClass("hide"),i.removeClass("hide");var n=$(this).attr("data-imgsort"),a=i.children(".big-img").children(".img-hidden").children("[data-bigimg='"+n+"']"),r=$(a).children("img");$(a).removeClass("hide").siblings().addClass("hide"),$(r).hasClass("srcError")&&($(r).removeClass("srcError"),$(r).attr("src",$(r).attr("data-imgsrc")));var o=i.children(".img-slide").children("[data-active='"+n+"']");$(o).addClass("active").siblings().removeClass("active");var s=i.children(".big-title").children("[data-node='imgBigSrc']");$(s).attr("href",$(r).attr("data-imgsrc")),c($(window).scrollTop())},_=function(){if(!o())return a.popUnion(),!1;var t=$(this).parents().eq(1).children("[data-node='addImgGoods']").attr("data-imgNum");if(p=$(this).parent().attr("data-publish"),$('[data-node="picPopBox"]').removeClass("webuploader-element-invisible"),$("div[tabindex]").remove(),0==t)return!1;T(p,$(this)),i(t,9)};l(d.setPubliser.changeImage).sub(function(t){S(t,p)});var S=function(t,e){if(!(t.images.length>0))return!1;var i=[],n=$("[data-tid="+e+"]").children("[data-node='addImgGoods']"),a=parseInt(n.attr("data-imgNum")),r=parseInt(a-t.images.length);n.attr("data-imgNum",r);var o=$("[data-tid='"+e+"']").find("[data-node='imgUl']");o.addClass("topic-imglist");var c=o.attr("data-imgsrt"),l=s(t);o.removeClass("hide").append(l),c&&i.push(c);for(var d=0;d<t.images.length;d++)i.push(t.images[d]);o.attr("data-imgsrt",i),parseInt(o.parent().attr("data-imgNum"))<=0&&$("[data-tid="+e+"]").find("[data-node='addImg_btn']").addClass("disabled")},I=function(t){$('[data-node="faceBox"]').hide(),t.stopPropagation()},k=function(t){h.hide()},T=function(t,e){if(window.topicQrId||(window.topicQrId=[]),t="s"+t,window.topicQrId[t]){var i=window.topicQrId[t];i.useNewCode?i.checkShow()?i.hide():(i.show(),i.sendNum()):i.getCode()}else{var n={"qid":t,"time":2e3,"$showBox":h,"customCb":C,"$insertDom":"","$target":e,"type":"detail","maxNum":9};$.extend(n,{"$parent":e.parents('[data-node="comment_Msg"]').find('[data-node="imgUl"]')}),window.topicQrId[t]=new u(n),window.topicQrId[t].init()}},C=function(t,e){p=e.qid.slice(1);var i={};i.images=t,S(i,p)},E=function(){f()};t.exports={"init":E}}).call(exports,e(0))},"411":function(t,exports,e){"use strict";(function($){var i=e(2),n=e(5),a=e(4),r=function(){var t=$(this),e=$(this).parent(),r=$(t.parents().eq(1)).children("img"),o=(r.attr("src"),r.attr("data-oldImg")),s=Number.parseInt(e.attr("data-roteNum"));if(-1!=o.indexOf(".gif"))return a("gif图不支持旋转"),!1;if(t.hasClass("roteLeft")?s=(s+90)%360:t.hasClass("roteRight")&&(s=(s-90+360)%360),0===s)r.attr("src",o),r.css({"transform":"rotate("+s+"deg)","-ms-transform":"rotate("+s+"deg)","-moz-transform":"rotate("+s+"deg)","-webkit-transform":"rotate("+s+"deg)","-o-transform":"rotate("+s+"deg)"}),e.attr("data-roteNum",s);else{var c={"imgPath":o,"angle":s};i.post(n.get("handleimg"),{"data":c}).then(function(t){t.success?(r.attr("src",t.data),e.attr("data-roteNum",s)):a(t.message)})}};t.exports={"init":r}}).call(exports,e(0))},"412":function(t,exports,e){var i=e(3);t.exports=i("src/js/page/topicDetails/comment/addImgGoods/chooseImg",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$each),a=t.images,r=(t.value,t.i,i.$escape),o="";return n(a,function(t,e){o+=' <li class="imgClass"> <a href="javascript:;" > <img src="',o+=r(t),o+='" width=100 height=100 data-node="imgSrc" data-oldImg="',o+=r(t),o+='">  <div data-roteNum=0 class="icon-del" > <em class="iconImg roteLeft" data-node="roteRo" ></em> <em class="iconImg roteRight" data-node="roteRo" ></em> <em class="iconImg deletImg" data-node="deletImg"></em> </div> </a> </li> '}),o+=" ",new String(o)})},"413":function(t,exports,e){"use strict";(function($){function i(t,e,i){return e in t?Object.defineProperty(t,e,{"value":i,"enumerable":!0,"configurable":!0,"writable":!0}):t[e]=i,t}var n=e(9),a=e(68),r=e(7),o=e(14),s=e(414),c=e(63),l="",d=function(){r(o.setPubliser.changedItem).sub(u),$("body").on("click","[data-node=addGoods_btn]",function(){if(!n())return c.popUnion(),!1;var t=$(this).closest("[data-node=comment_Msg]");if(l=t.attr("data-tid"),t.find("[data-node='addImgGoods']").hasClass("hasGoods")||$(this).hasClass("disabled"))return!1;a({},1)}),$("body").on("click","[data-node='deletGoods']",function(){var t=$(this).closest("[data-node='comment_Msg']");t.find("[data-node='addImgGoods']").removeClass("hasGoods").attr("data-goodStr",""),$(this).parent().remove(),t.find("[data-node='addGoods_btn']").removeClass("disabled")})},u=function(t){var e=t,n=$("[data-tid="+l+"]"),a=n.children("[data-node='addImgGoods']");for(var r in e)var o=e[r],c=i({"pid":o.PId,"skuId":o.skuId,"img":o.img,"link":o.link,"price":o.price,"shopId":o.shopId,"title":o.title},"skuId",o.skuId);"undefined"!=c&&a.attr("data-goodStr",JSON.stringify(c));var d=s(c);a.prepend(d).addClass("hasGoods"),n.find("[data-node='addGoods_btn']").addClass("disabled")};t.exports={"init":d}}).call(exports,e(0))},"414":function(t,exports,e){var i=e(3);t.exports=i("src/js/page/topicDetails/comment/addImgGoods/goodsIn",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$escape),a=t.shopId,r=t.pid,o=t.skuId,s=t.img,c=t.title,l=t.price,d=t.rebate,u=t.link,h="";return h+=' <div data-node="goodsIn" class="reply-details" data-shopId ="',h+=n(a),h+='" data-itemId="',h+=n(r),h+='" data-skuId=',h+=n(o),h+='> <em class="icon-close-b" data-node="deletGoods"></em> <div class="reply-picture"><img src="',h+=n(s),h+='" onerror="imgError(this, \'g\')"></div> <div class="reply-contxt"> <p>',h+=n(c),h+='</p> <div class="price"> <p class="price-numb">￥<span>',h+=n(l),h+="</span></p> \x3c!-- ",d>0&&(h+=' <div class="fan fan-s"> <em class="icon-fan-s"></em> <span>最高返',h+=n(d),h+="国美币</span> </div> "),h+=' --\x3e </div> </div><a href="',h+=n(u),h+='" class="see-details pc-btn pc-btnw105 pc-btnh40" target="_blank">查看详情</a> </div> ',new String(h)})},"415":function(t,exports,e){"use strict";(function($){var i,n,a=e(416),r=e(2),o=e(5),s=e(11),c="[data-node=reportType] li",l="menu-checkbox-checked",d=function(){var t=$(this);t.hasClass(l)?(t.find("span").removeClass(l),$(".report-confirm-btn").removeClass("active")):($(c).find("span").removeClass(l),t.find("span").addClass(l),$(".report-confirm-btn").addClass("active"))},u=function(){var t=$(this);i=t.attr("data-type"),n=1==i?t.parents("dd").attr("data-ddlist"):t.parents("[data-node=wrap-box]").attr("id-node"),s("",{"content":a(),"title":"提示","okCls":"report-confirm-btn pc-btnh36 pc-btnw80","cancelCls":"pc-btnh36 pc-btnw80","ok":h,"btnWrapCls":"report-btn text-center","okValue":"提交"})},h=function(){if($(".report-confirm-btn").hasClass("active")){var t=$(c+"."+l).parent().index(),e={"type":i||0,"reason":t,"reportId":n},a=$(this.node);r.post(o.get("topicReport"),{"data":e}).then(function(t){!0===t.success?p(a,"举报成功，小编将擦亮眼睛重新审核"):409===t.code?p(a,t.message):p(a,"举报失败！")})}return!1},p=function(t,e){t.find('[i="content"]').html('<p class="del-pop-p" style="width:450px;">'+e+"</p>"),t.find('[i-id="ok"]').hide(),t.find('[i-id="cancel"]').attr("class","pc-btn pc-btnh35 circle-pop-btn").text("关闭")},f=function(){$("body").on("click",c,d),$("body").on("click","[data-action=topic-report]",u)};t.exports={"init":f}}).call(exports,e(0))},"416":function(t,exports,e){var i=e(3);t.exports=i("src/js/page/topicDetails/report",'<div class="gome-report-title">请选择举报类型</div> <ul class="gome-report-box clearfix" data-node="reportType"> <li class="gome-report clearfix"> <span class="menu-checkbox"></span> <p>色情低俗</p> </li> <li class="gome-report clearfix"> <span class="menu-checkbox"></span> <p>政治敏感</p> </li> <li class="gome-report clearfix"> <span class="menu-checkbox"></span> <p>营销广告</p> </li> <li class="gome-report clearfix"> <span class="menu-checkbox"></span> <p>人身攻击</p> </li> <li class="gome-report clearfix"> <span class="menu-checkbox"></span> <p>其他</p> </li> </ul> ')},"417":function(t,exports,e){"use strict";(function($,i){var n=e(2),a=e(5),r=e(8);t.exports={"init":function(){$("body").on("click",'[data-node="userTopic-topHigh"]',function(){var t=$(this);if(t.hasClass("topicChecked"))return!1;t.addClass("topicChecked");var e=$(t.parents().eq(1)),o=e.parent().attr("data-left"),s=parseInt(t.attr("data-type"),10),c=parseInt(t.attr("data-ac"),10);n.post(a.get("setTop"),{"data":{"topicId":o,"groupId":i.groupid,"ac":parseInt(t.attr("data-ac"),10),"type":s}}).then(function(i){if(i&&i.success&&200===i.code){var n=c?s?"取消加精":"加精":s?"取消置顶":"置顶";c?s?e.find('[data-node="topic-title"]').before('<em class="set-spark" data-node="topic-high">精品</em>'):e.find('[data-node="topic-high"]').remove():s?e.find('[data-node="topic-title"]').before('<em class="set-top" data-node="topic-top">置顶</em>'):e.find('[data-node="topic-top"]').remove(),t.attr("data-type",Number(!s)).attr("title",n).text(n),r.init((c?s?"加精":"取消加精":s?"置顶":"取消置顶")+"成功")}else r.init(i.message);t.removeClass("topicChecked")},function(e){r.init(e.message),t.removeClass("topicChecked")})})}}}).call(exports,e(0),e(1))},"42":function(t,exports,e){"use strict";(function($){var i=e(43),n=e(6),a=function(t,e){var a=i(t||{});e=e||{};var r={"title":"选择图片","modal":!0,"fixed":!0,"content":a,"className":"pop-box","okValue":"插入图片","okCls":"pc-btn pc-btnh35 circle-pop-btn","cancalValue":"取消","btnWrapCls":"insert-cancel"};return $.extend(!0,r,e),n(r)};t.exports={"create":a}}).call(exports,e(0))},"43":function(t,exports,e){var i=e(3);t.exports=i("src/js/module/popup/upload/content",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$escape),a=t.maxlength,r=t.total,o="";return o+='<div data-node="uploadBox" class="upload-box"> <div data-node="scrollWrap" class="scroll-wrap"> <div class="pics-list-wrap clearfix"> <ul class="pics-list clearfix" data-node="uploadList"> <li data-defaultAddFile=\'picker\'></li> </ul> </div> </div> <div class="num-pics">您可以添加 <span class="link-hover-red" data-node="addNum">',o+=n(a),o+='</span><span class="deep-gray">/',o+=n(r),o+="</span>张图片</div> </div> ",new String(o)})},"50":function(t,exports,e){"use strict";(function($){var i=e(42),n=e(7),a=e(14),r=e(51),o=e(4),s=e(13),c=e(52),l=function(){var t=navigator.userAgent.toLowerCase(),e=-1!=t.indexOf("msie"),i=500;return e&&(i=/\d+/.exec(t.split(";")[1])),parseInt(i)},d=function(t,e){var d,p,f,m,g=t;return g>0?(d=i.create({"maxlength":g,"total":e},{"okCls":"pc-btn pc-btnh35 circle-pop-btn btn-default","ok":function(){if($(this.node).find("[i-id=ok]").hasClass("btn-default"))return!1;$('[data-node="uploadList"]').off(),p.destroy();for(var t=$('[data-node="uploadList"] img'),e=[],i=0,r=t.length;i<r;i++)e.push(t.eq(i).attr("src"));n(a.setPubliser.changeImage).pub({"images":e}),$("[data-node=picPopBox]").hide(),f="",h()},"cancel":function(){$('[data-node="uploadList"]').off(),p.destroy(),$("[data-node=picPopBox]").hide(),f="",h()},"onshow":function(){u()}}),p=r.init({"maxlength":g,"callbacks":{"onFileQueued":function(t,e,i){var n=$('[data-node="uploadBox"]'),a='[data-defaultaddfile="picker"]';$("[data-node=picPopBox]").addClass("webuploader-element-invisible"),d.show(),n.find(a).children().eq(0).html('<em class="icon-add"></em>');var r='<li id="'+t.id+'"><div class="bar-upload-pic"><span data-node="progress"></span></div></li>';if(n.find(a).before(r),n.find('[data-node="addNum"]').text(i-e[t.source.ruid]),e[t.source.ruid]===~~i&&n.find(a).hide(),n.find(a).children().eq(1).css({"width":"78px","height":"78px"}),l()>9)f||(f=$('[data-node="scrollWrap"]').get(0),m=new c(f,{"mouseWheel":!0,"scrollbars":!0,"bounce":!1})),setTimeout(function(){m.refresh()},1500);else{var o=$('[data-node="uploadList"]');o.find("li").length>18?o.addClass("overflow-y"):o.removeClass("overflow-y")}},"onUploadSuccess":function(t,e){if(200===e.code&&e.success){var i=/\.(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(s.imgReplace(e.data[0]));$("#"+t.id).html(i?'<img src="'+s.imgReplace(e.data[0])+'" alt="">':'<span style="font-size:12px;color:#999;">上传失败</span><a href="javascript:;"><em class="icon-del-pic" data-action="delImage"></em></a>'),$("[i-id=ok]").removeClass("btn-default")}else $("#"+t.id).html('<a href="javascript:;" class="re-upload" data-action="retry">重新上传</a><a href="javascript:;"><em class="icon-del-pic" data-action="delImage"></em></a>')}}})):o("您最多能添加"+t+"张图片哦！"),p},u=function(){$("body").css({"height":"100%","overflowY":"hidden"})},h=function(){$("body").css({"height":"auto","overflowY":"auto"})};t.exports=d}).call(exports,e(0))},"51":function(t,exports,e){"use strict";(function(i,$){var n=e(12),a=e(8),r=e(10),o=e(13),s=function(t){var e,s={},c={},l={"maxlength":t.maxlength||9,"selector":{"parents":'[data-node="uploadBox"]',"delSelector":'[data-action="delImage"]',"selector":"[data-defaultAddFile=picker]"}};return l.defaultApi={"pick":{"id":"[data-defaultAddFile=picker]","innerHTML":"本地上传图片"},"accept":{"title":"Images","extensions":"jpg,jpeg,png,gif","mimeTypes":"image/jpg,image/jpeg,image/png,image/gif"},"method":"post","swf":i.imgpath+"/images/swf/Uploader.swf","auto":!0,"disableGlobalDnd":!0,"duplicate":!0,"prepareNextFile":!0,"chunked":!0,"fileVal":"avatar_file","server":"/ajax/crop/crop_img","fileNumLimit":l.maxlength*$(l.selector).length,"fileSizeLimit":l.maxlength*$(l.selector).length*2*1024*1024,"fileSingleSizeLimit":2097152},l.callbacks={"onBeforeFileQueued":function(){a.init(r.upload.excess)},"onFileQueued":function(t,e,i){var n='<li id="'+t.id+'"><div class="bar-upload-pic"><span data-node="progress"></span></div></li>';$("#rt_"+t.source.ruid).parent('[data-defaultaddfile="picker"]').before(n),$("#rt_"+t.source.ruid).parents('[data-node="uploadBox"]').find('[data-node="addNum"]').text(i-e[t.source.ruid]),e[t.source.ruid]===~~i&&$("#rt_"+t.source.ruid).parents('[data-defaultaddfile="picker"]').hide()},"onUploadSuccess":function(t,e){if(200===e.code&&e.success){var i=/\.(gif|jpg|jpeg|png|GIF|JPG|PNG)$/.test(o.imgReplace(e.data[0]));$("#"+t.id).html(i?'<img src="'+o.imgReplace(e.data[0])+'" alt="">':'<span style="font-size:12px;color:#999;">上传失败</span><a href="javascript:;"><em class="icon-del-pic" data-action="delImage"></em></a>')}else $("#"+t.id).html('<a href="javascript:;" class="re-upload" data-action="retry">重新上传</a><a href="javascript:;"><em class="icon-del-pic" data-action="delImage"></em></a>')},"onUploadError":function(t,e){console.log(JSON.stringify(e)),$("#"+t.id).html('<a href="javascript:;" class="re-upload" data-action="retry">重新上传</a><a href="javascript:;"><em class="icon-del-pic" data-action="delImage"></em></a>')},"onUploadProgress":function(t,e){$("#"+t.id).find('[data-node="progress"]').css("width",100*e+"%")},"onErrored":function(){a.init(r.upload.uploadError)},"retry":function(){var t=this;$('[data-node="uploadList"]').on("click",'[data-action="retry"]',function(){t.retry(c[$(this).parents("li").attr("id")])})},"delImage":function(t,i,n,a){e.removeFile(c[$(this).parents("li").attr("id")]),$(this).parents('[data-node="uploadBox"]').find('[data-node="addNum"]').text(a-i[n]),$(this).parents("ul").find('[data-defaultAddFile="picker"]').show(),$(this).parents("li").eq(0).remove(),0===i[n]&&$("[i-id=ok]").addClass("btn-default")}},t.callbacks=$.extend({},l.callbacks,t.callbacks),t=$.extend({},l,t),e=n.create(t.defaultApi),e.onFileQueued=function(i){var n=$('[data-node="uploadBox"]').find('[data-defaultaddfile="picker"]').children().eq(1).attr("id");i.source.ruid=n,s[i.source.ruid]=void 0!==s[i.source.ruid]?s[i.source.ruid]:0,s[i.source.ruid]++,c[i.id]=i,t.callbacks.onFileQueued.call(e,i,s,t.maxlength)},e.on("uploadSuccess",function(i,n){t.callbacks.onUploadSuccess.call(e,i,n)}),e.on("beforeFileQueued",function(i){if(s[i.source.ruid]>=t.maxlength)return t.callbacks.onBeforeFileQueued.call(e,i,s,t.maxlength),!1}),e.on("uploadError",function(i,n){t.callbacks.onUploadError.call(e,i,n)}),e.on("uploadProgress",function(i,n){t.callbacks.onUploadProgress.call(e,i,n)}),e.on("error",function(i){t.callbacks.onErrored.call(e,i)}),t.callbacks.retry.call(e),$(t.selector.parents).on("click",t.selector.delSelector,function(){var i=$(this).parents(t.selector.parents).find(t.defaultApi.pick.id).children().eq(1).attr("id");s[i]--,t.callbacks.delImage.call(this,e,s,i,t.maxlength)}),e};t.exports={"init":s}}).call(exports,e(1),e(0))},"52":function(t,exports,e){"use strict";var i,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,r,o){function s(t,e){this.wrapper="string"==typeof t?r.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={"resizeScrollbars":!0,"mouseWheelSpeed":20,"snapThreshold":.334,"disablePointer":!u.hasPointer,"disableTouch":u.hasPointer||!u.hasTouch,"disableMouse":u.hasPointer||u.hasTouch,"startX":0,"startY":0,"scrollY":!0,"directionLockThreshold":5,"momentum":!0,"bounce":!0,"bounceTime":600,"bounceEasing":"","preventDefault":!0,"preventDefaultException":{"tagName":/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},"HWCompositing":!0,"useTransition":!0,"useTransform":!0,"bindToWrapper":void 0===a.onmousedown};for(var i in e)this.options[i]=e[i];this.translateZ=this.options.HWCompositing&&u.hasPerspective?" translateZ(0)":"",this.options.useTransition=u.hasTransition&&this.options.useTransition,this.options.useTransform=u.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?u.ease[this.options.bounceEasing]||u.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function c(t,e,i){var n=r.createElement("div"),a=r.createElement("div");return!0===i&&(n.style.cssText="position:absolute;z-index:9999",a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),a.className="iScrollIndicator","h"==t?(!0===i&&(n.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",a.style.height="100%"),n.className="iScrollHorizontalScrollbar"):(!0===i&&(n.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",a.style.width="100%"),n.className="iScrollVerticalScrollbar"),n.style.cssText+=";overflow:hidden",e||(n.style.pointerEvents="none"),n.appendChild(a),n}function l(t,e){this.wrapper="string"==typeof e.el?r.querySelector(e.el):e.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=t,this.options={"listenX":!0,"listenY":!0,"interactive":!1,"resize":!0,"defaultScrollbars":!1,"shrink":!1,"fade":!1,"speedRatioX":0,"speedRatioY":0};for(var i in e)this.options[i]=e[i];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(u.addEvent(this.indicator,"touchstart",this),u.addEvent(a,"touchend",this)),this.options.disablePointer||(u.addEvent(this.indicator,u.prefixPointerEvent("pointerdown"),this),u.addEvent(a,u.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(u.addEvent(this.indicator,"mousedown",this),u.addEvent(a,"mouseup",this))),this.options.fade){this.wrapperStyle[u.style.transform]=this.scroller.translateZ;var n=u.style.transitionDuration;this.wrapperStyle[n]=u.isBadAndroid?"0.0001ms":"0ms";var o=this;u.isBadAndroid&&d(function(){"0.0001ms"===o.wrapperStyle[n]&&(o.wrapperStyle[n]="0s")}),this.wrapperStyle.opacity="0"}}var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(t){a.setTimeout(t,1e3/60)},u=function(){function t(t){return!1!==s&&(""===s?t:s+t.charAt(0).toUpperCase()+t.substr(1))}var e={},i=r.createElement("div").style,s=function(){for(var t=["t","webkitT","MozT","msT","OT"],e=0,n=t.length;e<n;e++)if(t[e]+"ransform"in i)return t[e].substr(0,t[e].length-1);return!1}();e.getTime=Date.now||function(){return(new Date).getTime()},e.extend=function(t,e){for(var i in e)t[i]=e[i]},e.addEvent=function(t,e,i,n){t.addEventListener(e,i,!!n)},e.removeEvent=function(t,e,i,n){t.removeEventListener(e,i,!!n)},e.prefixPointerEvent=function(t){return a.MSPointerEvent?"MSPointer"+t.charAt(7).toUpperCase()+t.substr(8):t},e.momentum=function(t,e,i,n,a,r){var s,c,l=t-e,d=o.abs(l)/i;return r=void 0===r?6e-4:r,s=t+d*d/(2*r)*(l<0?-1:1),c=d/r,s<n?(s=a?n-a/2.5*(d/8):n,l=o.abs(s-t),c=l/d):s>0&&(s=a?a/2.5*(d/8):0,l=o.abs(t)+s,c=l/d),{"destination":o.round(s),"duration":c}};var c=t("transform");return e.extend(e,{"hasTransform":!1!==c,"hasPerspective":t("perspective")in i,"hasTouch":"ontouchstart"in a,"hasPointer":!(!a.PointerEvent&&!a.MSPointerEvent),"hasTransition":t("transition")in i}),e.isBadAndroid=function(){var t=a.navigator.appVersion;if(/Android/.test(t)&&!/Chrome\/\d/.test(t)){var e=t.match(/Safari\/(\d+.\d)/);return!(e&&"object"===(void 0===e?"undefined":n(e))&&e.length>=2)||parseFloat(e[1])<535.19}return!1}(),e.extend(e.style={},{"transform":c,"transitionTimingFunction":t("transitionTimingFunction"),"transitionDuration":t("transitionDuration"),"transitionDelay":t("transitionDelay"),"transformOrigin":t("transformOrigin")}),e.hasClass=function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},e.addClass=function(t,i){if(!e.hasClass(t,i)){var n=t.className.split(" ");n.push(i),t.className=n.join(" ")}},e.removeClass=function(t,i){if(e.hasClass(t,i)){var n=new RegExp("(^|\\s)"+i+"(\\s|$)","g");t.className=t.className.replace(n," ")}},e.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{"left":e,"top":i}},e.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},e.extend(e.eventType={},{"touchstart":1,"touchmove":1,"touchend":1,"mousedown":2,"mousemove":2,"mouseup":2,"pointerdown":3,"pointermove":3,"pointerup":3,"MSPointerDown":3,"MSPointerMove":3,"MSPointerUp":3}),e.extend(e.ease={},{"quadratic":{"style":"cubic-bezier(0.25, 0.46, 0.45, 0.94)","fn":function(t){return t*(2-t)}},"circular":{"style":"cubic-bezier(0.1, 0.57, 0.1, 1)","fn":function(t){return o.sqrt(1- --t*t)}},"back":{"style":"cubic-bezier(0.175, 0.885, 0.32, 1.275)","fn":function(t){return(t-=1)*t*(5*t+4)+1}},"bounce":{"style":"","fn":function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},"elastic":{"style":"","fn":function(t){return 0===t?0:1==t?1:.4*o.pow(2,-10*t)*o.sin((t-.055)*(2*o.PI)/.22)+1}}}),e.tap=function(t,e){var i=r.createEvent("Event");i.initEvent(e,!0,!0),i.pageX=t.pageX,i.pageY=t.pageY,t.target.dispatchEvent(i)},e.click=function(t){var e,i=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||(e=r.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,t.view,1,i.screenX,i.screenY,i.clientX,i.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e._constructed=!0,i.dispatchEvent(e))},e}();s.prototype={"version":"5.2.0","_init":function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},"destroy":function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},"_transitionEnd":function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},"_start":function(t){if(1!=u.eventType[t.type]){if(0!==(t.which?t.button:t.button<2?0:4==t.button?1:2))return}if(this.enabled&&(!this.initiated||u.eventType[t.type]===this.initiated)){!this.options.preventDefault||u.isBadAndroid||u.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,i=t.touches?t.touches[0]:t;this.initiated=u.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=u.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,e=this.getComputedPosition(),this._translate(o.round(e.x),o.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},"_move":function(t){if(this.enabled&&u.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,i,n,a,r=t.touches?t.touches[0]:t,s=r.pageX-this.pointX,c=r.pageY-this.pointY,l=u.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=s,this.distY+=c,n=o.abs(this.distX),a=o.abs(this.distY),!(l-this.endTime>300&&n<10&&a<10)){if(this.directionLocked||this.options.freeScroll||(n>a+this.options.directionLockThreshold?this.directionLocked="h":a>=n+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);s=0}s=this.hasHorizontalScroll?s:0,c=this.hasVerticalScroll?c:0,e=this.x+s,i=this.y+c,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+s/3:e>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+c/3:i>0?0:this.maxScrollY),this.directionX=s>0?-1:s<0?1:0,this.directionY=c>0?-1:c<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,i),l-this.startTime>300&&(this.startTime=l,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},"_end":function(t){if(this.enabled&&u.eventType[t.type]===this.initiated){this.options.preventDefault&&!u.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,i,n=(t.changedTouches&&t.changedTouches[0],u.getTime()-this.startTime),a=o.round(this.x),r=o.round(this.y),s=o.abs(a-this.startX),c=o.abs(r-this.startY),l=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=u.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(a,r),!this.moved)return this.options.tap&&u.tap(t,this.options.tap),this.options.click&&u.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&n<200&&s<100&&c<100)return void this._execEvent("flick");if(this.options.momentum&&n<300&&(e=this.hasHorizontalScroll?u.momentum(this.x,this.startX,n,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{"destination":a,"duration":0},i=this.hasVerticalScroll?u.momentum(this.y,this.startY,n,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{"destination":r,"duration":0},a=e.destination,r=i.destination,l=o.max(e.duration,i.duration),this.isInTransition=1),this.options.snap){var h=this._nearestSnap(a,r);this.currentPage=h,l=this.options.snapSpeed||o.max(o.max(o.min(o.abs(a-h.x),1e3),o.min(o.abs(r-h.y),1e3)),300),a=h.x,r=h.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}if(a!=this.x||r!=this.y)return(a>0||a<this.maxScrollX||r>0||r<this.maxScrollY)&&(d=u.ease.quadratic),void this.scrollTo(a,r,l,d);this._execEvent("scrollEnd")}}},"_resize":function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},"resetPosition":function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),(e!=this.x||i!=this.y)&&(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},"disable":function(){this.enabled=!1},"enable":function(){this.enabled=!0},"refresh":function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=u.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},"on":function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},"off":function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},"_execEvent":function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;e<i;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},"scrollBy":function(t,e,i,n){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,n)},"scrollTo":function(t,e,i,n){n=n||u.ease.circular,this.isInTransition=this.options.useTransition&&i>0;var a=this.options.useTransition&&n.style;!i||a?(a&&(this._transitionTimingFunction(n.style),this._transitionTime(i)),this._translate(t,e)):this._animate(t,e,i,n.fn)},"scrollToElement":function(t,e,i,n,a){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=u.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,!0===i&&(i=o.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===n&&(n=o.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=i||0,r.top-=n||0,r.left=r.left>0?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=r.top>0?0:r.top<this.maxScrollY?this.maxScrollY:r.top,e=void 0===e||null===e||"auto"===e?o.max(o.abs(this.x-r.left),o.abs(this.y-r.top)):e,this.scrollTo(r.left,r.top,e,a)}},"_transitionTime":function(t){t=t||0;var e=u.style.transitionDuration;if(this.scrollerStyle[e]=t+"ms",!t&&u.isBadAndroid){this.scrollerStyle[e]="0.0001ms";var i=this;d(function(){"0.0001ms"===i.scrollerStyle[e]&&(i.scrollerStyle[e]="0s")})}if(this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].transitionTime(t)},"_transitionTimingFunction":function(t){if(this.scrollerStyle[u.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},"_translate":function(t,e){if(this.options.useTransform?this.scrollerStyle[u.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=o.round(t),e=o.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},"_initEvents":function(t){var e=t?u.removeEvent:u.addEvent,i=this.options.bindToWrapper?this.wrapper:a;e(a,"orientationchange",this),e(a,"resize",this),this.options.click&&e(this.wrapper,"click",this,!0),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(i,"mousemove",this),e(i,"mousecancel",this),e(i,"mouseup",this)),u.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,u.prefixPointerEvent("pointerdown"),this),e(i,u.prefixPointerEvent("pointermove"),this),e(i,u.prefixPointerEvent("pointercancel"),this),e(i,u.prefixPointerEvent("pointerup"),this)),u.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(i,"touchmove",this),e(i,"touchcancel",this),e(i,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)},"getComputedPosition":function(){var t,e,i=a.getComputedStyle(this.scroller,null);return this.options.useTransform?(i=i[u.style.transform].split(")")[0].split(", "),t=+(i[12]||i[4]),e=+(i[13]||i[5])):(t=+i.left.replace(/[^-\d.]/g,""),e=+i.top.replace(/[^-\d.]/g,"")),{"x":t,"y":e}},"_initIndicators":function(){function t(t){if(r.indicators)for(var e=r.indicators.length;e--;)t.call(r.indicators[e])}var e,i=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,a=[],r=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(e={"el":c("v",i,this.options.scrollbars),"interactive":i,"defaultScrollbars":!0,"customStyle":n,"resize":this.options.resizeScrollbars,"shrink":this.options.shrinkScrollbars,"fade":this.options.fadeScrollbars,"listenX":!1},this.wrapper.appendChild(e.el),a.push(e)),this.options.scrollX&&(e={"el":c("h",i,this.options.scrollbars),"interactive":i,"defaultScrollbars":!0,"customStyle":n,"resize":this.options.resizeScrollbars,"shrink":this.options.shrinkScrollbars,"fade":this.options.fadeScrollbars,"listenY":!1},this.wrapper.appendChild(e.el),a.push(e))),this.options.indicators&&(a=a.concat(this.options.indicators));for(var o=a.length;o--;)this.indicators.push(new l(this,a[o]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){t(function(){this.fade()})}),this.on("scrollCancel",function(){t(function(){this.fade()})}),this.on("scrollStart",function(){t(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){t(function(){this.fade(1,!0)})})),this.on("refresh",function(){t(function(){this.refresh()})}),this.on("destroy",function(){t(function(){this.destroy()}),delete this.indicators})},"_initWheel":function(){u.addEvent(this.wrapper,"wheel",this),u.addEvent(this.wrapper,"mousewheel",this),u.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,u.removeEvent(this.wrapper,"wheel",this),u.removeEvent(this.wrapper,"mousewheel",this),u.removeEvent(this.wrapper,"DOMMouseScroll",this)})},"_wheel":function(t){if(this.enabled){t.preventDefault();var e,i,n,a,r=this;if(void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r.options.snap||r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in t)1===t.deltaMode?(e=-t.deltaX*this.options.mouseWheelSpeed,i=-t.deltaY*this.options.mouseWheelSpeed):(e=-t.deltaX,i=-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,i=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=i=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=i=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=i,i=0),this.options.snap)return n=this.currentPage.pageX,a=this.currentPage.pageY,e>0?n--:e<0&&n++,i>0?a--:i<0&&a++,void this.goToPage(n,a);n=this.x+o.round(this.hasHorizontalScroll?e:0),a=this.y+o.round(this.hasVerticalScroll?i:0),this.directionX=e>0?-1:e<0?1:0,this.directionY=i>0?-1:i<0?1:0,n>0?n=0:n<this.maxScrollX&&(n=this.maxScrollX),a>0?a=0:a<this.maxScrollY&&(a=this.maxScrollY),this.scrollTo(n,a,0),this.options.probeType>1&&this._execEvent("scroll")}},"_initSnap":function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,i,n,a,r,s=0,c=0,l=0,d=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(i=o.round(d/2),n=o.round(u/2);l>-this.scrollerWidth;){for(this.pages[s]=[],t=0,a=0;a>-this.scrollerHeight;)this.pages[s][t]={"x":o.max(l,this.maxScrollX),"y":o.max(a,this.maxScrollY),"width":d,"height":u,"cx":l-i,"cy":a-n},a-=u,t++;l-=d,s++}else for(r=this.options.snap,t=r.length,e=-1;s<t;s++)(0===s||r[s].offsetLeft<=r[s-1].offsetLeft)&&(c=0,e++),this.pages[c]||(this.pages[c]=[]),l=o.max(-r[s].offsetLeft,this.maxScrollX),a=o.max(-r[s].offsetTop,this.maxScrollY),i=l-o.round(r[s].offsetWidth/2),n=a-o.round(r[s].offsetHeight/2),this.pages[c][e]={"x":l,"y":a,"width":r[s].offsetWidth,"height":r[s].offsetHeight,"cx":i,"cy":n},l>this.maxScrollX&&c++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=o.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=o.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||o.max(o.max(o.min(o.abs(this.x-this.startX),1e3),o.min(o.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},"_nearestSnap":function(t,e){if(!this.pages.length)return{"x":0,"y":0,"pageX":0,"pageY":0};var i=0,n=this.pages.length,a=0;if(o.abs(t-this.absStartX)<this.snapThresholdX&&o.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);i<n;i++)if(t>=this.pages[i][0].cx){t=this.pages[i][0].x;break}for(n=this.pages[i].length;a<n;a++)if(e>=this.pages[0][a].cy){e=this.pages[0][a].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,i<0?i=0:i>=this.pages.length&&(i=this.pages.length-1),t=this.pages[i][0].x),a==this.currentPage.pageY&&(a+=this.directionY,a<0?a=0:a>=this.pages[0].length&&(a=this.pages[0].length-1),e=this.pages[0][a].y),{"x":t,"y":e,"pageX":i,"pageY":a}},"goToPage":function(t,e,i,n){n=n||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:e<0&&(e=0);var a=this.pages[t][e].x,r=this.pages[t][e].y;i=void 0===i?this.options.snapSpeed||o.max(o.max(o.min(o.abs(a-this.x),1e3),o.min(o.abs(r-this.y),1e3)),300):i,this.currentPage={"x":a,"y":r,"pageX":t,"pageY":e},this.scrollTo(a,r,i,n)},"next":function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i++,i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,t,e)},"prev":function(t,e){var i=this.currentPage.pageX,n=this.currentPage.pageY;i--,i<0&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,t,e)},"_initKeys":function(t){var e,i={"pageUp":33,"pageDown":34,"end":35,"home":36,"left":37,"up":38,"right":39,"down":40};if("object"==n(this.options.keyBindings))for(e in this.options.keyBindings)"string"==typeof this.options.keyBindings[e]&&(this.options.keyBindings[e]=this.options.keyBindings[e].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(e in i)this.options.keyBindings[e]=this.options.keyBindings[e]||i[e];u.addEvent(a,"keydown",this),this.on("destroy",function(){u.removeEvent(a,"keydown",this)})},"_key":function(t){if(this.enabled){var e,i=this.options.snap,n=i?this.currentPage.pageX:this.x,a=i?this.currentPage.pageY:this.y,r=u.getTime(),s=this.keyTime||0;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(o.round(e.x),o.round(e.y)),this.isInTransition=!1),this.keyAcceleration=r-s<200?o.min(this.keyAcceleration+.25,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?n+=i?1:this.wrapperWidth:a+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?n-=i?1:this.wrapperWidth:a-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:n=i?this.pages.length-1:this.maxScrollX,a=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:n=0,a=0;break;case this.options.keyBindings.left:n+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:a+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:n-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:a-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(n,a);n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollX&&(n=this.maxScrollX,this.keyAcceleration=0),a>0?(a=0,this.keyAcceleration=0):a<this.maxScrollY&&(a=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(n,a,0),this.keyTime=r}},"_animate":function(t,e,i,n){function a(){var h,p,f,m=u.getTime();if(m>=l)return r.isAnimating=!1,r._translate(t,e),void(r.resetPosition(r.options.bounceTime)||r._execEvent("scrollEnd"));m=(m-c)/i,f=n(m),h=(t-o)*f+o,p=(e-s)*f+s,r._translate(h,p),r.isAnimating&&d(a),3==r.options.probeType&&r._execEvent("scroll")}var r=this,o=this.x,s=this.y,c=u.getTime(),l=c+i;this.isAnimating=!0,a()},"handleEvent":function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":this.enabled&&!t._constructed&&(t.preventDefault(),t.stopPropagation())}}},l.prototype={"handleEvent":function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},"destroy":function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(u.removeEvent(this.indicator,"touchstart",this),u.removeEvent(this.indicator,u.prefixPointerEvent("pointerdown"),this),u.removeEvent(this.indicator,"mousedown",this),u.removeEvent(a,"touchmove",this),u.removeEvent(a,u.prefixPointerEvent("pointermove"),this),u.removeEvent(a,"mousemove",this),u.removeEvent(a,"touchend",this),u.removeEvent(a,u.prefixPointerEvent("pointerup"),this),u.removeEvent(a,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},"_start":function(t){var e=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=e.pageX,this.lastPointY=e.pageY,this.startTime=u.getTime(),this.options.disableTouch||u.addEvent(a,"touchmove",this),this.options.disablePointer||u.addEvent(a,u.prefixPointerEvent("pointermove"),this),this.options.disableMouse||u.addEvent(a,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},"_move":function(t){var e,i,n,a,r=t.touches?t.touches[0]:t,o=u.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=r.pageX-this.lastPointX,this.lastPointX=r.pageX,i=r.pageY-this.lastPointY,this.lastPointY=r.pageY,n=this.x+e,a=this.y+i,this._pos(n,a),1==this.scroller.options.probeType&&o-this.startTime>300?(this.startTime=o,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),t.preventDefault(),t.stopPropagation()},"_end":function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),u.removeEvent(a,"touchmove",this),u.removeEvent(a,u.prefixPointerEvent("pointermove"),this),u.removeEvent(a,"mousemove",this),this.scroller.options.snap){var e=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),i=this.options.snapSpeed||o.max(o.max(o.min(o.abs(this.scroller.x-e.x),1e3),o.min(o.abs(this.scroller.y-e.y),1e3)),300);this.scroller.x==e.x&&this.scroller.y==e.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=e,this.scroller.scrollTo(e.x,e.y,i,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},"transitionTime":function(t){t=t||0;var e=u.style.transitionDuration;if(this.indicatorStyle[e]=t+"ms",!t&&u.isBadAndroid){this.indicatorStyle[e]="0.0001ms";var i=this;d(function(){"0.0001ms"===i.indicatorStyle[e]&&(i.indicatorStyle[e]="0s")})}},"transitionTimingFunction":function(t){this.indicatorStyle[u.style.transitionTimingFunction]=t},"refresh":function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(u.addClass(this.wrapper,"iScrollBothScrollbars"),u.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(u.removeClass(this.wrapper,"iScrollBothScrollbars"),u.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=o.max(o.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=8-this.indicatorWidth,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=o.max(o.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=8-this.indicatorHeight,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},"updatePosition":function(){var t=this.options.listenX&&o.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&o.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=o.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=o.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",t=this.maxPosX+this.indicatorWidth-this.width):t=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=o.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=o.max(this.indicatorHeight-3*(e-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",e=this.maxPosY+this.indicatorHeight-this.height):e=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[u.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},"_pos":function(t,e){t<0?t=0:t>this.maxPosX&&(t=this.maxPosX),e<0?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?o.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?o.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},"fade":function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=t?250:500,n=t?0:300;t=t?"1":"0",this.wrapperStyle[u.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),n)}}},s.utils=u,void 0!==t&&t.exports?t.exports=s:void 0!==(i=function(){return s}.call(exports,e,exports,t))&&(t.exports=i)}(window,document,Math)},"53":function(t,exports,e){"use strict";(function($,i){function n(t){this.qid=t.qid||"single",this.topicQrId="",this.$parent=t.$parent,this.uploadMaxNum=t.maxLen||20,this.useNewCode=0,this.interval=0,this.type=t.type||"pubsliser",this.$showBox=t.$showBox,this.time=t.time||2e3,this.customInit=t.customInit||"",this.customCb=t.customCb,this.isLoad=0,this.imgArr=[],this.editor=t.editor||"",this.$cover=t.$showBox.find('[data-node="cover"]'),this.$localBtn=t.$showBox.find('[data-node="upLocal"]'),this.$target=t.$target,this.code="",this.btn=t.btn}var a=e(54),r=$GLOBAL_CONFIG.pcimgpath;$("body").append(a({"imgPath":r}));var o=e(2),s=e(5),c=(e(10),e(4)),l=e(23),d=e(13),u=i.group_domain,h=window.pageId,h=(l.imgLimitNUm,window.pageId);n.prototype={"constructor":n,"init":function(){var t=this;t.editor&&$(t.editor.body).on("click",function(e){t.hide(),e.preventDefault()}),"function"==typeof t.customInit&&this.customInit(this),$("body").on("click",'[data-node="picPopBox"]',function(e){var i=e.target.tagName;i="INPUT"==i||"LABEL"==i,i?t.hide():e.stopPropagation()}),this.start()},"start":function(){this.useNewCode?this.checkShow()?this.hide():this.show():this.getCode()},"imgLength":function(){return this.editor?$(this.$parent.getContent()).find("img").not('[data-node="goodsPic"],[data-node="emoji"]').length:this.$parent.find("img").length},"getCode":function(){var t=this,e=this.imgLength(),i={"pageId":h,"maxNum":this.uploadMaxNum-e},n=t.qid,a=window.topicQrId;t.show(),a[n].qrcodeId&&(i.qrcodeId=t.topicQrId),o.get(s.get("getUploadQrCode"),{"data":i}).done(function(e){if(1==e.success){if(200==e.code){t.useNewCode=1;var i=e.data,a=u+"qrupload/index?pageId="+i.pageId+"&qrcodeId="+i.qrcodeId+"&type="+t.type;a=u+"ajax/qrcode/urlcode?url="+encodeURIComponent(a),window.topicQrId[n].qrcodeId=t.topicQrId=i.qrcodeId,t.code=a,t.getCodeCb(),t.interval=setInterval(function(){t.monitor()},t.time)}}else c(e.message)}).fail(function(t,e){})},"monitor":function(){var t=this;o.post(s.get("topListenImg"),{"data":{"code":h,"groupkey":window.topicQrId[t.qid].qrcodeId}}).done(function(e){1==e.success?t.scanCb(e):t.hide()}).fail(function(e,i){clearInterval(t.interval),t.interval=0,t.hide()})},"sendNum":function(){var t=this,e=this.imgLength(),i=this.uploadMaxNum-e;o.get(s.get("topicuploadMax"),{"data":{"qrcodeId":t.topicQrId,"maxNum":i}})},"insertPic":function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e],a=d.imgReplace(n),r=d.imgProto(n),o='<p><img src="'+a+'" _src="'+a+'" data-type="insertImg" proto="'+r+'"/></p>';this.editor.execCommand("inserthtml",o)}},"loading":function(){this.isLoad=1,this.$showBox.show(),this.$cover.show(),this.$localBtn.addClass("upload-unable"),this.editor&&this.editor.setDisabled()},"unLoading":function(){this.isLoad=0,this.$cover.hide(),this.$cover.css("display","none"),this.$localBtn.removeClass("upload-unable"),this.editor&&this.editor.setEnabled()},"checkShow":function(){return!!this.$showBox.is(":visible")},"fixPop":function(){var t=this.$target,e=t.offset(),i=e.left,n=e.top/1+30;return this.$showBox.css({"top":n+"px","left":i+"px"})},"show":function(){this.$showBox.removeClass("webuploader-element-invisible"),this.$showBox.find("img").attr("src",this.code).css("display","block"),this.fixPop().show()},"hide":function(){1!=this.isLoad&&this.$showBox.hide()},"getCodeCb":function(){this.sendNum(),this.$showBox.find("img").attr("src",this.code).css("display","block")},"scanCb":function(t){switch(t.isload){case 1:this.unLoading();break;case 2:this.loading();break;case 3:var e=t.data,i=[],n=e.length-this.imgArr.length;if(n){this.loading(),this.imgArr=e,i=e.slice(-n);var a=this;setTimeout(function(){a.unLoading(),a.hide(),"function"==typeof a.customCb?a.customCb(i,a):a.insertPic(i)},500)}break;case 1e4:this.imgArr=[],this.isload=0,this.useNewCode=0,clearInterval(this.interval),this.interval=0,this.hide()}}},t.exports=n}).call(exports,e(0),e(1))},"54":function(t,exports,e){var i=e(3);t.exports=i("src/js/module/popup/uploadfileQR/upload",function(t,e){"use strict";var i=this,n=(i.$helpers,i.$escape),a=t.imgPath,r="";return r+='<div data-node="picPopBox" class="picPopBox" data-node="picPopBox"> <em class="sanjiao"></em> <div class="container clearfix"> <div class="left"> <div class="qr"> <img src=\'\'/> <div class="cover" data-node="cover">上传中...</div> </div> <p>扫描二维码,上传手机图片</p> </div> <div class="right" data-node="uploadList"> <div class="pc-btn pc-btnh35" data-defaultAddFile=\'picker\'></div> </div> </div> </div> <div data-node="picLoading" class="picLoading hide"> <img src="',r+=n(a),r+='/images/public/loading.gif"/> <div> ',new String(r)})},"56":function(t,exports,e){"use strict";var i=e(2),n=e(5),a=e(4),r=!1,o=function(t,e){return i.post(n.get("sensitiveWord"),{"data":{"text":t},"async":!1}).done(function(t){if(!1===t.success){var i="标题";r=!0,e&&(i="评论"),a(i+'中含有"'+t.data+'"敏感词')}else r=!1}).fail(function(){a("数据加载失败")}),r};t.exports=o},"58":function(t,exports,e){"use strict";(function($,i){var n=e(2),a=e(5),r=e(4),o=e(7),s=e(14),c=e(9),l=e(15),d=(c(),0),u=function(){},h=function(t,e,i){t.data("praise",e),t.data("count",i)},p={"normal":{"add":function(t,e,i){t.addClass("active"),i||(i="取消点赞"),t.find("span").text(i)},"reduce":function(t,e,i){t.removeClass("active"),i||(i="点赞"),t.find("span").text(i)}}},f=function(t){return p[t]},m=function(t,e,p){var m=$(t),g=p.onPraise||u,v=p.onUnPraise||u,b=p.onPraised||u,y=p.mode||"normal";m.on("click",e,function(){function t(){var t=w;n.post(a.get("praise"),t).done(function(t){var n=f(y);if(o(s.comment.enableEditor).pub({"pid":"enable"}),t&&200===t.code&&t.success)1===p?(h(e,0,++x),n.add(e,t,x),g.call(e,t,x)):0===p&&(h(e,1,--x),n.reduce(e,t,x),v.call(e,t,x));else if(t&&422===t.code);else if(t&&403===t.code)r("抱歉！该话题审核未通过",{"ok":function(){window.location.href=i.group_domain+"index/error?code=topic"}});else if(409===t.code)b.call(e,t,x),d||r(t.message);else{var a=t.message;0===u&&404===t.code?r(a,{"ok":function(){window.location.reload()}}):r(a)}d&&window.location.reload()}).fail(function(){}).always(function(){})}var e=$(this),u=e.data("type"),p=e.data("praise"),m=e.data("id"),x=e.data("count"),w={"data":{"groupId":i.groupid,"id":m,"type":u,"isPraise":p}};return c()?(d=0,t()):(d=1,l(t)),!1})};t.exports=m}).call(exports,e(0),e(1))},"59":function(t,exports,e){"use strict";var i=function(){var t=navigator.userAgent.toLowerCase();if(t.indexOf("msie")>-1)return t.match(/msie ([\d.]+)/)[1]<=8;return!1};t.exports=i},"63":function(t,exports,e){"use strict";(function($){var i=e(9),n=$("[data-node='comment_Msg']"),a=$("[data-node='a_Submit']"),r=e(15),o=function(){var t=null;return i()?(n.children("textarea").removeAttr("readonly").css("background","transparent"),a.removeClass("pc-bj-fc8753").html("发布"),$("[data-node='secondCom_Key']").css("display","block"),t="1"):(t="0",n.children("textarea").attr("readonly","readonly").css("background","#fff"),$("[data-node='secondCom_Key']").css("display","none")),t},s=function(){r()},c=function(){if(!i())return s(),!1};t.exports={"getLoginState":o,"popUnion":s,"commentCheck":c}}).call(exports,e(0))},"64":function(t,exports,e){"use strict";(function(i,$){var n=e(2),a=e(7),r=location.hostname.split("."),o=r.length,s=r[o-2]+"."+r[o-1],c=function(){n.get(i.ss_service_gome+"item/v1/cookie/getregion/flag/public/ip",{"dataType":"jsonp","jsonpCallback":"ip"}).done(function(t){var e=t.atgregion;!0===t.success&&($.cookie("atgregion",e,{"expires":1,"path":"/","domain":s}),a("getAreaId").pub())})};t.exports=c}).call(exports,e(1),e(0))},"68":function(t,exports,e){"use strict";(function($,i){var n,a=e(26),r=e(2),o=e(5),s=e(7),c=e(27),l=e(28),d=e(39),u=e(14),h=e(29),p=e(4),f=1,m=9,g=!0,v="",b=[],y=!1,x={},w=1,_=null,S=null,I=null,k=null,T=null,C=null,E=null,P=null,R=null,U=null,B=null,q=null,L=null,A=null,j={},D=function(t,e){var r=[];j={};for(var o in t)b.push(o),r.push(t[o]);m=e||9,j=$.extend(!0,j,t),x=m-r.length!=0?{"title":" ","modal":!0,"fixed":!0,"width":712,"content":c({"imgSrc":i.imgpath,"returnList":r,"maxlength":m,"changeNum":m-r.length}),"className":"pop-box","okValue":"插入商品","okCls":"pc-btn pc-btnh35 circle-pop-btn btn-default","btnWrapCls":"insert-cancel","ok":function(){if($(this.node).find("[i-id=ok]").hasClass("btn-default"))return!1;s(u.setPubliser.changedItem).pub(j),Q()},"cancel":function(){Q()},"onshow":function(){$('[i="title"]').hide(),z(),H(f),F(),M(),X(),Y(),$("body").css({"height":"100%","overflowY":"hidden"})}}:{},n=a.create(x),setTimeout(function(){n.show()},100)},z=function(){_=$('[data-node="addTopBox"]'),S=_.find('[data-action="addSearchInput"]'),I=_.find('[data-action="addSearchBtn"]'),k=$('[data-node="searchNormal"]'),T=$('[data-node="searchLoading"]'),C=$('[data-node="searchFail"]'),E=$('[data-node="searchResultBox"]'),P=E.find('[data-node="searchResultList"]'),U=E.find('[data-node="changedBox"]'),B=U.find('[data-node="searchChangeList"]'),R=E.find('[data-node="searchChangeNum"]'),q=$('[data-node="title"]'),L=E.find('[data-action="moreItem"]'),A=P.parent()},H=function(t){O(o.get("getCollectItem"),{"data":{"page":t,"pagesize":10},"done":function(e){var i=d({"itemlist":e.data.items,"changedList":b,"indexof":h});1===t?P.html(i):P.append(i)}})},F=function(){S.on("keyup",function(t){var e=t.which;g=!1,y=!1,v=$.trim($(this).val()),13===e&&(""!==v?v.length<2?p("请输入两个字符以上关键词"):(f=1,q.hide(),L.find("span").html('<img src="'+i.imgpath+'/images/public/loading.gif">正在加载...'),N(f,v)):p("请输入关键词")),""===v&&(E.children().eq(0).hide(),g=!0,f=1,q.show(),H(f))}),I.on("click",function(){g=!1,y=!1,v=$.trim($(this).prev().val()),""!==v?v.length<2?p("请输入两个字符以上关键词"):(L.find("span").html('<img src="'+i.imgpath+'/images/public/loading.gif">正在加载...'),f=1,q.hide(),N(f,v)):p("请输入关键词")})},N=function(t,e){O(o.get("getMoreItem"),{"data":{"pagenum":t,"pagesize":10,"word":e},"done":function(e){var i=l({"itemlist":e.data.items,"changedList":b,"indexof":h});"1"!=e.pageCount&&L.hide(),1===t?P.html(i):P.append(i)}})},O=function(t,e){1===f?(P.hide(),C.hide(),T.show(),k.hide()):L.show(),r.get(t,{"data":e.data}).done(function(t){if(200===t.code){var i=void 0===t.data.collections?t.data.items:t.data.collections;i&&0!==i.length||!g?i&&0!==i.length?(E.show().children().eq(0).show(),P.show(),e.done.call(this,t),L.hide(),y=!1,i.length<10&&1!==f&&(y=!0,L.show().find("span").text("没有可加载内容"))):1===f?(k.show().text("没有找到相关产品"),E.children().eq(0).hide()):L.show().find("span").text("没有可加载内容"):1===f?k.show().text("暂无收藏的商品，可以搜索查找！"):L.show().find("span").text("没有可加载内容")}else 881001===t.code?1===f?(k.show().text("没有找到相关产品"),E.children().eq(0).hide()):L.show().find("span").text("没有可加载内容"):1===f?C.show():L.show().find("span").html('数据获取失败，点击<a href="javascript:;" node-action="reget" class="reload">重新加载</a>！')}).fail(function(){1===f?C.show():L.show().find("span").html('数据获取失败，点击<a href="javascript:;" node-action="reget" class="reload">重新加载</a>！')}).always(function(){T.hide()})},M=function(){C.on("click",function(){1===f&&(T.show(),C.hide(),g?H(f):N(f,v))}),L.on("click",'[node-action="reget"]',function(){$(this).parent().html('<img src="'+i.imgpath+'/images/public/loading.gif">正在加载...'),g?H(f):N(f,v)})},X=function(){B.children().length&&$("[i-id=ok]").removeClass("btn-default"),E.on("click",'[data-action="item"]',function(){var t=$(this),e=t.find("img").attr("src"),i=t.attr("data-pId"),a=t.attr("data-shopid"),r=t.attr("data-link"),o=t.attr("data-skuId"),s="";if(1==m)B.children().length&&(B.empty(),P.children("dl").removeClass("chosed-mer-true")),t.addClass("chosed-mer-true"),0===B.children().length&&U.show(),b=[],b.push(o),j={},j[o]={"shopId":a,"skuId":o,"PId":i,"title":$(this).find('[node-data="itemTitle"]').text(),"img":e,"price":$(this).find('[node-data="itemPrice"]').text(),"link":r},s='<li data-skuId="'+o+'" data-pId="'+i+'" data-degree="'+w+'"><img src="'+e+'" alt=""><a href="javascript:;" data-action="delChanged"><em class="icon-del-pic"></em></a></li>',B.append(s),R.text(m-B.children().length);else if($(this).hasClass("chosed-mer-true")){var c=B.find('[data-skuId="'+o+'"]');$(this).removeClass("chosed-mer-true"),c.remove();var l=$(this).attr("data-skuId"),d=b.indexOf(l);-1!==d&&b.splice(d,1),delete j[l],0===B.children().length&&U.hide(),R.text(m-B.children().length)}else{if(B.children().length>=m)return p("最多可选取"+m+"个商品"),!1;b.push(o),j[o]={"shopId":a,"skuId":o,"PId":i,"title":$(this).find('[node-data="itemTitle"]').text(),"img":e,"price":$(this).find('[node-data="itemPrice"]').text(),"link":$(this).attr("data-link")},$(this).addClass("chosed-mer-true"),s='<li data-skuId="'+o+'" data-pId="'+i+'" data-degree="'+w+'"><img src="'+e+'" alt=""><a href="javascript:;" data-action="delChanged"><em class="icon-del-pic"></em></a></li>',0===B.children().length&&U.show(),B.append(s),R.text(m-B.children().length)}B.children().length?$("[i-id=ok]").removeClass("btn-default"):$("[i-id=ok]").addClass("btn-default"),n.reset()}).on("click",'[data-action="delChanged"]',function(){var t=$(this).closest("li").attr("data-skuId"),e=b.indexOf(t);-1!==e&&b.splice(e,1);var i=this;P.find('[data-skuId="'+$(i).parent().attr("data-skuId")+'"]').removeClass("chosed-mer-true"),$(i).parents("li").remove(),delete j[t],0===B.children().length&&U.hide(),R.text(m-B.children().length),B.children().length||$("[i-id=ok]").addClass("btn-default")})},Y=function(){A.on("scroll",function(){!y&&A.scrollTop()>=P.height()-A.height()&&(y=!0,f++,g?H(f):N(f,v))})},Q=function(){w++,$("body").css({"height":"auto","overflowY":"auto"}),A.off("scroll"),E.off("click"),C.off("click"),S.off("keyup"),I.off("click"),f=1,g=!0,v="",y=!1,b=[]};t.exports=D}).call(exports,e(0),e(1))},"69":function(t,exports,e){"use strict";(function($,i){var n=e(2),a=e(5),r=e(4),o=e(11),s=e(10).circle,c=e(9),l=e(15),d=function(t){var e=t.data?t.data.selector||$(this):$(this),d=e.attr("data-action"),u=t.data?t.data.done||function(){}:function(){},h=t.data?t.data.word||{"join":"加入圈子","focus":"退出圈子"}:{"join":"加入圈子","focus":"退出圈子"},p=e.attr("data-groupid"),f=e.attr("data-membertype"),m={"event_id":e.attr("event-id"),"group_id":p,"circle_type":i.s_c};if(i.topicid&&(m.topic_id=i.topicid),void 0!==window.BP&&BP.send(m),1==e.attr("data-verif"))return void r("您已提交申请，请等待审核");var g=e.attr("data-userid"),v=function(t){n.post(a.get("joinCircle"),{"data":{"groupid":p,"imid":"b_"+g}}).done(function(n){n&&200===n.code&&n.success?(0===n.data.status?(d&&"joinGroup"==d&&!t?o(s.joinSuccessPublic,{"className":"pop-box","okValue":"暂不发布","cancelValue":"立即发布话题","okCls":"pc-btn pc-btnh35 circle-pop-btn circle-cancel-btn","cancelCls":"pc-btn pc-btnh35 circle-pop-btn","content":'<button data-active="close-join" class="ui-dialog-close icon icon-close" title="取消">×</button><div i="title" class="ui-dialog-title" style="border-bottom: none;"></div><p class="del-pop-p">'+s.joinSuccessPublic+"</p>","ok":function(){},"cancel":function(){var t="topic/publiser?gid="+e.attr("data-groupid");window.open(i.group_domain+t)}}):r(d&&"joinCircle"==d?s.joinSuccess:s.joinSuccess),$("[data-active=close-join]").on("click",function(){$(".pop-box-backdrop").hide(),$("[role=alertdialog]").hide()}),e.html(h.focus)):1===n.data.status&&($("[data-node=QRcode]").attr("src",i.imgpath+"/images/public/down-ma.png"),$(".dialog_p").css({"text-align":"center","margin":"10px 0px","font-size":"1.5em"}),$("[data-node=QRcode]").css({"margin-left":"173px"}),r("您已申请加入圈子，请等待圈主审核"),u("joining",e),setTimeout(function(){t&&location.reload()},1500)),u("join",e)):403===n.code||"圈子拒绝加入"==n.message?r(s.cannotJoinCircle):409===n.code?(e.html(h.join),n.error&&("2"===n.error.code||"该圈子人数已达上限"===n.message?(r(n.message),u("limit",e)):"3"===n.error.code||"您已申请加入圈子，请等待圈主审核"===n.message?(r(n.message),u("joining",e)):"1"!==n.error.code&&"您已加入该圈子！"!==n.message||(r(n.message),u("joined",e),e.html(h.focus)))):r(n.message)}).fail(function(){}).always(function(){})};return c()?(0==f?function(){n.post(a.get("exitCircle"),{"data":{"groupid":p}}).done(function(t){t&&200==t.code&&t.success?(r(s.exit),e.attr("data-membertype",1),e.html(h.join),u("exit",e)):410==t.code?r(s.dissolved,{"ok":function(){location.reload()},"onclose":function(){location.reload()}}):404==t.code&&location.reload()}).fail(function(){}).always(function(){e.attr("data-firing",0)})}():v(),!1):void l(function(){i.islogin="1",v(1),setTimeout(function(){window.location.href=window.location},1500)})};t.exports=d}).call(exports,e(0),e(1))},"71":function(t,exports,e){"use strict";var i=function(t,e){var i,n="",a=new Date(t).getTime(),r=(new Date).getTime(),o=r-a,s=e||7;if(o<6e4)n="1分钟前";else if(o>=6e4&o<36e5)i=Math.floor(o/6e4),n=i+"分钟前";else if(o>=36e5&o<864e5)i=Math.floor(o/36e5),n=i+"小时前";else if(o>=864e5&o<1728e5)i=Math.floor(o/864e5),n="昨天";else if(o>=1728e5&o<864e5*s)i=Math.floor(o/864e5),n=i+"天前";else{var c=t.split(" ");n=c[0]}return n};t.exports=i},"72":function(t,exports,e){"use strict";(function(i){function n(t){var e=t.page,i=t.shareTo,n=t.shareId,s={"sp":"plus","pf":"pc","sc":i,"st":e,"ss":0,"pid":window.page_id,"sid":n,"uid":o.user_id,"cid":function(t){for(var e=document.cookie.split("; "),i=0;i<e.length;i++){var n=e[i].split("=");if(n[0]==t)return unescape(n[1])}}("__gmz"),"url":o[e].url[i],"env":o.env,"di":""};s=JSON.stringify(s),a.post(r,{"data":s}).done(function(t){})}var a=e(2),r="https://beacon.gomeplus.com/log_share",o={"ht":{"share":{"qq":"2010506904","qz":"2020506904","wx":"2030506904","wb":"2050506904"},"url":{"qq":location.href+"&cmpid=fx_pc_qq"+i.share_time,"qz":location.href+"&cmpid=fx_pc_qz"+i.share_time,"wx":location.href+"&cmpid=fx_pc_wx"+i.share_time,"wb":location.href+"&cmpid=fx_pc_wb"+i.share_time}},"qz":{"share":{"qq":"2010507903","qz":"2020507903","wx":"2030507903","wb":"2050507903"},"url":{"qq":location.href+"&cmpid=fx_pc_qq"+i.share_time,"qz":location.href+"&cmpid=fx_pc_qz"+i.share_time,"wx":location.href+"&cmpid=fx_pc_wx"+i.share_time,"wb":location.href+"&cmpid=fx_pc_wb"+i.share_time}},"user_id":i.userId,"cookie_id":i.share_ssid,"env":i.share_env};t.exports=n}).call(exports,e(1))},"73":function(t,exports,e){"use strict";function i(t){return t.replace(/\n|\r\n/g,"</br>")}var n=e(22),a=e(17),r=function(t){return t=n(t),t=a.parseEmoji(t),t=i(t)};t.exports=r},"75":function(t,exports,e){"use strict";(function(i,$){function n(t,e){var n=i.userId;return e?1==i.islogin&&(n==t.createrId||n==t.groupCreaterId||n==t.topicCreaterId):1==i.islogin&&(n==t.creatorId||n==t.groupCreatorId||n==t.topicCreatorId)}function a(t){return 1==f&&i.userId==t?i.i_domain+"member/profileHome":i.group_domain+"ta/"+t+".html"}function r(t){function e(t){return parseInt(t)<10?"0"+t:t}var i=new Date(t),n=i.getFullYear(),a=i.getMonth()+1,r=i.getDate(),o=i.getHours(),s=i.getMinutes(),c=i.getSeconds();return n+"-"+e(a)+"-"+e(r)+" "+e(o)+":"+e(s)+":"+e(c)}var o=e(73),s=e(2),c=e(5),l=e(9),d=e(17),u=e(71),h=e(168),p=e(169),f=1==l()?1:0,m=(i.product_item_gome,i.isExpert),g=$("[data-node='secondCom_Key']"),v=function(t){var e=t.id,l=t.currPage,v=t.pageSize,b=t.listSize,y=(t.nodelist,$("[id-node='"+e+"']").children(".topic-lfet").children("[data-node='hidDiv']")),x=$("[data-circlecom='"+e+"']"),w=x.parent(".bjfff"),_=$(w.children("[data-node='loadlist']")),S=$(w.children("[data-node='loading']"));_.css("display","none"),S.css("display","block");var I=$("[data-tid='"+e+"']").attr("data-headface"),k="?page="+l+"&pagesize="+v+"&topicid="+e;s.get(c.get("commentListUrlV2")+k).then(function(s){if(s.success){var c=s.data.topicReplys;$("[data-comtopicid='"+e+"']").offset().top;if(c.length>0){S.css("display","block"),_.css("display","block").attr("data-addMorePages",l).attr("data-ListSize",v);for(var w="",k=0;k<c.length;k++){var T=c[k],C=T.subReplyQuantity,E=T.topicSubReplys,P=[],R=null,U=null,B=null;C>b?(B=!0,U="clearfix",R=b):(B=!1,R=E.length,U="clearfix bd-bottom");for(var q=a(T.user.id),L=1==f&&i.userId!=T.user.id,A=R>0?"":"hide",j=0;j<R;j++){var D=E[j];if(D){var z=null,H="",F="",N="javascript:;";D.topicSubReplyUser?(z=!0,H=D.topicSubReplyUser.nickname,F=D.topicSubReplyUser.id,N=a(F)):z=!1;var O=D.content;O=o(O);var M="";D.user&&(M=a(D.user.id));var X={"threeUserId":N,"SenUserId":M,"parentCommentId":T.id,"replayToPub":z,"content":O,"replyUserName":D.user.nickname,"replyUserId":D.user.id,"beReplyUserName":H,"beReplyUserId":F,"replyCommentId":D.id,"sCanDelete":n(D,0),"commentId":D.id};P.push(X)}}var Y=T.content;Y=o(Y);var Q="";if(T.pics){var W=T.pics;if(W.length>0){var G={"picsSrc":W,"picture":T.pictures,"length":W.length};Q=p(G)}}var V="",K="",J="",Z="",tt="",et="",it="";T.item&&(V=T.item.mainImage,et=T.item.name,J=null!==T.item.salePrice?T.item.salePrice:"暂无售价",Z=T.item.id,tt=T.item.id,it=T.skuId);var nt="",at="";T.shop&&(nt=T.shop.icon,K=T.shop.name,T.shop.promotionMark&&(at=T.shop.promotionMark.hasCouponPlan),tt=T.shop.id);var rt={"showSecComm":A,"imageStr":Q,"itemShopNameItem":et,"UserId":q,"dlShowBorder":U,"showMall":B,"userIsExpert":m,"isExpert":T.user.isExpert,"userPic":T.user.facePicUrl,"username":T.user.nickname,"backTopicId":T.id,"content":d.parseEmoji(Y),"topicType":T.replyType,"topicId":T.topicId,"currUserImg":I,"times":u(r(T.createTime)),"isFirstCom":!1,"secondReply":P,"mall_domain":i.product_item_gome,"itemsPic":V,"itemShopName":K,"itemPrice":J,"shopId":Z,"itemShopId":tt,"skuId":it?"-"+it:"","redPackage":at,"shopPic":nt,"showReport":L,"kid":T.kid,"canDelete":n(T,1),"subReplyQuantity":T.subReplyQuantity,"userQuantity":T.like.userQuantity,"isLike":T.like.isLike,"pricetype":T.item?$.trim(T.item.pricetype):"","itemId":T.item&&T.item.itemId?T.item.itemId:""};w+=h(rt)}x.append(w),w="",S.css("display","none"),_.css("display","block"),x.find("img").lazyload({"effect":"fadeIn"}),"0"==f&&g.css("display","none"),c.length<v&&_.css("display","none")}else S.css("display","none"),1==v&&y.css("display","none");t.reGet&&$("[id-node='"+e+"']").find('[data-node="topic-allNum"]').text(s.data.subReplyTotal+s.data.total)}else _.css("display","none"),S.css("display","none")})};t.exports=v}).call(exports,e(1),e(0))},"8":function(t,exports,e){"use strict";(function($){var e,i,n,a=function(){e.off().on("click",function(){e.hide(),i.hide()}),i.off().on("click",function(){e.hide(),i.hide()})},r=function(t,r){var o={"duration":2e3,"callback":function(){}};$.extend(o,r||{}),clearTimeout(n),e=$('[data-action="publicMask"]'),i=$('[data-action="publicTips"]'),e.length>0?(e.show(),i.show().text(t)):($("body").append('<div data-action="publicMask" class="ordi-toast"></div><div class="ordi-toast-txt" data-action="publicTips">'+t+"</div>"),e=$('[data-action="publicMask"]'),i=$('[data-action="publicTips"]'),a()),i.css("margin",-i[0].offsetHeight/2+"px 0 0 "+-i.width()/2+"px"),n=setTimeout(function(){e.hide(),i.hide(),o.callback()},o.duration)};t.exports={"init":r,"events":a}}).call(exports,e(0))}},[392]);