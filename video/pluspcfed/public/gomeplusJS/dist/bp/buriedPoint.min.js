!function(win,doc){function setPV(){bpOnce||isGomeWebView||!isOnline||(BP.pvLog(),bpOnce=!0)}for(var scr=win.screen,nav=navigator,ua=nav.userAgent,isGomeWebView=/gomeplus/i.test(ua),isPhantomJSUser=/PhantomJSUser/i.test(ua),pageHost=win.location.host,isOnline=!1,ref=doc.referrer.toLowerCase(),prtl="https:"===win.location.protocol?"https://":"http://",host="beacon.gomeplus.com/",mainhost="gomeplus.com",errorHost="m.gomeplus.com/",path="log?",gifurl=prtl+host+path,sudaMeta="bp-data",hostArray=["m.gomeplus.com","h5.gomeplus.com","www.dev.gomeplus.com","passport.dev.gomeplus.com","order.dev.gomeplus.com","group.dev.gomeplus.com","i.dev.gomeplus.com","mall.dev.gomeplus.com","www-pre.gomeplus.com","passport-pre.gomeplus.com","order-pre.gomeplus.com","group-pre.gomeplus.com","i-pre.gomeplus.com","mall-pre.gomeplus.com","m-pre.gomeplus.com","www.gomeplus.com","passport.gomeplus.com","order.gomeplus.com","group.gomeplus.com","i.gomeplus.com","mall.gomeplus.com"],i=0,len=hostArray.length;i<len;i++)if(hostArray[i]===pageHost){isOnline=!0;break}var cookie_phpsid="mx_wap_gomeplusid",cookie_phppcid="mx_pc_gomeplusid",cookie_new="isnew",cookie_ssid="ssid",cookie_lastTime="plasttime",utils={JSONParse:function(){return win.JSON?JSON.parse:function(e){return new Function("return"+e)()}}(),addEvent:function(){return doc.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:doc.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:void 0}(),trim:function(){return String.prototype.trim?function(e){return e.trim()}:function(e){e=e.replace(/^\s+/,"");for(var t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e}}(),isMobile:function(){try{return doc.createEvent("TouchEvent"),!0}catch(e){return!1}}(),stringSplice:function(e,t,n,o){if(""===e)return"";o=""===o?"=":o,t+=o;var i=e.indexOf(t);if(i<0)return"";i+=t.length;var r=e.indexOf(n,i);return r<i&&(r=e.length),e.substring(i,r)},jsonToQuery:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+e[n]+"&");return t.substr(0,t.length-1)},getCookie:function(e){return void 0===e||""===e?"":utils.stringSplice(doc.cookie,e,";","")},setCookie:function(e,t,n,o){if(null!==t)if(void 0!==o&&null!==o||(o=location.host),void 0===n||null===n||""===n)doc.cookie=e+"="+t+";domain="+o+";path=/";else{var i=new Date,r=i.getTime();r+=864e5*n,i.setTime(r),r=i.getTime(),doc.cookie=e+"="+t+";domain="+o+";expires="+i.toUTCString()+";path=/"}},delCookie:function(e){doc.cookie=e+"=;expires=Fri, 31 Dec 1999 23:59:59 GMT;path=/;domain="+location.host},sendRequest:function(e){if(!isPhantomJSUser&&isOnline){var t=new Image;t.src=e}},isReady:!1,domReadyCbs:[],ready:function(){if(!utils.isReady){utils.isReady=!0;for(var e=0;e<utils.domReadyCbs.length;e++)utils.domReadyCbs[e]()}},domReady:function(e){if(utils.domReadyCbs.push(e),"complete"===doc.readyState)setTimeout(utils.ready,1);else if(doc.addEventListener)doc.addEventListener("DOMContentLoaded",utils.ready,!1),win.addEventListener("load",utils.ready,!1);else{doc.attachEvent("onreadystatechange",utils.ready),win.attachEvent("onload",utils.ready);var t=!1;try{t=null===window.frameElement&&document.documentElement}catch(n){}t&&t.doScroll&&!function o(){if(!utils.isReady){try{t.doScroll("left")}catch(e){return setTimeout(o,50)}utils.ready()}}()}},collects:function(e,t){var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push(o+":"+e[o]());return t+n.join("|")},getSource:function(){return"source="+encodeURIComponent(utils.stringSplice(win.location.href,"source","&",""))},getWm:function(){return"wm="+(utils.isMobile?"m":"www")},getRandom:function(){var e=new Date;return Math.ceil(1e12*Math.random())+"."+e.getTime()}},CI={screen_size:function(){return scr.width+"x"+scr.height},color_depth:function(){return scr.colorDepth||""},app_code:function(){return nav.appCodeName||""},app_name:function(){return nav.appName.indexOf("Microsoft Internet Explorer")>-1?"MSIE":nav.appName},cpu:function(){return nav.cpuClass||nav.oscpu||""},platform:function(){return nav.platform||""},network:function(){var e="";if(e=nav.connection&&nav.connection.type?nav.connection.type:e,""!=e)return e;try{doc.body.addBehavior("#default#clientCaps"),e=doc.body.connectionType}catch(t){e="-"}return e},language:function(){return nav.systemLanguage||nav.language||""},timezone:function(){return(new Date).getTimezoneOffset()/60||""},flash_ver:function(){var f="-",n=navigator,ii;if(n.plugins&&n.plugins.length){for(ii=0;ii<n.plugins.length;ii++)if(n.plugins[ii].name.indexOf("Shockwave Flash")!==-1){f=n.plugins[ii].description.split("Shockwave Flash ")[1];break}}else if(win.ActiveXObject)for(ii=10;ii>=2;ii--)try{var fl=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+ii+"');");if(fl){f=ii+".0";break}}catch(e){}return f},ua:function(){return encodeURIComponent(ua)}},PI={pagename:function(){return encodeURIComponent(document.title||"-")},referrer:function(){var e=/^[^\?&#]*.swf([\?#])?/;return""!==ref&&!ref.match(e)||(ref=utils.stringSplice(win.location.href,"ref","&",""),""===ref)?encodeURIComponent(ref):encodeURIComponent(ref)},is_homepage:function(){var e="";try{doc.body.addBehavior("#default#homePage"),e=doc.body.isHomePage(win.location.href)?"Y":"N"}catch(t){e="unkown"}return e},dom_count:function(){return doc.getElementsByTagName("*").length||""},iframe_count:function(){return doc.getElementsByTagName("iframe").length},url:function(){return encodeURIComponent(win.location.href)},env:function(){for(var e=["dev","test","pre"],t="pro",n=0,o=e.length;n<o;n++)if(pageHost.indexOf(e[n])!=-1){t=e[n];break}return t}},UI={phpsid:function(){var e=utils.getCookie(cookie_phpsid)||utils.getCookie(cookie_phppcid);return e},ssid:function(){var e=utils.getCookie(cookie_ssid);return""===e&&(e=utils.getRandom(),utils.setCookie(cookie_ssid,e,1825,mainhost)),e},is_new:function(){var e=utils.getCookie(cookie_new);return""===e?(e=utils.getRandom(),utils.setCookie(cookie_new,e,7),1):0},uid:function(){return window.userId||""},shop_id:function(){var e=win.BPConfig.shop_id;return e?e:""},produce_id:function(){var e=win.BPConfig.produce_id;return e?e:""},group_id:function(){return win.groupId?win.groupId:""},topic_id:function(){return win.topicId?win.topicId:""},channel:function(){var e=win.BPConfig.channel;return e?e:""}},SI={last_time:function(){var e=utils.getCookie(cookie_lastTime);if(win.BPConfig.serverTime)e||(e=win.BPConfig.serverTime),utils.setCookie(cookie_lastTime,win.BPConfig.serverTime,365);else{var t=Math.round((new Date).getTime()/1e3);e||(e=t),utils.setCookie(cookie_lastTime,t,365)}return e},active_no:function(){return win.active_no?win.active_no:"-"},page_id:function(){return win._page_id_?win._page_id_:"-"},page_name:function(){return win._page_name_?win._page_name_:"-"}},startTime=win.BPConfig.startTime,headEndTime=win.BPConfig.headEndTime,loadTime,readyTime,P={sdate:function(){return win.BPConfig.serverTime?win.BPConfig.serverTime:"-"},load_time:function(){return startTime&&loadTime?loadTime-startTime:"-"},ready_time:function(){return startTime&&readyTime?readyTime-startTime:"-"},first_screen_time:function(){return headEndTime&&startTime?headEndTime-startTime:"-"},version:function(){return"0.0.1"}},BP={getPvData:function(){var e=utils.collects(CI,"CI="),t=utils.collects(PI,"PI="),n=utils.collects(UI,"UI="),o=utils.collects(P,"P="),i=utils.collects(SI,"SI="),r=[e,t,n,o,i].join("&")+"&"+utils.getSource();return r},pvLog:function(){var e=gifurl+utils.getWm()+"&"+this.getPvData();utils.sendRequest(e)},getExt:function(){var e=[utils.collects(PI,"PI="),utils.collects(P,"P="),utils.getWm(),utils.collects(UI,"UI=")].join("&");return e},send:function(e){var t=utils.jsonToQuery(e),n=gifurl+this.getExt()+"&"+t;utils.sendRequest(n)}},bpOnce=!1;if(utils.domReady(function(){readyTime=(new Date).valueOf(),setTimeout(function(){setPV()},3e3)}),utils.addEvent(window,"load",function(){loadTime=(new Date).valueOf(),readyTime||(readyTime=loadTime),setPV()}),utils.addEvent(window,"error",function(e,t,n,o,i){("Script error."===e||t)&&setTimeout(function(){var r="";if(o=o||window.event&&window.event.errorCharacter||0,i&&i.stack)r="异常信息："+encodeURIComponent(i.stack.toString());else if(e&&""!=e)r="异常信息："+encodeURIComponent(e);else if(arguments.callee){for(var a=[],s=arguments.callee.caller,u=3;s&&--u>0&&(a.push(s.toString()),s!==s.caller);)s=s.caller;a=a.join(","),r="异常信息："+encodeURIComponent(a)}r+="\n错误文件："+encodeURIComponent(t),r+="\n错误行数："+n,r+="\n错误列数："+o;var c=prtl+errorHost,l=c+"Log?err_msg="+r;utils.sendRequest(l)},0)}),!isGomeWebView&&isOnline){var eventType=utils.isMobile?"touchstart":"click";utils.addEvent(doc,eventType,function(e){for(var t=e.srcElement||e.target;t&&t.parentNode;){if(t.hasAttribute(sudaMeta)){var n=t.getAttribute(sudaMeta),o=utils.JSONParse(n);"a"===t.tagName.toLowerCase()&&(o.href=encodeURIComponent(t.href)),o.name||(o.name="-"),BP.send(o);break}t=t.parentNode}})}window.BP=BP}(window,document);