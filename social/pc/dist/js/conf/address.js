webpackJsonp([0],{0:function(a,e,t){(function($){"use strict";var a=t(2),e=t(28),d=t(48),n=t(49),r=t(55),o=t(37),i=t(56);i.setPageData("uc_address");var s=t(57),c="set-default-hide",l=$("[data-node=addrNo]"),u=$("[data-node=addrNew]"),f=$("[data-node=addressList]"),p=$("[data-action=addAddr]"),v=$("[data-node=addrNum]");v.data("count",+v.text());var h=function(a){var e=v.data("count"),t=e+a;v.text(t),v.data("count",t),t>=20?p.addClass("btn-default"):p.removeClass("btn-default"),t>0?(l.addClass("hide"),u.removeClass("hide"),f.removeClass("hide")):(l.removeClass("hide"),u.addClass("hide"),f.addClass("hide"))},m=function(){var a=$(this).closest("tr"),e=1==a.attr("data-dft"),t=a.find("[data-node=name]").text(),d=a.find("[data-node=phone]").text(),r=a.find("[data-node=area]"),o=a.find("[data-node=addr]").text(),i=r.data("address"),s=a.data("id");return n({name:t,addr:o,isDefault:e,phone:d,province:i.provinceName,provinceId:i.provinceId,city:i.cityName,cityId:i.cityId,borough:i.boroughName,boroughId:i.boroughId,area:i.areaName,areaId:i.areaId,addressId:s,idCard:i.idCard}),!1},g=function(){var t=$(this).closest("tr");r("确定删除收货地址吗？",{content:'<p class="pay-pop-p del-pop-p"><em class="iconn-12"></em>您确定要删除收货地址吗</p>',title:"删除",okCls:"",ok:function(){a.post(e.get("delAddress"),{data:{addressId:t.data("id")}}).done(function(a){var e=a.code;200===e?(h(-1),t.remove()):o("删除失败")})}})},x=function(){var a=v.length?v.data("count"):0;return a<20&&n({},{title:"新增收货地址"}),!1},b=function(){var a=$(this);return 1!=a.attr("data-dft")&&a.find("[data-action=setDft]").removeClass(c),!1},C=function(){return $(this).children().eq(0).find("[data-action=setDft]").addClass(c),!1},N=function(){var a=f.find("tr[data-dft=1]").attr("data-dft",0);a.find("[data-node=dftAddr]").addClass(c)},I=function(){var t=$(this),d=t.data("firing");if(d)return!1;t.data("firing",1);var n=t.closest("tr");a.post(e.get("setDefaultAddr"),{data:{addressId:n.data("id")}}).done(function(a){a&&200===a.code?k(n):o("设置失败")}).fail(function(){o("设置失败")}).always(function(){t.data("firing",0)})},k=function(a){N(),a.find("[data-node=dftAddr]").removeClass(c),a.find("[data-action=setDft]").addClass(c),a.attr("data-dft",1),f.find("tr").eq(0).after(a)},y=function(){p.on("click",x),f.on("click","[data-action=editAddr]",m),f.on("click","[data-action=delAddr]",g),f.on("mouseenter","tr[data-id]",b),f.on("mouseleave","tr[data-id]",C),f.on("click","[data-action=setDft]",I),d("addr.edit").sub(function(a){var e=f.find("[data-id="+a.addressId+"]"),t=a.areaName?a.areaName:"",d=a.provinceName+a.cityName+a.boroughName+t;e.find("[data-node=name]").text(a.userName);var n=e.find("[data-node=area]");n.data("address",a),n.text(d),e.find("[data-node=addr]").text(a.address),e.find("[data-node=phone]").text(a.mobile);var r=e.children().eq(0);a.isDefault?k(e):(e.removeAttr("data-dft"),f.find("tr[data-dft=1]").length>0?f.find("tr").eq(1).after(e):f.find("tr").eq(0).after(e),r.find("[data-node=dftAddr]").addClass(c))}),d("addr.add").sub(function(a){var e=a.isDefault,t=a.areaName?a.areaName:"",d=a.provinceName+a.cityName+a.boroughName+t,n=JSON.stringify(a);a.pcba=d,a.pcbaStr=n;var r=0;e?(N(),r=0):r=f.find("tr[data-dft=1]").length>0?1:0;var o=s(a);f.find("tr").eq(r).after($(o)),h(1)})};y()}).call(e,t(1))},49:function(a,e,t){(function(e,$){"use strict";var d=t(50),n=t(22),r=t(48),o=t(2),i=t(28),s=t(43),c=t(51),l=t(42),u=t(52),f=t(37);t(46),t(54);var p,v,h,m,g,x,b,C,N,I,k,y,w,A,D=function(){p=this._$("content"),v=p.find("[data-node=name]"),h=p.find("[data-node=nameTip]"),m=p.find("[data-node=idCard]"),g=p.find("[data-node=idCardTip]"),x=p.find("[data-node=addr]"),b=p.find("[data-node=addrTip]"),C=p.find("[data-node=phone]"),C.attr("maxlength",12),N=p.find("[data-node=phoneTip]"),k=p.find("[data-node=setDefault]"),y=p.find("[data-node=province]"),w=p.find("[data-node=city]"),A=p.find("[data-node=borough]"),I=p.find("[data-node=areaTip]")},T=function(){v.placeholder(),x.placeholder(),C.placeholder()},S=function(a,e,t){var d=s(a),n=!0;return(d>e||d<t)&&(n=!1),n},q=function(){var a=c(v.val());v.val(a);var e=!0;return S(a,20,2)?h.hide():(e=!1,h.show()),e},L=function(){if("1"!=e.isCross)return!0;var a=c(m.val());m.val(a);var t=!0;return/^\d{17}[\dxX]$/.test(a)?g.hide():(t=!1,g.show()),t},j=function(){var a=c(x.val());x.val(a);var e=!0;return S(a,60,5)?b.hide():(e=!1,b.show()),e},O=function(){var a=c(C.val()),e=/^0([0-9]{3,4}-)?[0-9]{10,12}$/,t=/^1[34578][0-9]{9}$/,d=e.test(a)||t.test(a);return d?N.hide():N.show(),d},P=function(){var a=u.getData(),e=!0;return a.provinceId&&a.boroughId&&a.cityId?I.hide():(e=!1,I.show()),e},E=function(){var a=!0;return q()||(a=!1),L()||(a=!1),j()||(a=!1),O()||(a=!1),P()||(a=!1),a},J=function(a,e){var t=c(a.val()),d=s(t);d>e&&a.val(l(t,e))},V=function(){var a=k.data("checked"),t=m.val()||"",d=18===t.length,n={userName:v.val(),idCard:t.toUpperCase(),address:x.val(),mobile:C.val(),isDefault:a?1:0,isCross:!!parseInt(e.isCross),hasIdCardVal:d},r=u.getData();return r.areaId&&(n.areaId=r.areaId,n.areaName=r.areaName),r.provinceId&&(n.provinceId=r.provinceId,n.provinceName=r.provinceName),r.cityId&&(n.cityId=r.cityId,n.cityName=r.cityName),r.boroughId&&(n.boroughId=r.boroughId,n.boroughName=r.boroughName),n},X=function(){var a=p.find("[data-node=province]"),e=p.find("[data-node=city]"),t=p.find("[data-node=borough]"),d=p.find("[data-node=area]");u.init([a,e,t,d],["选择省","选择市","选择区县","选择街道"],{},[{content:'<span class="menu-add" data-node="checked">选择省</span>',btn:'<span class="down-arrow"><em class="iconn-2"></em></span>'},{content:'<span class="menu-add" data-node="checked">选择市</span>',btn:'<span class="down-arrow"><em class="iconn-2"></em></span>'},{content:'<span class="menu-add" data-node="checked">选择区县</span>',btn:'<span class="down-arrow"><em class="iconn-2"></em></span>'},{content:'<span class="menu-add" data-node="checked">选择街道</span>',btn:'<span class="down-arrow"><em class="iconn-2"></em></span>'}])},M=function(){v.on("blur",function(){q()}),v.on("textchange",function(){var a=$(this),e=a.data("name");a.val()!=e&&""!==e&&m.val("").prop("readonly",!1),J(v,20)}),m.on("blur",function(){L()}),m.on("contextmenu",function(){return!1}),m.on("keydown",function(a){var e=a.keyCode;return e>=48&&e<=57||e>=96&&e<=105||88==e||8==e||46==e||e>=37&&e<=40}),m.on("textchange",function(){var a=$(this).val(),e="";/^\d{1,18}$|^\d{17}[xX]$/.test(a)||(e=$.trim(a.substr(0,a.length-1)),$(this).val(e))}),x.on("blur",function(){j()}),x.on("textchange",function(){J(x,60)}),C.on("blur",function(){O()}),k.on("click",function(){var a=$(this),e=a.find("span"),t="menu-radio-checked";return e.hasClass(t)?(a.data("checked",0),e.removeClass(t)):(a.data("checked",1),e.addClass(t)),!1}),y.on("click","a",function(){P()}),w.on("click","a",function(){P()}),A.on("click","a",function(){P()})},U=function(){v.off(),m.off(),x.off(),C.off(),k.off(),u.destroy()},_={name:"",phone:"",addr:"",province:"",city:"",borough:"",area:"",setDefault:!0,isCross:!1},R=function(a,t){var s=a.name,c=i.get("addAddress"),l="addr.add",u=a.addressId;u&&(c=i.get("editAddress"),l="addr.edit");var p=d(a||_);t=t||{};var v=!1,h={title:"编辑收货地址",modal:!0,fixed:!0,content:p,className:"pop-box",okValue:"确定",okCls:"pc-btn pc-btnh35 circle-pop-btn",ok:function(){var a=this;if(E()){if(v)return!1;v=!0;var t=V();"0"===e.isCross&&s!=t.userName&&t.idCard&&(t.idCard=""),u&&(t.addressId=u),void 0===t.areaId&&(t.areaId="110114001",t.areaName="全部区域"),o.post(c,{data:t}).done(function(e){var d=$("[data-node=userCardTips]"),n=e.code,o=e.data||{};if(200===n){o.addressId&&(t.addressId=o.addressId),r(l).pub(t);var i=$("[data-node=curAddr]"),s=i.closest("tr");if(i.length){var c=s.find("[data-node=addrInfos]").data("addr").idCard,u=!!$.trim(c);d.length&&u&&(d.remove(),s.find("[data-action=editAddr]").closest("td").removeClass("hide-text"))}a.close(),a.remove()}else f(e.message)}).fail(function(){}).always(function(){v=!1})}return!1},onshow:function(){D.call(this),X.call(this),T(),M()},onclose:function(){U(),v=!1}};$.extend(!0,h,t);var m=n(h);return m.show(),m};a.exports=R}).call(e,t(4),t(1))},50:function(a,e,t){var d=t(26);a.exports=d("src/js/module/popup/deliveryAddr/content",function(a,e){"use strict";var t=this,d=(t.$helpers,t.$escape),n=a.name,r=a.isCross,o=a.idCard,i=a.hasIdCardVal,s=a.provinceId,c=a.province,l=a.cityId,u=a.city,f=a.boroughId,p=a.borough,v=a.areaId,h=a.area,m=a.addr,g=a.phone,x=a.isDefault,b="";return b+='<div class="edit-add-box"> <dl class="receiver clearfix"> <dt>收货人:</dt> <dd> <input type="text" data-node="name" data-name="',b+=d(n),b+='" placeholder="请输入姓名" value="',b+=d(n),b+='"> </dd> </dl> <p class="warn-txt" data-node="nameTip">收货人姓名为2-20个字符</p> ',r&&(b+=' <dl class="receiver clearfix"> <dt>身份证号:</dt> <dd> <input type="text" data-node="idCard" data-idcard="',b+=d(o),b+='" ',i&&(b+='readonly="true"'),b+=' placeholder="请输入身份证号" value="',b+=d(o),b+='"> </dd> </dl> <p class="warn-txt" data-node="idCardTip">请填写与收货人姓名对应的身份证号码</p> '),b+=' <dl class="area clearfix"> <dt>所在地区:</dt> <dd data-node="areaList"> <div data-node="province" data-provinceId=',b+=d(s),b+=">",b+=d(c),b+='</div> <div data-node="city" data-cityId=',b+=d(l),b+=">",b+=d(u),b+='</div> <div data-node="borough" data-boroughId=',b+=d(f),b+=">",b+=d(p),b+='</div> <div data-node="area" data-areaId=',b+=d(v),b+=">",b+=d(h),b+='</div> </dd> </dl> <p class="warn-txt" data-node="areaTip">请补充地址</p> <dl class="detail-add clearfix"> <dt>详细地址:</dt> <dd> <input type="text" data-node="addr" placeholder="请如实填写详细地址" value="',b+=d(m),b+='"> </dd> </dl> <p class="warn-txt" data-node="addrTip">限制为5-60个字符</p> <dl class="phone clearfix"> <dt>电话/手机:</dt> <dd> <input type="text" data-node="phone" placeholder="请输入电话/手机号" value="',b+=d(g),b+='"> </dd> </dl> <p class="warn-txt" data-node="phoneTip">请输入手机号/电话号码</p> <div class="set-default-add"> <label data-node="setDefault" data-checked="',b+=x===!0?"true":"false",b+='"> <span class="menu-radio ',b+=x===!0?"menu-radio-checked":"''",b+='"></span>设置为默认地址 </label> </div> </div> ',new String(b)})},51:function(a,e){"use strict";var t=function(a){return a.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")};a.exports=t},52:function(a,e,t){(function($){"use strict";t(53);var e,d=t(2),n=t(28),r={},o=function(a,t,o,i){function s(a,e){if(window.localStorage){var t=JSON.parse(localStorage.getItem("address"+a)),r=null===t||!t.hasOwnProperty("time")||t.time<+new Date;r?d.get(n.get("getAddress")+a,{}).done(function(t){if(200===t.code){e.call(null,t.data);var d={data:t.data,time:+new Date+6048e5};localStorage.removeItem("address"+a),localStorage.setItem("address"+a,JSON.stringify(d))}}).fail(function(a,e){}):e.call(null,t.data)}else d.get(n.get("getAddress")+a,{}).done(function(a){200===a.code&&e.call(null,a.data)}).fail(function(a,e){})}function c(e,d){var n=e;d||(n++,a[e].find("div").children().eq(0).text(r[u[e][1]]));for(var o=n,i=a.length;o<i;o++)void 0!==r[u[o][0]]&&(delete r[u[o][0]],delete r[u[o][1]]),a[o].find("div").children().eq(0).text(l?t:t[o]),o!=n&&a[o].find("ul").html("")}var a=a,l=!1,u=[["provinceId","provinceName"],["cityId","cityName"],["boroughId","boroughName"],["areaId","areaName"]],f={},p=!(i instanceof Array);o=$.extend({},f,o),e=a,"string"==typeof t&&(l=!0);for(var v=0;v<e.length;v++){var h=l?t:t[v];h!==e[v].text()&&(r[u[v][0]]=e[v].attr("data-"+[u[v][0]]),r[u[v][1]]=e[v].text());var m=v-1>=0?e[v-1].attr("data-"+[u[v-1][0]]):0;!function(d){var n=o;n.please=l?t:t[d],n.onChanged=function(n){var o=n.value,i=!1;void 0===o?i=!0:(r[u[d][0]]=n.value,r[u[d][1]]=n.text,d+1<=e.length-1&&s(~~o,function(e){a[d+1].setList({data:e.nodes,please:l?t:t[d+1],textName:"name",valueName:"id"})})),c(d,i)},a[d].selects(p?i:i[d],n),""!==m&&s(m,function(a){e[d].setList({data:a.nodes,please:l?t:t[d],textName:"name",valueName:"id",checked:e[0].find("div").children().eq(0).text()})})}(v)}},i=function(){for(var a=0,t=e.length;a<t;a++)e[a].off()},s=function(){return r};a.exports={init:o,destroy:i,getData:s}}).call(e,t(1))},53:function(a,e,t){(function($){"use strict";$.fn.extend({selects:function(a,e){var t=this,d={content:'<span class="span1">'+$(t).text()+"</span>",btn:'<span class="span2"></span>'},n=$.trim($(t).text()),r={data:[],checked:n,please:"请选择",textName:"text",valueName:"value",selectdCls:"active",checkText:!0,checkedCls:"active",disable:"disable",onChanged:function(){}};a=$.extend({},d,a),e=$.extend({},r,e);var o=$("<div></div>").appendTo($(t).empty()).height($(t).height());$(a.content).text(""===n?e.please:n).appendTo(o).attr("data-node","checked"),$(a.btn).appendTo(o);for(var i,s,c=null,l='<ul data-node="selectList"><li><a href="javascript:;">'+e.please+"</a></li>",u=e.parent?$(e.parent):this,f=e.parent?this.selector:void 0,p=0,v=e.data.length;p<v;p++)c=void 0!==e.data[p][e.valueName]?e.data[p][e.valueName]:p,l+='<li class="'+(e.data[p].checked===c?e.checkedCls:"")+'"><a href="javascript:;" data-value="'+c+'" data-index="'+p+'">'+e.data[p][e.textName]+"</a></li>";return l+="</ul>",$(l).appendTo($(t)),u.on("click",f,function(a){a.stopPropagation(),$('ul[data-node="selectList"]').hide(),0===e.data.length&&"running"!==$(this).attr("data-refresh")||$(this).hasClass(e.disable)||($(this).addClass(e.selectdCls),0!==$(this).find("ul li").length&&$(this).find("ul").show())}),u.on("click",'ul[data-node="selectList"] a',function(a){return a.stopPropagation(),i=$(this).parents("ul").parent().find('[data-node="checked"]'),i.text()!==$(this).text()&&(s={text:$(this).text()!==e.please?$(this).text():"",value:$(this).attr("data-value"),index:$(this).attr("data-index")},e.checkText&&i.text($(this).text()),void 0!==e.checkedCls&&$(this).parent().addClass(e.checkedCls).siblings().removeClass(e.checkedCls),e.onChanged.call(this,s)),$(this).parents("ul").hide(),!1}),$(document).on("click",function(){t.find("ul").hide()}),this},setList:function(a){$(this).attr("data-refresh","running");var e,t=this,d={data:[],textName:"text",checked:"",valueName:"value",please:"请选择",checkedCls:"active"};a=$.extend({},d,a);var n='<li><a href="javascript:;">'+a.please+"</a></li>";if(0!==a.data.length)for(var r=0,o=a.data.length;r<o;r++)e=void 0!==a.data[r][a.valueName]?a.data[r][a.valueName]:r,n+='<li class="'+(a.checked===a.data[r][a.textName]?a.checkedCls:"")+'"><a href="javascript:;" data-value="'+e+'">'+a.data[r][a.textName]+"</a></li>";return $(t).find('[data-node="selectList"]').html(n),this}})}).call(e,t(1))},54:function(a,e,t){(function($){"use strict";var a=document.createElement("input"),e="oninput"in a&&(!("documentMode"in document)||document.documentMode>9),t=function(a){return"INPUT"===a.nodeName&&("text"===a.type||"password"===a.type)},d=null,n=null,r=null,o={get:function(){return r.get.call(this)},set:function(a){n=a,r.set.call(this,a)}},i=function(a){d=a,n=a.value,r=Object.getOwnPropertyDescriptor(a.constructor.prototype,"value"),Object.defineProperty(d,"value",o),d.attachEvent("onpropertychange",c)},s=function(){d&&(delete d.value,d.detachEvent("onpropertychange",c),d=null,n=null,r=null)},c=function(a){if("value"===a.propertyName){var e=a.srcElement.value;e!==n&&(n=e,$(d).trigger("textchange"))}};e?$(document).on("input",function(a){"TEXTAREA"!==a.target.nodeName&&$(a.target).trigger("textchange")}):$(document).on("focusin",function(a){t(a.target)&&(s(),i(a.target))}).on("focusout",function(){s()}).on("selectionchange keyup keydown",function(){d&&d.value!==n&&(n=d.value,$(d).trigger("textchange"))})}).call(e,t(1))},55:function(a,e,t){(function($){"use strict";var e=t(22),d=function(){},n=function(a,t){var n={fixed:!0,modal:!0,content:'<p class="del-pop-p">'+a+"</p>",className:"pop-box",okCls:"pc-btn pc-btnh35 circle-pop-btn",ok:d,cancel:d,btnWrapCls:"two-buttons"};$.extend(!0,n,t);var r=e(n);return r.show(),r};a.exports=n}).call(e,t(1))},57:function(a,e,t){var d=t(26);a.exports=d("src/js/page/address/addrItem",function(a,e){"use strict";var t=this,d=(t.$helpers,t.$escape),n=a.addressId,r=a.isDefault,o=a.userName,i=a.pcbaStr,s=a.pcba,c=a.address,l=a.mobile,u="";return u+='<tr data-id="',u+=d(n),u+='" data-dft="',u+=d(r),u+='"> <td class="reciever"> <span class="name" data-node="name">',u+=d(o),u+='</span> <span class="default-addr ',0===r&&(u+="set-default-hide"),u+='" data-node="dftAddr">默认地址</span> <span class="default-addr set-default-addr set-default-hide" data-action="setDft">设为默认地址</span> </td> <td class="address" data-node="area" data-address="',u+=d(i),u+='">',u+=d(s),u+='</td> <td class="detailed-addr" data-node="addr">',u+=d(c),u+='</td> <td class="tel" data-node="phone">',u+=d(l),u+='</td> <td> <a href="#" class="amend-link" data-action="editAddr">修改</a> <span>|</span> <a href="#" class="delete-link" data-action="delAddr">删除</a> </td> </tr>',new String(u)})}});