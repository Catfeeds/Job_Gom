webpackJsonp([33],{0:function(t,n,e){"use strict";e(267)},51:function(t,n){"use strict";var e=function(t){return t.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")};t.exports=e},54:function(t,n,e){(function($){"use strict";var t=document.createElement("input"),n="oninput"in t&&(!("documentMode"in document)||document.documentMode>9),e=function(t){return"INPUT"===t.nodeName&&("text"===t.type||"password"===t.type)},a=null,i=null,o=null,c={get:function(){return o.get.call(this)},set:function(t){i=t,o.set.call(this,t)}},s=function(t){a=t,i=t.value,o=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(a,"value",c),a.attachEvent("onpropertychange",r)},d=function(){a&&(delete a.value,a.detachEvent("onpropertychange",r),a=null,i=null,o=null)},r=function(t){if("value"===t.propertyName){var n=t.srcElement.value;n!==i&&(i=n,$(a).trigger("textchange"))}};n?$(document).on("input",function(t){"TEXTAREA"!==t.target.nodeName&&$(t.target).trigger("textchange")}):$(document).on("focusin",function(t){e(t.target)&&(d(),s(t.target))}).on("focusout",function(){d()}).on("selectionchange keyup keydown",function(){a&&a.value!==i&&(i=a.value,$(a).trigger("textchange"))})}).call(n,e(1))},87:function(t,n,e){(function($){"use strict";var n,e,a,i=function(){n.off().on("click",function(){n.hide(),e.hide()}),e.off().on("click",function(){n.hide(),e.hide()})},o=function(t,o){var c={duration:2e3,callback:function(){}};$.extend(c,o||{}),clearTimeout(a),n=$('[data-action="publicMask"]'),e=$('[data-action="publicTips"]'),n.length>0?(n.show(),e.show().text(t)):($("body").append('<div data-action="publicMask" class="ordi-toast"></div><div class="ordi-toast-txt" data-action="publicTips">'+t+"</div>"),n=$('[data-action="publicMask"]'),e=$('[data-action="publicTips"]'),i()),e.css("margin",-e[0].offsetHeight/2+"px 0 0 "+-e.width()/2+"px"),a=setTimeout(function(){n.hide(),e.hide(),c.callback()},c.duration)};t.exports={init:o,events:i}}).call(n,e(1))},123:function(t,n,e){(function($){"use strict";var n=e(2),a=e(28),i=e(124),o=e(47),c={qq:"http://connect.qq.com/widget/shareqq/index.html",sina:"http://v.t.sina.com.cn/share/share.php",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey"},s={url:"http://www.gomeplus.com",title:"国美PlusAPP边玩边分享，购物不孤单",pic:"http://www.gomeplus.com/images/logo.png",summary:"国美PlusAPP边玩边分享，购物不孤单"},d=function(t){window.open(t)},r=!1,l=function(){var t='<p data-node="shareBtnBox" class="share-down" style="z-index:21;"><span class="share-box"><span class="icon icon-up-arrow"></span><span class="icon-box"><em data-shareto="weixin" class="iconn-30"></em><em data-shareto="qq" class="iconn-32"></em><em data-shareto="sina" class="iconn-31"></em><em data-shareto="qzone" class="iconn-33"></em></span></span></p>';$("body").append(t),r=!0},u=function(t){!r&&l(),$("[data-node=shareBtnBox]").css({left:t.x,top:t.y}).show()},p=!1,f=function(){var t='<div class="share-weixin"><div class="wx-mask"></div><div class="wx-main"><div class="wx-code"><span></span><img data-node="shareWeixinCode" alt="分享到微信" /></div><p>打开微信扫一扫，即可分享</p><a href="javascript:;" title="点击关闭" class="wx-close">×</a></div></div>';$("body").append(t),p=!0},h=function(t,n){var e=[],a={title:t.title,url:t.url,summary:t.summary,desc:t.desc,site:t.site};n?a.pics=t.pic:a.pic=t.pic;for(var i in a)e.push(i+"="+encodeURIComponent(a[i]||""));return e.join("&")},m={weixin:function(t){var n=i(t.url);!p&&f(),$("[data-node=shareWeixinCode]")[0].src=n,$(".share-weixin").show(),$(".wx-close").on("click",function(){$(".share-weixin").hide()})},qq:function(t){var n=c.qq+"?"+h(t,!0);d(n)},sina:function(t){var n=c.sina+"?"+h(t);d(n)},qzone:function(t){var n=c.qzone+"?"+h(t,!0);d(n)}},v=function(t){var e="0"!==t.isRebate;n.get(a.get("shareGetGoodsKid"),{validate:e,data:{skuId:t.skuId,itemId:t.itemId,parentKid:t.parentKid},async:!1}).done(function(n){if(n.success===!0){var e=n.data.kid,a=t.shareInfo,i=a.url,o=i.indexOf("?");o>0&&(i=i.substring(0,o)),a.url=i+"?onlineUserId="+a.onlineUserId+"&kId="+e,m[t.shareto](a)}else m[t.shareto](t.shareInfo)}).fail(function(n){e?o()&&m[t.shareto](t.shareInfo):m[t.shareto](t.shareInfo)})},g=function(t){var n={title:t.title||s.title,url:t.url||s.url,pic:t.pic||s.pic,summary:t.summary||"",desc:t.desc||""};!!m[t.type]&&m[t.type](n)},x=function(t,n,e){var a=null;$item="string"==typeof t?$(t):t,n=n||"[data-action=shareto]",$item.on("mouseenter",n,function(t){var n=$(this).data("surl"),e=$(this).data("stitle"),i=$(this).data("spic");a={url:n,title:e,pic:i};var o=$(this).width(),c=$(this).height(),s=$(this).offset().left/1+o/2-80+"px",d=$(this).offset().top/1+(c-1)+"px";return u({x:s,y:d}),!1}),$item.on("mouseleave",n,function(t){return $("[data-node=shareBtnBox]").hide(),!1}),$("body").on("click","[data-shareto]",function(t){t.preventDefault(),shareType=$(this).data("shareto"),a.type=shareType,e=e||function(){},e.call(null,a),g(a)}),$("body").on("mouseenter","[data-node=shareBtnBox]",function(){$(this).show()}),$("body").on("mouseleave","[data-node=shareBtnBox]",function(){$(this).hide()})};t.exports={share:g,shareto:m,shareItem:x,shareWithKid:v}}).call(n,e(1))},124:function(t,n,e){(function(n){"use strict";var e=function(t){return n.wap_url+"q.php?t="+encodeURIComponent(t)};t.exports=e}).call(n,e(4))},175:function(t,n,e){(function($,n){"use strict";var a,i=e(2),o=e(28),c=e(87),s=e(47),d=!1,r=function(t,e){var r=$(t.parent?t.parent:t.selector),l=t.parent?t.selector:void 0;r.on("click",l,function(){function t(t){i.post(a,t).done(function(t){200===t.code?(l?$(r).addClass("active").attr("data-collect","collect"):$(r).removeClass("active").attr("data-collect",""),u.call(r,l)):c.init(t.message)}).fail(function(t){s()&&c.init("店铺收藏失败")}).always(function(){d=!1})}var r=this,l=!0,u=e||function(){},p={validate:!0,data:{shopId:n.shopId}};return d||(d=!0,""===$(r).attr("data-collect")?(a=o.get("shopCollect"),l=!0):(a=o.get("unShopCollect"),l=!1)),t(p),!1})};t.exports=r}).call(n,e(1),e(4))},256:function(t,n,e){(function($,n){"use strict";var a=e(2),i=e(28),o=e(37),c=e(48),s=e(71),d=e(47),r=d(),l=function(){},u=function(t,n,e){t.data("praise",n),t.data("count",e)},p={normal:{add:function(t,n,e){t.addClass("active"),e||(e="取消点赞"),t.find("span").text(e)},reduce:function(t,n,e){t.removeClass("active"),e||(e="点赞"),t.find("span").text(e)}}},f=function(t){return p[t]},h=function(t,e,d){var p=$(t),h=d.onPraise||l,m=d.onUnPraise||l,v=d.onPraised||l,g=d.mode||"normal";p.on("click",e,function(){function t(t){a.post(i.get("praise"),t).done(function(t){var a=f(g);if(c(s.comment.enableEditor).pub({pid:"enable"}),t&&200===t.code&&t.success)1===p?(u(e,0,++w),a.add(e,t,w),h.call(e,t,w)):0===p&&(u(e,1,--w),a.reduce(e,t,w),m.call(e,t,w));else if(t&&422===t.code);else if(t&&403===t.code)o("抱歉！该话题审核未通过",{ok:function(){window.location.href=n.group_domain+"index/error?code=topic"}});else{var i=t.message;if(409===t.code)return v.call(e,t,w),r&&o(i),!1;0===l&&404===t.code?o(i,{ok:function(){window.location.reload()}}):o(i)}}).fail(function(){}).always(function(){e.data("firing",0)})}var e=$(this),d=e.data("firing");if(1!==d){e.data("firing",1);var l=e.data("type"),p=e.data("praise"),x=e.data("id"),w=e.data("count"),y={validate:!0,data:{id:x,type:l,isPraise:p},onLogin:t,refresh:!0};return t(y),!1}})};t.exports=h}).call(n,e(1),e(4))},267:function(t,n,e){(function($,n){"use strict";var a=e(2),i=e(28),o=e(51),c=e(42),s=e(256),d=e(123).shareto,r=e(175);e(54);var l=$("[data-node=Form]"),u=l.find("[data-node=codeBtn]"),p=l.find("[data-node=codeImg]"),f=l.find("[data-node=codeInput]"),h=l.find("[data-node=codeVilid]"),m=l.find("[data-node=codeVilid] .red"),v=l.find("[data-node=submitBtn]"),g=$('[data-node="shopTop"]'),x=g.find('[data-action="love"]'),w=x.find('[data-node="loveNum"]'),y=g.find('[data-action="collect"]'),b=y.find('[data-node="collectNum"]'),k=!0;t.exports=$(function(){var t=~~w.text(),e=function(t){m.html(t),h.removeClass("hide")},l=function(){h.addClass("hide"),o(f.val()).length>4&&f.val(c(f.val(),4))},y=function(){if(0!=k){k=!1,setTimeout(function(){k=!0},3e3);var t=o(f.val());a.get(i.get("shopCodeCheck"),{data:{shopId:n.shopId,code:t}},{async:!1}).done(function(a){a.success?location.href=n.mall_domain+"shop/show?shopId="+n.shopId+"&code="+t:e(a.msg)}).fail(function(){alert("数据请求失败 请稍后尝试")})}},q=function(){h.addClass("hide"),a.get(i.get("getCodeOfBusiness"),{async:!1}).done(function(t){t.success?p.attr("src","data:image/gif;base64,"+t.data):alert("数据请求失败 请稍后尝试")}).fail(function(){alert("数据请求失败 请稍后尝试")})};"9"==n.type&&q();(function(){s('[data-node="shopTop"]','[data-action="love"]',{onPraise:function(){t++,w.text(t)},onUnPraise:function(){t--,w.text(t)},onPraised:function(){x.find("em").addClass("active"),w.text(t)}}),r({selector:'[data-action="collect"]',parent:'[data-node="shopTop"]'},function(t){t?b.text(~~b.text()+1).prev().addClass("active"):b.text(~~b.text()-1).prev().removeClass("active")});var e=null,a=$('[data-node="shareBtnBox"]'),i={},o="",c="";$('[data-node="shopTop"]').on("mouseenter",'[data-action="shareto"]',function(){o=$(this).data("surl"),$.isEmptyObject(i)&&(i={url:$(this).data("surl"),title:$(this).data("stitle"),pic:""===$(this).data("spic")?n.imgpath+"/images/public/logo.png":$(this).data("spic")},c=$(this).data("stitle")),a.css({top:$(this).offset().top+30,left:$(this).offset().left-~~$('[data-node="shareBtnBox"]').width()/2+~~$(this).width()/2}).show(),BP.send({event_id:"B000P019",shop_id:n.shopId})}).on("mouseleave",'[data-action="shareto"]',function(){e=setTimeout(function(){a.hide()},100)}),a.on("mouseenter",function(){clearTimeout(e)}).on("mouseleave",function(){$(this).hide()});var p=g.find("img").attr("src"),h=function(t){return"https://i-pre.meixincdn.com/v1/img/T1gyVTBmLT1R4cSCrK.png"!=t&&"https://i6.meixincdn.com/v1/img/T1YFxTByJT1R4cSCrK.png"!=t&&"https://i-pre.meixincdn.com/v1/img/T1TaVTB7LT1R4cSCrK.png"!=t},m=function(t){var n=/\w+\.(jpg|gif|bmp|png)$/;return!!h(t)&&n.test(t)};a.on("click",'[data-shareto="weixin"]',function(){i.url=n.weixin_share,i.title=c,d.weixin(i),analytic("out-weixin")}).on("click",'[data-shareto="qq"]',function(){i.url=o,i.title=c,i.summary="我发现了前所未有的好店，不如，你也来逛逛？",i.pic=m(p)?p:n.imgpath+"/images/public/logo.jpg",d.qq(i),analytic("out-QQ")}).on("click",'[data-shareto="sina"]',function(){i.url=o,i.title=c+",这是我费尽千辛万苦找到的超级好店。",i.pic=m(p)?p:n.imgpath+"/images/public/logo.jpg",d.sina(i),analytic("out-xlwb")}).on("click",'[data-shareto="qzone"]',function(){i.url=o,i.title=c,i.summary="这是我费尽千辛万苦找到的超级好店。",i.pic=m(p)?p:n.imgpath+"/images/public/logo.jpg",d.qzone(i),analytic("out-Qqzone")}),f.on("textchange",l),v.on("click",y),u.on("click",function(){f.val(""),q()})})()})}).call(n,e(1),e(4))}});