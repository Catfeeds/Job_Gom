webpackJsonp([30],{0:function(a,t,d){"use strict";var e=d(251);e.init()},251:function(a,t,d){(function($,t){"use strict";function e(a,t){var d=a,e=1==t?"退货":"换货";w.attr("data-serviceId",t),k.children("span").html(e+"原因:"),B.children("span").html(e+"描述:"),T.empty();for(var o="",s=0;s<d.length;s++)o+='<a href="javascript:;">'+d[s]+"</a>";T.append(o)}function o(){var a=$("[data-btn='goodOption']").children("[data-node=returnGoBtn]"),t=$("[data-btn='goodOption']").children("[data-node=extGoBtn]");6==N||7==N?($("[data-node=contactVendor]").addClass("disabled"),G.hasExchangeType?(e(I,2),$('[data-btn="goodOption"]').attr("data-type",2)):(t.addClass("disabled").children("em").removeClass("menu-radio-checked"),a.children("em").addClass("menu-radio-checked"),e(I,1),$('[data-btn="goodOption"]').attr("data-type",1))):(e(I,2),$('[data-btn="goodOption"]').attr("data-type",2))}function s(){var a=$("[data-node=inputChooseNum]").attr("data-goodsmaxnum");$("[data-node=reduceNum]").addClass("disabled"),$("[data-node=addNum]").addClass("disabled"),$("[data-node=markedWordNum]").addClass("hide"),$("[data-node=inputChooseNum]").attr("readonly","true"),$("[data-node=inputChooseNum]").val(a)}function n(a){a.stopPropagation(),T.hasClass("hide")?(T.removeClass("hide").addClass("show"),y.children("em").removeClass("icon-down").addClass("icon-up")):(T.removeClass("show").addClass("hide"),y.children("em").removeClass("icon-up").addClass("icon-down"))}function i(a){a.stopPropagation();var t=$(this).html();y.children("span").html(t),T.removeClass("show").addClass("hide"),y.children("em").removeClass("icon-up").addClass("icon-down")}function r(a){a.stopPropagation(),T.removeClass("show").addClass("hide"),$("[data-bigToast=toast]").addClass("hide").removeClass("show"),y.children("em").removeClass("icon-up").addClass("icon-down")}function l(a){if(6==N||7==N)return!1;a.stopPropagation();var d=t.pcimgpath;b('<div class="sm-download"><img src="'+d+'/images/public/ma1.jpg"><p>描二维码，下载国美PlusAPP查看消息</p></div>')}function c(a){a.stopPropagation(),$("[data-bigToast=toast]").addClass("hide").removeClass("show");var t=P.val();if(t.length>200)return $("[data-bigToast=toast]").addClass("show").removeClass("hide").html("最多输入200字"),void setTimeout(function(){$("[data-bigToast=toast]").removeClass("show").addClass("hide")},2e3);if(6==N||7==N){var d={optype:1,itemid:G.childId};f.post(g.get("orderCheck"),{data:d}).then(function(a){a.success?h():($("[data-bigToast=toast]").addClass("show").removeClass("hide").html(a.msg),setTimeout(function(){$("[data-bigToast=toast]").removeClass("show").addClass("hide")},2e3))})}else h()}function h(){var a=t.order_id,d=P.val(),e=y.children("span").html(),o=$('[data-btn="goodOption"]').attr("data-type"),s={quantity:$("[data-node=inputChooseNum]").val(),orderid:a,type:o,reasion:e,content:d};f.post(g.get("getRefundInfo"),{data:s}).then(function(a){a.success?($("[data-bigToast=toast]").addClass("hide").removeClass("show"),window.location.href="/CustomerInfo/showCustomerInfo?id="+a.data.afterSalesOrderId):($("[data-bigToast=toast]").addClass("show").removeClass("hide").html("提交失败"),setTimeout(function(){$("[data-bigToast=toast]").removeClass("show").addClass("hide")},2e3))})}function u(a){a.stopPropagation(),$("[data-bigToast=toast]").addClass("hide").removeClass("show"),window.history.go(-1)}function m(){var a=$(this).val().length;a>=201?$(".txt-count").children("span").html("最多输入200字"):$(".txt-count").children("span").html(200-a)}function p(){var a=$(this),t=$("[data-btn=goodOption]");if(a.hasClass("curBtn")||a.hasClass("disabled"))return!1;var d=$("[data-node=extGoBtn]"),o=$("[data-node=returnGoBtn]");"extGoBtn"==a.attr("data-node")?(e(I,2),a.addClass("curBtn"),a.children("em").addClass("menu-radio-checked"),o.removeClass("curBtn").children("em").removeClass("menu-radio-checked"),t.attr("data-type",2)):"returnGoBtn"==a.attr("data-node")&&(e(I,1),a.addClass("curBtn"),a.children("em").addClass("menu-radio-checked"),d.removeClass("curBtn").children("em").removeClass("menu-radio-checked"),t.attr("data-type",1))}function C(){y.on("click",n),T.on("click","a",i),$("body").on("click",r),$("[data-btn='goodOption']").on("click","span",p),$("[data-node='contactVendor']").on("click",l),O.on("click",c),x.on("click",u),P.on("keyup",m)}function v(){o(),y.children("em").removeClass("icon-up"),s(),C()}var g=d(28),f=d(2),b=d(37),w=$("[data-node=serviceType]"),k=$("[data-node=reasionLabel]"),y=$("[data-none=returnReason]"),T=$("[data-node=reasonList]"),B=$("[data-node=descLabel]"),P=$("[data-node=reasonDescribe]"),O=$("[data-node=sendMsg]"),x=$("[data-node=cancelMsg]"),N=t.orderType,G=t.showPriv,I=["无理由退换货","质量问题","发错商品","工艺做工瑕疵","商品开箱残","商品与描述不符","商品配件少件/破损/污渍等","安装环境受限","安装不及时/安装态度差等","物流服务态度差/配送不及时等","拒收问题","二次销售","特殊退换货","其他原因"];a.exports={init:v}}).call(t,d(1),d(4))}});