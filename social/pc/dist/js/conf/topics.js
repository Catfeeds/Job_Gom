webpackJsonp([38],{0:function(n,a,e){"use strict";var t=e(301),i=e(302);e(303)(),e(255)();var o=e(56);o.setPageData("group"),t.init(),i.init()},123:function(n,a,e){(function($){"use strict";var a=e(2),t=e(28),i=e(124),o=e(47),r={qq:"http://connect.qq.com/widget/shareqq/index.html",sina:"http://v.t.sina.com.cn/share/share.php",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey"},s={url:"http://www.gomeplus.com",title:"国美PlusAPP边玩边分享，购物不孤单",pic:"http://www.gomeplus.com/images/logo.png",summary:"国美PlusAPP边玩边分享，购物不孤单"},u=function(n){window.open(n)},c=!1,l=function(){var n='<p data-node="shareBtnBox" class="share-down" style="z-index:21;"><span class="share-box"><span class="icon icon-up-arrow"></span><span class="icon-box"><em data-shareto="weixin" class="iconn-30"></em><em data-shareto="qq" class="iconn-32"></em><em data-shareto="sina" class="iconn-31"></em><em data-shareto="qzone" class="iconn-33"></em></span></span></p>';$("body").append(n),c=!0},d=function(n){!c&&l(),$("[data-node=shareBtnBox]").css({left:n.x,top:n.y}).show()},m=!1,p=function(){var n='<div class="share-weixin"><div class="wx-mask"></div><div class="wx-main"><div class="wx-code"><span></span><img data-node="shareWeixinCode" alt="分享到微信" /></div><p>打开微信扫一扫，即可分享</p><a href="javascript:;" title="点击关闭" class="wx-close">×</a></div></div>';$("body").append(n),m=!0},f=function(n,a){var e=[],t={title:n.title,url:n.url,summary:n.summary,desc:n.desc,site:n.site};a?t.pics=n.pic:t.pic=n.pic;for(var i in t)e.push(i+"="+encodeURIComponent(t[i]||""));return e.join("&")},h={weixin:function(n){var a=i(n.url);!m&&p(),$("[data-node=shareWeixinCode]")[0].src=a,$(".share-weixin").show(),$(".wx-close").on("click",function(){$(".share-weixin").hide()})},qq:function(n){var a=r.qq+"?"+f(n,!0);u(a)},sina:function(n){var a=r.sina+"?"+f(n);u(a)},qzone:function(n){var a=r.qzone+"?"+f(n,!0);u(a)}},g=function(n){var e="0"!==n.isRebate;a.get(t.get("shareGetGoodsKid"),{validate:e,data:{skuId:n.skuId,itemId:n.itemId,parentKid:n.parentKid},async:!1}).done(function(a){if(a.success===!0){var e=a.data.kid,t=n.shareInfo,i=t.url,o=i.indexOf("?");o>0&&(i=i.substring(0,o)),t.url=i+"?onlineUserId="+t.onlineUserId+"&kId="+e,h[n.shareto](t)}else h[n.shareto](n.shareInfo)}).fail(function(a){e?o()&&h[n.shareto](n.shareInfo):h[n.shareto](n.shareInfo)})},v=function(n){var a={title:n.title||s.title,url:n.url||s.url,pic:n.pic||s.pic,summary:n.summary||"",desc:n.desc||""};!!h[n.type]&&h[n.type](a)},x=function(n,a,e){var t=null;$item="string"==typeof n?$(n):n,a=a||"[data-action=shareto]",$item.on("mouseenter",a,function(n){var a=$(this).data("surl"),e=$(this).data("stitle"),i=$(this).data("spic");t={url:a,title:e,pic:i};var o=$(this).width(),r=$(this).height(),s=$(this).offset().left/1+o/2-80+"px",u=$(this).offset().top/1+(r-1)+"px";return d({x:s,y:u}),!1}),$item.on("mouseleave",a,function(n){return $("[data-node=shareBtnBox]").hide(),!1}),$("body").on("click","[data-shareto]",function(n){n.preventDefault(),shareType=$(this).data("shareto"),t.type=shareType,e=e||function(){},e.call(null,t),v(t)}),$("body").on("mouseenter","[data-node=shareBtnBox]",function(){$(this).show()}),$("body").on("mouseleave","[data-node=shareBtnBox]",function(){$(this).hide()})};n.exports={share:v,shareto:h,shareItem:x,shareWithKid:g}}).call(a,e(1))},124:function(n,a,e){(function(a){"use strict";var e=function(n){return a.wap_url+"q.php?t="+encodeURIComponent(n)};n.exports=e}).call(a,e(4))},157:function(n,a,e){(function(a){"use strict";var e=a.imgpath+"/images/emoji/",t=".png",i=[{name:"微笑",url:"weixiao"},{name:"色",url:"se"},{name:"亲亲",url:"qinqin"},{name:"得意",url:"deyi"},{name:"流泪",url:"liulei"},{name:"害羞",url:"haixiu"},{name:"闭嘴",url:"bizui"},{name:"鼓掌",url:"guzhang"},{name:"大哭",url:"daku"},{name:"尴尬",url:"ganga"},{name:"生气",url:"shengqi"},{name:"调皮",url:"tiaopi"},{name:"呲牙",url:"ciya"},{name:"惊讶",url:"jingya"},{name:"委屈",url:"weiqu"},{name:"吐血",url:"tuxue"},{name:"冷汗",url:"lenghan"},{name:"抓狂",url:"zhuakuang"},{name:"难过",url:"nanguo"},{name:"偷笑",url:"touxiao"},{name:"白眼",url:"baiyan"},{name:"不屑",url:"buxie"},{name:"快哭了",url:"kuaikule"}],o=[{name:"困",url:"kun"},{name:"装酷",url:"zhuangku"},{name:"大笑",url:"daxiao"},{name:"偷瞄",url:"toumiao"},{name:"奋斗",url:"fendou"},{name:"咒骂",url:"zhouma"},{name:"疑问",url:"yiwen"},{name:"晕",url:"yun"},{name:"捶打",url:"chuida"},{name:"再见",url:"zaijian"},{name:"抠鼻",url:"koubi"},{name:"发呆",url:"fadai"},{name:"坏笑",url:"huaixiao"},{name:"哈欠",url:"haqian"},{name:"鄙视",url:"bishi"},{name:"睡觉",url:"shuijiao"},{name:"饿",url:"e"},{name:"阴险",url:"yinxian"},{name:"难受",url:"nanshou"},{name:"可怜",url:"kelian"},{name:"撇嘴",url:"piezui"},{name:"石化",url:"shihua"},{name:"泪眼",url:"leiyan"}],r=function(n){for(var a=0,i=n.length;a<i;a++){var o=n[a];o.url=e+o.url+t}return n};n.exports=r(i.concat(o))}).call(a,e(4))},158:function(n,a,e){(function(a){"use strict";var e=a.imgpath+"/images/emoji/",t=".png",i={"亲":{name:"亲亲",url:e+"qinqin"+t},"愤怒":{name:"生气",url:e+"shengqi"+t},"惊恐":{name:"惊讶",url:e+"jingya"+t},"迷茫":{name:"委屈",url:e+"weiqu"+t},"伤心":{name:"难过",url:e+"nanguo"+t},"努力":{name:"奋斗",url:e+"fendou"+t},YY:{name:" 坏笑",url:e+"huaixiao"+t},"恶心":{name:"难受",url:e+"nanshou"+t}};n.exports=i}).call(a,e(4))},159:function(n,a,e){var t=e(26);n.exports=t("src/js/module/popup/face/face",function(n,a){"use strict";var e=this,t=(e.$helpers,e.$each),i=n.list,o=(n.v,n.i,n.face,n.$index,e.$escape),r=n.page,s="";return s+='<div data-node="faceBox" class="imoj-box" style="position: absolute;z-index: 9999;display:none"> <em class="sanjiao"></em> <div data-node="faceList" class="imoj-list"> ',t(i,function(n,a){s+=' <div class="imoj-content clearfix ',a&&(s+="hide"),s+='"> ',t(n,function(n,a){s+=' <a href="javascript:;"> <img width="22" height="22" data-face="[',s+=o(n.name),s+=']" src="',s+=o(n.url),s+='" alt="',s+=o(n.name),s+='" title="',s+=o(n.name),s+='"> </a> '}),s+=" </div> "}),s+=' </div> <ul data-action="facePage" class="pagination"> ',t(r,function(n,a){s+=" <li ",0==a&&(s+='class="active"'),s+=">",s+=o(a+1),s+="</li> "}),s+=" </ul> </div>",new String(s)})},233:function(n,a){"use strict";var e=function(n,a){return n?n.replace(a||/[&<">'](?:(amp|lt|ldquo|rdquo|quot|gt|#39|nbsp|#\d+);)?/g,function(n,a){return a?n:{"<":"&lt;","&":"&amp;",'"':"&quot;","“":"&ldquo;","”":"&rdquo;",">":"&gt;","'":"&#39;"}[n]}):""};n.exports=e},234:function(n,a,e){(function($){"use strict";var a,t,i=e(157),o=e(158),r=e(159),s=0,u={},c=function(n){for(var a=n.length,e=24,t=Math.ceil(a/e),i=[],o=0;o<t;o++){i[o]=[];var r=e*(o+1);r=r>a?a:r;for(var s=o*e;s<r;s++){var c=n[s];i[o].push(c),u[c.name]=c.url}}return{page:new Array(t),list:i}},l=function(n,a){m(0),$("[data-node=faceBox]").css({left:n+"px",top:a+"px"}).show()},d=function(){$("[data-node=faceBox]").hide()},m=function(n){n=n||s,$("[data-action=facePage] > li").eq(n).addClass("active").siblings("li").removeClass("active"),$("[data-node=faceList] > div").eq(n).removeClass("hide").siblings("div").addClass("hide")},p=function(n,e){$("body").on("click","[data-face]",function(i){i.preventDefault(),i.stopPropagation(),a=$(this).data("face"),t=$(this).attr("src"),n({reg:a,url:t}),e!==!1&&$("[data-node=faceBox]").hide()})},f=function(n){var a=c(i),e=r(a);$("body").append(e),n()},h=function(){$("body").on("click","[data-node=faceBox]",function(n){n.stopPropagation()}),$(document).on("click",function(){$("[data-node=faceBox]").hide()}),$("[data-node=faceBox]").on("mouseenter","[data-action=facePage] > li",function(){var n=$(this).index();m(n)})},g=function(n){var a=!0;for(var e in n){a=!1;break}return a},v=function(n){var a=/(\[([\s\S]+?)\])/g;return g(u)&&c(i),n.replace(a,function(n,a,e){var t=u[e];if(t)return'<img width="22" height="22" src="'+t+'" />';var i=o[e];return i?'<img width="22" height="22" src="'+i.url+'" />':n})},x=function(){f(h)};n.exports={init:x,insert:p,show:l,hide:d,parseEmoji:v}}).call(a,e(1))},255:function(n,a,e){(function(a){"use strict";var t=e(26),i=function(n){return"0"!==a.islogin&&a.userId==n?a.i_domain+"index":a.group_domain+"ta/"+n+".html"};n.exports=function(){t.helper("othersLink",i)}}).call(a,e(4))},284:function(n,a,e){(function($,a){"use strict";var t=e(2),i=e(28),o=e(37),r=e(36).circle,s=function(n){var e=n.data?n.data.selector||$(this):$(this),s=n.data?n.data.done||function(){}:function(){},u=e.attr("data-groupid"),c={event_id:e.attr("event-id"),group_id:u,circle_type:a.s_c};if(a.topicid&&(c.topic_id=a.topicid),void 0!==window.BP&&BP.send(c),1==e.attr("data-verif"))return void o("您已提交申请，请等待审核");var l=e.attr("data-firing");if(1==l)return!1;e.attr("data-firing",1);var d=e.attr("data-userid"),m=function n(){t.post(i.get("joinCircle"),{validate:!0,data:{groupid:u,imid:"b_"+d},onLogin:function(){a.islogin="1",n()}}).done(function(n){n&&200===n.code&&n.success?(0===n.data.status?(o(r.joinSuccess),e.html("退出圈子")):1===n.data.status&&($("[data-node=QRcode]").attr("src",a.imgpath+"/images/public/down-ma.png"),$(".dialog_p").css({"text-align":"center",margin:"10px 0px","font-size":"1.5em"}),$("[data-node=QRcode]").css({"margin-left":"173px"}),e.css("background","#CCC").html("审核中").off()),s("join")):"圈子拒绝加入"==n.message||403===n.code?o(r.cannotJoinCircle):409===n.code?(o(n.message),s("join")):o(n.message)}).fail(function(){}).always(function(){e.attr("data-firing",0)})},p=function(){t.post(i.get("exitCircle"),{data:{groupid:u}}).done(function(n){n&&200==n.code&&n.success?(o(r.exit),a.member_type=1,e.html("加入圈子")):410==n.code?o(r.dissolved,{ok:function(){location.reload()},onclose:function(){location.reload()}}):404==n.code&&location.reload()}).fail(function(){}).always(function(){e.attr("data-firing",0)})};return 0==a.member_type?p():m(),!1};n.exports=s}).call(a,e(1),e(4))},301:function(n,a,e){(function($,a){"use strict";var t=e(284),i=e(3),o=e(37),r=e(36).circle,s=function(){var n=$("[data-node=postTopic]");$("[data-action=joinGroup]").on("click",{done:function(n){"join"==n?a.member_type=0:"exit"==n&&(a.member_type=1)}},t),n.on("click",function(){var n=this,e=a.member_type;return"0"==a.islogin?(i(),!1):void("1"==e?"2"==a.approval_type?o(r.cannotJoin):o(r.unJoin,{okValue:"加入圈子",ok:function(){$("[data-action=joinGroup]").click()}}):"2"==e?o(r.review):window.open(a.group_domain+JSON.parse($(n).attr("bp-data")).publish_url))})};n.exports={init:s}}).call(a,e(1),e(4))},302:function(n,a,e){(function($,a){"use strict";var t=e(123).shareto,i=function(){function n(n){var e=/\w+\.(jpg|gif|bmp|png)$/;return n==a.imgpath+"/images/public/circle-default.png"&&(n=!1),e.test(n)}var e=$("body"),i=$("[data-node=groupPic]").attr("src"),o=function(){var e={url:location.href,title:$("[data-node=groupName]").html(),pic:n(i)?i:a.imgpath+"/images/public/logo.jpg",summary:"这儿有我们志趣相投的小伙伴，快加入我们吧！",site:"国美Plus"};return e},r=function(n){return function(){var a=o();return t[n](a),!1}};e.on("click","[data-node=wx]",function(){var n=a.group_id;t.weixin({url:a.wap_url+"group/index?groupId="+n})}),e.on("click","[data-node=wb]",r("sina")),e.on("click","[data-node=qq]",r("qq")),e.on("click","[data-node=qzone]",r("qzone"))};n.exports={init:i}}).call(a,e(1),e(4))},303:function(n,a,e){"use strict";var t=e(26),i=e(42),o=e(43),r=e(233),s=e(234),u=function(n,a){var e,t=0;for(var u in n)n[u]===!0&&t++;if(0!==t){var c=t;e=a-8*c}else e=a;var l,d=o(n.str);return l=d>e?i(n.str,e)+"...":n.str,s.parseEmoji(r(l))};n.exports=function(){t.helper("truncateLenByJson",u)}}});