define("vendors/dropload",function(o,s,t){var e=o("vendors/zepto");!function(o){"use strict";function s(o){o.touches||(o.touches=o.originalEvent.touches)}function t(s,t){t._startY=s.touches[0].pageY,t.opts.scrollArea==window?(t._meHeight=i.height(),t._childrenHeight=l.height()):(t._meHeight=o(window).height(),t._childrenHeight=t.$element.height());var e=t.$scrollArea.parent().css("overflow");!e||"scroll"!=e&&"auto"!=e?t._scrollTop=o(window).scrollTop():t._scrollTop=t.$scrollArea.scrollTop()}function e(s,t){t._curY=s.touches[0].pageY,t._moveY=t._curY-t._startY,t._moveY>0?t.direction="down":t._moveY<0&&(t.direction="up");var e=Math.abs(t._moveY);if(""!=t.opts.loadUpFn&&t._scrollTop<=0&&"down"==t.direction&&(s.preventDefault(),t.insertDOM||(t.$element.prepend('<div class="'+t.opts.domUp.domClass+'"></div>'),t.insertDOM=!0),t.$domUp=o("."+t.opts.domUp.domClass),a(t.$domUp,0),e<=t.opts.distance?(t._offsetY=e,t.$domUp.html("").append(t.opts.domUp.domRefresh)):e>t.opts.distance&&e<=2*t.opts.distance?(t._offsetY=t.opts.distance+.5*(e-t.opts.distance),t.$domUp.html("").append(t.opts.domUp.domUpdate)):t._offsetY=t.opts.distance+.5*t.opts.distance+.2*(e-2*t.opts.distance),t.$domUp.css({height:t._offsetY})),""!=t.opts.loadDownFn&&t._childrenHeight<=t._meHeight+t._scrollTop&&"up"==t.direction){s.preventDefault(),t.insertDOM||(t.$element.append('<div class="'+t.opts.domDown.domClass+'"></div>'),t.insertDOM=!0),t.$domDown=o("."+t.opts.domDown.domClass),a(t.$domDown,0),e<=t.opts.distance?(t._offsetY=e,t.$domDown.html("").append(t.opts.domDown.domRefresh)):e>t.opts.distance&&e<=2*t.opts.distance?(t._offsetY=t.opts.distance+.5*(e-t.opts.distance),t.$domDown.html("").append(t.opts.domDown.domUpdate)):t._offsetY=t.opts.distance+.5*t.opts.distance+.2*(e-2*t.opts.distance),t.$domDown.css({height:t._offsetY,"max-height":p+"px"});var n=t._offsetY*-1;t.$scrollArea.css({transform:"translate(0,"+n+"px)"})}}function n(s){s.$domDown.css({"min-height":p+"px"});var t=Math.abs(s._moveY);s.insertDOM&&("down"==s.direction?(s.$domResult=s.$domUp,s.domLoad=s.opts.domUp.domLoad):"up"==s.direction&&(s.$domResult=s.$domDown,s.domLoad=s.opts.domDown.domLoad),a(s.$domResult,300),t>s.opts.distance?(s.$domResult.css({height:s.$domResult.children().height()}),s.$domResult.html("").append(s.domLoad),d(s)):s.$domResult.css({height:"0"}).on("webkitTransitionEnd",function(){s.insertDOM=!1,o(this).remove(),s.$scrollArea.css({transform:"translate(0,0)"})}),s._moveY=0,s.$scrollArea.css({transform:"translate(0,"+p*-1+"px)"}))}function d(o){o.loading=!0,""!=o.opts.loadUpFn&&"down"==o.direction?o.opts.loadUpFn(o):""!=o.opts.loadDownFn&&"up"==o.direction&&o.opts.loadDownFn(o)}function a(o,s){o.css({"-webkit-transition":"all "+s+"ms",transition:"all "+s+"ms"})}var i=o(window),l=o(document),p=50;o.fn.dropload=function(o){return new r(this,o)};var r=function(s,t){var e=this;e.$element=o(s),e.insertDOM=!1,e.loading=!1,e.isLock=!1,e.init(t)};r.prototype.init=function(d){var a=this;a.opts=o.extend({},{scrollArea:a.$element,domUp:{domClass:"dropload-up",domRefresh:'<div class="dropload-refresh"><span class="loading"></span>↓下拉刷新</div>',domUpdate:'<div class="dropload-update"><span class="loading"></span>↑释放更新</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>加载中...</div>'},domDown:{domClass:"dropload-down",domRefresh:'<div class="dropload-refresh">↑上拉加载更多</div>',domUpdate:'<div class="dropload-update">↓释放加载</div>',domLoad:'<div class="dropload-load"><span class="loading"></span>加载中...</div>'},distance:50,loadUpFn:"",loadDownFn:""},d),a.opts.scrollArea==window?a.$scrollArea=i:a.$scrollArea=a.opts.scrollArea,a.$element.on("touchstart",function(o){a.loading||a.isLock||(s(o),t(o,a))}),a.$element.on("touchmove",function(o){a.loading||a.isLock||(s(o,a),e(o,a))}),a.$element.on("touchend",function(){a.loading||a.isLock||n(a)})},r.prototype.lock=function(){var o=this;o.isLock=!0},r.prototype.unlock=function(){var o=this;o.isLock=!1},r.prototype.resetload=function(){var s=this;s.$domResult&&s.$domResult.css({height:"0"}).on("webkitTransitionEnd",function(){s.loading=!1,s.insertDOM=!1,o(this).remove(),s.$scrollArea.css({transform:"translate(0,0)"})})}}(e),t.exports=e});